(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function q1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var V0={exports:{}},Xc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function h2(){if(Fv)return Xc;Fv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:s,key:u,ref:a!==void 0?a:null,props:l}}return Xc.Fragment=e,Xc.jsx=t,Xc.jsxs=t,Xc}var zv;function f2(){return zv||(zv=1,V0.exports=h2()),V0.exports}var o=f2(),B0={exports:{}},lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function m2(){if(Hv)return lt;Hv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function E(z){return z===null||typeof z!="object"?null:(z=T&&z[T]||z["@@iterator"],typeof z=="function"?z:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,C={};function D(z,Q,fe){this.props=z,this.context=Q,this.refs=C,this.updater=fe||M}D.prototype.isReactComponent={},D.prototype.setState=function(z,Q){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Q,"setState")},D.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function G(){}G.prototype=D.prototype;function I(z,Q,fe){this.props=z,this.context=Q,this.refs=C,this.updater=fe||M}var q=I.prototype=new G;q.constructor=I,A(q,D.prototype),q.isPureReactComponent=!0;var X=Array.isArray;function J(){}var j={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function R(z,Q,fe){var ie=fe.ref;return{$$typeof:n,type:z,key:Q,ref:ie!==void 0?ie:null,props:fe}}function P(z,Q){return R(z.type,Q,z.props)}function U(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function F(z){var Q={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(fe){return Q[fe]})}var O=/\/+/g;function Ae(z,Q){return typeof z=="object"&&z!==null&&z.key!=null?F(""+z.key):Q.toString(36)}function Le(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(J,J):(z.status="pending",z.then(function(Q){z.status==="pending"&&(z.status="fulfilled",z.value=Q)},function(Q){z.status==="pending"&&(z.status="rejected",z.reason=Q)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Y(z,Q,fe,ie,ce){var Te=typeof z;(Te==="undefined"||Te==="boolean")&&(z=null);var xe=!1;if(z===null)xe=!0;else switch(Te){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(z.$$typeof){case n:case e:xe=!0;break;case y:return xe=z._init,Y(xe(z._payload),Q,fe,ie,ce)}}if(xe)return ce=ce(z),xe=ie===""?"."+Ae(z,0):ie,X(ce)?(fe="",xe!=null&&(fe=xe.replace(O,"$&/")+"/"),Y(ce,Q,fe,"",function(St){return St})):ce!=null&&(U(ce)&&(ce=P(ce,fe+(ce.key==null||z&&z.key===ce.key?"":(""+ce.key).replace(O,"$&/")+"/")+xe)),Q.push(ce)),1;xe=0;var nt=ie===""?".":ie+":";if(X(z))for(var Qe=0;Qe<z.length;Qe++)ie=z[Qe],Te=nt+Ae(ie,Qe),xe+=Y(ie,Q,fe,Te,ce);else if(Qe=E(z),typeof Qe=="function")for(z=Qe.call(z),Qe=0;!(ie=z.next()).done;)ie=ie.value,Te=nt+Ae(ie,Qe++),xe+=Y(ie,Q,fe,Te,ce);else if(Te==="object"){if(typeof z.then=="function")return Y(Le(z),Q,fe,ie,ce);throw Q=String(z),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return xe}function oe(z,Q,fe){if(z==null)return z;var ie=[],ce=0;return Y(z,ie,"","",function(Te){return Q.call(fe,Te,ce++)}),ie}function _e(z){if(z._status===-1){var Q=z._result;Q=Q(),Q.then(function(fe){(z._status===0||z._status===-1)&&(z._status=1,z._result=fe)},function(fe){(z._status===0||z._status===-1)&&(z._status=2,z._result=fe)}),z._status===-1&&(z._status=0,z._result=Q)}if(z._status===1)return z._result.default;throw z._result}var Me=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},ne={map:oe,forEach:function(z,Q,fe){oe(z,function(){Q.apply(this,arguments)},fe)},count:function(z){var Q=0;return oe(z,function(){Q++}),Q},toArray:function(z){return oe(z,function(Q){return Q})||[]},only:function(z){if(!U(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return lt.Activity=_,lt.Children=ne,lt.Component=D,lt.Fragment=t,lt.Profiler=a,lt.PureComponent=I,lt.StrictMode=s,lt.Suspense=m,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,lt.__COMPILER_RUNTIME={__proto__:null,c:function(z){return j.H.useMemoCache(z)}},lt.cache=function(z){return function(){return z.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(z,Q,fe){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ie=A({},z.props),ce=z.key;if(Q!=null)for(Te in Q.key!==void 0&&(ce=""+Q.key),Q)!N.call(Q,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&Q.ref===void 0||(ie[Te]=Q[Te]);var Te=arguments.length-2;if(Te===1)ie.children=fe;else if(1<Te){for(var xe=Array(Te),nt=0;nt<Te;nt++)xe[nt]=arguments[nt+2];ie.children=xe}return R(z.type,ce,ie)},lt.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:l,_context:z},z},lt.createElement=function(z,Q,fe){var ie,ce={},Te=null;if(Q!=null)for(ie in Q.key!==void 0&&(Te=""+Q.key),Q)N.call(Q,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ce[ie]=Q[ie]);var xe=arguments.length-2;if(xe===1)ce.children=fe;else if(1<xe){for(var nt=Array(xe),Qe=0;Qe<xe;Qe++)nt[Qe]=arguments[Qe+2];ce.children=nt}if(z&&z.defaultProps)for(ie in xe=z.defaultProps,xe)ce[ie]===void 0&&(ce[ie]=xe[ie]);return R(z,Te,ce)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(z){return{$$typeof:h,render:z}},lt.isValidElement=U,lt.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:_e}},lt.memo=function(z,Q){return{$$typeof:f,type:z,compare:Q===void 0?null:Q}},lt.startTransition=function(z){var Q=j.T,fe={};j.T=fe;try{var ie=z(),ce=j.S;ce!==null&&ce(fe,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(J,Me)}catch(Te){Me(Te)}finally{Q!==null&&fe.types!==null&&(Q.types=fe.types),j.T=Q}},lt.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},lt.use=function(z){return j.H.use(z)},lt.useActionState=function(z,Q,fe){return j.H.useActionState(z,Q,fe)},lt.useCallback=function(z,Q){return j.H.useCallback(z,Q)},lt.useContext=function(z){return j.H.useContext(z)},lt.useDebugValue=function(){},lt.useDeferredValue=function(z,Q){return j.H.useDeferredValue(z,Q)},lt.useEffect=function(z,Q){return j.H.useEffect(z,Q)},lt.useEffectEvent=function(z){return j.H.useEffectEvent(z)},lt.useId=function(){return j.H.useId()},lt.useImperativeHandle=function(z,Q,fe){return j.H.useImperativeHandle(z,Q,fe)},lt.useInsertionEffect=function(z,Q){return j.H.useInsertionEffect(z,Q)},lt.useLayoutEffect=function(z,Q){return j.H.useLayoutEffect(z,Q)},lt.useMemo=function(z,Q){return j.H.useMemo(z,Q)},lt.useOptimistic=function(z,Q){return j.H.useOptimistic(z,Q)},lt.useReducer=function(z,Q,fe){return j.H.useReducer(z,Q,fe)},lt.useRef=function(z){return j.H.useRef(z)},lt.useState=function(z){return j.H.useState(z)},lt.useSyncExternalStore=function(z,Q,fe){return j.H.useSyncExternalStore(z,Q,fe)},lt.useTransition=function(){return j.H.useTransition()},lt.version="19.2.3",lt}var qv;function ig(){return qv||(qv=1,B0.exports=m2()),B0.exports}var B=ig();const K1=q1(B);var G0={exports:{}},Zc={},F0={exports:{}},z0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv;function p2(){return Kv||(Kv=1,(function(n){function e(Y,oe){var _e=Y.length;Y.push(oe);e:for(;0<_e;){var Me=_e-1>>>1,ne=Y[Me];if(0<a(ne,oe))Y[Me]=oe,Y[_e]=ne,_e=Me;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var oe=Y[0],_e=Y.pop();if(_e!==oe){Y[0]=_e;e:for(var Me=0,ne=Y.length,z=ne>>>1;Me<z;){var Q=2*(Me+1)-1,fe=Y[Q],ie=Q+1,ce=Y[ie];if(0>a(fe,_e))ie<ne&&0>a(ce,fe)?(Y[Me]=ce,Y[ie]=_e,Me=ie):(Y[Me]=fe,Y[Q]=_e,Me=Q);else if(ie<ne&&0>a(ce,_e))Y[Me]=ce,Y[ie]=_e,Me=ie;else break e}}return oe}function a(Y,oe){var _e=Y.sortIndex-oe.sortIndex;return _e!==0?_e:Y.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var m=[],f=[],y=1,_=null,T=3,E=!1,M=!1,A=!1,C=!1,D=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function q(Y){for(var oe=t(f);oe!==null;){if(oe.callback===null)s(f);else if(oe.startTime<=Y)s(f),oe.sortIndex=oe.expirationTime,e(m,oe);else break;oe=t(f)}}function X(Y){if(A=!1,q(Y),!M)if(t(m)!==null)M=!0,J||(J=!0,F());else{var oe=t(f);oe!==null&&Le(X,oe.startTime-Y)}}var J=!1,j=-1,N=5,R=-1;function P(){return C?!0:!(n.unstable_now()-R<N)}function U(){if(C=!1,J){var Y=n.unstable_now();R=Y;var oe=!0;try{e:{M=!1,A&&(A=!1,G(j),j=-1),E=!0;var _e=T;try{t:{for(q(Y),_=t(m);_!==null&&!(_.expirationTime>Y&&P());){var Me=_.callback;if(typeof Me=="function"){_.callback=null,T=_.priorityLevel;var ne=Me(_.expirationTime<=Y);if(Y=n.unstable_now(),typeof ne=="function"){_.callback=ne,q(Y),oe=!0;break t}_===t(m)&&s(m),q(Y)}else s(m);_=t(m)}if(_!==null)oe=!0;else{var z=t(f);z!==null&&Le(X,z.startTime-Y),oe=!1}}break e}finally{_=null,T=_e,E=!1}oe=void 0}}finally{oe?F():J=!1}}}var F;if(typeof I=="function")F=function(){I(U)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Ae=O.port2;O.port1.onmessage=U,F=function(){Ae.postMessage(null)}}else F=function(){D(U,0)};function Le(Y,oe){j=D(function(){Y(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(Y){switch(T){case 1:case 2:case 3:var oe=3;break;default:oe=T}var _e=T;T=oe;try{return Y()}finally{T=_e}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(Y,oe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var _e=T;T=Y;try{return oe()}finally{T=_e}},n.unstable_scheduleCallback=function(Y,oe,_e){var Me=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Me+_e:Me):_e=Me,Y){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=_e+ne,Y={id:y++,callback:oe,priorityLevel:Y,startTime:_e,expirationTime:ne,sortIndex:-1},_e>Me?(Y.sortIndex=_e,e(f,Y),t(m)===null&&Y===t(f)&&(A?(G(j),j=-1):A=!0,Le(X,_e-Me))):(Y.sortIndex=ne,e(m,Y),M||E||(M=!0,J||(J=!0,F()))),Y},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(Y){var oe=T;return function(){var _e=T;T=oe;try{return Y.apply(this,arguments)}finally{T=_e}}}})(z0)),z0}var $v;function g2(){return $v||($v=1,F0.exports=p2()),F0.exports}var H0={exports:{}},ns={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function x2(){if(Yv)return ns;Yv=1;var n=ig();function e(m){var f="https://react.dev/errors/"+m;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,f,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:m,containerInfo:f,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,f){if(m==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ns.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ns.createPortal=function(m,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return l(m,f,null,y)},ns.flushSync=function(m){var f=u.T,y=s.p;try{if(u.T=null,s.p=2,m)return m()}finally{u.T=f,s.p=y,s.d.f()}},ns.preconnect=function(m,f){typeof m=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(m,f))},ns.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},ns.preinit=function(m,f){if(typeof m=="string"&&f&&typeof f.as=="string"){var y=f.as,_=h(y,f.crossOrigin),T=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?s.d.S(m,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:E}):y==="script"&&s.d.X(m,{crossOrigin:_,integrity:T,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ns.preinitModule=function(m,f){if(typeof m=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=h(f.as,f.crossOrigin);s.d.M(m,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(m)},ns.preload=function(m,f){if(typeof m=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,_=h(y,f.crossOrigin);s.d.L(m,y,{crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ns.preloadModule=function(m,f){if(typeof m=="string")if(f){var y=h(f.as,f.crossOrigin);s.d.m(m,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(m)},ns.requestFormReset=function(m){s.d.r(m)},ns.unstable_batchedUpdates=function(m,f){return m(f)},ns.useFormState=function(m,f,y){return u.H.useFormState(m,f,y)},ns.useFormStatus=function(){return u.H.useHostTransitionStatus()},ns.version="19.2.3",ns}var Jv;function y2(){if(Jv)return H0.exports;Jv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),H0.exports=x2(),H0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function b2(){if(Qv)return Zc;Qv=1;var n=g2(),e=ig(),t=y2();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,c=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(c=r.return),i=r.return;while(i)}return r.tag===3?c:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(s(188))}function f(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var c=i,d=r;;){var b=c.return;if(b===null)break;var v=b.alternate;if(v===null){if(d=b.return,d!==null){c=d;continue}break}if(b.child===v.child){for(v=b.child;v;){if(v===c)return m(b),i;if(v===d)return m(b),r;v=v.sibling}throw Error(s(188))}if(c.return!==d.return)c=b,d=v;else{for(var w=!1,L=b.child;L;){if(L===c){w=!0,c=b,d=v;break}if(L===d){w=!0,d=b,c=v;break}L=L.sibling}if(!w){for(L=v.child;L;){if(L===c){w=!0,c=v,d=b;break}if(L===d){w=!0,d=v,c=b;break}L=L.sibling}if(!w)throw Error(s(189))}}if(c.alternate!==d)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?i:r}function y(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=y(i),r!==null)return r;i=i.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),I=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function F(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var O=Symbol.for("react.client.reference");function Ae(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===O?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case D:return"Profiler";case C:return"StrictMode";case X:return"Suspense";case J:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case M:return"Portal";case I:return i.displayName||"Context";case G:return(i._context.displayName||"Context")+".Consumer";case q:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case j:return r=i.displayName||null,r!==null?r:Ae(i.type)||"Memo";case N:r=i._payload,i=i._init;try{return Ae(i(r))}catch{}}return null}var Le=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Me=[],ne=-1;function z(i){return{current:i}}function Q(i){0>ne||(i.current=Me[ne],Me[ne]=null,ne--)}function fe(i,r){ne++,Me[ne]=i.current,i.current=r}var ie=z(null),ce=z(null),Te=z(null),xe=z(null);function nt(i,r){switch(fe(Te,r),fe(ce,i),fe(ie,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?dv(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=dv(r),i=hv(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Q(ie),fe(ie,i)}function Qe(){Q(ie),Q(ce),Q(Te)}function St(i){i.memoizedState!==null&&fe(xe,i);var r=ie.current,c=hv(r,i.type);r!==c&&(fe(ce,i),fe(ie,c))}function At(i){ce.current===i&&(Q(ie),Q(ce)),xe.current===i&&(Q(xe),Yc._currentValue=_e)}var at,Ge;function ue(i){if(at===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);at=r&&r[1]||"",Ge=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+at+i+Ge}var Oe=!1;function et(i,r){if(!i||Oe)return"";Oe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(le){var ae=le}Reflect.construct(i,[],ye)}else{try{ye.call()}catch(le){ae=le}i.call(ye.prototype)}}else{try{throw Error()}catch(le){ae=le}(ye=i())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(le){if(le&&ae&&typeof le.stack=="string")return[le.stack,ae.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),w=v[0],L=v[1];if(w&&L){var H=w.split(`
`),se=L.split(`
`);for(b=d=0;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;for(;b<se.length&&!se[b].includes("DetermineComponentFrameRoot");)b++;if(d===H.length||b===se.length)for(d=H.length-1,b=se.length-1;1<=d&&0<=b&&H[d]!==se[b];)b--;for(;1<=d&&0<=b;d--,b--)if(H[d]!==se[b]){if(d!==1||b!==1)do if(d--,b--,0>b||H[d]!==se[b]){var de=`
`+H[d].replace(" at new "," at ");return i.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",i.displayName)),de}while(1<=d&&0<=b);break}}}finally{Oe=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?ue(c):""}function We(i,r){switch(i.tag){case 26:case 27:case 5:return ue(i.type);case 16:return ue("Lazy");case 13:return i.child!==r&&r!==null?ue("Suspense Fallback"):ue("Suspense");case 19:return ue("SuspenseList");case 0:case 15:return et(i.type,!1);case 11:return et(i.type.render,!1);case 1:return et(i.type,!0);case 31:return ue("Activity");default:return""}}function Rn(i){try{var r="",c=null;do r+=We(i,c),c=i,i=i.return;while(i);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Mt=Object.prototype.hasOwnProperty,xt=n.unstable_scheduleCallback,Gt=n.unstable_cancelCallback,oi=n.unstable_shouldYield,Bn=n.unstable_requestPaint,qt=n.unstable_now,Pt=n.unstable_getCurrentPriorityLevel,Tn=n.unstable_ImmediatePriority,Ft=n.unstable_UserBlockingPriority,ws=n.unstable_NormalPriority,Vs=n.unstable_LowPriority,ta=n.unstable_IdlePriority,Ai=n.log,Ne=n.unstable_setDisableYieldValue,Se=null,we=null;function ze(i){if(typeof Ai=="function"&&Ne(i),we&&typeof we.setStrictMode=="function")try{we.setStrictMode(Se,i)}catch{}}var st=Math.clz32?Math.clz32:Gn,Lt=Math.log,Mn=Math.LN2;function Gn(i){return i>>>=0,i===0?32:31-(Lt(i)/Mn|0)|0}var Ut=256,pn=262144,Xt=4194304;function ls(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Fn(i,r,c){var d=i.pendingLanes;if(d===0)return 0;var b=0,v=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var L=d&134217727;return L!==0?(d=L&~v,d!==0?b=ls(d):(w&=L,w!==0?b=ls(w):c||(c=L&~i,c!==0&&(b=ls(c))))):(L=d&~v,L!==0?b=ls(L):w!==0?b=ls(w):c||(c=d&~i,c!==0&&(b=ls(c)))),b===0?0:r!==0&&r!==b&&(r&v)===0&&(v=b&-b,c=r&-r,v>=c||v===32&&(c&4194048)!==0)?r:b}function Ot(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Je(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ns(){var i=Xt;return Xt<<=1,(Xt&62914560)===0&&(Xt=4194304),i}function zn(i){for(var r=[],c=0;31>c;c++)r.push(i);return r}function Ci(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function lc(i,r,c,d,b,v){var w=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var L=i.entanglements,H=i.expirationTimes,se=i.hiddenUpdates;for(c=w&~c;0<c;){var de=31-st(c),ye=1<<de;L[de]=0,H[de]=-1;var ae=se[de];if(ae!==null)for(se[de]=null,de=0;de<ae.length;de++){var le=ae[de];le!==null&&(le.lane&=-536870913)}c&=~ye}d!==0&&na(i,d,0),v!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=v&~(w&~r))}function na(i,r,c){i.pendingLanes|=r,i.suspendedLanes&=~r;var d=31-st(r);i.entangledLanes|=r,i.entanglements[d]=i.entanglements[d]|1073741824|c&261930}function zr(i,r){var c=i.entangledLanes|=r;for(i=i.entanglements;c;){var d=31-st(c),b=1<<d;b&r|i[d]&r&&(i[d]|=r),c&=~b}}function Fa(i,r){var c=r&-r;return c=(c&42)!==0?1:sa(c),(c&(i.suspendedLanes|r))!==0?0:c}function sa(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function li(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Vo(){var i=oe.p;return i!==0?i:(i=window.event,i===void 0?32:Pv(i.type))}function ks(i,r){var c=oe.p;try{return oe.p=i,r()}finally{oe.p=c}}var As=Math.random().toString(36).slice(2),un="__reactFiber$"+As,Sn="__reactProps$"+As,Bs="__reactContainer$"+As,ia="__reactEvents$"+As,cc="__reactListeners$"+As,Bo="__reactHandles$"+As,Go="__reactResources$"+As,Gs="__reactMarker$"+As;function aa(i){delete i[un],delete i[Sn],delete i[ia],delete i[cc],delete i[Bo]}function Hn(i){var r=i[un];if(r)return r;for(var c=i.parentNode;c;){if(r=c[Bs]||c[un]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(i=bv(i);i!==null;){if(c=i[un])return c;i=bv(i)}return r}i=c,c=i.parentNode}return null}function cs(i){if(i=i[un]||i[Bs]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function ts(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Fs(i){var r=i[Go];return r||(r=i[Go]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function dn(i){i[Gs]=!0}var Hr=new Set,qr={};function zs(i,r){Hs(i,r),Hs(i+"Capture",r)}function Hs(i,r){for(qr[i]=r,i=0;i<r.length;i++)Hr.add(r[i])}var Kr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$r={},Yr={};function Fo(i){return Mt.call(Yr,i)?!0:Mt.call($r,i)?!1:Kr.test(i)?Yr[i]=!0:($r[i]=!0,!1)}function ra(i,r,c){if(Fo(r))if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+c)}}function K(i,r,c){if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+c)}}function he(i,r,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(r,c,""+d)}}function me(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ve(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ie(i,r,c){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,v=d.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return b.call(this)},set:function(w){c=""+w,v.call(this,w)}}),Object.defineProperty(i,r,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Ee(i){if(!i._valueTracker){var r=Ve(i)?"checked":"value";i._valueTracker=Ie(i,r,""+i[r])}}function He(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var c=r.getValue(),d="";return i&&(d=Ve(i)?i.checked?"true":"false":i.value),i=d,i!==c?(r.setValue(i),!0):!1}function je(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ze=/[\n"\\]/g;function qe(i){return i.replace(Ze,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ye(i,r,c,d,b,v,w,L){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),r!=null?w==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+me(r)):i.value!==""+me(r)&&(i.value=""+me(r)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),r!=null?Et(i,w,me(r)):c!=null?Et(i,w,me(c)):d!=null&&i.removeAttribute("value"),b==null&&v!=null&&(i.defaultChecked=!!v),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?i.name=""+me(L):i.removeAttribute("name")}function mt(i,r,c,d,b,v,w,L){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),r!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){Ee(i);return}c=c!=null?""+me(c):"",r=r!=null?""+me(r):c,L||r===i.value||(i.value=r),i.defaultValue=r}d=d??b,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=L?i.checked:!!d,i.defaultChecked=!!d,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w),Ee(i)}function Et(i,r,c){r==="number"&&je(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Vt(i,r,c,d){if(i=i.options,r){r={};for(var b=0;b<c.length;b++)r["$"+c[b]]=!0;for(c=0;c<i.length;c++)b=r.hasOwnProperty("$"+i[c].value),i[c].selected!==b&&(i[c].selected=b),b&&d&&(i[c].defaultSelected=!0)}else{for(c=""+me(c),r=null,b=0;b<i.length;b++){if(i[b].value===c){i[b].selected=!0,d&&(i[b].defaultSelected=!0);return}r!==null||i[b].disabled||(r=i[b])}r!==null&&(r.selected=!0)}}function gn(i,r,c){if(r!=null&&(r=""+me(r),r!==i.value&&(i.value=r),c==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=c!=null?""+me(c):""}function Zt(i,r,c,d){if(r==null){if(d!=null){if(c!=null)throw Error(s(92));if(Le(d)){if(1<d.length)throw Error(s(93));d=d[0]}c=d}c==null&&(c=""),r=c}c=me(r),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d),Ee(i)}function en(i,r){if(r){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=r;return}}i.textContent=r}var Ii=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function oa(i,r,c){var d=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":d?i.setProperty(r,c):typeof c!="number"||c===0||Ii.has(r)?r==="float"?i.cssFloat=c:i[r]=(""+c).trim():i[r]=c+"px"}function Ri(i,r,c){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var b in r)d=r[b],r.hasOwnProperty(b)&&c[b]!==d&&oa(i,b,d)}else for(var v in r)r.hasOwnProperty(v)&&oa(i,v,r[v])}function qs(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ci=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function za(i){return ci.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ui(){}var uc=null;function Ks(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ha=null,Di=null;function Jr(i){var r=cs(i);if(r&&(i=r.stateNode)){var c=i[Sn]||null;e:switch(i=r.stateNode,r.type){case"input":if(Ye(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+qe(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var d=c[r];if(d!==i&&d.form===i.form){var b=d[Sn]||null;if(!b)throw Error(s(90));Ye(d,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(r=0;r<c.length;r++)d=c[r],d.form===i.form&&He(d)}break e;case"textarea":gn(i,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&Vt(i,!!c.multiple,r,!1)}}}var zo=!1;function qa(i,r,c){if(zo)return i(r,c);zo=!0;try{var d=i(r);return d}finally{if(zo=!1,(Ha!==null||Di!==null)&&(Id(),Ha&&(r=Ha,i=Di,Di=Ha=null,Jr(r),i)))for(r=0;r<i.length;r++)Jr(i[r])}}function di(i,r){var c=i.stateNode;if(c===null)return null;var d=c[Sn]||null;if(d===null)return null;c=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(s(231,r,typeof c));return c}var $s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qr=!1;if($s)try{var Kt={};Object.defineProperty(Kt,"passive",{get:function(){Qr=!0}}),window.addEventListener("test",Kt,Kt),window.removeEventListener("test",Kt,Kt)}catch{Qr=!1}var ji=null,dc=null,Wr=null;function hc(){if(Wr)return Wr;var i,r=dc,c=r.length,d,b="value"in ji?ji.value:ji.textContent,v=b.length;for(i=0;i<c&&r[i]===b[i];i++);var w=c-i;for(d=1;d<=w&&r[c-d]===b[v-d];d++);return Wr=b.slice(i,1<d?1-d:void 0)}function Xr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function la(){return!0}function hi(){return!1}function qn(i){function r(c,d,b,v,w){this._reactName=c,this._targetInst=b,this.type=d,this.nativeEvent=v,this.target=w,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(c=i[L],this[L]=c?c(v):v[L]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?la:hi,this.isPropagationStopped=hi,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),r}var ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pi=qn(ca),Ka=_({},ca,{view:0,detail:0}),fc=qn(Ka),$a,Ho,Li,qo=_({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ya,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Li&&(Li&&i.type==="mousemove"?($a=i.screenX-Li.screenX,Ho=i.screenY-Li.screenY):Ho=$a=0,Li=i),$a)},movementY:function(i){return"movementY"in i?i.movementY:Ho}}),mc=qn(qo),Zr=_({},qo,{dataTransfer:0}),Ou=qn(Zr),Vu=_({},Ka,{relatedTarget:0}),eo=qn(Vu),pc=_({},ca,{animationName:0,elapsedTime:0,pseudoElement:0}),Bu=qn(pc),Ko=_({},ca,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Gu=qn(Ko),Fu=_({},ca,{data:0}),Ui=qn(Fu),zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ku(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=qu[i])?!!r[i]:!1}function Ya(){return Ku}var us=_({},Ka,{key:function(i){if(i.key){var r=zu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Xr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Hu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ya,charCode:function(i){return i.type==="keypress"?Xr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Xr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),$u=qn(us),Yu=_({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ua=qn(Yu),x=_({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ya}),S=qn(x),k=_({},ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),V=qn(k),ee=_({},qo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),re=qn(ee),ke=_({},ca,{newState:0,oldState:0}),ut=qn(ke),xn=[9,13,27,32],Dt=$s&&"CompositionEvent"in window,an=null;$s&&"documentMode"in document&&(an=document.documentMode);var Ys=$s&&"TextEvent"in window&&!an,Oi=$s&&(!Dt||an&&8<an&&11>=an),fi=" ",mi=!1;function to(i,r){switch(i){case"keyup":return xn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $o(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Yo=!1;function Lk(i,r){switch(i){case"compositionend":return $o(r);case"keypress":return r.which!==32?null:(mi=!0,fi);case"textInput":return i=r.data,i===fi&&mi?null:i;default:return null}}function Uk(i,r){if(Yo)return i==="compositionend"||!Dt&&to(i,r)?(i=hc(),Wr=dc=ji=null,Yo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Oi&&r.locale!=="ko"?null:r.data;default:return null}}var Ok={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tx(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Ok[i.type]:r==="textarea"}function Sx(i,r,c,d){Ha?Di?Di.push(d):Di=[d]:Ha=d,r=Ud(r,"onChange"),0<r.length&&(c=new Pi("onChange","change",null,c,d),i.push({event:c,listeners:r}))}var gc=null,xc=null;function Vk(i){av(i,0)}function Ju(i){var r=ts(i);if(He(r))return i}function Ex(i,r){if(i==="change")return r}var wx=!1;if($s){var Kf;if($s){var $f="oninput"in document;if(!$f){var Nx=document.createElement("div");Nx.setAttribute("oninput","return;"),$f=typeof Nx.oninput=="function"}Kf=$f}else Kf=!1;wx=Kf&&(!document.documentMode||9<document.documentMode)}function kx(){gc&&(gc.detachEvent("onpropertychange",Ax),xc=gc=null)}function Ax(i){if(i.propertyName==="value"&&Ju(xc)){var r=[];Sx(r,xc,i,Ks(i)),qa(Vk,r)}}function Bk(i,r,c){i==="focusin"?(kx(),gc=r,xc=c,gc.attachEvent("onpropertychange",Ax)):i==="focusout"&&kx()}function Gk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ju(xc)}function Fk(i,r){if(i==="click")return Ju(r)}function zk(i,r){if(i==="input"||i==="change")return Ju(r)}function Hk(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Cs=typeof Object.is=="function"?Object.is:Hk;function yc(i,r){if(Cs(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var c=Object.keys(i),d=Object.keys(r);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var b=c[d];if(!Mt.call(r,b)||!Cs(i[b],r[b]))return!1}return!0}function Cx(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ix(i,r){var c=Cx(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=r&&d>=r)return{node:c,offset:r-i};i=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Cx(c)}}function Rx(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Rx(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Mx(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=je(i.document);r instanceof i.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)i=r.contentWindow;else break;r=je(i.document)}return r}function Yf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var qk=$s&&"documentMode"in document&&11>=document.documentMode,Jo=null,Jf=null,bc=null,Qf=!1;function Dx(i,r,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Qf||Jo==null||Jo!==je(d)||(d=Jo,"selectionStart"in d&&Yf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),bc&&yc(bc,d)||(bc=d,d=Ud(Jf,"onSelect"),0<d.length&&(r=new Pi("onSelect","select",null,r,c),i.push({event:r,listeners:d}),r.target=Jo)))}function no(i,r){var c={};return c[i.toLowerCase()]=r.toLowerCase(),c["Webkit"+i]="webkit"+r,c["Moz"+i]="moz"+r,c}var Qo={animationend:no("Animation","AnimationEnd"),animationiteration:no("Animation","AnimationIteration"),animationstart:no("Animation","AnimationStart"),transitionrun:no("Transition","TransitionRun"),transitionstart:no("Transition","TransitionStart"),transitioncancel:no("Transition","TransitionCancel"),transitionend:no("Transition","TransitionEnd")},Wf={},jx={};$s&&(jx=document.createElement("div").style,"AnimationEvent"in window||(delete Qo.animationend.animation,delete Qo.animationiteration.animation,delete Qo.animationstart.animation),"TransitionEvent"in window||delete Qo.transitionend.transition);function so(i){if(Wf[i])return Wf[i];if(!Qo[i])return i;var r=Qo[i],c;for(c in r)if(r.hasOwnProperty(c)&&c in jx)return Wf[i]=r[c];return i}var Px=so("animationend"),Lx=so("animationiteration"),Ux=so("animationstart"),Kk=so("transitionrun"),$k=so("transitionstart"),Yk=so("transitioncancel"),Ox=so("transitionend"),Vx=new Map,Xf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xf.push("scrollEnd");function pi(i,r){Vx.set(i,r),zs(r,[i])}var Qu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Js=[],Wo=0,Zf=0;function Wu(){for(var i=Wo,r=Zf=Wo=0;r<i;){var c=Js[r];Js[r++]=null;var d=Js[r];Js[r++]=null;var b=Js[r];Js[r++]=null;var v=Js[r];if(Js[r++]=null,d!==null&&b!==null){var w=d.pending;w===null?b.next=b:(b.next=w.next,w.next=b),d.pending=b}v!==0&&Bx(c,b,v)}}function Xu(i,r,c,d){Js[Wo++]=i,Js[Wo++]=r,Js[Wo++]=c,Js[Wo++]=d,Zf|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function em(i,r,c,d){return Xu(i,r,c,d),Zu(i)}function io(i,r){return Xu(i,null,null,r),Zu(i)}function Bx(i,r,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var b=!1,v=i.return;v!==null;)v.childLanes|=c,d=v.alternate,d!==null&&(d.childLanes|=c),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(b=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,b&&r!==null&&(b=31-st(c),i=v.hiddenUpdates,d=i[b],d===null?i[b]=[r]:d.push(r),r.lane=c|536870912),v):null}function Zu(i){if(50<Gc)throw Gc=0,c0=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Xo={};function Jk(i,r,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Is(i,r,c,d){return new Jk(i,r,c,d)}function tm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function da(i,r){var c=i.alternate;return c===null?(c=Is(i.tag,r,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=r,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,r=i.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Gx(i,r){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,r=c.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function ed(i,r,c,d,b,v){var w=0;if(d=i,typeof i=="function")tm(i)&&(w=1);else if(typeof i=="string")w=e2(i,c,ie.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=Is(31,c,r,b),i.elementType=R,i.lanes=v,i;case A:return ao(c.children,b,v,r);case C:w=8,b|=24;break;case D:return i=Is(12,c,r,b|2),i.elementType=D,i.lanes=v,i;case X:return i=Is(13,c,r,b),i.elementType=X,i.lanes=v,i;case J:return i=Is(19,c,r,b),i.elementType=J,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case I:w=10;break e;case G:w=9;break e;case q:w=11;break e;case j:w=14;break e;case N:w=16,d=null;break e}w=29,c=Error(s(130,i===null?"null":typeof i,"")),d=null}return r=Is(w,c,r,b),r.elementType=i,r.type=d,r.lanes=v,r}function ao(i,r,c,d){return i=Is(7,i,d,r),i.lanes=c,i}function nm(i,r,c){return i=Is(6,i,null,r),i.lanes=c,i}function Fx(i){var r=Is(18,null,null,0);return r.stateNode=i,r}function sm(i,r,c){return r=Is(4,i.children!==null?i.children:[],i.key,r),r.lanes=c,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var zx=new WeakMap;function Qs(i,r){if(typeof i=="object"&&i!==null){var c=zx.get(i);return c!==void 0?c:(r={value:i,source:r,stack:Rn(r)},zx.set(i,r),r)}return{value:i,source:r,stack:Rn(r)}}var Zo=[],el=0,td=null,vc=0,Ws=[],Xs=0,Ja=null,Vi=1,Bi="";function ha(i,r){Zo[el++]=vc,Zo[el++]=td,td=i,vc=r}function Hx(i,r,c){Ws[Xs++]=Vi,Ws[Xs++]=Bi,Ws[Xs++]=Ja,Ja=i;var d=Vi;i=Bi;var b=32-st(d)-1;d&=~(1<<b),c+=1;var v=32-st(r)+b;if(30<v){var w=b-b%5;v=(d&(1<<w)-1).toString(32),d>>=w,b-=w,Vi=1<<32-st(r)+b|c<<b|d,Bi=v+i}else Vi=1<<v|c<<b|d,Bi=i}function im(i){i.return!==null&&(ha(i,1),Hx(i,1,0))}function am(i){for(;i===td;)td=Zo[--el],Zo[el]=null,vc=Zo[--el],Zo[el]=null;for(;i===Ja;)Ja=Ws[--Xs],Ws[Xs]=null,Bi=Ws[--Xs],Ws[Xs]=null,Vi=Ws[--Xs],Ws[Xs]=null}function qx(i,r){Ws[Xs++]=Vi,Ws[Xs++]=Bi,Ws[Xs++]=Ja,Vi=r.id,Bi=r.overflow,Ja=i}var Kn=null,tn=null,wt=!1,Qa=null,Zs=!1,rm=Error(s(519));function Wa(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _c(Qs(r,i)),rm}function Kx(i){var r=i.stateNode,c=i.type,d=i.memoizedProps;switch(r[un]=i,r[Sn]=d,c){case"dialog":gt("cancel",r),gt("close",r);break;case"iframe":case"object":case"embed":gt("load",r);break;case"video":case"audio":for(c=0;c<zc.length;c++)gt(zc[c],r);break;case"source":gt("error",r);break;case"img":case"image":case"link":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"input":gt("invalid",r),mt(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":gt("invalid",r);break;case"textarea":gt("invalid",r),Zt(r,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||d.suppressHydrationWarning===!0||cv(r.textContent,c)?(d.popover!=null&&(gt("beforetoggle",r),gt("toggle",r)),d.onScroll!=null&&gt("scroll",r),d.onScrollEnd!=null&&gt("scrollend",r),d.onClick!=null&&(r.onclick=ui),r=!0):r=!1,r||Wa(i,!0)}function $x(i){for(Kn=i.return;Kn;)switch(Kn.tag){case 5:case 31:case 13:Zs=!1;return;case 27:case 3:Zs=!0;return;default:Kn=Kn.return}}function tl(i){if(i!==Kn)return!1;if(!wt)return $x(i),wt=!0,!1;var r=i.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||E0(i.type,i.memoizedProps)),c=!c),c&&tn&&Wa(i),$x(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));tn=yv(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));tn=yv(i)}else r===27?(r=tn,dr(i.type)?(i=C0,C0=null,tn=i):tn=r):tn=Kn?ti(i.stateNode.nextSibling):null;return!0}function ro(){tn=Kn=null,wt=!1}function om(){var i=Qa;return i!==null&&(ys===null?ys=i:ys.push.apply(ys,i),Qa=null),i}function _c(i){Qa===null?Qa=[i]:Qa.push(i)}var lm=z(null),oo=null,fa=null;function Xa(i,r,c){fe(lm,r._currentValue),r._currentValue=c}function ma(i){i._currentValue=lm.current,Q(lm)}function cm(i,r,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),i===c)break;i=i.return}}function um(i,r,c,d){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var v=b.dependencies;if(v!==null){var w=b.child;v=v.firstContext;e:for(;v!==null;){var L=v;v=b;for(var H=0;H<r.length;H++)if(L.context===r[H]){v.lanes|=c,L=v.alternate,L!==null&&(L.lanes|=c),cm(v.return,c,i),d||(w=null);break e}v=L.next}}else if(b.tag===18){if(w=b.return,w===null)throw Error(s(341));w.lanes|=c,v=w.alternate,v!==null&&(v.lanes|=c),cm(w,c,i),w=null}else w=b.child;if(w!==null)w.return=b;else for(w=b;w!==null;){if(w===i){w=null;break}if(b=w.sibling,b!==null){b.return=w.return,w=b;break}w=w.return}b=w}}function nl(i,r,c,d){i=null;for(var b=r,v=!1;b!==null;){if(!v){if((b.flags&524288)!==0)v=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var w=b.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var L=b.type;Cs(b.pendingProps.value,w.value)||(i!==null?i.push(L):i=[L])}}else if(b===xe.current){if(w=b.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(Yc):i=[Yc])}b=b.return}i!==null&&um(r,i,c,d),r.flags|=262144}function nd(i){for(i=i.firstContext;i!==null;){if(!Cs(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function lo(i){oo=i,fa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function $n(i){return Yx(oo,i)}function sd(i,r){return oo===null&&lo(i),Yx(i,r)}function Yx(i,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},fa===null){if(i===null)throw Error(s(308));fa=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else fa=fa.next=r;return c}var Qk=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){r.aborted=!0,i.forEach(function(c){return c()})}},Wk=n.unstable_scheduleCallback,Xk=n.unstable_NormalPriority,En={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dm(){return{controller:new Qk,data:new Map,refCount:0}}function Tc(i){i.refCount--,i.refCount===0&&Wk(Xk,function(){i.controller.abort()})}var Sc=null,hm=0,sl=0,il=null;function Zk(i,r){if(Sc===null){var c=Sc=[];hm=0,sl=p0(),il={status:"pending",value:void 0,then:function(d){c.push(d)}}}return hm++,r.then(Jx,Jx),r}function Jx(){if(--hm===0&&Sc!==null){il!==null&&(il.status="fulfilled");var i=Sc;Sc=null,sl=0,il=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function eA(i,r){var c=[],d={status:"pending",value:null,reason:null,then:function(b){c.push(b)}};return i.then(function(){d.status="fulfilled",d.value=r;for(var b=0;b<c.length;b++)(0,c[b])(r)},function(b){for(d.status="rejected",d.reason=b,b=0;b<c.length;b++)(0,c[b])(void 0)}),d}var Qx=Y.S;Y.S=function(i,r){Db=qt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Zk(i,r),Qx!==null&&Qx(i,r)};var co=z(null);function fm(){var i=co.current;return i!==null?i:Qt.pooledCache}function id(i,r){r===null?fe(co,co.current):fe(co,r.pool)}function Wx(){var i=fm();return i===null?null:{parent:En._currentValue,pool:i}}var al=Error(s(460)),mm=Error(s(474)),ad=Error(s(542)),rd={then:function(){}};function Xx(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Zx(i,r,c){switch(c=i[c],c===void 0?i.push(r):c!==r&&(r.then(ui,ui),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,ty(i),i;default:if(typeof r.status=="string")r.then(ui,ui);else{if(i=Qt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(d){if(r.status==="pending"){var b=r;b.status="fulfilled",b.value=d}},function(d){if(r.status==="pending"){var b=r;b.status="rejected",b.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,ty(i),i}throw ho=r,al}}function uo(i){try{var r=i._init;return r(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(ho=c,al):c}}var ho=null;function ey(){if(ho===null)throw Error(s(459));var i=ho;return ho=null,i}function ty(i){if(i===al||i===ad)throw Error(s(483))}var rl=null,Ec=0;function od(i){var r=Ec;return Ec+=1,rl===null&&(rl=[]),Zx(rl,i,r)}function wc(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function ld(i,r){throw r.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function ny(i){function r(W,$){if(i){var te=W.deletions;te===null?(W.deletions=[$],W.flags|=16):te.push($)}}function c(W,$){if(!i)return null;for(;$!==null;)r(W,$),$=$.sibling;return null}function d(W){for(var $=new Map;W!==null;)W.key!==null?$.set(W.key,W):$.set(W.index,W),W=W.sibling;return $}function b(W,$){return W=da(W,$),W.index=0,W.sibling=null,W}function v(W,$,te){return W.index=te,i?(te=W.alternate,te!==null?(te=te.index,te<$?(W.flags|=67108866,$):te):(W.flags|=67108866,$)):(W.flags|=1048576,$)}function w(W){return i&&W.alternate===null&&(W.flags|=67108866),W}function L(W,$,te,pe){return $===null||$.tag!==6?($=nm(te,W.mode,pe),$.return=W,$):($=b($,te),$.return=W,$)}function H(W,$,te,pe){var Ke=te.type;return Ke===A?de(W,$,te.props.children,pe,te.key):$!==null&&($.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===N&&uo(Ke)===$.type)?($=b($,te.props),wc($,te),$.return=W,$):($=ed(te.type,te.key,te.props,null,W.mode,pe),wc($,te),$.return=W,$)}function se(W,$,te,pe){return $===null||$.tag!==4||$.stateNode.containerInfo!==te.containerInfo||$.stateNode.implementation!==te.implementation?($=sm(te,W.mode,pe),$.return=W,$):($=b($,te.children||[]),$.return=W,$)}function de(W,$,te,pe,Ke){return $===null||$.tag!==7?($=ao(te,W.mode,pe,Ke),$.return=W,$):($=b($,te),$.return=W,$)}function ye(W,$,te){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=nm(""+$,W.mode,te),$.return=W,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case E:return te=ed($.type,$.key,$.props,null,W.mode,te),wc(te,$),te.return=W,te;case M:return $=sm($,W.mode,te),$.return=W,$;case N:return $=uo($),ye(W,$,te)}if(Le($)||F($))return $=ao($,W.mode,te,null),$.return=W,$;if(typeof $.then=="function")return ye(W,od($),te);if($.$$typeof===I)return ye(W,sd(W,$),te);ld(W,$)}return null}function ae(W,$,te,pe){var Ke=$!==null?$.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Ke!==null?null:L(W,$,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case E:return te.key===Ke?H(W,$,te,pe):null;case M:return te.key===Ke?se(W,$,te,pe):null;case N:return te=uo(te),ae(W,$,te,pe)}if(Le(te)||F(te))return Ke!==null?null:de(W,$,te,pe,null);if(typeof te.then=="function")return ae(W,$,od(te),pe);if(te.$$typeof===I)return ae(W,$,sd(W,te),pe);ld(W,te)}return null}function le(W,$,te,pe,Ke){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return W=W.get(te)||null,L($,W,""+pe,Ke);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case E:return W=W.get(pe.key===null?te:pe.key)||null,H($,W,pe,Ke);case M:return W=W.get(pe.key===null?te:pe.key)||null,se($,W,pe,Ke);case N:return pe=uo(pe),le(W,$,te,pe,Ke)}if(Le(pe)||F(pe))return W=W.get(te)||null,de($,W,pe,Ke,null);if(typeof pe.then=="function")return le(W,$,te,od(pe),Ke);if(pe.$$typeof===I)return le(W,$,te,sd($,pe),Ke);ld($,pe)}return null}function Ue(W,$,te,pe){for(var Ke=null,Ct=null,Be=$,ht=$=0,bt=null;Be!==null&&ht<te.length;ht++){Be.index>ht?(bt=Be,Be=null):bt=Be.sibling;var It=ae(W,Be,te[ht],pe);if(It===null){Be===null&&(Be=bt);break}i&&Be&&It.alternate===null&&r(W,Be),$=v(It,$,ht),Ct===null?Ke=It:Ct.sibling=It,Ct=It,Be=bt}if(ht===te.length)return c(W,Be),wt&&ha(W,ht),Ke;if(Be===null){for(;ht<te.length;ht++)Be=ye(W,te[ht],pe),Be!==null&&($=v(Be,$,ht),Ct===null?Ke=Be:Ct.sibling=Be,Ct=Be);return wt&&ha(W,ht),Ke}for(Be=d(Be);ht<te.length;ht++)bt=le(Be,W,ht,te[ht],pe),bt!==null&&(i&&bt.alternate!==null&&Be.delete(bt.key===null?ht:bt.key),$=v(bt,$,ht),Ct===null?Ke=bt:Ct.sibling=bt,Ct=bt);return i&&Be.forEach(function(gr){return r(W,gr)}),wt&&ha(W,ht),Ke}function Xe(W,$,te,pe){if(te==null)throw Error(s(151));for(var Ke=null,Ct=null,Be=$,ht=$=0,bt=null,It=te.next();Be!==null&&!It.done;ht++,It=te.next()){Be.index>ht?(bt=Be,Be=null):bt=Be.sibling;var gr=ae(W,Be,It.value,pe);if(gr===null){Be===null&&(Be=bt);break}i&&Be&&gr.alternate===null&&r(W,Be),$=v(gr,$,ht),Ct===null?Ke=gr:Ct.sibling=gr,Ct=gr,Be=bt}if(It.done)return c(W,Be),wt&&ha(W,ht),Ke;if(Be===null){for(;!It.done;ht++,It=te.next())It=ye(W,It.value,pe),It!==null&&($=v(It,$,ht),Ct===null?Ke=It:Ct.sibling=It,Ct=It);return wt&&ha(W,ht),Ke}for(Be=d(Be);!It.done;ht++,It=te.next())It=le(Be,W,ht,It.value,pe),It!==null&&(i&&It.alternate!==null&&Be.delete(It.key===null?ht:It.key),$=v(It,$,ht),Ct===null?Ke=It:Ct.sibling=It,Ct=It);return i&&Be.forEach(function(d2){return r(W,d2)}),wt&&ha(W,ht),Ke}function Jt(W,$,te,pe){if(typeof te=="object"&&te!==null&&te.type===A&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case E:e:{for(var Ke=te.key;$!==null;){if($.key===Ke){if(Ke=te.type,Ke===A){if($.tag===7){c(W,$.sibling),pe=b($,te.props.children),pe.return=W,W=pe;break e}}else if($.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===N&&uo(Ke)===$.type){c(W,$.sibling),pe=b($,te.props),wc(pe,te),pe.return=W,W=pe;break e}c(W,$);break}else r(W,$);$=$.sibling}te.type===A?(pe=ao(te.props.children,W.mode,pe,te.key),pe.return=W,W=pe):(pe=ed(te.type,te.key,te.props,null,W.mode,pe),wc(pe,te),pe.return=W,W=pe)}return w(W);case M:e:{for(Ke=te.key;$!==null;){if($.key===Ke)if($.tag===4&&$.stateNode.containerInfo===te.containerInfo&&$.stateNode.implementation===te.implementation){c(W,$.sibling),pe=b($,te.children||[]),pe.return=W,W=pe;break e}else{c(W,$);break}else r(W,$);$=$.sibling}pe=sm(te,W.mode,pe),pe.return=W,W=pe}return w(W);case N:return te=uo(te),Jt(W,$,te,pe)}if(Le(te))return Ue(W,$,te,pe);if(F(te)){if(Ke=F(te),typeof Ke!="function")throw Error(s(150));return te=Ke.call(te),Xe(W,$,te,pe)}if(typeof te.then=="function")return Jt(W,$,od(te),pe);if(te.$$typeof===I)return Jt(W,$,sd(W,te),pe);ld(W,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,$!==null&&$.tag===6?(c(W,$.sibling),pe=b($,te),pe.return=W,W=pe):(c(W,$),pe=nm(te,W.mode,pe),pe.return=W,W=pe),w(W)):c(W,$)}return function(W,$,te,pe){try{Ec=0;var Ke=Jt(W,$,te,pe);return rl=null,Ke}catch(Be){if(Be===al||Be===ad)throw Be;var Ct=Is(29,Be,null,W.mode);return Ct.lanes=pe,Ct.return=W,Ct}finally{}}}var fo=ny(!0),sy=ny(!1),Za=!1;function pm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gm(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function er(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function tr(i,r,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(jt&2)!==0){var b=d.pending;return b===null?r.next=r:(r.next=b.next,b.next=r),d.pending=r,r=Zu(i),Bx(i,null,c),r}return Xu(i,d,r,c),Zu(i)}function Nc(i,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var d=r.lanes;d&=i.pendingLanes,c|=d,r.lanes=c,zr(i,c)}}function xm(i,r){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var b=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?b=v=w:v=v.next=w,c=c.next}while(c!==null);v===null?b=v=r:v=v.next=r}else b=v=r;c={baseState:d.baseState,firstBaseUpdate:b,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=r:i.next=r,c.lastBaseUpdate=r}var ym=!1;function kc(){if(ym){var i=il;if(i!==null)throw i}}function Ac(i,r,c,d){ym=!1;var b=i.updateQueue;Za=!1;var v=b.firstBaseUpdate,w=b.lastBaseUpdate,L=b.shared.pending;if(L!==null){b.shared.pending=null;var H=L,se=H.next;H.next=null,w===null?v=se:w.next=se,w=H;var de=i.alternate;de!==null&&(de=de.updateQueue,L=de.lastBaseUpdate,L!==w&&(L===null?de.firstBaseUpdate=se:L.next=se,de.lastBaseUpdate=H))}if(v!==null){var ye=b.baseState;w=0,de=se=H=null,L=v;do{var ae=L.lane&-536870913,le=ae!==L.lane;if(le?(yt&ae)===ae:(d&ae)===ae){ae!==0&&ae===sl&&(ym=!0),de!==null&&(de=de.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Ue=i,Xe=L;ae=r;var Jt=c;switch(Xe.tag){case 1:if(Ue=Xe.payload,typeof Ue=="function"){ye=Ue.call(Jt,ye,ae);break e}ye=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Xe.payload,ae=typeof Ue=="function"?Ue.call(Jt,ye,ae):Ue,ae==null)break e;ye=_({},ye,ae);break e;case 2:Za=!0}}ae=L.callback,ae!==null&&(i.flags|=64,le&&(i.flags|=8192),le=b.callbacks,le===null?b.callbacks=[ae]:le.push(ae))}else le={lane:ae,tag:L.tag,payload:L.payload,callback:L.callback,next:null},de===null?(se=de=le,H=ye):de=de.next=le,w|=ae;if(L=L.next,L===null){if(L=b.shared.pending,L===null)break;le=L,L=le.next,le.next=null,b.lastBaseUpdate=le,b.shared.pending=null}}while(!0);de===null&&(H=ye),b.baseState=H,b.firstBaseUpdate=se,b.lastBaseUpdate=de,v===null&&(b.shared.lanes=0),rr|=w,i.lanes=w,i.memoizedState=ye}}function iy(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function ay(i,r){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)iy(c[i],r)}var ol=z(null),cd=z(0);function ry(i,r){i=Sa,fe(cd,i),fe(ol,r),Sa=i|r.baseLanes}function bm(){fe(cd,Sa),fe(ol,ol.current)}function vm(){Sa=cd.current,Q(ol),Q(cd)}var Rs=z(null),ei=null;function nr(i){var r=i.alternate;fe(yn,yn.current&1),fe(Rs,i),ei===null&&(r===null||ol.current!==null||r.memoizedState!==null)&&(ei=i)}function _m(i){fe(yn,yn.current),fe(Rs,i),ei===null&&(ei=i)}function oy(i){i.tag===22?(fe(yn,yn.current),fe(Rs,i),ei===null&&(ei=i)):sr()}function sr(){fe(yn,yn.current),fe(Rs,Rs.current)}function Ms(i){Q(Rs),ei===i&&(ei=null),Q(yn)}var yn=z(0);function ud(i){for(var r=i;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||k0(c)||A0(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var pa=0,dt=null,$t=null,wn=null,dd=!1,ll=!1,mo=!1,hd=0,Cc=0,cl=null,tA=0;function hn(){throw Error(s(321))}function Tm(i,r){if(r===null)return!1;for(var c=0;c<r.length&&c<i.length;c++)if(!Cs(i[c],r[c]))return!1;return!0}function Sm(i,r,c,d,b,v){return pa=v,dt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=i===null||i.memoizedState===null?Hy:Om,mo=!1,v=c(d,b),mo=!1,ll&&(v=cy(r,c,d,b)),ly(i),v}function ly(i){Y.H=Mc;var r=$t!==null&&$t.next!==null;if(pa=0,wn=$t=dt=null,dd=!1,Cc=0,cl=null,r)throw Error(s(300));i===null||Nn||(i=i.dependencies,i!==null&&nd(i)&&(Nn=!0))}function cy(i,r,c,d){dt=i;var b=0;do{if(ll&&(cl=null),Cc=0,ll=!1,25<=b)throw Error(s(301));if(b+=1,wn=$t=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Y.H=qy,v=r(c,d)}while(ll);return v}function nA(){var i=Y.H,r=i.useState()[0];return r=typeof r.then=="function"?Ic(r):r,i=i.useState()[0],($t!==null?$t.memoizedState:null)!==i&&(dt.flags|=1024),r}function Em(){var i=hd!==0;return hd=0,i}function wm(i,r,c){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~c}function Nm(i){if(dd){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}dd=!1}pa=0,wn=$t=dt=null,ll=!1,Cc=hd=0,cl=null}function ds(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?dt.memoizedState=wn=i:wn=wn.next=i,wn}function bn(){if($t===null){var i=dt.alternate;i=i!==null?i.memoizedState:null}else i=$t.next;var r=wn===null?dt.memoizedState:wn.next;if(r!==null)wn=r,$t=i;else{if(i===null)throw dt.alternate===null?Error(s(467)):Error(s(310));$t=i,i={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},wn===null?dt.memoizedState=wn=i:wn=wn.next=i}return wn}function fd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ic(i){var r=Cc;return Cc+=1,cl===null&&(cl=[]),i=Zx(cl,i,r),r=dt,(wn===null?r.memoizedState:wn.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?Hy:Om),i}function md(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ic(i);if(i.$$typeof===I)return $n(i)}throw Error(s(438,String(i)))}function km(i){var r=null,c=dt.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var d=dt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(b){return b.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=fd(),dt.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(i),d=0;d<i;d++)c[d]=P;return r.index++,c}function ga(i,r){return typeof r=="function"?r(i):r}function pd(i){var r=bn();return Am(r,$t,i)}function Am(i,r,c){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=c;var b=i.baseQueue,v=d.pending;if(v!==null){if(b!==null){var w=b.next;b.next=v.next,v.next=w}r.baseQueue=b=v,d.pending=null}if(v=i.baseState,b===null)i.memoizedState=v;else{r=b.next;var L=w=null,H=null,se=r,de=!1;do{var ye=se.lane&-536870913;if(ye!==se.lane?(yt&ye)===ye:(pa&ye)===ye){var ae=se.revertLane;if(ae===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),ye===sl&&(de=!0);else if((pa&ae)===ae){se=se.next,ae===sl&&(de=!0);continue}else ye={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},H===null?(L=H=ye,w=v):H=H.next=ye,dt.lanes|=ae,rr|=ae;ye=se.action,mo&&c(v,ye),v=se.hasEagerState?se.eagerState:c(v,ye)}else ae={lane:ye,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},H===null?(L=H=ae,w=v):H=H.next=ae,dt.lanes|=ye,rr|=ye;se=se.next}while(se!==null&&se!==r);if(H===null?w=v:H.next=L,!Cs(v,i.memoizedState)&&(Nn=!0,de&&(c=il,c!==null)))throw c;i.memoizedState=v,i.baseState=w,i.baseQueue=H,d.lastRenderedState=v}return b===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Cm(i){var r=bn(),c=r.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var d=c.dispatch,b=c.pending,v=r.memoizedState;if(b!==null){c.pending=null;var w=b=b.next;do v=i(v,w.action),w=w.next;while(w!==b);Cs(v,r.memoizedState)||(Nn=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),c.lastRenderedState=v}return[v,d]}function uy(i,r,c){var d=dt,b=bn(),v=wt;if(v){if(c===void 0)throw Error(s(407));c=c()}else c=r();var w=!Cs(($t||b).memoizedState,c);if(w&&(b.memoizedState=c,Nn=!0),b=b.queue,Mm(fy.bind(null,d,b,i),[i]),b.getSnapshot!==r||w||wn!==null&&wn.memoizedState.tag&1){if(d.flags|=2048,ul(9,{destroy:void 0},hy.bind(null,d,b,c,r),null),Qt===null)throw Error(s(349));v||(pa&127)!==0||dy(d,r,c)}return c}function dy(i,r,c){i.flags|=16384,i={getSnapshot:r,value:c},r=dt.updateQueue,r===null?(r=fd(),dt.updateQueue=r,r.stores=[i]):(c=r.stores,c===null?r.stores=[i]:c.push(i))}function hy(i,r,c,d){r.value=c,r.getSnapshot=d,my(r)&&py(i)}function fy(i,r,c){return c(function(){my(r)&&py(i)})}function my(i){var r=i.getSnapshot;i=i.value;try{var c=r();return!Cs(i,c)}catch{return!0}}function py(i){var r=io(i,2);r!==null&&bs(r,i,2)}function Im(i){var r=ds();if(typeof i=="function"){var c=i;if(i=c(),mo){ze(!0);try{c()}finally{ze(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:i},r}function gy(i,r,c,d){return i.baseState=c,Am(i,$t,typeof d=="function"?d:ga)}function sA(i,r,c,d,b){if(yd(i))throw Error(s(485));if(i=r.action,i!==null){var v={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){v.listeners.push(w)}};Y.T!==null?c(!0):v.isTransition=!1,d(v),c=r.pending,c===null?(v.next=r.pending=v,xy(r,v)):(v.next=c.next,r.pending=c.next=v)}}function xy(i,r){var c=r.action,d=r.payload,b=i.state;if(r.isTransition){var v=Y.T,w={};Y.T=w;try{var L=c(b,d),H=Y.S;H!==null&&H(w,L),yy(i,r,L)}catch(se){Rm(i,r,se)}finally{v!==null&&w.types!==null&&(v.types=w.types),Y.T=v}}else try{v=c(b,d),yy(i,r,v)}catch(se){Rm(i,r,se)}}function yy(i,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){by(i,r,d)},function(d){return Rm(i,r,d)}):by(i,r,c)}function by(i,r,c){r.status="fulfilled",r.value=c,vy(r),i.state=c,r=i.pending,r!==null&&(c=r.next,c===r?i.pending=null:(c=c.next,r.next=c,xy(i,c)))}function Rm(i,r,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=c,vy(r),r=r.next;while(r!==d)}i.action=null}function vy(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function _y(i,r){return r}function Ty(i,r){if(wt){var c=Qt.formState;if(c!==null){e:{var d=dt;if(wt){if(tn){t:{for(var b=tn,v=Zs;b.nodeType!==8;){if(!v){b=null;break t}if(b=ti(b.nextSibling),b===null){b=null;break t}}v=b.data,b=v==="F!"||v==="F"?b:null}if(b){tn=ti(b.nextSibling),d=b.data==="F!";break e}}Wa(d)}d=!1}d&&(r=c[0])}}return c=ds(),c.memoizedState=c.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_y,lastRenderedState:r},c.queue=d,c=Gy.bind(null,dt,d),d.dispatch=c,d=Im(!1),v=Um.bind(null,dt,!1,d.queue),d=ds(),b={state:r,dispatch:null,action:i,pending:null},d.queue=b,c=sA.bind(null,dt,b,v,c),b.dispatch=c,d.memoizedState=i,[r,c,!1]}function Sy(i){var r=bn();return Ey(r,$t,i)}function Ey(i,r,c){if(r=Am(i,r,_y)[0],i=pd(ga)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Ic(r)}catch(w){throw w===al?ad:w}else d=r;r=bn();var b=r.queue,v=b.dispatch;return c!==r.memoizedState&&(dt.flags|=2048,ul(9,{destroy:void 0},iA.bind(null,b,c),null)),[d,v,i]}function iA(i,r){i.action=r}function wy(i){var r=bn(),c=$t;if(c!==null)return Ey(r,c,i);bn(),r=r.memoizedState,c=bn();var d=c.queue.dispatch;return c.memoizedState=i,[r,d,!1]}function ul(i,r,c,d){return i={tag:i,create:c,deps:d,inst:r,next:null},r=dt.updateQueue,r===null&&(r=fd(),dt.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,r.lastEffect=i),i}function Ny(){return bn().memoizedState}function gd(i,r,c,d){var b=ds();dt.flags|=i,b.memoizedState=ul(1|r,{destroy:void 0},c,d===void 0?null:d)}function xd(i,r,c,d){var b=bn();d=d===void 0?null:d;var v=b.memoizedState.inst;$t!==null&&d!==null&&Tm(d,$t.memoizedState.deps)?b.memoizedState=ul(r,v,c,d):(dt.flags|=i,b.memoizedState=ul(1|r,v,c,d))}function ky(i,r){gd(8390656,8,i,r)}function Mm(i,r){xd(2048,8,i,r)}function aA(i){dt.flags|=4;var r=dt.updateQueue;if(r===null)r=fd(),dt.updateQueue=r,r.events=[i];else{var c=r.events;c===null?r.events=[i]:c.push(i)}}function Ay(i){var r=bn().memoizedState;return aA({ref:r,nextImpl:i}),function(){if((jt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Cy(i,r){return xd(4,2,i,r)}function Iy(i,r){return xd(4,4,i,r)}function Ry(i,r){if(typeof r=="function"){i=i();var c=r(i);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function My(i,r,c){c=c!=null?c.concat([i]):null,xd(4,4,Ry.bind(null,r,i),c)}function Dm(){}function Dy(i,r){var c=bn();r=r===void 0?null:r;var d=c.memoizedState;return r!==null&&Tm(r,d[1])?d[0]:(c.memoizedState=[i,r],i)}function jy(i,r){var c=bn();r=r===void 0?null:r;var d=c.memoizedState;if(r!==null&&Tm(r,d[1]))return d[0];if(d=i(),mo){ze(!0);try{i()}finally{ze(!1)}}return c.memoizedState=[d,r],d}function jm(i,r,c){return c===void 0||(pa&1073741824)!==0&&(yt&261930)===0?i.memoizedState=r:(i.memoizedState=c,i=Pb(),dt.lanes|=i,rr|=i,c)}function Py(i,r,c,d){return Cs(c,r)?c:ol.current!==null?(i=jm(i,c,d),Cs(i,r)||(Nn=!0),i):(pa&42)===0||(pa&1073741824)!==0&&(yt&261930)===0?(Nn=!0,i.memoizedState=c):(i=Pb(),dt.lanes|=i,rr|=i,r)}function Ly(i,r,c,d,b){var v=oe.p;oe.p=v!==0&&8>v?v:8;var w=Y.T,L={};Y.T=L,Um(i,!1,r,c);try{var H=b(),se=Y.S;if(se!==null&&se(L,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var de=eA(H,d);Rc(i,r,de,Ps(i))}else Rc(i,r,d,Ps(i))}catch(ye){Rc(i,r,{then:function(){},status:"rejected",reason:ye},Ps())}finally{oe.p=v,w!==null&&L.types!==null&&(w.types=L.types),Y.T=w}}function rA(){}function Pm(i,r,c,d){if(i.tag!==5)throw Error(s(476));var b=Uy(i).queue;Ly(i,b,r,_e,c===null?rA:function(){return Oy(i),c(d)})}function Uy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:_e},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:c},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Oy(i){var r=Uy(i);r.next===null&&(r=i.alternate.memoizedState),Rc(i,r.next.queue,{},Ps())}function Lm(){return $n(Yc)}function Vy(){return bn().memoizedState}function By(){return bn().memoizedState}function oA(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var c=Ps();i=er(c);var d=tr(r,i,c);d!==null&&(bs(d,r,c),Nc(d,r,c)),r={cache:dm()},i.payload=r;return}r=r.return}}function lA(i,r,c){var d=Ps();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},yd(i)?Fy(r,c):(c=em(i,r,c,d),c!==null&&(bs(c,i,d),zy(c,r,d)))}function Gy(i,r,c){var d=Ps();Rc(i,r,c,d)}function Rc(i,r,c,d){var b={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(yd(i))Fy(r,b);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var w=r.lastRenderedState,L=v(w,c);if(b.hasEagerState=!0,b.eagerState=L,Cs(L,w))return Xu(i,r,b,0),Qt===null&&Wu(),!1}catch{}finally{}if(c=em(i,r,b,d),c!==null)return bs(c,i,d),zy(c,r,d),!0}return!1}function Um(i,r,c,d){if(d={lane:2,revertLane:p0(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},yd(i)){if(r)throw Error(s(479))}else r=em(i,c,d,2),r!==null&&bs(r,i,2)}function yd(i){var r=i.alternate;return i===dt||r!==null&&r===dt}function Fy(i,r){ll=dd=!0;var c=i.pending;c===null?r.next=r:(r.next=c.next,c.next=r),i.pending=r}function zy(i,r,c){if((c&4194048)!==0){var d=r.lanes;d&=i.pendingLanes,c|=d,r.lanes=c,zr(i,c)}}var Mc={readContext:$n,use:md,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn,useHostTransitionStatus:hn,useFormState:hn,useActionState:hn,useOptimistic:hn,useMemoCache:hn,useCacheRefresh:hn};Mc.useEffectEvent=hn;var Hy={readContext:$n,use:md,useCallback:function(i,r){return ds().memoizedState=[i,r===void 0?null:r],i},useContext:$n,useEffect:ky,useImperativeHandle:function(i,r,c){c=c!=null?c.concat([i]):null,gd(4194308,4,Ry.bind(null,r,i),c)},useLayoutEffect:function(i,r){return gd(4194308,4,i,r)},useInsertionEffect:function(i,r){gd(4,2,i,r)},useMemo:function(i,r){var c=ds();r=r===void 0?null:r;var d=i();if(mo){ze(!0);try{i()}finally{ze(!1)}}return c.memoizedState=[d,r],d},useReducer:function(i,r,c){var d=ds();if(c!==void 0){var b=c(r);if(mo){ze(!0);try{c(r)}finally{ze(!1)}}}else b=r;return d.memoizedState=d.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},d.queue=i,i=i.dispatch=lA.bind(null,dt,i),[d.memoizedState,i]},useRef:function(i){var r=ds();return i={current:i},r.memoizedState=i},useState:function(i){i=Im(i);var r=i.queue,c=Gy.bind(null,dt,r);return r.dispatch=c,[i.memoizedState,c]},useDebugValue:Dm,useDeferredValue:function(i,r){var c=ds();return jm(c,i,r)},useTransition:function(){var i=Im(!1);return i=Ly.bind(null,dt,i.queue,!0,!1),ds().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,c){var d=dt,b=ds();if(wt){if(c===void 0)throw Error(s(407));c=c()}else{if(c=r(),Qt===null)throw Error(s(349));(yt&127)!==0||dy(d,r,c)}b.memoizedState=c;var v={value:c,getSnapshot:r};return b.queue=v,ky(fy.bind(null,d,v,i),[i]),d.flags|=2048,ul(9,{destroy:void 0},hy.bind(null,d,v,c,r),null),c},useId:function(){var i=ds(),r=Qt.identifierPrefix;if(wt){var c=Bi,d=Vi;c=(d&~(1<<32-st(d)-1)).toString(32)+c,r="_"+r+"R_"+c,c=hd++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=tA++,r="_"+r+"r_"+c.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Lm,useFormState:Ty,useActionState:Ty,useOptimistic:function(i){var r=ds();r.memoizedState=r.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Um.bind(null,dt,!0,c),c.dispatch=r,[i,r]},useMemoCache:km,useCacheRefresh:function(){return ds().memoizedState=oA.bind(null,dt)},useEffectEvent:function(i){var r=ds(),c={impl:i};return r.memoizedState=c,function(){if((jt&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},Om={readContext:$n,use:md,useCallback:Dy,useContext:$n,useEffect:Mm,useImperativeHandle:My,useInsertionEffect:Cy,useLayoutEffect:Iy,useMemo:jy,useReducer:pd,useRef:Ny,useState:function(){return pd(ga)},useDebugValue:Dm,useDeferredValue:function(i,r){var c=bn();return Py(c,$t.memoizedState,i,r)},useTransition:function(){var i=pd(ga)[0],r=bn().memoizedState;return[typeof i=="boolean"?i:Ic(i),r]},useSyncExternalStore:uy,useId:Vy,useHostTransitionStatus:Lm,useFormState:Sy,useActionState:Sy,useOptimistic:function(i,r){var c=bn();return gy(c,$t,i,r)},useMemoCache:km,useCacheRefresh:By};Om.useEffectEvent=Ay;var qy={readContext:$n,use:md,useCallback:Dy,useContext:$n,useEffect:Mm,useImperativeHandle:My,useInsertionEffect:Cy,useLayoutEffect:Iy,useMemo:jy,useReducer:Cm,useRef:Ny,useState:function(){return Cm(ga)},useDebugValue:Dm,useDeferredValue:function(i,r){var c=bn();return $t===null?jm(c,i,r):Py(c,$t.memoizedState,i,r)},useTransition:function(){var i=Cm(ga)[0],r=bn().memoizedState;return[typeof i=="boolean"?i:Ic(i),r]},useSyncExternalStore:uy,useId:Vy,useHostTransitionStatus:Lm,useFormState:wy,useActionState:wy,useOptimistic:function(i,r){var c=bn();return $t!==null?gy(c,$t,i,r):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:km,useCacheRefresh:By};qy.useEffectEvent=Ay;function Vm(i,r,c,d){r=i.memoizedState,c=c(d,r),c=c==null?r:_({},r,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Bm={enqueueSetState:function(i,r,c){i=i._reactInternals;var d=Ps(),b=er(d);b.payload=r,c!=null&&(b.callback=c),r=tr(i,b,d),r!==null&&(bs(r,i,d),Nc(r,i,d))},enqueueReplaceState:function(i,r,c){i=i._reactInternals;var d=Ps(),b=er(d);b.tag=1,b.payload=r,c!=null&&(b.callback=c),r=tr(i,b,d),r!==null&&(bs(r,i,d),Nc(r,i,d))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var c=Ps(),d=er(c);d.tag=2,r!=null&&(d.callback=r),r=tr(i,d,c),r!==null&&(bs(r,i,c),Nc(r,i,c))}};function Ky(i,r,c,d,b,v,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,v,w):r.prototype&&r.prototype.isPureReactComponent?!yc(c,d)||!yc(b,v):!0}function $y(i,r,c,d){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,d),r.state!==i&&Bm.enqueueReplaceState(r,r.state,null)}function po(i,r){var c=r;if("ref"in r){c={};for(var d in r)d!=="ref"&&(c[d]=r[d])}if(i=i.defaultProps){c===r&&(c=_({},c));for(var b in i)c[b]===void 0&&(c[b]=i[b])}return c}function Yy(i){Qu(i)}function Jy(i){console.error(i)}function Qy(i){Qu(i)}function bd(i,r){try{var c=i.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function Wy(i,r,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Gm(i,r,c){return c=er(c),c.tag=3,c.payload={element:null},c.callback=function(){bd(i,r)},c}function Xy(i){return i=er(i),i.tag=3,i}function Zy(i,r,c,d){var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var v=d.value;i.payload=function(){return b(v)},i.callback=function(){Wy(r,c,d)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){Wy(r,c,d),typeof b!="function"&&(or===null?or=new Set([this]):or.add(this));var L=d.stack;this.componentDidCatch(d.value,{componentStack:L!==null?L:""})})}function cA(i,r,c,d,b){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=c.alternate,r!==null&&nl(r,c,b,!0),c=Rs.current,c!==null){switch(c.tag){case 31:case 13:return ei===null?Rd():c.alternate===null&&fn===0&&(fn=3),c.flags&=-257,c.flags|=65536,c.lanes=b,d===rd?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([d]):r.add(d),h0(i,d,b)),!1;case 22:return c.flags|=65536,d===rd?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([d]):c.add(d)),h0(i,d,b)),!1}throw Error(s(435,c.tag))}return h0(i,d,b),Rd(),!1}if(wt)return r=Rs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=b,d!==rm&&(i=Error(s(422),{cause:d}),_c(Qs(i,c)))):(d!==rm&&(r=Error(s(423),{cause:d}),_c(Qs(r,c))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,d=Qs(d,c),b=Gm(i.stateNode,d,b),xm(i,b),fn!==4&&(fn=2)),!1;var v=Error(s(520),{cause:d});if(v=Qs(v,c),Bc===null?Bc=[v]:Bc.push(v),fn!==4&&(fn=2),r===null)return!0;d=Qs(d,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,i=b&-b,c.lanes|=i,i=Gm(c.stateNode,d,i),xm(c,i),!1;case 1:if(r=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(or===null||!or.has(v))))return c.flags|=65536,b&=-b,c.lanes|=b,b=Xy(b),Zy(b,i,c,d),xm(c,b),!1}c=c.return}while(c!==null);return!1}var Fm=Error(s(461)),Nn=!1;function Yn(i,r,c,d){r.child=i===null?sy(r,null,c,d):fo(r,i.child,c,d)}function eb(i,r,c,d,b){c=c.render;var v=r.ref;if("ref"in d){var w={};for(var L in d)L!=="ref"&&(w[L]=d[L])}else w=d;return lo(r),d=Sm(i,r,c,w,v,b),L=Em(),i!==null&&!Nn?(wm(i,r,b),xa(i,r,b)):(wt&&L&&im(r),r.flags|=1,Yn(i,r,d,b),r.child)}function tb(i,r,c,d,b){if(i===null){var v=c.type;return typeof v=="function"&&!tm(v)&&v.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=v,nb(i,r,v,d,b)):(i=ed(c.type,null,d,r,r.mode,b),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,!Qm(i,b)){var w=v.memoizedProps;if(c=c.compare,c=c!==null?c:yc,c(w,d)&&i.ref===r.ref)return xa(i,r,b)}return r.flags|=1,i=da(v,d),i.ref=r.ref,i.return=r,r.child=i}function nb(i,r,c,d,b){if(i!==null){var v=i.memoizedProps;if(yc(v,d)&&i.ref===r.ref)if(Nn=!1,r.pendingProps=d=v,Qm(i,b))(i.flags&131072)!==0&&(Nn=!0);else return r.lanes=i.lanes,xa(i,r,b)}return zm(i,r,c,d,b)}function sb(i,r,c,d){var b=d.children,v=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|c:c,i!==null){for(d=r.child=i.child,b=0;d!==null;)b=b|d.lanes|d.childLanes,d=d.sibling;d=b&~v}else d=0,r.child=null;return ib(i,r,v,c,d)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&id(r,v!==null?v.cachePool:null),v!==null?ry(r,v):bm(),oy(r);else return d=r.lanes=536870912,ib(i,r,v!==null?v.baseLanes|c:c,c,d)}else v!==null?(id(r,v.cachePool),ry(r,v),sr(),r.memoizedState=null):(i!==null&&id(r,null),bm(),sr());return Yn(i,r,b,c),r.child}function Dc(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function ib(i,r,c,d,b){var v=fm();return v=v===null?null:{parent:En._currentValue,pool:v},r.memoizedState={baseLanes:c,cachePool:v},i!==null&&id(r,null),bm(),oy(r),i!==null&&nl(i,r,d,!0),r.childLanes=b,null}function vd(i,r){return r=Td({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function ab(i,r,c){return fo(r,i.child,null,c),i=vd(r,r.pendingProps),i.flags|=2,Ms(r),r.memoizedState=null,i}function uA(i,r,c){var d=r.pendingProps,b=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(wt){if(d.mode==="hidden")return i=vd(r,d),r.lanes=536870912,Dc(null,i);if(_m(r),(i=tn)?(i=xv(i,Zs),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ja!==null?{id:Vi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},c=Fx(i),c.return=r,r.child=c,Kn=r,tn=null)):i=null,i===null)throw Wa(r);return r.lanes=536870912,null}return vd(r,d)}var v=i.memoizedState;if(v!==null){var w=v.dehydrated;if(_m(r),b)if(r.flags&256)r.flags&=-257,r=ab(i,r,c);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Nn||nl(i,r,c,!1),b=(c&i.childLanes)!==0,Nn||b){if(d=Qt,d!==null&&(w=Fa(d,c),w!==0&&w!==v.retryLane))throw v.retryLane=w,io(i,w),bs(d,i,w),Fm;Rd(),r=ab(i,r,c)}else i=v.treeContext,tn=ti(w.nextSibling),Kn=r,wt=!0,Qa=null,Zs=!1,i!==null&&qx(r,i),r=vd(r,d),r.flags|=4096;return r}return i=da(i.child,{mode:d.mode,children:d.children}),i.ref=r.ref,r.child=i,i.return=r,i}function _d(i,r){var c=r.ref;if(c===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(i===null||i.ref!==c)&&(r.flags|=4194816)}}function zm(i,r,c,d,b){return lo(r),c=Sm(i,r,c,d,void 0,b),d=Em(),i!==null&&!Nn?(wm(i,r,b),xa(i,r,b)):(wt&&d&&im(r),r.flags|=1,Yn(i,r,c,b),r.child)}function rb(i,r,c,d,b,v){return lo(r),r.updateQueue=null,c=cy(r,d,c,b),ly(i),d=Em(),i!==null&&!Nn?(wm(i,r,v),xa(i,r,v)):(wt&&d&&im(r),r.flags|=1,Yn(i,r,c,v),r.child)}function ob(i,r,c,d,b){if(lo(r),r.stateNode===null){var v=Xo,w=c.contextType;typeof w=="object"&&w!==null&&(v=$n(w)),v=new c(d,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Bm,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=d,v.state=r.memoizedState,v.refs={},pm(r),w=c.contextType,v.context=typeof w=="object"&&w!==null?$n(w):Xo,v.state=r.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(Vm(r,c,w,d),v.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(w=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),w!==v.state&&Bm.enqueueReplaceState(v,v.state,null),Ac(r,d,v,b),kc(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(i===null){v=r.stateNode;var L=r.memoizedProps,H=po(c,L);v.props=H;var se=v.context,de=c.contextType;w=Xo,typeof de=="object"&&de!==null&&(w=$n(de));var ye=c.getDerivedStateFromProps;de=typeof ye=="function"||typeof v.getSnapshotBeforeUpdate=="function",L=r.pendingProps!==L,de||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(L||se!==w)&&$y(r,v,d,w),Za=!1;var ae=r.memoizedState;v.state=ae,Ac(r,d,v,b),kc(),se=r.memoizedState,L||ae!==se||Za?(typeof ye=="function"&&(Vm(r,c,ye,d),se=r.memoizedState),(H=Za||Ky(r,c,H,d,ae,se,w))?(de||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=se),v.props=d,v.state=se,v.context=w,d=H):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{v=r.stateNode,gm(i,r),w=r.memoizedProps,de=po(c,w),v.props=de,ye=r.pendingProps,ae=v.context,se=c.contextType,H=Xo,typeof se=="object"&&se!==null&&(H=$n(se)),L=c.getDerivedStateFromProps,(se=typeof L=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w!==ye||ae!==H)&&$y(r,v,d,H),Za=!1,ae=r.memoizedState,v.state=ae,Ac(r,d,v,b),kc();var le=r.memoizedState;w!==ye||ae!==le||Za||i!==null&&i.dependencies!==null&&nd(i.dependencies)?(typeof L=="function"&&(Vm(r,c,L,d),le=r.memoizedState),(de=Za||Ky(r,c,de,d,ae,le,H)||i!==null&&i.dependencies!==null&&nd(i.dependencies))?(se||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,le,H),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,le,H)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||w===i.memoizedProps&&ae===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&ae===i.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=le),v.props=d,v.state=le,v.context=H,d=de):(typeof v.componentDidUpdate!="function"||w===i.memoizedProps&&ae===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&ae===i.memoizedState||(r.flags|=1024),d=!1)}return v=d,_d(i,r),d=(r.flags&128)!==0,v||d?(v=r.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,i!==null&&d?(r.child=fo(r,i.child,null,b),r.child=fo(r,null,c,b)):Yn(i,r,c,b),r.memoizedState=v.state,i=r.child):i=xa(i,r,b),i}function lb(i,r,c,d){return ro(),r.flags|=256,Yn(i,r,c,d),r.child}var Hm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qm(i){return{baseLanes:i,cachePool:Wx()}}function Km(i,r,c){return i=i!==null?i.childLanes&~c:0,r&&(i|=js),i}function cb(i,r,c){var d=r.pendingProps,b=!1,v=(r.flags&128)!==0,w;if((w=v)||(w=i!==null&&i.memoizedState===null?!1:(yn.current&2)!==0),w&&(b=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,i===null){if(wt){if(b?nr(r):sr(),(i=tn)?(i=xv(i,Zs),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ja!==null?{id:Vi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},c=Fx(i),c.return=r,r.child=c,Kn=r,tn=null)):i=null,i===null)throw Wa(r);return A0(i)?r.lanes=32:r.lanes=536870912,null}var L=d.children;return d=d.fallback,b?(sr(),b=r.mode,L=Td({mode:"hidden",children:L},b),d=ao(d,b,c,null),L.return=r,d.return=r,L.sibling=d,r.child=L,d=r.child,d.memoizedState=qm(c),d.childLanes=Km(i,w,c),r.memoizedState=Hm,Dc(null,d)):(nr(r),$m(r,L))}var H=i.memoizedState;if(H!==null&&(L=H.dehydrated,L!==null)){if(v)r.flags&256?(nr(r),r.flags&=-257,r=Ym(i,r,c)):r.memoizedState!==null?(sr(),r.child=i.child,r.flags|=128,r=null):(sr(),L=d.fallback,b=r.mode,d=Td({mode:"visible",children:d.children},b),L=ao(L,b,c,null),L.flags|=2,d.return=r,L.return=r,d.sibling=L,r.child=d,fo(r,i.child,null,c),d=r.child,d.memoizedState=qm(c),d.childLanes=Km(i,w,c),r.memoizedState=Hm,r=Dc(null,d));else if(nr(r),A0(L)){if(w=L.nextSibling&&L.nextSibling.dataset,w)var se=w.dgst;w=se,d=Error(s(419)),d.stack="",d.digest=w,_c({value:d,source:null,stack:null}),r=Ym(i,r,c)}else if(Nn||nl(i,r,c,!1),w=(c&i.childLanes)!==0,Nn||w){if(w=Qt,w!==null&&(d=Fa(w,c),d!==0&&d!==H.retryLane))throw H.retryLane=d,io(i,d),bs(w,i,d),Fm;k0(L)||Rd(),r=Ym(i,r,c)}else k0(L)?(r.flags|=192,r.child=i.child,r=null):(i=H.treeContext,tn=ti(L.nextSibling),Kn=r,wt=!0,Qa=null,Zs=!1,i!==null&&qx(r,i),r=$m(r,d.children),r.flags|=4096);return r}return b?(sr(),L=d.fallback,b=r.mode,H=i.child,se=H.sibling,d=da(H,{mode:"hidden",children:d.children}),d.subtreeFlags=H.subtreeFlags&65011712,se!==null?L=da(se,L):(L=ao(L,b,c,null),L.flags|=2),L.return=r,d.return=r,d.sibling=L,r.child=d,Dc(null,d),d=r.child,L=i.child.memoizedState,L===null?L=qm(c):(b=L.cachePool,b!==null?(H=En._currentValue,b=b.parent!==H?{parent:H,pool:H}:b):b=Wx(),L={baseLanes:L.baseLanes|c,cachePool:b}),d.memoizedState=L,d.childLanes=Km(i,w,c),r.memoizedState=Hm,Dc(i.child,d)):(nr(r),c=i.child,i=c.sibling,c=da(c,{mode:"visible",children:d.children}),c.return=r,c.sibling=null,i!==null&&(w=r.deletions,w===null?(r.deletions=[i],r.flags|=16):w.push(i)),r.child=c,r.memoizedState=null,c)}function $m(i,r){return r=Td({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Td(i,r){return i=Is(22,i,null,r),i.lanes=0,i}function Ym(i,r,c){return fo(r,i.child,null,c),i=$m(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function ub(i,r,c){i.lanes|=r;var d=i.alternate;d!==null&&(d.lanes|=r),cm(i.return,r,c)}function Jm(i,r,c,d,b,v){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:b,treeForkCount:v}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=c,w.tailMode=b,w.treeForkCount=v)}function db(i,r,c){var d=r.pendingProps,b=d.revealOrder,v=d.tail;d=d.children;var w=yn.current,L=(w&2)!==0;if(L?(w=w&1|2,r.flags|=128):w&=1,fe(yn,w),Yn(i,r,d,c),d=wt?vc:0,!L&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ub(i,c,r);else if(i.tag===19)ub(i,c,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(b){case"forwards":for(c=r.child,b=null;c!==null;)i=c.alternate,i!==null&&ud(i)===null&&(b=c),c=c.sibling;c=b,c===null?(b=r.child,r.child=null):(b=c.sibling,c.sibling=null),Jm(r,!1,b,c,v,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,b=r.child,r.child=null;b!==null;){if(i=b.alternate,i!==null&&ud(i)===null){r.child=b;break}i=b.sibling,b.sibling=c,c=b,b=i}Jm(r,!0,c,null,v,d);break;case"together":Jm(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function xa(i,r,c){if(i!==null&&(r.dependencies=i.dependencies),rr|=r.lanes,(c&r.childLanes)===0)if(i!==null){if(nl(i,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,c=da(i,i.pendingProps),r.child=c,c.return=r;i.sibling!==null;)i=i.sibling,c=c.sibling=da(i,i.pendingProps),c.return=r;c.sibling=null}return r.child}function Qm(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&nd(i)))}function dA(i,r,c){switch(r.tag){case 3:nt(r,r.stateNode.containerInfo),Xa(r,En,i.memoizedState.cache),ro();break;case 27:case 5:St(r);break;case 4:nt(r,r.stateNode.containerInfo);break;case 10:Xa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,_m(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(nr(r),r.flags|=128,null):(c&r.child.childLanes)!==0?cb(i,r,c):(nr(r),i=xa(i,r,c),i!==null?i.sibling:null);nr(r);break;case 19:var b=(i.flags&128)!==0;if(d=(c&r.childLanes)!==0,d||(nl(i,r,c,!1),d=(c&r.childLanes)!==0),b){if(d)return db(i,r,c);r.flags|=128}if(b=r.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),fe(yn,yn.current),d)break;return null;case 22:return r.lanes=0,sb(i,r,c,r.pendingProps);case 24:Xa(r,En,i.memoizedState.cache)}return xa(i,r,c)}function hb(i,r,c){if(i!==null)if(i.memoizedProps!==r.pendingProps)Nn=!0;else{if(!Qm(i,c)&&(r.flags&128)===0)return Nn=!1,dA(i,r,c);Nn=(i.flags&131072)!==0}else Nn=!1,wt&&(r.flags&1048576)!==0&&Hx(r,vc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(i=uo(r.elementType),r.type=i,typeof i=="function")tm(i)?(d=po(i,d),r.tag=1,r=ob(null,r,i,d,c)):(r.tag=0,r=zm(null,r,i,d,c));else{if(i!=null){var b=i.$$typeof;if(b===q){r.tag=11,r=eb(null,r,i,d,c);break e}else if(b===j){r.tag=14,r=tb(null,r,i,d,c);break e}}throw r=Ae(i)||i,Error(s(306,r,""))}}return r;case 0:return zm(i,r,r.type,r.pendingProps,c);case 1:return d=r.type,b=po(d,r.pendingProps),ob(i,r,d,b,c);case 3:e:{if(nt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));d=r.pendingProps;var v=r.memoizedState;b=v.element,gm(i,r),Ac(r,d,null,c);var w=r.memoizedState;if(d=w.cache,Xa(r,En,d),d!==v.cache&&um(r,[En],c,!0),kc(),d=w.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=lb(i,r,d,c);break e}else if(d!==b){b=Qs(Error(s(424)),r),_c(b),r=lb(i,r,d,c);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(tn=ti(i.firstChild),Kn=r,wt=!0,Qa=null,Zs=!0,c=sy(r,null,d,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(ro(),d===b){r=xa(i,r,c);break e}Yn(i,r,d,c)}r=r.child}return r;case 26:return _d(i,r),i===null?(c=Sv(r.type,null,r.pendingProps,null))?r.memoizedState=c:wt||(c=r.type,i=r.pendingProps,d=Od(Te.current).createElement(c),d[un]=r,d[Sn]=i,Jn(d,c,i),dn(d),r.stateNode=d):r.memoizedState=Sv(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return St(r),i===null&&wt&&(d=r.stateNode=vv(r.type,r.pendingProps,Te.current),Kn=r,Zs=!0,b=tn,dr(r.type)?(C0=b,tn=ti(d.firstChild)):tn=b),Yn(i,r,r.pendingProps.children,c),_d(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&wt&&((b=d=tn)&&(d=GA(d,r.type,r.pendingProps,Zs),d!==null?(r.stateNode=d,Kn=r,tn=ti(d.firstChild),Zs=!1,b=!0):b=!1),b||Wa(r)),St(r),b=r.type,v=r.pendingProps,w=i!==null?i.memoizedProps:null,d=v.children,E0(b,v)?d=null:w!==null&&E0(b,w)&&(r.flags|=32),r.memoizedState!==null&&(b=Sm(i,r,nA,null,null,c),Yc._currentValue=b),_d(i,r),Yn(i,r,d,c),r.child;case 6:return i===null&&wt&&((i=c=tn)&&(c=FA(c,r.pendingProps,Zs),c!==null?(r.stateNode=c,Kn=r,tn=null,i=!0):i=!1),i||Wa(r)),null;case 13:return cb(i,r,c);case 4:return nt(r,r.stateNode.containerInfo),d=r.pendingProps,i===null?r.child=fo(r,null,d,c):Yn(i,r,d,c),r.child;case 11:return eb(i,r,r.type,r.pendingProps,c);case 7:return Yn(i,r,r.pendingProps,c),r.child;case 8:return Yn(i,r,r.pendingProps.children,c),r.child;case 12:return Yn(i,r,r.pendingProps.children,c),r.child;case 10:return d=r.pendingProps,Xa(r,r.type,d.value),Yn(i,r,d.children,c),r.child;case 9:return b=r.type._context,d=r.pendingProps.children,lo(r),b=$n(b),d=d(b),r.flags|=1,Yn(i,r,d,c),r.child;case 14:return tb(i,r,r.type,r.pendingProps,c);case 15:return nb(i,r,r.type,r.pendingProps,c);case 19:return db(i,r,c);case 31:return uA(i,r,c);case 22:return sb(i,r,c,r.pendingProps);case 24:return lo(r),d=$n(En),i===null?(b=fm(),b===null&&(b=Qt,v=dm(),b.pooledCache=v,v.refCount++,v!==null&&(b.pooledCacheLanes|=c),b=v),r.memoizedState={parent:d,cache:b},pm(r),Xa(r,En,b)):((i.lanes&c)!==0&&(gm(i,r),Ac(r,null,null,c),kc()),b=i.memoizedState,v=r.memoizedState,b.parent!==d?(b={parent:d,cache:d},r.memoizedState=b,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=b),Xa(r,En,d)):(d=v.cache,Xa(r,En,d),d!==b.cache&&um(r,[En],c,!0))),Yn(i,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ya(i){i.flags|=4}function Wm(i,r,c,d,b){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(b&335544128)===b)if(i.stateNode.complete)i.flags|=8192;else if(Vb())i.flags|=8192;else throw ho=rd,mm}else i.flags&=-16777217}function fb(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Av(r))if(Vb())i.flags|=8192;else throw ho=rd,mm}function Sd(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Ns():536870912,i.lanes|=r,ml|=r)}function jc(i,r){if(!wt)switch(i.tailMode){case"hidden":r=i.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function nn(i){var r=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(r)for(var b=i.child;b!==null;)c|=b.lanes|b.childLanes,d|=b.subtreeFlags&65011712,d|=b.flags&65011712,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)c|=b.lanes|b.childLanes,d|=b.subtreeFlags,d|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=d,i.childLanes=c,r}function hA(i,r,c){var d=r.pendingProps;switch(am(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(r),null;case 1:return nn(r),null;case 3:return c=r.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),ma(En),Qe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(tl(r)?ya(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,om())),nn(r),null;case 26:var b=r.type,v=r.memoizedState;return i===null?(ya(r),v!==null?(nn(r),fb(r,v)):(nn(r),Wm(r,b,null,d,c))):v?v!==i.memoizedState?(ya(r),nn(r),fb(r,v)):(nn(r),r.flags&=-16777217):(i=i.memoizedProps,i!==d&&ya(r),nn(r),Wm(r,b,i,d,c)),null;case 27:if(At(r),c=Te.current,b=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&ya(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return nn(r),null}i=ie.current,tl(r)?Kx(r):(i=vv(b,d,c),r.stateNode=i,ya(r))}return nn(r),null;case 5:if(At(r),b=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&ya(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return nn(r),null}if(v=ie.current,tl(r))Kx(r);else{var w=Od(Te.current);switch(v){case 1:v=w.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:v=w.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":v=w.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":v=w.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":v=w.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof d.is=="string"?w.createElement("select",{is:d.is}):w.createElement("select"),d.multiple?v.multiple=!0:d.size&&(v.size=d.size);break;default:v=typeof d.is=="string"?w.createElement(b,{is:d.is}):w.createElement(b)}}v[un]=r,v[Sn]=d;e:for(w=r.child;w!==null;){if(w.tag===5||w.tag===6)v.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===r)break e;for(;w.sibling===null;){if(w.return===null||w.return===r)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}r.stateNode=v;e:switch(Jn(v,b,d),b){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&ya(r)}}return nn(r),Wm(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,c),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==d&&ya(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(s(166));if(i=Te.current,tl(r)){if(i=r.stateNode,c=r.memoizedProps,d=null,b=Kn,b!==null)switch(b.tag){case 27:case 5:d=b.memoizedProps}i[un]=r,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||cv(i.nodeValue,c)),i||Wa(r,!0)}else i=Od(i).createTextNode(d),i[un]=r,r.stateNode=i}return nn(r),null;case 31:if(c=r.memoizedState,i===null||i.memoizedState!==null){if(d=tl(r),c!==null){if(i===null){if(!d)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[un]=r}else ro(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;nn(r),i=!1}else c=om(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return r.flags&256?(Ms(r),r):(Ms(r),null);if((r.flags&128)!==0)throw Error(s(558))}return nn(r),null;case 13:if(d=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=tl(r),d!==null&&d.dehydrated!==null){if(i===null){if(!b)throw Error(s(318));if(b=r.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));b[un]=r}else ro(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;nn(r),b=!1}else b=om(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=b),b=!0;if(!b)return r.flags&256?(Ms(r),r):(Ms(r),null)}return Ms(r),(r.flags&128)!==0?(r.lanes=c,r):(c=d!==null,i=i!==null&&i.memoizedState!==null,c&&(d=r.child,b=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(b=d.alternate.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==b&&(d.flags|=2048)),c!==i&&c&&(r.child.flags|=8192),Sd(r,r.updateQueue),nn(r),null);case 4:return Qe(),i===null&&b0(r.stateNode.containerInfo),nn(r),null;case 10:return ma(r.type),nn(r),null;case 19:if(Q(yn),d=r.memoizedState,d===null)return nn(r),null;if(b=(r.flags&128)!==0,v=d.rendering,v===null)if(b)jc(d,!1);else{if(fn!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(v=ud(i),v!==null){for(r.flags|=128,jc(d,!1),i=v.updateQueue,r.updateQueue=i,Sd(r,i),r.subtreeFlags=0,i=c,c=r.child;c!==null;)Gx(c,i),c=c.sibling;return fe(yn,yn.current&1|2),wt&&ha(r,d.treeForkCount),r.child}i=i.sibling}d.tail!==null&&qt()>Ad&&(r.flags|=128,b=!0,jc(d,!1),r.lanes=4194304)}else{if(!b)if(i=ud(v),i!==null){if(r.flags|=128,b=!0,i=i.updateQueue,r.updateQueue=i,Sd(r,i),jc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!v.alternate&&!wt)return nn(r),null}else 2*qt()-d.renderingStartTime>Ad&&c!==536870912&&(r.flags|=128,b=!0,jc(d,!1),r.lanes=4194304);d.isBackwards?(v.sibling=r.child,r.child=v):(i=d.last,i!==null?i.sibling=v:r.child=v,d.last=v)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=qt(),i.sibling=null,c=yn.current,fe(yn,b?c&1|2:c&1),wt&&ha(r,d.treeForkCount),i):(nn(r),null);case 22:case 23:return Ms(r),vm(),d=r.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(c&536870912)!==0&&(r.flags&128)===0&&(nn(r),r.subtreeFlags&6&&(r.flags|=8192)):nn(r),c=r.updateQueue,c!==null&&Sd(r,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==c&&(r.flags|=2048),i!==null&&Q(co),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ma(En),nn(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function fA(i,r){switch(am(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return ma(En),Qe(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return At(r),null;case 31:if(r.memoizedState!==null){if(Ms(r),r.alternate===null)throw Error(s(340));ro()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Ms(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));ro()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return Q(yn),null;case 4:return Qe(),null;case 10:return ma(r.type),null;case 22:case 23:return Ms(r),vm(),i!==null&&Q(co),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return ma(En),null;case 25:return null;default:return null}}function mb(i,r){switch(am(r),r.tag){case 3:ma(En),Qe();break;case 26:case 27:case 5:At(r);break;case 4:Qe();break;case 31:r.memoizedState!==null&&Ms(r);break;case 13:Ms(r);break;case 19:Q(yn);break;case 10:ma(r.type);break;case 22:case 23:Ms(r),vm(),i!==null&&Q(co);break;case 24:ma(En)}}function Pc(i,r){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var b=d.next;c=b;do{if((c.tag&i)===i){d=void 0;var v=c.create,w=c.inst;d=v(),w.destroy=d}c=c.next}while(c!==b)}}catch(L){Ht(r,r.return,L)}}function ir(i,r,c){try{var d=r.updateQueue,b=d!==null?d.lastEffect:null;if(b!==null){var v=b.next;d=v;do{if((d.tag&i)===i){var w=d.inst,L=w.destroy;if(L!==void 0){w.destroy=void 0,b=r;var H=c,se=L;try{se()}catch(de){Ht(b,H,de)}}}d=d.next}while(d!==v)}}catch(de){Ht(r,r.return,de)}}function pb(i){var r=i.updateQueue;if(r!==null){var c=i.stateNode;try{ay(r,c)}catch(d){Ht(i,i.return,d)}}}function gb(i,r,c){c.props=po(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){Ht(i,r,d)}}function Lc(i,r){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(b){Ht(i,r,b)}}function Gi(i,r){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(b){Ht(i,r,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(b){Ht(i,r,b)}else c.current=null}function xb(i){var r=i.type,c=i.memoizedProps,d=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(b){Ht(i,i.return,b)}}function Xm(i,r,c){try{var d=i.stateNode;PA(d,i.type,c,r),d[Sn]=r}catch(b){Ht(i,i.return,b)}}function yb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&dr(i.type)||i.tag===4}function Zm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||yb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&dr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function e0(i,r,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(i),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=ui));else if(d!==4&&(d===27&&dr(i.type)&&(c=i.stateNode,r=null),i=i.child,i!==null))for(e0(i,r,c),i=i.sibling;i!==null;)e0(i,r,c),i=i.sibling}function Ed(i,r,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?c.insertBefore(i,r):c.appendChild(i);else if(d!==4&&(d===27&&dr(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Ed(i,r,c),i=i.sibling;i!==null;)Ed(i,r,c),i=i.sibling}function bb(i){var r=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,b=r.attributes;b.length;)r.removeAttributeNode(b[0]);Jn(r,d,c),r[un]=i,r[Sn]=c}catch(v){Ht(i,i.return,v)}}var ba=!1,kn=!1,t0=!1,vb=typeof WeakSet=="function"?WeakSet:Set,Un=null;function mA(i,r){if(i=i.containerInfo,T0=qd,i=Mx(i),Yf(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var b=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var w=0,L=-1,H=-1,se=0,de=0,ye=i,ae=null;t:for(;;){for(var le;ye!==c||b!==0&&ye.nodeType!==3||(L=w+b),ye!==v||d!==0&&ye.nodeType!==3||(H=w+d),ye.nodeType===3&&(w+=ye.nodeValue.length),(le=ye.firstChild)!==null;)ae=ye,ye=le;for(;;){if(ye===i)break t;if(ae===c&&++se===b&&(L=w),ae===v&&++de===d&&(H=w),(le=ye.nextSibling)!==null)break;ye=ae,ae=ye.parentNode}ye=le}c=L===-1||H===-1?null:{start:L,end:H}}else c=null}c=c||{start:0,end:0}}else c=null;for(S0={focusedElem:i,selectionRange:c},qd=!1,Un=r;Un!==null;)if(r=Un,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Un=i;else for(;Un!==null;){switch(r=Un,v=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)b=i[c],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,c=r,b=v.memoizedProps,v=v.memoizedState,d=c.stateNode;try{var Ue=po(c.type,b);i=d.getSnapshotBeforeUpdate(Ue,v),d.__reactInternalSnapshotBeforeUpdate=i}catch(Xe){Ht(c,c.return,Xe)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,c=i.nodeType,c===9)N0(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":N0(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Un=i;break}Un=r.return}}function _b(i,r,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:_a(i,c),d&4&&Pc(5,c);break;case 1:if(_a(i,c),d&4)if(i=c.stateNode,r===null)try{i.componentDidMount()}catch(w){Ht(c,c.return,w)}else{var b=po(c.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(b,r,i.__reactInternalSnapshotBeforeUpdate)}catch(w){Ht(c,c.return,w)}}d&64&&pb(c),d&512&&Lc(c,c.return);break;case 3:if(_a(i,c),d&64&&(i=c.updateQueue,i!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{ay(i,r)}catch(w){Ht(c,c.return,w)}}break;case 27:r===null&&d&4&&bb(c);case 26:case 5:_a(i,c),r===null&&d&4&&xb(c),d&512&&Lc(c,c.return);break;case 12:_a(i,c);break;case 31:_a(i,c),d&4&&Eb(i,c);break;case 13:_a(i,c),d&4&&wb(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=SA.bind(null,c),zA(i,c))));break;case 22:if(d=c.memoizedState!==null||ba,!d){r=r!==null&&r.memoizedState!==null||kn,b=ba;var v=kn;ba=d,(kn=r)&&!v?Ta(i,c,(c.subtreeFlags&8772)!==0):_a(i,c),ba=b,kn=v}break;case 30:break;default:_a(i,c)}}function Tb(i){var r=i.alternate;r!==null&&(i.alternate=null,Tb(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&aa(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var rn=null,ps=!1;function va(i,r,c){for(c=c.child;c!==null;)Sb(i,r,c),c=c.sibling}function Sb(i,r,c){if(we&&typeof we.onCommitFiberUnmount=="function")try{we.onCommitFiberUnmount(Se,c)}catch{}switch(c.tag){case 26:kn||Gi(c,r),va(i,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:kn||Gi(c,r);var d=rn,b=ps;dr(c.type)&&(rn=c.stateNode,ps=!1),va(i,r,c),qc(c.stateNode),rn=d,ps=b;break;case 5:kn||Gi(c,r);case 6:if(d=rn,b=ps,rn=null,va(i,r,c),rn=d,ps=b,rn!==null)if(ps)try{(rn.nodeType===9?rn.body:rn.nodeName==="HTML"?rn.ownerDocument.body:rn).removeChild(c.stateNode)}catch(v){Ht(c,r,v)}else try{rn.removeChild(c.stateNode)}catch(v){Ht(c,r,v)}break;case 18:rn!==null&&(ps?(i=rn,pv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Tl(i)):pv(rn,c.stateNode));break;case 4:d=rn,b=ps,rn=c.stateNode.containerInfo,ps=!0,va(i,r,c),rn=d,ps=b;break;case 0:case 11:case 14:case 15:ir(2,c,r),kn||ir(4,c,r),va(i,r,c);break;case 1:kn||(Gi(c,r),d=c.stateNode,typeof d.componentWillUnmount=="function"&&gb(c,r,d)),va(i,r,c);break;case 21:va(i,r,c);break;case 22:kn=(d=kn)||c.memoizedState!==null,va(i,r,c),kn=d;break;default:va(i,r,c)}}function Eb(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Tl(i)}catch(c){Ht(r,r.return,c)}}}function wb(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Tl(i)}catch(c){Ht(r,r.return,c)}}function pA(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new vb),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new vb),r;default:throw Error(s(435,i.tag))}}function wd(i,r){var c=pA(i);r.forEach(function(d){if(!c.has(d)){c.add(d);var b=EA.bind(null,i,d);d.then(b,b)}})}function gs(i,r){var c=r.deletions;if(c!==null)for(var d=0;d<c.length;d++){var b=c[d],v=i,w=r,L=w;e:for(;L!==null;){switch(L.tag){case 27:if(dr(L.type)){rn=L.stateNode,ps=!1;break e}break;case 5:rn=L.stateNode,ps=!1;break e;case 3:case 4:rn=L.stateNode.containerInfo,ps=!0;break e}L=L.return}if(rn===null)throw Error(s(160));Sb(v,w,b),rn=null,ps=!1,v=b.alternate,v!==null&&(v.return=null),b.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Nb(r,i),r=r.sibling}var gi=null;function Nb(i,r){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:gs(r,i),xs(i),d&4&&(ir(3,i,i.return),Pc(3,i),ir(5,i,i.return));break;case 1:gs(r,i),xs(i),d&512&&(kn||c===null||Gi(c,c.return)),d&64&&ba&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var b=gi;if(gs(r,i),xs(i),d&512&&(kn||c===null||Gi(c,c.return)),d&4){var v=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){e:{d=i.type,c=i.memoizedProps,b=b.ownerDocument||b;t:switch(d){case"title":v=b.getElementsByTagName("title")[0],(!v||v[Gs]||v[un]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=b.createElement(d),b.head.insertBefore(v,b.querySelector("head > title"))),Jn(v,d,c),v[un]=i,dn(v),d=v;break e;case"link":var w=Nv("link","href",b).get(d+(c.href||""));if(w){for(var L=0;L<w.length;L++)if(v=w[L],v.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(L,1);break t}}v=b.createElement(d),Jn(v,d,c),b.head.appendChild(v);break;case"meta":if(w=Nv("meta","content",b).get(d+(c.content||""))){for(L=0;L<w.length;L++)if(v=w[L],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(L,1);break t}}v=b.createElement(d),Jn(v,d,c),b.head.appendChild(v);break;default:throw Error(s(468,d))}v[un]=i,dn(v),d=v}i.stateNode=d}else kv(b,i.type,i.stateNode);else i.stateNode=wv(b,d,i.memoizedProps);else v!==d?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,d===null?kv(b,i.type,i.stateNode):wv(b,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Xm(i,i.memoizedProps,c.memoizedProps)}break;case 27:gs(r,i),xs(i),d&512&&(kn||c===null||Gi(c,c.return)),c!==null&&d&4&&Xm(i,i.memoizedProps,c.memoizedProps);break;case 5:if(gs(r,i),xs(i),d&512&&(kn||c===null||Gi(c,c.return)),i.flags&32){b=i.stateNode;try{en(b,"")}catch(Ue){Ht(i,i.return,Ue)}}d&4&&i.stateNode!=null&&(b=i.memoizedProps,Xm(i,b,c!==null?c.memoizedProps:b)),d&1024&&(t0=!0);break;case 6:if(gs(r,i),xs(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(Ue){Ht(i,i.return,Ue)}}break;case 3:if(Gd=null,b=gi,gi=Vd(r.containerInfo),gs(r,i),gi=b,xs(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Tl(r.containerInfo)}catch(Ue){Ht(i,i.return,Ue)}t0&&(t0=!1,kb(i));break;case 4:d=gi,gi=Vd(i.stateNode.containerInfo),gs(r,i),xs(i),gi=d;break;case 12:gs(r,i),xs(i);break;case 31:gs(r,i),xs(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,wd(i,d)));break;case 13:gs(r,i),xs(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(kd=qt()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,wd(i,d)));break;case 22:b=i.memoizedState!==null;var H=c!==null&&c.memoizedState!==null,se=ba,de=kn;if(ba=se||b,kn=de||H,gs(r,i),kn=de,ba=se,xs(i),d&8192)e:for(r=i.stateNode,r._visibility=b?r._visibility&-2:r._visibility|1,b&&(c===null||H||ba||kn||go(i)),c=null,r=i;;){if(r.tag===5||r.tag===26){if(c===null){H=c=r;try{if(v=H.stateNode,b)w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{L=H.stateNode;var ye=H.memoizedProps.style,ae=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;L.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Ue){Ht(H,H.return,Ue)}}}else if(r.tag===6){if(c===null){H=r;try{H.stateNode.nodeValue=b?"":H.memoizedProps}catch(Ue){Ht(H,H.return,Ue)}}}else if(r.tag===18){if(c===null){H=r;try{var le=H.stateNode;b?gv(le,!0):gv(H.stateNode,!1)}catch(Ue){Ht(H,H.return,Ue)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,wd(i,c))));break;case 19:gs(r,i),xs(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,wd(i,d)));break;case 30:break;case 21:break;default:gs(r,i),xs(i)}}function xs(i){var r=i.flags;if(r&2){try{for(var c,d=i.return;d!==null;){if(yb(d)){c=d;break}d=d.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var b=c.stateNode,v=Zm(i);Ed(i,v,b);break;case 5:var w=c.stateNode;c.flags&32&&(en(w,""),c.flags&=-33);var L=Zm(i);Ed(i,L,w);break;case 3:case 4:var H=c.stateNode.containerInfo,se=Zm(i);e0(i,se,H);break;default:throw Error(s(161))}}catch(de){Ht(i,i.return,de)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function kb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;kb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function _a(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)_b(i,r.alternate,r),r=r.sibling}function go(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:ir(4,r,r.return),go(r);break;case 1:Gi(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&gb(r,r.return,c),go(r);break;case 27:qc(r.stateNode);case 26:case 5:Gi(r,r.return),go(r);break;case 22:r.memoizedState===null&&go(r);break;case 30:go(r);break;default:go(r)}i=i.sibling}}function Ta(i,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,b=i,v=r,w=v.flags;switch(v.tag){case 0:case 11:case 15:Ta(b,v,c),Pc(4,v);break;case 1:if(Ta(b,v,c),d=v,b=d.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(se){Ht(d,d.return,se)}if(d=v,b=d.updateQueue,b!==null){var L=d.stateNode;try{var H=b.shared.hiddenCallbacks;if(H!==null)for(b.shared.hiddenCallbacks=null,b=0;b<H.length;b++)iy(H[b],L)}catch(se){Ht(d,d.return,se)}}c&&w&64&&pb(v),Lc(v,v.return);break;case 27:bb(v);case 26:case 5:Ta(b,v,c),c&&d===null&&w&4&&xb(v),Lc(v,v.return);break;case 12:Ta(b,v,c);break;case 31:Ta(b,v,c),c&&w&4&&Eb(b,v);break;case 13:Ta(b,v,c),c&&w&4&&wb(b,v);break;case 22:v.memoizedState===null&&Ta(b,v,c),Lc(v,v.return);break;case 30:break;default:Ta(b,v,c)}r=r.sibling}}function n0(i,r){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Tc(c))}function s0(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Tc(i))}function xi(i,r,c,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ab(i,r,c,d),r=r.sibling}function Ab(i,r,c,d){var b=r.flags;switch(r.tag){case 0:case 11:case 15:xi(i,r,c,d),b&2048&&Pc(9,r);break;case 1:xi(i,r,c,d);break;case 3:xi(i,r,c,d),b&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Tc(i)));break;case 12:if(b&2048){xi(i,r,c,d),i=r.stateNode;try{var v=r.memoizedProps,w=v.id,L=v.onPostCommit;typeof L=="function"&&L(w,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(H){Ht(r,r.return,H)}}else xi(i,r,c,d);break;case 31:xi(i,r,c,d);break;case 13:xi(i,r,c,d);break;case 23:break;case 22:v=r.stateNode,w=r.alternate,r.memoizedState!==null?v._visibility&2?xi(i,r,c,d):Uc(i,r):v._visibility&2?xi(i,r,c,d):(v._visibility|=2,dl(i,r,c,d,(r.subtreeFlags&10256)!==0||!1)),b&2048&&n0(w,r);break;case 24:xi(i,r,c,d),b&2048&&s0(r.alternate,r);break;default:xi(i,r,c,d)}}function dl(i,r,c,d,b){for(b=b&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=i,w=r,L=c,H=d,se=w.flags;switch(w.tag){case 0:case 11:case 15:dl(v,w,L,H,b),Pc(8,w);break;case 23:break;case 22:var de=w.stateNode;w.memoizedState!==null?de._visibility&2?dl(v,w,L,H,b):Uc(v,w):(de._visibility|=2,dl(v,w,L,H,b)),b&&se&2048&&n0(w.alternate,w);break;case 24:dl(v,w,L,H,b),b&&se&2048&&s0(w.alternate,w);break;default:dl(v,w,L,H,b)}r=r.sibling}}function Uc(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=i,d=r,b=d.flags;switch(d.tag){case 22:Uc(c,d),b&2048&&n0(d.alternate,d);break;case 24:Uc(c,d),b&2048&&s0(d.alternate,d);break;default:Uc(c,d)}r=r.sibling}}var Oc=8192;function hl(i,r,c){if(i.subtreeFlags&Oc)for(i=i.child;i!==null;)Cb(i,r,c),i=i.sibling}function Cb(i,r,c){switch(i.tag){case 26:hl(i,r,c),i.flags&Oc&&i.memoizedState!==null&&t2(c,gi,i.memoizedState,i.memoizedProps);break;case 5:hl(i,r,c);break;case 3:case 4:var d=gi;gi=Vd(i.stateNode.containerInfo),hl(i,r,c),gi=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=Oc,Oc=16777216,hl(i,r,c),Oc=d):hl(i,r,c));break;default:hl(i,r,c)}}function Ib(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Vc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];Un=d,Mb(d,i)}Ib(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Rb(i),i=i.sibling}function Rb(i){switch(i.tag){case 0:case 11:case 15:Vc(i),i.flags&2048&&ir(9,i,i.return);break;case 3:Vc(i);break;case 12:Vc(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Nd(i)):Vc(i);break;default:Vc(i)}}function Nd(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];Un=d,Mb(d,i)}Ib(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:ir(8,r,r.return),Nd(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,Nd(r));break;default:Nd(r)}i=i.sibling}}function Mb(i,r){for(;Un!==null;){var c=Un;switch(c.tag){case 0:case 11:case 15:ir(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Tc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Un=d;else e:for(c=i;Un!==null;){d=Un;var b=d.sibling,v=d.return;if(Tb(d),d===c){Un=null;break e}if(b!==null){b.return=v,Un=b;break e}Un=v}}}var gA={getCacheForType:function(i){var r=$n(En),c=r.data.get(i);return c===void 0&&(c=i(),r.data.set(i,c)),c},cacheSignal:function(){return $n(En).controller.signal}},xA=typeof WeakMap=="function"?WeakMap:Map,jt=0,Qt=null,pt=null,yt=0,zt=0,Ds=null,ar=!1,fl=!1,i0=!1,Sa=0,fn=0,rr=0,xo=0,a0=0,js=0,ml=0,Bc=null,ys=null,r0=!1,kd=0,Db=0,Ad=1/0,Cd=null,or=null,Dn=0,lr=null,pl=null,Ea=0,o0=0,l0=null,jb=null,Gc=0,c0=null;function Ps(){return(jt&2)!==0&&yt!==0?yt&-yt:Y.T!==null?p0():Vo()}function Pb(){if(js===0)if((yt&536870912)===0||wt){var i=pn;pn<<=1,(pn&3932160)===0&&(pn=262144),js=i}else js=536870912;return i=Rs.current,i!==null&&(i.flags|=32),js}function bs(i,r,c){(i===Qt&&(zt===2||zt===9)||i.cancelPendingCommit!==null)&&(gl(i,0),cr(i,yt,js,!1)),Ci(i,c),((jt&2)===0||i!==Qt)&&(i===Qt&&((jt&2)===0&&(xo|=c),fn===4&&cr(i,yt,js,!1)),Fi(i))}function Lb(i,r,c){if((jt&6)!==0)throw Error(s(327));var d=!c&&(r&127)===0&&(r&i.expiredLanes)===0||Ot(i,r),b=d?vA(i,r):d0(i,r,!0),v=d;do{if(b===0){fl&&!d&&cr(i,r,0,!1);break}else{if(c=i.current.alternate,v&&!yA(c)){b=d0(i,r,!1),v=!1;continue}if(b===2){if(v=r,i.errorRecoveryDisabledLanes&v)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;e:{var L=i;b=Bc;var H=L.current.memoizedState.isDehydrated;if(H&&(gl(L,w).flags|=256),w=d0(L,w,!1),w!==2){if(i0&&!H){L.errorRecoveryDisabledLanes|=v,xo|=v,b=4;break e}v=ys,ys=b,v!==null&&(ys===null?ys=v:ys.push.apply(ys,v))}b=w}if(v=!1,b!==2)continue}}if(b===1){gl(i,0),cr(i,r,0,!0);break}e:{switch(d=i,v=b,v){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:cr(d,r,js,!ar);break e;case 2:ys=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(b=kd+300-qt(),10<b)){if(cr(d,r,js,!ar),Fn(d,0,!0)!==0)break e;Ea=r,d.timeoutHandle=fv(Ub.bind(null,d,c,ys,Cd,r0,r,js,xo,ml,ar,v,"Throttled",-0,0),b);break e}Ub(d,c,ys,Cd,r0,r,js,xo,ml,ar,v,null,-0,0)}}break}while(!0);Fi(i)}function Ub(i,r,c,d,b,v,w,L,H,se,de,ye,ae,le){if(i.timeoutHandle=-1,ye=r.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ui},Cb(r,v,ye);var Ue=(v&62914560)===v?kd-qt():(v&4194048)===v?Db-qt():0;if(Ue=n2(ye,Ue),Ue!==null){Ea=v,i.cancelPendingCommit=Ue(qb.bind(null,i,r,v,c,d,b,w,L,H,de,ye,null,ae,le)),cr(i,v,w,!se);return}}qb(i,r,v,c,d,b,w,L,H)}function yA(i){for(var r=i;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var b=c[d],v=b.getSnapshot;b=b.value;try{if(!Cs(v(),b))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function cr(i,r,c,d){r&=~a0,r&=~xo,i.suspendedLanes|=r,i.pingedLanes&=~r,d&&(i.warmLanes|=r),d=i.expirationTimes;for(var b=r;0<b;){var v=31-st(b),w=1<<v;d[v]=-1,b&=~w}c!==0&&na(i,c,r)}function Id(){return(jt&6)===0?(Fc(0),!1):!0}function u0(){if(pt!==null){if(zt===0)var i=pt.return;else i=pt,fa=oo=null,Nm(i),rl=null,Ec=0,i=pt;for(;i!==null;)mb(i.alternate,i),i=i.return;pt=null}}function gl(i,r){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,OA(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Ea=0,u0(),Qt=i,pt=c=da(i.current,null),yt=r,zt=0,Ds=null,ar=!1,fl=Ot(i,r),i0=!1,ml=js=a0=xo=rr=fn=0,ys=Bc=null,r0=!1,(r&8)!==0&&(r|=r&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=r;0<d;){var b=31-st(d),v=1<<b;r|=i[b],d&=~v}return Sa=r,Wu(),c}function Ob(i,r){dt=null,Y.H=Mc,r===al||r===ad?(r=ey(),zt=3):r===mm?(r=ey(),zt=4):zt=r===Fm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ds=r,pt===null&&(fn=1,bd(i,Qs(r,i.current)))}function Vb(){var i=Rs.current;return i===null?!0:(yt&4194048)===yt?ei===null:(yt&62914560)===yt||(yt&536870912)!==0?i===ei:!1}function Bb(){var i=Y.H;return Y.H=Mc,i===null?Mc:i}function Gb(){var i=Y.A;return Y.A=gA,i}function Rd(){fn=4,ar||(yt&4194048)!==yt&&Rs.current!==null||(fl=!0),(rr&134217727)===0&&(xo&134217727)===0||Qt===null||cr(Qt,yt,js,!1)}function d0(i,r,c){var d=jt;jt|=2;var b=Bb(),v=Gb();(Qt!==i||yt!==r)&&(Cd=null,gl(i,r)),r=!1;var w=fn;e:do try{if(zt!==0&&pt!==null){var L=pt,H=Ds;switch(zt){case 8:u0(),w=6;break e;case 3:case 2:case 9:case 6:Rs.current===null&&(r=!0);var se=zt;if(zt=0,Ds=null,xl(i,L,H,se),c&&fl){w=0;break e}break;default:se=zt,zt=0,Ds=null,xl(i,L,H,se)}}bA(),w=fn;break}catch(de){Ob(i,de)}while(!0);return r&&i.shellSuspendCounter++,fa=oo=null,jt=d,Y.H=b,Y.A=v,pt===null&&(Qt=null,yt=0,Wu()),w}function bA(){for(;pt!==null;)Fb(pt)}function vA(i,r){var c=jt;jt|=2;var d=Bb(),b=Gb();Qt!==i||yt!==r?(Cd=null,Ad=qt()+500,gl(i,r)):fl=Ot(i,r);e:do try{if(zt!==0&&pt!==null){r=pt;var v=Ds;t:switch(zt){case 1:zt=0,Ds=null,xl(i,r,v,1);break;case 2:case 9:if(Xx(v)){zt=0,Ds=null,zb(r);break}r=function(){zt!==2&&zt!==9||Qt!==i||(zt=7),Fi(i)},v.then(r,r);break e;case 3:zt=7;break e;case 4:zt=5;break e;case 7:Xx(v)?(zt=0,Ds=null,zb(r)):(zt=0,Ds=null,xl(i,r,v,7));break;case 5:var w=null;switch(pt.tag){case 26:w=pt.memoizedState;case 5:case 27:var L=pt;if(w?Av(w):L.stateNode.complete){zt=0,Ds=null;var H=L.sibling;if(H!==null)pt=H;else{var se=L.return;se!==null?(pt=se,Md(se)):pt=null}break t}}zt=0,Ds=null,xl(i,r,v,5);break;case 6:zt=0,Ds=null,xl(i,r,v,6);break;case 8:u0(),fn=6;break e;default:throw Error(s(462))}}_A();break}catch(de){Ob(i,de)}while(!0);return fa=oo=null,Y.H=d,Y.A=b,jt=c,pt!==null?0:(Qt=null,yt=0,Wu(),fn)}function _A(){for(;pt!==null&&!oi();)Fb(pt)}function Fb(i){var r=hb(i.alternate,i,Sa);i.memoizedProps=i.pendingProps,r===null?Md(i):pt=r}function zb(i){var r=i,c=r.alternate;switch(r.tag){case 15:case 0:r=rb(c,r,r.pendingProps,r.type,void 0,yt);break;case 11:r=rb(c,r,r.pendingProps,r.type.render,r.ref,yt);break;case 5:Nm(r);default:mb(c,r),r=pt=Gx(r,Sa),r=hb(c,r,Sa)}i.memoizedProps=i.pendingProps,r===null?Md(i):pt=r}function xl(i,r,c,d){fa=oo=null,Nm(r),rl=null,Ec=0;var b=r.return;try{if(cA(i,b,r,c,yt)){fn=1,bd(i,Qs(c,i.current)),pt=null;return}}catch(v){if(b!==null)throw pt=b,v;fn=1,bd(i,Qs(c,i.current)),pt=null;return}r.flags&32768?(wt||d===1?i=!0:fl||(yt&536870912)!==0?i=!1:(ar=i=!0,(d===2||d===9||d===3||d===6)&&(d=Rs.current,d!==null&&d.tag===13&&(d.flags|=16384))),Hb(r,i)):Md(r)}function Md(i){var r=i;do{if((r.flags&32768)!==0){Hb(r,ar);return}i=r.return;var c=hA(r.alternate,r,Sa);if(c!==null){pt=c;return}if(r=r.sibling,r!==null){pt=r;return}pt=r=i}while(r!==null);fn===0&&(fn=5)}function Hb(i,r){do{var c=fA(i.alternate,i);if(c!==null){c.flags&=32767,pt=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(i=i.sibling,i!==null)){pt=i;return}pt=i=c}while(i!==null);fn=6,pt=null}function qb(i,r,c,d,b,v,w,L,H){i.cancelPendingCommit=null;do Dd();while(Dn!==0);if((jt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(v=r.lanes|r.childLanes,v|=Zf,lc(i,c,v,w,L,H),i===Qt&&(pt=Qt=null,yt=0),pl=r,lr=i,Ea=c,o0=v,l0=b,jb=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,wA(ws,function(){return Qb(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null,b=oe.p,oe.p=2,w=jt,jt|=4;try{mA(i,r,c)}finally{jt=w,oe.p=b,Y.T=d}}Dn=1,Kb(),$b(),Yb()}}function Kb(){if(Dn===1){Dn=0;var i=lr,r=pl,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null;var d=oe.p;oe.p=2;var b=jt;jt|=4;try{Nb(r,i);var v=S0,w=Mx(i.containerInfo),L=v.focusedElem,H=v.selectionRange;if(w!==L&&L&&L.ownerDocument&&Rx(L.ownerDocument.documentElement,L)){if(H!==null&&Yf(L)){var se=H.start,de=H.end;if(de===void 0&&(de=se),"selectionStart"in L)L.selectionStart=se,L.selectionEnd=Math.min(de,L.value.length);else{var ye=L.ownerDocument||document,ae=ye&&ye.defaultView||window;if(ae.getSelection){var le=ae.getSelection(),Ue=L.textContent.length,Xe=Math.min(H.start,Ue),Jt=H.end===void 0?Xe:Math.min(H.end,Ue);!le.extend&&Xe>Jt&&(w=Jt,Jt=Xe,Xe=w);var W=Ix(L,Xe),$=Ix(L,Jt);if(W&&$&&(le.rangeCount!==1||le.anchorNode!==W.node||le.anchorOffset!==W.offset||le.focusNode!==$.node||le.focusOffset!==$.offset)){var te=ye.createRange();te.setStart(W.node,W.offset),le.removeAllRanges(),Xe>Jt?(le.addRange(te),le.extend($.node,$.offset)):(te.setEnd($.node,$.offset),le.addRange(te))}}}}for(ye=[],le=L;le=le.parentNode;)le.nodeType===1&&ye.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<ye.length;L++){var pe=ye[L];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}qd=!!T0,S0=T0=null}finally{jt=b,oe.p=d,Y.T=c}}i.current=r,Dn=2}}function $b(){if(Dn===2){Dn=0;var i=lr,r=pl,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=Y.T,Y.T=null;var d=oe.p;oe.p=2;var b=jt;jt|=4;try{_b(i,r.alternate,r)}finally{jt=b,oe.p=d,Y.T=c}}Dn=3}}function Yb(){if(Dn===4||Dn===3){Dn=0,Bn();var i=lr,r=pl,c=Ea,d=jb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Dn=5:(Dn=0,pl=lr=null,Jb(i,i.pendingLanes));var b=i.pendingLanes;if(b===0&&(or=null),li(c),r=r.stateNode,we&&typeof we.onCommitFiberRoot=="function")try{we.onCommitFiberRoot(Se,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=Y.T,b=oe.p,oe.p=2,Y.T=null;try{for(var v=i.onRecoverableError,w=0;w<d.length;w++){var L=d[w];v(L.value,{componentStack:L.stack})}}finally{Y.T=r,oe.p=b}}(Ea&3)!==0&&Dd(),Fi(i),b=i.pendingLanes,(c&261930)!==0&&(b&42)!==0?i===c0?Gc++:(Gc=0,c0=i):Gc=0,Fc(0)}}function Jb(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Tc(r)))}function Dd(){return Kb(),$b(),Yb(),Qb()}function Qb(){if(Dn!==5)return!1;var i=lr,r=o0;o0=0;var c=li(Ea),d=Y.T,b=oe.p;try{oe.p=32>c?32:c,Y.T=null,c=l0,l0=null;var v=lr,w=Ea;if(Dn=0,pl=lr=null,Ea=0,(jt&6)!==0)throw Error(s(331));var L=jt;if(jt|=4,Rb(v.current),Ab(v,v.current,w,c),jt=L,Fc(0,!1),we&&typeof we.onPostCommitFiberRoot=="function")try{we.onPostCommitFiberRoot(Se,v)}catch{}return!0}finally{oe.p=b,Y.T=d,Jb(i,r)}}function Wb(i,r,c){r=Qs(c,r),r=Gm(i.stateNode,r,2),i=tr(i,r,2),i!==null&&(Ci(i,2),Fi(i))}function Ht(i,r,c){if(i.tag===3)Wb(i,i,c);else for(;r!==null;){if(r.tag===3){Wb(r,i,c);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(or===null||!or.has(d))){i=Qs(c,i),c=Xy(2),d=tr(r,c,2),d!==null&&(Zy(c,d,r,i),Ci(d,2),Fi(d));break}}r=r.return}}function h0(i,r,c){var d=i.pingCache;if(d===null){d=i.pingCache=new xA;var b=new Set;d.set(r,b)}else b=d.get(r),b===void 0&&(b=new Set,d.set(r,b));b.has(c)||(i0=!0,b.add(c),i=TA.bind(null,i,r,c),r.then(i,i))}function TA(i,r,c){var d=i.pingCache;d!==null&&d.delete(r),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Qt===i&&(yt&c)===c&&(fn===4||fn===3&&(yt&62914560)===yt&&300>qt()-kd?(jt&2)===0&&gl(i,0):a0|=c,ml===yt&&(ml=0)),Fi(i)}function Xb(i,r){r===0&&(r=Ns()),i=io(i,r),i!==null&&(Ci(i,r),Fi(i))}function SA(i){var r=i.memoizedState,c=0;r!==null&&(c=r.retryLane),Xb(i,c)}function EA(i,r){var c=0;switch(i.tag){case 31:case 13:var d=i.stateNode,b=i.memoizedState;b!==null&&(c=b.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(r),Xb(i,c)}function wA(i,r){return xt(i,r)}var jd=null,yl=null,f0=!1,Pd=!1,m0=!1,ur=0;function Fi(i){i!==yl&&i.next===null&&(yl===null?jd=yl=i:yl=yl.next=i),Pd=!0,f0||(f0=!0,kA())}function Fc(i,r){if(!m0&&Pd){m0=!0;do for(var c=!1,d=jd;d!==null;){if(i!==0){var b=d.pendingLanes;if(b===0)var v=0;else{var w=d.suspendedLanes,L=d.pingedLanes;v=(1<<31-st(42|i)+1)-1,v&=b&~(w&~L),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(c=!0,nv(d,v))}else v=yt,v=Fn(d,d===Qt?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||Ot(d,v)||(c=!0,nv(d,v));d=d.next}while(c);m0=!1}}function NA(){Zb()}function Zb(){Pd=f0=!1;var i=0;ur!==0&&UA()&&(i=ur);for(var r=qt(),c=null,d=jd;d!==null;){var b=d.next,v=ev(d,r);v===0?(d.next=null,c===null?jd=b:c.next=b,b===null&&(yl=c)):(c=d,(i!==0||(v&3)!==0)&&(Pd=!0)),d=b}Dn!==0&&Dn!==5||Fc(i),ur!==0&&(ur=0)}function ev(i,r){for(var c=i.suspendedLanes,d=i.pingedLanes,b=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var w=31-st(v),L=1<<w,H=b[w];H===-1?((L&c)===0||(L&d)!==0)&&(b[w]=Je(L,r)):H<=r&&(i.expiredLanes|=L),v&=~L}if(r=Qt,c=yt,c=Fn(i,i===r?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===r&&(zt===2||zt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&Gt(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Ot(i,c)){if(r=c&-c,r===i.callbackPriority)return r;switch(d!==null&&Gt(d),li(c)){case 2:case 8:c=Ft;break;case 32:c=ws;break;case 268435456:c=ta;break;default:c=ws}return d=tv.bind(null,i),c=xt(c,d),i.callbackPriority=r,i.callbackNode=c,r}return d!==null&&d!==null&&Gt(d),i.callbackPriority=2,i.callbackNode=null,2}function tv(i,r){if(Dn!==0&&Dn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Dd()&&i.callbackNode!==c)return null;var d=yt;return d=Fn(i,i===Qt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(Lb(i,d,r),ev(i,qt()),i.callbackNode!=null&&i.callbackNode===c?tv.bind(null,i):null)}function nv(i,r){if(Dd())return null;Lb(i,r,!0)}function kA(){VA(function(){(jt&6)!==0?xt(Tn,NA):Zb()})}function p0(){if(ur===0){var i=sl;i===0&&(i=Ut,Ut<<=1,(Ut&261888)===0&&(Ut=256)),ur=i}return ur}function sv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:za(""+i)}function iv(i,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,i.id&&c.setAttribute("form",i.id),r.parentNode.insertBefore(c,r),i=new FormData(i),c.parentNode.removeChild(c),i}function AA(i,r,c,d,b){if(r==="submit"&&c&&c.stateNode===b){var v=sv((b[Sn]||null).action),w=d.submitter;w&&(r=(r=w[Sn]||null)?sv(r.formAction):w.getAttribute("formAction"),r!==null&&(v=r,w=null));var L=new Pi("action","action",null,d,b);i.push({event:L,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ur!==0){var H=w?iv(b,w):new FormData(b);Pm(c,{pending:!0,data:H,method:b.method,action:v},null,H)}}else typeof v=="function"&&(L.preventDefault(),H=w?iv(b,w):new FormData(b),Pm(c,{pending:!0,data:H,method:b.method,action:v},v,H))},currentTarget:b}]})}}for(var g0=0;g0<Xf.length;g0++){var x0=Xf[g0],CA=x0.toLowerCase(),IA=x0[0].toUpperCase()+x0.slice(1);pi(CA,"on"+IA)}pi(Px,"onAnimationEnd"),pi(Lx,"onAnimationIteration"),pi(Ux,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(Kk,"onTransitionRun"),pi($k,"onTransitionStart"),pi(Yk,"onTransitionCancel"),pi(Ox,"onTransitionEnd"),Hs("onMouseEnter",["mouseout","mouseover"]),Hs("onMouseLeave",["mouseout","mouseover"]),Hs("onPointerEnter",["pointerout","pointerover"]),Hs("onPointerLeave",["pointerout","pointerover"]),zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zc));function av(i,r){r=(r&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],b=d.event;d=d.listeners;e:{var v=void 0;if(r)for(var w=d.length-1;0<=w;w--){var L=d[w],H=L.instance,se=L.currentTarget;if(L=L.listener,H!==v&&b.isPropagationStopped())break e;v=L,b.currentTarget=se;try{v(b)}catch(de){Qu(de)}b.currentTarget=null,v=H}else for(w=0;w<d.length;w++){if(L=d[w],H=L.instance,se=L.currentTarget,L=L.listener,H!==v&&b.isPropagationStopped())break e;v=L,b.currentTarget=se;try{v(b)}catch(de){Qu(de)}b.currentTarget=null,v=H}}}}function gt(i,r){var c=r[ia];c===void 0&&(c=r[ia]=new Set);var d=i+"__bubble";c.has(d)||(rv(r,i,2,!1),c.add(d))}function y0(i,r,c){var d=0;r&&(d|=4),rv(c,i,d,r)}var Ld="_reactListening"+Math.random().toString(36).slice(2);function b0(i){if(!i[Ld]){i[Ld]=!0,Hr.forEach(function(c){c!=="selectionchange"&&(RA.has(c)||y0(c,!1,i),y0(c,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Ld]||(r[Ld]=!0,y0("selectionchange",!1,r))}}function rv(i,r,c,d){switch(Pv(r)){case 2:var b=a2;break;case 8:b=r2;break;default:b=j0}c=b.bind(null,r,c,i),b=void 0,!Qr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(b=!0),d?b!==void 0?i.addEventListener(r,c,{capture:!0,passive:b}):i.addEventListener(r,c,!0):b!==void 0?i.addEventListener(r,c,{passive:b}):i.addEventListener(r,c,!1)}function v0(i,r,c,d,b){var v=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var L=d.stateNode.containerInfo;if(L===b)break;if(w===4)for(w=d.return;w!==null;){var H=w.tag;if((H===3||H===4)&&w.stateNode.containerInfo===b)return;w=w.return}for(;L!==null;){if(w=Hn(L),w===null)return;if(H=w.tag,H===5||H===6||H===26||H===27){d=v=w;continue e}L=L.parentNode}}d=d.return}qa(function(){var se=v,de=Ks(c),ye=[];e:{var ae=Vx.get(i);if(ae!==void 0){var le=Pi,Ue=i;switch(i){case"keypress":if(Xr(c)===0)break e;case"keydown":case"keyup":le=$u;break;case"focusin":Ue="focus",le=eo;break;case"focusout":Ue="blur",le=eo;break;case"beforeblur":case"afterblur":le=eo;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=mc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Ou;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=S;break;case Px:case Lx:case Ux:le=Bu;break;case Ox:le=V;break;case"scroll":case"scrollend":le=fc;break;case"wheel":le=re;break;case"copy":case"cut":case"paste":le=Gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=ua;break;case"toggle":case"beforetoggle":le=ut}var Xe=(r&4)!==0,Jt=!Xe&&(i==="scroll"||i==="scrollend"),W=Xe?ae!==null?ae+"Capture":null:ae;Xe=[];for(var $=se,te;$!==null;){var pe=$;if(te=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||te===null||W===null||(pe=di($,W),pe!=null&&Xe.push(Hc($,pe,te))),Jt)break;$=$.return}0<Xe.length&&(ae=new le(ae,Ue,null,c,de),ye.push({event:ae,listeners:Xe}))}}if((r&7)===0){e:{if(ae=i==="mouseover"||i==="pointerover",le=i==="mouseout"||i==="pointerout",ae&&c!==uc&&(Ue=c.relatedTarget||c.fromElement)&&(Hn(Ue)||Ue[Bs]))break e;if((le||ae)&&(ae=de.window===de?de:(ae=de.ownerDocument)?ae.defaultView||ae.parentWindow:window,le?(Ue=c.relatedTarget||c.toElement,le=se,Ue=Ue?Hn(Ue):null,Ue!==null&&(Jt=l(Ue),Xe=Ue.tag,Ue!==Jt||Xe!==5&&Xe!==27&&Xe!==6)&&(Ue=null)):(le=null,Ue=se),le!==Ue)){if(Xe=mc,pe="onMouseLeave",W="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(Xe=ua,pe="onPointerLeave",W="onPointerEnter",$="pointer"),Jt=le==null?ae:ts(le),te=Ue==null?ae:ts(Ue),ae=new Xe(pe,$+"leave",le,c,de),ae.target=Jt,ae.relatedTarget=te,pe=null,Hn(de)===se&&(Xe=new Xe(W,$+"enter",Ue,c,de),Xe.target=te,Xe.relatedTarget=Jt,pe=Xe),Jt=pe,le&&Ue)t:{for(Xe=MA,W=le,$=Ue,te=0,pe=W;pe;pe=Xe(pe))te++;pe=0;for(var Ke=$;Ke;Ke=Xe(Ke))pe++;for(;0<te-pe;)W=Xe(W),te--;for(;0<pe-te;)$=Xe($),pe--;for(;te--;){if(W===$||$!==null&&W===$.alternate){Xe=W;break t}W=Xe(W),$=Xe($)}Xe=null}else Xe=null;le!==null&&ov(ye,ae,le,Xe,!1),Ue!==null&&Jt!==null&&ov(ye,Jt,Ue,Xe,!0)}}e:{if(ae=se?ts(se):window,le=ae.nodeName&&ae.nodeName.toLowerCase(),le==="select"||le==="input"&&ae.type==="file")var Ct=Ex;else if(Tx(ae))if(wx)Ct=zk;else{Ct=Gk;var Be=Bk}else le=ae.nodeName,!le||le.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?se&&qs(se.elementType)&&(Ct=Ex):Ct=Fk;if(Ct&&(Ct=Ct(i,se))){Sx(ye,Ct,c,de);break e}Be&&Be(i,ae,se),i==="focusout"&&se&&ae.type==="number"&&se.memoizedProps.value!=null&&Et(ae,"number",ae.value)}switch(Be=se?ts(se):window,i){case"focusin":(Tx(Be)||Be.contentEditable==="true")&&(Jo=Be,Jf=se,bc=null);break;case"focusout":bc=Jf=Jo=null;break;case"mousedown":Qf=!0;break;case"contextmenu":case"mouseup":case"dragend":Qf=!1,Dx(ye,c,de);break;case"selectionchange":if(qk)break;case"keydown":case"keyup":Dx(ye,c,de)}var ht;if(Dt)e:{switch(i){case"compositionstart":var bt="onCompositionStart";break e;case"compositionend":bt="onCompositionEnd";break e;case"compositionupdate":bt="onCompositionUpdate";break e}bt=void 0}else Yo?to(i,c)&&(bt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(bt="onCompositionStart");bt&&(Oi&&c.locale!=="ko"&&(Yo||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&Yo&&(ht=hc()):(ji=de,dc="value"in ji?ji.value:ji.textContent,Yo=!0)),Be=Ud(se,bt),0<Be.length&&(bt=new Ui(bt,i,null,c,de),ye.push({event:bt,listeners:Be}),ht?bt.data=ht:(ht=$o(c),ht!==null&&(bt.data=ht)))),(ht=Ys?Lk(i,c):Uk(i,c))&&(bt=Ud(se,"onBeforeInput"),0<bt.length&&(Be=new Ui("onBeforeInput","beforeinput",null,c,de),ye.push({event:Be,listeners:bt}),Be.data=ht)),AA(ye,i,se,c,de)}av(ye,r)})}function Hc(i,r,c){return{instance:i,listener:r,currentTarget:c}}function Ud(i,r){for(var c=r+"Capture",d=[];i!==null;){var b=i,v=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||v===null||(b=di(i,c),b!=null&&d.unshift(Hc(i,b,v)),b=di(i,r),b!=null&&d.push(Hc(i,b,v))),i.tag===3)return d;i=i.return}return[]}function MA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function ov(i,r,c,d,b){for(var v=r._reactName,w=[];c!==null&&c!==d;){var L=c,H=L.alternate,se=L.stateNode;if(L=L.tag,H!==null&&H===d)break;L!==5&&L!==26&&L!==27||se===null||(H=se,b?(se=di(c,v),se!=null&&w.unshift(Hc(c,se,H))):b||(se=di(c,v),se!=null&&w.push(Hc(c,se,H)))),c=c.return}w.length!==0&&i.push({event:r,listeners:w})}var DA=/\r\n?/g,jA=/\u0000|\uFFFD/g;function lv(i){return(typeof i=="string"?i:""+i).replace(DA,`
`).replace(jA,"")}function cv(i,r){return r=lv(r),lv(i)===r}function Yt(i,r,c,d,b,v){switch(c){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||en(i,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&en(i,""+d);break;case"className":K(i,"class",d);break;case"tabIndex":K(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":K(i,c,d);break;case"style":Ri(i,d,v);break;case"data":if(r!=="object"){K(i,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=za(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(r!=="input"&&Yt(i,r,"name",b.name,b,null),Yt(i,r,"formEncType",b.formEncType,b,null),Yt(i,r,"formMethod",b.formMethod,b,null),Yt(i,r,"formTarget",b.formTarget,b,null)):(Yt(i,r,"encType",b.encType,b,null),Yt(i,r,"method",b.method,b,null),Yt(i,r,"target",b.target,b,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=za(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=ui);break;case"onScroll":d!=null&&gt("scroll",i);break;case"onScrollEnd":d!=null&&gt("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(b.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=za(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":gt("beforetoggle",i),gt("toggle",i),ra(i,"popover",d);break;case"xlinkActuate":he(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":he(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":he(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":he(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":he(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":he(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":he(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":he(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":he(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ra(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Mi.get(c)||c,ra(i,c,d))}}function _0(i,r,c,d,b,v){switch(c){case"style":Ri(i,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(b.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"children":typeof d=="string"?en(i,d):(typeof d=="number"||typeof d=="bigint")&&en(i,""+d);break;case"onScroll":d!=null&&gt("scroll",i);break;case"onScrollEnd":d!=null&&gt("scrollend",i);break;case"onClick":d!=null&&(i.onclick=ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qr.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(b=c.endsWith("Capture"),r=c.slice(2,b?c.length-7:void 0),v=i[Sn]||null,v=v!=null?v[c]:null,typeof v=="function"&&i.removeEventListener(r,v,b),typeof d=="function")){typeof v!="function"&&v!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(r,d,b);break e}c in i?i[c]=d:d===!0?i.setAttribute(c,""):ra(i,c,d)}}}function Jn(i,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gt("error",i),gt("load",i);var d=!1,b=!1,v;for(v in c)if(c.hasOwnProperty(v)){var w=c[v];if(w!=null)switch(v){case"src":d=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Yt(i,r,v,w,c,null)}}b&&Yt(i,r,"srcSet",c.srcSet,c,null),d&&Yt(i,r,"src",c.src,c,null);return;case"input":gt("invalid",i);var L=v=w=b=null,H=null,se=null;for(d in c)if(c.hasOwnProperty(d)){var de=c[d];if(de!=null)switch(d){case"name":b=de;break;case"type":w=de;break;case"checked":H=de;break;case"defaultChecked":se=de;break;case"value":v=de;break;case"defaultValue":L=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(s(137,r));break;default:Yt(i,r,d,de,c,null)}}mt(i,v,L,H,se,w,b,!1);return;case"select":gt("invalid",i),d=w=v=null;for(b in c)if(c.hasOwnProperty(b)&&(L=c[b],L!=null))switch(b){case"value":v=L;break;case"defaultValue":w=L;break;case"multiple":d=L;default:Yt(i,r,b,L,c,null)}r=v,c=w,i.multiple=!!d,r!=null?Vt(i,!!d,r,!1):c!=null&&Vt(i,!!d,c,!0);return;case"textarea":gt("invalid",i),v=b=d=null;for(w in c)if(c.hasOwnProperty(w)&&(L=c[w],L!=null))switch(w){case"value":d=L;break;case"defaultValue":b=L;break;case"children":v=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(91));break;default:Yt(i,r,w,L,c,null)}Zt(i,d,b,v);return;case"option":for(H in c)if(c.hasOwnProperty(H)&&(d=c[H],d!=null))switch(H){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Yt(i,r,H,d,c,null)}return;case"dialog":gt("beforetoggle",i),gt("toggle",i),gt("cancel",i),gt("close",i);break;case"iframe":case"object":gt("load",i);break;case"video":case"audio":for(d=0;d<zc.length;d++)gt(zc[d],i);break;case"image":gt("error",i),gt("load",i);break;case"details":gt("toggle",i);break;case"embed":case"source":case"link":gt("error",i),gt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in c)if(c.hasOwnProperty(se)&&(d=c[se],d!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Yt(i,r,se,d,c,null)}return;default:if(qs(r)){for(de in c)c.hasOwnProperty(de)&&(d=c[de],d!==void 0&&_0(i,r,de,d,c,void 0));return}}for(L in c)c.hasOwnProperty(L)&&(d=c[L],d!=null&&Yt(i,r,L,d,c,null))}function PA(i,r,c,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,v=null,w=null,L=null,H=null,se=null,de=null;for(le in c){var ye=c[le];if(c.hasOwnProperty(le)&&ye!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":H=ye;default:d.hasOwnProperty(le)||Yt(i,r,le,null,d,ye)}}for(var ae in d){var le=d[ae];if(ye=c[ae],d.hasOwnProperty(ae)&&(le!=null||ye!=null))switch(ae){case"type":v=le;break;case"name":b=le;break;case"checked":se=le;break;case"defaultChecked":de=le;break;case"value":w=le;break;case"defaultValue":L=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,r));break;default:le!==ye&&Yt(i,r,ae,le,d,ye)}}Ye(i,w,L,H,se,de,v,b);return;case"select":le=w=L=ae=null;for(v in c)if(H=c[v],c.hasOwnProperty(v)&&H!=null)switch(v){case"value":break;case"multiple":le=H;default:d.hasOwnProperty(v)||Yt(i,r,v,null,d,H)}for(b in d)if(v=d[b],H=c[b],d.hasOwnProperty(b)&&(v!=null||H!=null))switch(b){case"value":ae=v;break;case"defaultValue":L=v;break;case"multiple":w=v;default:v!==H&&Yt(i,r,b,v,d,H)}r=L,c=w,d=le,ae!=null?Vt(i,!!c,ae,!1):!!d!=!!c&&(r!=null?Vt(i,!!c,r,!0):Vt(i,!!c,c?[]:"",!1));return;case"textarea":le=ae=null;for(L in c)if(b=c[L],c.hasOwnProperty(L)&&b!=null&&!d.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Yt(i,r,L,null,d,b)}for(w in d)if(b=d[w],v=c[w],d.hasOwnProperty(w)&&(b!=null||v!=null))switch(w){case"value":ae=b;break;case"defaultValue":le=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:b!==v&&Yt(i,r,w,b,d,v)}gn(i,ae,le);return;case"option":for(var Ue in c)if(ae=c[Ue],c.hasOwnProperty(Ue)&&ae!=null&&!d.hasOwnProperty(Ue))switch(Ue){case"selected":i.selected=!1;break;default:Yt(i,r,Ue,null,d,ae)}for(H in d)if(ae=d[H],le=c[H],d.hasOwnProperty(H)&&ae!==le&&(ae!=null||le!=null))switch(H){case"selected":i.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Yt(i,r,H,ae,d,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in c)ae=c[Xe],c.hasOwnProperty(Xe)&&ae!=null&&!d.hasOwnProperty(Xe)&&Yt(i,r,Xe,null,d,ae);for(se in d)if(ae=d[se],le=c[se],d.hasOwnProperty(se)&&ae!==le&&(ae!=null||le!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,r));break;default:Yt(i,r,se,ae,d,le)}return;default:if(qs(r)){for(var Jt in c)ae=c[Jt],c.hasOwnProperty(Jt)&&ae!==void 0&&!d.hasOwnProperty(Jt)&&_0(i,r,Jt,void 0,d,ae);for(de in d)ae=d[de],le=c[de],!d.hasOwnProperty(de)||ae===le||ae===void 0&&le===void 0||_0(i,r,de,ae,d,le);return}}for(var W in c)ae=c[W],c.hasOwnProperty(W)&&ae!=null&&!d.hasOwnProperty(W)&&Yt(i,r,W,null,d,ae);for(ye in d)ae=d[ye],le=c[ye],!d.hasOwnProperty(ye)||ae===le||ae==null&&le==null||Yt(i,r,ye,ae,d,le)}function uv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LA(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var b=c[d],v=b.transferSize,w=b.initiatorType,L=b.duration;if(v&&L&&uv(w)){for(w=0,L=b.responseEnd,d+=1;d<c.length;d++){var H=c[d],se=H.startTime;if(se>L)break;var de=H.transferSize,ye=H.initiatorType;de&&uv(ye)&&(H=H.responseEnd,w+=de*(H<L?1:(L-se)/(H-se)))}if(--d,r+=8*(v+w)/(b.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var T0=null,S0=null;function Od(i){return i.nodeType===9?i:i.ownerDocument}function dv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hv(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function E0(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var w0=null;function UA(){var i=window.event;return i&&i.type==="popstate"?i===w0?!1:(w0=i,!0):(w0=null,!1)}var fv=typeof setTimeout=="function"?setTimeout:void 0,OA=typeof clearTimeout=="function"?clearTimeout:void 0,mv=typeof Promise=="function"?Promise:void 0,VA=typeof queueMicrotask=="function"?queueMicrotask:typeof mv<"u"?function(i){return mv.resolve(null).then(i).catch(BA)}:fv;function BA(i){setTimeout(function(){throw i})}function dr(i){return i==="head"}function pv(i,r){var c=r,d=0;do{var b=c.nextSibling;if(i.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"||c==="/&"){if(d===0){i.removeChild(b),Tl(r);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")qc(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,qc(c);for(var v=c.firstChild;v;){var w=v.nextSibling,L=v.nodeName;v[Gs]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&v.rel.toLowerCase()==="stylesheet"||c.removeChild(v),v=w}}else c==="body"&&qc(i.ownerDocument.body);c=b}while(c);Tl(r)}function gv(i,r){var c=i;i=0;do{var d=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=d}while(c)}function N0(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":N0(c),aa(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function GA(i,r,c,d){for(;i.nodeType===1;){var b=c;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Gs])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==b.rel||i.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var v=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=ti(i.nextSibling),i===null)break}return null}function FA(i,r,c){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=ti(i.nextSibling),i===null))return null;return i}function xv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=ti(i.nextSibling),i===null))return null;return i}function k0(i){return i.data==="$?"||i.data==="$~"}function A0(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function zA(i,r){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||c.readyState!=="loading")r();else{var d=function(){r(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function ti(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var C0=null;function yv(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(r===0)return ti(i.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}i=i.nextSibling}return null}function bv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return i;r--}else c!=="/$"&&c!=="/&"||r++}i=i.previousSibling}return null}function vv(i,r,c){switch(r=Od(c),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function qc(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);aa(i)}var ni=new Map,_v=new Set;function Vd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var wa=oe.d;oe.d={f:HA,r:qA,D:KA,C:$A,L:YA,m:JA,X:WA,S:QA,M:XA};function HA(){var i=wa.f(),r=Id();return i||r}function qA(i){var r=cs(i);r!==null&&r.tag===5&&r.type==="form"?Oy(r):wa.r(i)}var bl=typeof document>"u"?null:document;function Tv(i,r,c){var d=bl;if(d&&typeof r=="string"&&r){var b=qe(r);b='link[rel="'+i+'"][href="'+b+'"]',typeof c=="string"&&(b+='[crossorigin="'+c+'"]'),_v.has(b)||(_v.add(b),i={rel:i,crossOrigin:c,href:r},d.querySelector(b)===null&&(r=d.createElement("link"),Jn(r,"link",i),dn(r),d.head.appendChild(r)))}}function KA(i){wa.D(i),Tv("dns-prefetch",i,null)}function $A(i,r){wa.C(i,r),Tv("preconnect",i,r)}function YA(i,r,c){wa.L(i,r,c);var d=bl;if(d&&i&&r){var b='link[rel="preload"][as="'+qe(r)+'"]';r==="image"&&c&&c.imageSrcSet?(b+='[imagesrcset="'+qe(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(b+='[imagesizes="'+qe(c.imageSizes)+'"]')):b+='[href="'+qe(i)+'"]';var v=b;switch(r){case"style":v=vl(i);break;case"script":v=_l(i)}ni.has(v)||(i=_({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:i,as:r},c),ni.set(v,i),d.querySelector(b)!==null||r==="style"&&d.querySelector(Kc(v))||r==="script"&&d.querySelector($c(v))||(r=d.createElement("link"),Jn(r,"link",i),dn(r),d.head.appendChild(r)))}}function JA(i,r){wa.m(i,r);var c=bl;if(c&&i){var d=r&&typeof r.as=="string"?r.as:"script",b='link[rel="modulepreload"][as="'+qe(d)+'"][href="'+qe(i)+'"]',v=b;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=_l(i)}if(!ni.has(v)&&(i=_({rel:"modulepreload",href:i},r),ni.set(v,i),c.querySelector(b)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector($c(v)))return}d=c.createElement("link"),Jn(d,"link",i),dn(d),c.head.appendChild(d)}}}function QA(i,r,c){wa.S(i,r,c);var d=bl;if(d&&i){var b=Fs(d).hoistableStyles,v=vl(i);r=r||"default";var w=b.get(v);if(!w){var L={loading:0,preload:null};if(w=d.querySelector(Kc(v)))L.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":r},c),(c=ni.get(v))&&I0(i,c);var H=w=d.createElement("link");dn(H),Jn(H,"link",i),H._p=new Promise(function(se,de){H.onload=se,H.onerror=de}),H.addEventListener("load",function(){L.loading|=1}),H.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Bd(w,r,d)}w={type:"stylesheet",instance:w,count:1,state:L},b.set(v,w)}}}function WA(i,r){wa.X(i,r);var c=bl;if(c&&i){var d=Fs(c).hoistableScripts,b=_l(i),v=d.get(b);v||(v=c.querySelector($c(b)),v||(i=_({src:i,async:!0},r),(r=ni.get(b))&&R0(i,r),v=c.createElement("script"),dn(v),Jn(v,"link",i),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(b,v))}}function XA(i,r){wa.M(i,r);var c=bl;if(c&&i){var d=Fs(c).hoistableScripts,b=_l(i),v=d.get(b);v||(v=c.querySelector($c(b)),v||(i=_({src:i,async:!0,type:"module"},r),(r=ni.get(b))&&R0(i,r),v=c.createElement("script"),dn(v),Jn(v,"link",i),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(b,v))}}function Sv(i,r,c,d){var b=(b=Te.current)?Vd(b):null;if(!b)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=vl(c.href),c=Fs(b).hoistableStyles,d=c.get(r),d||(d={type:"style",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=vl(c.href);var v=Fs(b).hoistableStyles,w=v.get(i);if(w||(b=b.ownerDocument||b,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,w),(v=b.querySelector(Kc(i)))&&!v._p&&(w.instance=v,w.state.loading=5),ni.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ni.set(i,c),v||ZA(b,i,c,w.state))),r&&d===null)throw Error(s(528,""));return w}if(r&&d!==null)throw Error(s(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=_l(c),c=Fs(b).hoistableScripts,d=c.get(r),d||(d={type:"script",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function vl(i){return'href="'+qe(i)+'"'}function Kc(i){return'link[rel="stylesheet"]['+i+"]"}function Ev(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function ZA(i,r,c,d){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=i.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Jn(r,"link",c),dn(r),i.head.appendChild(r))}function _l(i){return'[src="'+qe(i)+'"]'}function $c(i){return"script[async]"+i}function wv(i,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var d=i.querySelector('style[data-href~="'+qe(c.href)+'"]');if(d)return r.instance=d,dn(d),d;var b=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),dn(d),Jn(d,"style",b),Bd(d,c.precedence,i),r.instance=d;case"stylesheet":b=vl(c.href);var v=i.querySelector(Kc(b));if(v)return r.state.loading|=4,r.instance=v,dn(v),v;d=Ev(c),(b=ni.get(b))&&I0(d,b),v=(i.ownerDocument||i).createElement("link"),dn(v);var w=v;return w._p=new Promise(function(L,H){w.onload=L,w.onerror=H}),Jn(v,"link",d),r.state.loading|=4,Bd(v,c.precedence,i),r.instance=v;case"script":return v=_l(c.src),(b=i.querySelector($c(v)))?(r.instance=b,dn(b),b):(d=c,(b=ni.get(v))&&(d=_({},c),R0(d,b)),i=i.ownerDocument||i,b=i.createElement("script"),dn(b),Jn(b,"link",d),i.head.appendChild(b),r.instance=b);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,Bd(d,c.precedence,i));return r.instance}function Bd(i,r,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=d.length?d[d.length-1]:null,v=b,w=0;w<d.length;w++){var L=d[w];if(L.dataset.precedence===r)v=L;else if(v!==b)break}v?v.parentNode.insertBefore(i,v.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(i,r.firstChild))}function I0(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function R0(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Gd=null;function Nv(i,r,c){if(Gd===null){var d=new Map,b=Gd=new Map;b.set(c,d)}else b=Gd,d=b.get(c),d||(d=new Map,b.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),b=0;b<c.length;b++){var v=c[b];if(!(v[Gs]||v[un]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var w=v.getAttribute(r)||"";w=i+w;var L=d.get(w);L?L.push(v):d.set(w,[v])}}return d}function kv(i,r,c){i=i.ownerDocument||i,i.head.insertBefore(c,r==="title"?i.querySelector("head > title"):null)}function e2(i,r,c){if(c===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Av(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function t2(i,r,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=vl(d.href),v=r.querySelector(Kc(b));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Fd.bind(i),r.then(i,i)),c.state.loading|=4,c.instance=v,dn(v);return}v=r.ownerDocument||r,d=Ev(d),(b=ni.get(b))&&I0(d,b),v=v.createElement("link"),dn(v);var w=v;w._p=new Promise(function(L,H){w.onload=L,w.onerror=H}),Jn(v,"link",d),c.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=Fd.bind(i),r.addEventListener("load",c),r.addEventListener("error",c))}}var M0=0;function n2(i,r){return i.stylesheets&&i.count===0&&Hd(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var d=setTimeout(function(){if(i.stylesheets&&Hd(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+r);0<i.imgBytes&&M0===0&&(M0=62500*LA());var b=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Hd(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>M0?50:800)+r);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(b)}}:null}function Fd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var zd=null;function Hd(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,zd=new Map,r.forEach(s2,i),zd=null,Fd.call(i))}function s2(i,r){if(!(r.state.loading&4)){var c=zd.get(i);if(c)var d=c.get(null);else{c=new Map,zd.set(i,c);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<b.length;v++){var w=b[v];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),d=w)}d&&c.set(null,d)}b=r.instance,w=b.getAttribute("data-precedence"),v=c.get(w)||d,v===d&&c.set(null,b),c.set(w,b),this.count++,d=Fd.bind(this),b.addEventListener("load",d),b.addEventListener("error",d),v?v.parentNode.insertBefore(b,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),r.state.loading|=4}}var Yc={$$typeof:I,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function i2(i,r,c,d,b,v,w,L,H){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zn(0),this.hiddenUpdates=zn(null),this.identifierPrefix=d,this.onUncaughtError=b,this.onCaughtError=v,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function Cv(i,r,c,d,b,v,w,L,H,se,de,ye){return i=new i2(i,r,c,w,H,se,de,ye,L),r=1,v===!0&&(r|=24),v=Is(3,null,null,r),i.current=v,v.stateNode=i,r=dm(),r.refCount++,i.pooledCache=r,r.refCount++,v.memoizedState={element:d,isDehydrated:c,cache:r},pm(v),i}function Iv(i){return i?(i=Xo,i):Xo}function Rv(i,r,c,d,b,v){b=Iv(b),d.context===null?d.context=b:d.pendingContext=b,d=er(r),d.payload={element:c},v=v===void 0?null:v,v!==null&&(d.callback=v),c=tr(i,d,r),c!==null&&(bs(c,i,r),Nc(c,i,r))}function Mv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<r?c:r}}function D0(i,r){Mv(i,r),(i=i.alternate)&&Mv(i,r)}function Dv(i){if(i.tag===13||i.tag===31){var r=io(i,67108864);r!==null&&bs(r,i,67108864),D0(i,67108864)}}function jv(i){if(i.tag===13||i.tag===31){var r=Ps();r=sa(r);var c=io(i,r);c!==null&&bs(c,i,r),D0(i,r)}}var qd=!0;function a2(i,r,c,d){var b=Y.T;Y.T=null;var v=oe.p;try{oe.p=2,j0(i,r,c,d)}finally{oe.p=v,Y.T=b}}function r2(i,r,c,d){var b=Y.T;Y.T=null;var v=oe.p;try{oe.p=8,j0(i,r,c,d)}finally{oe.p=v,Y.T=b}}function j0(i,r,c,d){if(qd){var b=P0(d);if(b===null)v0(i,r,d,Kd,c),Lv(i,d);else if(l2(b,i,r,c,d))d.stopPropagation();else if(Lv(i,d),r&4&&-1<o2.indexOf(i)){for(;b!==null;){var v=cs(b);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var w=ls(v.pendingLanes);if(w!==0){var L=v;for(L.pendingLanes|=2,L.entangledLanes|=2;w;){var H=1<<31-st(w);L.entanglements[1]|=H,w&=~H}Fi(v),(jt&6)===0&&(Ad=qt()+500,Fc(0))}}break;case 31:case 13:L=io(v,2),L!==null&&bs(L,v,2),Id(),D0(v,2)}if(v=P0(d),v===null&&v0(i,r,d,Kd,c),v===b)break;b=v}b!==null&&d.stopPropagation()}else v0(i,r,d,null,c)}}function P0(i){return i=Ks(i),L0(i)}var Kd=null;function L0(i){if(Kd=null,i=Hn(i),i!==null){var r=l(i);if(r===null)i=null;else{var c=r.tag;if(c===13){if(i=u(r),i!==null)return i;i=null}else if(c===31){if(i=h(r),i!==null)return i;i=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Kd=i,null}function Pv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pt()){case Tn:return 2;case Ft:return 8;case ws:case Vs:return 32;case ta:return 268435456;default:return 32}default:return 32}}var U0=!1,hr=null,fr=null,mr=null,Jc=new Map,Qc=new Map,pr=[],o2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lv(i,r){switch(i){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Jc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qc.delete(r.pointerId)}}function Wc(i,r,c,d,b,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:c,eventSystemFlags:d,nativeEvent:v,targetContainers:[b]},r!==null&&(r=cs(r),r!==null&&Dv(r)),i):(i.eventSystemFlags|=d,r=i.targetContainers,b!==null&&r.indexOf(b)===-1&&r.push(b),i)}function l2(i,r,c,d,b){switch(r){case"focusin":return hr=Wc(hr,i,r,c,d,b),!0;case"dragenter":return fr=Wc(fr,i,r,c,d,b),!0;case"mouseover":return mr=Wc(mr,i,r,c,d,b),!0;case"pointerover":var v=b.pointerId;return Jc.set(v,Wc(Jc.get(v)||null,i,r,c,d,b)),!0;case"gotpointercapture":return v=b.pointerId,Qc.set(v,Wc(Qc.get(v)||null,i,r,c,d,b)),!0}return!1}function Uv(i){var r=Hn(i.target);if(r!==null){var c=l(r);if(c!==null){if(r=c.tag,r===13){if(r=u(c),r!==null){i.blockedOn=r,ks(i.priority,function(){jv(c)});return}}else if(r===31){if(r=h(c),r!==null){i.blockedOn=r,ks(i.priority,function(){jv(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function $d(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var c=P0(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);uc=d,c.target.dispatchEvent(d),uc=null}else return r=cs(c),r!==null&&Dv(r),i.blockedOn=c,!1;r.shift()}return!0}function Ov(i,r,c){$d(i)&&c.delete(r)}function c2(){U0=!1,hr!==null&&$d(hr)&&(hr=null),fr!==null&&$d(fr)&&(fr=null),mr!==null&&$d(mr)&&(mr=null),Jc.forEach(Ov),Qc.forEach(Ov)}function Yd(i,r){i.blockedOn===r&&(i.blockedOn=null,U0||(U0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,c2)))}var Jd=null;function Vv(i){Jd!==i&&(Jd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Jd===i&&(Jd=null);for(var r=0;r<i.length;r+=3){var c=i[r],d=i[r+1],b=i[r+2];if(typeof d!="function"){if(L0(d||c)===null)continue;break}var v=cs(c);v!==null&&(i.splice(r,3),r-=3,Pm(v,{pending:!0,data:b,method:c.method,action:d},d,b))}}))}function Tl(i){function r(H){return Yd(H,i)}hr!==null&&Yd(hr,i),fr!==null&&Yd(fr,i),mr!==null&&Yd(mr,i),Jc.forEach(r),Qc.forEach(r);for(var c=0;c<pr.length;c++){var d=pr[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<pr.length&&(c=pr[0],c.blockedOn===null);)Uv(c),c.blockedOn===null&&pr.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var b=c[d],v=c[d+1],w=b[Sn]||null;if(typeof v=="function")w||Vv(c);else if(w){var L=null;if(v&&v.hasAttribute("formAction")){if(b=v,w=v[Sn]||null)L=w.formAction;else if(L0(b)!==null)continue}else L=w.action;typeof L=="function"?c[d+1]=L:(c.splice(d,3),d-=3),Vv(c)}}}function Bv(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(w){return b=w})},focusReset:"manual",scroll:"manual"})}function r(){b!==null&&(b(),b=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,b=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),b!==null&&(b(),b=null)}}}function O0(i){this._internalRoot=i}Qd.prototype.render=O0.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var c=r.current,d=Ps();Rv(c,d,i,r,null,null)},Qd.prototype.unmount=O0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Rv(i.current,2,null,i,null,null),Id(),r[Bs]=null}};function Qd(i){this._internalRoot=i}Qd.prototype.unstable_scheduleHydration=function(i){if(i){var r=Vo();i={blockedOn:null,target:i,priority:r};for(var c=0;c<pr.length&&r!==0&&r<pr[c].priority;c++);pr.splice(c,0,i),c===0&&Uv(i)}};var Gv=e.version;if(Gv!=="19.2.3")throw Error(s(527,Gv,"19.2.3"));oe.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=f(r),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var u2={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{Se=Wd.inject(u2),we=Wd}catch{}}return Zc.createRoot=function(i,r){if(!a(i))throw Error(s(299));var c=!1,d="",b=Yy,v=Jy,w=Qy;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(b=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError)),r=Cv(i,1,!1,null,null,c,d,null,b,v,w,Bv),i[Bs]=r.current,b0(i),new O0(r)},Zc.hydrateRoot=function(i,r,c){if(!a(i))throw Error(s(299));var d=!1,b="",v=Yy,w=Jy,L=Qy,H=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(b=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(L=c.onRecoverableError),c.formState!==void 0&&(H=c.formState)),r=Cv(i,1,!0,r,c??null,d,b,H,v,w,L,Bv),r.context=Iv(null),c=r.current,d=Ps(),d=sa(d),b=er(d),b.callback=null,tr(c,b,d),c=d,r.current.lanes=c,Ci(r,c),Fi(r),i[Bs]=r.current,b0(i),new Qd(r)},Zc.version="19.2.3",Zc}var Wv;function v2(){if(Wv)return G0.exports;Wv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),G0.exports=b2(),G0.exports}var _2=v2();const T2=q1(_2);var Fe=(n=>(n.DRILL="Learn & Drill",n.ACTIVE_RECALL="Active Recall",n.SIMULATION="Test Simulation",n.WEAKNESS="Weakness Attack",n.EXAMPLE="Contoh Soal",n.PRACTICE="Latihan Kustom",n))(Fe||{});const Nh="https://files.catbox.moe/02xqjo.png",Xv={click:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",tap:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/arrow.mp3",back:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/arrow.mp3",success:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/gem-collect.mp3",error:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/loss.mp3",tick:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",intro:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pucker.mp3",finish:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/frozen_missile.mp3",levelUp:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pucker.mp3"},Zv=[{level:1,title:"Pemula"},{level:5,title:"Pelajar Tekun"},{level:10,title:"Pejuang UTBK"},{level:20,title:"Ahli Strategi"},{level:30,title:"Master SKD"},{level:50,title:"Grandmaster"},{level:75,title:"Warlord"},{level:100,title:"Legenda Abadi"}],Xi=(n,e,t,s="ASC",a="")=>{const l=["Bronze","Silver","Gold","Platinum","Diamond","Master","Grandmaster","Legend","Godlike","Impossible"];return t.map((u,h)=>h>=l.length?null:{id:`bench_${n.toLowerCase()}_${h+1}`,title:`${n}: ${l[h]}`,description:s==="DESC"?`Capai skor < ${u} ${a}`:`Capai skor > ${u} ${a}`,icon:e,xpReward:(h+1)*100,condition:m=>{var f,y,_,T,E;return((f=m[0])==null?void 0:f.category)==="BENCHMARK"&&((_=(y=m[0])==null?void 0:y.details)==null?void 0:_.game)===n&&(s==="DESC"?((T=m[0])==null?void 0:T.score)<=u:((E=m[0])==null?void 0:E.score)>=u)}}).filter(u=>u!==null)},S2=(n,e,t="Star")=>({id:`level_${n}`,title:`Level ${n}`,description:`Mencapai Level ${n}`,icon:t,xpReward:e,condition:(s,a)=>a.level>=n}),E2=(n,e)=>({id:`streak_${n}`,title:`Konsisten ${n} Hari`,description:`Login ${n} hari berturut-turut.`,icon:"Flame",xpReward:e,condition:(t,s)=>s.streak>=n}),w2=(n,e)=>({id:`total_tests_${n}`,title:`Veteran ${n}`,description:`Menyelesaikan total ${n} tes.`,icon:"Layers",xpReward:e,condition:t=>t.length>=n}),Zi=(n,e,t,s,a="Award",l)=>({id:`${n}_${t}`,title:`${l?l.toUpperCase():e} ${t}+`,description:`Mencapai skor ${l?l.toUpperCase():"Total"} > ${t} di ${e}.`,icon:a,xpReward:s,condition:u=>{var h,m,f,y;return((h=u[0])==null?void 0:h.category)===e&&(l?((f=(m=u[0])==null?void 0:m.details)==null?void 0:f[l])>=t:((y=u[0])==null?void 0:y.score)>=t)}}),N2=Xi("REACTION","Zap",[400,350,300,275,250,225,200,180,160,150],"DESC","ms"),k2=Xi("AIM","Target",[600,550,500,450,400,350,300,250,220,200],"DESC","ms"),A2=Xi("SEQUENCE","Grid",[5,8,10,12,15,18,20,25,30,40],"ASC"),C2=Xi("CHIMP","Brain",[7,9,11,13,15,18,21,25,30,40],"ASC"),I2=Xi("VISUAL","Eye",[5,7,9,11,13,15,17,20,25,30],"ASC"),R2=Xi("NUMBER","Hash",[5,7,9,11,13,15,18,22,30,50],"ASC"),M2=Xi("VERBAL","Book",[10,20,30,40,50,70,100,150,200,300],"ASC"),D2=Xi("TYPING","FileText",[30,40,50,60,70,80,90,100,120,140],"ASC","WPM"),j2=Xi("BRIDGE","Map",[5,8,12,15,20,25,30,40,50,60],"ASC"),P2=Xi("MATCH","Copy",[3,5,8,10,15,20,25,30,40,50],"ASC"),L2=[300,350,375,400,425,450,475,500,525].map(n=>Zi("skd_tot","SKD",n,n,"Briefcase")),U2=Zi("skd_max","SKD",550,5e3,"Crown"),O2=[100,110,120,130,140,150].map(n=>Zi("skd_twk","SKD",n,n,"Book","twk")),V2=[100,120,130,140,150,160,175].map(n=>Zi("skd_tiu","SKD",n,n,"Brain","tiu")),B2=[180,190,200,210,220,225].map(n=>Zi("skd_tkp","SKD",n,n,"Users","tkp")),G2=[500,600,650,700,750,800,850,900].map(n=>Zi("utbk_avg","UTBK",n,n,"GraduationCap","average")),F2=Zi("utbk_max","UTBK",1e3,5e3,"Crown","average"),z2=["pu","ppu","pbm","pk","lbi","lbe","pm"],H2=z2.flatMap(n=>[700,800,900,1e3].map(e=>Zi(`utbk_${n}`,"UTBK",e,Math.round(e/2),"FileText",n))),q2=[150,200,220,240,260].map(n=>Zi("tpa_tot","TPA",n,n,"Zap")),K2=Zi("tpa_max","TPA",280,2500,"Crown"),$2=Array.from({length:20},(n,e)=>(e+1)*5),Y2=$2.map(n=>S2(n,n*50)),J2=[3,7,14,21,30,60,90,100,150,200,365],Q2=J2.map(n=>E2(n,n*20)),W2=[1,5,10,25,50,75,100,150,200,300,400,500,1e3],X2=W2.map(n=>w2(n,n*10)),Z2=[{id:"pauli_speed_30",title:"Pauli Speed 30",description:"Kecepatan > 30/menit.",icon:"Activity",xpReward:100,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=30}},{id:"pauli_speed_40",title:"Pauli Speed 40",description:"Kecepatan > 40/menit.",icon:"Activity",xpReward:200,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=40}},{id:"pauli_speed_50",title:"Pauli Speed 50",description:"Kecepatan > 50/menit.",icon:"Activity",xpReward:300,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=50}},{id:"pauli_speed_60",title:"Human Calculator",description:"Pauli Speed > 60/menit.",icon:"Activity",xpReward:1e3,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=60}},{id:"pauli_perfect",title:"Teliti Banget",description:"Akurasi 100% di Tes Koran.",icon:"CheckCircle",xpReward:500,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.accuracy)===100}},{id:"kecer_acc_100",title:"Mata Elang",description:"Akurasi 100% Kecermatan.",icon:"Eye",xpReward:200,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="KECERMATAN"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.accuracy)===100}},{id:"kecer_speed_40",title:"Cepat & Tepat",description:"Speed > 40 & Akurasi > 95%.",icon:"Zap",xpReward:300,condition:n=>{var e,t,s,a,l;return((e=n[0])==null?void 0:e.category)==="KECERMATAN"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.averageSpeed)>=40&&((l=(a=n[0])==null?void 0:a.details)==null?void 0:l.accuracy)>=95}},{id:"kecer_god",title:"Mata Dewa",description:"Kecermatan Akurasi 100% & Speed > 50.",icon:"Eye",xpReward:1e3,condition:n=>{var e,t,s,a,l;return((e=n[0])==null?void 0:e.category)==="KECERMATAN"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.accuracy)===100&&((l=(a=n[0])==null?void 0:a.details)==null?void 0:l.averageSpeed)>=50}},{id:"night_owl",title:"Night Owl",description:"Belajar di atas jam 10 malam.",icon:"Moon",xpReward:50,condition:n=>n.length>0&&(new Date(n[0].date).getHours()>=22||new Date(n[0].date).getHours()<4)},{id:"early_bird",title:"Early Bird",description:"Belajar sebelum jam 6 pagi.",icon:"Sun",xpReward:50,condition:n=>n.length>0&&new Date(n[0].date).getHours()>=4&&new Date(n[0].date).getHours()<6},{id:"weekend_warrior",title:"Weekend Warrior",description:"Belajar di hari Sabtu/Minggu.",icon:"Coffee",xpReward:100,condition:n=>{const e=new Date,t=e.getDay();return(t===0||t===6)&&n.length>0&&new Date(n[0].date).getDate()===e.getDate()}},{id:"lunch_break",title:"Lunch Break",description:"Belajar jam 12:00-13:00.",icon:"Sun",xpReward:100,condition:n=>new Date().getHours()===12&&n.length>0},{id:"first_step",title:"Langkah Pertama",description:"Menyelesaikan tes pertama Anda.",icon:"Footprints",xpReward:50,condition:n=>n.length>=1},{id:"skd_pass",title:"Lulus SKD",description:"Lulus Passing Grade SKD.",icon:"Briefcase",xpReward:300,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="SKD"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.passed)}}],up=[...N2,...k2,...A2,...C2,...I2,...R2,...M2,...D2,...j2,...P2,...L2,U2,...O2,...V2,...B2,...G2,F2,...H2,...q2,K2,...Y2,...Q2,...X2,...Z2],e_=["Pendidikan adalah senjata paling mematikan di dunia, karena dengan pendidikan, Anda dapat mengubah dunia. Nelson Mandela pernah berkata demikian untuk menekankan pentingnya ilmu pengetahuan.","Kecerdasan buatan bukanlah pengganti kecerdasan manusia, melainkan alat untuk memperkuat kemampuan kita. Kuncinya adalah bagaimana kita berkolaborasi dengan teknologi.","Keberhasilan bukanlah akhir, kegagalan bukanlah hal yang fatal: keberanian untuk melanjutkanlah yang terpenting. Jangan takut untuk memulai hal baru setiap harinya.","Hutan hujan tropis Indonesia adalah salah satu paru-paru dunia. Menjaganya bukan hanya tanggung jawab pemerintah, tetapi tugas kita bersama demi masa depan bumi.","The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet. It is commonly used to test typewriters and computer keyboards.","Dalam dunia yang berubah sangat cepat, satu-satunya strategi yang dijamin gagal adalah tidak mengambil risiko. Mark Zuckerberg mengingatkan kita untuk berani berinovasi.","Sabar itu ilmu tingkat tinggi. Belajarnya setiap hari, latihannya setiap saat, ujiannya sering mendadak, sekolahnya seumur hidup.","Technology is a useful servant but a dangerous master. We must ensure that we control technology, rather than letting it control our lives and decisions.","Bhinneka Tunggal Ika berbeda-beda tetapi tetap satu jua. Semboyan ini menggambarkan persatuan dan kesatuan Bangsa dan Negara Kesatuan Republik Indonesia.","Membaca adalah jendela dunia. Dengan membaca, kita bisa menjelajahi tempat-tempat yang belum pernah kita kunjungi dan memahami pemikiran orang-orang hebat."],$1=[{id:"UTBK",name:"UTBK SNBT",desc:"Tes Potensi Skolastik & Literasi (2025)"},{id:"SKD",name:"SKD CPNS/Kedinasan",desc:"TWK, TIU, TKP"},{id:"TPA",name:"Seleksi Lanjutan",desc:"TPA, TBI, & Psikotes Kedinasan"},{id:"PSIKOTEST",name:"Tes Koran & IQ",desc:"IQ, Koran/Pauli, & Kognitif"},{id:"KECERMATAN",name:"Tes Kecermatan",desc:"Angka/Huruf Hilang (Khas Polri/Kedinasan)"},{id:"BUTAWRNA",name:"Tes Buta Warna",desc:"Simulasi Ishihara & Visual"},{id:"BENCHMARK",name:"Human Benchmark",desc:"Tes Kognitif: Reaction Time & Sequence Memory"},{id:"INTERVIEW",name:"Wawancara Tulis",desc:"Simulasi Jawab Interview & Review AI"},{id:"SKRIPSI",name:"Skripsi Helper",desc:"Bantuan Judul, Outline, & Metodologi"},{id:"GENERAL",name:"Materi Umum",desc:"Belajar Apapun: PDF, Topik, Hafalan"}],eC=[{id:"ACTIVE_RECALL",name:"Active Recall",desc:"Paksa otak mengingat tanpa melihat catatan.",icon:"Brain"},{id:"PRACTICE",name:"Latihan Soal",desc:"Drill soal pilihan ganda dari materi.",icon:"PenTool"},{id:"SPACED_REPETITION",name:"Spaced Repetition",desc:"Flashcards untuk hafalan jangka panjang.",icon:"Repeat"},{id:"FEYNMAN",name:"Feynman Technique",desc:"Jelaskan materi seolah ke anak kecil.",icon:"MessageCircle"},{id:"MIND_MAP",name:"Mind Mapping",desc:"Visualisasikan hubungan antar konsep.",icon:"Share2"},{id:"PBL",name:"Problem-Based",desc:"Belajar lewat studi kasus nyata.",icon:"Search"},{id:"TEACHING",name:"Teaching Method",desc:"Simulasi mengajar murid (AI).",icon:"GraduationCap"},{id:"SQ3R",name:"SQ3R Method",desc:"Survey, Question, Read, Recite, Review.",icon:"BookOpen"}],tC=["Penalaran Umum","Pengetahuan & Pemahaman Umum","Pemahaman Bacaan & Menulis","Pengetahuan Kuantitatif","Literasi Bahasa Indonesia","Literasi Bahasa Inggris","Penalaran Matematika"],nC=["Tes Wawasan Kebangsaan (TWK)","Tes Intelegensia Umum (TIU)","Tes Karakteristik Pribadi (TKP)"],sC=["Verbal (Analogi, Silogisme)","Numerik (Deret, Aritmatika)","Penalaran Logis & Analitis","Spasial (Gambar)","Tes Bahasa Inggris (TBI)"],iC=["TIU - Verbal & Numerik","TIU - Logika (Silogisme/Analitis)","Tes Logika Gambar (Abstrak)","Tes Kepribadian (EPPS/Sikap Kerja)"],aC=["Kognitif & Logika (Verbal, Analitik)","Tes Koran/Pauli (Hitungan Cepat)","Tes Spasial (Analogi Gambar)","Tes Kepribadian (EPPS/DISC)"],rC=["Pertanyaan Personal (Kelebihan/Kekurangan)","Motivasi & Komitmen","Studi Kasus & Problem Solving","Wawasan Kebangsaan & Integritas"],t_=[{id:"skd-tiu-challenge",title:"Latihan TIU: Logika & Figural (Challenging)",category:"SKD",skdStream:"CPNS",durationMinutes:20,isAiGenerated:!1,createdAt:new Date().toISOString(),questions:[{id:"TIU-035",type:"multiple_choice",content:"Perhatikan pola: , , ?",options:["","","","",""],correctAnswer:"",explanation:"Pola: Dua objek identik berubah menjadi dua objek identik lainnya yang memiliki sudut. Lingkaran (0 sudut) ke Segitiga (3 sudut), Persegi (4 sudut) ke Segitiga arah bawah. Pola menunjukkan transformasi ke bentuk segitiga dengan arah yang bergantian.",metadata:{difficulty:"Hard",idealTimeSeconds:45,topic:"Figural",subtest:"TIU"}},{id:"TIU-030",type:"multiple_choice",content:"Figural: Diberikan jaring-jaring kubus berbentuk salib (cross) dengan susunan vertikal 4 kotak dan horizontal 3 kotak (memotong di kotak kedua dari atas). Susunan vertikal (atas ke bawah): [A], [B], [C], [D]. Susunan horizontal (kiri ke kanan, memotong di B): [E], [B], [F]. Jika sisi [B] adalah sisi DEPAN, manakah sisi BELAKANG?",options:["A","C","D","E","F"],correctAnswer:"D",explanation:"Pada jaring-jaring salib standar: B (Depan) bertolak belakang dengan D (Belakang). A (Atas) bertolak belakang dengan C (Bawah). E (Kiri) bertolak belakang dengan F (Kanan).",metadata:{difficulty:"Hard",idealTimeSeconds:60,topic:"Figural",subtest:"TIU"}},{id:"TIU-027",type:"multiple_choice",content:"Pola Gambar: , , ?",options:["","","","",""],correctAnswer:"",explanation:"Pola: Bentuk tetap, namun warna atau isian berubah dari gelap (filled) menjadi terang (outline/empty).",metadata:{difficulty:"Medium",idealTimeSeconds:30,topic:"Figural",subtest:"TIU"}},{id:"TIU-023",type:"multiple_choice",content:"Berapa jumlah kubus pada gambar struktur 3D berikut?  (baris bawah),  (baris tengah),  (baris atas). Asumsikan struktur ini padat ke belakang dengan kedalaman 2 blok.",options:["8","14","6","12","10"],correctAnswer:"12",explanation:"Tampak depan: 3+2+1 = 6 blok. Karena kedalaman 2 blok, maka 6  2 = 12 blok.",metadata:{difficulty:"Medium",idealTimeSeconds:45,topic:"Figural",subtest:"TIU"}},{id:"TIU-036",type:"multiple_choice",content:"Logika: Semua Koki adalah Laki-laki. Sebagian Laki-laki adalah Musisi. Tidak ada Musisi yang Nada sumbang. Simpulan yang paling tepat adalah...",options:["Sebagian Koki bukan Musisi","Sebagian Laki-laki tidak Nada sumbang","Semua Koki tidak Nada sumbang","Tidak ada Laki-laki yang Nada sumbang","Sebagian Musisi adalah Koki"],correctAnswer:"Sebagian Laki-laki tidak Nada sumbang",explanation:"Premis 1: Koki -> Laki-laki. Premis 2: Sebagian Laki-laki -> Musisi. Premis 3: Musisi -> Tidak Nada sumbang. Dari P2 dan P3, sebagian Laki-laki (yaitu yang Musisi) pasti Tidak Nada sumbang. Hubungan Koki dan Musisi tidak bisa dipastikan (bisa beririsan atau tidak).",metadata:{difficulty:"Hard",idealTimeSeconds:50,topic:"Logika",subtest:"TIU"}},{id:"TIU-037",type:"multiple_choice",content:"Analitis: A, B, C, D, E, F duduk melingkar menghadap pusat. A berseberangan dengan B. C duduk di antara A dan D. E duduk di sebelah kanan B. Siapakah yang duduk di antara B dan F?",options:["A","C","D","E","Tidak ada"],correctAnswer:"E",explanation:"Susunan: 1.A, 2.F, 3.E, 4.B, 5.D, 6.C. (A seberang B). E kanan B (posisi 3). C antara A dan D (posisi 6, D di 5). Sisa F di 2. Antara B(4) dan F(2) adalah E(3).",metadata:{difficulty:"Hard",idealTimeSeconds:90,topic:"Logika",subtest:"TIU"}}]}],n_=[],s_=[],i_=[],a_=[],r_=[],o_=[],l_=[],yi=[{name:"Penalaran Umum",duration:30,count:30},{name:"Pengetahuan dan Pemahaman Umum",duration:15,count:20},{name:"Pemahaman Bacaan dan Menulis",duration:25,count:20},{name:"Pengetahuan Kuantitatif",duration:20,count:20},{name:"Literasi Bahasa Indonesia",duration:42.5,count:30},{name:"Literasi Bahasa Inggris",duration:20,count:20},{name:"Penalaran Matematika",duration:42.5,count:20}];var oC={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let lC,cC;function uC(){return{geminiUrl:lC,vertexUrl:cC}}function dC(n,e,t,s){var a,l;if(!(n!=null&&n.baseUrl)){const u=uC();return e?(a=u.vertexUrl)!==null&&a!==void 0?a:t:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ua{}function De(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const h=u.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[h])){const m=n[h];if(Array.isArray(t))for(let f=0;f<m.length;f++){const y=m[f];g(y,e.slice(l+1),t[f])}else for(const f of m)g(f,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const h=u.slice(0,-3);h in n||(n[h]=[{}]);const m=n[h];g(m[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],a=n[s];if(a!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===a)return;if(typeof a=="object"&&typeof t=="object"&&a!==null&&t!==null)Object.assign(a,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function p(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(h=>p(h,e.slice(s+1),t)):t}else return t}else n=n[a]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function hC(n,e){for(const[t,s]of Object.entries(e)){const a=t.split("."),l=s.split("."),u=new Set;let h=-1;for(let m=0;m<a.length;m++)if(a[m]==="*"){h=m;break}if(h!==-1&&l.length>h)for(let m=h;m<l.length;m++){const f=l[m];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&u.add(f)}dp(n,a,l,0,u)}}function dp(n,e,t,s,a){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),h=n;if(u in h&&Array.isArray(h[u]))for(const m of h[u])dp(m,e,t,s+1,a)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,h=Object.keys(u).filter(f=>!f.startsWith("_")&&!a.has(f)),m={};for(const f of h)m[f]=u[f];for(const[f,y]of Object.entries(m)){const _=[];for(const T of t.slice(s))T==="*"?_.push(f):_.push(T);g(u,_,y)}for(const f of h)delete u[f]}}else{const u=n;l in u&&dp(u[l],e,t,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ag(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fC(n){const e={},t=p(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=p(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function mC(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const s=p(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=p(n,["done"]);a!=null&&g(e,["done"],a);const l=p(n,["error"]);l!=null&&g(e,["error"],l);const u=p(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],gC(u)),e}function pC(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const s=p(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=p(n,["done"]);a!=null&&g(e,["done"],a);const l=p(n,["error"]);l!=null&&g(e,["error"],l);const u=p(n,["response"]);return u!=null&&g(e,["response"],xC(u)),e}function gC(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>yC(u))),g(e,["generatedVideos"],l)}const s=p(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=p(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function xC(n){const e={},t=p(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>bC(u))),g(e,["generatedVideos"],l)}const s=p(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=p(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function yC(n){const e={},t=p(n,["video"]);return t!=null&&g(e,["video"],wC(t)),e}function bC(n){const e={},t=p(n,["_self"]);return t!=null&&g(e,["video"],NC(t)),e}function vC(n){const e={},t=p(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function _C(n){const e={},t=p(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function TC(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const s=p(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=p(n,["done"]);a!=null&&g(e,["done"],a);const l=p(n,["error"]);l!=null&&g(e,["error"],l);const u=p(n,["response"]);return u!=null&&g(e,["response"],SC(u)),e}function SC(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["parent"]);s!=null&&g(e,["parent"],s);const a=p(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function Y1(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const s=p(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=p(n,["done"]);a!=null&&g(e,["done"],a);const l=p(n,["error"]);l!=null&&g(e,["error"],l);const u=p(n,["response"]);return u!=null&&g(e,["response"],EC(u)),e}function EC(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["parent"]);s!=null&&g(e,["parent"],s);const a=p(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function wC(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["uri"],t);const s=p(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],ag(s));const a=p(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function NC(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=p(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],ag(s));const a=p(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var c_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(c_||(c_={}));var u_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(u_||(u_={}));var d_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(d_||(d_={}));var Ce;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ce||(Ce={}));var h_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(h_||(h_={}));var f_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(f_||(f_={}));var m_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(m_||(m_={}));var p_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(p_||(p_={}));var g_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(g_||(g_={}));var x_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(x_||(x_={}));var y_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(y_||(y_={}));var b_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(b_||(b_={}));var v_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(v_||(v_={}));var __;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(__||(__={}));var T_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(T_||(T_={}));var S_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(S_||(S_={}));var E_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(E_||(E_={}));var w_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(w_||(w_={}));var N_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(N_||(N_={}));var k_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(k_||(k_={}));var A_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(A_||(A_={}));var kh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(kh||(kh={}));var C_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(C_||(C_={}));var I_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(I_||(I_={}));var R_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(R_||(R_={}));var hp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(hp||(hp={}));var M_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(M_||(M_={}));var D_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(D_||(D_={}));var j_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(j_||(j_={}));var P_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(P_||(P_={}));var L_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(L_||(L_={}));var U_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(U_||(U_={}));var O_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(O_||(O_={}));var V_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(V_||(V_={}));var B_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(B_||(B_={}));var G_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(G_||(G_={}));var F_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(F_||(F_={}));var z_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(z_||(z_={}));var H_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(H_||(H_={}));var q_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(q_||(q_={}));var K_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(K_||(K_={}));var $_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})($_||($_={}));var Y_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Y_||(Y_={}));var J_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(J_||(J_={}));var Q_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(Q_||(Q_={}));var W_;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(W_||(W_={}));var X_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(X_||(X_={}));var Z_;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Z_||(Z_={}));var eT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(eT||(eT={}));var tT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(tT||(tT={}));var nT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(nT||(nT={}));var sT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(sT||(sT={}));var iT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(iT||(iT={}));var aT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(aT||(aT={}));var Cl;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Cl||(Cl={}));class fp{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class eu{get text(){var e,t,s,a,l,u,h,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",y=!1;const _=[];for(const T of(m=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[E,M]of Object.entries(T))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(M!==null||M!==void 0)&&_.push(E);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;y=!0,f+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?f:void 0}get data(){var e,t,s,a,l,u,h,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const y=[];for(const _ of(m=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[T,E]of Object.entries(_))T!=="inlineData"&&(E!==null||E!==void 0)&&y.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(f+=atob(_.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,t,s,a,l,u,h,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(m=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,t,s,a,l,u,h,m,f;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(m=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((y==null?void 0:y.length)!==0)return(f=y==null?void 0:y[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,t,s,a,l,u,h,m,f;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(m=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((y==null?void 0:y.length)!==0)return(f=y==null?void 0:y[0])===null||f===void 0?void 0:f.output}}class rT{}class oT{}class kC{}class AC{}class CC{}class IC{}class lT{}class cT{}class uT{}class RC{}class Ah{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Ah;let a;const l=e;return t?a=pC(l):a=mC(l),Object.assign(s,a),s}}class dT{}class hT{}class fT{}class mT{}class MC{}class DC{}class jC{}class rg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new rg,l=TC(e);return Object.assign(s,l),s}}class PC{}class LC{}class UC{}class pT{}class OC{get text(){var e,t,s;let a="",l=!1;const u=[];for(const h of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[m,f]of Object.entries(h))m!=="text"&&m!=="thought"&&f!==null&&u.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,t,s;let a="";const l=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[h,m]of Object.entries(u))h!=="inlineData"&&m!==null&&l.push(h);u.inlineData&&typeof u.inlineData.data=="string"&&(a+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class VC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class og{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new og,l=Y1(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function J1(n,e){const t=Rt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Q1(n){return Array.isArray(n)?n.map(e=>Ch(e)):[Ch(n)]}function Ch(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function W1(n){const e=Ch(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function X1(n){const e=Ch(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function gT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Z1(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>gT(e)):[gT(n)]}function mp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function xT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function yT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function rs(n){if(n==null)throw new Error("ContentUnion is required");return mp(n)?n:{role:"user",parts:Z1(n)}}function lg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=rs(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=rs(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>rs(t)):[rs(e)]}function ii(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(xT(n)||yT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[rs(n)]}const e=[],t=[],s=mp(n[0]);for(const a of n){const l=mp(a);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(xT(a)||yT(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(a)}}return s||e.push({role:"user",parts:Z1(t)}),e}function BC(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Ce).includes(t[0].toUpperCase())?t[0].toUpperCase():Ce.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Ce).includes(s.toUpperCase())?s.toUpperCase():Ce.TYPE_UNSPECIFIED})}}function Rl(n){const e={},t=["items"],s=["anyOf"],a=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&BC(n.type,e);for(const[u,h]of Object.entries(n))if(h!=null)if(u=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Ce).includes(h.toUpperCase())?h.toUpperCase():Ce.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Rl(h);else if(s.includes(u)){const m=[];for(const f of h){if(f.type=="null"){e.nullable=!0;continue}m.push(Rl(f))}e[u]=m}else if(a.includes(u)){const m={};for(const[f,y]of Object.entries(h))m[f]=Rl(y);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=h}return e}function cg(n){return Rl(n)}function ug(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function dg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Jl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Rl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Rl(e.response));return n}function Ql(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function GC(n,e,t,s=1){const a=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:a?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:a?`${t}/${e}`:e}function Oa(n,e){if(typeof e!="string")throw new Error("name must be a string");return GC(n,e,"cachedContents")}function eE(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Vr(n){return ag(n)}function FC(n){return n!=null&&typeof n=="object"&&"name"in n}function zC(n){return n!=null&&typeof n=="object"&&"video"in n}function HC(n){return n!=null&&typeof n=="object"&&"uri"in n}function tE(n){var e;let t;if(FC(n)&&(t=n.name),!(HC(n)&&(t=n.uri,t===void 0))&&!(zC(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const a=t.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${t}`);t=a[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function nE(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function sE(n){for(const e of["models","tunedModels","publisherModels"])if(qC(n,e))return n[e];return[]}function qC(n,e){return n!==null&&typeof n=="object"&&e in n}function KC(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function $C(n,e={}){const t=[],s=new Set;for(const a of n){const l=a.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=KC(a,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function iE(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,a=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function YC(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function aE(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const a=t.inlinedResponses;if(!Array.isArray(a)||a.length===0)return n;let l=!1;for(const u of a){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Wl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function rE(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JC(n){const e={},t=p(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=p(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>CI(u))),g(e,["inlinedResponses"],l)}const a=p(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["inlinedEmbedContentResponses"],l)}return e}function QC(n){const e={},t=p(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=p(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const a=p(n,["bigqueryDestination","outputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function WC(n){const e={},t=p(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=p(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const a=p(n,["bigqueryUri"]);if(a!=null&&g(e,["bigqueryDestination","outputUri"],a),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function fh(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const s=p(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const a=p(n,["metadata","state"]);a!=null&&g(e,["state"],rE(a));const l=p(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const u=p(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const h=p(n,["metadata","updateTime"]);h!=null&&g(e,["updateTime"],h);const m=p(n,["metadata","model"]);m!=null&&g(e,["model"],m);const f=p(n,["metadata","output"]);return f!=null&&g(e,["dest"],JC(aE(f))),e}function pp(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const s=p(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=p(n,["state"]);a!=null&&g(e,["state"],rE(a));const l=p(n,["error"]);l!=null&&g(e,["error"],l);const u=p(n,["createTime"]);u!=null&&g(e,["createTime"],u);const h=p(n,["startTime"]);h!=null&&g(e,["startTime"],h);const m=p(n,["endTime"]);m!=null&&g(e,["endTime"],m);const f=p(n,["updateTime"]);f!=null&&g(e,["updateTime"],f);const y=p(n,["model"]);y!=null&&g(e,["model"],y);const _=p(n,["inputConfig"]);_!=null&&g(e,["src"],XC(_));const T=p(n,["outputConfig"]);T!=null&&g(e,["dest"],QC(aE(T)));const E=p(n,["completionStats"]);return E!=null&&g(e,["completionStats"],E),e}function XC(n){const e={},t=p(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=p(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const a=p(n,["bigquerySource","inputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function ZC(n,e){const t={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=p(e,["fileName"]);s!=null&&g(t,["fileName"],s);const a=p(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>AI(n,u))),g(t,["requests","requests"],l)}return t}function eI(n){const e={},t=p(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=p(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const a=p(n,["bigqueryUri"]);if(a!=null&&g(e,["bigquerySource","inputUri"],a),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function tI(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function nI(n,e){const t={},s=p(e,["name"]);return s!=null&&g(t,["_url","name"],Wl(n,s)),t}function sI(n,e){const t={},s=p(e,["name"]);return s!=null&&g(t,["_url","name"],Wl(n,s)),t}function iI(n){const e={},t=p(n,["content"]);t!=null&&g(e,["content"],t);const s=p(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],aI(s));const a=p(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=p(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=p(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=p(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const m=p(n,["index"]);m!=null&&g(e,["index"],m);const f=p(n,["logprobsResult"]);f!=null&&g(e,["logprobsResult"],f);const y=p(n,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(E=>E)),g(e,["safetyRatings"],T)}const _=p(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function aI(n){const e={},t=p(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function oE(n){const e={},t=p(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>LI(l))),g(e,["parts"],a)}const s=p(n,["role"]);return s!=null&&g(e,["role"],s),e}function rI(n,e){const t={},s=p(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),p(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function oI(n,e){const t={},s=p(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=p(n,["dest"]);return e!==void 0&&a!=null&&g(e,["outputConfig"],WC(YC(a))),t}function bT(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["src"]);a!=null&&g(t,["batch","inputConfig"],ZC(n,iE(n,a)));const l=p(e,["config"]);return l!=null&&rI(l,t),t}function lI(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["model"],Rt(n,s));const a=p(e,["src"]);a!=null&&g(t,["inputConfig"],eI(iE(n,a)));const l=p(e,["config"]);return l!=null&&oI(l,t),t}function cI(n,e){const t={},s=p(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function uI(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["src"]);a!=null&&g(t,["batch","inputConfig"],xI(n,a));const l=p(e,["config"]);return l!=null&&cI(l,t),t}function dI(n,e){const t={},s=p(e,["name"]);return s!=null&&g(t,["_url","name"],Wl(n,s)),t}function hI(n,e){const t={},s=p(e,["name"]);return s!=null&&g(t,["_url","name"],Wl(n,s)),t}function fI(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["name"]);s!=null&&g(e,["name"],s);const a=p(n,["done"]);a!=null&&g(e,["done"],a);const l=p(n,["error"]);return l!=null&&g(e,["error"],l),e}function mI(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["name"]);s!=null&&g(e,["name"],s);const a=p(n,["done"]);a!=null&&g(e,["done"],a);const l=p(n,["error"]);return l!=null&&g(e,["error"],l),e}function pI(n,e){const t={},s=p(e,["contents"]);if(s!=null){let l=lg(n,s);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["requests[]","request","content"],l)}const a=p(e,["config"]);return a!=null&&(g(t,["_self"],gI(a,t)),hC(t,{"requests[].*":"requests[].request.*"})),t}function gI(n,e){const t={},s=p(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=p(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=p(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function xI(n,e){const t={},s=p(e,["fileName"]);s!=null&&g(t,["file_name"],s);const a=p(e,["inlinedRequests"]);return a!=null&&g(t,["requests"],pI(n,a)),t}function yI(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=p(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function bI(n){const e={},t=p(n,["id"]);t!=null&&g(e,["id"],t);const s=p(n,["args"]);s!=null&&g(e,["args"],s);const a=p(n,["name"]);if(a!=null&&g(e,["name"],a),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vI(n){const e={},t=p(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=p(n,["mode"]);if(s!=null&&g(e,["mode"],s),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _I(n,e,t){const s={},a=p(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],oE(rs(a)));const l=p(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=p(e,["topP"]);u!=null&&g(s,["topP"],u);const h=p(e,["topK"]);h!=null&&g(s,["topK"],h);const m=p(e,["candidateCount"]);m!=null&&g(s,["candidateCount"],m);const f=p(e,["maxOutputTokens"]);f!=null&&g(s,["maxOutputTokens"],f);const y=p(e,["stopSequences"]);y!=null&&g(s,["stopSequences"],y);const _=p(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=p(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const E=p(e,["presencePenalty"]);E!=null&&g(s,["presencePenalty"],E);const M=p(e,["frequencyPenalty"]);M!=null&&g(s,["frequencyPenalty"],M);const A=p(e,["seed"]);A!=null&&g(s,["seed"],A);const C=p(e,["responseMimeType"]);C!=null&&g(s,["responseMimeType"],C);const D=p(e,["responseSchema"]);D!=null&&g(s,["responseSchema"],cg(D));const G=p(e,["responseJsonSchema"]);if(G!=null&&g(s,["responseJsonSchema"],G),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=p(e,["safetySettings"]);if(t!==void 0&&I!=null){let O=I;Array.isArray(O)&&(O=O.map(Ae=>UI(Ae))),g(t,["safetySettings"],O)}const q=p(e,["tools"]);if(t!==void 0&&q!=null){let O=Ql(q);Array.isArray(O)&&(O=O.map(Ae=>VI(Jl(Ae)))),g(t,["tools"],O)}const X=p(e,["toolConfig"]);if(t!==void 0&&X!=null&&g(t,["toolConfig"],OI(X)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=p(e,["cachedContent"]);t!==void 0&&J!=null&&g(t,["cachedContent"],Oa(n,J));const j=p(e,["responseModalities"]);j!=null&&g(s,["responseModalities"],j);const N=p(e,["mediaResolution"]);N!=null&&g(s,["mediaResolution"],N);const R=p(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],ug(R)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=p(e,["thinkingConfig"]);P!=null&&g(s,["thinkingConfig"],P);const U=p(e,["imageConfig"]);U!=null&&g(s,["imageConfig"],kI(U));const F=p(e,["enableEnhancedCivicAnswers"]);return F!=null&&g(s,["enableEnhancedCivicAnswers"],F),s}function TI(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(f=>iI(f))),g(e,["candidates"],m)}const a=p(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=p(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=p(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=p(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function SI(n,e){const t={},s=p(e,["name"]);return s!=null&&g(t,["_url","name"],Wl(n,s)),t}function EI(n,e){const t={},s=p(e,["name"]);return s!=null&&g(t,["_url","name"],Wl(n,s)),t}function wI(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function NI(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function kI(n){const e={},t=p(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=p(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),p(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(p(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function AI(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["request","model"],Rt(n,s));const a=p(e,["contents"]);if(a!=null){let h=ii(a);Array.isArray(h)&&(h=h.map(m=>oE(m))),g(t,["request","contents"],h)}const l=p(e,["metadata"]);l!=null&&g(t,["metadata"],l);const u=p(e,["config"]);return u!=null&&g(t,["request","generationConfig"],_I(n,u,p(t,["request"],{}))),t}function CI(n){const e={},t=p(n,["response"]);t!=null&&g(e,["response"],TI(t));const s=p(n,["error"]);return s!=null&&g(e,["error"],s),e}function II(n,e){const t={},s=p(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(n,["pageToken"]);if(e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),p(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function RI(n,e){const t={},s=p(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=p(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function MI(n){const e={},t=p(n,["config"]);return t!=null&&II(t,e),e}function DI(n){const e={},t=p(n,["config"]);return t!=null&&RI(t,e),e}function jI(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(n,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>fh(u))),g(e,["batchJobs"],l)}return e}function PI(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(n,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>pp(u))),g(e,["batchJobs"],l)}return e}function LI(n){const e={},t=p(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=p(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=p(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=p(n,["fileData"]);l!=null&&g(e,["fileData"],yI(l));const u=p(n,["functionCall"]);u!=null&&g(e,["functionCall"],bI(u));const h=p(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const m=p(n,["inlineData"]);m!=null&&g(e,["inlineData"],tI(m));const f=p(n,["text"]);f!=null&&g(e,["text"],f);const y=p(n,["thought"]);y!=null&&g(e,["thought"],y);const _=p(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=p(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function UI(n){const e={},t=p(n,["category"]);if(t!=null&&g(e,["category"],t),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=p(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function OI(n){const e={},t=p(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=p(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],vI(s)),e}function VI(n){const e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=p(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=p(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=p(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=p(n,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>_)),g(e,["functionDeclarations"],y)}const u=p(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],wI(u));const h=p(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],NI(h));const m=p(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const f=p(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ia;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Ia||(Ia={}));class jo{constructor(e,t,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,a)}init(e,t,s){var a,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(a=u.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BI extends Ua{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new jo(Ia.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=bT(this.apiClient,e),s=t._url,a=De("{model}:batchGenerateContent",s),h=t.batch.inputConfig.requests,m=h.requests,f=[];for(const y of m){const _=Object.assign({},y);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const E=_.request;E.systemInstruction=T,_.request=E}f.push(_)}return h.requests=f,delete t.config,delete t._url,delete t._query,{path:a,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${a}`;else if(u)s.dest=`${u}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=lI(this.apiClient,e);return h=De("batchPredictionJobs",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>pp(y))}else{const f=bT(this.apiClient,e);return h=De("{model}:batchGenerateContent",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>fh(y))}}async createEmbeddingsInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=uI(this.apiClient,e);return l=De("{model}:asyncBatchEmbedContent",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>fh(m))}}async get(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=EI(this.apiClient,e);return h=De("batchPredictionJobs/{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>pp(y))}else{const f=SI(this.apiClient,e);return h=De("batches/{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>fh(y))}}async cancel(e){var t,s,a,l;let u="",h={};if(this.apiClient.isVertexAI()){const m=sI(this.apiClient,e);u=De("batchPredictionJobs/{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=nI(this.apiClient,e);u=De("batches/{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=DI(e);return h=De("batchPredictionJobs",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=PI(y),T=new pT;return Object.assign(T,_),T})}else{const f=MI(e);return h=De("batches",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=jI(y),T=new pT;return Object.assign(T,_),T})}}async delete(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=hI(this.apiClient,e);return h=De("batchPredictionJobs/{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>mI(y))}else{const f=dI(this.apiClient,e);return h=De("batches/{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>fI(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GI(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function vT(n){const e={},t=p(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>uR(l))),g(e,["parts"],a)}const s=p(n,["role"]);return s!=null&&g(e,["role"],s),e}function FI(n,e){const t={},s=p(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=p(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=p(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=p(n,["contents"]);if(e!==void 0&&u!=null){let y=ii(u);Array.isArray(y)&&(y=y.map(_=>vT(_))),g(e,["contents"],y)}const h=p(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],vT(rs(h)));const m=p(n,["tools"]);if(e!==void 0&&m!=null){let y=m;Array.isArray(y)&&(y=y.map(_=>hR(_))),g(e,["tools"],y)}const f=p(n,["toolConfig"]);if(e!==void 0&&f!=null&&g(e,["toolConfig"],dR(f)),p(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function zI(n,e){const t={},s=p(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=p(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=p(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=p(n,["contents"]);if(e!==void 0&&u!=null){let _=ii(u);Array.isArray(_)&&(_=_.map(T=>T)),g(e,["contents"],_)}const h=p(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],rs(h));const m=p(n,["tools"]);if(e!==void 0&&m!=null){let _=m;Array.isArray(_)&&(_=_.map(T=>fR(T))),g(e,["tools"],_)}const f=p(n,["toolConfig"]);e!==void 0&&f!=null&&g(e,["toolConfig"],f);const y=p(n,["kmsKeyName"]);return e!==void 0&&y!=null&&g(e,["encryption_spec","kmsKeyName"],y),t}function HI(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["model"],J1(n,s));const a=p(e,["config"]);return a!=null&&FI(a,t),t}function qI(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["model"],J1(n,s));const a=p(e,["config"]);return a!=null&&zI(a,t),t}function KI(n,e){const t={},s=p(e,["name"]);return s!=null&&g(t,["_url","name"],Oa(n,s)),t}function $I(n,e){const t={},s=p(e,["name"]);return s!=null&&g(t,["_url","name"],Oa(n,s)),t}function YI(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function JI(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function QI(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=p(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function WI(n){const e={},t=p(n,["id"]);t!=null&&g(e,["id"],t);const s=p(n,["args"]);s!=null&&g(e,["args"],s);const a=p(n,["name"]);if(a!=null&&g(e,["name"],a),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function XI(n){const e={},t=p(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=p(n,["mode"]);if(s!=null&&g(e,["mode"],s),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ZI(n){const e={},t=p(n,["description"]);t!=null&&g(e,["description"],t);const s=p(n,["name"]);s!=null&&g(e,["name"],s);const a=p(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=p(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=p(n,["response"]);u!=null&&g(e,["response"],u);const h=p(n,["responseJsonSchema"]);if(h!=null&&g(e,["responseJsonSchema"],h),p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function eR(n,e){const t={},s=p(e,["name"]);return s!=null&&g(t,["_url","name"],Oa(n,s)),t}function tR(n,e){const t={},s=p(e,["name"]);return s!=null&&g(t,["_url","name"],Oa(n,s)),t}function nR(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function sR(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function iR(n,e){const t={},s=p(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function aR(n,e){const t={},s=p(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function rR(n){const e={},t=p(n,["config"]);return t!=null&&iR(t,e),e}function oR(n){const e={},t=p(n,["config"]);return t!=null&&aR(t,e),e}function lR(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function cR(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function uR(n){const e={},t=p(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=p(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=p(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=p(n,["fileData"]);l!=null&&g(e,["fileData"],QI(l));const u=p(n,["functionCall"]);u!=null&&g(e,["functionCall"],WI(u));const h=p(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const m=p(n,["inlineData"]);m!=null&&g(e,["inlineData"],GI(m));const f=p(n,["text"]);f!=null&&g(e,["text"],f);const y=p(n,["thought"]);y!=null&&g(e,["thought"],y);const _=p(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=p(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function dR(n){const e={},t=p(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=p(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],XI(s)),e}function hR(n){const e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=p(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=p(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=p(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=p(n,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>_)),g(e,["functionDeclarations"],y)}const u=p(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],nR(u));const h=p(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],sR(h));const m=p(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const f=p(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function fR(n){const e={},t=p(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=p(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=p(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const l=p(n,["enterpriseWebSearch"]);l!=null&&g(e,["enterpriseWebSearch"],l);const u=p(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>ZI(T))),g(e,["functionDeclarations"],_)}const h=p(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const m=p(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const f=p(n,["googleSearchRetrieval"]);f!=null&&g(e,["googleSearchRetrieval"],f);const y=p(n,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function mR(n,e){const t={},s=p(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=p(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function pR(n,e){const t={},s=p(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=p(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function gR(n,e){const t={},s=p(e,["name"]);s!=null&&g(t,["_url","name"],Oa(n,s));const a=p(e,["config"]);return a!=null&&mR(a,t),t}function xR(n,e){const t={},s=p(e,["name"]);s!=null&&g(t,["_url","name"],Oa(n,s));const a=p(e,["config"]);return a!=null&&pR(a,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yR extends Ua{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new jo(Ia.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=qI(this.apiClient,e);return h=De("cachedContents",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const f=HI(this.apiClient,e);return h=De("cachedContents",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async get(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=tR(this.apiClient,e);return h=De("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const f=eR(this.apiClient,e);return h=De("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=$I(this.apiClient,e);return h=De("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=JI(y),T=new fT;return Object.assign(T,_),T})}else{const f=KI(this.apiClient,e);return h=De("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=YI(y),T=new fT;return Object.assign(T,_),T})}}async update(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=xR(this.apiClient,e);return h=De("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const f=gR(this.apiClient,e);return h=De("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async listInternal(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=oR(e);return h=De("cachedContents",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=cR(y),T=new mT;return Object.assign(T,_),T})}else{const f=rR(e);return h=De("cachedContents",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=lR(y),T=new mT;return Object.assign(T,_),T})}}}function Ih(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function _T(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rt(n){return this instanceof rt?(this.v=n,this):new rt(n)}function Ti(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),a[Symbol.asyncIterator]=function(){return this},a;function u(E){return function(M){return Promise.resolve(M).then(E,_)}}function h(E,M){s[E]&&(a[E]=function(A){return new Promise(function(C,D){l.push([E,A,C,D])>1||m(E,A)})},M&&(a[E]=M(a[E])))}function m(E,M){try{f(s[E](M))}catch(A){T(l[0][3],A)}}function f(E){E.value instanceof rt?Promise.resolve(E.value.v).then(y,_):T(l[0][2],E)}function y(E){m("next",E)}function _(E){m("throw",E)}function T(E,M){E(M),l.shift(),l.length&&m(l[0][0],l[0][1])}}function Si(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof _T=="function"?_T(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(h,m){u=n[l](u),a(h,m,u.done,u.value)})}}function a(l,u,h,m){Promise.resolve(m).then(function(f){l({value:f,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bR(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:lE(t)}function lE(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function vR(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function TT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const a=[];let l=!0;for(;s<t&&n[s].role==="model";)a.push(n[s]),l&&!lE(n[s])&&(l=!1),s++;l?e.push(...a):e.pop()}return e}class _R{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new TR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class TR{constructor(e,t,s,a={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),vR(l)}async sendMessage(e){var t;await this.sendPromise;const s=rs(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,h;const m=await a,f=(u=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,y=m.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];y!=null&&(T=(h=y.slice(_))!==null&&h!==void 0?h:[]);const E=f?[f]:[];this.recordHistory(s,E,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var t;await this.sendPromise;const s=rs(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?TT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Ti(this,arguments,function*(){var a,l,u,h,m,f;const y=[];try{for(var _=!0,T=Si(e),E;E=yield rt(T.next()),a=E.done,!a;_=!0){h=E.value,_=!1;const M=h;if(bR(M)){const A=(f=(m=M.candidates)===null||m===void 0?void 0:m[0])===null||f===void 0?void 0:f.content;A!==void 0&&y.push(A)}yield yield rt(M)}}catch(M){l={error:M}}finally{try{!_&&!a&&(u=T.return)&&(yield rt(u.call(T)))}finally{if(l)throw l.error}}this.recordHistory(t,y)})}recordHistory(e,t,s){let a=[];t.length>0&&t.every(l=>l.role!==void 0)?a=t:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...TT(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class of extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,of.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SR(n){const e={},t=p(n,["file"]);return t!=null&&g(e,["file"],t),e}function ER(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function wR(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","file"],tE(t)),e}function NR(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function kR(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","file"],tE(t)),e}function AR(n,e){const t={},s=p(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function CR(n){const e={},t=p(n,["config"]);return t!=null&&AR(t,e),e}function IR(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(n,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RR extends Ua{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new jo(Ia.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=CR(e);return l=De("files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:m.headers},y})),a.then(m=>{const f=IR(m),y=new PC;return Object.assign(y,f),y})}}async createInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=SR(e);return l=De("upload/v1beta/files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const f=ER(m),y=new LC;return Object.assign(y,f),y})}}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=kR(e);return l=De("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=wR(e);return l=De("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:m.headers},y})),a.then(m=>{const f=NR(m),y=new UC;return Object.assign(y,f),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mh(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function MR(n){const e={},t=p(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>YR(l))),g(e,["parts"],a)}const s=p(n,["role"]);return s!=null&&g(e,["role"],s),e}function DR(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=p(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function jR(n){const e={},t=p(n,["id"]);t!=null&&g(e,["id"],t);const s=p(n,["args"]);s!=null&&g(e,["args"],s);const a=p(n,["name"]);if(a!=null&&g(e,["name"],a),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function PR(n){const e={},t=p(n,["description"]);t!=null&&g(e,["description"],t);const s=p(n,["name"]);s!=null&&g(e,["name"],s);const a=p(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=p(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=p(n,["response"]);u!=null&&g(e,["response"],u);const h=p(n,["responseJsonSchema"]);if(h!=null&&g(e,["responseJsonSchema"],h),p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function LR(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=p(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=p(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=p(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=p(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=p(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const m=p(n,["logprobs"]);m!=null&&g(e,["logprobs"],m);const f=p(n,["maxOutputTokens"]);f!=null&&g(e,["maxOutputTokens"],f);const y=p(n,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const _=p(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=p(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const E=p(n,["responseMimeType"]);E!=null&&g(e,["responseMimeType"],E);const M=p(n,["responseModalities"]);M!=null&&g(e,["responseModalities"],M);const A=p(n,["responseSchema"]);A!=null&&g(e,["responseSchema"],A);const C=p(n,["routingConfig"]);C!=null&&g(e,["routingConfig"],C);const D=p(n,["seed"]);D!=null&&g(e,["seed"],D);const G=p(n,["speechConfig"]);G!=null&&g(e,["speechConfig"],G);const I=p(n,["stopSequences"]);I!=null&&g(e,["stopSequences"],I);const q=p(n,["temperature"]);q!=null&&g(e,["temperature"],q);const X=p(n,["thinkingConfig"]);X!=null&&g(e,["thinkingConfig"],X);const J=p(n,["topK"]);J!=null&&g(e,["topK"],J);const j=p(n,["topP"]);if(j!=null&&g(e,["topP"],j),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function UR(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function OR(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function VR(n,e){const t={},s=p(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=p(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=p(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=p(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=p(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const m=p(n,["maxOutputTokens"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","maxOutputTokens"],m);const f=p(n,["mediaResolution"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","mediaResolution"],f);const y=p(n,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const _=p(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],dg(_));const T=p(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const E=p(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],E);const M=p(n,["systemInstruction"]);e!==void 0&&M!=null&&g(e,["setup","systemInstruction"],MR(rs(M)));const A=p(n,["tools"]);if(e!==void 0&&A!=null){let J=Ql(A);Array.isArray(J)&&(J=J.map(j=>QR(Jl(j)))),g(e,["setup","tools"],J)}const C=p(n,["sessionResumption"]);e!==void 0&&C!=null&&g(e,["setup","sessionResumption"],JR(C));const D=p(n,["inputAudioTranscription"]);e!==void 0&&D!=null&&g(e,["setup","inputAudioTranscription"],D);const G=p(n,["outputAudioTranscription"]);e!==void 0&&G!=null&&g(e,["setup","outputAudioTranscription"],G);const I=p(n,["realtimeInputConfig"]);e!==void 0&&I!=null&&g(e,["setup","realtimeInputConfig"],I);const q=p(n,["contextWindowCompression"]);e!==void 0&&q!=null&&g(e,["setup","contextWindowCompression"],q);const X=p(n,["proactivity"]);if(e!==void 0&&X!=null&&g(e,["setup","proactivity"],X),p(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function BR(n,e){const t={},s=p(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],LR(s));const a=p(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=p(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=p(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=p(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const m=p(n,["maxOutputTokens"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","maxOutputTokens"],m);const f=p(n,["mediaResolution"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","mediaResolution"],f);const y=p(n,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const _=p(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],dg(_));const T=p(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const E=p(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],E);const M=p(n,["systemInstruction"]);e!==void 0&&M!=null&&g(e,["setup","systemInstruction"],rs(M));const A=p(n,["tools"]);if(e!==void 0&&A!=null){let j=Ql(A);Array.isArray(j)&&(j=j.map(N=>WR(Jl(N)))),g(e,["setup","tools"],j)}const C=p(n,["sessionResumption"]);e!==void 0&&C!=null&&g(e,["setup","sessionResumption"],C);const D=p(n,["inputAudioTranscription"]);e!==void 0&&D!=null&&g(e,["setup","inputAudioTranscription"],D);const G=p(n,["outputAudioTranscription"]);e!==void 0&&G!=null&&g(e,["setup","outputAudioTranscription"],G);const I=p(n,["realtimeInputConfig"]);e!==void 0&&I!=null&&g(e,["setup","realtimeInputConfig"],I);const q=p(n,["contextWindowCompression"]);e!==void 0&&q!=null&&g(e,["setup","contextWindowCompression"],q);const X=p(n,["proactivity"]);e!==void 0&&X!=null&&g(e,["setup","proactivity"],X);const J=p(n,["explicitVadSignal"]);return e!==void 0&&J!=null&&g(e,["setup","explicitVadSignal"],J),t}function GR(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["setup","model"],Rt(n,s));const a=p(e,["config"]);return a!=null&&g(t,["config"],VR(a,t)),t}function FR(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["setup","model"],Rt(n,s));const a=p(e,["config"]);return a!=null&&g(t,["config"],BR(a,t)),t}function zR(n){const e={},t=p(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function HR(n){const e={},t=p(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["weightedPrompts"],s)}return e}function qR(n){const e={},t=p(n,["media"]);if(t!=null){let f=Q1(t);Array.isArray(f)&&(f=f.map(y=>mh(y))),g(e,["mediaChunks"],f)}const s=p(n,["audio"]);s!=null&&g(e,["audio"],mh(X1(s)));const a=p(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=p(n,["video"]);l!=null&&g(e,["video"],mh(W1(l)));const u=p(n,["text"]);u!=null&&g(e,["text"],u);const h=p(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const m=p(n,["activityEnd"]);return m!=null&&g(e,["activityEnd"],m),e}function KR(n){const e={},t=p(n,["media"]);if(t!=null){let f=Q1(t);Array.isArray(f)&&(f=f.map(y=>y)),g(e,["mediaChunks"],f)}const s=p(n,["audio"]);s!=null&&g(e,["audio"],X1(s));const a=p(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=p(n,["video"]);l!=null&&g(e,["video"],W1(l));const u=p(n,["text"]);u!=null&&g(e,["text"],u);const h=p(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const m=p(n,["activityEnd"]);return m!=null&&g(e,["activityEnd"],m),e}function $R(n){const e={},t=p(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=p(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const a=p(n,["toolCall"]);a!=null&&g(e,["toolCall"],a);const l=p(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const u=p(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],XR(u));const h=p(n,["goAway"]);h!=null&&g(e,["goAway"],h);const m=p(n,["sessionResumptionUpdate"]);m!=null&&g(e,["sessionResumptionUpdate"],m);const f=p(n,["voiceActivityDetectionSignal"]);return f!=null&&g(e,["voiceActivityDetectionSignal"],f),e}function YR(n){const e={},t=p(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=p(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=p(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=p(n,["fileData"]);l!=null&&g(e,["fileData"],DR(l));const u=p(n,["functionCall"]);u!=null&&g(e,["functionCall"],jR(u));const h=p(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const m=p(n,["inlineData"]);m!=null&&g(e,["inlineData"],mh(m));const f=p(n,["text"]);f!=null&&g(e,["text"],f);const y=p(n,["thought"]);y!=null&&g(e,["thought"],y);const _=p(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=p(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function JR(n){const e={},t=p(n,["handle"]);if(t!=null&&g(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function QR(n){const e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=p(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=p(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=p(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=p(n,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>_)),g(e,["functionDeclarations"],y)}const u=p(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],UR(u));const h=p(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],OR(h));const m=p(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const f=p(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function WR(n){const e={},t=p(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=p(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=p(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const l=p(n,["enterpriseWebSearch"]);l!=null&&g(e,["enterpriseWebSearch"],l);const u=p(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>PR(T))),g(e,["functionDeclarations"],_)}const h=p(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const m=p(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const f=p(n,["googleSearchRetrieval"]);f!=null&&g(e,["googleSearchRetrieval"],f);const y=p(n,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function XR(n){const e={},t=p(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=p(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const a=p(n,["candidatesTokenCount"]);a!=null&&g(e,["responseTokenCount"],a);const l=p(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const u=p(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const h=p(n,["totalTokenCount"]);h!=null&&g(e,["totalTokenCount"],h);const m=p(n,["promptTokensDetails"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(M=>M)),g(e,["promptTokensDetails"],E)}const f=p(n,["cacheTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(M=>M)),g(e,["cacheTokensDetails"],E)}const y=p(n,["candidatesTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(M=>M)),g(e,["responseTokensDetails"],E)}const _=p(n,["toolUsePromptTokensDetails"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(M=>M)),g(e,["toolUsePromptTokensDetails"],E)}const T=p(n,["trafficType"]);return T!=null&&g(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZR(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function eM(n){const e={},t=p(n,["content"]);t!=null&&g(e,["content"],t);const s=p(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],tM(s));const a=p(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=p(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=p(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=p(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const m=p(n,["index"]);m!=null&&g(e,["index"],m);const f=p(n,["logprobsResult"]);f!=null&&g(e,["logprobsResult"],f);const y=p(n,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(E=>E)),g(e,["safetyRatings"],T)}const _=p(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function tM(n){const e={},t=p(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function nM(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["contents"]);if(a!=null){let l=ii(a);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["contents"],l)}return t}function sM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["tokensInfo"],a)}return e}function iM(n){const e={},t=p(n,["values"]);t!=null&&g(e,["values"],t);const s=p(n,["statistics"]);return s!=null&&g(e,["statistics"],aM(s)),e}function aM(n){const e={},t=p(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=p(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function lf(n){const e={},t=p(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>m4(l))),g(e,["parts"],a)}const s=p(n,["role"]);return s!=null&&g(e,["role"],s),e}function rM(n){const e={},t=p(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=p(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function oM(n){const e={};if(p(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function lM(n,e){const t={},s=p(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],rs(s));const a=p(n,["tools"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>hE(h))),g(e,["tools"],u)}const l=p(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],ZM(l)),t}function cM(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["contents"]);if(a!=null){let u=ii(a);Array.isArray(u)&&(u=u.map(h=>lf(h))),g(t,["contents"],u)}const l=p(e,["config"]);return l!=null&&oM(l),t}function uM(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["contents"]);if(a!=null){let u=ii(a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const l=p(e,["config"]);return l!=null&&lM(l,t),t}function dM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const a=p(n,["cachedContentTokenCount"]);return a!=null&&g(e,["cachedContentTokenCount"],a),e}function hM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function fM(n,e){const t={},s=p(e,["model"]);return s!=null&&g(t,["_url","name"],Rt(n,s)),t}function mM(n,e){const t={},s=p(e,["model"]);return s!=null&&g(t,["_url","name"],Rt(n,s)),t}function pM(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function gM(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function xM(n,e){const t={},s=p(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=p(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=p(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=p(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=p(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const m=p(n,["seed"]);e!==void 0&&m!=null&&g(e,["parameters","seed"],m);const f=p(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const y=p(n,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const _=p(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=p(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const E=p(n,["language"]);e!==void 0&&E!=null&&g(e,["parameters","language"],E);const M=p(n,["outputMimeType"]);e!==void 0&&M!=null&&g(e,["parameters","outputOptions","mimeType"],M);const A=p(n,["outputCompressionQuality"]);e!==void 0&&A!=null&&g(e,["parameters","outputOptions","compressionQuality"],A);const C=p(n,["addWatermark"]);e!==void 0&&C!=null&&g(e,["parameters","addWatermark"],C);const D=p(n,["labels"]);e!==void 0&&D!=null&&g(e,["labels"],D);const G=p(n,["editMode"]);e!==void 0&&G!=null&&g(e,["parameters","editMode"],G);const I=p(n,["baseSteps"]);return e!==void 0&&I!=null&&g(e,["parameters","editConfig","baseSteps"],I),t}function yM(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=p(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>v4(m))),g(t,["instances[0]","referenceImages"],h)}const u=p(e,["config"]);return u!=null&&xM(u,t),t}function bM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>cf(l))),g(e,["generatedImages"],a)}return e}function vM(n,e){const t={},s=p(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=p(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=p(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function _M(n,e){const t={},s=p(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const a=p(n,["title"]);e!==void 0&&a!=null&&g(e,["instances[]","title"],a);const l=p(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const u=p(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const h=p(n,["autoTruncate"]);return e!==void 0&&h!=null&&g(e,["parameters","autoTruncate"],h),t}function TM(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["contents"]);if(a!=null){let h=lg(n,a);Array.isArray(h)&&(h=h.map(m=>m)),g(t,["requests[]","content"],h)}const l=p(e,["config"]);l!=null&&vM(l,t);const u=p(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],Rt(n,u)),t}function SM(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["contents"]);if(a!=null){let u=lg(n,a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["instances[]","content"],u)}const l=p(e,["config"]);return l!=null&&_M(l,t),t}function EM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["embeddings"],l)}const a=p(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function wM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>iM(u))),g(e,["embeddings"],l)}const a=p(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function NM(n){const e={},t=p(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=p(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function kM(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=p(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function AM(n){const e={},t=p(n,["id"]);t!=null&&g(e,["id"],t);const s=p(n,["args"]);s!=null&&g(e,["args"],s);const a=p(n,["name"]);if(a!=null&&g(e,["name"],a),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CM(n){const e={},t=p(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=p(n,["mode"]);if(s!=null&&g(e,["mode"],s),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function IM(n){const e={},t=p(n,["description"]);t!=null&&g(e,["description"],t);const s=p(n,["name"]);s!=null&&g(e,["name"],s);const a=p(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=p(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=p(n,["response"]);u!=null&&g(e,["response"],u);const h=p(n,["responseJsonSchema"]);if(h!=null&&g(e,["responseJsonSchema"],h),p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function RM(n,e,t){const s={},a=p(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],lf(rs(a)));const l=p(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=p(e,["topP"]);u!=null&&g(s,["topP"],u);const h=p(e,["topK"]);h!=null&&g(s,["topK"],h);const m=p(e,["candidateCount"]);m!=null&&g(s,["candidateCount"],m);const f=p(e,["maxOutputTokens"]);f!=null&&g(s,["maxOutputTokens"],f);const y=p(e,["stopSequences"]);y!=null&&g(s,["stopSequences"],y);const _=p(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=p(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const E=p(e,["presencePenalty"]);E!=null&&g(s,["presencePenalty"],E);const M=p(e,["frequencyPenalty"]);M!=null&&g(s,["frequencyPenalty"],M);const A=p(e,["seed"]);A!=null&&g(s,["seed"],A);const C=p(e,["responseMimeType"]);C!=null&&g(s,["responseMimeType"],C);const D=p(e,["responseSchema"]);D!=null&&g(s,["responseSchema"],cg(D));const G=p(e,["responseJsonSchema"]);if(G!=null&&g(s,["responseJsonSchema"],G),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=p(e,["safetySettings"]);if(t!==void 0&&I!=null){let O=I;Array.isArray(O)&&(O=O.map(Ae=>_4(Ae))),g(t,["safetySettings"],O)}const q=p(e,["tools"]);if(t!==void 0&&q!=null){let O=Ql(q);Array.isArray(O)&&(O=O.map(Ae=>A4(Jl(Ae)))),g(t,["tools"],O)}const X=p(e,["toolConfig"]);if(t!==void 0&&X!=null&&g(t,["toolConfig"],k4(X)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=p(e,["cachedContent"]);t!==void 0&&J!=null&&g(t,["cachedContent"],Oa(n,J));const j=p(e,["responseModalities"]);j!=null&&g(s,["responseModalities"],j);const N=p(e,["mediaResolution"]);N!=null&&g(s,["mediaResolution"],N);const R=p(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],ug(R)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=p(e,["thinkingConfig"]);P!=null&&g(s,["thinkingConfig"],P);const U=p(e,["imageConfig"]);U!=null&&g(s,["imageConfig"],i4(U));const F=p(e,["enableEnhancedCivicAnswers"]);return F!=null&&g(s,["enableEnhancedCivicAnswers"],F),s}function MM(n,e,t){const s={},a=p(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],rs(a));const l=p(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=p(e,["topP"]);u!=null&&g(s,["topP"],u);const h=p(e,["topK"]);h!=null&&g(s,["topK"],h);const m=p(e,["candidateCount"]);m!=null&&g(s,["candidateCount"],m);const f=p(e,["maxOutputTokens"]);f!=null&&g(s,["maxOutputTokens"],f);const y=p(e,["stopSequences"]);y!=null&&g(s,["stopSequences"],y);const _=p(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=p(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const E=p(e,["presencePenalty"]);E!=null&&g(s,["presencePenalty"],E);const M=p(e,["frequencyPenalty"]);M!=null&&g(s,["frequencyPenalty"],M);const A=p(e,["seed"]);A!=null&&g(s,["seed"],A);const C=p(e,["responseMimeType"]);C!=null&&g(s,["responseMimeType"],C);const D=p(e,["responseSchema"]);D!=null&&g(s,["responseSchema"],cg(D));const G=p(e,["responseJsonSchema"]);G!=null&&g(s,["responseJsonSchema"],G);const I=p(e,["routingConfig"]);I!=null&&g(s,["routingConfig"],I);const q=p(e,["modelSelectionConfig"]);q!=null&&g(s,["modelConfig"],q);const X=p(e,["safetySettings"]);if(t!==void 0&&X!=null){let Y=X;Array.isArray(Y)&&(Y=Y.map(oe=>oe)),g(t,["safetySettings"],Y)}const J=p(e,["tools"]);if(t!==void 0&&J!=null){let Y=Ql(J);Array.isArray(Y)&&(Y=Y.map(oe=>hE(Jl(oe)))),g(t,["tools"],Y)}const j=p(e,["toolConfig"]);t!==void 0&&j!=null&&g(t,["toolConfig"],j);const N=p(e,["labels"]);t!==void 0&&N!=null&&g(t,["labels"],N);const R=p(e,["cachedContent"]);t!==void 0&&R!=null&&g(t,["cachedContent"],Oa(n,R));const P=p(e,["responseModalities"]);P!=null&&g(s,["responseModalities"],P);const U=p(e,["mediaResolution"]);U!=null&&g(s,["mediaResolution"],U);const F=p(e,["speechConfig"]);F!=null&&g(s,["speechConfig"],ug(F));const O=p(e,["audioTimestamp"]);O!=null&&g(s,["audioTimestamp"],O);const Ae=p(e,["thinkingConfig"]);Ae!=null&&g(s,["thinkingConfig"],Ae);const Le=p(e,["imageConfig"]);if(Le!=null&&g(s,["imageConfig"],a4(Le)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function ST(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["contents"]);if(a!=null){let u=ii(a);Array.isArray(u)&&(u=u.map(h=>lf(h))),g(t,["contents"],u)}const l=p(e,["config"]);return l!=null&&g(t,["generationConfig"],RM(n,l,t)),t}function ET(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["contents"]);if(a!=null){let u=ii(a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const l=p(e,["config"]);return l!=null&&g(t,["generationConfig"],MM(n,l,t)),t}function wT(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(f=>eM(f))),g(e,["candidates"],m)}const a=p(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=p(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=p(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=p(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function NT(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["candidates"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(y=>y)),g(e,["candidates"],f)}const a=p(n,["createTime"]);a!=null&&g(e,["createTime"],a);const l=p(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const u=p(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const h=p(n,["responseId"]);h!=null&&g(e,["responseId"],h);const m=p(n,["usageMetadata"]);return m!=null&&g(e,["usageMetadata"],m),e}function DM(n,e){const t={};if(p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=p(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=p(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const l=p(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=p(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const h=p(n,["personGeneration"]);e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h);const m=p(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&g(e,["parameters","includeSafetyAttributes"],m);const f=p(n,["includeRaiReason"]);e!==void 0&&f!=null&&g(e,["parameters","includeRaiReason"],f);const y=p(n,["language"]);e!==void 0&&y!=null&&g(e,["parameters","language"],y);const _=p(n,["outputMimeType"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","mimeType"],_);const T=p(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T),p(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=p(n,["imageSize"]);if(e!==void 0&&E!=null&&g(e,["parameters","sampleImageSize"],E),p(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function jM(n,e){const t={},s=p(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=p(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=p(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=p(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=p(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const m=p(n,["seed"]);e!==void 0&&m!=null&&g(e,["parameters","seed"],m);const f=p(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const y=p(n,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const _=p(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=p(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const E=p(n,["language"]);e!==void 0&&E!=null&&g(e,["parameters","language"],E);const M=p(n,["outputMimeType"]);e!==void 0&&M!=null&&g(e,["parameters","outputOptions","mimeType"],M);const A=p(n,["outputCompressionQuality"]);e!==void 0&&A!=null&&g(e,["parameters","outputOptions","compressionQuality"],A);const C=p(n,["addWatermark"]);e!==void 0&&C!=null&&g(e,["parameters","addWatermark"],C);const D=p(n,["labels"]);e!==void 0&&D!=null&&g(e,["labels"],D);const G=p(n,["imageSize"]);e!==void 0&&G!=null&&g(e,["parameters","sampleImageSize"],G);const I=p(n,["enhancePrompt"]);return e!==void 0&&I!=null&&g(e,["parameters","enhancePrompt"],I),t}function PM(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=p(e,["config"]);return l!=null&&DM(l,t),t}function LM(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=p(e,["config"]);return l!=null&&jM(l,t),t}function UM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>JM(u))),g(e,["generatedImages"],l)}const a=p(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],uE(a)),e}function OM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>cf(u))),g(e,["generatedImages"],l)}const a=p(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],dE(a)),e}function VM(n,e){const t={},s=p(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=p(n,["durationSeconds"]);if(e!==void 0&&a!=null&&g(e,["parameters","durationSeconds"],a),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const u=p(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const h=p(n,["personGeneration"]);if(e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h),p(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=p(n,["negativePrompt"]);e!==void 0&&m!=null&&g(e,["parameters","negativePrompt"],m);const f=p(n,["enhancePrompt"]);if(e!==void 0&&f!=null&&g(e,["parameters","enhancePrompt"],f),p(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=p(n,["lastFrame"]);e!==void 0&&y!=null&&g(e,["instances[0]","lastFrame"],uf(y));const _=p(n,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(E=>G4(E))),g(e,["instances[0]","referenceImages"],T)}if(p(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function BM(n,e){const t={},s=p(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=p(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const l=p(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const u=p(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const h=p(n,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const m=p(n,["aspectRatio"]);e!==void 0&&m!=null&&g(e,["parameters","aspectRatio"],m);const f=p(n,["resolution"]);e!==void 0&&f!=null&&g(e,["parameters","resolution"],f);const y=p(n,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const _=p(n,["pubsubTopic"]);e!==void 0&&_!=null&&g(e,["parameters","pubsubTopic"],_);const T=p(n,["negativePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","negativePrompt"],T);const E=p(n,["enhancePrompt"]);e!==void 0&&E!=null&&g(e,["parameters","enhancePrompt"],E);const M=p(n,["generateAudio"]);e!==void 0&&M!=null&&g(e,["parameters","generateAudio"],M);const A=p(n,["lastFrame"]);e!==void 0&&A!=null&&g(e,["instances[0]","lastFrame"],Ni(A));const C=p(n,["referenceImages"]);if(e!==void 0&&C!=null){let I=C;Array.isArray(I)&&(I=I.map(q=>F4(q))),g(e,["instances[0]","referenceImages"],I)}const D=p(n,["mask"]);e!==void 0&&D!=null&&g(e,["instances[0]","mask"],B4(D));const G=p(n,["compressionQuality"]);return e!==void 0&&G!=null&&g(e,["parameters","compressionQuality"],G),t}function GM(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const s=p(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=p(n,["done"]);a!=null&&g(e,["done"],a);const l=p(n,["error"]);l!=null&&g(e,["error"],l);const u=p(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],qM(u)),e}function FM(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const s=p(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=p(n,["done"]);a!=null&&g(e,["done"],a);const l=p(n,["error"]);l!=null&&g(e,["error"],l);const u=p(n,["response"]);return u!=null&&g(e,["response"],KM(u)),e}function zM(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=p(e,["image"]);l!=null&&g(t,["instances[0]","image"],uf(l));const u=p(e,["video"]);u!=null&&g(t,["instances[0]","video"],fE(u));const h=p(e,["source"]);h!=null&&$M(h,t);const m=p(e,["config"]);return m!=null&&VM(m,t),t}function HM(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=p(e,["image"]);l!=null&&g(t,["instances[0]","image"],Ni(l));const u=p(e,["video"]);u!=null&&g(t,["instances[0]","video"],mE(u));const h=p(e,["source"]);h!=null&&YM(h,t);const m=p(e,["config"]);return m!=null&&BM(m,t),t}function qM(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>WM(u))),g(e,["generatedVideos"],l)}const s=p(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=p(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function KM(n){const e={},t=p(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>XM(u))),g(e,["generatedVideos"],l)}const s=p(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=p(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function $M(n,e){const t={},s=p(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=p(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],uf(a));const l=p(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],fE(l)),t}function YM(n,e){const t={},s=p(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=p(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Ni(a));const l=p(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],mE(l)),t}function JM(n){const e={},t=p(n,["_self"]);t!=null&&g(e,["image"],r4(t));const s=p(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=p(n,["_self"]);return a!=null&&g(e,["safetyAttributes"],uE(a)),e}function cf(n){const e={},t=p(n,["_self"]);t!=null&&g(e,["image"],cE(t));const s=p(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=p(n,["_self"]);a!=null&&g(e,["safetyAttributes"],dE(a));const l=p(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function QM(n){const e={},t=p(n,["_self"]);t!=null&&g(e,["mask"],cE(t));const s=p(n,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["labels"],a)}return e}function WM(n){const e={},t=p(n,["video"]);return t!=null&&g(e,["video"],O4(t)),e}function XM(n){const e={},t=p(n,["_self"]);return t!=null&&g(e,["video"],V4(t)),e}function ZM(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=p(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=p(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=p(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=p(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=p(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const m=p(n,["logprobs"]);m!=null&&g(e,["logprobs"],m);const f=p(n,["maxOutputTokens"]);f!=null&&g(e,["maxOutputTokens"],f);const y=p(n,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const _=p(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=p(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const E=p(n,["responseMimeType"]);E!=null&&g(e,["responseMimeType"],E);const M=p(n,["responseModalities"]);M!=null&&g(e,["responseModalities"],M);const A=p(n,["responseSchema"]);A!=null&&g(e,["responseSchema"],A);const C=p(n,["routingConfig"]);C!=null&&g(e,["routingConfig"],C);const D=p(n,["seed"]);D!=null&&g(e,["seed"],D);const G=p(n,["speechConfig"]);G!=null&&g(e,["speechConfig"],G);const I=p(n,["stopSequences"]);I!=null&&g(e,["stopSequences"],I);const q=p(n,["temperature"]);q!=null&&g(e,["temperature"],q);const X=p(n,["thinkingConfig"]);X!=null&&g(e,["thinkingConfig"],X);const J=p(n,["topK"]);J!=null&&g(e,["topK"],J);const j=p(n,["topP"]);if(j!=null&&g(e,["topP"],j),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function e4(n,e){const t={},s=p(e,["model"]);return s!=null&&g(t,["_url","name"],Rt(n,s)),t}function t4(n,e){const t={},s=p(e,["model"]);return s!=null&&g(t,["_url","name"],Rt(n,s)),t}function n4(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function s4(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function i4(n){const e={},t=p(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=p(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),p(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(p(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function a4(n){const e={},t=p(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=p(n,["imageSize"]);s!=null&&g(e,["imageSize"],s);const a=p(n,["personGeneration"]);a!=null&&g(e,["personGeneration"],a);const l=p(n,["outputMimeType"]);l!=null&&g(e,["imageOutputOptions","mimeType"],l);const u=p(n,["outputCompressionQuality"]);return u!=null&&g(e,["imageOutputOptions","compressionQuality"],u),e}function r4(n){const e={},t=p(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],Vr(t));const s=p(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function cE(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=p(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],Vr(s));const a=p(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function uf(n){const e={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=p(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],Vr(t));const s=p(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Ni(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=p(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Vr(s));const a=p(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function o4(n,e,t){const s={},a=p(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const l=p(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=p(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=p(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],nE(n,h)),s}function l4(n,e,t){const s={},a=p(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const l=p(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=p(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=p(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],nE(n,h)),s}function c4(n,e){const t={},s=p(e,["config"]);return s!=null&&o4(n,s,t),t}function u4(n,e){const t={},s=p(e,["config"]);return s!=null&&l4(n,s,t),t}function d4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(n,["_self"]);if(a!=null){let l=sE(a);Array.isArray(l)&&(l=l.map(u=>gp(u))),g(e,["models"],l)}return e}function h4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(n,["_self"]);if(a!=null){let l=sE(a);Array.isArray(l)&&(l=l.map(u=>xp(u))),g(e,["models"],l)}return e}function f4(n){const e={},t=p(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=p(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const a=p(n,["maskDilation"]);return a!=null&&g(e,["dilation"],a),e}function gp(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const s=p(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=p(n,["description"]);a!=null&&g(e,["description"],a);const l=p(n,["version"]);l!=null&&g(e,["version"],l);const u=p(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],C4(u));const h=p(n,["inputTokenLimit"]);h!=null&&g(e,["inputTokenLimit"],h);const m=p(n,["outputTokenLimit"]);m!=null&&g(e,["outputTokenLimit"],m);const f=p(n,["supportedGenerationMethods"]);f!=null&&g(e,["supportedActions"],f);const y=p(n,["temperature"]);y!=null&&g(e,["temperature"],y);const _=p(n,["maxTemperature"]);_!=null&&g(e,["maxTemperature"],_);const T=p(n,["topP"]);T!=null&&g(e,["topP"],T);const E=p(n,["topK"]);E!=null&&g(e,["topK"],E);const M=p(n,["thinking"]);return M!=null&&g(e,["thinking"],M),e}function xp(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const s=p(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=p(n,["description"]);a!=null&&g(e,["description"],a);const l=p(n,["versionId"]);l!=null&&g(e,["version"],l);const u=p(n,["deployedModels"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>NM(T))),g(e,["endpoints"],_)}const h=p(n,["labels"]);h!=null&&g(e,["labels"],h);const m=p(n,["_self"]);m!=null&&g(e,["tunedModelInfo"],I4(m));const f=p(n,["defaultCheckpointId"]);f!=null&&g(e,["defaultCheckpointId"],f);const y=p(n,["checkpoints"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(T=>T)),g(e,["checkpoints"],_)}return e}function m4(n){const e={},t=p(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=p(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=p(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=p(n,["fileData"]);l!=null&&g(e,["fileData"],kM(l));const u=p(n,["functionCall"]);u!=null&&g(e,["functionCall"],AM(u));const h=p(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const m=p(n,["inlineData"]);m!=null&&g(e,["inlineData"],ZR(m));const f=p(n,["text"]);f!=null&&g(e,["text"],f);const y=p(n,["thought"]);y!=null&&g(e,["thought"],y);const _=p(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=p(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function p4(n){const e={},t=p(n,["productImage"]);return t!=null&&g(e,["image"],Ni(t)),e}function g4(n,e){const t={},s=p(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=p(n,["baseSteps"]);e!==void 0&&a!=null&&g(e,["parameters","baseSteps"],a);const l=p(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const u=p(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const h=p(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const m=p(n,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const f=p(n,["addWatermark"]);e!==void 0&&f!=null&&g(e,["parameters","addWatermark"],f);const y=p(n,["outputMimeType"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","mimeType"],y);const _=p(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","compressionQuality"],_);const T=p(n,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const E=p(n,["labels"]);return e!==void 0&&E!=null&&g(e,["labels"],E),t}function x4(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["source"]);a!=null&&b4(a,t);const l=p(e,["config"]);return l!=null&&g4(l,t),t}function y4(n){const e={},t=p(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>cf(a))),g(e,["generatedImages"],s)}return e}function b4(n,e){const t={},s=p(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=p(n,["personImage"]);e!==void 0&&a!=null&&g(e,["instances[0]","personImage","image"],Ni(a));const l=p(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>p4(h))),g(e,["instances[0]","productImages"],u)}return t}function v4(n){const e={},t=p(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],Ni(t));const s=p(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const a=p(n,["referenceType"]);a!=null&&g(e,["referenceType"],a);const l=p(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],f4(l));const u=p(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],rM(u));const h=p(n,["styleImageConfig"]);h!=null&&g(e,["styleImageConfig"],h);const m=p(n,["subjectImageConfig"]);return m!=null&&g(e,["subjectImageConfig"],m),e}function uE(n){const e={},t=p(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=p(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=p(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function dE(n){const e={},t=p(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=p(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=p(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function _4(n){const e={},t=p(n,["category"]);if(t!=null&&g(e,["category"],t),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=p(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function T4(n){const e={},t=p(n,["image"]);return t!=null&&g(e,["image"],Ni(t)),e}function S4(n,e){const t={},s=p(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const a=p(n,["maxPredictions"]);e!==void 0&&a!=null&&g(e,["parameters","maxPredictions"],a);const l=p(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const u=p(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const h=p(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&g(e,["parameters","binaryColorThreshold"],h);const m=p(n,["labels"]);return e!==void 0&&m!=null&&g(e,["labels"],m),t}function E4(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["source"]);a!=null&&N4(a,t);const l=p(e,["config"]);return l!=null&&S4(l,t),t}function w4(n){const e={},t=p(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>QM(a))),g(e,["generatedMasks"],s)}return e}function N4(n,e){const t={},s=p(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=p(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Ni(a));const l=p(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],T4(l)),t}function k4(n){const e={},t=p(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=p(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],CM(s)),e}function A4(n){const e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=p(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=p(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=p(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=p(n,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>_)),g(e,["functionDeclarations"],y)}const u=p(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],n4(u));const h=p(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],s4(h));const m=p(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const f=p(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function hE(n){const e={},t=p(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=p(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=p(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const l=p(n,["enterpriseWebSearch"]);l!=null&&g(e,["enterpriseWebSearch"],l);const u=p(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>IM(T))),g(e,["functionDeclarations"],_)}const h=p(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const m=p(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const f=p(n,["googleSearchRetrieval"]);f!=null&&g(e,["googleSearchRetrieval"],f);const y=p(n,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function C4(n){const e={},t=p(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=p(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=p(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function I4(n){const e={},t=p(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=p(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=p(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function R4(n,e){const t={},s=p(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=p(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=p(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function M4(n,e){const t={},s=p(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=p(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=p(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function D4(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","name"],Rt(n,s));const a=p(e,["config"]);return a!=null&&R4(a,t),t}function j4(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["config"]);return a!=null&&M4(a,t),t}function P4(n,e){const t={},s=p(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=p(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&g(e,["parameters","safetySetting"],a);const l=p(n,["personGeneration"]);e!==void 0&&l!=null&&g(e,["parameters","personGeneration"],l);const u=p(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const h=p(n,["outputMimeType"]);e!==void 0&&h!=null&&g(e,["parameters","outputOptions","mimeType"],h);const m=p(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&g(e,["parameters","outputOptions","compressionQuality"],m);const f=p(n,["enhanceInputImage"]);e!==void 0&&f!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],f);const y=p(n,["imagePreservationFactor"]);e!==void 0&&y!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const _=p(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=p(n,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const E=p(n,["mode"]);return e!==void 0&&E!=null&&g(e,["parameters","mode"],E),t}function L4(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=p(e,["image"]);a!=null&&g(t,["instances[0]","image"],Ni(a));const l=p(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=p(e,["config"]);return u!=null&&P4(u,t),t}function U4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>cf(l))),g(e,["generatedImages"],a)}return e}function O4(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["uri"],t);const s=p(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],Vr(s));const a=p(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function V4(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=p(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Vr(s));const a=p(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function B4(n){const e={},t=p(n,["image"]);t!=null&&g(e,["_self"],Ni(t));const s=p(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function G4(n){const e={},t=p(n,["image"]);t!=null&&g(e,["image"],uf(t));const s=p(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function F4(n){const e={},t=p(n,["image"]);t!=null&&g(e,["image"],Ni(t));const s=p(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function fE(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["uri"],t);const s=p(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],Vr(s));const a=p(n,["mimeType"]);return a!=null&&g(e,["encoding"],a),e}function mE(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=p(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Vr(s));const a=p(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z4(n,e){const t={},s=p(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["displayName"],s),t}function H4(n){const e={},t=p(n,["config"]);return t!=null&&z4(t,e),e}function q4(n,e){const t={},s=p(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function K4(n){const e={},t=p(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=p(n,["config"]);return s!=null&&q4(s,e),e}function $4(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function Y4(n,e){const t={},s=p(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["customMetadata"],l)}const a=p(n,["chunkingConfig"]);return e!==void 0&&a!=null&&g(e,["chunkingConfig"],a),t}function J4(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const s=p(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=p(n,["done"]);a!=null&&g(e,["done"],a);const l=p(n,["error"]);l!=null&&g(e,["error"],l);const u=p(n,["response"]);return u!=null&&g(e,["response"],W4(u)),e}function Q4(n){const e={},t=p(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=p(n,["fileName"]);s!=null&&g(e,["fileName"],s);const a=p(n,["config"]);return a!=null&&Y4(a,e),e}function W4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["parent"]);s!=null&&g(e,["parent"],s);const a=p(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function X4(n,e){const t={},s=p(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function Z4(n){const e={},t=p(n,["config"]);return t!=null&&X4(t,e),e}function e5(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(n,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["fileSearchStores"],l)}return e}function pE(n,e){const t={},s=p(n,["mimeType"]);e!==void 0&&s!=null&&g(e,["mimeType"],s);const a=p(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=p(n,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>m)),g(e,["customMetadata"],h)}const u=p(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function t5(n){const e={},t=p(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=p(n,["config"]);return s!=null&&pE(s,e),e}function n5(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s5="Content-Type",i5="X-Server-Timeout",a5="User-Agent",yp="x-goog-api-client",r5="1.35.0",o5=`google-genai-sdk/${r5}`,l5="v1beta1",c5="v1beta";class u5{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:l5,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:c5,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const a=[this.getRequestUrlInternal(t)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,h]of Object.entries(e.queryParams))a.searchParams.append(u,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(t))typeof l=="object"?s[a]=Object.assign(Object.assign({},s[a]),l):l!==void 0&&(s[a]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,a){if(t&&t.timeout||a){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const h=setTimeout(()=>l.abort(),t.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&d5(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await kT(a),new fp(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await kT(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return Ti(this,arguments,function*(){var s;const a=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let u="";const h="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:y}=yield rt(a.read());if(f){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=l.decode(y,{stream:!0});try{const M=JSON.parse(_);if("error"in M){const A=JSON.parse(JSON.stringify(M.error)),C=A.status,D=A.code,G=`got status: ${C}. ${JSON.stringify(M)}`;if(D>=400&&D<600)throw new of({message:G,status:D})}}catch(M){if(M.name==="ApiError")throw M}u+=_;let T=-1,E=0;for(;;){T=-1,E=0;for(const C of m){const D=u.indexOf(C);D!==-1&&(T===-1||D<T)&&(T=D,E=C.length)}if(T===-1)break;const M=u.substring(0,T);u=u.substring(T+E);const A=M.trim();if(A.startsWith(h)){const C=A.substring(h.length).trim();try{const D=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield rt(new fp(D))}catch(D){throw new Error(`exception parsing stream chunk ${C}. ${D}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=o5+" "+this.clientOptions.userAgentExtra;return e[a5]=t,e[yp]=t,e[s5]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))s.append(a,l);e.timeout&&e.timeout>0&&s.append(i5,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const a={};t!=null&&(a.mimeType=t.mimeType,a.name=t.name,a.displayName=t.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);a.sizeBytes=String(u.size);const h=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const m={file:a},f=this.getFileName(e),y=De("upload/v1beta/files",m._url),_=await this.fetchUploadUrl(y,a.sizeBytes,a.mimeType,f,m,t==null?void 0:t.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,t,s){var a;const l=this.clientOptions.uploader,u=await l.stat(t),h=String(u.size),m=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:u.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(t),_={};s!=null&&pE(s,_);const T=await this.fetchUploadUrl(f,h,m,y,_,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,a,l,u){var h;let m={};u?m=u:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const f=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:m});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(h=f==null?void 0:f.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function kT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const a=JSON.stringify(s);throw t>=400&&t<600?new of({message:a,status:t}):new Error(a)}}function d5(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const h=Object.assign({},l);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const f=u[m],y=h[m];f&&typeof f=="object"&&!Array.isArray(f)&&y&&typeof y=="object"&&!Array.isArray(y)?h[m]=s(y,f):(y&&f&&typeof y!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof y}, New type: ${typeof f}. Overwriting.`),h[m]=f)}return h}const a=s(t,e);n.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h5="mcp_used/unknown";let f5=!1;function gE(n){for(const e of n)if(m5(e)||typeof e=="object"&&"inputSchema"in e)return!0;return f5}function xE(n){var e;const t=(e=n[yp])!==null&&e!==void 0?e:"";n[yp]=(t+` ${h5}`).trimStart()}function m5(n){return n!==null&&typeof n=="object"&&n instanceof hg}function p5(n){return Ti(this,arguments,function*(t,s=100){let a,l=0;for(;l<s;){const u=yield rt(t.listTools({cursor:a}));for(const h of u.tools)yield yield rt(h),l++;if(!u.nextCursor)break;a=u.nextCursor}})}class hg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new hg(e,t)}async initialize(){var e,t,s,a;if(this.mcpTools.length>0)return;const l={},u=[];for(const y of this.mcpClients)try{for(var h=!0,m=(t=void 0,Si(p5(y))),f;f=await m.next(),e=f.done,!e;h=!0){a=f.value,h=!1;const _=a;u.push(_);const T=_.name;if(l[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);l[T]=y}}catch(_){t={error:_}}finally{try{!h&&!e&&(s=m.return)&&await s.call(m)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),$C(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await a.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function g5(n,e,t){const s=new VC;let a;t.data instanceof Blob?a=JSON.parse(await t.data.text()):a=JSON.parse(t.data),Object.assign(s,a),e(s)}class x5{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=v5(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),m=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let f=()=>{};const y=new Promise(I=>{f=I}),_=e.callbacks,T=function(){f({})},E=this.apiClient,M={onopen:T,onmessage:I=>{g5(E,_.onmessage,I)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(I){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(I){}},A=this.webSocketFactory.create(m,b5(u),M);A.connect(),await y;const G={setup:{model:Rt(this.apiClient,e.model)}};return A.send(JSON.stringify(G)),new y5(A,this.apiClient)}}class y5{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=HR(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=zR(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Cl.PLAY)}pause(){this.sendPlaybackControl(Cl.PAUSE)}stop(){this.sendPlaybackControl(Cl.STOP)}resetContext(){this.sendPlaybackControl(Cl.RESET_CONTEXT)}close(){this.conn.close()}}function b5(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function v5(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _5="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function T5(n,e,t){const s=new OC;let a;t.data instanceof Blob?a=await t.data.text():t.data instanceof ArrayBuffer?a=new TextDecoder().decode(t.data):a=t.data;const l=JSON.parse(a);if(n.isVertexAI()){const u=$R(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class S5{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new x5(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,a,l,u,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let y;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&gE(e.config.tools)&&xE(_);const T=k5(_);if(this.apiClient.isVertexAI())y=`${m}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,y);else{const R=this.apiClient.getApiKey();let P="BidiGenerateContent",U="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",U="access_token"),y=`${m}/ws/google.ai.generativelanguage.${f}.GenerativeService.${P}?${U}=${R}`}let E=()=>{};const M=new Promise(R=>{E=R}),A=e.callbacks,C=function(){var R;(R=A==null?void 0:A.onopen)===null||R===void 0||R.call(A),E({})},D=this.apiClient,G={onopen:C,onmessage:R=>{T5(D,A.onmessage,R)},onerror:(t=A==null?void 0:A.onerror)!==null&&t!==void 0?t:function(R){},onclose:(s=A==null?void 0:A.onclose)!==null&&s!==void 0?s:function(R){}},I=this.webSocketFactory.create(y,N5(T),G);I.connect(),await M;let q=Rt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&q.startsWith("publishers/")){const R=this.apiClient.getProject(),P=this.apiClient.getLocation();q=`projects/${R}/locations/${P}/`+q}let X={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[kh.AUDIO]}:e.config.responseModalities=[kh.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const J=(h=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[],j=[];for(const R of J)if(this.isCallableTool(R)){const P=R;j.push(await P.tool())}else j.push(R);j.length>0&&(e.config.tools=j);const N={model:q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=FR(this.apiClient,N):X=GR(this.apiClient,N),delete X.config,I.send(JSON.stringify(X)),new w5(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const E5={turnComplete:!0};class w5{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=ii(t.turns),e.isVertexAI()||(s=s.map(a=>lf(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(_5)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},E5),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:KR(e)}:t={realtimeInput:qR(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function N5(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function k5(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AT=10;function CT(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ml(u)){a=!0;break}if(!a)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Ml(n){return"callTool"in n&&typeof n.callTool=="function"}function A5(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(a=>Ml(a)))!==null&&s!==void 0?s:!1}function IT(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,a)=>{if(Ml(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(a)}),t}function RT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C5 extends Ua{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,a,l,u,h;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!A5(t)||CT(t.config))return await this.generateContentInternal(m);const f=IT(t);if(f.length>0){const A=f.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let y,_;const T=ii(m.contents),E=(l=(a=(s=m.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:AT;let M=0;for(;M<E&&(y=await this.generateContentInternal(m),!(!y.functionCalls||y.functionCalls.length===0));){const A=y.candidates[0].content,C=[];for(const D of(h=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[])if(Ml(D)){const I=await D.callTool(y.functionCalls);C.push(...I)}M++,_={role:"user",parts:C},m.contents=ii(m.contents),m.contents.push(A),m.contents.push(_),RT(m.config)&&(T.push(A),T.push(_))}return RT(m.config)&&(y.automaticFunctionCallingHistory=T),y},this.generateContentStream=async t=>{var s,a,l,u,h;if(this.maybeMoveToResponseJsonSchem(t),CT(t.config)){const _=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(_)}const m=IT(t);if(m.length>0){const _=m.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(l=(a=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,y=(h=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(f&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var a;let l;const u=[];if(s!=null&&s.generatedImages)for(const m of s.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((a=m==null?void 0:m.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:u.push(m);let h;return l?h={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new jo(Ia.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const a={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async t=>{var s,a,l,u,h,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((a=t.video)===null||a===void 0)&&a.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((m=(h=t.source)===null||h===void 0?void 0:h.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,a;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async m=>Ml(m)?await m.tool():m)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(h.config.tools=u,e.config&&e.config.tools&&gE(e.config.tools)){const m=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let f=Object.assign({},m);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),xE(f),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return h}async initAfcToolsMap(e){var t,s,a;const l=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Ml(u)){const h=u,m=await h.tool();for(const f of(a=m.functionDeclarations)!==null&&a!==void 0?a:[]){if(!f.name)throw new Error("Function declaration name is required.");if(l.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);l.set(f.name,h)}}return l}async processAfcStream(e){var t,s,a;const l=(a=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:AT;let u=!1,h=0;const m=await this.initAfcToolsMap(e);return(function(f,y,_){return Ti(this,arguments,function*(){for(var T,E,M,A,C,D;h<l;){u&&(h++,u=!1);const X=yield rt(f.processParamsMaybeAddMcpUsage(_)),J=yield rt(f.generateContentStreamInternal(X)),j=[],N=[];try{for(var G=!0,I=(E=void 0,Si(J)),q;q=yield rt(I.next()),T=q.done,!T;G=!0){A=q.value,G=!1;const R=A;if(yield yield rt(R),R.candidates&&(!((C=R.candidates[0])===null||C===void 0)&&C.content)){N.push(R.candidates[0].content);for(const P of(D=R.candidates[0].content.parts)!==null&&D!==void 0?D:[])if(h<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(P.functionCall.name)){const U=yield rt(y.get(P.functionCall.name).callTool([P.functionCall]));j.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(R){E={error:R}}finally{try{!G&&!T&&(M=I.return)&&(yield rt(M.call(I)))}finally{if(E)throw E.error}}if(j.length>0){u=!0;const R=new eu;R.candidates=[{content:{role:"user",parts:j}}],yield yield rt(R);const P=[];P.push(...N),P.push({role:"user",parts:j});const U=ii(_.contents).concat(P);_.contents=U}else break}})})(this,m,e)}async generateContentInternal(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=ET(this.apiClient,e);return h=De("{model}:generateContent",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=NT(y),T=new eu;return Object.assign(T,_),T})}else{const f=ST(this.apiClient,e);return h=De("{model}:generateContent",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=wT(y),T=new eu;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=ET(this.apiClient,e);return h=De("{model}:streamGenerateContent?alt=sse",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(_){return Ti(this,arguments,function*(){var T,E,M,A;try{for(var C=!0,D=Si(_),G;G=yield rt(D.next()),T=G.done,!T;C=!0){A=G.value,C=!1;const I=A,q=NT(yield rt(I.json()));q.sdkHttpResponse={headers:I.headers};const X=new eu;Object.assign(X,q),yield yield rt(X)}}catch(I){E={error:I}}finally{try{!C&&!T&&(M=D.return)&&(yield rt(M.call(D)))}finally{if(E)throw E.error}}})})}else{const f=ST(this.apiClient,e);return h=De("{model}:streamGenerateContent?alt=sse",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(_){return Ti(this,arguments,function*(){var T,E,M,A;try{for(var C=!0,D=Si(_),G;G=yield rt(D.next()),T=G.done,!T;C=!0){A=G.value,C=!1;const I=A,q=wT(yield rt(I.json()));q.sdkHttpResponse={headers:I.headers};const X=new eu;Object.assign(X,q),yield yield rt(X)}}catch(I){E={error:I}}finally{try{!C&&!T&&(M=D.return)&&(yield rt(M.call(D)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=SM(this.apiClient,e);return h=De("{model}:predict",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=wM(y),T=new rT;return Object.assign(T,_),T})}else{const f=TM(this.apiClient,e);return h=De("{model}:batchEmbedContents",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=EM(y),T=new rT;return Object.assign(T,_),T})}}async generateImagesInternal(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=LM(this.apiClient,e);return h=De("{model}:predict",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=OM(y),T=new oT;return Object.assign(T,_),T})}else{const f=PM(this.apiClient,e);return h=De("{model}:predict",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=UM(y),T=new oT;return Object.assign(T,_),T})}}async editImageInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=yM(this.apiClient,e);return l=De("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:m.headers},y})),a.then(m=>{const f=bM(m),y=new kC;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=L4(this.apiClient,e);return l=De("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:m.headers},y})),a.then(m=>{const f=U4(m),y=new AC;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=x4(this.apiClient,e);return l=De("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const f=y4(m),y=new CC;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=E4(this.apiClient,e);return l=De("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const f=w4(m),y=new IC;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=t4(this.apiClient,e);return h=De("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>xp(y))}else{const f=e4(this.apiClient,e);return h=De("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>gp(y))}}async listInternal(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=u4(this.apiClient,e);return h=De("{models_url}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=h4(y),T=new lT;return Object.assign(T,_),T})}else{const f=c4(this.apiClient,e);return h=De("{models_url}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=d4(y),T=new lT;return Object.assign(T,_),T})}}async update(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=j4(this.apiClient,e);return h=De("{model}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>xp(y))}else{const f=D4(this.apiClient,e);return h=De("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>gp(y))}}async delete(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=mM(this.apiClient,e);return h=De("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=gM(y),T=new cT;return Object.assign(T,_),T})}else{const f=fM(this.apiClient,e);return h=De("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=pM(y),T=new cT;return Object.assign(T,_),T})}}async countTokens(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=uM(this.apiClient,e);return h=De("{model}:countTokens",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=hM(y),T=new uT;return Object.assign(T,_),T})}else{const f=cM(this.apiClient,e);return h=De("{model}:countTokens",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=dM(y),T=new uT;return Object.assign(T,_),T})}}async computeTokens(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=nM(this.apiClient,e);return l=De("{model}:computeTokens",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:m.headers},y})),a.then(m=>{const f=sM(m),y=new RC;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=HM(this.apiClient,e);return h=De("{model}:predictLongRunning",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>{const _=FM(y),T=new Ah;return Object.assign(T,_),T})}else{const f=zM(this.apiClient,e);return h=De("{model}:predictLongRunning",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>{const _=GM(y),T=new Ah;return Object.assign(T,_),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class I5 extends Ua{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=_C(e);return h=De("{operationName}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u}else{const f=vC(e);return h=De("{operationName}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=fC(e);return l=De("{resourceName}:fetchPredictOperation",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R5(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function M5(n){const e={},t=p(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>G5(l))),g(e,["parts"],a)}const s=p(n,["role"]);return s!=null&&g(e,["role"],s),e}function D5(n,e,t){const s={},a=p(e,["expireTime"]);t!==void 0&&a!=null&&g(t,["expireTime"],a);const l=p(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const u=p(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const h=p(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&g(t,["bidiGenerateContentSetup"],B5(n,h));const m=p(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&g(t,["fieldMask"],m),s}function j5(n,e){const t={},s=p(e,["config"]);return s!=null&&g(t,["config"],D5(n,s,t)),t}function P5(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=p(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function L5(n){const e={},t=p(n,["id"]);t!=null&&g(e,["id"],t);const s=p(n,["args"]);s!=null&&g(e,["args"],s);const a=p(n,["name"]);if(a!=null&&g(e,["name"],a),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function U5(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function O5(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function V5(n,e){const t={},s=p(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=p(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=p(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=p(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=p(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const m=p(n,["maxOutputTokens"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","maxOutputTokens"],m);const f=p(n,["mediaResolution"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","mediaResolution"],f);const y=p(n,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const _=p(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],dg(_));const T=p(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const E=p(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],E);const M=p(n,["systemInstruction"]);e!==void 0&&M!=null&&g(e,["setup","systemInstruction"],M5(rs(M)));const A=p(n,["tools"]);if(e!==void 0&&A!=null){let J=Ql(A);Array.isArray(J)&&(J=J.map(j=>z5(Jl(j)))),g(e,["setup","tools"],J)}const C=p(n,["sessionResumption"]);e!==void 0&&C!=null&&g(e,["setup","sessionResumption"],F5(C));const D=p(n,["inputAudioTranscription"]);e!==void 0&&D!=null&&g(e,["setup","inputAudioTranscription"],D);const G=p(n,["outputAudioTranscription"]);e!==void 0&&G!=null&&g(e,["setup","outputAudioTranscription"],G);const I=p(n,["realtimeInputConfig"]);e!==void 0&&I!=null&&g(e,["setup","realtimeInputConfig"],I);const q=p(n,["contextWindowCompression"]);e!==void 0&&q!=null&&g(e,["setup","contextWindowCompression"],q);const X=p(n,["proactivity"]);if(e!==void 0&&X!=null&&g(e,["setup","proactivity"],X),p(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function B5(n,e){const t={},s=p(e,["model"]);s!=null&&g(t,["setup","model"],Rt(n,s));const a=p(e,["config"]);return a!=null&&g(t,["config"],V5(a,t)),t}function G5(n){const e={},t=p(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=p(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=p(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=p(n,["fileData"]);l!=null&&g(e,["fileData"],P5(l));const u=p(n,["functionCall"]);u!=null&&g(e,["functionCall"],L5(u));const h=p(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const m=p(n,["inlineData"]);m!=null&&g(e,["inlineData"],R5(m));const f=p(n,["text"]);f!=null&&g(e,["text"],f);const y=p(n,["thought"]);y!=null&&g(e,["thought"],y);const _=p(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=p(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function F5(n){const e={},t=p(n,["handle"]);if(t!=null&&g(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function z5(n){const e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=p(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=p(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=p(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=p(n,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>_)),g(e,["functionDeclarations"],y)}const u=p(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],U5(u));const h=p(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],O5(h));const m=p(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const f=p(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H5(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(l=>`${t}.${l}`);e.push(...a)}else e.push(t)}return e.join(",")}function q5(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const a=n.fieldMask;if(t){const l=H5(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(f=>u.includes(f)?`generationConfig.${f}`:f));const m=[];l&&m.push(l),h.length>0&&m.push(...h),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?n.fieldMask=a.join(","):delete n.fieldMask;return n}class K5 extends Ua{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=j5(this.apiClient,e);l=De("auth_tokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query;const m=q5(h,e.config);return a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $5(n,e){const t={},s=p(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function Y5(n){const e={},t=p(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=p(n,["config"]);return s!=null&&$5(s,e),e}function J5(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function Q5(n,e){const t={},s=p(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function W5(n){const e={},t=p(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const s=p(n,["config"]);return s!=null&&Q5(s,e),e}function X5(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=p(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(n,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z5 extends Ua{constructor(e){super(),this.apiClient=e,this.list=async t=>new jo(Ia.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=J5(e);return l=De("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Y5(e);a=De("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=W5(e);return l=De("{parent}/documents",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const f=X5(m),y=new MC;return Object.assign(y,f),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eD extends Ua{constructor(e,t=new Z5(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new jo(Ia.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=H4(e);return l=De("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=$4(e);return l=De("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=K4(e);a=De("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Z4(e);return l=De("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const f=e5(m),y=new DC;return Object.assign(y,f),y})}}async uploadToFileSearchStoreInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=t5(e);return l=De("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const f=n5(m),y=new jC;return Object.assign(y,f),y})}}async importFile(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Q4(e);return l=De("{file_search_store_name}:importFile",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const f=J4(m),y=new rg;return Object.assign(y,f),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let yE=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return yE=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const tD=()=>yE();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const vp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ri extends Error{}class ms extends ri{constructor(e,t,s,a){super(`${ms.makeMessage(e,t,s)}`),this.status=e,this.headers=a,this.error=t}static makeMessage(e,t,s){const a=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,t,s,a){if(!e||!a)return new df({message:s,cause:vp(t)});const l=t;return e===400?new vE(e,l,s,a):e===401?new _E(e,l,s,a):e===403?new TE(e,l,s,a):e===404?new SE(e,l,s,a):e===409?new EE(e,l,s,a):e===422?new wE(e,l,s,a):e===429?new NE(e,l,s,a):e>=500?new kE(e,l,s,a):new ms(e,l,s,a)}}class _p extends ms{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class df extends ms{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class bE extends df{constructor({message:e}={}){super({message:e??"Request timed out."})}}class vE extends ms{}class _E extends ms{}class TE extends ms{}class SE extends ms{}class EE extends ms{}class wE extends ms{}class NE extends ms{}class kE extends ms{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nD=/^[a-z][a-z0-9+.-]*:/i,sD=n=>nD.test(n);let Tp=n=>(Tp=Array.isArray,Tp(n));const iD=Tp;let aD=iD;const MT=aD;function rD(n){if(!n)return!0;for(const e in n)return!1;return!0}function oD(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const lD=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ri(`${n} must be an integer`);if(e<0)throw new ri(`${n} must be a positive integer`);return e},cD=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uD=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const El="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dD(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const hD=()=>{var n,e,t,s,a;const l=dD();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":El,"X-Stainless-OS":jT(Deno.build.os),"X-Stainless-Arch":DT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":El,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":El,"X-Stainless-OS":jT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":DT((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const u=fD();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":El,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":El,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function fD(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const a=s[1]||0,l=s[2]||0,u=s[3]||0;return{browser:e,version:`${a}.${l}.${u}`}}}return null}const DT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",jT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Xd;const mD=()=>Xd??(Xd=hD());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pD(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function AE(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function gD(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return AE({start(){},async pull(t){const{done:s,value:a}=await e.next();s?t.close():t.enqueue(a)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function CE(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function xD(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),a=s.cancel();s.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yD=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IE=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function q0(n,e,t){return IE(),new File(n,e??"unknown_file",t)}function bD(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const vD=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RE=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",_D=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&RE(n),TD=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function SD(n,e,t){if(IE(),n=await n,_D(n))return n instanceof File?n:q0([await n.arrayBuffer()],n.name);if(TD(n)){const a=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),q0(await Sp(a),e,t)}const s=await Sp(n);if(e||(e=bD(n)),!(t!=null&&t.type)){const a=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(t=Object.assign(Object.assign({},t),{type:a}))}return q0(s,e,t)}async function Sp(n){var e,t,s,a,l;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(RE(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(vD(n))try{for(var h=!0,m=Si(n),f;f=await m.next(),e=f.done,!e;h=!0){a=f.value,h=!1;const y=a;u.push(...await Sp(y))}}catch(y){t={error:y}}finally{try{!h&&!e&&(s=m.return)&&await s.call(m)}finally{if(t)throw t.error}}else{const y=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${y?`; constructor: ${y}`:""}${ED(n)}`)}return u}function ED(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ME{constructor(e){this._client=e}}ME._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DE(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const PT=Object.freeze(Object.create(null)),wD=(n=DE)=>(function(t,...s){if(t.length===1)return t[0];let a=!1;const l=[],u=t.reduce((y,_,T)=>{var E,M,A;/[?#]/.test(_)&&(a=!0);const C=s[T];let D=(a?encodeURIComponent:n)(""+C);return T!==s.length&&(C==null||typeof C=="object"&&C.toString===((A=Object.getPrototypeOf((M=Object.getPrototypeOf((E=C.hasOwnProperty)!==null&&E!==void 0?E:PT))!==null&&M!==void 0?M:PT))===null||A===void 0?void 0:A.toString))&&(D=C+"",l.push({start:y.length+_.length,length:D.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),y+_+(T===s.length?"":D)},""),h=u.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=m.exec(h))!==null;)l.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(l.sort((y,_)=>y.start-_.start),l.length>0){let y=0;const _=l.reduce((T,E)=>{const M=" ".repeat(E.start-y),A="^".repeat(E.length);return y=E.start+E.length,T+M+A},"");throw new ri(`Path parameters result in path with invalid segments:
${l.map(T=>T.error).join(`
`)}
${u}
${_}`)}return u}),Zd=wD(DE);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jE extends ME{create(e,t){var s;const{api_version:a=this._client.apiVersion}=e,l=Ih(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new ri("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new ri("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Zd`/${a}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:a=this._client.apiVersion}=t??{};return this._client.delete(Zd`/${a}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:a=this._client.apiVersion}=t??{};return this._client.post(Zd`/${a}/interactions/${e}/cancel`,s)}get(e,t={},s){var a;const l=t??{},{api_version:u=this._client.apiVersion}=l,h=Ih(l,["api_version"]);return this._client.get(Zd`/${u}/interactions/${e}`,Object.assign(Object.assign({query:h},s),{stream:(a=t==null?void 0:t.stream)!==null&&a!==void 0?a:!1}))}}jE._key=Object.freeze(["interactions"]);class PE extends jE{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ND(n){let e=0;for(const a of n)e+=a.length;const t=new Uint8Array(e);let s=0;for(const a of n)t.set(a,s),s+=a.length;return t}let eh;function fg(n){let e;return(eh??(e=new globalThis.TextEncoder,eh=e.encode.bind(e)))(n)}let th;function LT(n){let e;return(th??(e=new globalThis.TextDecoder,th=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?fg(e):e;this.buffer=ND([this.buffer,t]);const s=[];let a;for(;(a=kD(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){s.push(LT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,u=LT(this.buffer.subarray(0,l));s.push(u),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}hf.NEWLINE_CHARS=new Set([`
`,"\r"]);hf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function kD(n,e){for(let a=e??0;a<n.length;a++){if(n[a]===10)return{preceding:a,index:a+1,carriage:!1};if(n[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function AD(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rh={off:0,error:200,warn:300,info:400,debug:500},UT=(n,e,t)=>{if(n){if(oD(Rh,n))return n;hs(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Rh))}`)}};function nu(){}function nh(n,e,t){return!e||Rh[n]>Rh[t]?nu:e[n].bind(e)}const CD={error:nu,warn:nu,info:nu,debug:nu};let OT=new WeakMap;function hs(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return CD;const a=OT.get(t);if(a&&a[0]===s)return a[1];const l={error:nh("error",t,s),warn:nh("warn",t,s),info:nh("info",t,s),debug:nh("debug",t,s)};return OT.set(t,[s,l]),l}const yo=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Il{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let a=!1;const l=s?hs(s):console;function u(){return Ti(this,arguments,function*(){var m,f,y,_;if(a)throw new ri("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var E=!0,M=Si(ID(e,t)),A;A=yield rt(M.next()),m=A.done,!m;E=!0){_=A.value,E=!1;const C=_;if(!T)if(C.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield rt(JSON.parse(C.data))}catch(D){throw l.error("Could not parse message into JSON:",C.data),l.error("From chunk:",C.raw),D}}}catch(C){f={error:C}}finally{try{!E&&!m&&(y=M.return)&&(yield rt(y.call(M)))}finally{if(f)throw f.error}}T=!0}catch(C){if(bp(C))return yield rt(void 0);throw C}finally{T||t.abort()}})}return new Il(u,t,s)}static fromReadableStream(e,t,s){let a=!1;function l(){return Ti(this,arguments,function*(){var m,f,y,_;const T=new hf,E=CE(e);try{for(var M=!0,A=Si(E),C;C=yield rt(A.next()),m=C.done,!m;M=!0){_=C.value,M=!1;const D=_;for(const G of T.decode(D))yield yield rt(G)}}catch(D){f={error:D}}finally{try{!M&&!m&&(y=A.return)&&(yield rt(y.call(A)))}finally{if(f)throw f.error}}for(const D of T.flush())yield yield rt(D)})}function u(){return Ti(this,arguments,function*(){var m,f,y,_;if(a)throw new ri("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var E=!0,M=Si(l()),A;A=yield rt(M.next()),m=A.done,!m;E=!0){_=A.value,E=!1;const C=_;T||C&&(yield yield rt(JSON.parse(C)))}}catch(C){f={error:C}}finally{try{!E&&!m&&(y=M.return)&&(yield rt(y.call(M)))}finally{if(f)throw f.error}}T=!0}catch(C){if(bp(C))return yield rt(void 0);throw C}finally{T||t.abort()}})}return new Il(u,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),a=l=>({next:()=>{if(l.length===0){const u=s.next();e.push(u),t.push(u)}return l.shift()}});return[new Il(()=>a(e),this.controller,this.client),new Il(()=>a(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return AE({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:l}=await t.next();if(l)return s.close();const u=fg(JSON.stringify(a)+`
`);s.enqueue(u)}catch(a){s.error(a)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function ID(n,e){return Ti(this,arguments,function*(){var s,a,l,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ri("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ri("Attempted to iterate over a response with no body");const h=new MD,m=new hf,f=CE(n.body);try{for(var y=!0,_=Si(RD(f)),T;T=yield rt(_.next()),s=T.done,!s;y=!0){u=T.value,y=!1;const E=u;for(const M of m.decode(E)){const A=h.decode(M);A&&(yield yield rt(A))}}}catch(E){a={error:E}}finally{try{!y&&!s&&(l=_.return)&&(yield rt(l.call(_)))}finally{if(a)throw a.error}}for(const E of m.flush()){const M=h.decode(E);M&&(yield yield rt(M))}})}function RD(n){return Ti(this,arguments,function*(){var t,s,a,l;let u=new Uint8Array;try{for(var h=!0,m=Si(n),f;f=yield rt(m.next()),t=f.done,!t;h=!0){l=f.value,h=!1;const y=l;if(y==null)continue;const _=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?fg(y):y;let T=new Uint8Array(u.length+_.length);T.set(u),T.set(_,u.length),u=T;let E;for(;(E=AD(u))!==-1;)yield yield rt(u.slice(0,E)),u=u.slice(E)}}catch(y){s={error:y}}finally{try{!h&&!t&&(a=m.return)&&(yield rt(a.call(m)))}finally{if(s)throw s.error}}u.length>0&&(yield yield rt(u))})}class MD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,a]=DD(e,":");return a.startsWith(" ")&&(a=a.substring(1)),t==="event"?this.event=a:t==="data"&&this.data.push(a),null}}function DD(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function jD(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:a,startTime:l}=e,u=await(async()=>{var h;if(e.options.stream)return hs(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Il.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const m=t.headers.get("content-type"),f=(h=m==null?void 0:m.split(";")[0])===null||h===void 0?void 0:h.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?await t.json():await t.text()})();return hs(n).debug(`[${s}] response parsed`,yo({retryOfRequestLogID:a,url:t.url,status:t.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mg extends Promise{constructor(e,t,s=jD){super(a=>{a(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new mg(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LE=Symbol("brand.privateNullableHeaders");function*PD(n){if(!n)return;if(LE in n){const{values:s,nulls:a}=n;yield*s.entries();for(const l of a)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():MT(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=MT(s[1])?s[1]:[s[1]];let u=!1;for(const h of l)h!==void 0&&(e&&!u&&(u=!0,yield[a,null]),yield[a,h])}}const tu=n=>{const e=new Headers,t=new Set;for(const s of n){const a=new Set;for(const[l,u]of PD(s)){const h=l.toLowerCase();a.has(h)||(e.delete(l),a.add(h)),u===null?(e.delete(l),t.add(h)):(e.append(l,u),t.delete(h))}}return{[LE]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const K0=n=>{var e,t,s,a,l,u;if(typeof globalThis.process<"u")return(s=(t=(e=oC)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||l===void 0?void 0:l.call(a,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var UE;class ff{constructor(e){var t,s,a,l,u,h,m,{baseURL:f=K0("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(t=K0("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:_="v1beta"}=e,T=Ih(e,["baseURL","apiKey","apiVersion"]);const E=Object.assign(Object.assign({apiKey:y,apiVersion:_},T),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=E.baseURL,this.timeout=(s=E.timeout)!==null&&s!==void 0?s:ff.DEFAULT_TIMEOUT,this.logger=(a=E.logger)!==null&&a!==void 0?a:console;const M="warn";this.logLevel=M,this.logLevel=(u=(l=UT(E.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:UT(K0("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:M,this.fetchOptions=E.fetchOptions,this.maxRetries=(h=E.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(m=E.fetch)!==null&&m!==void 0?m:pD(),this.encoder=yD,this._options=E,this.apiKey=y,this.apiVersion=_,this.clientAdapter=E.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=tu([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return tu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return tu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new ri(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${El}`}defaultIdempotencyKey(){return`stainless-node-retry-${tD()}`}makeStatusError(e,t,s,a){return ms.generate(e,t,s,a)}buildURL(e,t,s){const a=!this.baseURLOverridden()&&s||this.baseURL,l=sD(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return rD(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(a=>Object.assign({method:e,path:t},a)))}request(e,t=null){return new mg(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var a,l,u;const h=await e,m=(a=h.maxRetries)!==null&&a!==void 0?a:this.maxRetries;t==null&&(t=m),await this.prepareOptions(h);const{req:f,url:y,timeout:_}=await this.buildRequest(h,{retryCount:m-t});await this.prepareRequest(f,{url:y,options:h});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),E=s===void 0?"":`, retryOf: ${s}`,M=Date.now();if(hs(this).debug(`[${T}] sending request`,yo({retryOfRequestLogID:s,method:h.method,url:y,options:h,headers:f.headers})),!((l=h.signal)===null||l===void 0)&&l.aborted)throw new _p;const A=new AbortController,C=await this.fetchWithTimeout(y,f,_,A).catch(vp),D=Date.now();if(C instanceof globalThis.Error){const I=`retrying, ${t} attempts remaining`;if(!((u=h.signal)===null||u===void 0)&&u.aborted)throw new _p;const q=bp(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(t)return hs(this).info(`[${T}] connection ${q?"timed out":"failed"} - ${I}`),hs(this).debug(`[${T}] connection ${q?"timed out":"failed"} (${I})`,yo({retryOfRequestLogID:s,url:y,durationMs:D-M,message:C.message})),this.retryRequest(h,t,s??T);throw hs(this).info(`[${T}] connection ${q?"timed out":"failed"} - error; no more retries left`),hs(this).debug(`[${T}] connection ${q?"timed out":"failed"} (error; no more retries left)`,yo({retryOfRequestLogID:s,url:y,durationMs:D-M,message:C.message})),q?new bE:new df({cause:C})}const G=`[${T}${E}] ${f.method} ${y} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${D-M}ms`;if(!C.ok){const I=await this.shouldRetry(C);if(t&&I){const R=`retrying, ${t} attempts remaining`;return await xD(C.body),hs(this).info(`${G} - ${R}`),hs(this).debug(`[${T}] response error (${R})`,yo({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:D-M})),this.retryRequest(h,t,s??T,C.headers)}const q=I?"error; no more retries left":"error; not retryable";hs(this).info(`${G} - ${q}`);const X=await C.text().catch(R=>vp(R).message),J=cD(X),j=J?void 0:X;throw hs(this).debug(`[${T}] response error (${q})`,yo({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,message:j,durationMs:Date.now()-M})),this.makeStatusError(C.status,J,j,C.headers)}return hs(this).info(G),hs(this).debug(`[${T}] response start`,yo({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:D-M})),{response:C,options:h,controller:A,requestLogID:T,retryOfRequestLogID:s,startTime:M}}async fetchWithTimeout(e,t,s,a){const l=t||{},{signal:u,method:h}=l,m=Ih(l,["signal","method"]);u&&u.addEventListener("abort",()=>a.abort());const f=setTimeout(()=>a.abort(),s),y=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,_=Object.assign(Object.assign(Object.assign({signal:a.signal},y?{duplex:"half"}:{}),{method:"GET"}),m);h&&(_.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(f)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,a){var l;let u;const h=a==null?void 0:a.get("retry-after-ms");if(h){const f=parseFloat(h);Number.isNaN(f)||(u=f)}const m=a==null?void 0:a.get("retry-after");if(m&&!u){const f=parseFloat(m);Number.isNaN(f)?u=Date.parse(m)-Date.now():u=f*1e3}if(!(u&&0<=u&&u<60*1e3)){const f=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,f)}return await uD(u),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,u=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return u*h*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,a,l;const u=Object.assign({},e),{method:h,path:m,query:f,defaultBaseURL:y}=u,_=this.buildURL(m,f,y);"timeout"in u&&lD("timeout",u.timeout),u.timeout=(s=u.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:E}=this.buildBody({options:u}),M=await this.buildHeaders({options:e,method:h,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:M},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&E instanceof globalThis.ReadableStream&&{duplex:"half"}),E&&{body:E}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:_,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:a}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let h=tu([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),mD()),this._options.defaultHeaders,s,e.headers,u]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=tu([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:gD(e)}:this.encoder({body:e,headers:s})}}ff.DEFAULT_TIMEOUT=6e4;class Vn extends ff{constructor(){super(...arguments),this.interactions=new PE(this)}}UE=Vn;Vn.GeminiNextGenAPIClient=UE;Vn.GeminiNextGenAPIClientError=ri;Vn.APIError=ms;Vn.APIConnectionError=df;Vn.APIConnectionTimeoutError=bE;Vn.APIUserAbortError=_p;Vn.NotFoundError=SE;Vn.ConflictError=EE;Vn.RateLimitError=NE;Vn.BadRequestError=vE;Vn.AuthenticationError=_E;Vn.InternalServerError=kE;Vn.PermissionDeniedError=TE;Vn.UnprocessableEntityError=wE;Vn.toFile=SD;Vn.Interactions=PE;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LD(n,e){const t={},s=p(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function UD(n,e){const t={},s=p(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function OD(n,e){const t={},s=p(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function VD(n,e){const t={},s=p(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function BD(n,e,t){const s={};if(p(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=p(n,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&g(e,["displayName"],a),p(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=p(n,["epochCount"]);e!==void 0&&l!=null&&g(e,["tuningTask","hyperparameters","epochCount"],l);const u=p(n,["learningRateMultiplier"]);if(u!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),p(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=p(n,["batchSize"]);e!==void 0&&h!=null&&g(e,["tuningTask","hyperparameters","batchSize"],h);const m=p(n,["learningRate"]);if(e!==void 0&&m!=null&&g(e,["tuningTask","hyperparameters","learningRate"],m),p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function GD(n,e,t){const s={};let a=p(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const E=p(n,["validationDataset"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec"],VT(E))}else if(a==="PREFERENCE_TUNING"){const E=p(n,["validationDataset"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec"],VT(E))}const l=p(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&g(e,["tunedModelDisplayName"],l);const u=p(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let h=p(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const E=p(n,["epochCount"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(h==="PREFERENCE_TUNING"){const E=p(n,["epochCount"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}let m=p(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const E=p(n,["learningRateMultiplier"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(m==="PREFERENCE_TUNING"){const E=p(n,["learningRateMultiplier"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}let f=p(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const E=p(n,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(f==="PREFERENCE_TUNING"){const E=p(n,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}let y=p(t,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const E=p(n,["adapterSize"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(y==="PREFERENCE_TUNING"){const E=p(n,["adapterSize"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}if(p(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=p(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=p(n,["beta"]);return e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function FD(n,e){const t={},s=p(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=p(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const l=p(n,["trainingDataset"]);l!=null&&ZD(l);const u=p(n,["config"]);return u!=null&&BD(u,t),t}function zD(n,e){const t={},s=p(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=p(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const l=p(n,["trainingDataset"]);l!=null&&ej(l,t,e);const u=p(n,["config"]);return u!=null&&GD(u,t,e),t}function HD(n,e){const t={},s=p(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function qD(n,e){const t={},s=p(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function KD(n,e,t){const s={},a=p(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=p(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=p(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function $D(n,e,t){const s={},a=p(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=p(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=p(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function YD(n,e){const t={},s=p(n,["config"]);return s!=null&&KD(s,t),t}function JD(n,e){const t={},s=p(n,["config"]);return s!=null&&$D(s,t),t}function QD(n,e){const t={},s=p(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=p(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const l=p(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>OE(h))),g(t,["tuningJobs"],u)}return t}function WD(n,e){const t={},s=p(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=p(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const l=p(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>Ep(h))),g(t,["tuningJobs"],u)}return t}function XD(n,e){const t={},s=p(n,["name"]);s!=null&&g(t,["model"],s);const a=p(n,["name"]);return a!=null&&g(t,["endpoint"],a),t}function ZD(n,e){const t={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=p(n,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(t,["examples","examples"],a)}return t}function ej(n,e,t){const s={};let a=p(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=p(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=p(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=p(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=p(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=p(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(p(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function OE(n,e){const t={},s=p(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=p(n,["name"]);a!=null&&g(t,["name"],a);const l=p(n,["state"]);l!=null&&g(t,["state"],eE(l));const u=p(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=p(n,["tuningTask","startTime"]);h!=null&&g(t,["startTime"],h);const m=p(n,["tuningTask","completeTime"]);m!=null&&g(t,["endTime"],m);const f=p(n,["updateTime"]);f!=null&&g(t,["updateTime"],f);const y=p(n,["description"]);y!=null&&g(t,["description"],y);const _=p(n,["baseModel"]);_!=null&&g(t,["baseModel"],_);const T=p(n,["_self"]);return T!=null&&g(t,["tunedModel"],XD(T)),t}function Ep(n,e){const t={},s=p(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=p(n,["name"]);a!=null&&g(t,["name"],a);const l=p(n,["state"]);l!=null&&g(t,["state"],eE(l));const u=p(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=p(n,["startTime"]);h!=null&&g(t,["startTime"],h);const m=p(n,["endTime"]);m!=null&&g(t,["endTime"],m);const f=p(n,["updateTime"]);f!=null&&g(t,["updateTime"],f);const y=p(n,["error"]);y!=null&&g(t,["error"],y);const _=p(n,["description"]);_!=null&&g(t,["description"],_);const T=p(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const E=p(n,["tunedModel"]);E!=null&&g(t,["tunedModel"],E);const M=p(n,["preTunedModel"]);M!=null&&g(t,["preTunedModel"],M);const A=p(n,["supervisedTuningSpec"]);A!=null&&g(t,["supervisedTuningSpec"],A);const C=p(n,["preferenceOptimizationSpec"]);C!=null&&g(t,["preferenceOptimizationSpec"],C);const D=p(n,["tuningDataStats"]);D!=null&&g(t,["tuningDataStats"],D);const G=p(n,["encryptionSpec"]);G!=null&&g(t,["encryptionSpec"],G);const I=p(n,["partnerModelTuningSpec"]);I!=null&&g(t,["partnerModelTuningSpec"],I);const q=p(n,["customBaseModel"]);q!=null&&g(t,["customBaseModel"],q);const X=p(n,["experiment"]);X!=null&&g(t,["experiment"],X);const J=p(n,["labels"]);J!=null&&g(t,["labels"],J);const j=p(n,["outputUri"]);j!=null&&g(t,["outputUri"],j);const N=p(n,["pipelineJob"]);N!=null&&g(t,["pipelineJob"],N);const R=p(n,["serviceAccount"]);R!=null&&g(t,["serviceAccount"],R);const P=p(n,["tunedModelDisplayName"]);P!=null&&g(t,["tunedModelDisplayName"],P);const U=p(n,["veoTuningSpec"]);return U!=null&&g(t,["veoTuningSpec"],U),t}function tj(n,e){const t={},s=p(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=p(n,["name"]);a!=null&&g(t,["name"],a);const l=p(n,["metadata"]);l!=null&&g(t,["metadata"],l);const u=p(n,["done"]);u!=null&&g(t,["done"],u);const h=p(n,["error"]);return h!=null&&g(t,["error"],h),t}function VT(n,e){const t={},s=p(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const a=p(n,["vertexDatasetResource"]);return a!=null&&g(t,["validationDatasetUri"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nj extends Ua{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new jo(Ia.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const a={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},t);return await this.tuneInternal(a)}else{const a=Object.assign({},t),l=await this.tuneMldevInternal(a);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:hp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=qD(e);return h=De("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>Ep(y))}else{const f=HD(e);return h=De("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>OE(y))}}async listInternal(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=JD(e);return h=De("tuningJobs",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=WD(y),T=new dT;return Object.assign(T,_),T})}else{const f=YD(e);return h=De("tunedModels",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=QD(y),T=new dT;return Object.assign(T,_),T})}}async cancel(e){var t,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=UD(e);return h=De("{name}:cancel",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=VD(y),T=new hT;return Object.assign(T,_),T})}else{const f=LD(e);return h=De("{name}:cancel",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const _=OD(y),T=new hT;return Object.assign(T,_),T})}}async tuneInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=zD(e,e);return l=De("tuningJobs",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:m.headers},y})),a.then(m=>Ep(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=FD(e);return l=De("tunedModels",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:m.headers},y})),a.then(m=>tj(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sj{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ij=1024*1024*8,aj=3,rj=1e3,oj=2,Mh="x-goog-upload-status";async function lj(n,e,t){var s;const a=await VE(n,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Mh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function cj(n,e,t){var s;const a=await VE(n,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Mh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=Y1(l),h=new og;return Object.assign(h,u),h}async function VE(n,e,t){var s,a;let l=0,u=0,h=new fp(new Response),m="upload";for(l=n.size;u<l;){const f=Math.min(ij,l-u),y=n.slice(u,u+f);u+f>=l&&(m+=", finalize");let _=0,T=rj;for(;_<aj&&(h=await t.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(f)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[Mh]));)_++,await dj(T),T=T*oj;if(u+=f,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[Mh])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function uj(n){return{size:n.size,type:n.type}}function dj(n){return new Promise(e=>setTimeout(e,n))}class hj{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lj(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await cj(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uj(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fj{create(e,t,s){return new mj(e,t,s)}}class mj{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BT="x-goog-api-key";class pj{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(BT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(BT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gj="gl-node/";class xj{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Vn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=dC(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new pj(this.apiKey);this.apiClient=new u5({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:gj+"web",uploader:new hj,downloader:new sj}),this.models=new C5(this.apiClient),this.live=new S5(this.apiClient,a,new fj),this.batches=new BI(this.apiClient),this.chats=new _R(this.models,this.apiClient),this.caches=new yR(this.apiClient),this.files=new RR(this.apiClient),this.operations=new I5(this.apiClient),this.authTokens=new K5(this.apiClient),this.tunings=new nj(this.apiClient),this.fileSearchStores=new eD(this.apiClient)}}const yj=new xj({apiKey:"AIzaSyAvkKXHZpdk95RcGtQyDUVobcX6rOhzX38"});function GT(n){const e=[...n];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}const BE={type:Ce.OBJECT,properties:{id:{type:Ce.STRING},type:{type:Ce.STRING,enum:["multiple_choice","short_answer","long_text"]},content:{type:Ce.STRING},options:{type:Ce.ARRAY,items:{type:Ce.STRING}},correctAnswer:{type:Ce.STRING},tkpPoints:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{option:{type:Ce.STRING},points:{type:Ce.INTEGER}}}},explanation:{type:Ce.STRING},shortcut:{type:Ce.STRING},metadata:{type:Ce.OBJECT,properties:{difficulty:{type:Ce.STRING,enum:["Easy","Medium","Hard","HOTS"]},idealTimeSeconds:{type:Ce.INTEGER},topic:{type:Ce.STRING},subtest:{type:Ce.STRING},trapPattern:{type:Ce.STRING}}}},required:["id","type","content","correctAnswer","explanation","metadata"]},bj={type:Ce.OBJECT,properties:{questions:{type:Ce.ARRAY,items:BE}},required:["questions"]};async function ki(n,e,t){var m,f,y,_;const s="gemini-3-flash-preview",a={temperature:.9,topP:.95,topK:40};e&&(a.responseMimeType="application/json",a.responseSchema=e);const l=[];t&&l.push({inlineData:{mimeType:"application/pdf",data:t}}),l.push({text:n});let u=3,h=2e3;for(;u>0;)try{const E=(await yj.models.generateContent({model:s,contents:{role:"user",parts:l},config:a})).text;if(!E)throw new Error("Empty response from AI");if(e)try{let M=E.trim();return M.startsWith("```json")?M=M.replace(/^```json\n?/,"").replace(/\n?```$/,""):M.startsWith("```")&&(M=M.replace(/^```\n?/,"").replace(/\n?```$/,"")),JSON.parse(M)}catch(M){console.error("JSON Parse Error",M);const A=E.match(/\{[\s\S]*\}|\[[\s\S]*\]/);return A?JSON.parse(A[0]):E}return E}catch(T){if(console.error(`Gemini API Error (${u} retries left):`,T),((T==null?void 0:T.status)===503||(T==null?void 0:T.status)===429||((m=T==null?void 0:T.message)==null?void 0:m.includes("503"))||((f=T==null?void 0:T.message)==null?void 0:f.includes("429"))||((y=T==null?void 0:T.message)==null?void 0:y.includes("high demand"))||((_=T==null?void 0:T.message)==null?void 0:_.includes("UNAVAILABLE")))&&u>1){u--,console.log(`Retrying in ${h}ms due to high demand...`),await new Promise(M=>setTimeout(M,h)),h*=2;continue}throw T}throw new Error("Failed to generate content after multiple retries.")}function vj(n){return n.id||(n.id=`q-${Math.random().toString(36).substr(2,9)}`),n.type==="multiple_choice"&&((!n.options||n.options.length===0)&&(n.options=["Option A","Option B","Option C","Option D","Option E"]),n.tkpPoints&&n.tkpPoints.length>0&&(n.options.includes("Sangat Setuju")||n.options.includes("Sangat Tidak Setuju"))||(n.options=GT(n.options))),n}const on=async(n,e,t,s=5,a=[],l,u,h)=>{let m="",f;const y=`
  IMPORTANT VISUAL & LOGIC RULES (V4):
  - **SYMBOLS**: Use a RICH variety of Unicode symbols ONLY for Figural/Pattern/Logic/TIU/TPA questions.
    - Basic: , , , , , , , , , , , , , , .
    - Advanced: , , , , , , , , , , , , , , , , , , , .
    - Arrows: , , , , , , , , , , , , , , , , , , , , , , , , , .
    - Blocks/Shading: , , , , , , , , , , , , , , , , , .
    - 3D Objects: , , , , , .
  
  - **LOGIC CONSISTENCY**:
    - For "Jaring-jaring kubus" (Cube Nets): The answer MUST be definitively solvable. DO NOT use answers like "Tergantung posisi". Provide a specific symbol or face that is opposite/adjacent based on standard spatial folding rules.
    - For "Series/Patterns": The pattern must be UNAMBIGUOUS. If A->B, then C->D must follow the EXACT same transformation rule (rotation, mirroring, shading change, addition/subtraction of elements).
    - For "3D Block Counting": Ensure the hidden blocks are logically implied by the structure (e.g., "padat ke belakang"). The answer must be a single integer.
  
  - **DIFFICULTY & VARIATION**:
    - Questions must be CHALLENGING. Avoid simple A->B patterns. Use compound transformations (e.g., "Rotate 90 AND change color").
    - **NO SIMPLE REPETITION**: ABSOLUTELY NO simple counting or repetition patterns (e.g., [  ] -> [  ] -> [  ] or [  ] : [  ]). Figural series MUST involve multiple simultaneous transformations (e.g., Shape A rotates 90 degrees while Shape B changes color and moves to the opposite corner).
    - **DISTRACTORS**: Wrong options must be plausible visual variants (e.g., wrong rotation, wrong shading). Do not use random symbols as distractors.
    - **PROGRESSION**: If generating multiple questions of the same type, INCREASE DIFFICULTY for subsequent questions.
    - **SIMILARITY**: If questions appear similar in structure, the logic MUST be different or significantly harder (e.g., 3-step transformation vs 2-step).
  
  - **STRICT EMOJI/SHAPE USAGE**:
    - **TWK (Tes Wawasan Kebangsaan)**: ABSOLUTELY NO EMOJIS OR SHAPES. Use professional, formal text only.
    - **TKP (Tes Karakteristik Pribadi)**: ABSOLUTELY NO EMOJIS OR SHAPES. Use professional, formal text only.
    - **TIU / TPA / Psikotes**: USE emojis, 3D shapes (, , , ), and geometric symbols heavily where appropriate for spatial/logic reasoning.
  `,_=`
  CRITICAL MATH & FORMATTING RULES:
  - Exponents: MUST USE UNICODE SUPERSCRIPTS (            ). DO NOT use caret (^).
  - IMPORTANT FOR EXPONENTS: DO NOT use decimal numbers in exponents (e.g., do not write ). Convert decimals to fractions first and use fraction characters (e.g., use  instead of ).
  - Fractions: STRICTLY use UNICODE FRACTION CHARACTERS (, , , , , , , , , , , , , , ).
  - If a specific glyph doesn't exist, use the Fraction Slash () (e.g. 710, 35). Avoid standard slash (/).
  - **COMPLEXITY REQUIREMENT FOR NUMERICAL/MATH**: ABSOLUTELY NO simple, single-step calculations (e.g., "What is 12.5% of 800?"). 
  - All numerical questions MUST be complex word problems (Soal Cerita), multi-step algebraic equations, or advanced data analysis.
  - Require the user to synthesize multiple pieces of information to arrive at the answer.
  `,T="CRITICAL: DETECT the language of the input material/context. The generated questions/answers MUST BE in the SAME LANGUAGE as the input (Bahasa Indonesia mostly).";let E=bj;const M=e==="TPA"&&typeof t=="string"&&(t.includes("Psikotes")||t.includes("Kepribadian")||t.includes("Logika Gambar"));if(e==="GENERAL"&&u){const D=t,G=D.type==="topic"?`Topic: ${D.content}`:"Material Content";D.type==="pdf"&&(f=D.content);const I=D.difficultyPreference||"MEDIUM",q=`DIFFICULTY LEVEL: ${I}. ${I==="HARD"?"Use complex analysis/HOTS.":I==="EASY"?"Use straightforward recall.":""}`;u==="ACTIVE_RECALL"?m=`Create ${s} Active Recall questions (Short Answer format) based on this: ${G}. 
          ${T} ${q} ${_}
          Questions must be specific and require recall of key facts/concepts.`:u==="PBL"?m=`Create ${s} Problem-Based Learning scenarios (Case Study).
          ${T} ${q} ${_}
          Format: 'long_text' or 'multiple_choice'.
          Based on: ${G}.`:m=`Create ${s} practice questions based on: ${G}. ${T} ${q} ${_}`,D.type==="text"&&(m+=`

CONTENT: ${D.content}`)}else if(M){const D=t;m=`GENERATE QUESTIONS FOR PSIKOTEST KEDINASAN (PKN STAN) V4.
      Subtest Context: ${D}.
      Count: ${s}.
      ${y}
      ${_}
      
      RULES:
      `,D.includes("Kepribadian")?m+=`
          TYPE: PERSONALITY TEST.
          Format: Statement with Likert Scale options (Sangat Setuju - Sangat Tidak Setuju).
          SCORING (tkpPoints): Assign points 1-5 based on positive ASN traits.
          `:D.includes("Gambar")?m+=`
          TYPE: TES LOGIKA GAMBAR (Abstract Reasoning/Spatial) V4.
          Requirement: MUST USE THE RICH SYMBOL SET defined above. 
          Create visual analogies, matrix completion, or 3D block counting problems.
          COMPLEXITY: High. Use multiple rules per pattern (e.g., shape change + rotation + shading).
          Example: "Jika [  ] diputar 45 derajat menjadi [  ], maka [  ] diputar..."
          `:m+=`
          TYPE: TIU (Tes Intelegensi Umum).
          Focus: Verbal (Sinonim/Analogi), Numerik, Logika.
          Use Unicode math symbols for Numerik questions.
          `,m+=`
Language: Bahasa Indonesia.`}else{let D="";const G=typeof t=="string"&&t.toUpperCase().includes("TKP")||e==="SKD"&&h==="TKP";if(G)D=`CONTEXT: SKD TKP (Tes Karakteristik Pribadi).
           
           CRITICAL TKP RULES:
           1. DIFFICULTY: Options must be VERY SIMILAR in length, tone, and logic. Avoid obvious outliers.
           2. NO LENGTH BIAS: Do not make the correct answer significantly longer than others.
           3. AMBIGUITY: The difference between 5 points and 4 points should be subtle (e.g., direct action vs. procedural action).
           4. VISUALS: DO NOT use emojis or icons in TKP questions. Use professional text only.
           `;else{let I="70%",q="30%";if(e==="SKD"){const X=typeof t=="string"?t.toUpperCase():"";X.includes("TWK")||X.includes("WAWASAN")?(I="80%",q="20%"):(X.includes("TIU")||X.includes("INTELEGENSIA"))&&(I="90%",q="10%")}D=`DIFFICULTY DISTRIBUTION:
           - ${I} of questions MUST be HOTS (Higher Order Thinking Skills).
           - ${q} of questions MUST be Difficult to Very Difficult.
           - ABSOLUTELY NO Easy or simple recall questions.
           - For TIU/Figural: Use COMPLEX visual patterns with the symbols defined in shapeInstructions. Avoid simple 1-step patterns.
           - For TIU/Verbal (Analogi): DO NOT use simple, ambiguous, or debatable analogies (e.g., "Televisi : Gambar : Suara"). Use highly specific, academic, or technical relationships where only ONE answer is definitively correct.
           - For TIU/Logika (Posisi/Silogisme): Create complex scenarios with at least 5-6 variables/people and multiple intersecting rules. Avoid simple "A is next to B" puzzles.
           - The explanation MUST be mathematically and logically rigorous, leaving no room for ambiguity.`}if(e==="INTERVIEW")m=`Roleplay Task: Act as a professional HR Interviewer. Context: ${t}. Generate ${s} interview questions.`,E={type:Ce.OBJECT,properties:{questions:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{id:{type:Ce.STRING},type:{type:Ce.STRING,enum:["long_text"]},content:{type:Ce.STRING},explanation:{type:Ce.STRING},metadata:{type:Ce.OBJECT,properties:{topic:{type:Ce.STRING}}}},required:["content","type"]}}}};else{const I=`Generate ${s} distinct questions. ${D}. Provide DETAILED explanation. ${y} ${_}`;G?m=`SKD TKP MODE. ${I} SCORING: 1-5 points via 'tkpPoints'. Ensure high ambiguity between top choices.`:m=`TRY OUT / PRACTICE V4. Category: ${e}. Context: ${JSON.stringify(t)}. ${I}. If TPA or Spatial, utilize 3D symbols (, , , ) or geometric shapes heavily. Ensure all fractions use Unicode characters (e.g. , ).`}}return((await ki(m,E,f)).questions||[]).filter(D=>!!D).map(D=>{const G=vj(D);return e==="INTERVIEW"&&(G.type="long_text",G.options=[]),G})},_j=async(n,e,t)=>{const s={type:Ce.OBJECT,properties:{score:{type:Ce.INTEGER,description:"Score from 0 to 100"},isCorrect:{type:Ce.BOOLEAN,description:"True if score > 70"},feedback:{type:Ce.STRING,description:"Constructive feedback"}},required:["score","isCorrect","feedback"]},a=`Evaluate answer. Q: ${n}. Key: ${e}. User: ${t}. Score (0-100), correct?, feedback.`;return ki(a,s)},Tj=async n=>{const e=`User weak in: ${n.join(", ")}. Provide concise study plan (3 paragraphs).`;return ki(e)},Sj=async(n,e)=>{const t={type:Ce.OBJECT,properties:{score:{type:Ce.INTEGER},feedback:{type:Ce.STRING},improvedAnswer:{type:Ce.STRING},keyPointsCovered:{type:Ce.ARRAY,items:{type:Ce.STRING}},toneAnalysis:{type:Ce.STRING}},required:["score","feedback","improvedAnswer","toneAnalysis"]},s=`Evaluate interview answer. Q: ${n}. A: ${e}. Act as HR.`;return ki(s,t)},Ej=async(n,e)=>{const t={type:Ce.OBJECT,properties:{understandingScore:{type:Ce.INTEGER},simplificationQuality:{type:Ce.STRING},missingConcepts:{type:Ce.ARRAY,items:{type:Ce.STRING}},correction:{type:Ce.STRING}},required:["understandingScore","simplificationQuality","correction"]},s=`Evaluate Feynman Technique for "${n}". Explanation: ${e}`;return ki(s,t)},wj=async n=>n.type==="pdf"&&n.content?await ki("Extract/summarize main text from PDF. Ignore footers.",void 0,n.content):n.content,Nj=async(n,e)=>{const t=`Context: University Thesis. Topic: ${n}. Task: ${e}.`;return ki(t)},kj=async n=>{const e={type:Ce.OBJECT,properties:{flashcards:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{id:{type:Ce.STRING},title:{type:Ce.STRING},front:{type:Ce.STRING},back:{type:Ce.STRING}},required:["front","back","title"]}}}},t=`Create 10 flashcards based on: ${n.extractedText||n.content}.`;return(await ki(t,e)).flashcards},Aj=async n=>{const e={type:Ce.OBJECT,properties:{label:{type:Ce.STRING},children:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{label:{type:Ce.STRING},children:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{label:{type:Ce.STRING}}}}}}}}},t=`Create hierarchical mind map (JSON) for: ${n.title||n.content.substring(0,50)}.`;return ki(t,e)},Cj=async(n,e,t)=>{const s={type:Ce.OBJECT,properties:{topic:{type:Ce.STRING},summary:{type:Ce.STRING},keyPoints:{type:Ce.ARRAY,items:{type:Ce.STRING}},question:BE},required:["topic","summary","keyPoints","question"]},a=`Create Drill Card (Mini Lesson + 1 Question) for ${n} - ${e}. ${t?"("+t+")":""}. Use Unicode superscripts for any math. FRACTIONS: use Unicode characters (, , ) or Fraction Slash ().`;return ki(a,s)},FT=async n=>{const e=on(Fe.SIMULATION,"SKD","Tes Wawasan Kebangsaan (TWK)",30,[],n,void 0,"HOTS"),t=on(Fe.SIMULATION,"SKD","Tes Intelegensia Umum (TIU)",35,[],n,void 0,"HOTS"),s=on(Fe.SIMULATION,"SKD","Tes Karakteristik Pribadi (TKP)",45,[],n,void 0,"TKP"),[a,l,u]=await Promise.all([e,t,s]);return a.forEach(h=>h.metadata.subtest="Tes Wawasan Kebangsaan (TWK)"),l.forEach(h=>h.metadata.subtest="Tes Intelegensia Umum (TIU)"),u.forEach(h=>h.metadata.subtest="Tes Karakteristik Pribadi (TKP)"),[...a,...l,...u]},zT=async()=>{const n=on(Fe.SIMULATION,"UTBK","Penalaran Umum (Penalaran Induktif)",10,[],void 0,void 0,"HOTS"),e=on(Fe.SIMULATION,"UTBK","Penalaran Umum (Penalaran Deduktif)",10,[],void 0,void 0,"HOTS"),t=on(Fe.SIMULATION,"UTBK","Penalaran Umum (Penalaran Kuantitatif)",10,[],void 0,void 0,"HOTS"),s=on(Fe.SIMULATION,"UTBK","Pengetahuan dan Pemahaman Umum",20,[],void 0,void 0,"HOTS"),a=on(Fe.SIMULATION,"UTBK","Pemahaman Bacaan dan Menulis",20,[],void 0,void 0,"HOTS"),l=on(Fe.SIMULATION,"UTBK","Pengetahuan Kuantitatif",20,[],void 0,void 0,"HOTS"),u=on(Fe.SIMULATION,"UTBK","Literasi Bahasa Indonesia",30,[],void 0,void 0,"HOTS"),h=on(Fe.SIMULATION,"UTBK","Literasi Bahasa Inggris",20,[],void 0,void 0,"HOTS"),m=on(Fe.SIMULATION,"UTBK","Penalaran Matematika",20,[],void 0,void 0,"HOTS"),[f,y,_,T,E,M,A,C,D]=await Promise.all([n,e,t,s,a,l,u,h,m]),G=[...f,...y,..._];return G.forEach(I=>I.metadata.subtest="Penalaran Umum"),T.forEach(I=>I.metadata.subtest="Pengetahuan dan Pemahaman Umum"),E.forEach(I=>I.metadata.subtest="Pemahaman Bacaan dan Menulis"),M.forEach(I=>I.metadata.subtest="Pengetahuan Kuantitatif"),A.forEach(I=>I.metadata.subtest="Literasi Bahasa Indonesia"),C.forEach(I=>I.metadata.subtest="Literasi Bahasa Inggris"),D.forEach(I=>I.metadata.subtest="Penalaran Matematika"),[...G,...T,...E,...M,...A,...C,...D]},HT=async()=>{const n=on(Fe.SIMULATION,"TPA","TPA - Verbal (HOTS)",15,[],void 0,void 0,"HOTS"),e=on(Fe.SIMULATION,"TPA","TPA - Kuantitatif (HOTS)",15,[],void 0,void 0,"HOTS"),t=on(Fe.SIMULATION,"TPA","TPA - Penalaran (HOTS)",15,[],void 0,void 0,"HOTS"),s=on(Fe.SIMULATION,"TPA","TBI - Bahasa Inggris (TOEFL Style)",20,[],void 0,void 0,"HOTS"),[a,l,u,h]=await Promise.all([n,e,t,s]);return a.forEach(m=>m.metadata.subtest="TPA - Kemampuan Verbal"),l.forEach(m=>m.metadata.subtest="TPA - Kemampuan Kuantitatif"),u.forEach(m=>m.metadata.subtest="TPA - Kemampuan Penalaran"),h.forEach(m=>m.metadata.subtest="TBI - Bahasa Inggris"),[...a,...l,...u,...h]},qT=async()=>{const n=on(Fe.SIMULATION,"TPA","PSIKOTEST KEDINASAN (TIU V3)",30,[],void 0,void 0,"HOTS"),e=on(Fe.SIMULATION,"TPA","PSIKOTEST KEDINASAN (LOGIKA GAMBAR V3). Use 3D UNICODE SHAPES (, , ) or geometric (, ) for spatial/pattern series.",15,[],void 0,void 0,"HOTS"),t=on(Fe.SIMULATION,"TPA","PSIKOTEST KEDINASAN (KEPRIBADIAN)",20,[],void 0,void 0,"TKP"),[s,a,l]=await Promise.all([n,e,t]);return s.forEach(u=>u.metadata.subtest="TIU - Verbal & Numerik"),a.forEach(u=>u.metadata.subtest="Tes Logika Gambar (Abstrak)"),l.forEach(u=>u.metadata.subtest="Tes Kepribadian"),[...s,...a,...l]},Ij=async(n,e)=>{const t={type:Ce.OBJECT,properties:{score:{type:Ce.INTEGER,description:"Similarity score 0-100"},feedback:{type:Ce.STRING,description:"Short feedback on why"}},required:["score","feedback"]},s=`Compare word similarity. Target: "${n}". Guess: "${e}". Score 0-100 based on semantic meaning and category. If same category, higher score. If synonym, very high score.`;return ki(s,t)},KT=async()=>on(Fe.SIMULATION,"PSIKOTEST","SIMULATION (IQ & LOGIC V3). Focus on spatial logic with 3D Unicode symbols (, ) where applicable.",40,[],void 0,void 0,"HOTS"),Rj=()=>{};var $T={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Mj=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],h=n[t++],m=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},FE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,h=u?n[a+1]:0,m=a+2<n.length,f=m?n[a+2]:0,y=l>>2,_=(l&3)<<4|h>>4;let T=(h&15)<<2|f>>6,E=f&63;m||(E=64,u||(T=64)),s.push(t[y],t[_],t[T],t[E])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(GE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Mj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const f=a<n.length?t[n.charAt(a)]:64;++a;const _=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||f==null||_==null)throw new Dj;const T=l<<2|h>>4;if(s.push(T),f!==64){const E=h<<4&240|f>>2;if(s.push(E),_!==64){const M=f<<6&192|_;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Dj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jj=function(n){const e=GE(n);return FE.encodeByteArray(e,!0)},Dh=function(n){return jj(n).replace(/\./g,"")},zE=function(n){try{return FE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=()=>Pj().__FIREBASE_DEFAULTS__,Uj=()=>{if(typeof process>"u"||typeof $T>"u")return;const n=$T.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Oj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&zE(n[1]);return e&&JSON.parse(e)},mf=()=>{try{return Rj()||Lj()||Uj()||Oj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},HE=n=>{var e,t;return(t=(e=mf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Vj=n=>{const e=HE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},qE=()=>{var n;return(n=mf())==null?void 0:n.config},KE=n=>{var e;return(e=mf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $E(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Dh(JSON.stringify(t)),Dh(JSON.stringify(u)),""].join(".")}const ou={};function Fj(){const n={prod:[],emulator:[]};for(const e of Object.keys(ou))ou[e]?n.emulator.push(e):n.prod.push(e);return n}function zj(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let YT=!1;function YE(n,e){if(typeof window>"u"||typeof document>"u"||!Xl(window.location.host)||ou[n]===e||ou[n]||YT)return;ou[n]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",l=Fj().prod.length>0;function u(){const T=document.getElementById(s);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,E){T.setAttribute("width","24"),T.setAttribute("id",E),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function f(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{YT=!0,u()},T}function y(T,E){T.setAttribute("id",E),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=zj(s),E=t("text"),M=document.getElementById(E)||document.createElement("span"),A=t("learnmore"),C=document.getElementById(A)||document.createElement("a"),D=t("preprendIcon"),G=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const I=T.element;h(I),y(C,A);const q=f();m(G,D),I.append(G,M,C,q),document.body.appendChild(I)}l?(M.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(os())}function qj(){var e;const n=(e=mf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Kj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $j(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Yj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Jj(){const n=os();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Qj(){return!qj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wj(){try{return typeof indexedDB=="object"}catch{return!1}}function Xj(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj="FirebaseError";class Va extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Zj,Object.setPrototypeOf(this,Va.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wu.prototype.create)}}class wu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?eP(l,s):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new Va(a,h,s)}}function eP(n,e){return n.replace(tP,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const tP=/\{\$([^}]+)}/g;function nP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ko(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],u=e[a];if(JT(l)&&JT(u)){if(!ko(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function JT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function sP(n,e){const t=new iP(n,e);return t.subscribe.bind(t)}class iP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");aP(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=$0),a.error===void 0&&(a.error=$0),a.complete===void 0&&(a.complete=$0);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function $0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(n){return n&&n._delegate?n._delegate:n}class Ao{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Bj;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lP(e))try{this.getOrInitializeService({instanceIdentifier:bo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bo){return this.instances.has(e)}getOptions(e=bo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);s===h&&u.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:oP(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=bo){return this.component?this.component.multipleInstances?e:bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oP(n){return n===bo?void 0:n}function lP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(vt||(vt={}));const uP={debug:vt.DEBUG,verbose:vt.VERBOSE,info:vt.INFO,warn:vt.WARN,error:vt.ERROR,silent:vt.SILENT},dP=vt.INFO,hP={[vt.DEBUG]:"log",[vt.VERBOSE]:"log",[vt.INFO]:"info",[vt.WARN]:"warn",[vt.ERROR]:"error"},fP=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=hP[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pg{constructor(e){this.name=e,this._logLevel=dP,this._logHandler=fP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vt.DEBUG,...e),this._logHandler(this,vt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vt.VERBOSE,...e),this._logHandler(this,vt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vt.INFO,...e),this._logHandler(this,vt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vt.WARN,...e),this._logHandler(this,vt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vt.ERROR,...e),this._logHandler(this,vt.ERROR,...e)}}const mP=(n,e)=>e.some(t=>n instanceof t);let QT,WT;function pP(){return QT||(QT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gP(){return WT||(WT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JE=new WeakMap,wp=new WeakMap,QE=new WeakMap,Y0=new WeakMap,gg=new WeakMap;function xP(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Er(n.result)),a()},u=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&JE.set(t,n)}).catch(()=>{}),gg.set(e,n),e}function yP(n){if(wp.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});wp.set(n,e)}let Np={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||QE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Er(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bP(n){Np=n(Np)}function vP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(J0(this),e,...t);return QE.set(s,e.sort?e.sort():[e]),Er(s)}:gP().includes(n)?function(...e){return n.apply(J0(this),e),Er(JE.get(this))}:function(...e){return Er(n.apply(J0(this),e))}}function _P(n){return typeof n=="function"?vP(n):(n instanceof IDBTransaction&&yP(n),mP(n,pP())?new Proxy(n,Np):n)}function Er(n){if(n instanceof IDBRequest)return xP(n);if(Y0.has(n))return Y0.get(n);const e=_P(n);return e!==n&&(Y0.set(n,e),gg.set(e,n)),e}const J0=n=>gg.get(n);function TP(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),h=Er(u);return s&&u.addEventListener("upgradeneeded",m=>{s(Er(u.result),m.oldVersion,m.newVersion,Er(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),h.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const SP=["get","getKey","getAll","getAllKeys","count"],EP=["put","add","delete","clear"],Q0=new Map;function XT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Q0.get(e))return Q0.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=EP.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||SP.includes(t)))return;const l=async function(u,...h){const m=this.transaction(u,a?"readwrite":"readonly");let f=m.store;return s&&(f=f.index(h.shift())),(await Promise.all([f[t](...h),a&&m.done]))[0]};return Q0.set(e,l),l}bP(n=>({...n,get:(e,t,s)=>XT(e,t)||n.get(e,t,s),has:(e,t)=>!!XT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(NP(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function NP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kp="@firebase/app",ZT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new pg("@firebase/app"),kP="@firebase/app-compat",AP="@firebase/analytics-compat",CP="@firebase/analytics",IP="@firebase/app-check-compat",RP="@firebase/app-check",MP="@firebase/auth",DP="@firebase/auth-compat",jP="@firebase/database",PP="@firebase/data-connect",LP="@firebase/database-compat",UP="@firebase/functions",OP="@firebase/functions-compat",VP="@firebase/installations",BP="@firebase/installations-compat",GP="@firebase/messaging",FP="@firebase/messaging-compat",zP="@firebase/performance",HP="@firebase/performance-compat",qP="@firebase/remote-config",KP="@firebase/remote-config-compat",$P="@firebase/storage",YP="@firebase/storage-compat",JP="@firebase/firestore",QP="@firebase/ai",WP="@firebase/firestore-compat",XP="firebase",ZP="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="[DEFAULT]",e6={[kp]:"fire-core",[kP]:"fire-core-compat",[CP]:"fire-analytics",[AP]:"fire-analytics-compat",[RP]:"fire-app-check",[IP]:"fire-app-check-compat",[MP]:"fire-auth",[DP]:"fire-auth-compat",[jP]:"fire-rtdb",[PP]:"fire-data-connect",[LP]:"fire-rtdb-compat",[UP]:"fire-fn",[OP]:"fire-fn-compat",[VP]:"fire-iid",[BP]:"fire-iid-compat",[GP]:"fire-fcm",[FP]:"fire-fcm-compat",[zP]:"fire-perf",[HP]:"fire-perf-compat",[qP]:"fire-rc",[KP]:"fire-rc-compat",[$P]:"fire-gcs",[YP]:"fire-gcs-compat",[JP]:"fire-fst",[WP]:"fire-fst-compat",[QP]:"fire-vertex","fire-js":"fire-js",[XP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new Map,t6=new Map,Cp=new Map;function eS(n,e){try{n.container.addComponent(e)}catch(t){Ra.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ul(n){const e=n.name;if(Cp.has(e))return Ra.debug(`There were multiple attempts to register component ${e}.`),!1;Cp.set(e,n);for(const t of jh.values())eS(t,n);for(const t of t6.values())eS(t,n);return!0}function xg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function vi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new wu("app","Firebase",n6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=ZP;function WE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Ap,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw wr.create("bad-app-name",{appName:String(a)});if(t||(t=qE()),!t)throw wr.create("no-options");const l=jh.get(a);if(l){if(ko(t,l.options)&&ko(s,l.config))return l;throw wr.create("duplicate-app",{appName:a})}const u=new cP(a);for(const m of Cp.values())u.addComponent(m);const h=new s6(t,s,u);return jh.set(a,h),h}function XE(n=Ap){const e=jh.get(n);if(!e&&n===Ap&&qE())return WE();if(!e)throw wr.create("no-app",{appName:n});return e}function Nr(n,e,t){let s=e6[n]??n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ra.warn(u.join(" "));return}Ul(new Ao(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6="firebase-heartbeat-database",a6=1,mu="firebase-heartbeat-store";let W0=null;function ZE(){return W0||(W0=TP(i6,a6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(mu)}catch(t){console.warn(t)}}}}).catch(n=>{throw wr.create("idb-open",{originalErrorMessage:n.message})})),W0}async function r6(n){try{const t=(await ZE()).transaction(mu),s=await t.objectStore(mu).get(ew(n));return await t.done,s}catch(e){if(e instanceof Va)Ra.warn(e.message);else{const t=wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ra.warn(t.message)}}}async function tS(n,e){try{const s=(await ZE()).transaction(mu,"readwrite");await s.objectStore(mu).put(e,ew(n)),await s.done}catch(t){if(t instanceof Va)Ra.warn(t.message);else{const s=wr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ra.warn(s.message)}}}function ew(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=1024,l6=30;class c6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new d6(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=nS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>l6){const u=h6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ra.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=nS(),{heartbeatsToSend:s,unsentEntries:a}=u6(this._heartbeatsCache.heartbeats),l=Dh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ra.warn(t),""}}}function nS(){return new Date().toISOString().substring(0,10)}function u6(n,e=o6){const t=[];let s=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),sS(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),sS(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class d6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wj()?Xj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await r6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return tS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return tS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function sS(n){return Dh(JSON.stringify({version:2,heartbeats:n})).length}function h6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f6(n){Ul(new Ao("platform-logger",e=>new wP(e),"PRIVATE")),Ul(new Ao("heartbeat",e=>new c6(e),"PRIVATE")),Nr(kp,ZT,n),Nr(kp,ZT,"esm2020"),Nr("fire-js","")}f6("");var m6="firebase",p6="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nr(m6,p6,"app");var iS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kr,tw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,N){function R(){}R.prototype=N.prototype,j.F=N.prototype,j.prototype=new R,j.prototype.constructor=j,j.D=function(P,U,F){for(var O=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)O[Ae-2]=arguments[Ae];return N.prototype[U].apply(P,O)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(j,N,R){R||(R=0);const P=Array(16);if(typeof N=="string")for(var U=0;U<16;++U)P[U]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(U=0;U<16;++U)P[U]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=j.g[0],R=j.g[1],U=j.g[2];let F=j.g[3],O;O=N+(F^R&(U^F))+P[0]+3614090360&4294967295,N=R+(O<<7&4294967295|O>>>25),O=F+(U^N&(R^U))+P[1]+3905402710&4294967295,F=N+(O<<12&4294967295|O>>>20),O=U+(R^F&(N^R))+P[2]+606105819&4294967295,U=F+(O<<17&4294967295|O>>>15),O=R+(N^U&(F^N))+P[3]+3250441966&4294967295,R=U+(O<<22&4294967295|O>>>10),O=N+(F^R&(U^F))+P[4]+4118548399&4294967295,N=R+(O<<7&4294967295|O>>>25),O=F+(U^N&(R^U))+P[5]+1200080426&4294967295,F=N+(O<<12&4294967295|O>>>20),O=U+(R^F&(N^R))+P[6]+2821735955&4294967295,U=F+(O<<17&4294967295|O>>>15),O=R+(N^U&(F^N))+P[7]+4249261313&4294967295,R=U+(O<<22&4294967295|O>>>10),O=N+(F^R&(U^F))+P[8]+1770035416&4294967295,N=R+(O<<7&4294967295|O>>>25),O=F+(U^N&(R^U))+P[9]+2336552879&4294967295,F=N+(O<<12&4294967295|O>>>20),O=U+(R^F&(N^R))+P[10]+4294925233&4294967295,U=F+(O<<17&4294967295|O>>>15),O=R+(N^U&(F^N))+P[11]+2304563134&4294967295,R=U+(O<<22&4294967295|O>>>10),O=N+(F^R&(U^F))+P[12]+1804603682&4294967295,N=R+(O<<7&4294967295|O>>>25),O=F+(U^N&(R^U))+P[13]+4254626195&4294967295,F=N+(O<<12&4294967295|O>>>20),O=U+(R^F&(N^R))+P[14]+2792965006&4294967295,U=F+(O<<17&4294967295|O>>>15),O=R+(N^U&(F^N))+P[15]+1236535329&4294967295,R=U+(O<<22&4294967295|O>>>10),O=N+(U^F&(R^U))+P[1]+4129170786&4294967295,N=R+(O<<5&4294967295|O>>>27),O=F+(R^U&(N^R))+P[6]+3225465664&4294967295,F=N+(O<<9&4294967295|O>>>23),O=U+(N^R&(F^N))+P[11]+643717713&4294967295,U=F+(O<<14&4294967295|O>>>18),O=R+(F^N&(U^F))+P[0]+3921069994&4294967295,R=U+(O<<20&4294967295|O>>>12),O=N+(U^F&(R^U))+P[5]+3593408605&4294967295,N=R+(O<<5&4294967295|O>>>27),O=F+(R^U&(N^R))+P[10]+38016083&4294967295,F=N+(O<<9&4294967295|O>>>23),O=U+(N^R&(F^N))+P[15]+3634488961&4294967295,U=F+(O<<14&4294967295|O>>>18),O=R+(F^N&(U^F))+P[4]+3889429448&4294967295,R=U+(O<<20&4294967295|O>>>12),O=N+(U^F&(R^U))+P[9]+568446438&4294967295,N=R+(O<<5&4294967295|O>>>27),O=F+(R^U&(N^R))+P[14]+3275163606&4294967295,F=N+(O<<9&4294967295|O>>>23),O=U+(N^R&(F^N))+P[3]+4107603335&4294967295,U=F+(O<<14&4294967295|O>>>18),O=R+(F^N&(U^F))+P[8]+1163531501&4294967295,R=U+(O<<20&4294967295|O>>>12),O=N+(U^F&(R^U))+P[13]+2850285829&4294967295,N=R+(O<<5&4294967295|O>>>27),O=F+(R^U&(N^R))+P[2]+4243563512&4294967295,F=N+(O<<9&4294967295|O>>>23),O=U+(N^R&(F^N))+P[7]+1735328473&4294967295,U=F+(O<<14&4294967295|O>>>18),O=R+(F^N&(U^F))+P[12]+2368359562&4294967295,R=U+(O<<20&4294967295|O>>>12),O=N+(R^U^F)+P[5]+4294588738&4294967295,N=R+(O<<4&4294967295|O>>>28),O=F+(N^R^U)+P[8]+2272392833&4294967295,F=N+(O<<11&4294967295|O>>>21),O=U+(F^N^R)+P[11]+1839030562&4294967295,U=F+(O<<16&4294967295|O>>>16),O=R+(U^F^N)+P[14]+4259657740&4294967295,R=U+(O<<23&4294967295|O>>>9),O=N+(R^U^F)+P[1]+2763975236&4294967295,N=R+(O<<4&4294967295|O>>>28),O=F+(N^R^U)+P[4]+1272893353&4294967295,F=N+(O<<11&4294967295|O>>>21),O=U+(F^N^R)+P[7]+4139469664&4294967295,U=F+(O<<16&4294967295|O>>>16),O=R+(U^F^N)+P[10]+3200236656&4294967295,R=U+(O<<23&4294967295|O>>>9),O=N+(R^U^F)+P[13]+681279174&4294967295,N=R+(O<<4&4294967295|O>>>28),O=F+(N^R^U)+P[0]+3936430074&4294967295,F=N+(O<<11&4294967295|O>>>21),O=U+(F^N^R)+P[3]+3572445317&4294967295,U=F+(O<<16&4294967295|O>>>16),O=R+(U^F^N)+P[6]+76029189&4294967295,R=U+(O<<23&4294967295|O>>>9),O=N+(R^U^F)+P[9]+3654602809&4294967295,N=R+(O<<4&4294967295|O>>>28),O=F+(N^R^U)+P[12]+3873151461&4294967295,F=N+(O<<11&4294967295|O>>>21),O=U+(F^N^R)+P[15]+530742520&4294967295,U=F+(O<<16&4294967295|O>>>16),O=R+(U^F^N)+P[2]+3299628645&4294967295,R=U+(O<<23&4294967295|O>>>9),O=N+(U^(R|~F))+P[0]+4096336452&4294967295,N=R+(O<<6&4294967295|O>>>26),O=F+(R^(N|~U))+P[7]+1126891415&4294967295,F=N+(O<<10&4294967295|O>>>22),O=U+(N^(F|~R))+P[14]+2878612391&4294967295,U=F+(O<<15&4294967295|O>>>17),O=R+(F^(U|~N))+P[5]+4237533241&4294967295,R=U+(O<<21&4294967295|O>>>11),O=N+(U^(R|~F))+P[12]+1700485571&4294967295,N=R+(O<<6&4294967295|O>>>26),O=F+(R^(N|~U))+P[3]+2399980690&4294967295,F=N+(O<<10&4294967295|O>>>22),O=U+(N^(F|~R))+P[10]+4293915773&4294967295,U=F+(O<<15&4294967295|O>>>17),O=R+(F^(U|~N))+P[1]+2240044497&4294967295,R=U+(O<<21&4294967295|O>>>11),O=N+(U^(R|~F))+P[8]+1873313359&4294967295,N=R+(O<<6&4294967295|O>>>26),O=F+(R^(N|~U))+P[15]+4264355552&4294967295,F=N+(O<<10&4294967295|O>>>22),O=U+(N^(F|~R))+P[6]+2734768916&4294967295,U=F+(O<<15&4294967295|O>>>17),O=R+(F^(U|~N))+P[13]+1309151649&4294967295,R=U+(O<<21&4294967295|O>>>11),O=N+(U^(R|~F))+P[4]+4149444226&4294967295,N=R+(O<<6&4294967295|O>>>26),O=F+(R^(N|~U))+P[11]+3174756917&4294967295,F=N+(O<<10&4294967295|O>>>22),O=U+(N^(F|~R))+P[2]+718787259&4294967295,U=F+(O<<15&4294967295|O>>>17),O=R+(F^(U|~N))+P[9]+3951481745&4294967295,j.g[0]=j.g[0]+N&4294967295,j.g[1]=j.g[1]+(U+(O<<21&4294967295|O>>>11))&4294967295,j.g[2]=j.g[2]+U&4294967295,j.g[3]=j.g[3]+F&4294967295}s.prototype.v=function(j,N){N===void 0&&(N=j.length);const R=N-this.blockSize,P=this.C;let U=this.h,F=0;for(;F<N;){if(U==0)for(;F<=R;)a(this,j,F),F+=this.blockSize;if(typeof j=="string"){for(;F<N;)if(P[U++]=j.charCodeAt(F++),U==this.blockSize){a(this,P),U=0;break}}else for(;F<N;)if(P[U++]=j[F++],U==this.blockSize){a(this,P),U=0;break}}this.h=U,this.o+=N},s.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var N=1;N<j.length-8;++N)j[N]=0;N=this.o*8;for(var R=j.length-8;R<j.length;++R)j[R]=N&255,N/=256;for(this.v(j),j=Array(16),N=0,R=0;R<4;++R)for(let P=0;P<32;P+=8)j[N++]=this.g[R]>>>P&255;return j};function l(j,N){var R=h;return Object.prototype.hasOwnProperty.call(R,j)?R[j]:R[j]=N(j)}function u(j,N){this.h=N;const R=[];let P=!0;for(let U=j.length-1;U>=0;U--){const F=j[U]|0;P&&F==N||(R[U]=F,P=!1)}this.g=R}var h={};function m(j){return-128<=j&&j<128?l(j,function(N){return new u([N|0],N<0?-1:0)}):new u([j|0],j<0?-1:0)}function f(j){if(isNaN(j)||!isFinite(j))return _;if(j<0)return C(f(-j));const N=[];let R=1;for(let P=0;j>=R;P++)N[P]=j/R|0,R*=4294967296;return new u(N,0)}function y(j,N){if(j.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(j.charAt(0)=="-")return C(y(j.substring(1),N));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=f(Math.pow(N,8));let P=_;for(let F=0;F<j.length;F+=8){var U=Math.min(8,j.length-F);const O=parseInt(j.substring(F,F+U),N);U<8?(U=f(Math.pow(N,U)),P=P.j(U).add(f(O))):(P=P.j(R),P=P.add(f(O)))}return P}var _=m(0),T=m(1),E=m(16777216);n=u.prototype,n.m=function(){if(A(this))return-C(this).m();let j=0,N=1;for(let R=0;R<this.g.length;R++){const P=this.i(R);j+=(P>=0?P:4294967296+P)*N,N*=4294967296}return j},n.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(M(this))return"0";if(A(this))return"-"+C(this).toString(j);const N=f(Math.pow(j,6));var R=this;let P="";for(;;){const U=q(R,N).g;R=D(R,U.j(N));let F=((R.g.length>0?R.g[0]:R.h)>>>0).toString(j);if(R=U,M(R))return F+P;for(;F.length<6;)F="0"+F;P=F+P}},n.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function M(j){if(j.h!=0)return!1;for(let N=0;N<j.g.length;N++)if(j.g[N]!=0)return!1;return!0}function A(j){return j.h==-1}n.l=function(j){return j=D(this,j),A(j)?-1:M(j)?0:1};function C(j){const N=j.g.length,R=[];for(let P=0;P<N;P++)R[P]=~j.g[P];return new u(R,~j.h).add(T)}n.abs=function(){return A(this)?C(this):this},n.add=function(j){const N=Math.max(this.g.length,j.g.length),R=[];let P=0;for(let U=0;U<=N;U++){let F=P+(this.i(U)&65535)+(j.i(U)&65535),O=(F>>>16)+(this.i(U)>>>16)+(j.i(U)>>>16);P=O>>>16,F&=65535,O&=65535,R[U]=O<<16|F}return new u(R,R[R.length-1]&-2147483648?-1:0)};function D(j,N){return j.add(C(N))}n.j=function(j){if(M(this)||M(j))return _;if(A(this))return A(j)?C(this).j(C(j)):C(C(this).j(j));if(A(j))return C(this.j(C(j)));if(this.l(E)<0&&j.l(E)<0)return f(this.m()*j.m());const N=this.g.length+j.g.length,R=[];for(var P=0;P<2*N;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(let U=0;U<j.g.length;U++){const F=this.i(P)>>>16,O=this.i(P)&65535,Ae=j.i(U)>>>16,Le=j.i(U)&65535;R[2*P+2*U]+=O*Le,G(R,2*P+2*U),R[2*P+2*U+1]+=F*Le,G(R,2*P+2*U+1),R[2*P+2*U+1]+=O*Ae,G(R,2*P+2*U+1),R[2*P+2*U+2]+=F*Ae,G(R,2*P+2*U+2)}for(j=0;j<N;j++)R[j]=R[2*j+1]<<16|R[2*j];for(j=N;j<2*N;j++)R[j]=0;return new u(R,0)};function G(j,N){for(;(j[N]&65535)!=j[N];)j[N+1]+=j[N]>>>16,j[N]&=65535,N++}function I(j,N){this.g=j,this.h=N}function q(j,N){if(M(N))throw Error("division by zero");if(M(j))return new I(_,_);if(A(j))return N=q(C(j),N),new I(C(N.g),C(N.h));if(A(N))return N=q(j,C(N)),new I(C(N.g),N.h);if(j.g.length>30){if(A(j)||A(N))throw Error("slowDivide_ only works with positive integers.");for(var R=T,P=N;P.l(j)<=0;)R=X(R),P=X(P);var U=J(R,1),F=J(P,1);for(P=J(P,2),R=J(R,2);!M(P);){var O=F.add(P);O.l(j)<=0&&(U=U.add(R),F=O),P=J(P,1),R=J(R,1)}return N=D(j,U.j(N)),new I(U,N)}for(U=_;j.l(N)>=0;){for(R=Math.max(1,Math.floor(j.m()/N.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),F=f(R),O=F.j(N);A(O)||O.l(j)>0;)R-=P,F=f(R),O=F.j(N);M(F)&&(F=T),U=U.add(F),j=D(j,O)}return new I(U,j)}n.B=function(j){return q(this,j).h},n.and=function(j){const N=Math.max(this.g.length,j.g.length),R=[];for(let P=0;P<N;P++)R[P]=this.i(P)&j.i(P);return new u(R,this.h&j.h)},n.or=function(j){const N=Math.max(this.g.length,j.g.length),R=[];for(let P=0;P<N;P++)R[P]=this.i(P)|j.i(P);return new u(R,this.h|j.h)},n.xor=function(j){const N=Math.max(this.g.length,j.g.length),R=[];for(let P=0;P<N;P++)R[P]=this.i(P)^j.i(P);return new u(R,this.h^j.h)};function X(j){const N=j.g.length+1,R=[];for(let P=0;P<N;P++)R[P]=j.i(P)<<1|j.i(P-1)>>>31;return new u(R,j.h)}function J(j,N){const R=N>>5;N%=32;const P=j.g.length-R,U=[];for(let F=0;F<P;F++)U[F]=N>0?j.i(F+R)>>>N|j.i(F+R+1)<<32-N:j.i(F+R);return new u(U,j.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,tw=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=f,u.fromString=y,kr=u}).apply(typeof iS<"u"?iS:typeof self<"u"?self:typeof window<"u"?window:{});var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nw,su,sw,ph,Ip,iw,aw,rw;(function(){var n,e=Object.defineProperty;function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof sh=="object"&&sh];for(var S=0;S<x.length;++S){var k=x[S];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var s=t(this);function a(x,S){if(S)e:{var k=s;x=x.split(".");for(var V=0;V<x.length-1;V++){var ee=x[V];if(!(ee in k))break e;k=k[ee]}x=x[x.length-1],V=k[x],S=S(V),S!=V&&S!=null&&e(k,x,{configurable:!0,writable:!0,value:S})}}a("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(x){return x||function(S){var k=[],V;for(V in S)Object.prototype.hasOwnProperty.call(S,V)&&k.push([V,S[V]]);return k}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(x){var S=typeof x;return S=="object"&&x!=null||S=="function"}function m(x,S,k){return x.call.apply(x.bind,arguments)}function f(x,S,k){return f=m,f.apply(null,arguments)}function y(x,S){var k=Array.prototype.slice.call(arguments,1);return function(){var V=k.slice();return V.push.apply(V,arguments),x.apply(this,V)}}function _(x,S){function k(){}k.prototype=S.prototype,x.Z=S.prototype,x.prototype=new k,x.prototype.constructor=x,x.Ob=function(V,ee,re){for(var ke=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)ke[ut-2]=arguments[ut];return S.prototype[ee].apply(V,ke)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function E(x){const S=x.length;if(S>0){const k=Array(S);for(let V=0;V<S;V++)k[V]=x[V];return k}return[]}function M(x,S){for(let V=1;V<arguments.length;V++){const ee=arguments[V];var k=typeof ee;if(k=k!="object"?k:ee?Array.isArray(ee)?"array":k:"null",k=="array"||k=="object"&&typeof ee.length=="number"){k=x.length||0;const re=ee.length||0;x.length=k+re;for(let ke=0;ke<re;ke++)x[k+ke]=ee[ke]}else x.push(ee)}}class A{constructor(S,k){this.i=S,this.j=k,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function C(x){u.setTimeout(()=>{throw x},0)}function D(){var x=j;let S=null;return x.g&&(S=x.g,x.g=x.g.next,x.g||(x.h=null),S.next=null),S}class G{constructor(){this.h=this.g=null}add(S,k){const V=I.get();V.set(S,k),this.h?this.h.next=V:this.g=V,this.h=V}}var I=new A(()=>new q,x=>x.reset());class q{constructor(){this.next=this.g=this.h=null}set(S,k){this.h=S,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let X,J=!1,j=new G,N=()=>{const x=Promise.resolve(void 0);X=()=>{x.then(R)}};function R(){for(var x;x=D();){try{x.h.call(x.g)}catch(k){C(k)}var S=I;S.j(x),S.h<100&&(S.h++,x.next=S.g,S.g=x)}J=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(x,S){this.type=x,this.g=this.target=S,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var x=!1,S=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const k=()=>{};u.addEventListener("test",k,S),u.removeEventListener("test",k,S)}catch{}return x})();function O(x){return/^[\s\xa0]*$/.test(x)}function Ae(x,S){U.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,S)}_(Ae,U),Ae.prototype.init=function(x,S){const k=this.type=x.type,V=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=S,S=x.relatedTarget,S||(k=="mouseover"?S=x.fromElement:k=="mouseout"&&(S=x.toElement)),this.relatedTarget=S,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var Le="closure_listenable_"+(Math.random()*1e6|0),Y=0;function oe(x,S,k,V,ee){this.listener=x,this.proxy=null,this.src=S,this.type=k,this.capture=!!V,this.ha=ee,this.key=++Y,this.da=this.fa=!1}function _e(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Me(x,S,k){for(const V in x)S.call(k,x[V],V,x)}function ne(x,S){for(const k in x)S.call(void 0,x[k],k,x)}function z(x){const S={};for(const k in x)S[k]=x[k];return S}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(x,S){let k,V;for(let ee=1;ee<arguments.length;ee++){V=arguments[ee];for(k in V)x[k]=V[k];for(let re=0;re<Q.length;re++)k=Q[re],Object.prototype.hasOwnProperty.call(V,k)&&(x[k]=V[k])}}function ie(x){this.src=x,this.g={},this.h=0}ie.prototype.add=function(x,S,k,V,ee){const re=x.toString();x=this.g[re],x||(x=this.g[re]=[],this.h++);const ke=Te(x,S,V,ee);return ke>-1?(S=x[ke],k||(S.fa=!1)):(S=new oe(S,this.src,re,!!V,ee),S.fa=k,x.push(S)),S};function ce(x,S){const k=S.type;if(k in x.g){var V=x.g[k],ee=Array.prototype.indexOf.call(V,S,void 0),re;(re=ee>=0)&&Array.prototype.splice.call(V,ee,1),re&&(_e(S),x.g[k].length==0&&(delete x.g[k],x.h--))}}function Te(x,S,k,V){for(let ee=0;ee<x.length;++ee){const re=x[ee];if(!re.da&&re.listener==S&&re.capture==!!k&&re.ha==V)return ee}return-1}var xe="closure_lm_"+(Math.random()*1e6|0),nt={};function Qe(x,S,k,V,ee){if(Array.isArray(S)){for(let re=0;re<S.length;re++)Qe(x,S[re],k,V,ee);return null}return k=Rn(k),x&&x[Le]?x.J(S,k,h(V)?!!V.capture:!1,ee):St(x,S,k,!1,V,ee)}function St(x,S,k,V,ee,re){if(!S)throw Error("Invalid event type");const ke=h(ee)?!!ee.capture:!!ee;let ut=et(x);if(ut||(x[xe]=ut=new ie(x)),k=ut.add(S,k,V,ke,re),k.proxy)return k;if(V=At(),k.proxy=V,V.src=x,V.listener=k,x.addEventListener)F||(ee=ke),ee===void 0&&(ee=!1),x.addEventListener(S.toString(),V,ee);else if(x.attachEvent)x.attachEvent(ue(S.toString()),V);else if(x.addListener&&x.removeListener)x.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return k}function At(){function x(k){return S.call(x.src,x.listener,k)}const S=Oe;return x}function at(x,S,k,V,ee){if(Array.isArray(S))for(var re=0;re<S.length;re++)at(x,S[re],k,V,ee);else V=h(V)?!!V.capture:!!V,k=Rn(k),x&&x[Le]?(x=x.i,re=String(S).toString(),re in x.g&&(S=x.g[re],k=Te(S,k,V,ee),k>-1&&(_e(S[k]),Array.prototype.splice.call(S,k,1),S.length==0&&(delete x.g[re],x.h--)))):x&&(x=et(x))&&(S=x.g[S.toString()],x=-1,S&&(x=Te(S,k,V,ee)),(k=x>-1?S[x]:null)&&Ge(k))}function Ge(x){if(typeof x!="number"&&x&&!x.da){var S=x.src;if(S&&S[Le])ce(S.i,x);else{var k=x.type,V=x.proxy;S.removeEventListener?S.removeEventListener(k,V,x.capture):S.detachEvent?S.detachEvent(ue(k),V):S.addListener&&S.removeListener&&S.removeListener(V),(k=et(S))?(ce(k,x),k.h==0&&(k.src=null,S[xe]=null)):_e(x)}}}function ue(x){return x in nt?nt[x]:nt[x]="on"+x}function Oe(x,S){if(x.da)x=!0;else{S=new Ae(S,this);const k=x.listener,V=x.ha||x.src;x.fa&&Ge(x),x=k.call(V,S)}return x}function et(x){return x=x[xe],x instanceof ie?x:null}var We="__closure_events_fn_"+(Math.random()*1e9>>>0);function Rn(x){return typeof x=="function"?x:(x[We]||(x[We]=function(S){return x.handleEvent(S)}),x[We])}function Mt(){P.call(this),this.i=new ie(this),this.M=this,this.G=null}_(Mt,P),Mt.prototype[Le]=!0,Mt.prototype.removeEventListener=function(x,S,k,V){at(this,x,S,k,V)};function xt(x,S){var k,V=x.G;if(V)for(k=[];V;V=V.G)k.push(V);if(x=x.M,V=S.type||S,typeof S=="string")S=new U(S,x);else if(S instanceof U)S.target=S.target||x;else{var ee=S;S=new U(V,x),fe(S,ee)}ee=!0;let re,ke;if(k)for(ke=k.length-1;ke>=0;ke--)re=S.g=k[ke],ee=Gt(re,V,!0,S)&&ee;if(re=S.g=x,ee=Gt(re,V,!0,S)&&ee,ee=Gt(re,V,!1,S)&&ee,k)for(ke=0;ke<k.length;ke++)re=S.g=k[ke],ee=Gt(re,V,!1,S)&&ee}Mt.prototype.N=function(){if(Mt.Z.N.call(this),this.i){var x=this.i;for(const S in x.g){const k=x.g[S];for(let V=0;V<k.length;V++)_e(k[V]);delete x.g[S],x.h--}}this.G=null},Mt.prototype.J=function(x,S,k,V){return this.i.add(String(x),S,!1,k,V)},Mt.prototype.K=function(x,S,k,V){return this.i.add(String(x),S,!0,k,V)};function Gt(x,S,k,V){if(S=x.i.g[String(S)],!S)return!0;S=S.concat();let ee=!0;for(let re=0;re<S.length;++re){const ke=S[re];if(ke&&!ke.da&&ke.capture==k){const ut=ke.listener,xn=ke.ha||ke.src;ke.fa&&ce(x.i,ke),ee=ut.call(xn,V)!==!1&&ee}}return ee&&!V.defaultPrevented}function oi(x,S){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=f(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(x,S||0)}function Bn(x){x.g=oi(()=>{x.g=null,x.i&&(x.i=!1,Bn(x))},x.l);const S=x.h;x.h=null,x.m.apply(null,S)}class qt extends P{constructor(S,k){super(),this.m=S,this.l=k,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Bn(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pt(x){P.call(this),this.h=x,this.g={}}_(Pt,P);var Tn=[];function Ft(x){Me(x.g,function(S,k){this.g.hasOwnProperty(k)&&Ge(S)},x),x.g={}}Pt.prototype.N=function(){Pt.Z.N.call(this),Ft(this)},Pt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ws=u.JSON.stringify,Vs=u.JSON.parse,ta=class{stringify(x){return u.JSON.stringify(x,void 0)}parse(x){return u.JSON.parse(x,void 0)}};function Ai(){}function Ne(){}var Se={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function we(){U.call(this,"d")}_(we,U);function ze(){U.call(this,"c")}_(ze,U);var st={},Lt=null;function Mn(){return Lt=Lt||new Mt}st.Ia="serverreachability";function Gn(x){U.call(this,st.Ia,x)}_(Gn,U);function Ut(x){const S=Mn();xt(S,new Gn(S))}st.STAT_EVENT="statevent";function pn(x,S){U.call(this,st.STAT_EVENT,x),this.stat=S}_(pn,U);function Xt(x){const S=Mn();xt(S,new pn(S,x))}st.Ja="timingevent";function ls(x,S){U.call(this,st.Ja,x),this.size=S}_(ls,U);function Fn(x,S){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){x()},S)}function Ot(){this.g=!0}Ot.prototype.ua=function(){this.g=!1};function Je(x,S,k,V,ee,re){x.info(function(){if(x.g)if(re){var ke="",ut=re.split("&");for(let Dt=0;Dt<ut.length;Dt++){var xn=ut[Dt].split("=");if(xn.length>1){const an=xn[0];xn=xn[1];const Ys=an.split("_");ke=Ys.length>=2&&Ys[1]=="type"?ke+(an+"="+xn+"&"):ke+(an+"=redacted&")}}}else ke=null;else ke=re;return"XMLHTTP REQ ("+V+") [attempt "+ee+"]: "+S+`
`+k+`
`+ke})}function Ns(x,S,k,V,ee,re,ke){x.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+ee+"]: "+S+`
`+k+`
`+re+" "+ke})}function zn(x,S,k,V){x.info(function(){return"XMLHTTP TEXT ("+S+"): "+lc(x,k)+(V?" "+V:"")})}function Ci(x,S){x.info(function(){return"TIMEOUT: "+S})}Ot.prototype.info=function(){};function lc(x,S){if(!x.g)return S;if(!S)return null;try{const re=JSON.parse(S);if(re){for(x=0;x<re.length;x++)if(Array.isArray(re[x])){var k=re[x];if(!(k.length<2)){var V=k[1];if(Array.isArray(V)&&!(V.length<1)){var ee=V[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(let ke=1;ke<V.length;ke++)V[ke]=""}}}}return ws(re)}catch{return S}}var na={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fa;function sa(){}_(sa,Ai),sa.prototype.g=function(){return new XMLHttpRequest},Fa=new sa;function li(x){return encodeURIComponent(String(x))}function Vo(x){var S=1;x=x.split(":");const k=[];for(;S>0&&x.length;)k.push(x.shift()),S--;return x.length&&k.push(x.join(":")),k}function ks(x,S,k,V){this.j=x,this.i=S,this.l=k,this.S=V||1,this.V=new Pt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new As}function As(){this.i=null,this.g="",this.h=!1}var un={},Sn={};function Bs(x,S,k){x.M=1,x.A=He(he(S)),x.u=k,x.R=!0,ia(x,null)}function ia(x,S){x.F=Date.now(),Gs(x),x.B=he(x.A);var k=x.B,V=x.S;Array.isArray(V)||(V=[String(V)]),qs(k.i,"t",V),x.C=0,k=x.j.L,x.h=new As,x.g=qu(x.j,k?S:null,!x.u),x.P>0&&(x.O=new qt(f(x.Y,x,x.g),x.P)),S=x.V,k=x.g,V=x.ba;var ee="readystatechange";Array.isArray(ee)||(ee&&(Tn[0]=ee.toString()),ee=Tn);for(let re=0;re<ee.length;re++){const ke=Qe(k,ee[re],V||S.handleEvent,!1,S.h||S);if(!ke)break;S.g[ke.key]=ke}S=x.J?z(x.J):{},x.u?(x.v||(x.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,S)):(x.v="GET",x.g.ea(x.B,x.v,null,S)),Ut(),Je(x.i,x.v,x.B,x.l,x.S,x.u)}ks.prototype.ba=function(x){x=x.target;const S=this.O;S&&hi(x)==3?S.j():this.Y(x)},ks.prototype.Y=function(x){try{if(x==this.g)e:{const ut=hi(this.g),xn=this.g.ya(),Dt=this.g.ca();if(!(ut<3)&&(ut!=3||this.g&&(this.h.h||this.g.la()||qn(this.g)))){this.K||ut!=4||xn==7||(xn==8||Dt<=0?Ut(3):Ut(2)),Hn(this);var S=this.g.ca();this.X=S;var k=cc(this);if(this.o=S==200,Ns(this.i,this.v,this.B,this.l,this.S,ut,S),this.o){if(this.U&&!this.L){t:{if(this.g){var V,ee=this.g;if((V=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(V)){var re=V;break t}}re=null}if(x=re)zn(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fs(this,x);else{this.o=!1,this.m=3,Xt(12),ts(this),cs(this);break e}}if(this.R){x=!0;let an;for(;!this.K&&this.C<k.length;)if(an=Go(this,k),an==Sn){ut==4&&(this.m=4,Xt(14),x=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(an==un){this.m=4,Xt(15),zn(this.i,this.l,k,"[Invalid Chunk]"),x=!1;break}else zn(this.i,this.l,an,null),Fs(this,an);if(Bo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||k.length!=0||this.h.h||(this.m=1,Xt(16),x=!1),this.o=this.o&&x,!x)zn(this.i,this.l,k,"[Invalid Chunked Response]"),ts(this),cs(this);else if(k.length>0&&!this.W){this.W=!0;var ke=this.j;ke.g==this&&ke.aa&&!ke.P&&(ke.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),pc(ke),ke.P=!0,Xt(11))}}else zn(this.i,this.l,k,null),Fs(this,k);ut==4&&ts(this),this.o&&!this.K&&(ut==4?Gu(this.j,this):(this.o=!1,Gs(this)))}else ca(this.g),S==400&&k.indexOf("Unknown SID")>0?(this.m=3,Xt(12)):(this.m=0,Xt(13)),ts(this),cs(this)}}}catch{}finally{}};function cc(x){if(!Bo(x))return x.g.la();const S=qn(x.g);if(S==="")return"";let k="";const V=S.length,ee=hi(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return ts(x),cs(x),"";x.h.i=new u.TextDecoder}for(let re=0;re<V;re++)x.h.h=!0,k+=x.h.i.decode(S[re],{stream:!(ee&&re==V-1)});return S.length=0,x.h.g+=k,x.C=0,x.h.g}function Bo(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function Go(x,S){var k=x.C,V=S.indexOf(`
`,k);return V==-1?Sn:(k=Number(S.substring(k,V)),isNaN(k)?un:(V+=1,V+k>S.length?Sn:(S=S.slice(V,V+k),x.C=V+k,S)))}ks.prototype.cancel=function(){this.K=!0,ts(this)};function Gs(x){x.T=Date.now()+x.H,aa(x,x.H)}function aa(x,S){if(x.D!=null)throw Error("WatchDog timer not null");x.D=Fn(f(x.aa,x),S)}function Hn(x){x.D&&(u.clearTimeout(x.D),x.D=null)}ks.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(Ci(this.i,this.B),this.M!=2&&(Ut(),Xt(17)),ts(this),this.m=2,cs(this)):aa(this,this.T-x)};function cs(x){x.j.I==0||x.K||Gu(x.j,x)}function ts(x){Hn(x);var S=x.O;S&&typeof S.dispose=="function"&&S.dispose(),x.O=null,Ft(x.V),x.g&&(S=x.g,x.g=null,S.abort(),S.dispose())}function Fs(x,S){try{var k=x.j;if(k.I!=0&&(k.g==x||Hs(k.h,x))){if(!x.L&&Hs(k.h,x)&&k.I==3){try{var V=k.Ba.g.parse(S)}catch{V=null}if(Array.isArray(V)&&V.length==3){var ee=V;if(ee[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<x.F)Ko(k),$a(k);else break e;eo(k),Xt(18)}}else k.xa=ee[1],0<k.xa-k.K&&ee[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=Fn(f(k.Va,k),6e3));zs(k.h)<=1&&k.ta&&(k.ta=void 0)}else Ui(k,11)}else if((x.L||k.g==x)&&Ko(k),!O(S))for(ee=k.Ba.g.parse(S),S=0;S<ee.length;S++){let Dt=ee[S];const an=Dt[0];if(!(an<=k.K))if(k.K=an,Dt=Dt[1],k.I==2)if(Dt[0]=="c"){k.M=Dt[1],k.ba=Dt[2];const Ys=Dt[3];Ys!=null&&(k.ka=Ys,k.j.info("VER="+k.ka));const Oi=Dt[4];Oi!=null&&(k.za=Oi,k.j.info("SVER="+k.za));const fi=Dt[5];fi!=null&&typeof fi=="number"&&fi>0&&(V=1.5*fi,k.O=V,k.j.info("backChannelRequestTimeoutMs_="+V)),V=k;const mi=x.g;if(mi){const to=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(to){var re=V.h;re.g||to.indexOf("spdy")==-1&&to.indexOf("quic")==-1&&to.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Kr(re,re.h),re.h=null))}if(V.G){const $o=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;$o&&(V.wa=$o,Ee(V.J,V.G,$o))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-x.F,k.j.info("Handshake RTT: "+k.T+"ms")),V=k;var ke=x;if(V.na=Hu(V,V.L?V.ba:null,V.W),ke.L){$r(V.h,ke);var ut=ke,xn=V.O;xn&&(ut.H=xn),ut.D&&(Hn(ut),Gs(ut)),V.g=ke}else Vu(V);k.i.length>0&&Li(k)}else Dt[0]!="stop"&&Dt[0]!="close"||Ui(k,7);else k.I==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Ui(k,7):fc(k):Dt[0]!="noop"&&k.l&&k.l.qa(Dt),k.A=0)}}Ut(4)}catch{}}var dn=class{constructor(x,S){this.g=x,this.map=S}};function Hr(x){this.l=x||10,u.PerformanceNavigationTiming?(x=u.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qr(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function zs(x){return x.h?1:x.g?x.g.size:0}function Hs(x,S){return x.h?x.h==S:x.g?x.g.has(S):!1}function Kr(x,S){x.g?x.g.add(S):x.h=S}function $r(x,S){x.h&&x.h==S?x.h=null:x.g&&x.g.has(S)&&x.g.delete(S)}Hr.prototype.cancel=function(){if(this.i=Yr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Yr(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let S=x.i;for(const k of x.g.values())S=S.concat(k.G);return S}return E(x.i)}var Fo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ra(x,S){if(x){x=x.split("&");for(let k=0;k<x.length;k++){const V=x[k].indexOf("=");let ee,re=null;V>=0?(ee=x[k].substring(0,V),re=x[k].substring(V+1)):ee=x[k],S(ee,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function K(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;x instanceof K?(this.l=x.l,me(this,x.j),this.o=x.o,this.g=x.g,Ve(this,x.u),this.h=x.h,Ie(this,Mi(x.i)),this.m=x.m):x&&(S=String(x).match(Fo))?(this.l=!1,me(this,S[1]||"",!0),this.o=je(S[2]||""),this.g=je(S[3]||"",!0),Ve(this,S[4]),this.h=je(S[5]||"",!0),Ie(this,S[6]||"",!0),this.m=je(S[7]||"")):(this.l=!1,this.i=new Zt(null,this.l))}K.prototype.toString=function(){const x=[];var S=this.j;S&&x.push(Ze(S,Ye,!0),":");var k=this.g;return(k||S=="file")&&(x.push("//"),(S=this.o)&&x.push(Ze(S,Ye,!0),"@"),x.push(li(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&x.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&x.push("/"),x.push(Ze(k,k.charAt(0)=="/"?Et:mt,!0))),(k=this.i.toString())&&x.push("?",k),(k=this.m)&&x.push("#",Ze(k,gn)),x.join("")},K.prototype.resolve=function(x){const S=he(this);let k=!!x.j;k?me(S,x.j):k=!!x.o,k?S.o=x.o:k=!!x.g,k?S.g=x.g:k=x.u!=null;var V=x.h;if(k)Ve(S,x.u);else if(k=!!x.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var ee=S.h.lastIndexOf("/");ee!=-1&&(V=S.h.slice(0,ee+1)+V)}if(ee=V,ee==".."||ee==".")V="";else if(ee.indexOf("./")!=-1||ee.indexOf("/.")!=-1){V=ee.lastIndexOf("/",0)==0,ee=ee.split("/");const re=[];for(let ke=0;ke<ee.length;){const ut=ee[ke++];ut=="."?V&&ke==ee.length&&re.push(""):ut==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),V&&ke==ee.length&&re.push("")):(re.push(ut),V=!0)}V=re.join("/")}else V=ee}return k?S.h=V:k=x.i.toString()!=="",k?Ie(S,Mi(x.i)):k=!!x.m,k&&(S.m=x.m),S};function he(x){return new K(x)}function me(x,S,k){x.j=k?je(S,!0):S,x.j&&(x.j=x.j.replace(/:$/,""))}function Ve(x,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);x.u=S}else x.u=null}function Ie(x,S,k){S instanceof Zt?(x.i=S,za(x.i,x.l)):(k||(S=Ze(S,Vt)),x.i=new Zt(S,x.l))}function Ee(x,S,k){x.i.set(S,k)}function He(x){return Ee(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function je(x,S){return x?S?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Ze(x,S,k){return typeof x=="string"?(x=encodeURI(x).replace(S,qe),k&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function qe(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var Ye=/[#\/\?@]/g,mt=/[#\?:]/g,Et=/[#\?]/g,Vt=/[#\?@]/g,gn=/#/g;function Zt(x,S){this.h=this.g=null,this.i=x||null,this.j=!!S}function en(x){x.g||(x.g=new Map,x.h=0,x.i&&ra(x.i,function(S,k){x.add(decodeURIComponent(S.replace(/\+/g," ")),k)}))}n=Zt.prototype,n.add=function(x,S){en(this),this.i=null,x=ci(this,x);let k=this.g.get(x);return k||this.g.set(x,k=[]),k.push(S),this.h+=1,this};function Ii(x,S){en(x),S=ci(x,S),x.g.has(S)&&(x.i=null,x.h-=x.g.get(S).length,x.g.delete(S))}function oa(x,S){return en(x),S=ci(x,S),x.g.has(S)}n.forEach=function(x,S){en(this),this.g.forEach(function(k,V){k.forEach(function(ee){x.call(S,ee,V,this)},this)},this)};function Ri(x,S){en(x);let k=[];if(typeof S=="string")oa(x,S)&&(k=k.concat(x.g.get(ci(x,S))));else for(x=Array.from(x.g.values()),S=0;S<x.length;S++)k=k.concat(x[S]);return k}n.set=function(x,S){return en(this),this.i=null,x=ci(this,x),oa(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[S]),this.h+=1,this},n.get=function(x,S){return x?(x=Ri(this,x),x.length>0?String(x[0]):S):S};function qs(x,S,k){Ii(x,S),k.length>0&&(x.i=null,x.g.set(ci(x,S),E(k)),x.h+=k.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],S=Array.from(this.g.keys());for(let V=0;V<S.length;V++){var k=S[V];const ee=li(k);k=Ri(this,k);for(let re=0;re<k.length;re++){let ke=ee;k[re]!==""&&(ke+="="+li(k[re])),x.push(ke)}}return this.i=x.join("&")};function Mi(x){const S=new Zt;return S.i=x.i,x.g&&(S.g=new Map(x.g),S.h=x.h),S}function ci(x,S){return S=String(S),x.j&&(S=S.toLowerCase()),S}function za(x,S){S&&!x.j&&(en(x),x.i=null,x.g.forEach(function(k,V){const ee=V.toLowerCase();V!=ee&&(Ii(this,V),qs(this,ee,k))},x)),x.j=S}function ui(x,S){const k=new Ot;if(u.Image){const V=new Image;V.onload=y(Ks,k,"TestLoadImage: loaded",!0,S,V),V.onerror=y(Ks,k,"TestLoadImage: error",!1,S,V),V.onabort=y(Ks,k,"TestLoadImage: abort",!1,S,V),V.ontimeout=y(Ks,k,"TestLoadImage: timeout",!1,S,V),u.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=x}else S(!1)}function uc(x,S){const k=new Ot,V=new AbortController,ee=setTimeout(()=>{V.abort(),Ks(k,"TestPingServer: timeout",!1,S)},1e4);fetch(x,{signal:V.signal}).then(re=>{clearTimeout(ee),re.ok?Ks(k,"TestPingServer: ok",!0,S):Ks(k,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ee),Ks(k,"TestPingServer: error",!1,S)})}function Ks(x,S,k,V,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),V(k)}catch{}}function Ha(){this.g=new ta}function Di(x){this.i=x.Sb||null,this.h=x.ab||!1}_(Di,Ai),Di.prototype.g=function(){return new Jr(this.i,this.h)};function Jr(x,S){Mt.call(this),this.H=x,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Jr,Mt),n=Jr.prototype,n.open=function(x,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=S,this.readyState=1,di(this)},n.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(S.body=x),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=0},n.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zo(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function zo(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}n.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var S=x.value?x.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!x.done}))&&(this.response=this.responseText+=S)}x.done?qa(this):di(this),this.readyState==3&&zo(this)}},n.Oa=function(x){this.g&&(this.response=this.responseText=x,qa(this))},n.Na=function(x){this.g&&(this.response=x,qa(this))},n.ga=function(){this.g&&qa(this)};function qa(x){x.readyState=4,x.l=null,x.j=null,x.B=null,di(x)}n.setRequestHeader=function(x,S){this.A.append(x,S)},n.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],S=this.h.entries();for(var k=S.next();!k.done;)k=k.value,x.push(k[0]+": "+k[1]),k=S.next();return x.join(`\r
`)};function di(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Jr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function $s(x){let S="";return Me(x,function(k,V){S+=V,S+=":",S+=k,S+=`\r
`}),S}function Qr(x,S,k){e:{for(V in k){var V=!1;break e}V=!0}V||(k=$s(k),typeof x=="string"?k!=null&&li(k):Ee(x,S,k))}function Kt(x){Mt.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Kt,Mt);var ji=/^https?$/i,dc=["POST","PUT"];n=Kt.prototype,n.Fa=function(x){this.H=x},n.ea=function(x,S,k,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);S=S?S.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fa.g(),this.g.onreadystatechange=T(f(this.Ca,this));try{this.B=!0,this.g.open(S,String(x),!0),this.B=!1}catch(re){Wr(this,re);return}if(x=k||"",k=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var ee in V)k.set(ee,V[ee]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const re of V.keys())k.set(re,V.get(re));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(k.keys()).find(re=>re.toLowerCase()=="content-type"),ee=u.FormData&&x instanceof u.FormData,!(Array.prototype.indexOf.call(dc,S,void 0)>=0)||V||ee||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,ke]of k)this.g.setRequestHeader(re,ke);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(re){Wr(this,re)}};function Wr(x,S){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=S,x.o=5,hc(x),la(x)}function hc(x){x.A||(x.A=!0,xt(x,"complete"),xt(x,"error"))}n.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,xt(this,"complete"),xt(this,"abort"),la(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),la(this,!0)),Kt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Xr(this):this.Xa())},n.Xa=function(){Xr(this)};function Xr(x){if(x.h&&typeof l<"u"){if(x.v&&hi(x)==4)setTimeout(x.Ca.bind(x),0);else if(xt(x,"readystatechange"),hi(x)==4){x.h=!1;try{const re=x.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var k;if(!(k=S)){var V;if(V=re===0){let ke=String(x.D).match(Fo)[1]||null;!ke&&u.self&&u.self.location&&(ke=u.self.location.protocol.slice(0,-1)),V=!ji.test(ke?ke.toLowerCase():"")}k=V}if(k)xt(x,"complete"),xt(x,"success");else{x.o=6;try{var ee=hi(x)>2?x.g.statusText:""}catch{ee=""}x.l=ee+" ["+x.ca()+"]",hc(x)}}finally{la(x)}}}}function la(x,S){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const k=x.g;x.g=null,S||xt(x,"ready");try{k.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function hi(x){return x.g?x.g.readyState:0}n.ca=function(){try{return hi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(x){if(this.g){var S=this.g.responseText;return x&&S.indexOf(x)==0&&(S=S.substring(x.length)),Vs(S)}};function qn(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function ca(x){const S={};x=(x.g&&hi(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<x.length;V++){if(O(x[V]))continue;var k=Vo(x[V]);const ee=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const re=S[ee]||[];S[ee]=re,re.push(k)}ne(S,function(V){return V.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pi(x,S,k){return k&&k.internalChannelParams&&k.internalChannelParams[x]||S}function Ka(x){this.za=0,this.i=[],this.j=new Ot,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Pi("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Pi("baseRetryDelayMs",5e3,x),this.Za=Pi("retryDelaySeedMs",1e4,x),this.Ta=Pi("forwardChannelMaxRetries",2,x),this.va=Pi("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new Hr(x&&x.concurrentRequestLimit),this.Ba=new Ha,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ka.prototype,n.ka=8,n.I=1,n.connect=function(x,S,k,V){Xt(0),this.W=x,this.H=S||{},k&&V!==void 0&&(this.H.OSID=k,this.H.OAID=V),this.F=this.X,this.J=Hu(this,null,this.W),Li(this)};function fc(x){if(Ho(x),x.I==3){var S=x.V++,k=he(x.J);if(Ee(k,"SID",x.M),Ee(k,"RID",S),Ee(k,"TYPE","terminate"),Zr(x,k),S=new ks(x,x.j,S),S.M=2,S.A=He(he(k)),k=!1,u.navigator&&u.navigator.sendBeacon)try{k=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!k&&u.Image&&(new Image().src=S.A,k=!0),k||(S.g=qu(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Gs(S)}zu(x)}function $a(x){x.g&&(pc(x),x.g.cancel(),x.g=null)}function Ho(x){$a(x),x.v&&(u.clearTimeout(x.v),x.v=null),Ko(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&u.clearTimeout(x.m),x.m=null)}function Li(x){if(!qr(x.h)&&!x.m){x.m=!0;var S=x.Ea;X||N(),J||(X(),J=!0),j.add(S,x),x.D=0}}function qo(x,S){return zs(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=S.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=Fn(f(x.Ea,x,S),Fu(x,x.D)),x.D++,!0)}n.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const ee=new ks(this,this.j,x);let re=this.o;if(this.U&&(re?(re=z(re),fe(re,this.U)):re=this.U),this.u!==null||this.R||(ee.J=re,re=null),this.S)e:{for(var S=0,k=0;k<this.i.length;k++){t:{var V=this.i[k];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(S+=V,S>4096){S=k;break e}if(S===4096||k===this.i.length-1){S=k+1;break e}}S=1e3}else S=1e3;S=Ou(this,ee,S),k=he(this.J),Ee(k,"RID",x),Ee(k,"CVER",22),this.G&&Ee(k,"X-HTTP-Session-Id",this.G),Zr(this,k),re&&(this.R?S="headers="+li($s(re))+"&"+S:this.u&&Qr(k,this.u,re)),Kr(this.h,ee),this.Ra&&Ee(k,"TYPE","init"),this.S?(Ee(k,"$req",S),Ee(k,"SID","null"),ee.U=!0,Bs(ee,k,null)):Bs(ee,k,S),this.I=2}}else this.I==3&&(x?mc(this,x):this.i.length==0||qr(this.h)||mc(this))};function mc(x,S){var k;S?k=S.l:k=x.V++;const V=he(x.J);Ee(V,"SID",x.M),Ee(V,"RID",k),Ee(V,"AID",x.K),Zr(x,V),x.u&&x.o&&Qr(V,x.u,x.o),k=new ks(x,x.j,k,x.D+1),x.u===null&&(k.J=x.o),S&&(x.i=S.G.concat(x.i)),S=Ou(x,k,1e3),k.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),Kr(x.h,k),Bs(k,V,S)}function Zr(x,S){x.H&&Me(x.H,function(k,V){Ee(S,V,k)}),x.l&&Me({},function(k,V){Ee(S,V,k)})}function Ou(x,S,k){k=Math.min(x.i.length,k);const V=x.l?f(x.l.Ka,x.l,x):null;e:{var ee=x.i;let ut=-1;for(;;){const xn=["count="+k];ut==-1?k>0?(ut=ee[0].g,xn.push("ofs="+ut)):ut=0:xn.push("ofs="+ut);let Dt=!0;for(let an=0;an<k;an++){var re=ee[an].g;const Ys=ee[an].map;if(re-=ut,re<0)ut=Math.max(0,ee[an].g-100),Dt=!1;else try{re="req"+re+"_"||"";try{var ke=Ys instanceof Map?Ys:Object.entries(Ys);for(const[Oi,fi]of ke){let mi=fi;h(fi)&&(mi=ws(fi)),xn.push(re+Oi+"="+encodeURIComponent(mi))}}catch(Oi){throw xn.push(re+"type="+encodeURIComponent("_badmap")),Oi}}catch{V&&V(Ys)}}if(Dt){ke=xn.join("&");break e}}ke=void 0}return x=x.i.splice(0,k),S.G=x,ke}function Vu(x){if(!x.g&&!x.v){x.Y=1;var S=x.Da;X||N(),J||(X(),J=!0),j.add(S,x),x.A=0}}function eo(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=Fn(f(x.Da,x),Fu(x,x.A)),x.A++,!0)}n.Da=function(){if(this.v=null,Bu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=Fn(f(this.Wa,this),x)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Xt(10),$a(this),Bu(this))};function pc(x){x.B!=null&&(u.clearTimeout(x.B),x.B=null)}function Bu(x){x.g=new ks(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var S=he(x.na);Ee(S,"RID","rpc"),Ee(S,"SID",x.M),Ee(S,"AID",x.K),Ee(S,"CI",x.F?"0":"1"),!x.F&&x.ia&&Ee(S,"TO",x.ia),Ee(S,"TYPE","xmlhttp"),Zr(x,S),x.u&&x.o&&Qr(S,x.u,x.o),x.O&&(x.g.H=x.O);var k=x.g;x=x.ba,k.M=1,k.A=He(he(S)),k.u=null,k.R=!0,ia(k,x)}n.Va=function(){this.C!=null&&(this.C=null,$a(this),eo(this),Xt(19))};function Ko(x){x.C!=null&&(u.clearTimeout(x.C),x.C=null)}function Gu(x,S){var k=null;if(x.g==S){Ko(x),pc(x),x.g=null;var V=2}else if(Hs(x.h,S))k=S.G,$r(x.h,S),V=1;else return;if(x.I!=0){if(S.o)if(V==1){k=S.u?S.u.length:0,S=Date.now()-S.F;var ee=x.D;V=Mn(),xt(V,new ls(V,k)),Li(x)}else Vu(x);else if(ee=S.m,ee==3||ee==0&&S.X>0||!(V==1&&qo(x,S)||V==2&&eo(x)))switch(k&&k.length>0&&(S=x.h,S.i=S.i.concat(k)),ee){case 1:Ui(x,5);break;case 4:Ui(x,10);break;case 3:Ui(x,6);break;default:Ui(x,2)}}}function Fu(x,S){let k=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(k*=2),k*S}function Ui(x,S){if(x.j.info("Error code "+S),S==2){var k=f(x.bb,x),V=x.Ua;const ee=!V;V=new K(V||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||me(V,"https"),He(V),ee?ui(V.toString(),k):uc(V.toString(),k)}else Xt(2);x.I=0,x.l&&x.l.pa(S),zu(x),Ho(x)}n.bb=function(x){x?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function zu(x){if(x.I=0,x.ja=[],x.l){const S=Yr(x.h);(S.length!=0||x.i.length!=0)&&(M(x.ja,S),M(x.ja,x.i),x.h.i.length=0,E(x.i),x.i.length=0),x.l.oa()}}function Hu(x,S,k){var V=k instanceof K?he(k):new K(k);if(V.g!="")S&&(V.g=S+"."+V.g),Ve(V,V.u);else{var ee=u.location;V=ee.protocol,S=S?S+"."+ee.hostname:ee.hostname,ee=+ee.port;const re=new K(null);V&&me(re,V),S&&(re.g=S),ee&&Ve(re,ee),k&&(re.h=k),V=re}return k=x.G,S=x.wa,k&&S&&Ee(V,k,S),Ee(V,"VER",x.ka),Zr(x,V),V}function qu(x,S,k){if(S&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=x.Aa&&!x.ma?new Kt(new Di({ab:k})):new Kt(x.ma),S.Fa(x.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ku(){}n=Ku.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ya(){}Ya.prototype.g=function(x,S){return new us(x,S)};function us(x,S){Mt.call(this),this.g=new Ka(S),this.l=x,this.h=S&&S.messageUrlParams||null,x=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(x?x["X-WebChannel-Content-Type"]=S.messageContentType:x={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(x?x["X-WebChannel-Client-Profile"]=S.sa:x={"X-WebChannel-Client-Profile":S.sa}),this.g.U=x,(x=S&&S.Qb)&&!O(x)&&(this.g.u=x),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!O(S)&&(this.g.G=S,x=this.h,x!==null&&S in x&&(x=this.h,S in x&&delete x[S])),this.j=new ua(this)}_(us,Mt),us.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},us.prototype.close=function(){fc(this.g)},us.prototype.o=function(x){var S=this.g;if(typeof x=="string"){var k={};k.__data__=x,x=k}else this.v&&(k={},k.__data__=ws(x),x=k);S.i.push(new dn(S.Ya++,x)),S.I==3&&Li(S)},us.prototype.N=function(){this.g.l=null,delete this.j,fc(this.g),delete this.g,us.Z.N.call(this)};function $u(x){we.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var S=x.__sm__;if(S){e:{for(const k in S){x=k;break e}x=void 0}(this.i=x)&&(x=this.i,S=S!==null&&x in S?S[x]:void 0),this.data=S}else this.data=x}_($u,we);function Yu(){ze.call(this),this.status=1}_(Yu,ze);function ua(x){this.g=x}_(ua,Ku),ua.prototype.ra=function(){xt(this.g,"a")},ua.prototype.qa=function(x){xt(this.g,new $u(x))},ua.prototype.pa=function(x){xt(this.g,new Yu)},ua.prototype.oa=function(){xt(this.g,"b")},Ya.prototype.createWebChannel=Ya.prototype.g,us.prototype.send=us.prototype.o,us.prototype.open=us.prototype.m,us.prototype.close=us.prototype.close,rw=function(){return new Ya},aw=function(){return Mn()},iw=st,Ip={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},na.NO_ERROR=0,na.TIMEOUT=8,na.HTTP_ERROR=6,ph=na,zr.COMPLETE="complete",sw=zr,Ne.EventType=Se,Se.OPEN="a",Se.CLOSE="b",Se.ERROR="c",Se.MESSAGE="d",Mt.prototype.listen=Mt.prototype.J,su=Ne,Kt.prototype.listenOnce=Kt.prototype.K,Kt.prototype.getLastError=Kt.prototype.Ha,Kt.prototype.getLastErrorCode=Kt.prototype.ya,Kt.prototype.getStatus=Kt.prototype.ca,Kt.prototype.getResponseJson=Kt.prototype.La,Kt.prototype.getResponseText=Kt.prototype.la,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Fa,nw=Kt}).apply(typeof sh<"u"?sh:typeof self<"u"?self:typeof window<"u"?window:{});const aS="@firebase/firestore",rS="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let is=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};is.UNAUTHENTICATED=new is(null),is.GOOGLE_CREDENTIALS=new is("google-credentials-uid"),is.FIRST_PARTY=new is("first-party-uid"),is.MOCK_USER=new is("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ec="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new pg("@firebase/firestore");function wl(){return Co.logLevel}function Pe(n,...e){if(Co.logLevel<=vt.DEBUG){const t=e.map(yg);Co.debug(`Firestore (${ec}): ${n}`,...t)}}function Ma(n,...e){if(Co.logLevel<=vt.ERROR){const t=e.map(yg);Co.error(`Firestore (${ec}): ${n}`,...t)}}function Ol(n,...e){if(Co.logLevel<=vt.WARN){const t=e.map(yg);Co.warn(`Firestore (${ec}): ${n}`,...t)}}function yg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,ow(n,s,t)}function ow(n,e,t){let s=`FIRESTORE (${ec}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ma(s),new Error(s)}function Bt(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||ow(e,a,s)}function ct(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Va{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(is.UNAUTHENTICATED)))}shutdown(){}}class x6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class y6{constructor(e){this.t=e,this.currentUser=is.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Bt(this.o===void 0,42304);let s=this.i;const a=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let l=new Ca;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ca,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},h=m=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ca)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Bt(typeof s.accessToken=="string",31837,{l:s}),new lw(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Bt(e===null||typeof e=="string",2055,{h:e}),new is(e)}}class b6{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=is.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class v6{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new b6(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(is.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class oS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _6{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Bt(this.o===void 0,3512);const s=l=>{l.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,Pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new oS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Bt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new oS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=T6(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function _t(n,e){return n<e?-1:n>e?1:0}function Rp(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const a=n.charAt(s),l=e.charAt(s);if(a!==l)return X0(a)===X0(l)?_t(a,l):X0(a)?1:-1}return _t(n.length,e.length)}const S6=55296,E6=57343;function X0(n){const e=n.charCodeAt(0);return e>=S6&&e<=E6}function Vl(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="__name__";class zi{constructor(e,t,s){t===void 0?t=0:t>e.length&&tt(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&tt(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return zi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=zi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return _t(e.length,t.length)}static compareSegments(e,t){const s=zi.isNumericId(e),a=zi.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?zi.extractNumericId(e).compare(zi.extractNumericId(t)):Rp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return kr.fromString(e.substring(4,e.length-2))}}class Wt extends zi{construct(e,t,s){return new Wt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Re(ge.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new Wt(t)}static emptyPath(){return new Wt([])}}const w6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wn extends zi{construct(e,t,s){return new Wn(e,t,s)}static isValidIdentifier(e){return w6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lS}static keyField(){return new Wn([lS])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new Re(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new Re(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Re(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(s+=h,a++):(l(),a++)}if(l(),u)throw new Re(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wn(t)}static emptyPath(){return new Wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Wt.fromString(e))}static fromName(e){return new $e(Wt.fromString(e).popFirst(5))}static empty(){return new $e(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Wt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(n,e,t){if(!t)throw new Re(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function N6(n,e,t,s){if(e===!0&&s===!0)throw new Re(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cS(n){if(!$e.isDocumentKey(n))throw new Re(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uS(n){if($e.isDocumentKey(n))throw new Re(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function pf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":tt(12329,{type:typeof n})}function Ss(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pf(n);throw new Re(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function k6(n,e){if(e<=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(n,e){const t={typeString:n};return e&&(t.value=e),t}function ku(n,e){if(!uw(n))throw new Re(ge.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(a&&typeof u!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new Re(ge.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=-62135596800,hS=1e6;class sn{static now(){return sn.fromMillis(Date.now())}static fromDate(e){return sn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*hS);return new sn(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<dS)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hS}_compareTo(e){return this.seconds===e.seconds?_t(this.nanoseconds,e.nanoseconds):_t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:sn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ku(e,sn._jsonSchema))return new sn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}sn._jsonSchemaVersion="firestore/timestamp/1.0",sn._jsonSchema={type:In("string",sn._jsonSchemaVersion),seconds:In("number"),nanoseconds:In("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{static fromTimestamp(e){return new ot(e)}static min(){return new ot(new sn(0,0))}static max(){return new ot(new sn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=-1;function A6(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=ot.fromTimestamp(s===1e9?new sn(t+1,0):new sn(t,s));return new Ir(a,$e.empty(),e)}function C6(n){return new Ir(n.readTime,n.key,pu)}class Ir{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ir(ot.min(),$e.empty(),pu)}static max(){return new Ir(ot.max(),$e.empty(),pu)}}function I6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$e.comparator(n.documentKey,e.documentKey),t!==0?t:_t(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==R6)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new be(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof be?t:be.resolve(t)}catch(t){return be.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):be.reject(t)}static resolve(e){return new be(((t,s)=>{t(e)}))}static reject(e){return new be(((t,s)=>{s(e)}))}static waitFor(e){return new be(((t,s)=>{let a=0,l=0,u=!1;e.forEach((h=>{++a,h.next((()=>{++l,u&&l===a&&t()}),(m=>s(m)))})),u=!0,l===a&&t()}))}static or(e){let t=be.resolve(!1);for(const s of e)t=t.next((a=>a?be.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new be(((s,a)=>{const l=e.length,u=new Array(l);let h=0;for(let m=0;m<l;m++){const f=m;t(e[f]).next((y=>{u[f]=y,++h,h===l&&s(u)}),(y=>a(y)))}}))}static doWhile(e,t){return new be(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function D6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function nc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=-1;function xf(n){return n==null}function Ph(n){return n===0&&1/n==-1/0}function j6(n){return typeof n=="number"&&Number.isInteger(n)&&!Ph(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="";function P6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fS(e)),e=L6(n.get(t),e);return fS(e)}function L6(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case dw:t+="";break;default:t+=l}}return t}function fS(n){return n+dw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Br(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t){this.comparator=e,this.root=t||Qn.EMPTY}insert(e,t){return new cn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(e){return new cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ih(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ih(this.root,e,this.comparator,!1)}getReverseIterator(){return new ih(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ih(this.root,e,this.comparator,!0)}}class ih{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Qn.RED,this.left=a??Qn.EMPTY,this.right=l??Qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Qn(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Qn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Qn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw tt(27949);return e+(this.isRed()?0:1)}}Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1;Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new Qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.comparator=e,this.data=new cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pS(this.data.getIterator())}getIteratorFrom(e){return new pS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class pS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.fields=e,e.sort(Wn.comparator)}static empty(){return new Ls([])}unionWith(e){let t=new jn(Wn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vl(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new fw("Invalid base64 string: "+l):l}})(e);return new Zn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Zn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zn.EMPTY_BYTE_STRING=new Zn("");const U6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(n){if(Bt(!!n,39018),typeof n=="string"){let e=0;const t=U6.exec(n);if(Bt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:vn(n.seconds),nanos:vn(n.nanos)}}function vn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Mr(n){return typeof n=="string"?Zn.fromBase64String(n):Zn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="server_timestamp",pw="__type__",gw="__previous_value__",xw="__local_write_time__";function _g(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[pw])==null?void 0:s.stringValue)===mw}function yf(n){const e=n.mapValue.fields[gw];return _g(e)?yf(e):e}function gu(n){const e=Rr(n.mapValue.fields[xw].timestampValue);return new sn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,t,s,a,l,u,h,m,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=f,this.isUsingEmulator=y}}const Lh="(default)";class xu{constructor(e,t){this.projectId=e,this.database=t||Lh}static empty(){return new xu("","")}get isDefaultDatabase(){return this.database===Lh}isEqual(e){return e instanceof xu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="__type__",V6="__max__",ah={mapValue:{}},bw="__vector__",Uh="value";function Dr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_g(n)?4:G6(n)?9007199254740991:B6(n)?10:11:tt(28295,{value:n})}function Ji(n,e){if(n===e)return!0;const t=Dr(n);if(t!==Dr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gu(n).isEqual(gu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Rr(a.timestampValue),h=Rr(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Mr(a.bytesValue).isEqual(Mr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return vn(a.geoPointValue.latitude)===vn(l.geoPointValue.latitude)&&vn(a.geoPointValue.longitude)===vn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return vn(a.integerValue)===vn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=vn(a.doubleValue),h=vn(l.doubleValue);return u===h?Ph(u)===Ph(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return Vl(n.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(mS(u)!==mS(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(h[m]===void 0||!Ji(u[m],h[m])))return!1;return!0})(n,e);default:return tt(52216,{left:n})}}function yu(n,e){return(n.values||[]).find((t=>Ji(t,e)))!==void 0}function Bl(n,e){if(n===e)return 0;const t=Dr(n),s=Dr(e);if(t!==s)return _t(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return _t(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const h=vn(l.integerValue||l.doubleValue),m=vn(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(n,e);case 3:return gS(n.timestampValue,e.timestampValue);case 4:return gS(gu(n),gu(e));case 5:return Rp(n.stringValue,e.stringValue);case 6:return(function(l,u){const h=Mr(l),m=Mr(u);return h.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const h=l.split("/"),m=u.split("/");for(let f=0;f<h.length&&f<m.length;f++){const y=_t(h[f],m[f]);if(y!==0)return y}return _t(h.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const h=_t(vn(l.latitude),vn(u.latitude));return h!==0?h:_t(vn(l.longitude),vn(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return xS(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var T,E,M,A;const h=l.fields||{},m=u.fields||{},f=(T=h[Uh])==null?void 0:T.arrayValue,y=(E=m[Uh])==null?void 0:E.arrayValue,_=_t(((M=f==null?void 0:f.values)==null?void 0:M.length)||0,((A=y==null?void 0:y.values)==null?void 0:A.length)||0);return _!==0?_:xS(f,y)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===ah.mapValue&&u===ah.mapValue)return 0;if(l===ah.mapValue)return 1;if(u===ah.mapValue)return-1;const h=l.fields||{},m=Object.keys(h),f=u.fields||{},y=Object.keys(f);m.sort(),y.sort();for(let _=0;_<m.length&&_<y.length;++_){const T=Rp(m[_],y[_]);if(T!==0)return T;const E=Bl(h[m[_]],f[y[_]]);if(E!==0)return E}return _t(m.length,y.length)})(n.mapValue,e.mapValue);default:throw tt(23264,{he:t})}}function gS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return _t(n,e);const t=Rr(n),s=Rr(e),a=_t(t.seconds,s.seconds);return a!==0?a:_t(t.nanos,s.nanos)}function xS(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=Bl(t[a],s[a]);if(l)return l}return _t(t.length,s.length)}function Gl(n){return Mp(n)}function Mp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Rr(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Mr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return $e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=Mp(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${Mp(t.fields[u])}`;return a+"}"})(n.mapValue):tt(61005,{value:n})}function gh(n){switch(Dr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yf(n);return e?16+gh(e):16;case 5:return 2*n.stringValue.length;case 6:return Mr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+gh(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return Br(s.fields,((l,u)=>{a+=l.length+gh(u)})),a})(n.mapValue);default:throw tt(13486,{value:n})}}function yS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Dp(n){return!!n&&"integerValue"in n}function Tg(n){return!!n&&"arrayValue"in n}function bS(n){return!!n&&"nullValue"in n}function vS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xh(n){return!!n&&"mapValue"in n}function B6(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[yw])==null?void 0:s.stringValue)===bw}function lu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Br(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=lu(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lu(n.arrayValue.values[t]);return e}return{...n}}function G6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===V6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.value=e}static empty(){return new Ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!xh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(t)}setAll(e){let t=Wn.emptyPath(),s={},a=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,s,a),s={},a=[],t=h.popLast()}u?s[h.lastSegment()]=lu(u):a.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());xh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];xh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Br(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new Ts(lu(this.value))}}function vw(n){const e=[];return Br(n.fields,((t,s)=>{const a=new Wn([t]);if(xh(s)){const l=vw(s.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new Ls(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t,s,a,l,u,h){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new as(e,0,ot.min(),ot.min(),ot.min(),Ts.empty(),0)}static newFoundDocument(e,t,s,a){return new as(e,1,t,ot.min(),s,a,0)}static newNoDocument(e,t){return new as(e,2,t,ot.min(),ot.min(),Ts.empty(),0)}static newUnknownDocument(e,t){return new as(e,3,t,ot.min(),ot.min(),Ts.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof as&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new as(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t){this.position=e,this.inclusive=t}}function _S(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?s=$e.comparator($e.fromName(u.referenceValue),t.key):s=Bl(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function TS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ji(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t="asc"){this.field=e,this.dir=t}}function F6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{}class Cn extends _w{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new H6(e,t,s):t==="array-contains"?new $6(e,s):t==="in"?new Y6(e,s):t==="not-in"?new J6(e,s):t==="array-contains-any"?new Q6(e,s):new Cn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new q6(e,s):new K6(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bl(t,this.value)):t!==null&&Dr(this.value)===Dr(t)&&this.matchesComparison(Bl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wi extends _w{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new wi(e,t)}matches(e){return Tw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Tw(n){return n.op==="and"}function Sw(n){return z6(n)&&Tw(n)}function z6(n){for(const e of n.filters)if(e instanceof wi)return!1;return!0}function jp(n){if(n instanceof Cn)return n.field.canonicalString()+n.op.toString()+Gl(n.value);if(Sw(n))return n.filters.map((e=>jp(e))).join(",");{const e=n.filters.map((t=>jp(t))).join(",");return`${n.op}(${e})`}}function Ew(n,e){return n instanceof Cn?(function(s,a){return a instanceof Cn&&s.op===a.op&&s.field.isEqual(a.field)&&Ji(s.value,a.value)})(n,e):n instanceof wi?(function(s,a){return a instanceof wi&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,u,h)=>l&&Ew(u,a.filters[h])),!0):!1})(n,e):void tt(19439)}function ww(n){return n instanceof Cn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Gl(t.value)}`})(n):n instanceof wi?(function(t){return t.op.toString()+" {"+t.getFilters().map(ww).join(" ,")+"}"})(n):"Filter"}class H6 extends Cn{constructor(e,t,s){super(e,t,s),this.key=$e.fromName(s.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.matchesComparison(t)}}class q6 extends Cn{constructor(e,t){super(e,"in",t),this.keys=Nw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class K6 extends Cn{constructor(e,t){super(e,"not-in",t),this.keys=Nw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Nw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>$e.fromName(s.referenceValue)))}class $6 extends Cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Tg(t)&&yu(t.arrayValue,this.value)}}class Y6 extends Cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yu(this.value.arrayValue,t)}}class J6 extends Cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yu(this.value.arrayValue,t)}}class Q6 extends Cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Tg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>yu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,t=null,s=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Te=null}}function SS(n,e=null,t=[],s=[],a=null,l=null,u=null){return new W6(n,e,t,s,a,l,u)}function Sg(n){const e=ct(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>jp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),xf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Gl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Gl(s))).join(",")),e.Te=t}return e.Te}function Eg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!F6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ew(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!TS(n.startAt,e.startAt)&&TS(n.endAt,e.endAt)}function Pp(n){return $e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,t=null,s=[],a=[],l=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function X6(n,e,t,s,a,l,u,h){return new sc(n,e,t,s,a,l,u,h)}function bf(n){return new sc(n)}function ES(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kw(n){return n.collectionGroup!==null}function cu(n){const e=ct(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new jn(Wn.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((f=>{f.isInequality()&&(h=h.add(f.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new bu(l,s))})),t.has(Wn.keyField().canonicalString())||e.Ie.push(new bu(Wn.keyField(),s))}return e.Ie}function Hi(n){const e=ct(n);return e.Ee||(e.Ee=Z6(e,cu(n))),e.Ee}function Z6(n,e){if(n.limitType==="F")return SS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new bu(a.field,l)}));const t=n.endAt?new Oh(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Oh(n.startAt.position,n.startAt.inclusive):null;return SS(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Lp(n,e){const t=n.filters.concat([e]);return new sc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vh(n,e,t){return new sc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vf(n,e){return Eg(Hi(n),Hi(e))&&n.limitType===e.limitType}function Aw(n){return`${Sg(Hi(n))}|lt:${n.limitType}`}function Nl(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>ww(a))).join(", ")}]`),xf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>Gl(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>Gl(a))).join(",")),`Target(${s})`})(Hi(n))}; limitType=${n.limitType})`}function _f(n,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):$e.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,a){for(const l of cu(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(u,h,m){const f=_S(u,h,m);return u.inclusive?f<=0:f<0})(s.startAt,cu(s),a)||s.endAt&&!(function(u,h,m){const f=_S(u,h,m);return u.inclusive?f>=0:f>0})(s.endAt,cu(s),a))})(n,e)}function e3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Cw(n){return(e,t)=>{let s=!1;for(const a of cu(n)){const l=t3(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function t3(n,e,t){const s=n.field.isKeyField()?$e.comparator(e.key,t.key):(function(l,u,h){const m=u.data.field(l),f=h.data.field(l);return m!==null&&f!==null?Bl(m,f):tt(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return tt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Br(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return hw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=new cn($e.comparator);function Da(){return n3}const Iw=new cn($e.comparator);function iu(...n){let e=Iw;for(const t of n)e=e.insert(t.key,t);return e}function Rw(n){let e=Iw;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function _o(){return uu()}function Mw(){return uu()}function uu(){return new Po((n=>n.toString()),((n,e)=>n.isEqual(e)))}const s3=new cn($e.comparator),i3=new jn($e.comparator);function Tt(...n){let e=i3;for(const t of n)e=e.add(t);return e}const a3=new jn(_t);function r3(){return a3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function Dw(n){return{integerValue:""+n}}function o3(n,e){return j6(e)?Dw(e):wg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(){this._=void 0}}function l3(n,e,t){return n instanceof Bh?(function(a,l){const u={fields:{[pw]:{stringValue:mw},[xw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&_g(l)&&(l=yf(l)),l&&(u.fields[gw]=l),{mapValue:u}})(t,e):n instanceof vu?Pw(n,e):n instanceof _u?Lw(n,e):(function(a,l){const u=jw(a,l),h=wS(u)+wS(a.Ae);return Dp(u)&&Dp(a.Ae)?Dw(h):wg(a.serializer,h)})(n,e)}function c3(n,e,t){return n instanceof vu?Pw(n,e):n instanceof _u?Lw(n,e):t}function jw(n,e){return n instanceof Gh?(function(s){return Dp(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Bh extends Tf{}class vu extends Tf{constructor(e){super(),this.elements=e}}function Pw(n,e){const t=Uw(e);for(const s of n.elements)t.some((a=>Ji(a,s)))||t.push(s);return{arrayValue:{values:t}}}class _u extends Tf{constructor(e){super(),this.elements=e}}function Lw(n,e){let t=Uw(e);for(const s of n.elements)t=t.filter((a=>!Ji(a,s)));return{arrayValue:{values:t}}}class Gh extends Tf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function wS(n){return vn(n.integerValue||n.doubleValue)}function Uw(n){return Tg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function u3(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof vu&&a instanceof vu||s instanceof _u&&a instanceof _u?Vl(s.elements,a.elements,Ji):s instanceof Gh&&a instanceof Gh?Ji(s.Ae,a.Ae):s instanceof Bh&&a instanceof Bh})(n.transform,e.transform)}class d3{constructor(e,t){this.version=e,this.transformResults=t}}class ai{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ai}static exists(e){return new ai(void 0,e)}static updateTime(e){return new ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Sf{}function Ow(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ng(n.key,ai.none()):new Au(n.key,n.data,ai.none());{const t=n.data,s=Ts.empty();let a=new jn(Wn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new Gr(n.key,s,new Ls(a.toArray()),ai.none())}}function h3(n,e,t){n instanceof Au?(function(a,l,u){const h=a.value.clone(),m=kS(a.fieldTransforms,l,u.transformResults);h.setAll(m),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Gr?(function(a,l,u){if(!yh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=kS(a.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(Vw(a)),m.setAll(h),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function du(n,e,t,s){return n instanceof Au?(function(l,u,h,m){if(!yh(l.precondition,u))return h;const f=l.value.clone(),y=AS(l.fieldTransforms,m,u);return f.setAll(y),u.convertToFoundDocument(u.version,f).setHasLocalMutations(),null})(n,e,t,s):n instanceof Gr?(function(l,u,h,m){if(!yh(l.precondition,u))return h;const f=AS(l.fieldTransforms,m,u),y=u.data;return y.setAll(Vw(l)),y.setAll(f),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(n,e,t,s):(function(l,u,h){return yh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function f3(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=jw(s.transform,a||null);l!=null&&(t===null&&(t=Ts.empty()),t.set(s.field,l))}return t||null}function NS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Vl(s,a,((l,u)=>u3(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Au extends Sf{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Gr extends Sf{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Vw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function kS(n,e,t){const s=new Map;Bt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,h=e.data.field(l.field);s.set(l.field,c3(u,h,t[a]))}return s}function AS(n,e,t){const s=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);s.set(a.field,l3(l,u,e))}return s}class Ng extends Sf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class m3 extends Sf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&h3(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=du(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=du(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Mw();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(a.key)?null:h;const m=Ow(u,h);m!==null&&s.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(ot.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Tt())}isEqual(e){return this.batchId===e.batchId&&Vl(this.mutations,e.mutations,((t,s)=>NS(t,s)))&&Vl(this.baseMutations,e.baseMutations,((t,s)=>NS(t,s)))}}class kg{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){Bt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return s3})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new kg(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var An,Nt;function y3(n){switch(n){case ge.OK:return tt(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return tt(15467,{code:n})}}function Bw(n){if(n===void 0)return Ma("GRPC error has no .code"),ge.UNKNOWN;switch(n){case An.OK:return ge.OK;case An.CANCELLED:return ge.CANCELLED;case An.UNKNOWN:return ge.UNKNOWN;case An.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case An.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case An.INTERNAL:return ge.INTERNAL;case An.UNAVAILABLE:return ge.UNAVAILABLE;case An.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case An.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case An.NOT_FOUND:return ge.NOT_FOUND;case An.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case An.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case An.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case An.ABORTED:return ge.ABORTED;case An.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case An.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case An.DATA_LOSS:return ge.DATA_LOSS;default:return tt(39323,{code:n})}}(Nt=An||(An={}))[Nt.OK=0]="OK",Nt[Nt.CANCELLED=1]="CANCELLED",Nt[Nt.UNKNOWN=2]="UNKNOWN",Nt[Nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nt[Nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nt[Nt.NOT_FOUND=5]="NOT_FOUND",Nt[Nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nt[Nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nt[Nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nt[Nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nt[Nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nt[Nt.ABORTED=10]="ABORTED",Nt[Nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nt[Nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nt[Nt.INTERNAL=13]="INTERNAL",Nt[Nt.UNAVAILABLE=14]="UNAVAILABLE",Nt[Nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3=new kr([4294967295,4294967295],0);function CS(n){const e=b3().encode(n),t=new tw;return t.update(e),new Uint8Array(t.digest())}function IS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new kr([t,s],0),new kr([a,l],0)]}class Ag{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new au(`Invalid padding: ${t}`);if(s<0)throw new au(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new au(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new au(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=kr.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(kr.fromNumber(s)));return a.compare(v3)===1&&(a=new kr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=CS(e),[s,a]=IS(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Ag(l,a,t);return s.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const t=CS(e),[s,a]=IS(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ef(ot.min(),a,new cn(_t),Da(),Tt())}}class Cu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Cu(s,t,Tt(),Tt(),Tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class Gw{constructor(e,t){this.targetId=e,this.Ce=t}}class Fw{constructor(e,t,s=Zn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class RS{constructor(){this.ve=0,this.Fe=MS(),this.Me=Zn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Tt(),t=Tt(),s=Tt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:tt(38017,{changeType:l})}})),new Cu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=MS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Bt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _3{constructor(e){this.Ge=e,this.ze=new Map,this.je=Da(),this.Je=rh(),this.He=rh(),this.Ye=new cn(_t)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:tt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Pp(l))if(s===0){const u=new $e(l.path);this.et(t,u,as.newNoDocument(u,ot.min()))}else Bt(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const h=this.ut(e),m=h?this.ct(h,e,u):1;if(m!==0){this.it(t);const f=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let u,h;try{u=Mr(s).toUint8Array()}catch(m){if(m instanceof fw)return Ol("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new Ag(u,a,l)}catch(m){return Ol(m instanceof au?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const h=this.ot(u);if(h){if(l.current&&Pp(h.target)){const m=new $e(h.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,as.newNoDocument(m,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let s=Tt();this.He.forEach(((l,u)=>{let h=!0;u.forEachWhile((m=>{const f=this.ot(m);return!f||f.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Ef(e,t,this.Ye,this.je,s);return this.je=Da(),this.Je=rh(),this.He=rh(),this.Ye=new cn(_t),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new RS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new jn(_t),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new jn(_t),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new RS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function rh(){return new cn($e.comparator)}function MS(){return new cn($e.comparator)}const T3={asc:"ASCENDING",desc:"DESCENDING"},S3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},E3={and:"AND",or:"OR"};class w3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Up(n,e){return n.useProto3Json||xf(e)?e:{value:e}}function Fh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function N3(n,e){return Fh(n,e.toTimestamp())}function qi(n){return Bt(!!n,49232),ot.fromTimestamp((function(t){const s=Rr(t);return new sn(s.seconds,s.nanos)})(n))}function Cg(n,e){return Op(n,e).canonicalString()}function Op(n,e){const t=(function(a){return new Wt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Hw(n){const e=Wt.fromString(n);return Bt(Jw(e),10190,{key:e.toString()}),e}function Vp(n,e){return Cg(n.databaseId,e.path)}function Z0(n,e){const t=Hw(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(Kw(t))}function qw(n,e){return Cg(n.databaseId,e)}function k3(n){const e=Hw(n);return e.length===4?Wt.emptyPath():Kw(e)}function Bp(n){return new Wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Kw(n){return Bt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function DS(n,e,t){return{name:Vp(n,e),fields:t.value.mapValue.fields}}function A3(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:tt(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(f,y){return f.useProto3Json?(Bt(y===void 0||typeof y=="string",58123),Zn.fromBase64String(y||"")):(Bt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Zn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(f){const y=f.code===void 0?ge.UNKNOWN:Bw(f.code);return new Re(y,f.message||"")})(u);t=new Fw(s,a,l,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Z0(n,s.document.name),l=qi(s.document.updateTime),u=s.document.createTime?qi(s.document.createTime):ot.min(),h=new Ts({mapValue:{fields:s.document.fields}}),m=as.newFoundDocument(a,l,u,h),f=s.targetIds||[],y=s.removedTargetIds||[];t=new bh(f,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Z0(n,s.document),l=s.readTime?qi(s.readTime):ot.min(),u=as.newNoDocument(a,l),h=s.removedTargetIds||[];t=new bh([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Z0(n,s.document),l=s.removedTargetIds||[];t=new bh([],l,a,null)}else{if(!("filter"in e))return tt(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new x3(a,l),h=s.targetId;t=new Gw(h,u)}}return t}function C3(n,e){let t;if(e instanceof Au)t={update:DS(n,e.key,e.value)};else if(e instanceof Ng)t={delete:Vp(n,e.key)};else if(e instanceof Gr)t={update:DS(n,e.key,e.data),updateMask:O3(e.fieldMask)};else{if(!(e instanceof m3))return tt(16599,{Vt:e.type});t={verify:Vp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const h=u.transform;if(h instanceof Bh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof vu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof _u)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Gh)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw tt(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:N3(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:tt(27497)})(n,e.precondition)),t}function I3(n,e){return n&&n.length>0?(Bt(e!==void 0,14353),n.map((t=>(function(a,l){let u=a.updateTime?qi(a.updateTime):qi(l);return u.isEqual(ot.min())&&(u=qi(l)),new d3(u,a.transformResults||[])})(t,e)))):[]}function R3(n,e){return{documents:[qw(n,e.path)]}}function M3(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=qw(n,a);const l=(function(f){if(f.length!==0)return Yw(wi.create(f,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(f){if(f.length!==0)return f.map((y=>(function(T){return{field:kl(T.field),direction:P3(T.dir)}})(y)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=Up(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:a}}function D3(n){let e=k3(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){Bt(s===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(_){const T=$w(_);return T instanceof wi&&Sw(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((T=>(function(M){return new bu(Al(M.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(T)))})(t.orderBy));let h=null;t.limit&&(h=(function(_){let T;return T=typeof _=="object"?_.value:_,xf(T)?null:T})(t.limit));let m=null;t.startAt&&(m=(function(_){const T=!!_.before,E=_.values||[];return new Oh(E,T)})(t.startAt));let f=null;return t.endAt&&(f=(function(_){const T=!_.before,E=_.values||[];return new Oh(E,T)})(t.endAt)),X6(e,a,u,l,h,"F",m,f)}function j3(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $w(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Al(t.unaryFilter.field);return Cn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Al(t.unaryFilter.field);return Cn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Al(t.unaryFilter.field);return Cn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Al(t.unaryFilter.field);return Cn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Cn.create(Al(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return wi.create(t.compositeFilter.filters.map((s=>$w(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return tt(1026)}})(t.compositeFilter.op))})(n):tt(30097,{filter:n})}function P3(n){return T3[n]}function L3(n){return S3[n]}function U3(n){return E3[n]}function kl(n){return{fieldPath:n.canonicalString()}}function Al(n){return Wn.fromServerFormat(n.fieldPath)}function Yw(n){return n instanceof Cn?(function(t){if(t.op==="=="){if(vS(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NAN"}};if(bS(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(vS(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NOT_NAN"}};if(bS(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kl(t.field),op:L3(t.op),value:t.value}}})(n):n instanceof wi?(function(t){const s=t.getFilters().map((a=>Yw(a)));return s.length===1?s[0]:{compositeFilter:{op:U3(t.op),filters:s}}})(n):tt(54877,{filter:n})}function O3(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Jw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,t,s,a,l=ot.min(),u=ot.min(),h=Zn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.yt=e}}function B3(n){const e=D3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(){this.Cn=new F3}addToCollectionParentIndex(e,t){return this.Cn.add(t),be.resolve()}getCollectionParents(e,t){return be.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return be.resolve()}deleteFieldIndex(e,t){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,t){return be.resolve()}getDocumentsMatchingTarget(e,t){return be.resolve(null)}getIndexType(e,t){return be.resolve(0)}getFieldIndexes(e,t){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,t){return be.resolve(Ir.min())}getMinOffsetFromCollectionGroup(e,t){return be.resolve(Ir.min())}updateCollectionGroup(e,t,s){return be.resolve()}updateIndexEntries(e,t){return be.resolve()}}class F3{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new jn(Wt.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new jn(Wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qw=41943040;class vs{static withCacheSize(e){return new vs(e,vs.DEFAULT_COLLECTION_PERCENTILE,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vs.DEFAULT_COLLECTION_PERCENTILE=10,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vs.DEFAULT=new vs(Qw,vs.DEFAULT_COLLECTION_PERCENTILE,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vs.DISABLED=new vs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Fl(0)}static cr(){return new Fl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="LruGarbageCollector",z3=1048576;function LS([n,e],[t,s]){const a=_t(n,t);return a===0?_t(e,s):a}class H3{constructor(e){this.Ir=e,this.buffer=new jn(LS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();LS(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class q3{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Pe(PS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){nc(t)?Pe(PS,"Ignoring IndexedDB error during garbage collection: ",t):await tc(t)}await this.Vr(3e5)}))}}class K3{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return be.resolve(gf.ce);const s=new H3(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(jS)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,u,h,m,f;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(s=_,h=Date.now(),this.removeTargets(e,s,t)))).next((_=>(l=_,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(f=Date.now(),wl()<=vt.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(m-h)+`ms
	Removed ${_} documents in `+(f-m)+`ms
Total Duration: ${f-y}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function $3(n,e){return new K3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(){this.changes=new Po((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,as.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?be.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&du(s.mutation,a,Ls.empty(),sn.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Tt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Tt()){const a=_o();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let u=iu();return l.forEach(((h,m)=>{u=u.insert(h,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=_o();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Tt())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,s,a){let l=Da();const u=uu(),h=(function(){return uu()})();return t.forEach(((m,f)=>{const y=s.get(f.key);a.has(f.key)&&(y===void 0||y.mutation instanceof Gr)?l=l.insert(f.key,f):y!==void 0?(u.set(f.key,y.mutation.getFieldMask()),du(y.mutation,f,y.mutation.getFieldMask(),sn.now())):u.set(f.key,Ls.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((f,y)=>u.set(f,y))),t.forEach(((f,y)=>h.set(f,new J3(y,u.get(f)??null)))),h)))}recalculateAndSaveOverlays(e,t){const s=uu();let a=new cn(((u,h)=>u-h)),l=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((m=>{const f=t.get(m);if(f===null)return;let y=s.get(m)||Ls.empty();y=h.applyToLocalView(f,y),s.set(m,y);const _=(a.get(h.batchId)||Tt()).add(m);a=a.insert(h.batchId,_)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),f=m.key,y=m.value,_=Mw();y.forEach((T=>{if(!l.has(T)){const E=Ow(t.get(T),s.get(T));E!==null&&_.set(T,E),l=l.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,f,_))}return be.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(u){return $e.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):be.resolve(_o());let h=pu,m=l;return u.next((f=>be.forEach(f,((y,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),l.get(y)?be.resolve():this.remoteDocumentCache.getEntry(e,y).next((T=>{m=m.insert(y,T)}))))).next((()=>this.populateOverlays(e,f,l))).next((()=>this.computeViews(e,m,f,Tt()))).next((y=>({batchId:h,changes:Rw(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $e(t)).next((s=>{let a=iu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let u=iu();return this.indexManager.getCollectionParents(e,l).next((h=>be.forEach(h,(m=>{const f=(function(_,T){return new sc(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,f,s,a).next((y=>{y.forEach(((_,T)=>{u=u.insert(_,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((u=>{l.forEach(((m,f)=>{const y=f.getKey();u.get(y)===null&&(u=u.insert(y,as.newInvalidDocument(y)))}));let h=iu();return u.forEach(((m,f)=>{const y=l.get(m);y!==void 0&&du(y.mutation,f,Ls.empty(),sn.now()),_f(t,f)&&(h=h.insert(m,f))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return be.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:qi(a.createTime)}})(t)),be.resolve()}getNamedQuery(e,t){return be.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:B3(a.bundledQuery),readTime:qi(a.readTime)}})(t)),be.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(){this.overlays=new cn($e.comparator),this.qr=new Map}getOverlay(e,t){return be.resolve(this.overlays.get(t))}getOverlays(e,t){const s=_o();return be.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.St(e,t,l)})),be.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),be.resolve()}getOverlaysForCollection(e,t,s){const a=_o(),l=t.length+1,u=new $e(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,f=m.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===l&&m.largestBatchId>s&&a.set(m.getKey(),m)}return be.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new cn(((f,y)=>f-y));const u=this.overlays.getIterator();for(;u.hasNext();){const f=u.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>s){let y=l.get(f.largestBatchId);y===null&&(y=_o(),l=l.insert(f.largestBatchId,y)),y.set(f.getKey(),f)}}const h=_o(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((f,y)=>h.set(f,y))),!(h.size()>=a)););return be.resolve(h)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new g3(t,s));let l=this.qr.get(t);l===void 0&&(l=Tt(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(){this.sessionToken=Zn.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,be.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(){this.Qr=new jn(On.$r),this.Ur=new jn(On.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new On(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new On(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new $e(new Wt([])),s=new On(t,e),a=new On(t,e+1),l=[];return this.Ur.forEachInRange([s,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new $e(new Wt([])),s=new On(t,e),a=new On(t,e+1);let l=Tt();return this.Ur.forEachInRange([s,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new On(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class On{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return $e.comparator(e.key,t.key)||_t(e.Yr,t.Yr)}static Kr(e,t){return _t(e.Yr,t.Yr)||$e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new jn(On.$r)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new p3(l,t,s,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new On(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return be.resolve(u)}lookupMutationBatch(e,t){return be.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return be.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?vg:this.tr-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new On(t,0),a=new On(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(u=>{const h=this.Xr(u.Yr);l.push(h)})),be.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new jn(_t);return t.forEach((a=>{const l=new On(a,0),u=new On(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(h=>{s=s.add(h.Yr)}))})),be.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;$e.isDocumentKey(l)||(l=l.child(""));const u=new On(new $e(l),0);let h=new jn(_t);return this.Zr.forEachWhile((m=>{const f=m.key.path;return!!s.isPrefixOf(f)&&(f.length===a&&(h=h.add(m.Yr)),!0)}),u),be.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Bt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return be.forEach(t.mutations,(a=>{const l=new On(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new On(t,0),a=this.Zr.firstAfterOrEqual(s);return be.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.ri=e,this.docs=(function(){return new cn($e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return be.resolve(s?s.document.mutableCopy():as.newInvalidDocument(t))}getEntries(e,t){let s=Da();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():as.newInvalidDocument(a))})),be.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=Da();const u=t.path,h=new $e(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:f,value:{document:y}}=m.getNext();if(!u.isPrefixOf(f.path))break;f.path.length>u.length+1||I6(C6(y),s)<=0||(a.has(y.key)||_f(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return be.resolve(l)}getAllFromCollectionGroup(e,t,s,a){tt(9500)}ii(e,t){return be.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new nL(this)}getSize(e){return be.resolve(this.size)}}class nL extends Y3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),be.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e){this.persistence=e,this.si=new Po((t=>Sg(t)),Eg),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.oi=0,this._i=new Ig,this.targetCount=0,this.ai=Fl.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),be.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Fl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,be.resolve()}updateTargetData(e,t){return this.Pr(t),be.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),be.waitFor(l).next((()=>a))}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return be.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),be.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),be.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),be.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return be.resolve(s)}containsKey(e,t){return be.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,t){this.ui={},this.overlays={},this.ci=new gf(0),this.li=!1,this.li=!0,this.hi=new Z3,this.referenceDelegate=e(this),this.Pi=new sL(this),this.indexManager=new G3,this.remoteDocumentCache=(function(a){return new tL(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new V3(t),this.Ii=new W3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new X3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new eL(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Pe("MemoryPersistence","Starting transaction:",e);const a=new iL(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return be.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class iL extends M6{constructor(e){super(),this.currentSequenceNumber=e}}class Rg{constructor(e){this.persistence=e,this.Ri=new Ig,this.Vi=null}static mi(e){return new Rg(e)}get fi(){if(this.Vi)return this.Vi;throw tt(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),be.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),be.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),be.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.fi,(s=>{const a=$e.fromPath(s);return this.gi(e,a).next((l=>{l||t.removeEntry(a,ot.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return be.or([()=>be.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class zh{constructor(e,t){this.persistence=e,this.pi=new Po((s=>P6(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=$3(this,t)}static mi(e,t){return new zh(e,t)}Ei(){}di(e){return be.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return be.forEach(this.pi,((s,a)=>this.br(e,s,a).next((l=>l?be.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((h=>{h||(s++,l.removeEntry(u,ot.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),be.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),be.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),be.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gh(e.data.value)),t}br(e,t,s){return be.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return be.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=Tt(),a=Tt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Mg(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Qj()?8:D6(os())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new aL;return this.Ss(e,t,u).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,u,h.size)}))})).next((()=>l.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(wl()<=vt.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",Nl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),be.resolve()):(wl()<=vt.DEBUG&&Pe("QueryEngine","Query:",Nl(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(wl()<=vt.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",Nl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hi(t))):be.resolve())}ys(e,t){if(ES(t))return be.resolve(null);let s=Hi(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Vh(t,null,"F"),s=Hi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=Tt(...l);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,s).next((m=>{const f=this.Ds(t,h);return this.Cs(t,f,u,m.readTime)?this.ys(e,Vh(t,null,"F")):this.vs(e,f,t,m)}))))})))))}ws(e,t,s,a){return ES(t)||a.isEqual(ot.min())?be.resolve(null):this.ps.getDocuments(e,s).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,s,a)?be.resolve(null):(wl()<=vt.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Nl(t)),this.vs(e,u,t,A6(a,pu)).next((h=>h)))}))}Ds(e,t){let s=new jn(Cw(e));return t.forEach(((a,l)=>{_f(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return wl()<=vt.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Nl(t)),this.ps.getDocumentsMatchingQuery(e,t,Ir.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="LocalStore",oL=3e8;class lL{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new cn(_t),this.xs=new Po((l=>Sg(l)),Eg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Q3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function cL(n,e,t,s){return new lL(n,e,t,s)}async function Xw(n,e){const t=ct(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],h=[];let m=Tt();for(const f of a){u.push(f.batchId);for(const y of f.mutations)m=m.add(y.key)}for(const f of l){h.push(f.batchId);for(const y of f.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(s,m).next((f=>({Ls:f,removedBatchIds:u,addedBatchIds:h})))}))}))}function uL(n,e){const t=ct(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,f,y){const _=f.batch,T=_.keys();let E=be.resolve();return T.forEach((M=>{E=E.next((()=>y.getEntry(m,M))).next((A=>{const C=f.docVersions.get(M);Bt(C!==null,48541),A.version.compareTo(C)<0&&(_.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),y.addEntry(A)))}))})),E.next((()=>h.mutationQueue.removeMutationBatch(m,_)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let m=Tt();for(let f=0;f<h.mutationResults.length;++f)h.mutationResults[f].transformResults.length>0&&(m=m.add(h.batch.mutations[f].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function Zw(n){const e=ct(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function dL(n,e){const t=ct(n),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((y,_)=>{const T=a.get(_);if(!T)return;h.push(t.Pi.removeMatchingKeys(l,y.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(l,y.addedDocuments,_))));let E=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?E=E.withResumeToken(Zn.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):y.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(y.resumeToken,s)),a=a.insert(_,E),(function(A,C,D){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=oL?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0})(T,E,y)&&h.push(t.Pi.updateTargetData(l,E))}));let m=Da(),f=Tt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),h.push(hL(l,u,e.documentUpdates).next((y=>{m=y.ks,f=y.qs}))),!s.isEqual(ot.min())){const y=t.Pi.getLastRemoteSnapshotVersion(l).next((_=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));h.push(y)}return be.waitFor(h).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,f))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function hL(n,e,t){let s=Tt(),a=Tt();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let u=Da();return t.forEach(((h,m)=>{const f=l.get(h);m.isFoundDocument()!==f.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(ot.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!f.isValidDocument()||m.version.compareTo(f.version)>0||m.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Pe(Dg,"Ignoring outdated watch update for ",h,". Current version:",f.version," Watch version:",m.version)})),{ks:u,qs:a}}))}function fL(n,e){const t=ct(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=vg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function mL(n,e){const t=ct(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((l=>l?(a=l,be.resolve(a)):t.Pi.allocateTargetId(s).next((u=>(a=new Sr(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Gp(n,e,t){const s=ct(n),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!nc(u))throw u;Pe(Dg,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function US(n,e,t){const s=ct(n);let a=ot.min(),l=Tt();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,f,y){const _=ct(m),T=_.xs.get(y);return T!==void 0?be.resolve(_.Ms.get(T)):_.Pi.getTargetData(f,y)})(s,u,Hi(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,h.targetId).next((m=>{l=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?a:ot.min(),t?l:Tt()))).next((h=>(pL(s,e3(e),h),{documents:h,Qs:l})))))}function pL(n,e,t){let s=n.Os.get(e)||ot.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class OS{constructor(){this.activeTargetIds=r3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gL{constructor(){this.Mo=new OS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new OS,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="ConnectivityMonitor";class BS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Pe(VS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Pe(VS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oh=null;function Fp(){return oh===null?oh=(function(){return 268435456+Math.round(2147483648*Math.random())})():oh++,"0x"+oh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="RestConnection",yL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Lh?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const u=Fp(),h=this.zo(e,t.toUriEncodedString());Pe(ep,`Sending RPC '${e}' ${u}:`,h,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:f}=new URL(h),y=Xl(f);return this.Jo(e,h,m,s,y).then((_=>(Pe(ep,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw Ol(ep,`RPC '${e}' ${u} failed with error: `,_,"url: ",h,"request:",s),_}))}Ho(e,t,s,a,l,u){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ec})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const s=yL[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="WebChannelConnection";class _L extends bL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const u=Fp();return new Promise(((h,m)=>{const f=new nw;f.setWithCredentials(!0),f.listenOnce(sw.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case ph.NO_ERROR:const _=f.getResponseJson();Pe(ss,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),h(_);break;case ph.TIMEOUT:Pe(ss,`RPC '${e}' ${u} timed out`),m(new Re(ge.DEADLINE_EXCEEDED,"Request time out"));break;case ph.HTTP_ERROR:const T=f.getStatus();if(Pe(ss,`RPC '${e}' ${u} failed with status:`,T,"response text:",f.getResponseText()),T>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const M=E==null?void 0:E.error;if(M&&M.status&&M.message){const A=(function(D){const G=D.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(G)>=0?G:ge.UNKNOWN})(M.status);m(new Re(A,M.message))}else m(new Re(ge.UNKNOWN,"Server responded with status "+f.getStatus()))}else m(new Re(ge.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{l_:e,streamId:u,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Pe(ss,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(a);Pe(ss,`RPC '${e}' ${u} sending request:`,a),f.send(t,"POST",y,s,15)}))}T_(e,t,s){const a=Fp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=rw(),h=aw(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(m.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const y=l.join("");Pe(ss,`Creating RPC '${e}' stream ${a}: ${y}`,m);const _=u.createWebChannel(y,m);this.I_(_);let T=!1,E=!1;const M=new vL({Yo:C=>{E?Pe(ss,`Not sending because RPC '${e}' stream ${a} is closed:`,C):(T||(Pe(ss,`Opening RPC '${e}' stream ${a} transport.`),_.open(),T=!0),Pe(ss,`RPC '${e}' stream ${a} sending:`,C),_.send(C))},Zo:()=>_.close()}),A=(C,D,G)=>{C.listen(D,(I=>{try{G(I)}catch(q){setTimeout((()=>{throw q}),0)}}))};return A(_,su.EventType.OPEN,(()=>{E||(Pe(ss,`RPC '${e}' stream ${a} transport opened.`),M.o_())})),A(_,su.EventType.CLOSE,(()=>{E||(E=!0,Pe(ss,`RPC '${e}' stream ${a} transport closed`),M.a_(),this.E_(_))})),A(_,su.EventType.ERROR,(C=>{E||(E=!0,Ol(ss,`RPC '${e}' stream ${a} transport errored. Name:`,C.name,"Message:",C.message),M.a_(new Re(ge.UNAVAILABLE,"The operation could not be completed")))})),A(_,su.EventType.MESSAGE,(C=>{var D;if(!E){const G=C.data[0];Bt(!!G,16349);const I=G,q=(I==null?void 0:I.error)||((D=I[0])==null?void 0:D.error);if(q){Pe(ss,`RPC '${e}' stream ${a} received error:`,q);const X=q.status;let J=(function(R){const P=An[R];if(P!==void 0)return Bw(P)})(X),j=q.message;J===void 0&&(J=ge.INTERNAL,j="Unknown error status: "+X+" with message "+q.message),E=!0,M.a_(new Re(J,j)),_.close()}else Pe(ss,`RPC '${e}' stream ${a} received:`,G),M.u_(G)}})),A(h,iw.STAT_EVENT,(C=>{C.stat===Ip.PROXY?Pe(ss,`RPC '${e}' stream ${a} detected buffering proxy`):C.stat===Ip.NOPROXY&&Pe(ss,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function tp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(n){return new w3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&Pe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="PersistentStream";class tN{constructor(e,t,s,a,l,u,h,m){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new eN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Ma(t.toString()),Ma("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new Re(ge.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Pe(GS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Pe(GS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class TL extends tN{constructor(e,t,s,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=A3(this.serializer,e),s=(function(l){if(!("targetChange"in l))return ot.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?ot.min():u.readTime?qi(u.readTime):ot.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Bp(this.serializer),t.addTarget=(function(l,u){let h;const m=u.target;if(h=Pp(m)?{documents:R3(l,m)}:{query:M3(l,m).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=zw(l,u.resumeToken);const f=Up(l,u.expectedCount);f!==null&&(h.expectedCount=f)}else if(u.snapshotVersion.compareTo(ot.min())>0){h.readTime=Fh(l,u.snapshotVersion.toTimestamp());const f=Up(l,u.expectedCount);f!==null&&(h.expectedCount=f)}return h})(this.serializer,e);const s=j3(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Bp(this.serializer),t.removeTarget=e,this.q_(t)}}class SL extends tN{constructor(e,t,s,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=I3(e.writeResults,e.commitTime),s=qi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Bp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>C3(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{}class wL extends EL{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,Op(t,s),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Re(ge.UNKNOWN,l.toString())}))}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,Op(t,s),a,u,h,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(ge.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class NL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ma(t),this.aa=!1):Pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="RemoteStore";class kL{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{Lo(this)&&(Pe(Io,"Restarting streams for network reachability change."),await(async function(m){const f=ct(m);f.Ea.add(4),await Iu(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Nf(f)})(this))}))})),this.Ra=new NL(s,a)}}async function Nf(n){if(Lo(n))for(const e of n.da)await e(!0)}async function Iu(n){for(const e of n.da)await e(!1)}function nN(n,e){const t=ct(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ug(t)?Lg(t):ic(t).O_()&&Pg(t,e))}function jg(n,e){const t=ct(n),s=ic(t);t.Ia.delete(e),s.O_()&&sN(t,e),t.Ia.size===0&&(s.O_()?s.L_():Lo(t)&&t.Ra.set("Unknown"))}function Pg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ot.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ic(n).Y_(e)}function sN(n,e){n.Va.Ue(e),ic(n).Z_(e)}function Lg(n){n.Va=new _3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ic(n).start(),n.Ra.ua()}function Ug(n){return Lo(n)&&!ic(n).x_()&&n.Ia.size>0}function Lo(n){return ct(n).Ea.size===0}function iN(n){n.Va=void 0}async function AL(n){n.Ra.set("Online")}async function CL(n){n.Ia.forEach(((e,t)=>{Pg(n,e)}))}async function IL(n,e){iN(n),Ug(n)?(n.Ra.ha(e),Lg(n)):n.Ra.set("Unknown")}async function RL(n,e,t){if(n.Ra.set("Online"),e instanceof Fw&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(s){Pe(Io,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Hh(n,s)}else if(e instanceof bh?n.Va.Ze(e):e instanceof Gw?n.Va.st(e):n.Va.tt(e),!t.isEqual(ot.min()))try{const s=await Zw(n.localStore);t.compareTo(s)>=0&&await(function(l,u){const h=l.Va.Tt(u);return h.targetChanges.forEach(((m,f)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(f);y&&l.Ia.set(f,y.withResumeToken(m.resumeToken,u))}})),h.targetMismatches.forEach(((m,f)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(Zn.EMPTY_BYTE_STRING,y.snapshotVersion)),sN(l,m);const _=new Sr(y.target,m,f,y.sequenceNumber);Pg(l,_)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(s){Pe(Io,"Failed to raise snapshot:",s),await Hh(n,s)}}async function Hh(n,e,t){if(!nc(e))throw e;n.Ea.add(1),await Iu(n),n.Ra.set("Offline"),t||(t=()=>Zw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Pe(Io,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Nf(n)}))}function aN(n,e){return e().catch((t=>Hh(n,t,e)))}async function kf(n){const e=ct(n),t=jr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vg;for(;ML(e);)try{const a=await fL(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,DL(e,a)}catch(a){await Hh(e,a)}rN(e)&&oN(e)}function ML(n){return Lo(n)&&n.Ta.length<10}function DL(n,e){n.Ta.push(e);const t=jr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function rN(n){return Lo(n)&&!jr(n).x_()&&n.Ta.length>0}function oN(n){jr(n).start()}async function jL(n){jr(n).ra()}async function PL(n){const e=jr(n);for(const t of n.Ta)e.ea(t.mutations)}async function LL(n,e,t){const s=n.Ta.shift(),a=kg.from(s,e,t);await aN(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await kf(n)}async function UL(n,e){e&&jr(n).X_&&await(async function(s,a){if((function(u){return y3(u)&&u!==ge.ABORTED})(a.code)){const l=s.Ta.shift();jr(s).B_(),await aN(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await kf(s)}})(n,e),rN(n)&&oN(n)}async function FS(n,e){const t=ct(n);t.asyncQueue.verifyOperationInProgress(),Pe(Io,"RemoteStore received new credentials");const s=Lo(t);t.Ea.add(3),await Iu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Nf(t)}async function OL(n,e){const t=ct(n);e?(t.Ea.delete(2),await Nf(t)):e||(t.Ea.add(2),await Iu(t),t.Ra.set("Unknown"))}function ic(n){return n.ma||(n.ma=(function(t,s,a){const l=ct(t);return l.sa(),new TL(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:AL.bind(null,n),t_:CL.bind(null,n),r_:IL.bind(null,n),H_:RL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Ug(n)?Lg(n):n.Ra.set("Unknown")):(await n.ma.stop(),iN(n))}))),n.ma}function jr(n){return n.fa||(n.fa=(function(t,s,a){const l=ct(t);return l.sa(),new SL(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:jL.bind(null,n),r_:UL.bind(null,n),ta:PL.bind(null,n),na:LL.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await kf(n)):(await n.fa.stop(),n.Ta.length>0&&(Pe(Io,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const u=Date.now()+s,h=new Og(e,t,u,a,l);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vg(n,e){if(Ma("AsyncQueue",`${e}: ${n}`),nc(n))return new Re(ge.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{static emptySet(e){return new Dl(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||$e.comparator(t.key,s.key):(t,s)=>$e.comparator(t.key,s.key),this.keyedMap=iu(),this.sortedSet=new cn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Dl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.ga=new cn($e.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):tt(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class zl{constructor(e,t,s,a,l,u,h,m,f){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=f}static fromInitialDocuments(e,t,s,a,l){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new zl(e,t,Dl.emptySet(t),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class BL{constructor(){this.queries=HS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=ct(t),l=a.queries;a.queries=HS(),l.forEach(((u,h)=>{for(const m of h.Sa)m.onError(s)}))})(this,new Re(ge.ABORTED,"Firestore shutting down"))}}function HS(){return new Po((n=>Aw(n)),vf)}async function Bg(n,e){const t=ct(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new VL,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=Vg(u,`Initialization of query '${Nl(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Fg(t)}async function Gg(n,e){const t=ct(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function GL(n,e){const t=ct(n);let s=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const h of u.Sa)h.Fa(a)&&(s=!0);u.wa=a}}s&&Fg(t)}function FL(n,e,t){const s=ct(n),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function Fg(n){n.Ca.forEach((e=>{e.next()}))}var zp,qS;(qS=zp||(zp={})).Ma="default",qS.Cache="cache";class zg{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new zl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=zl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.key=e}}class cN{constructor(e){this.key=e}}class zL{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Tt(),this.mutatedKeys=Tt(),this.eu=Cw(e),this.tu=new Dl(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new zS,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,f=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,_)=>{const T=a.get(y),E=_f(this.query,_)?_:null,M=!!T&&this.mutatedKeys.has(T.key),A=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let C=!1;T&&E?T.data.isEqual(E.data)?M!==A&&(s.track({type:3,doc:E}),C=!0):this.su(T,E)||(s.track({type:2,doc:E}),C=!0,(m&&this.eu(E,m)>0||f&&this.eu(E,f)<0)&&(h=!0)):!T&&E?(s.track({type:0,doc:E}),C=!0):T&&!E&&(s.track({type:1,doc:T}),C=!0,(m||f)&&(h=!0)),C&&(E?(u=u.add(E),l=A?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),s.track({type:1,doc:y})}return{tu:u,iu:s,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((y,_)=>(function(E,M){const A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{Rt:C})}};return A(E)-A(M)})(y.type,_.type)||this.eu(y.doc,_.doc))),this.ou(s),a=a??!1;const h=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,f=m!==this.Za;return this.Za=m,u.length!==0||f?{snapshot:new zl(this.query,e.tu,l,u,e.mutatedKeys,m===0,f,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Tt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new cN(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new lN(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Tt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return zl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hg="SyncEngine";class HL{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class qL{constructor(e){this.key=e,this.hu=!1}}class KL{constructor(e,t,s,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Po((h=>Aw(h)),vf),this.Iu=new Map,this.Eu=new Set,this.du=new cn($e.comparator),this.Au=new Map,this.Ru=new Ig,this.Vu={},this.mu=new Map,this.fu=Fl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $L(n,e,t=!0){const s=pN(n);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await uN(s,e,t,!0),a}async function YL(n,e){const t=pN(n);await uN(t,e,!0,!1)}async function uN(n,e,t,s){const a=await mL(n.localStore,Hi(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let h;return s&&(h=await JL(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&nN(n.remoteStore,a),h}async function JL(n,e,t,s,a){n.pu=(_,T,E)=>(async function(A,C,D,G){let I=C.view.ru(D);I.Cs&&(I=await US(A.localStore,C.query,!1).then((({documents:j})=>C.view.ru(j,I))));const q=G&&G.targetChanges.get(C.targetId),X=G&&G.targetMismatches.get(C.targetId)!=null,J=C.view.applyChanges(I,A.isPrimaryClient,q,X);return $S(A,C.targetId,J.au),J.snapshot})(n,_,T,E);const l=await US(n.localStore,e,!0),u=new zL(e,l.Qs),h=u.ru(l.documents),m=Cu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),f=u.applyChanges(h,n.isPrimaryClient,m);$S(n,t,f.au);const y=new HL(e,t,u);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function QL(n,e,t){const s=ct(n),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((u=>!vf(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Gp(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&jg(s.remoteStore,a.targetId),Hp(s,a.targetId)})).catch(tc)):(Hp(s,a.targetId),await Gp(s.localStore,a.targetId,!0))}async function WL(n,e){const t=ct(n),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),jg(t.remoteStore,s.targetId))}async function XL(n,e,t){const s=aU(n);try{const a=await(function(u,h){const m=ct(u),f=sn.now(),y=h.reduce(((E,M)=>E.add(M.key)),Tt());let _,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let M=Da(),A=Tt();return m.Ns.getEntries(E,y).next((C=>{M=C,M.forEach(((D,G)=>{G.isValidDocument()||(A=A.add(D))}))})).next((()=>m.localDocuments.getOverlayedDocuments(E,M))).next((C=>{_=C;const D=[];for(const G of h){const I=f3(G,_.get(G.key).overlayedDocument);I!=null&&D.push(new Gr(G.key,I,vw(I.value.mapValue),ai.exists(!0)))}return m.mutationQueue.addMutationBatch(E,f,D,h)})).next((C=>{T=C;const D=C.applyToLocalDocumentSet(_,A);return m.documentOverlayCache.saveOverlays(E,C.batchId,D)}))})).then((()=>({batchId:T.batchId,changes:Rw(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(u,h,m){let f=u.Vu[u.currentUser.toKey()];f||(f=new cn(_t)),f=f.insert(h,m),u.Vu[u.currentUser.toKey()]=f})(s,a.batchId,t),await Ru(s,a.changes),await kf(s.remoteStore)}catch(a){const l=Vg(a,"Failed to persist write");t.reject(l)}}async function dN(n,e){const t=ct(n);try{const s=await dL(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(Bt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?Bt(u.hu,14607):a.removedDocuments.size>0&&(Bt(u.hu,42227),u.hu=!1))})),await Ru(t,s,e)}catch(s){await tc(s)}}function KS(n,e,t){const s=ct(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((l,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const m=ct(u);m.onlineState=h;let f=!1;m.queries.forEach(((y,_)=>{for(const T of _.Sa)T.va(h)&&(f=!0)})),f&&Fg(m)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function ZL(n,e,t){const s=ct(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let u=new cn($e.comparator);u=u.insert(l,as.newNoDocument(l,ot.min()));const h=Tt().add(l),m=new Ef(ot.min(),new Map,new cn(_t),u,h);await dN(s,m),s.du=s.du.remove(l),s.Au.delete(e),qg(s)}else await Gp(s.localStore,e,!1).then((()=>Hp(s,e,t))).catch(tc)}async function eU(n,e){const t=ct(n),s=e.batch.batchId;try{const a=await uL(t.localStore,e);fN(t,s,null),hN(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ru(t,a)}catch(a){await tc(a)}}async function tU(n,e,t){const s=ct(n);try{const a=await(function(u,h){const m=ct(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let y;return m.mutationQueue.lookupMutationBatch(f,h).next((_=>(Bt(_!==null,37113),y=_.keys(),m.mutationQueue.removeMutationBatch(f,_)))).next((()=>m.mutationQueue.performConsistencyCheck(f))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(f,y,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y))).next((()=>m.localDocuments.getDocuments(f,y)))}))})(s.localStore,e);fN(s,e,t),hN(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ru(s,a)}catch(a){await tc(a)}}function hN(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function fN(n,e,t){const s=ct(n);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Hp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||mN(n,s)}))}function mN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(jg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),qg(n))}function $S(n,e,t){for(const s of t)s instanceof lN?(n.Ru.addReference(s.key,e),nU(n,s)):s instanceof cN?(Pe(Hg,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||mN(n,s.key)):tt(19791,{wu:s})}function nU(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(Pe(Hg,"New document in limbo: "+t),n.Eu.add(s),qg(n))}function qg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new $e(Wt.fromString(e)),s=n.fu.next();n.Au.set(s,new qL(t)),n.du=n.du.insert(t,s),nN(n.remoteStore,new Sr(Hi(bf(t.path)),s,"TargetPurposeLimboResolution",gf.ce))}}async function Ru(n,e,t){const s=ct(n),a=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,m)=>{u.push(s.pu(m,e,t).then((f=>{var y;if((f||t)&&s.isPrimaryClient){const _=f?!f.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:y.current;s.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(f){a.push(f);const _=Mg.As(m.targetId,f);l.push(_)}})))})),await Promise.all(u),s.Pu.H_(a),await(async function(m,f){const y=ct(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>be.forEach(f,(T=>be.forEach(T.Es,(E=>y.persistence.referenceDelegate.addReference(_,T.targetId,E))).next((()=>be.forEach(T.ds,(E=>y.persistence.referenceDelegate.removeReference(_,T.targetId,E)))))))))}catch(_){if(!nc(_))throw _;Pe(Dg,"Failed to update sequence numbers: "+_)}for(const _ of f){const T=_.targetId;if(!_.fromCache){const E=y.Ms.get(T),M=E.snapshotVersion,A=E.withLastLimboFreeSnapshotVersion(M);y.Ms=y.Ms.insert(T,A)}}})(s.localStore,l))}async function sU(n,e){const t=ct(n);if(!t.currentUser.isEqual(e)){Pe(Hg,"User change. New user:",e.toKey());const s=await Xw(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((h=>{h.forEach((m=>{m.reject(new Re(ge.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ru(t,s.Ls)}}function iU(n,e){const t=ct(n),s=t.Au.get(e);if(s&&s.hu)return Tt().add(s.key);{let a=Tt();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const h=t.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function pN(n){const e=ct(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZL.bind(null,e),e.Pu.H_=GL.bind(null,e.eventManager),e.Pu.yu=FL.bind(null,e.eventManager),e}function aU(n){const e=ct(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tU.bind(null,e),e}class qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return cL(this.persistence,new rL,e.initialUser,this.serializer)}Cu(e){return new Ww(Rg.mi,this.serializer)}Du(e){return new gL}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qh.provider={build:()=>new qh};class rU extends qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Bt(this.persistence.referenceDelegate instanceof zh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new q3(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?vs.withCacheSize(this.cacheSizeBytes):vs.DEFAULT;return new Ww((s=>zh.mi(s,t)),this.serializer)}}class qp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>KS(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=sU.bind(null,this.syncEngine),await OL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new BL})()}createDatastore(e){const t=wf(e.databaseInfo.databaseId),s=(function(l){return new _L(l)})(e.databaseInfo);return(function(l,u,h,m){return new wL(l,u,h,m)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,u,h){return new kL(s,a,l,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>KS(this.syncEngine,t,0)),(function(){return BS.v()?new BS:new xL})())}createSyncEngine(e,t){return(function(a,l,u,h,m,f,y){const _=new KL(a,l,u,h,m,f);return y&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=ct(a);Pe(Io,"RemoteStore shutting down."),l.Ea.add(5),await Iu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}qp.provider={build:()=>new qp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ma("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr="FirestoreClient";class oU{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=is.UNAUTHENTICATED,this.clientId=bg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{Pe(Pr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(Pe(Pr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Vg(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function np(n,e){n.asyncQueue.verifyOperationInProgress(),Pe(Pr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await Xw(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function YS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await lU(n);Pe(Pr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>FS(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>FS(e.remoteStore,a))),n._onlineComponents=e}async function lU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Pe(Pr,"Using user provided OfflineComponentProvider");try{await np(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ge.FAILED_PRECONDITION||a.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Ol("Error using user provided cache. Falling back to memory cache: "+t),await np(n,new qh)}}else Pe(Pr,"Using default OfflineComponentProvider"),await np(n,new rU(void 0));return n._offlineComponents}async function gN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Pe(Pr,"Using user provided OnlineComponentProvider"),await YS(n,n._uninitializedComponentsProvider._online)):(Pe(Pr,"Using default OnlineComponentProvider"),await YS(n,new qp))),n._onlineComponents}function cU(n){return gN(n).then((e=>e.syncEngine))}async function Kh(n){const e=await gN(n),t=e.eventManager;return t.onListen=$L.bind(null,e.syncEngine),t.onUnlisten=QL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=YL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=WL.bind(null,e.syncEngine),t}function uU(n,e,t={}){const s=new Ca;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,m,f){const y=new Kg({next:T=>{y.Nu(),u.enqueueAndForget((()=>Gg(l,_)));const E=T.docs.has(h);!E&&T.fromCache?f.reject(new Re(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&T.fromCache&&m&&m.source==="server"?f.reject(new Re(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(T)},error:T=>f.reject(T)}),_=new zg(bf(h.path),y,{includeMetadataChanges:!0,qa:!0});return Bg(l,_)})(await Kh(n),n.asyncQueue,e,t,s))),s.promise}function dU(n,e,t={}){const s=new Ca;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,m,f){const y=new Kg({next:T=>{y.Nu(),u.enqueueAndForget((()=>Gg(l,_))),T.fromCache&&m.source==="server"?f.reject(new Re(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(T)},error:T=>f.reject(T)}),_=new zg(h,y,{includeMetadataChanges:!0,qa:!0});return Bg(l,_)})(await Kh(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="firestore.googleapis.com",QS=!0;class WS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yN,this.ssl=QS}else this.host=e.host,this.ssl=e.ssl??QS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<z3)throw new Re(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xN(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Re(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Re(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Re(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Af{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new g6;switch(s.type){case"firstParty":return new v6(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Re(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=JS.get(t);s&&(Pe("ComponentProvider","Removing Datastore"),JS.delete(t),s.terminate())})(this),Promise.resolve()}}function hU(n,e,t,s={}){var f;n=Ss(n,Af);const a=Xl(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;a&&($E(`https://${h}`),YE("Firestore",!0)),l.host!==yN&&l.host!==h&&Ol("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:h,ssl:a,emulatorOptions:s};if(!ko(m,u)&&(n._setSettings(m),s.mockUserToken)){let y,_;if(typeof s.mockUserToken=="string")y=s.mockUserToken,_=is.MOCK_USER;else{y=Gj(s.mockUserToken,(f=n._app)==null?void 0:f.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new Re(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new is(T)}n._authCredentials=new x6(new lw(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ba(this.firestore,e,this._query)}}class mn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}toJSON(){return{type:mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(ku(t,mn._jsonSchema))return new mn(e,s||null,new $e(Wt.fromString(t.referencePath)))}}mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:In("string",mn._jsonSchemaVersion),referencePath:In("string")};class Ar extends Ba{constructor(e,t,s){super(e,t,bf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new $e(e))}withConverter(e){return new Ar(this.firestore,e,this._path)}}function ea(n,e,...t){if(n=Ln(n),cw("collection","path",e),n instanceof Af){const s=Wt.fromString(e,...t);return uS(s),new Ar(n,null,s)}{if(!(n instanceof mn||n instanceof Ar))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Wt.fromString(e,...t));return uS(s),new Ar(n.firestore,null,s)}}function ln(n,e,...t){if(n=Ln(n),arguments.length===1&&(e=bg.newId()),cw("doc","path",e),n instanceof Af){const s=Wt.fromString(e,...t);return cS(s),new mn(n,null,new $e(s))}{if(!(n instanceof mn||n instanceof Ar))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Wt.fromString(e,...t));return cS(s),new mn(n.firestore,n instanceof Ar?n.converter:null,new $e(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="AsyncQueue";class ZS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new eN(this,"async_queue_retry"),this._c=()=>{const s=tp();s&&Pe(XS,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=tp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=tp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ca;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!nc(e))throw e;Pe(XS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ma("INTERNAL UNHANDLED ERROR: ",e1(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Og.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&tt(47125,{Pc:e1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function e1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class ja extends Af{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new ZS,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ZS(e),this._firestoreClient=void 0,await e}}}function fU(n,e){const t=typeof n=="object"?n:XE(),s=typeof n=="string"?n:Lh,a=xg(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=Vj("firestore");l&&hU(a,...l)}return a}function Cf(n){if(n._terminated)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mU(n),n._firestoreClient}function mU(n){var s,a,l;const e=n._freezeSettings(),t=(function(h,m,f,y){return new O6(h,m,f,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,xN(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new oU(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this._byteString=e}static fromBase64String(e){try{return new si(Zn.fromBase64String(e))}catch(t){throw new Re(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new si(Zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:si._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ku(e,si._jsonSchema))return si.fromBase64String(e.bytes)}}si._jsonSchemaVersion="firestore/bytes/1.0",si._jsonSchema={type:In("string",si._jsonSchemaVersion),bytes:In("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Re(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _t(this._lat,e._lat)||_t(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ki._jsonSchemaVersion}}static fromJSON(e){if(ku(e,Ki._jsonSchema))return new Ki(e.latitude,e.longitude)}}Ki._jsonSchemaVersion="firestore/geoPoint/1.0",Ki._jsonSchema={type:In("string",Ki._jsonSchemaVersion),latitude:In("number"),longitude:In("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:$i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ku(e,$i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new $i(e.vectorValues);throw new Re(ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$i._jsonSchemaVersion="firestore/vectorValue/1.0",$i._jsonSchema={type:In("string",$i._jsonSchemaVersion),vectorValues:In("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=/^__.*__$/;class gU{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Au(e,this.data,t,this.fieldTransforms)}}class bN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Gr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ac:n})}}class Yg{constructor(e,t,s,a,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Yg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $h(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(vN(this.Ac)&&pU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class xU{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||wf(e)}Cc(e,t,s,a=!1){return new Yg({Ac:e,methodName:t,Dc:s,path:Wn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rf(n){const e=n._freezeSettings(),t=wf(n._databaseId);return new xU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _N(n,e,t,s,a,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);Jg("Data must be an object, but it was:",u,s);const h=TN(s,u);let m,f;if(l.merge)m=new Ls(u.fieldMask),f=u.fieldTransforms;else if(l.mergeFields){const y=[];for(const _ of l.mergeFields){const T=Kp(e,_,t);if(!u.contains(T))throw new Re(ge.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);EN(y,T)||y.push(T)}m=new Ls(y),f=u.fieldTransforms.filter((_=>m.covers(_.field)))}else m=null,f=u.fieldTransforms;return new gU(new Ts(h),m,f)}class Mf extends $g{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mf}}function yU(n,e,t,s){const a=n.Cc(1,e,t);Jg("Data must be an object, but it was:",a,s);const l=[],u=Ts.empty();Br(s,((m,f)=>{const y=Qg(e,m,t);f=Ln(f);const _=a.yc(y);if(f instanceof Mf)l.push(y);else{const T=Mu(f,_);T!=null&&(l.push(y),u.set(y,T))}}));const h=new Ls(l);return new bN(u,h,a.fieldTransforms)}function bU(n,e,t,s,a,l){const u=n.Cc(1,e,t),h=[Kp(e,s,t)],m=[a];if(l.length%2!=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)h.push(Kp(e,l[T])),m.push(l[T+1]);const f=[],y=Ts.empty();for(let T=h.length-1;T>=0;--T)if(!EN(f,h[T])){const E=h[T];let M=m[T];M=Ln(M);const A=u.yc(E);if(M instanceof Mf)f.push(E);else{const C=Mu(M,A);C!=null&&(f.push(E),y.set(E,C))}}const _=new Ls(f);return new bN(y,_,u.fieldTransforms)}function vU(n,e,t,s=!1){return Mu(t,n.Cc(s?4:3,e))}function Mu(n,e){if(SN(n=Ln(n)))return Jg("Unsupported field value:",e,n),TN(n,e);if(n instanceof $g)return(function(s,a){if(!vN(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let u=0;for(const h of s){let m=Mu(h,a.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}})(n,e)}return(function(s,a){if((s=Ln(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return o3(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=sn.fromDate(s);return{timestampValue:Fh(a.serializer,l)}}if(s instanceof sn){const l=new sn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Fh(a.serializer,l)}}if(s instanceof Ki)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof si)return{bytesValue:zw(a.serializer,s._byteString)};if(s instanceof mn){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Cg(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof $i)return(function(u,h){return{mapValue:{fields:{[yw]:{stringValue:bw},[Uh]:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw h.Sc("VectorValues must only contain numeric values.");return wg(h.serializer,f)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${pf(s)}`)})(n,e)}function TN(n,e){const t={};return hw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Br(n,((s,a)=>{const l=Mu(a,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function SN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof sn||n instanceof Ki||n instanceof si||n instanceof mn||n instanceof $g||n instanceof $i)}function Jg(n,e,t){if(!SN(t)||!uw(t)){const s=pf(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Kp(n,e,t){if((e=Ln(e))instanceof If)return e._internalPath;if(typeof e=="string")return Qg(n,e);throw $h("Field path arguments must be of type string or ",n,!1,void 0,t)}const _U=new RegExp("[~\\*/\\[\\]]");function Qg(n,e,t){if(e.search(_U)>=0)throw $h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new If(...e.split("."))._internalPath}catch{throw $h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $h(n,e,t,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${s}`),u&&(m+=` in document ${a}`),m+=")"),new Re(ge.INVALID_ARGUMENT,h+n+m)}function EN(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Df("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class TU extends wN{data(){return super.data()}}function Df(n,e){return typeof e=="string"?Qg(n,e):e instanceof If?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Re(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wg{}class Xg extends Wg{}function ac(n,e,...t){let s=[];e instanceof Wg&&s.push(e),s=s.concat(t),(function(l){const u=l.filter((m=>m instanceof Zg)).length,h=l.filter((m=>m instanceof jf)).length;if(u>1||u>0&&h>0)throw new Re(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)n=a._apply(n);return n}class jf extends Xg{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new jf(e,t,s)}_apply(e){const t=this._parse(e);return CN(e._query,t),new Ba(e.firestore,e.converter,Lp(e._query,t))}_parse(e){const t=Rf(e.firestore);return(function(l,u,h,m,f,y,_){let T;if(f.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){s1(_,y);const M=[];for(const A of _)M.push(n1(m,l,A));T={arrayValue:{values:M}}}else T=n1(m,l,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||s1(_,y),T=vU(h,u,_,y==="in"||y==="not-in");return Cn.create(f,y,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Hl(n,e,t){const s=e,a=Df("where",n);return jf._create(a,s,t)}class Zg extends Wg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Zg(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:wi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const h=l.getFlattenedFilters();for(const m of h)CN(u,m),u=Lp(u,m)})(e._query,t),new Ba(e.firestore,e.converter,Lp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ex extends Xg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ex(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bu(l,u)})(e._query,this._field,this._direction);return new Ba(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new sc(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function kN(n,e="asc"){const t=e,s=Df("orderBy",n);return ex._create(s,t)}class tx extends Xg{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new tx(e,t,s)}_apply(e){return new Ba(e.firestore,e.converter,Vh(e._query,this._limit,this._limitType))}}function AN(n){return k6("limit",n),tx._create("limit",n,"F")}function n1(n,e,t){if(typeof(t=Ln(t))=="string"){if(t==="")throw new Re(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kw(e)&&t.indexOf("/")!==-1)throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Wt.fromString(t));if(!$e.isDocumentKey(s))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return yS(n,new $e(s))}if(t instanceof mn)return yS(n,t._key);throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pf(t)}.`)}function s1(n,e){if(!Array.isArray(n)||n.length===0)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CN(n,e){const t=(function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Re(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class SU{convertValue(e,t="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw tt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Br(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,a,l;const t=(l=(a=(s=e.fields)==null?void 0:s[Uh].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>vn(u.doubleValue)));return new $i(t)}convertGeoPoint(e){return new Ki(vn(e.latitude),vn(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=yf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(gu(e));default:return null}}convertTimestamp(e){const t=Rr(e);return new sn(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Wt.fromString(e);Bt(Jw(s),9688,{name:e});const a=new xu(s.get(1),s.get(3)),l=new $e(s.popFirst(5));return a.isEqual(t)||Ma(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class ru{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class So extends wN{constructor(e,t,s,a,l,u){super(e,t,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Df("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=So._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}So._jsonSchemaVersion="firestore/documentSnapshot/1.0",So._jsonSchema={type:In("string",So._jsonSchemaVersion),bundleSource:In("string","DocumentSnapshot"),bundleName:In("string"),bundle:In("string")};class vh extends So{data(e={}){return super.data(e)}}class Eo{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ru(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new vh(this._firestore,this._userDataWriter,s.key,s,new ru(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const m=new vh(a._firestore,a._userDataWriter,h.doc.key,h.doc,new ru(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const m=new vh(a._firestore,a._userDataWriter,h.doc.key,h.doc,new ru(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let f=-1,y=-1;return h.type!==0&&(f=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:EU(h.type),doc:m,oldIndex:f,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function EU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(n){n=Ss(n,mn);const e=Ss(n.firestore,ja);return uU(Cf(e),n._key).then((t=>RN(e,n,t)))}Eo._jsonSchemaVersion="firestore/querySnapshot/1.0",Eo._jsonSchema={type:In("string",Eo._jsonSchemaVersion),bundleSource:In("string","QuerySnapshot"),bundleName:In("string"),bundle:In("string")};class nx extends SU{constructor(e){super(),this.firestore=e}convertBytes(e){return new si(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}function Ga(n){n=Ss(n,Ba);const e=Ss(n.firestore,ja),t=Cf(e),s=new nx(e);return NN(n._query),dU(t,n._query).then((a=>new Eo(e,s,n,a)))}function Pa(n,e,t){n=Ss(n,mn);const s=Ss(n.firestore,ja),a=IN(n.converter,e,t);return Lf(s,[_N(Rf(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,ai.none())])}function Uo(n,e,t,...s){n=Ss(n,mn);const a=Ss(n.firestore,ja),l=Rf(a);let u;return u=typeof(e=Ln(e))=="string"||e instanceof If?bU(l,"updateDoc",n._key,e,t,s):yU(l,"updateDoc",n._key,e),Lf(a,[u.toMutation(n._key,ai.exists(!0))])}function Ro(n){return Lf(Ss(n.firestore,ja),[new Ng(n._key,ai.none())])}function wU(n,e){const t=Ss(n.firestore,ja),s=ln(n),a=IN(n.converter,e);return Lf(t,[_N(Rf(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,ai.exists(!1))]).then((()=>s))}function NU(n,...e){var m,f,y;n=Ln(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||t1(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(t1(e[s])){const _=e[s];e[s]=(m=_.next)==null?void 0:m.bind(_),e[s+1]=(f=_.error)==null?void 0:f.bind(_),e[s+2]=(y=_.complete)==null?void 0:y.bind(_)}let l,u,h;if(n instanceof mn)u=Ss(n.firestore,ja),h=bf(n._key.path),l={next:_=>{e[s]&&e[s](RN(u,n,_))},error:e[s+1],complete:e[s+2]};else{const _=Ss(n,Ba);u=Ss(_.firestore,ja),h=_._query;const T=new nx(u);l={next:E=>{e[s]&&e[s](new Eo(u,T,_,E))},error:e[s+1],complete:e[s+2]},NN(n._query)}return(function(T,E,M,A){const C=new Kg(A),D=new zg(E,C,M);return T.asyncQueue.enqueueAndForget((async()=>Bg(await Kh(T),D))),()=>{C.Nu(),T.asyncQueue.enqueueAndForget((async()=>Gg(await Kh(T),D)))}})(Cf(u),h,a,l)}function Lf(n,e){return(function(s,a){const l=new Ca;return s.asyncQueue.enqueueAndForget((async()=>XL(await cU(s),a,l))),l.promise})(Cf(n),e)}function RN(n,e,t){const s=t.docs.get(e._key),a=new nx(n);return new So(n,a,e._key,s,new ru(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){ec=a})(Zl),Ul(new Ao("firestore",((s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),h=new ja(new y6(s.getProvider("auth-internal")),new _6(u,s.getProvider("app-check-internal")),(function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Re(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(f.options.projectId,y)})(u,a),u);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Nr(aS,rS,e),Nr(aS,rS,"esm2020")})();function MN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kU=MN,DN=new wu("auth","Firebase",MN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new pg("@firebase/auth");function AU(n,...e){Yh.logLevel<=vt.WARN&&Yh.warn(`Auth (${Zl}): ${n}`,...e)}function _h(n,...e){Yh.logLevel<=vt.ERROR&&Yh.error(`Auth (${Zl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(n,...e){throw ix(n,...e)}function Ei(n,...e){return ix(n,...e)}function sx(n,e,t){const s={...kU(),[e]:t};return new wu("auth","Firebase",s).create(e,{appName:n.name})}function wo(n){return sx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function CU(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Qi(n,"argument-error"),sx(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ix(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return DN.create(n,...e)}function it(n,e,...t){if(!n)throw ix(e,...t)}function ka(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _h(e),new Error(e)}function La(n,e){n||ka(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function IU(){return i1()==="http:"||i1()==="https:"}function i1(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IU()||$j()||"connection"in navigator)?navigator.onLine:!0}function MU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t){this.shortDelay=e,this.longDelay=t,La(t>e,"Short delay should be less than long delay!"),this.isMobile=Hj()||Yj()}get(){return RU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(n,e){La(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ka("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ka("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ka("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PU=new Du(3e4,6e4);function rx(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function rc(n,e,t,s,a={}){return PN(n,a,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const h=Nu({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:m,...l};return Kj()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Xl(n.emulatorConfig.host)&&(f.credentials="include"),jN.fetch()(await LN(n,n.config.apiHost,t,h),f)})}async function PN(n,e,t){n._canInitEmulator=!1;const s={...DU,...e};try{const a=new UU(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw lh(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[m,f]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw lh(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw lh(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw lh(n,"user-disabled",u);const y=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw sx(n,y,f);Qi(n,y)}}catch(a){if(a instanceof Va)throw a;Qi(n,"network-request-failed",{message:String(a)})}}async function LU(n,e,t,s,a={}){const l=await rc(n,e,t,s,a);return"mfaPendingCredential"in l&&Qi(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function LN(n,e,t,s){const a=`${e}${t}?${s}`,l=n,u=l.config.emulator?ax(n.config,a):`${n.config.apiScheme}://${a}`;return jU.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class UU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ei(this.auth,"network-request-failed")),PU.get())})}}function lh(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Ei(n,e,s);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OU(n,e){return rc(n,"POST","/v1/accounts:delete",e)}async function Jh(n,e){return rc(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VU(n,e=!1){const t=Ln(n),s=await t.getIdToken(e),a=ox(s);it(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:hu(sp(a.auth_time)),issuedAtTime:hu(sp(a.iat)),expirationTime:hu(sp(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function sp(n){return Number(n)*1e3}function ox(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return _h("JWT malformed, contained fewer than 3 sections"),null;try{const a=zE(t);return a?JSON.parse(a):(_h("Failed to decode base64 JWT payload"),null)}catch(a){return _h("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function a1(n){const e=ox(n);return it(e,"internal-error"),it(typeof e.exp<"u","internal-error"),it(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Va&&BU(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function BU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hu(this.lastLoginAt),this.creationTime=hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qh(n){var _;const e=n.auth,t=await n.getIdToken(),s=await Tu(n,Jh(e,{idToken:t}));it(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=(_=a.providerUserInfo)!=null&&_.length?UN(a.providerUserInfo):[],u=zU(n.providerData,l),h=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),f=h?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Yp(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(n,y)}async function FU(n){const e=Ln(n);await Qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zU(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function UN(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HU(n,e){const t=await PN(n,{},async()=>{const s=Nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await LN(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:s};return n.emulatorConfig&&Xl(n.emulatorConfig.host)&&(m.credentials="include"),jN.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qU(n,e){return rc(n,"POST","/v2/accounts:revokeToken",rx(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){it(e.idToken,"internal-error"),it(typeof e.idToken<"u","internal-error"),it(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):a1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){it(e.length!==0,"internal-error");const t=a1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(it(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await HU(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,u=new jl;return s&&(it(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(it(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(it(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jl,this.toJSON())}_performRefresh(){return ka("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(n,e){it(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class _i{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new GU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Yp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Tu(this,this.stsTokenManager.getToken(this.auth,e));return it(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return VU(this,e)}reload(){return FU(this)}_assign(e){this!==e&&(it(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _i({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){it(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Qh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vi(this.auth.app))return Promise.reject(wo(this.auth));const e=await this.getIdToken();return await Tu(this,OU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,h=t.tenantId??void 0,m=t._redirectEventId??void 0,f=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:E,providerData:M,stsTokenManager:A}=t;it(_&&A,e,"internal-error");const C=jl.fromJSON(this.name,A);it(typeof _=="string",e,"internal-error"),xr(s,e.name),xr(a,e.name),it(typeof T=="boolean",e,"internal-error"),it(typeof E=="boolean",e,"internal-error"),xr(l,e.name),xr(u,e.name),xr(h,e.name),xr(m,e.name),xr(f,e.name),xr(y,e.name);const D=new _i({uid:_,auth:e,email:a,emailVerified:T,displayName:s,isAnonymous:E,photoURL:u,phoneNumber:l,tenantId:h,stsTokenManager:C,createdAt:f,lastLoginAt:y});return M&&Array.isArray(M)&&(D.providerData=M.map(G=>({...G}))),m&&(D._redirectEventId=m),D}static async _fromIdTokenResponse(e,t,s=!1){const a=new jl;a.updateFromServerResponse(t);const l=new _i({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Qh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];it(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?UN(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new jl;h.updateFromIdToken(s);const m=new _i({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Yp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,f),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new Map;function Aa(n){La(n instanceof Function,"Expected a class definition");let e=r1.get(n);return e?(La(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,r1.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ON.type="NONE";const o1=ON;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(n,e,t){return`firebase:${n}:${e}:${t}`}class Pl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=Th(this.userKey,a.apiKey,l),this.fullPersistenceKey=Th("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Jh(this.auth,{idToken:e}).catch(()=>{});return t?_i._fromGetAccountInfoResponse(this.auth,t,e):null}return _i._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Pl(Aa(o1),e,s);const a=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let l=a[0]||Aa(o1);const u=Th(s,e.config.apiKey,e.name);let h=null;for(const f of t)try{const y=await f._get(u);if(y){let _;if(typeof y=="string"){const T=await Jh(e,{idToken:y}).catch(()=>{});if(!T)break;_=await _i._fromGetAccountInfoResponse(e,T,y)}else _=_i._fromJSON(e,y);f!==l&&(h=_),l=f;break}}catch{}const m=a.filter(f=>f._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Pl(l,e,s):(l=m[0],h&&await l._set(u,h.toJSON()),await Promise.all(t.map(async f=>{if(f!==l)try{await f._remove(u)}catch{}})),new Pl(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HN(e))return"Blackberry";if(qN(e))return"Webos";if(BN(e))return"Safari";if((e.includes("chrome/")||GN(e))&&!e.includes("edge/"))return"Chrome";if(zN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function VN(n=os()){return/firefox\//i.test(n)}function BN(n=os()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GN(n=os()){return/crios\//i.test(n)}function FN(n=os()){return/iemobile/i.test(n)}function zN(n=os()){return/android/i.test(n)}function HN(n=os()){return/blackberry/i.test(n)}function qN(n=os()){return/webos/i.test(n)}function lx(n=os()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KU(n=os()){var e;return lx(n)&&!!((e=window.navigator)!=null&&e.standalone)}function $U(){return Jj()&&document.documentMode===10}function KN(n=os()){return lx(n)||zN(n)||qN(n)||HN(n)||/windows phone/i.test(n)||FN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(n,e=[]){let t;switch(n){case"Browser":t=l1(os());break;case"Worker":t=`${l1(os())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Zl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,h)=>{try{const m=e(l);u(m)}catch(m){h(m)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JU(n,e={}){return rc(n,"GET","/v2/passwordPolicy",rx(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=6;class WU{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??QU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c1(this),this.idTokenSubscription=new c1(this),this.beforeStateQueue=new YU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Aa(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await Pl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Jh(this,{idToken:e}),s=await _i._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(vi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=s==null?void 0:s._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===h)&&(m!=null&&m.user)&&(s=m.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return it(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vi(this.app))return Promise.reject(wo(this));const t=e?Ln(e):null;return t&&it(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&it(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vi(this.app)?Promise.reject(wo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vi(this.app)?Promise.reject(wo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Aa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JU(this),t=new WU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await qU(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Aa(e)||this._popupRedirectResolver;it(t,this,"argument-error"),this.redirectPersistenceManager=await Pl.create(this,[Aa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(it(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return it(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$N(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&AU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Uf(n){return Ln(n)}class c1{constructor(e){this.auth=e,this.observer=null,this.addObserver=sP(t=>this.observer=t)}get next(){return it(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZU(n){cx=n}function eO(n){return cx.loadJS(n)}function tO(){return cx.gapiScript}function nO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(n,e){const t=xg(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ko(l,e??{}))return a;Qi(a,"already-initialized")}return t.initialize({options:e})}function iO(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Aa);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function aO(n,e,t){const s=Uf(n);it(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=YN(e),{host:u,port:h}=rO(e),m=h===null?"":`:${h}`,f={url:`${l}//${u}${m}/`},y=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){it(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),it(ko(f,s.config.emulator)&&ko(y,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=f,s.emulatorConfig=y,s.settings.appVerificationDisabledForTesting=!0,Xl(u)?($E(`${l}//${u}${m}`),YE("Auth",!0)):oO()}function YN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function rO(n){const e=YN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:u1(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:u1(u)}}}function u1(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function oO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ka("not implemented")}_getIdTokenResponse(e){return ka("not implemented")}_linkToIdToken(e,t){return ka("not implemented")}_getReauthenticationResolver(e){return ka("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(n,e){return LU(n,"POST","/v1/accounts:signInWithIdp",rx(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="http://localhost";class Mo extends JN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Mo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const u=new Mo(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ll(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ll(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ll(e,t)}buildRequest(){const e={requestUri:lO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends ux{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends ju{constructor(){super("facebook.com")}static credential(e){return Mo._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Mo._fromParams({providerId:Na.PROVIDER_ID,signInMethod:Na.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Na.credentialFromTaggedObject(e)}static credentialFromError(e){return Na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Na.credential(t,s)}catch{return null}}}Na.GOOGLE_SIGN_IN_METHOD="google.com";Na.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends ju{constructor(){super("github.com")}static credential(e){return Mo._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return br.credential(e.oauthAccessToken)}catch{return null}}}br.GITHUB_SIGN_IN_METHOD="github.com";br.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends ju{constructor(){super("twitter.com")}static credential(e,t){return Mo._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return vr.credential(t,s)}catch{return null}}}vr.TWITTER_SIGN_IN_METHOD="twitter.com";vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await _i._fromIdTokenResponse(e,s,a),u=d1(s);return new ql({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=d1(s);return new ql({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function d1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends Va{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Wh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Wh(e,t,s,a)}}function QN(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Wh._fromErrorAndOperation(n,l,e,s):l})}async function cO(n,e,t=!1){const s=await Tu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ql._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(n,e,t=!1){const{auth:s}=n;if(vi(s.app))return Promise.reject(wo(s));const a="reauthenticate";try{const l=await Tu(n,QN(s,a,e,n),t);it(l.idToken,s,"internal-error");const u=ox(l.idToken);it(u,s,"internal-error");const{sub:h}=u;return it(n.uid===h,s,"user-mismatch"),ql._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Qi(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(n,e,t=!1){if(vi(n.app))return Promise.reject(wo(n));const s="signIn",a=await QN(n,s,e),l=await ql._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(n,e){return Ln(n).setPersistence(e)}function fO(n,e,t,s){return Ln(n).onIdTokenChanged(e,t,s)}function mO(n,e,t){return Ln(n).beforeAuthStateChanged(e,t)}function pO(n,e,t,s){return Ln(n).onAuthStateChanged(e,t,s)}function gO(n){return Ln(n).signOut()}const Xh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xh,"1"),this.storage.removeItem(Xh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=1e3,yO=10;class XN extends WN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,m)=>{this.notifyListeners(u,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);$U()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,yO):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},xO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}XN.type="LOCAL";const ZN=XN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek extends WN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ek.type="SESSION";const dx=ek;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Of(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const h=Array.from(u).map(async f=>f(t.origin,l)),m=await bO(h);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Of.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,m)=>{const f=hx("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const T=_;if(T.data.eventId===f)switch(T.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(T.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(){return window}function _O(n){Yi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(){return typeof Yi().WorkerGlobalScope<"u"&&typeof Yi().importScripts=="function"}async function TO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SO(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function EO(){return tk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="firebaseLocalStorageDb",wO=1,Zh="firebaseLocalStorage",sk="fbase_key";class Pu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vf(n,e){return n.transaction([Zh],e?"readwrite":"readonly").objectStore(Zh)}function NO(){const n=indexedDB.deleteDatabase(nk);return new Pu(n).toPromise()}function Jp(){const n=indexedDB.open(nk,wO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Zh,{keyPath:sk})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Zh)?e(s):(s.close(),await NO(),e(await Jp()))})})}async function h1(n,e,t){const s=Vf(n,!0).put({[sk]:e,value:t});return new Pu(s).toPromise()}async function kO(n,e){const t=Vf(n,!1).get(e),s=await new Pu(t).toPromise();return s===void 0?null:s.value}function f1(n,e){const t=Vf(n,!0).delete(e);return new Pu(t).toPromise()}const AO=800,CO=3;class ik{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>CO)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Of._getInstance(EO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await TO(),!this.activeServiceWorker)return;this.sender=new vO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jp();return await h1(e,Xh,"1"),await f1(e,Xh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>h1(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>kO(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>f1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Vf(a,!1).getAll();return new Pu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ik.type="LOCAL";const IO=ik;new Du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(n,e){return e?Aa(e):(it(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx extends JN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ll(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ll(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ll(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function RO(n){return dO(n.auth,new fx(n),n.bypassAuthState)}function MO(n){const{auth:e,user:t}=n;return it(t,e,"internal-error"),uO(t,new fx(n),n.bypassAuthState)}async function DO(n){const{auth:e,user:t}=n;return it(t,e,"internal-error"),cO(t,new fx(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RO;case"linkViaPopup":case"linkViaRedirect":return DO;case"reauthViaPopup":case"reauthViaRedirect":return MO;default:Qi(this.auth,"internal-error")}}resolve(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO=new Du(2e3,1e4);async function PO(n,e,t){if(vi(n.app))return Promise.reject(Ei(n,"operation-not-supported-in-this-environment"));const s=Uf(n);CU(n,e,ux);const a=ak(s,t);return new To(s,"signInViaPopup",e,a).executeNotNull()}class To extends rk{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,To.currentPopupAction&&To.currentPopupAction.cancel(),To.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return it(e,this.auth,"internal-error"),e}async onExecution(){La(this.filter.length===1,"Popup operations only handle one event");const e=hx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,To.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jO.get())};e()}}To.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO="pendingRedirect",Sh=new Map;class UO extends rk{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Sh.get(this.auth._key());if(!e){try{const s=await OO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Sh.set(this.auth._key(),e)}return this.bypassAuthState||Sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OO(n,e){const t=GO(e),s=BO(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function VO(n,e){Sh.set(n._key(),e)}function BO(n){return Aa(n._redirectPersistence)}function GO(n){return Th(LO,n.config.apiKey,n.name)}async function FO(n,e,t=!1){if(vi(n.app))return Promise.reject(wo(n));const s=Uf(n),a=ak(s,e),u=await new UO(s,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=600*1e3;class HO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!ok(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ei(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zO&&this.cachedEventUids.clear(),this.cachedEventUids.has(m1(e))}saveEventToCache(e){this.cachedEventUids.add(m1(e)),this.lastProcessedEventTime=Date.now()}}function m1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ok({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ok(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO(n,e={}){return rc(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YO=/^https?/;async function JO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await KO(n);for(const t of e)try{if(QO(t))return}catch{}Qi(n,"unauthorized-domain")}function QO(n){const e=$p(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!YO.test(t))return!1;if($O.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=new Du(3e4,6e4);function p1(){const n=Yi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function XO(n){return new Promise((e,t)=>{var a,l,u;function s(){p1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{p1(),t(Ei(n,"network-request-failed"))},timeout:WO.get()})}if((l=(a=Yi().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Yi().gapi)!=null&&u.load)s();else{const h=nO("iframefcb");return Yi()[h]=()=>{gapi.load?s():t(Ei(n,"network-request-failed"))},eO(`${tO()}?onload=${h}`).catch(m=>t(m))}}).catch(e=>{throw Eh=null,e})}let Eh=null;function ZO(n){return Eh=Eh||XO(n),Eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV=new Du(5e3,15e3),tV="__/auth/iframe",nV="emulator/auth/iframe",sV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aV(n){const e=n.config;it(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ax(e,nV):`https://${n.config.authDomain}/${tV}`,s={apiKey:e.apiKey,appName:n.name,v:Zl},a=iV.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Nu(s).slice(1)}`}async function rV(n){const e=await ZO(n),t=Yi().gapi;return it(t,n,"internal-error"),e.open({where:document.body,url:aV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sV,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=Ei(n,"network-request-failed"),h=Yi().setTimeout(()=>{l(u)},eV.get());function m(){Yi().clearTimeout(h),a(s)}s.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lV=500,cV=600,uV="_blank",dV="http://localhost";class g1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hV(n,e,t,s=lV,a=cV){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const m={...oV,width:s.toString(),height:a.toString(),top:l,left:u},f=os().toLowerCase();t&&(h=GN(f)?uV:t),VN(f)&&(e=e||dV,m.scrollbars="yes");const y=Object.entries(m).reduce((T,[E,M])=>`${T}${E}=${M},`,"");if(KU(f)&&h!=="_self")return fV(e||"",h),new g1(null);const _=window.open(e||"",h,y);it(_,n,"popup-blocked");try{_.focus()}catch{}return new g1(_)}function fV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV="__/auth/handler",pV="emulator/auth/handler",gV=encodeURIComponent("fac");async function x1(n,e,t,s,a,l){it(n.config.authDomain,n,"auth-domain-config-required"),it(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Zl,eventId:a};if(e instanceof ux){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",nP(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))u[y]=_}if(e instanceof ju){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const m=await n._getAppCheckToken(),f=m?`#${gV}=${encodeURIComponent(m)}`:"";return`${xV(n)}?${Nu(h).slice(1)}${f}`}function xV({config:n}){return n.emulator?ax(n,pV):`https://${n.authDomain}/${mV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="webStorageSupport";class yV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dx,this._completeRedirectFn=FO,this._overrideRedirectResult=VO}async _openPopup(e,t,s,a){var u;La((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await x1(e,t,s,$p(),a);return hV(e,l,hx())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await x1(e,t,s,$p(),a);return _O(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(La(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await rV(e),s=new HO(e);return t.register("authEvent",a=>(it(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ip,{type:ip},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[ip];l!==void 0&&t(!!l),Qi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return KN()||BN()||lx()}}const bV=yV;var y1="@firebase/auth",b1="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){it(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TV(n){Ul(new Ao("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;it(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$N(n)},f=new XU(s,a,l,m);return iO(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Ul(new Ao("auth-internal",e=>{const t=Uf(e.getProvider("auth").getImmediate());return(s=>new vV(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nr(y1,b1,_V(n)),Nr(y1,b1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=300,EV=KE("authIdTokenMaxAge")||SV;let v1=null;const wV=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>EV)return;const a=t==null?void 0:t.token;v1!==a&&(v1=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function NV(n=XE()){const e=xg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=sO(n,{popupRedirectResolver:bV,persistence:[IO,ZN,dx]}),s=KE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=wV(l.toString());mO(t,u,()=>u(t.currentUser)),fO(t,h=>u(h))}}const a=HE("auth");return a&&aO(t,`http://${a}`),t}function kV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}ZU({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=Ei("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",kV().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TV("Browser");const ef={xp:0,level:1,streak:0,lastActiveDate:"",unlockedAchievements:[]},AV=(n,e,t,s)=>{let a=0;const l=e.filter(u=>u.isCorrect).length;return a+=l*10,e.length>0&&l===e.length&&(a+=50),t&&(a+=100,s==="SKD"&&n>=350&&(a+=100),s==="UTBK"&&n>=600&&(a+=100)),a},_1=n=>Math.floor(Math.sqrt(n/100))+1,tf=n=>100*Math.pow(n,2),lk=n=>{const e=[...Zv].reverse().find(t=>n>=t.level);return e?e.title:Zv[0].title},CV=n=>{const e=new Date().toISOString().split("T")[0],t=n.lastActiveDate;if(t===e)return n;const s=new Date;s.setDate(s.getDate()-1);const a=s.toISOString().split("T")[0];let l=n.streak;return t===a?l+=1:l=1,{...n,streak:l,lastActiveDate:e}},IV=(n,e)=>{const t=new Set(n.unlockedAchievements),s=[];return up.forEach(a=>{t.has(a.id)||a.condition&&a.condition(e,n)&&s.push(a)}),s},RV={apiKey:"AIzaSyBsULKLrF5rPubDQ10RPWdL4gbjvo8obPI",authDomain:"fajmuls-learning.firebaseapp.com",projectId:"fajmuls-learning",storageBucket:"fajmuls-learning.firebasestorage.app",messagingSenderId:"1078635450652",appId:"1:1078635450652:web:41de35e0038d3bd40caad9"},ck=WE(RV),kt=fU(ck),nf=NV(ck),MV=new Na;console.log("Firebase Service Initialized for: fajmuls-learning");const uk="benchmark_scores",dk="global_leaderboard",mx="test_packages",_n="users",Lu="battles",DV=n=>pO(nf,n),jV=async(n=!0)=>{try{return await hO(nf,n?ZN:dx),(await PO(nf,MV)).user}catch(e){throw console.error("Error signing in with Google",e),e}},PV=async()=>{try{await gO(nf)}catch(n){console.error("Error signing out",n)}},LV=async n=>{const e=ac(ea(kt,_n),Hl("username_lowercase","==",n.toLowerCase()));return(await Ga(e)).empty},Qp=async n=>{const e=ln(kt,_n,n),t=await Pf(e);if(t.exists()){const s=t.data();return s.gamification?s:{...s,gamification:ef}}else return null},UV=async(n,e)=>{const t=ln(kt,_n,n);await Pa(t,{...e,username_lowercase:e.username.toLowerCase(),lastLogin:new Date().toISOString()},{merge:!0});const s=await Pf(t);s.exists()&&!s.data().gamification&&await Uo(t,{gamification:ef})},T1=async(n,e)=>{try{await Uo(ln(kt,_n,n),{gamification:e})}catch(t){console.error("Error updating gamification",t)}},OV=async(n,e)=>{const t={};e.username&&(t.username=e.username,t.username_lowercase=e.username.toLowerCase()),e.photoURL!==void 0&&(t.photoURL=e.photoURL),await Uo(ln(kt,_n,n),t)},Bf=n=>{const e=new WeakSet;return JSON.parse(JSON.stringify(n,(t,s)=>{if(typeof s=="object"&&s!==null){if(e.has(s))return;e.add(s)}if(s!==void 0)return s}))},VV=async(n,e)=>{try{const t=e.timestamp?`sess-${e.timestamp}`:`sess-${Date.now()}`,s=Bf(e);await Pa(ln(kt,_n,n,"sessions",t),{...s,id:t}),console.log(`Session ${t} saved to cloud`)}catch(t){throw console.error("Error saving session to cloud",t),t}},BV=async n=>{try{const e=ac(ea(kt,_n,n,"sessions"),kN("timestamp","desc")),t=await Ga(e),s=[];return t.forEach(a=>{s.push({...a.data(),id:a.id})}),s}catch(e){return console.error("Error fetching all saved sessions",e),[]}},S1=async(n,e)=>{try{await Ro(ln(kt,_n,n,"sessions",e)),console.log(`Cloud session ${e} deleted`)}catch(t){console.error("Error deleting session from cloud",t)}},GV=async n=>{console.log("clearSessionFromCloud called - Use deleteSavedSession for specific items")},ap=async(n,e)=>{try{const t=Bf(e);await Pa(ln(kt,_n,n,"history",e.id),t),console.log("History saved to cloud")}catch(t){console.error("Error saving history to cloud",t)}},hk=async n=>{try{const e=ac(ea(kt,_n,n,"history")),t=await Ga(e),s=[];return t.forEach(a=>{s.push(a.data())}),s.sort((a,l)=>new Date(l.date).getTime()-new Date(a.date).getTime())}catch(e){return console.error("Error fetching history from cloud",e),[]}},FV=async(n,e)=>{try{await Ro(ln(kt,_n,n,"history",e))}catch(t){console.error("Error deleting history from cloud",t)}},E1=async(n,e,t,s,a,l)=>{if(!a||a.startsWith("guest-"))return;const u=`${n}_${e}_${a}`,h=ln(kt,dk,u);try{const m=await Pf(h);if(m.exists()){const f=m.data();t>f.score&&await Uo(h,{score:t,packageName:l||f.packageName,timestamp:Date.now(),username:s})}else{const f={uid:a,username:s,category:n,subCategory:e,score:t,packageName:l,timestamp:Date.now()};await Pa(h,f)}}catch(m){console.error("Error saving to global leaderboard",m)}},Sl=async(n,e,t=50)=>{try{const s=ac(ea(kt,dk),Hl("category","==",n),Hl("subCategory","==",e),kN("score","desc"),AN(t)),a=await Ga(s),l=[];return a.forEach(u=>l.push(u.data())),l}catch(s){return console.error(`Error fetching leaderboard for ${n}/${e}:`,s),[]}},zV=async(n,e,t,s)=>{try{await wU(ea(kt,uk),{game:n,score:e,username:t,unit:s,timestamp:Date.now()})}catch(a){console.error("Error saving score to Firebase:",a)}},HV=async(n,e=5)=>{try{const t=n==="REACTION"||n==="AIM",s=ac(ea(kt,uk),Hl("game","==",n)),a=await Ga(s),l=[];a.forEach(m=>{l.push({id:m.id,...m.data()})}),l.sort((m,f)=>t?m.score-f.score:f.score-m.score);const u=[],h=new Set;for(const m of l){const f=m.username.toLowerCase().trim();if(h.has(f)||(u.push(m),h.add(f)),u.length>=e)break}return u}catch(t){return console.error("Error fetching leaderboard from Firebase:",t),[]}},ch=async n=>{try{const e=Bf(n);await Pa(ln(kt,mx,n.id),e)}catch(e){throw console.error("Error saving package to Firebase:",e),e}},qV=async()=>{try{const n=await Ga(ea(kt,mx)),e=[];return n.forEach(t=>{e.push(t.data())}),e.sort((t,s)=>new Date(s.createdAt).getTime()-new Date(t.createdAt).getTime()),e}catch(n){return console.error("Error fetching packages from Firebase:",n),[]}},KV=async n=>{try{await Ro(ln(kt,mx,n))}catch(e){throw console.error("Error deleting package from Firebase:",e),e}},$V=async n=>{if(!n||n.length<3)return[];try{const e=ac(ea(kt,_n),Hl("username_lowercase",">=",n.toLowerCase()),Hl("username_lowercase","<=",n.toLowerCase()+""),AN(10));return(await Ga(e)).docs.map(s=>{var l;const a=s.data();return{uid:s.id,username:a.username,photoURL:a.photoURL,level:((l=a.gamification)==null?void 0:l.level)||1,lastActive:a.lastLogin}})}catch(e){return console.error("Error searching users",e),[]}},YV=async(n,e)=>{const t={id:`${n.uid}_${Date.now()}`,fromUid:n.uid,fromUsername:n.username,fromPhotoURL:n.photoURL,fromLevel:n.level,timestamp:Date.now()};await Pa(ln(kt,_n,e,"friend_requests",n.uid),t)},JV=async n=>(await Ga(ea(kt,_n,n,"friend_requests"))).docs.map(t=>t.data()),QV=async(n,e,t)=>{const s={uid:t.fromUid,username:t.fromUsername,photoURL:t.fromPhotoURL,level:t.fromLevel,lastActive:new Date().toISOString()};await Pa(ln(kt,_n,n,"friends",t.fromUid),s),await Pa(ln(kt,_n,t.fromUid,"friends",n),e),await Ro(ln(kt,_n,n,"friend_requests",t.fromUid))},WV=async(n,e)=>{await Ro(ln(kt,_n,n,"friend_requests",e))},XV=async(n,e)=>{try{await Ro(ln(kt,_n,n,"friends",e)),await Ro(ln(kt,_n,e,"friends",n))}catch(t){throw console.error("Error removing friend",t),t}},ZV=async n=>{var e;try{const t=await Ga(ea(kt,_n,n,"friends")),s=[];for(const a of t.docs){const l=a.data(),u=await Qp(l.uid);u?s.push({uid:l.uid,username:u.username,photoURL:u.photoURL,level:((e=u.gamification)==null?void 0:e.level)||1,lastActive:u.lastLogin}):s.push(l)}return s}catch(t){return console.error("Error getting friends",t),[]}},e8=async(n,e,t,s)=>{const a=Math.random().toString(36).substring(2,8).toUpperCase(),l={id:a,hostUid:n,hostName:e,guestUid:null,guestName:null,status:"WAITING",category:t,questions:Bf(s),scores:{[n]:0},progress:{[n]:0},winner:null,createdAt:Date.now()};return await Pa(ln(kt,Lu,a),l),a},t8=async(n,e,t)=>{const s=ln(kt,Lu,n),a=await Pf(s);if(!a.exists())throw new Error("Room not found");const l=a.data();if(l.status!=="WAITING")throw new Error("Game already started or finished");if(l.guestUid)throw new Error("Room is full");return await Uo(s,{guestUid:e,guestName:t,status:"STARTING",[`scores.${e}`]:0,[`progress.${e}`]:0}),!0},n8=(n,e)=>NU(ln(kt,Lu,n),t=>{t.exists()&&e(t.data())}),s8=async(n,e,t,s)=>{const a=ln(kt,Lu,n);await Uo(a,{[`scores.${e}`]:t,[`progress.${e}`]:s})},i8=async(n,e)=>{const t=ln(kt,Lu,n);await Uo(t,{status:"FINISHED",winner:e})};class a8{constructor(){if(this.audioCache={},this.soundEnabled=!0,typeof Audio<"u")try{this.preload("click"),this.preload("back"),this.preload("tap")}catch(e){console.error("Audio init error",e)}}preload(e){const t=new Audio(Xv[e]);t.preload="auto",t.volume=.5,this.audioCache[e]=t}syncSettings(e){this.soundEnabled=e.soundEnabled;const t=e.volume!==void 0?e.volume:.5;Object.values(this.audioCache).forEach(s=>{s&&(s.volume=t)})}startMusic(){}stopMusic(){}play(e){if(this.soundEnabled)try{if(this.audioCache[e]){const a=this.audioCache[e];a.currentTime=0;const l=a.play();l!==void 0&&l.catch(()=>{});return}const t=Xv[e];if(!t)return;const s=new Audio(t);s.volume=this.audioCache.click?this.audioCache.click.volume:.5,s.play().catch(()=>{})}catch{}}}const Z=new a8;/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o8=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),w1=n=>{const e=o8(n);return e.charAt(0).toUpperCase()+e.slice(1)},fk=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),l8=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=B.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:u,...h},m)=>B.createElement("svg",{ref:m,...c8,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:fk("lucide",a),...!l&&!l8(h)&&{"aria-hidden":"true"},...h},[...u.map(([f,y])=>B.createElement(f,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(n,e)=>{const t=B.forwardRef(({className:s,...a},l)=>B.createElement(u8,{ref:l,iconNode:e,className:fk(`lucide-${r8(w1(n))}`,`lucide-${n}`,s),...a}));return t.displayName=w1(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Xn=ve("activity",d8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ft=ve("arrow-left",h8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],m8=ve("arrow-up",f8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],mk=ve("award",p8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],x8=ve("bell-off",g8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Wp=ve("bell",y8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Xp=ve("book-open",b8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Gf=ve("book",v8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],T8=ve("bookmark",_8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],E8=ve("box",S8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],_s=ve("brain",w8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ff=ve("briefcase",N8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],A8=ve("building-2",k8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],I8=ve("calculator",C8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],pk=ve("calendar",R8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],D8=ve("camera",M8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],No=ve("chart-no-axes-column",j8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],gk=ve("chevron-down",P8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_r=ve("chevron-right",L8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],O8=ve("chevron-up",U8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],B8=ve("circle-alert",V8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],es=ve("circle-check-big",G8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],z8=ve("circle-play",F8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Fr=ve("circle-x",H8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Cr=ve("clock",q8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],N1=ve("cloud-upload",K8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Kl=ve("copy",$8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],J8=ve("crosshair",Y8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],W8=ve("crown",Q8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],xk=ve("download",X8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],e9=ve("eraser",Z8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],n9=ve("external-link",t9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Do=ve("eye",s9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],a9=ve("file-search",i9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Us=ve("file-text",r9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],$l=ve("flag",o9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],yk=ve("flame",l9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]],u9=ve("footprints",c9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],h9=ve("funnel",d9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],k1=ve("git-compare",f9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],p9=ve("git-merge",m9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],x9=ve("globe",g9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],oc=ve("graduation-cap",y9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Wi=ve("grid-3x3",b9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],sf=ve("hash",v9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],zf=ve("heart",_9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Uu=ve("history",T9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],E9=ve("info",S9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],N9=ve("landmark",w9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],px=ve("layers",k9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],C9=ve("layout-grid",A9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],bk=ve("lightbulb",I9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],M9=ve("list-ordered",R9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Pn=ve("loader-circle",D9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],vk=ve("lock",j9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],L9=ve("log-out",P9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],af=ve("map",U9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],A1=ve("medal",O9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],B9=ve("menu",V9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],F9=ve("message-circle",G9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Hf=ve("message-square",z9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=[["path",{d:"M5 12h14",key:"1ays0h"}]],C1=ve("minus",H9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],K9=ve("monitor",q9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],gx=ve("moon",$9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],_k=ve("mouse-pointer-2",Y9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],I1=ve("music",J9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Tk=ve("package",Q9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Yl=ve("palette",W9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Z9=ve("panels-top-left",X9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Su=ve("pause",e7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Zp=ve("pen-tool",t7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],s7=ve("pen",n7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Oo=ve("play",i7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],eg=ve("plus",a7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],R1=ve("refresh-cw",r7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],l7=ve("repeat",o7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],u7=ve("rocket",c7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],tg=ve("rotate-ccw",d7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],xx=ve("save",h7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fu=ve("search",f7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Sk=ve("settings",m7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],g7=ve("shapes",p7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],y7=ve("share-2",x7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],v7=ve("shield-check",b7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],M1=ve("shield",_7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],S7=ve("sparkles",T7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],w7=ve("square-check-big",E7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],k7=ve("square",N7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],C7=ve("star",A7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ek=ve("sun",I7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],wk=ve("swords",R7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Lr=ve("target",M7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],ng=ve("timer",D7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ur=ve("trash-2",j7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],yx=ve("trending-up",P7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qf=ve("triangle-alert",L7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Es=ve("trophy",U7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Eu=ve("type",O7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],bx=ve("upload",V7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],G7=ve("user-plus",B7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Nk=ve("user",F7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Or=ve("users",z7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],q7=ve("volume-2",H7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],$7=ve("volume-x",K7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vx=ve("x",Y7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],kk=ve("youtube",J7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Os=ve("zap",Q7),W7=()=>{const[n,e]=B.useState(!1),[t,s]=B.useState(1500),[a,l]=B.useState(!1),[u,h]=B.useState("focus");B.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),B.useEffect(()=>{let E=null;return a&&t>0?E=setInterval(()=>{s(t-1)},1e3):t===0&&(l(!1),m()),()=>clearInterval(E)},[a,t]);const m=()=>{new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play().catch(M=>console.log("Audio play failed",M)),"Notification"in window&&Notification.permission==="granted"&&new Notification(u==="focus"?"Fokus Selesai!":"Istirahat Selesai!",{body:u==="focus"?"Waktunya istirahat sejenak.":"Kembali fokus belajar!",icon:"/favicon.ico"})},f=()=>l(!a),y=()=>{l(!1),s(u==="focus"?1500:300)},_=()=>{const E=u==="focus"?"break":"focus";h(E),s(E==="focus"?1500:300),l(!1)},T=E=>{const M=Math.floor(E/60),A=E%60;return`${M.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}`};return n?o.jsxs("div",{className:"fixed bottom-4 right-4 w-[calc(100vw-2rem)] max-w-xs bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 z-50 overflow-hidden animate-fade-in-up",children:[o.jsxs("div",{className:`p-4 ${u==="focus"?"bg-indigo-600":"bg-emerald-500"} text-white flex justify-between items-center`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ng,{size:20}),o.jsx("span",{className:"font-bold",children:u==="focus"?"Fokus":"Istirahat"})]}),o.jsx("button",{onClick:()=>e(!1),className:"hover:bg-white/20 p-1 rounded",children:o.jsx(vx,{size:18})})]}),o.jsxs("div",{className:"p-6 flex flex-col items-center",children:[o.jsx("div",{className:"text-5xl font-mono font-bold text-slate-800 dark:text-slate-100 mb-6 tracking-wider",children:T(t)}),o.jsxs("div",{className:"flex gap-4 mb-6",children:[o.jsx("button",{onClick:f,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:a?o.jsx(Su,{size:24}):o.jsx(Oo,{size:24})}),o.jsx("button",{onClick:y,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:o.jsx(tg,{size:24})})]}),o.jsxs("button",{onClick:_,className:"text-sm text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 underline",children:["Ganti ke Mode ",u==="focus"?"Istirahat":"Fokus"]})]})]}):o.jsxs("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-full shadow-xl z-50 flex items-center gap-2 transition-all",children:[o.jsx(ng,{size:24}),o.jsx("span",{className:"font-semibold hidden sm:inline",children:"Pomodoro"})]})},X7=({data:n,onNext:e,isLearned:t,onToggleLearned:s})=>{const[a,l]=B.useState(!1);return o.jsxs("div",{className:"w-full max-w-xl mx-auto perspective-1000",children:[o.jsxs("div",{className:`relative w-full h-80 transition-transform duration-700 transform-style-3d cursor-pointer ${a?"rotate-y-180":""}`,onClick:()=>l(!a),children:[o.jsxs("div",{className:`absolute w-full h-full ${t?"bg-emerald-50 border-emerald-200":"bg-white border-indigo-100"} rounded-2xl shadow-xl border-2 flex items-center justify-center p-8 backface-hidden transition-colors duration-300`,children:[s&&o.jsx("button",{onClick:u=>{u.stopPropagation(),s()},className:`absolute top-4 right-4 p-2 rounded-full z-10 transition-all duration-300 ${t?"bg-emerald-500 text-white scale-110 shadow-lg":"bg-slate-100 text-slate-300 hover:bg-slate-200"}`,title:t?"Tandai belum paham":"Tandai sudah paham",children:o.jsx(es,{size:24})}),o.jsxs("div",{className:"text-center",children:[n.title&&o.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-2 border-b border-slate-100 pb-2",children:n.title}),o.jsx("span",{className:`inline-block px-3 py-1 ${t?"bg-emerald-100 text-emerald-700":"bg-indigo-100 text-indigo-700"} rounded-full text-xs font-bold mb-4 transition-colors`,children:"QUESTION"}),o.jsx("p",{className:"text-2xl font-medium text-slate-800 leading-relaxed",children:n.front}),o.jsx("p",{className:"mt-8 text-slate-400 text-sm animate-pulse",children:"Tap to flip"})]})]}),o.jsx("div",{className:`absolute w-full h-full ${t?"bg-emerald-600":"bg-indigo-600"} rounded-2xl shadow-xl flex items-center justify-center p-8 backface-hidden rotate-y-180 transition-colors duration-300`,children:o.jsxs("div",{className:"text-center text-white",children:[n.title&&o.jsx("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-widest mb-2 border-b border-white/20 pb-2",children:n.title}),o.jsx("span",{className:"inline-block px-3 py-1 bg-white/20 text-white rounded-full text-xs font-bold mb-4",children:"ANSWER"}),o.jsx("p",{className:"text-xl leading-relaxed",children:n.back})]})})]}),a&&o.jsxs("div",{className:"mt-8 flex justify-center gap-3",children:[o.jsx("button",{onClick:()=>{l(!1),e("hard")},className:"px-6 py-2 bg-rose-100 text-rose-700 rounded-lg hover:bg-rose-200 font-medium transition",children:"Sulit (1m)"}),o.jsx("button",{onClick:()=>{l(!1),e("medium")},className:"px-6 py-2 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 font-medium transition",children:"Sedang (10m)"}),o.jsx("button",{onClick:()=>{l(!1),e("easy")},className:"px-6 py-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 font-medium transition",children:"Mudah (4d)"})]})]})},Ak=({node:n,depth:e=0})=>o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:`
        border-2 px-4 py-2 rounded-xl text-center font-medium shadow-sm transition-all hover:scale-105
        ${e===0?"bg-indigo-600 text-white border-indigo-600 mb-4 text-lg":""}
        ${e===1?"bg-white text-indigo-700 border-indigo-200 mb-4 text-base":""}
        ${e>1?"bg-slate-50 text-slate-600 border-slate-200 text-sm":""}
      `,children:n.label}),n.children&&n.children.length>0&&o.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:gap-8 relative pt-4",children:[o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-px h-4 bg-slate-300"}),o.jsx("div",{className:"absolute top-0 left-4 right-4 h-px bg-slate-300"}),n.children.map((t,s)=>o.jsxs("div",{className:"flex flex-col items-center relative",children:[o.jsx("div",{className:"w-px h-4 bg-slate-300 mb-1"}),o.jsx(Ak,{node:t,depth:e+1})]},s))]})]}),Z7=({data:n})=>{const e=n.root||n;return o.jsx("div",{className:"p-8 bg-slate-50 rounded-3xl overflow-x-auto border border-slate-200 min-h-[400px] flex justify-center",children:o.jsx(Ak,{node:e})})},vo=({className:n="",height:e="h-4",width:t="w-full"})=>o.jsx("div",{className:`animate-pulse bg-slate-200 dark:bg-slate-700 rounded-md ${e} ${t} ${n}`}),eB=()=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx(vo,{height:"h-12",width:"w-12",className:"rounded-full"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx(vo,{height:"h-4",width:"w-1/3"}),o.jsx(vo,{height:"h-3",width:"w-1/2"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(vo,{height:"h-4"}),o.jsx(vo,{height:"h-4"}),o.jsx(vo,{height:"h-4",width:"w-2/3"})]})]}),tB=({onComplete:n})=>{const e=()=>{Z.play("click"),n()};return o.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-center p-6 text-center animate-fade-in cursor-pointer",onClick:e,children:[o.jsxs("div",{className:"relative mb-8 group",children:[o.jsx("div",{className:"absolute -inset-4 bg-indigo-500 rounded-full opacity-20 group-hover:opacity-40 blur-xl transition-opacity duration-1000 animate-pulse"}),o.jsx("img",{src:Nh,alt:"Fajmuls Learning",className:"w-48 h-48 md:w-64 md:h-64 object-contain relative z-10 drop-shadow-2xl animate-bounce-slow"})]}),o.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-2 tracking-tight",children:["Fajmuls ",o.jsx("span",{className:"text-indigo-400",children:"Learning"})]}),o.jsx("p",{className:"text-slate-400 text-lg mb-10 max-w-md",children:"Platform Belajar Cerdas Terintegrasi AI"}),o.jsxs("button",{onClick:t=>{t.stopPropagation(),e()},className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] transition-all flex items-center gap-2",children:[o.jsx(u7,{size:24,className:"text-indigo-600"})," Mulai Belajar"]})]})},nB=({isOpen:n,onClose:e,settings:t,onUpdate:s,userProfile:a})=>{var E,M;if(!n)return null;const l=A=>{Z.play("tap"),s({...t,[A]:!t[A]})},u=A=>{Z.play("click");let C=t.appPattern;A==="fajmuls"&&C==="none"&&(C="fajmuls"),s({...t,theme:A,darkMode:A==="dark",appPattern:C})},h=A=>{Z.play("tap"),s({...t,appBaseColor:A})},m=A=>{Z.play("click"),s({...t,appPattern:A})},f=A=>{Z.play("tap"),s({...t,fontSize:A})},y=A=>{s({...t,volume:parseFloat(A.target.value)})},_=[{id:"white",label:"Putih",color:"#ffffff"},{id:"gray",label:"Abu-abu",color:"#cbd5e1"},{id:"mint",label:"Mint",color:"#6ee7b7"},{id:"cream",label:"Cream",color:"#fcd34d"},{id:"blue",label:"Biru",color:"#93c5fd"},{id:"dark",label:"Dark",color:"#0f172a"}],T=[{id:"none",label:"Polos",css:""},{id:"grid",label:"Grid",css:"bg-pattern-grid"},{id:"dots",label:"Dots",css:"bg-pattern-dots"},{id:"waves",label:"Waves",css:"bg-pattern-waves"},{id:"aurora",label:"Aurora",css:"bg-pattern-aurora"},{id:"fajmuls",label:"Fajmuls",css:"bg-pattern-fajmuls"}];return o.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700 max-h-[85vh] overflow-y-auto scrollbar-hide relative",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-white dark:bg-slate-800 z-10 py-2 border-b border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(Sk,{size:24,className:"text-slate-400"})," Pengaturan"]}),o.jsx("button",{onClick:()=>{Z.play("back"),e()},children:o.jsx(Fr,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),o.jsxs("div",{className:"space-y-4",children:[a&&o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-xl mb-4 border border-indigo-100 dark:border-indigo-800 flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-200 dark:bg-indigo-800 flex items-center justify-center text-indigo-700 dark:text-indigo-200 font-bold text-lg overflow-hidden",children:a.photoURL?o.jsx("img",{src:a.photoURL,alt:"Prof",className:"w-full h-full object-cover"}):(M=(E=a.username)==null?void 0:E[0])==null?void 0:M.toUpperCase()}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:a.username}),o.jsx("div",{className:"text-xs text-slate-500",children:a.isGuest?"Mode Tamu":"Akun Terhubung"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Tampilan"}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3 text-slate-700 dark:text-slate-200 font-bold text-sm",children:[o.jsx(Z9,{size:16})," Tema Aplikasi"]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsxs("button",{onClick:()=>u("light"),className:`flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all ${t.theme==="light"?"bg-white border-indigo-500 text-indigo-600 shadow-md":"bg-slate-100 border-transparent text-slate-500 hover:bg-white"}`,children:[o.jsx(Ek,{size:20,className:"mb-1"}),o.jsx("span",{className:"text-xs font-bold",children:"Light"})]}),o.jsxs("button",{onClick:()=>u("dark"),className:`flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all ${t.theme==="dark"?"bg-slate-900 border-indigo-500 text-indigo-400 shadow-md":"bg-slate-100 dark:bg-slate-600 border-transparent text-slate-500 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-500"}`,children:[o.jsx(gx,{size:20,className:"mb-1"}),o.jsx("span",{className:"text-xs font-bold",children:"Dark"})]}),o.jsxs("button",{onClick:()=>u("fajmuls"),className:`flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all relative overflow-hidden ${t.theme==="fajmuls"?"bg-gradient-to-br from-cyan-50 to-blue-50 border-indigo-500 text-indigo-600 shadow-md":"bg-slate-100 border-transparent text-slate-500 hover:bg-white"}`,children:[o.jsx("div",{className:"absolute inset-0 bg-white/50 backdrop-blur-sm z-0"}),o.jsx(S7,{size:20,className:"mb-1 relative z-10"}),o.jsx("span",{className:"text-xs font-bold relative z-10",children:"Fajmuls"})]})]})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3 text-slate-700 dark:text-slate-200 font-bold text-sm",children:[o.jsx(K9,{size:16})," Background"]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2 block",children:"Warna Dasar (Solid)"}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[_.map(A=>o.jsx("button",{onClick:()=>h(A.color),className:`w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 shadow-sm ${t.appBaseColor===A.color?"border-indigo-600 scale-110 ring-2 ring-indigo-200":"border-slate-300 dark:border-slate-600"}`,style:{backgroundColor:A.color},title:A.label},A.id)),o.jsxs("div",{className:"relative w-8 h-8 rounded-full overflow-hidden border-2 border-slate-300 dark:border-slate-600 hover:scale-110 transition-transform shadow-sm group",children:[o.jsx("input",{type:"color",value:t.appBaseColor,onChange:A=>h(A.target.value),className:"absolute inset-0 w-[150%] h-[150%] -top-[25%] -left-[25%] cursor-pointer p-0 border-0"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:o.jsx(Yl,{size:14,className:"text-slate-500 bg-white/50 rounded-full p-0.5"})})]})]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2 block",children:"Pola / Pattern Overlay"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:T.map(A=>o.jsxs("button",{onClick:()=>m(A.id),className:`relative overflow-hidden rounded-lg border-2 transition-all h-12 flex items-center justify-center group ${t.appPattern===A.id?"border-indigo-600":"border-slate-200 dark:border-slate-600 hover:border-slate-400"}`,style:{backgroundColor:t.appBaseColor},children:[o.jsx("div",{className:`absolute inset-0 w-full h-full ${A.css} opacity-70 group-hover:opacity-100 transition-opacity`}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded bg-white/80 dark:bg-black/60 backdrop-blur-sm shadow-sm ${t.appPattern===A.id?"text-indigo-600":"text-slate-700 dark:text-slate-200"}`,children:A.label})})]},A.id))})]})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3 text-slate-700 dark:text-slate-200 font-bold text-sm",children:[o.jsx(Eu,{size:16})," Ukuran Font Soal"]}),o.jsx("div",{className:"flex bg-slate-200 dark:bg-slate-600 rounded-lg p-1",children:[{id:"sm",label:"S"},{id:"md",label:"M"},{id:"lg",label:"L"},{id:"xl",label:"XL"}].map(A=>o.jsx("button",{onClick:()=>f(A.id),className:`flex-1 py-1.5 rounded-md text-xs font-bold transition-all ${t.fontSize===A.id?"bg-white text-indigo-600 shadow-sm":"text-slate-500 dark:text-slate-300 hover:text-slate-700 dark:hover:text-white"}`,children:A.label},A.id))})]})]}),o.jsxs("div",{className:"space-y-4 pt-2",children:[o.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Suara & Sistem"}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.soundEnabled?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:t.soundEnabled?o.jsx(q7,{size:18}):o.jsx($7,{size:18})}),o.jsx("span",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Efek Suara"})]}),o.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-indigo-600",checked:t.soundEnabled,onChange:()=>l("soundEnabled")})]}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.musicEnabled?"bg-pink-100 text-pink-600":"bg-slate-200 text-slate-500"}`,children:t.musicEnabled?o.jsx(I1,{size:18}):o.jsx(I1,{size:18,className:"opacity-50"})}),o.jsx("span",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Musik Latar"})]}),o.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-indigo-600",checked:t.musicEnabled,onChange:()=>l("musicEnabled")})]}),o.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Volume"}),o.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[Math.round(t.volume*100),"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.volume,onChange:y,className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-600 accent-indigo-600"})]}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.funnyNotifications?"bg-amber-100 text-amber-600":"bg-slate-200 text-slate-500"}`,children:t.funnyNotifications?o.jsx(Wp,{size:18}):o.jsx(x8,{size:18})}),o.jsx("span",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Notifikasi Lucu"})]}),o.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-indigo-600",checked:t.funnyNotifications,onChange:()=>l("funnyNotifications")})]}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.confirmActions?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:o.jsx(es,{size:18})}),o.jsx("span",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Konfirmasi Aksi"})]}),o.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-indigo-600",checked:t.confirmActions,onChange:()=>l("confirmActions")})]})]})]})]})})},sB="Fajmuls22",iB=({category:n,skdStream:e,tpaStream:t,availablePackages:s,history:a,onSelectPackage:l,onGenerateNew:u,onImportPackage:h,onDeletePackage:m,onFixDuplicates:f,onFixGaps:y,onBack:_,showToast:T,confirmEnabled:E,onRefresh:M,isLoading:A})=>{B.useEffect(()=>{M()},[]);const[C,D]=B.useState(""),[G,I]=B.useState(!1),[q,X]=B.useState(null),[J,j]=B.useState(!1),N=B.useRef(null),R=(ne,z)=>{const Q=a.filter(ie=>ie.packageId===ne||ie.packageTitle&&ie.packageTitle.trim()===z.trim());if(Q.length===0)return{attempts:0,highScore:0,avgScore:0,lastAttemptDate:""};const fe=Q.map(ie=>ie.score);return{attempts:Q.length,highScore:Math.max(...fe),avgScore:Math.round(fe.reduce((ie,ce)=>ie+ce,0)/fe.length),lastAttemptDate:Q[0].date}},P=(ne,z)=>{Z.play("click"),X({type:ne,payload:z}),D(""),I(!0)},U=()=>{var ne;if(!C){T("Masukkan token akses!","error");return}C===sB?(I(!1),Z.play("success"),(q==null?void 0:q.type)==="GENERATE"?F():(q==null?void 0:q.type)==="IMPORT"?(ne=N.current)==null||ne.click():(q==null?void 0:q.type)==="DELETE"?O(q.payload):(q==null?void 0:q.type)==="FIX_DUPLICATES"?f&&f():(q==null?void 0:q.type)==="FIX_GAPS"&&y&&y()):(Z.play("error"),T("Token salah! Akses ditolak.","error"))},F=async()=>{j(!0);try{await u("verified_client")}catch(ne){console.error(ne)}finally{j(!1)}},O=ne=>{m(ne)},Ae=(ne,z)=>{ne.stopPropagation();const Q=JSON.stringify(z,null,2),fe=new Blob([Q],{type:"application/json"}),ie=URL.createObjectURL(fe),ce=document.createElement("a");ce.href=ie,ce.download=`${z.title.replace(/\s+/g,"_")}.json`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),URL.revokeObjectURL(ie),T("Paket Soal berhasil didownload","success")},Le=()=>{Z.play("click"),M()},Y=s.filter(ne=>ne.category!==n?!1:n==="SKD"&&e?ne.skdStream===e:n==="TPA"?t==="PSIKOTEST_KEDINASAN"?ne.tpaStream==="PSIKOTEST_KEDINASAN"||ne.title&&ne.title.toLowerCase().includes("psikotes"):ne.tpaStream==="TPA_TBI"||!ne.tpaStream&&!ne.title.toLowerCase().includes("psikotes"):!0).sort((ne,z)=>ne.title.localeCompare(z.title,void 0,{numeric:!0,sensitivity:"base"})),oe=B.useMemo(()=>{const ne=new Map;Y.forEach(Q=>{ne.set(Q.title,(ne.get(Q.title)||0)+1)});let z=0;return ne.forEach(Q=>{Q>1&&z++}),z},[Y]),_e=B.useMemo(()=>{if(Y.length<2)return 0;const ne=[...Y].sort((Q,fe)=>new Date(Q.createdAt).getTime()-new Date(fe.createdAt).getTime());let z=!1;for(let Q=0;Q<ne.length;Q++){const ie=ne[Q].title.match(/(\d+)$/);if(ie&&parseInt(ie[1])!==Q+1){z=!0;break}}return z?1:0},[Y]);let Me=`Pilih Paket Soal ${n}`;return n==="SKD"&&e&&(Me=`Paket Soal SKD ${e==="CPNS"?"CPNS Umum":"Kedinasan"}`),n==="TPA"&&t==="PSIKOTEST_KEDINASAN"&&(Me="Paket Psikotes Kedinasan (STAN)"),n==="TPA"&&t==="TPA_TBI"&&(Me="Paket Soal TPA & TBI"),o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center relative",children:[G&&o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mb-4",children:o.jsx(v7,{size:32})}),o.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Verifikasi Admin"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center mt-1",children:"Fitur ini dilindungi. Masukkan token untuk melanjutkan."})]}),o.jsx("input",{type:"password",placeholder:"Token Akses...",value:C,onChange:ne=>D(ne.target.value),className:"w-full p-4 border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:border-indigo-600 focus:ring-0 outline-none text-center font-bold tracking-widest",autoFocus:!0,onKeyDown:ne=>ne.key==="Enter"&&U()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>I(!1),className:"flex-1 py-3 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Batal"}),o.jsx("button",{onClick:U,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Verifikasi"})]})]})}),o.jsxs("div",{className:"max-w-4xl w-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("button",{onClick:_,className:"flex items-center gap-2 text-slate-500 hover:text-indigo-600",children:[o.jsx(ft,{size:20})," Kembali"]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white hidden sm:block",children:Me}),o.jsx("button",{onClick:Le,disabled:A,className:"p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:shadow-sm transition disabled:opacity-50",title:"Refresh Paket Soal",children:o.jsx(R1,{size:20,className:A?"animate-spin":""})})]})]}),o.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6 sm:hidden",children:Me}),oe>0&&f&&o.jsxs("div",{className:"mb-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 p-4 rounded-xl flex items-center justify-between animate-fade-in-down shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-800 rounded-lg text-amber-600 dark:text-amber-400",children:o.jsx(qf,{size:24})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:"Terdeteksi Nama Paket Ganda"}),o.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 hidden sm:block",children:["Ditemukan ",oe," judul yang sama. Sistem dapat memperbaikinya secara otomatis."]})]})]}),o.jsxs("button",{onClick:()=>P("FIX_DUPLICATES"),className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-bold text-sm transition shadow-sm flex items-center gap-2 whitespace-nowrap",children:[o.jsx(Zp,{size:16}),"Perbaiki"]})]}),_e>0&&y&&o.jsxs("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 p-4 rounded-xl flex items-center justify-between animate-fade-in-down shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg text-blue-600 dark:text-blue-400",children:o.jsx(M9,{size:24})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:"Terdeteksi Lompatan Nomor"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 hidden sm:block",children:"Urutan paket soal tidak kontinu (ada nomor yang hilang)."})]})]}),o.jsxs("button",{onClick:()=>P("FIX_GAPS"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold text-sm transition shadow-sm flex items-center gap-2 whitespace-nowrap",children:[o.jsx(R1,{size:16}),"Urutkan Ulang"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-8",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[o.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(vk,{size:18,className:"text-slate-400"})," Admin Zone"]}),o.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[o.jsxs("button",{onClick:()=>P("GENERATE"),disabled:J,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-indigo-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition shadow-sm",children:[J?o.jsx(Pn,{className:"animate-spin",size:18}):o.jsx(eg,{size:18}),o.jsx("span",{children:"Buat Paket AI"})]}),o.jsxs("button",{onClick:()=>P("IMPORT"),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-white dark:bg-slate-700 text-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 px-5 py-2.5 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition shadow-sm",children:[o.jsx(bx,{size:18}),o.jsx("span",{children:"Import"})]})]})]}),o.jsx("input",{type:"file",ref:N,className:"hidden",accept:".json",multiple:!0,onChange:ne=>{ne.target.files&&ne.target.files.length>0&&h(ne.target.files),N.current&&(N.current.value="")}})]}),A&&Y.length===0?o.jsxs("div",{className:"py-20 text-center text-slate-500",children:[o.jsx(Pn,{className:"animate-spin mx-auto mb-2"}),o.jsx("p",{children:"Memuat paket soal terbaru..."})]}):Y.length===0?o.jsxs("div",{className:"py-20 text-center text-slate-500 bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700",children:[o.jsx(Us,{className:"mx-auto mb-4 opacity-20",size:48}),o.jsx("p",{children:"Belum ada paket soal untuk kategori ini."}),o.jsx("p",{className:"text-xs mt-2",children:'Gunakan tombol "Buat Paket AI" untuk generate soal baru.'})]}):o.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Y.map(ne=>{const z=R(ne.id,ne.title);return o.jsxs("button",{onClick:()=>l(ne),className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 transition text-left group relative overflow-hidden w-full shadow-sm hover:shadow-md",children:[ne.isAiGenerated&&o.jsx("div",{className:"absolute top-0 right-0 bg-indigo-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg",children:"AI Generated"}),o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2 group-hover:text-indigo-600 transition-colors pr-8 line-clamp-2",children:ne.title}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{onClick:Q=>Ae(Q,ne),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Download JSON Soal",children:o.jsx(xk,{size:18})}),o.jsx("div",{onClick:Q=>{Q.stopPropagation(),P("DELETE",ne.id)},className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Hapus Paket (Butuh Token)",children:o.jsx(Ur,{size:18})})]})]}),o.jsxs("div",{className:"flex gap-4 text-xs text-slate-500 dark:text-slate-400 mb-4 items-center flex-wrap",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Cr,{size:12})," ",ne.durationMinutes," Menit"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Us,{size:12})," ",ne.questions.length," Soal"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(pk,{size:12})," ",new Date(ne.createdAt).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})]}),ne.version==="v2"&&o.jsx("span",{className:"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300 font-bold px-2 py-0.5 rounded-full text-[10px] border border-purple-200 dark:border-purple-800",children:"v2"}),ne.version==="v3"&&o.jsxs("span",{className:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300 font-bold px-2 py-0.5 rounded-full text-[10px] border border-amber-200 dark:border-amber-800 flex items-center gap-1",children:[o.jsx(E8,{size:10})," v3 (3D)"]})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-xl p-3 grid grid-cols-3 gap-2 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Percobaan"}),o.jsxs("div",{className:"text-lg font-bold text-slate-800 dark:text-white",children:[z.attempts,"x"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Tertinggi"}),o.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:z.highScore})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Rata-rata"}),o.jsx("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:z.avgScore})]})]})]},ne.id)})})]})]})},aB=({text:n})=>{if(!n)return null;let e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return e=e.replace(/([\u00BC-\u00BE\u2150-\u215E\u2190-\u21FF\u2200-\u22FF\u2300-\u23FF\u2460-\u24FF\u2500-\u257F\u25A0-\u25FF\u2600-\u26FF\u2700-\u27BF\u2B00-\u2BFF\u{1F000}-\u{1F9FF}])/gu,'<span style="font-size: 2.5em; line-height: 1; vertical-align: middle; display: inline-block; padding: 0 4px;">$1</span>'),o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},rB=({answers:n,questions:e,onHome:t,onRetry:s,category:a,details:l})=>{const u=n.filter(A=>A.isCorrect).length;let h=(l==null?void 0:l.total)||(l==null?void 0:l.average)||(l==null?void 0:l.iqScore)||Math.round(u/e.length*100);if(a==="GENERAL"&&!l){const A=n.reduce((C,D)=>C+(D.scoreEarned||0),0);h=Math.round(A/(e.length||1))}const[m,f]=B.useState(""),[y,_]=B.useState(!1),T=n.filter(A=>!A.isCorrect),E=Array.from(new Set(T.map(A=>{var D,G;const C=e.find(I=>I.id===A.questionId);return((D=C==null?void 0:C.metadata)==null?void 0:D.subtest)||((G=C==null?void 0:C.metadata)==null?void 0:G.topic)||"General"}))),M=async()=>{_(!0);try{const A=await Tj(E);f(A)}catch{alert("Gagal memuat saran AI.")}finally{_(!1)}};return o.jsx("div",{className:"min-h-screen bg-white dark:bg-slate-900 p-6 md:p-12 flex flex-col items-center transition-colors",children:o.jsxs("div",{className:"max-w-2xl w-full text-center",children:[o.jsx("div",{className:"inline-block p-4 rounded-full bg-slate-50 dark:bg-slate-800 mb-6",children:h>=(a==="UTBK"?600:70)?o.jsx(mk,{size:48,className:"text-emerald-500"}):o.jsx(Xn,{size:48,className:"text-amber-500"})}),o.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Sesi Selesai!"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut adalah analisis hasil belajar Anda."}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[o.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:"Skor Akhir"}),o.jsx("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:h})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[o.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:a==="GENERAL"?"Poin":"Akurasi"}),o.jsx("div",{className:"text-4xl font-black text-indigo-600 dark:text-indigo-400",children:a==="GENERAL"?h:`${Math.round(u/e.length*100)}%`})]})]}),a==="UTBK"&&l&&o.jsxs("div",{className:"mb-8 w-full bg-slate-50 dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-4",children:[o.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 text-left border-b border-slate-200 dark:border-slate-700 pb-2",children:"Rincian Subtes (IRT)"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Penalaran Umum:"})," ",o.jsx("b",{children:l.pu})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"PPU:"})," ",o.jsx("b",{children:l.ppu})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"PBM:"})," ",o.jsx("b",{children:l.pbm})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Kuantitatif:"})," ",o.jsx("b",{children:l.pk})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Lit. B.Indo:"})," ",o.jsx("b",{children:l.lbi})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Lit. B.Inggris:"})," ",o.jsx("b",{children:l.lbe})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Penalaran Math:"})," ",o.jsx("b",{children:l.pm})]})]})]}),E.length>0&&o.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/10 border border-rose-100 dark:border-rose-900 p-6 rounded-2xl mb-8 text-left w-full",children:[o.jsxs("h3",{className:"font-bold text-rose-800 dark:text-rose-400 flex items-center gap-2",children:[o.jsx(Lr,{size:20})," Topik Perlu Perbaikan"]}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:E.slice(0,5).map(A=>o.jsx("span",{className:"bg-white dark:bg-rose-900/40 text-rose-600 dark:text-rose-200 px-3 py-1 rounded-full text-xs font-bold border border-rose-200 dark:border-rose-800",children:A},A))}),m?o.jsxs("div",{className:"mt-4 pt-4 border-t border-rose-200 dark:border-rose-800",children:[o.jsx("h4",{className:"font-bold text-sm text-rose-800 dark:text-rose-400 mb-2",children:"Saran AI:"}),o.jsx("div",{className:"prose prose-sm prose-rose max-w-none text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 p-4 rounded-xl border border-rose-100 dark:border-rose-800",children:o.jsx(aB,{text:m})})]}):o.jsxs("button",{onClick:M,disabled:y,className:"text-sm font-bold text-rose-700 dark:text-rose-400 underline flex items-center gap-1 hover:text-rose-900 dark:hover:text-rose-300",children:[y?o.jsx(Pn,{className:"animate-spin",size:14}):o.jsx(bk,{size:14}),"Minta Saran Perbaikan AI"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden text-left mb-8 w-full",children:[o.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 border-b border-slate-100 dark:border-slate-600 font-bold text-slate-700 dark:text-slate-200",children:"Detail Jawaban"}),o.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.map((A,C)=>{const D=n.find(q=>q.questionId===A.id),G=D==null?void 0:D.isCorrect,I=encodeURIComponent(`Pembahasan Soal ${a} ${A.metadata.subtest||A.metadata.topic}`);return o.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-750 transition",children:[o.jsxs("div",{className:"flex justify-between items-start mb-1",children:[o.jsxs("span",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:["Soal ",C+1]}),G?o.jsx(es,{size:16,className:"text-emerald-500"}):o.jsx(Fr,{size:16,className:"text-rose-500"})]}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2 mb-2",children:A.content}),o.jsxs("div",{className:"flex justify-between items-center",children:[!G&&A.type==="multiple_choice"&&o.jsxs("p",{className:"text-xs text-rose-500",children:["Jawaban: ",(D==null?void 0:D.selectedAnswer)||"-"," (Kunci: ",A.correctAnswer,")"]}),o.jsxs("a",{href:`https://www.youtube.com/results?search_query=${I}`,target:"_blank",rel:"noreferrer",className:"ml-auto text-[10px] flex items-center gap-1 bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 px-2 py-1 rounded-full font-bold hover:bg-red-100 dark:hover:bg-red-900/40 transition",children:[o.jsx(kk,{size:12})," Tonton Pembahasan"]})]})]},C)})})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:t,className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ke Menu Utama"}),o.jsx("button",{onClick:s,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Coba Lagi"})]})]})})},uh=({text:n})=>{if(!n)return null;let e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return e=e.replace(/([\u00BC-\u00BE\u2150-\u215E\u2190-\u21FF\u2200-\u22FF\u2300-\u23FF\u2460-\u24FF\u2500-\u257F\u25A0-\u25FF\u2600-\u26FF\u2700-\u27BF\u2B00-\u2BFF\u{1F000}-\u{1F9FF}])/gu,'<span style="font-size: 2.5em; line-height: 1; vertical-align: middle; display: inline-block; padding: 0 4px;">$1</span>'),o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},rf=n=>n.category==="PSIKOTEST"&&n.details&&"speedPerMinute"in n.details,Ck=n=>n.category==="KECERMATAN"&&n.details&&"averageSpeed"in n.details,rp=n=>n.category==="PSIKOTEST"&&n.details&&"iqScore"in n.details,oB=n=>n.category==="BUTAWRNA",lB=n=>{switch(n){case"UTBK":return{icon:oc,color:"text-rose-600",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800"};case"SKD":return{icon:Ff,color:"text-amber-600",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800"};case"PSIKOTEST":return{icon:_s,color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800"};case"TPA":return{icon:Os,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800"};case"KECERMATAN":return{icon:Do,color:"text-emerald-600",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800"};case"INTERVIEW":return{icon:Hf,color:"text-cyan-600",bg:"bg-cyan-100 dark:bg-cyan-900/30",border:"border-cyan-200 dark:border-cyan-800"};case"BUTAWRNA":return{icon:Yl,color:"text-pink-600",bg:"bg-pink-100 dark:bg-pink-900/30",border:"border-pink-200 dark:border-pink-800"};case"SKRIPSI":return{icon:Gf,color:"text-indigo-600",bg:"bg-indigo-100 dark:bg-indigo-900/30",border:"border-indigo-200 dark:border-indigo-800"};default:return{icon:Us,color:"text-slate-600",bg:"bg-slate-100 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"}}},Tr=(n,e="PERCENT")=>{let t="",s="";return e==="IQ"?n>=130?(t="Sempurna (Genius)",s="text-cyan-500 dark:text-cyan-400"):n>=120?(t="Istimewa (Superior)",s="text-teal-500 dark:text-teal-400"):n>=110?(t="Sangat Baik (High Avg)",s="text-emerald-500 dark:text-emerald-400"):n>=90?(t="Baik (Average)",s="text-indigo-500 dark:text-indigo-400"):n>=80?(t="Cukup (Low Avg)",s="text-amber-500 dark:text-amber-400"):n>=70?(t="Buruk (Borderline)",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"):n===100?(t="Sempurna",s="text-cyan-500 dark:text-cyan-400"):n>=95?(t="Istimewa",s="text-teal-500 dark:text-teal-400"):n>=85?(t="Sangat Baik",s="text-emerald-500 dark:text-emerald-400"):n>=70?(t="Baik",s="text-lime-600 dark:text-lime-500"):n>=55?(t="Cukup",s="text-amber-500 dark:text-amber-400"):n>=40?(t="Buruk",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"),{text:t,color:s}},D1=n=>{if(n<60)return`${Math.round(n)}s`;const e=Math.floor(n/60),t=Math.round(n%60);return`${e}m ${t}s`},Ik=n=>n==="SIMBOL"||n==="SAMA_BEDA"?"SAMA BEDA SIMBOL":n==="SIMBOL_HILANG"?"SIMBOL HILANG":n==="ANGKA"?"ANGKA HILANG":n==="HURUF"?"HURUF HILANG":n,cB=(n,e)=>{var t;if(!e)return"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700";if(n.tkpPoints&&n.tkpPoints.length>0||(t=n.metadata)!=null&&t.subtest&&n.metadata.subtest.includes("TKP")){const s=e.scoreEarned;return s>=5?"bg-emerald-200 dark:bg-emerald-900/40 border-emerald-300 dark:border-emerald-700":s===4?"bg-lime-200 dark:bg-lime-900/40 border-lime-300 dark:border-lime-700":s===3?"bg-yellow-200 dark:bg-yellow-900/40 border-yellow-300 dark:border-yellow-700":s===2?"bg-orange-200 dark:bg-orange-900/40 border-orange-300 dark:border-orange-700":"bg-rose-200 dark:bg-rose-900/40 border-rose-300 dark:border-rose-700"}return e.isCorrect?"bg-emerald-100 dark:bg-emerald-900/30 border-emerald-200 dark:border-emerald-800":"bg-rose-100 dark:bg-rose-900/30 border-rose-200 dark:border-rose-800"},uB=({history:n,onBack:e,onReview:t,username:s,onExport:a,onImport:l,onDelete:u,onToggleStudied:h})=>{const[m,f]=B.useState("ALL"),[y,_]=B.useState(null),T=B.useRef(null),E=n.filter(I=>m==="ALL"||I.category===m),M=E.length,A=M>0?Math.round(E.reduce((I,q)=>I+q.score,0)/M):0,C=M>0?Math.max(...E.map(I=>I.score)):0,D=(I,q)=>{I.stopPropagation(),Z.play("click"),_(q)},G=()=>{y&&(u(y),_(null))};return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 md:p-6 transition-colors",children:[y&&o.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"flex flex-col items-center text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-400",children:o.jsx(Ur,{size:24})}),o.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Hapus Riwayat?"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Data hasil tes ini akan dihapus secara permanen dan tidak dapat dikembalikan."}),o.jsxs("div",{className:"flex gap-3 w-full",children:[o.jsx("button",{onClick:()=>_(null),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Batal"}),o.jsx("button",{onClick:G,className:"flex-1 py-3 bg-rose-600 text-white rounded-xl font-bold hover:bg-rose-700 transition",children:"Hapus"})]})]})})}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:o.jsx(ft,{size:20})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Riwayat Belajar"}),o.jsxs("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[o.jsx(Nk,{size:12})," ",s]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold text-xs hover:bg-slate-50 dark:hover:bg-slate-700 transition shadow-sm",children:[o.jsx(xk,{size:14})," Backup"]}),o.jsxs("button",{onClick:()=>{var I;return(I=T.current)==null?void 0:I.click()},className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-800 rounded-xl font-bold text-xs hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition shadow-sm",children:[o.jsx(bx,{size:14})," Restore"]}),o.jsx("input",{type:"file",ref:T,className:"hidden",accept:".json",onChange:I=>{var q;(q=I.target.files)!=null&&q[0]&&l(I.target.files[0]),T.current&&(T.current.value="")}})]})]}),o.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-4 scrollbar-hide",children:[o.jsx("button",{onClick:()=>f("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${m==="ALL"?"bg-slate-900 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Semua"}),$1.map(I=>o.jsx("button",{onClick:()=>f(I.id),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${m===I.id?"bg-indigo-600 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:I.name},I.id))]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[o.jsx(h9,{size:14})," Total Tes"]}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:M})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[o.jsx(yx,{size:14})," Avg Skor"]}),o.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:A})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[o.jsx(mk,{size:14})," Tertinggi"]}),o.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-500",children:C})]})]}),o.jsx("div",{className:"space-y-4",children:E.length===0?o.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700 text-slate-400",children:[o.jsx(Uu,{size:48,className:"mx-auto mb-4 opacity-20"}),o.jsx("p",{children:"Tidak ada riwayat untuk kategori ini."})]}):E.map(I=>{const q=lB(I.category),X=q.icon,J=I.questions?I.questions.length:0,j=I.answers?I.answers.length:0,N=I.answers?I.answers.filter(xe=>xe.isCorrect).length:0,R=j-N,P=I.answers?I.answers.reduce((xe,nt)=>xe+(nt.timeTakenSeconds||0),0):0,U=D1(P),F=rf(I),O=Ck(I),Ae=rp(I),Le=oB(I);let Y=I.category;I.category==="TPA"?Y="Seleksi Lanjutan I":I.category==="PSIKOTEST"&&rf(I)?Y="Tes Koran / Pauli":I.category==="PSIKOTEST"&&rp(I)?Y="Psikotes (IQ & Logika)":I.category==="KECERMATAN"?Y="Tes Kecermatan":Le&&(Y="Tes Buta Warna & Visual"),I.packageTitle&&(Y=I.packageTitle);let oe=I.score.toString(),_e="SKOR",Me={text:"-",color:"text-slate-500"};if(O){const xe=I.details;oe=xe.accuracy+"%",_e="AKURASI",Me=Tr(xe.accuracy,"PERCENT")}else if(F){const xe=I.details;oe=xe.accuracy+"%",_e="AKURASI",Me=Tr(xe.accuracy,"PERCENT")}else if(Ae){const xe=I.details.iqScore||I.score;oe=xe.toString(),_e="IQ SCORE",Me=Tr(xe,"IQ")}else if(Le){const xe=I.details;xe.type==="Ishihara Simulation"?(oe=xe.passed?"NORMAL":"DEFECT",_e="STATUS",Me={text:xe.diagnosis,color:xe.passed?"text-emerald-500":"text-rose-500"}):(oe=I.score.toString(),_e="SKOR",Me=Tr(I.score,"PERCENT"))}else{const xe=I.maxScore>0?I.score/I.maxScore*100:0;Me=Tr(xe,"PERCENT")}const ne=Me.color;let z=N,Q=R,fe=0,ie=0,ce={val:0,index:0},Te=[];if(O){const xe=I.details;z=xe.totalCorrect,Q=xe.totalWrong,fe=xe.averageSpeed,ie=xe.stability,Te=xe.sectionData.map(nt=>nt.correct)}else if(F){const xe=I.details;z=xe.totalCorrect,Q=xe.totalWrong,fe=xe.speedPerMinute,ie=xe.consistencyScore,Te=xe.intervalData}if(Te&&Te.length>0){const xe=Math.max(...Te),nt=Te.indexOf(xe);ce={val:xe,index:nt+1}}return o.jsxs("div",{onClick:()=>t(I),className:`p-5 rounded-2xl border transition group relative overflow-hidden cursor-pointer hover:shadow-lg ${I.isStudied?"bg-emerald-50 dark:bg-emerald-900/10 border-emerald-200 dark:border-emerald-800":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-indigo-500"}`,children:[o.jsxs("div",{className:"absolute top-0 right-0 z-10 flex",children:[I.isAborted&&o.jsx("span",{className:"bg-amber-500 text-white text-[10px] px-2 py-1 font-bold rounded-bl-lg",children:"TIDAK SELESAI"}),I.details&&I.details.passed!==void 0&&o.jsx("span",{className:`text-[10px] px-2 py-1 font-bold rounded-bl-lg text-white ${I.details.passed?"bg-emerald-500":"bg-rose-500"}`,children:I.details.passed?"LULUS":"TIDAK LULUS"})]}),o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${q.bg} ${q.color} border ${q.border}`,children:o.jsx(X,{size:24})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2 pr-12",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white truncate text-base pr-2",children:Y}),I.packageTitle&&I.packageTitle!==Y&&o.jsxs("p",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-medium truncate flex items-center gap-1 mb-1",children:[o.jsx(Tk,{size:10})," ",I.packageTitle]}),o.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-xs mt-1 flex-wrap",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(pk,{size:12})," ",new Date(I.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]}),I.skdStream&&o.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-600 dark:text-slate-300 uppercase",children:I.skdStream}),O&&I.details.mode&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"bg-emerald-100 dark:bg-emerald-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-emerald-700 dark:text-emerald-400 uppercase",children:Ik(I.details.mode)}),o.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[o.jsx(Cr,{size:10})," ",U]})]}),Le&&I.details.type&&o.jsx("span",{className:"bg-pink-100 dark:bg-pink-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-pink-700 dark:text-pink-400 uppercase",children:I.details.type.replace(" Simulation","").replace("Discrimination","")}),F&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"bg-purple-100 dark:bg-purple-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-purple-700 dark:text-purple-400 uppercase",children:"PAULI"}),o.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[o.jsx(Cr,{size:10})," ",U]})]}),rp(I)&&o.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-indigo-700 dark:text-indigo-400 uppercase",children:"IQ LOGIKA"})]})]}),o.jsxs("div",{className:"text-right shrink-0",children:[o.jsx("div",{className:`text-xl sm:text-2xl font-black ${ne}`,children:oe}),o.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:_e})]})]}),o.jsxs("div",{className:"mt-3",children:[O||F?o.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600 last:border-0 sm:last:border-0",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Total Dijawab"}),o.jsx("span",{className:"font-black text-indigo-600 dark:text-indigo-400",children:z+Q})]}),o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Benar/Salah"}),o.jsxs("span",{className:"font-bold",children:[o.jsx("span",{className:"text-emerald-500",children:z})," / ",o.jsx("span",{className:"text-rose-500",children:Q})]})]}),o.jsxs("div",{className:"flex flex-col text-center border-r-0 sm:border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Speed Avg"}),o.jsx("span",{className:"font-black text-slate-700 dark:text-slate-200",children:fe})]}),o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Stabil"}),o.jsx("span",{className:"font-black text-amber-500",children:ie})]}),o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Peak"}),o.jsxs("span",{className:"font-black text-emerald-500",title:`Highest: ${ce.val} at Interval ${ce.index}`,children:[ce.val,o.jsxs("span",{className:"text-[8px] text-slate-400 font-normal ml-0.5",children:["@",ce.index]})]})]}),o.jsxs("div",{className:"flex flex-col text-center",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Kesimpulan"}),o.jsx("span",{className:`font-black text-[10px] leading-tight ${Me.color}`,children:Me.text})]})]}):o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Dijawab"}),o.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:[j," ",o.jsxs("span",{className:"text-slate-400",children:["/ ",J]})]})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Benar / Salah"}),o.jsxs("span",{className:"font-bold text-emerald-600",children:[N," ",o.jsx("span",{className:"text-slate-400",children:"/"})," ",o.jsx("span",{className:"text-rose-500",children:R})]})]}),Le&&I.details.breakdown&&o.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Analisis"}),o.jsx("span",{className:"font-bold text-[10px] text-slate-700 dark:text-slate-200 uppercase",children:I.details.diagnosis})]}),!Le&&o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Waktu"}),o.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:D1(P)})]}),I.category==="SKD"&&I.details&&o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rincian"}),o.jsxs("div",{className:"flex gap-1 text-[8px] font-mono",children:[o.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-400 px-1 rounded",children:["TWK:",I.details.twk]}),o.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-400 px-1 rounded",children:["TIU:",I.details.tiu]}),o.jsxs("span",{className:"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-400 px-1 rounded",children:["TKP:",I.details.tkp]})]})]}),I.category==="UTBK"&&I.details&&o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rata-rata Subtes"}),o.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:I.details.average})]})]}),(F||O)&&Te.length>0&&o.jsx("div",{className:"mt-2 h-8 flex items-end gap-0.5 opacity-50 hover:opacity-100 transition-opacity",children:Te.map((xe,nt)=>{const Qe=Math.max(...Te,1),St=xe/Qe*100;return o.jsx("div",{className:`flex-1 rounded-t-sm ${nt+1===ce.index?"bg-emerald-500":"bg-slate-300 dark:bg-slate-600"}`,style:{height:`${St}%`}},nt)})})]})]})]}),o.jsxs("div",{className:"absolute bottom-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:xe=>D(xe,I.id),className:"p-2 bg-rose-50 dark:bg-rose-900/30 text-rose-600 rounded-full hover:bg-rose-100 dark:hover:bg-rose-900/50 transition z-20",title:"Hapus",children:o.jsx(Ur,{size:14})}),o.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 rounded-full",children:o.jsx(_r,{size:14})})]}),o.jsx("div",{className:"absolute bottom-3 left-3 z-20",children:o.jsx("button",{onClick:xe=>{xe.stopPropagation(),h(I.id)},className:`p-2 rounded-lg transition-colors ${I.isStudied?"text-emerald-500 bg-emerald-100 dark:bg-emerald-900/30":"text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:I.isStudied?"Sudah Direview":"Tandai Review",children:I.isStudied?o.jsx(w7,{size:20,strokeWidth:2.5}):o.jsx(k7,{size:20,strokeWidth:2})})})]},I.id)})})]})]})},dB=({item:n,onBack:e})=>{if(rf(n)||Ck(n)){const a=rf(n),l=n.details;let u=[],h=0,m=0,f=0,y=0,_=0,T="",E={text:"-",color:"text-slate-500"};if(a){const C=l;u=C.intervalData||[],h=C.totalCorrect,m=C.totalWrong,f=C.speedPerMinute,y=C.accuracy,_=C.consistencyScore,T="PAULI / KORAN",E=Tr(C.accuracy,"PERCENT")}else{const C=l;u=C.sectionData.map(D=>D.correct),h=C.totalCorrect,m=C.totalWrong,f=C.averageSpeed,y=C.accuracy,_=C.stability,T=Ik(C.mode),E=Tr(C.accuracy,"PERCENT")}let M=0,A=0;return u.length>0&&(M=Math.max(...u),A=u.indexOf(M)+1),o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[o.jsx(ft,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&o.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[o.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl text-indigo-600 dark:text-indigo-400",children:o.jsx(Xn,{size:32})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Analisis ",T]}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Kesimpulan: ",o.jsx("span",{className:`font-bold ${E.color}`,children:E.text})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-8",children:[o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Volume Total"}),o.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:h}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Error / Salah"}),o.jsx("div",{className:"text-3xl font-black text-rose-500",children:m}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban salah"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Kecepatan (Avg)"}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:f}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"per menit/bagian"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Akurasi"}),o.jsxs("div",{className:`text-3xl font-black ${Tr(y,"PERCENT").color}`,children:[y,"%"]}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"ketelitian kerja"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Stabilitas"}),o.jsx("div",{className:"text-3xl font-black text-amber-500",children:_}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Peak Performance"}),o.jsx("div",{className:"text-3xl font-black text-emerald-500",children:M}),o.jsxs("div",{className:"text-[10px] text-slate-500",children:["tertinggi pada menit ke-",A]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Grafik Ritme Kerja (Per Menit/Bagian)"}),o.jsx("div",{className:"h-64 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative overflow-x-auto",children:u.map((C,D)=>{const G=Math.max(...u,10),I=C/G*100,q=C===M;return o.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full min-w-[20px]",children:[o.jsx("div",{className:`w-full rounded-t-sm transition-all hover:opacity-80 ${q?"bg-emerald-500":"bg-indigo-600"}`,style:{height:`${I}%`}}),o.jsx("div",{className:"mt-2 text-[10px] font-bold text-slate-400",children:D+1}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-black text-white text-xs p-2 rounded z-10 whitespace-nowrap shadow-xl",children:["Menit ",D+1,": ",C]})]},D)})}),o.jsx("p",{className:"text-xs text-slate-400 mt-2 text-center",children:"Grafik yang menurun drastis menunjukkan indikasi kelelahan."})]})]})]})})}const t=a=>{const l=document.getElementById(`question-${a}`);l&&l.scrollIntoView({behavior:"smooth",block:"center"})},s=(a,l)=>{var u;if(!l)return"bg-slate-200 dark:bg-slate-700 text-slate-500 dark:text-slate-400";if(a.tkpPoints&&a.tkpPoints.length>0||(u=a.metadata)!=null&&u.subtest&&a.metadata.subtest.includes("TKP")){const h=l.scoreEarned;return h>=5?"bg-emerald-500 text-white":h===4?"bg-lime-500 text-white":h===3?"bg-yellow-500 text-white":h===2?"bg-orange-500 text-white":"bg-rose-500 text-white"}return l.isCorrect?"bg-emerald-500 text-white":"bg-rose-500 text-white"};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 md:p-6 transition-colors",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("button",{onClick:e,className:"mb-4 text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[o.jsx(ft,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(Us,{size:24,className:"text-indigo-600"}),"Review: ",n.packageTitle||n.category]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-100 dark:border-slate-600",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Skor Total"}),o.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:n.score})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-100 dark:border-slate-600",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Benar / Salah"}),o.jsxs("div",{className:"text-2xl font-black",children:[o.jsx("span",{className:"text-emerald-500",children:n.answers.filter(a=>a.isCorrect).length}),o.jsx("span",{className:"text-slate-400 mx-2",children:"/"}),o.jsx("span",{className:"text-rose-500",children:n.answers.filter(a=>!a.isCorrect).length})]})]})]}),n.category==="SKD"&&n.details&&o.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2",children:[o.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/30 p-3 rounded-xl border border-amber-100 dark:border-amber-800 text-center",children:[o.jsx("div",{className:"text-[10px] font-bold text-amber-600 dark:text-amber-400 uppercase",children:"TWK"}),o.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white",children:n.details.twk})]}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-3 rounded-xl border border-blue-100 dark:border-blue-800 text-center",children:[o.jsx("div",{className:"text-[10px] font-bold text-blue-600 dark:text-blue-400 uppercase",children:"TIU"}),o.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white",children:n.details.tiu})]}),o.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/30 p-3 rounded-xl border border-purple-100 dark:border-purple-800 text-center",children:[o.jsx("div",{className:"text-[10px] font-bold text-purple-600 dark:text-purple-400 uppercase",children:"TKP"}),o.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white",children:n.details.tkp})]})]}),n.category==="UTBK"&&n.details&&o.jsxs("div",{className:"mt-4",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Rincian Subtes"}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-center",children:[o.jsx("div",{className:"text-[9px] font-bold text-slate-500 uppercase",children:"PU"}),o.jsx("div",{className:"text-sm font-black text-slate-800 dark:text-white",children:n.details.pu})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-center",children:[o.jsx("div",{className:"text-[9px] font-bold text-slate-500 uppercase",children:"PPU"}),o.jsx("div",{className:"text-sm font-black text-slate-800 dark:text-white",children:n.details.ppu})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-center",children:[o.jsx("div",{className:"text-[9px] font-bold text-slate-500 uppercase",children:"PBM"}),o.jsx("div",{className:"text-sm font-black text-slate-800 dark:text-white",children:n.details.pbm})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-center",children:[o.jsx("div",{className:"text-[9px] font-bold text-slate-500 uppercase",children:"PK"}),o.jsx("div",{className:"text-sm font-black text-slate-800 dark:text-white",children:n.details.pk})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-center",children:[o.jsx("div",{className:"text-[9px] font-bold text-slate-500 uppercase",children:"LBI"}),o.jsx("div",{className:"text-sm font-black text-slate-800 dark:text-white",children:n.details.lbi})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-center",children:[o.jsx("div",{className:"text-[9px] font-bold text-slate-500 uppercase",children:"LBE"}),o.jsx("div",{className:"text-sm font-black text-slate-800 dark:text-white",children:n.details.lbe})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-center",children:[o.jsx("div",{className:"text-[9px] font-bold text-slate-500 uppercase",children:"PM"}),o.jsx("div",{className:"text-sm font-black text-slate-800 dark:text-white",children:n.details.pm})]}),o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg border border-indigo-100 dark:border-indigo-800 text-center",children:[o.jsx("div",{className:"text-[9px] font-bold text-indigo-600 uppercase",children:"AVG"}),o.jsx("div",{className:"text-sm font-black text-indigo-700 dark:text-indigo-400",children:n.details.average})]})]})]})]}),o.jsx("div",{className:"space-y-4",children:n.questions.map((a,l)=>{var m,f,y,_;const u=n.answers.find(T=>T.questionId===a.id),h=cB(a,u);return o.jsxs("div",{id:`question-${l}`,className:`p-4 border rounded-xl transition-all ${h}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:["Soal ",l+1]}),u!=null&&u.isCorrect?o.jsx(es,{size:16,className:"text-emerald-600 dark:text-emerald-400"}):o.jsx(Fr,{size:16,className:"text-rose-600 dark:text-rose-400"})]}),o.jsx("div",{className:"mb-3 text-slate-800 dark:text-slate-200",children:o.jsx(uh,{text:a.content})}),o.jsxs("div",{className:"text-sm space-y-1 mb-3",children:[o.jsxs("div",{className:`flex gap-2 ${u!=null&&u.isCorrect?"text-emerald-700 dark:text-emerald-300":"text-rose-700 dark:text-rose-300"}`,children:[o.jsx("span",{className:"font-bold w-24 shrink-0",children:"Jawabanmu:"}),o.jsx("span",{className:"font-medium",children:a.options&&a.type==="multiple_choice"?o.jsx(uh,{text:(u==null?void 0:u.selectedAnswer)||"-"}):(u==null?void 0:u.selectedAnswer)||"-"})]}),!(u!=null&&u.isCorrect)&&o.jsxs("div",{className:"flex gap-2 text-slate-600 dark:text-slate-400",children:[o.jsx("span",{className:"font-bold w-24 shrink-0",children:"Kunci:"}),o.jsx("span",{className:"font-medium",children:a.options&&a.type==="multiple_choice"?o.jsx(uh,{text:a.correctAnswer}):a.correctAnswer})]}),(a.tkpPoints||(u==null?void 0:u.scoreEarned)!==void 0&&(((f=(m=a.metadata)==null?void 0:m.subtest)==null?void 0:f.includes("TKP"))||((_=(y=a.metadata)==null?void 0:y.topic)==null?void 0:_.includes("TKP"))))&&o.jsxs("div",{className:"flex gap-2 text-slate-600 dark:text-slate-400 mt-1",children:[o.jsx("span",{className:"font-bold w-24 shrink-0",children:"Poin:"}),o.jsx("span",{className:"font-bold bg-white/50 px-2 rounded",children:u==null?void 0:u.scoreEarned})]})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-black/10 dark:border-white/10",children:o.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-300 bg-white/60 dark:bg-black/20 p-3 rounded-lg border border-black/5 dark:border-white/5",children:[o.jsxs("div",{className:"font-bold mb-1 flex items-center gap-1 opacity-75",children:[o.jsx(Xn,{size:12})," Penjelasan:"]}),o.jsx(uh,{text:a.explanation})]})})]},l)})})]}),o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"sticky top-6 bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white mb-4 text-sm uppercase tracking-wider flex items-center gap-2",children:[o.jsx(Wi,{size:16})," Navigasi Soal"]}),o.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-1 custom-scrollbar space-y-4",children:(()=>{const a=[];let l="",u=null;return n.questions.forEach((h,m)=>{var y;let f=((y=h.metadata)==null?void 0:y.subtest)||"Lainnya";f.startsWith("SKD - ")&&(f=f.replace("SKD - ","")),f.startsWith("UTBK - ")&&(f=f.replace("UTBK - ","")),f!==l&&(l=f,u={subtest:f,questions:[]},a.push(u)),u&&u.questions.push({q:h,index:m})}),a.map((h,m)=>o.jsxs("div",{children:[o.jsx("h4",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2 truncate border-b border-slate-100 dark:border-slate-700 pb-1",title:h.subtest,children:h.subtest}),o.jsx("div",{className:"grid grid-cols-5 gap-2",children:h.questions.map(({q:f,index:y})=>{const _=n.answers.find(T=>T.questionId===f.id);return o.jsx("button",{onClick:()=>t(y),className:`aspect-square rounded-lg font-bold text-xs flex items-center justify-center transition hover:opacity-80 shadow-sm ${s(f,_)}`,children:y+1},y)})})]},m))})()}),o.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-100 dark:border-slate-700 space-y-3",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Keterangan Warna"}),o.jsxs("div",{className:"grid grid-cols-1 gap-2 text-[10px] font-medium text-slate-600 dark:text-slate-400",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded bg-emerald-500"})," Benar / 5 Poin"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded bg-lime-500"})," 4 Poin (TKP)"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded bg-yellow-500"})," 3 Poin (TKP)"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded bg-orange-500"})," 2 Poin (TKP)"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded bg-rose-500"})," Salah / 1 Poin"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded bg-slate-200 dark:bg-slate-700"})," Kosong"]})]})]})]})})]})]})})},wh=({text:n})=>{if(!n)return null;let e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return e=e.replace(/([\u00BC-\u00BE\u2150-\u215E\u2190-\u21FF\u2200-\u22FF\u2300-\u23FF\u2460-\u24FF\u2500-\u257F\u25A0-\u25FF\u2600-\u26FF\u2700-\u27BF\u2B00-\u2BFF\u{1F000}-\u{1F9FF}])/gu,'<span style="font-size: 2.5em; line-height: 1; vertical-align: middle; display: inline-block; padding: 0 4px;">$1</span>'),o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"leading-relaxed"})},hB=({timeLeft:n,onFinish:e})=>(B.useEffect(()=>{n<=0&&e()},[n,e]),o.jsxs("div",{className:"fixed inset-0 z-[60] bg-indigo-600 flex flex-col items-center justify-center text-white px-6",children:[o.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-8 animate-pulse",children:o.jsx(ng,{size:48,className:"text-white"})}),o.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Istirahat Antar Subtes"}),o.jsxs("div",{className:"text-6xl font-mono font-bold mb-8",children:[n,"s"]}),o.jsx("p",{className:"text-xl text-center max-w-md italic opacity-90",children:'"Tarik nafas, persiapkan fokus untuk subtes berikutnya."'}),o.jsx("button",{onClick:e,className:"mt-8 px-6 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-bold",children:"Lewati Istirahat"})]})),fB=({isOpen:n,onClose:e,question:t,category:s,showToast:a})=>{if(!n)return null;const l=()=>{const u=localStorage.getItem("fajmuls_marked_questions"),h=u?JSON.parse(u):[];if(h.some(f=>f.id===t.id)){a("Soal ini sudah ada di daftar tandai.","info"),e();return}const m={id:t.id,question:t,category:s,dateMarked:Date.now()};localStorage.setItem("fajmuls_marked_questions",JSON.stringify([m,...h])),a("Soal berhasil ditandai!","success"),e()};return o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx($l,{size:20,className:"text-rose-500"})," Tandai Soal"]}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:o.jsx(Fr,{size:24})})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6 max-h-60 overflow-y-auto",children:[o.jsxs("p",{className:"text-xs font-mono text-slate-400 mb-2",children:["ID: ",t.id]}),o.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:o.jsx(wh,{text:t.content})})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:l,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2",children:[o.jsx(T8,{size:18})," Simpan ke Daftar Tandai"]}),o.jsx("button",{onClick:e,className:"px-6 py-3 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700",children:"Batal"})]})]})})},mB=({isOpen:n,onCancel:e,onConfirm:t,stats:s})=>{if(!n)return null;const a=s.unanswered>0||s.doubtful>0;return o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${a?"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400"}`,children:a?o.jsx(qf,{size:32}):o.jsx(es,{size:32})}),o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:a?"Yakin Selesai?":"Selesaikan Ujian?"}),a?o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-6 text-left space-y-2 border border-slate-200 dark:border-slate-600",children:[o.jsx("p",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Periksa kembali jawaban Anda:"}),s.unanswered>0&&o.jsxs("div",{className:"flex items-center justify-between text-rose-600 dark:text-rose-400 text-sm font-medium",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Fr,{size:14})," Belum Diisi"]}),o.jsxs("span",{className:"font-bold",children:[s.unanswered," Soal"]})]}),s.doubtful>0&&o.jsxs("div",{className:"flex items-center justify-between text-amber-600 dark:text-amber-400 text-sm font-medium",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx($l,{size:14})," Ragu-ragu"]}),o.jsxs("span",{className:"font-bold",children:[s.doubtful," Soal"]})]})]}):o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Semua ",s.total," soal telah dijawab. Waktu akan dihentikan dan skor akan dihitung."]}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx("button",{onClick:t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition",children:"Ya, Selesai"}),o.jsx("button",{onClick:e,className:"w-full py-3 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Kembali Mengerjakan"})]})]})})},pB=()=>{const n=new WeakSet;return(e,t)=>{if(typeof t=="object"&&t!==null){if(n.has(t))return;n.add(t)}return t}},gB=({mode:n,questions:e,drillContent:t,onComplete:s,isSkdSimulation:a,isUtbkSimulation:l,category:u,showToast:h,initialState:m,userId:f,skdStream:y,tpaStream:_,packageTitle:T,onSaveAndExit:E,initialFontSize:M="md"})=>{var ws,Vs,ta,Ai;const[A,C]=B.useState(M),D=["sm","md","lg","xl"],G=Ne=>{const Se=D.indexOf(A);Ne==="up"&&Se<D.length-1?C(D[Se+1]):Ne==="down"&&Se>0&&C(D[Se-1])},[I,q]=B.useState((m==null?void 0:m.utbkSubtestIndex)||0),[X,J]=B.useState(!1),[j,N]=B.useState(0),[R,P]=B.useState((m==null?void 0:m.currentIndex)||0),[U,F]=B.useState((m==null?void 0:m.answerMap)||{}),[O,Ae]=B.useState(!1),[Le,Y]=B.useState(!1),[oe,_e]=B.useState(!1),[Me,ne]=B.useState(!1),[z,Q]=B.useState(!1),[fe,ie]=B.useState({unanswered:0,doubtful:0,total:0}),ce=B.useRef(Date.now()),Te=()=>m!=null&&m.timeLeft?m.timeLeft:l&&yi[0]?yi[0].duration*60:a?6e3:n===Fe.SIMULATION?u==="PSIKOTEST"?2400:u==="TPA"?6e3:3600:0,[xe,nt]=B.useState(Te),[Qe,St]=B.useState(()=>{if(m!=null&&m.timeLeft)return Date.now()+m.timeLeft*1e3;const Ne=Te();return Date.now()+Ne*1e3}),At=B.useRef(!1);B.useEffect(()=>{if(!f||At.current)return;let Ne=y;typeof y=="object"&&y!==null&&(Ne=null);let Se=_;typeof _=="object"&&_!==null&&(Se=null);const we={uid:f,mode:n,category:u,questions:e,answerMap:U,timeLeft:xe,endTime:Qe,currentIndex:R,utbkSubtestIndex:I,drillContent:t,skdStream:Ne,tpaStream:Se,packageTitle:T,timestamp:Date.now()};try{localStorage.setItem("fajmuls_active_session",JSON.stringify(we,pB()))}catch(ze){console.warn("Failed to save session state",ze)}},[xe,U,R,I,f,y,_,Qe]);const at=()=>{localStorage.removeItem("fajmuls_active_session")},Ge=B.useMemo(()=>{if(l){const Ne=yi[I].name;return e.filter(Se=>{var we,ze;return(ze=(we=Se.metadata)==null?void 0:we.subtest)==null?void 0:ze.includes(Ne)})}return e},[e,l,I]);B.useEffect(()=>{let Ne=null;if(X&&j>0)Ne=setInterval(()=>N(Se=>Se-1),1e3);else if(X&&j===0){if(J(!1),l){const Se=yi[I].duration;St(Date.now()+Se*60*1e3),nt(Se*60)}}else xe>0&&!O&&n===Fe.SIMULATION?Ne=setInterval(()=>{const Se=Date.now(),we=Math.max(0,Math.ceil((Qe-Se)/1e3));nt(ze=>(we<=11&&we>1&&we!==ze&&Z.play("tick"),we)),we<=0&&(clearInterval(Ne),l?ue():We())},1e3):xe===0&&Fe.SIMULATION;return()=>clearInterval(Ne)},[Qe,O,X,j,n,l,I]);const ue=()=>{if(l)if(I<yi.length-1){Z.play("success");const Ne=I+1;q(Ne),P(0),N(30),J(!0)}else We();else We()},Oe=()=>{Z.play("click");const Ne=l&&I<yi.length-1?Ge:e;let Se=0,we=0;Ne.forEach(ze=>{const st=U[ze.id];!st||!st.selectedAnswer?Se++:st.isDoubtful&&we++}),ie({unanswered:Se,doubtful:we,total:Ne.length}),ne(!0)},et=()=>{ne(!1),l&&I<yi.length-1?ue():We()},We=async()=>{if(At.current=!0,f&&!f.startsWith("guest-"))try{await GV(f)}catch{}at(),Z.play("finish"),s(Object.values(U))},Rn=()=>{At.current=!0,s(Object.values(U),void 0,!0)},Mt=()=>{Ae(!0)},xt=()=>{St(Date.now()+xe*1e3),Ae(!1)},Gt=async()=>{if(!f||f.startsWith("guest-")){h("Fitur simpan ke cloud hanya untuk pengguna login.","error");return}_e(!0);let Ne=y;typeof y=="object"&&y!==null&&(Ne=null);let Se=_;typeof _=="object"&&_!==null&&(Se=null);const we={uid:f,mode:n,category:u,questions:e,answerMap:U,timeLeft:xe,endTime:Qe,currentIndex:R,utbkSubtestIndex:I,drillContent:t,skdStream:Ne,tpaStream:Se,packageTitle:T,timestamp:Date.now()};try{await VV(f,we),At.current=!0,at(),h("Progres tersimpan di cloud! Anda bisa melanjutkannya nanti.","success"),E?E():s(Object.values(U),void 0,!0)}catch(ze){console.error(ze),h("Gagal menyimpan ke cloud. Cek koneksi internet.","error")}finally{_e(!1)}},oi=async Ne=>{var Ut,pn,Xt,ls,Fn;const Se=Ge[R];if(!Se)return;Z.play("click");let we=0,ze=!1;if(u==="SKD")if(Se.tkpPoints&&Se.tkpPoints.length>0){const Ot=Se.tkpPoints.find(Je=>Je.option===Ne);we=Ot?Ot.points:0,ze=we===5}else ze=Ne===Se.correctAnswer,we=ze?5:0;else if(u==="UTBK"){ze=Ne===Se.correctAnswer;const Ot=((Ut=Se.metadata)==null?void 0:Ut.difficulty)||"Medium";we=ze?Ot==="HOTS"||Ot==="Hard"?3:Ot==="Medium"?2:1:0}else if(u==="TPA"){const Ot=((Xt=(pn=Se.metadata)==null?void 0:pn.subtest)==null?void 0:Xt.includes("TBI"))||((Fn=(ls=Se.metadata)==null?void 0:ls.subtest)==null?void 0:Fn.includes("Inggris"));if(_==="PSIKOTEST_KEDINASAN")if(Se.tkpPoints&&Se.tkpPoints.length>0){const Je=Se.tkpPoints.find(Ns=>Ns.option===Ne);we=Je?Je.points:0,ze=we===5}else ze=Ne===Se.correctAnswer,we=ze?5:0;else ze=Ne===Se.correctAnswer,Ot?we=ze?5:0:we=ze?4:-1}else ze=Ne===Se.correctAnswer,we=ze?10:0;let st="";if(Se.type!=="multiple_choice"&&u==="GENERAL")try{const Ot=await _j(Se.content,Se.correctAnswer,Ne);we=Ot.score,ze=Ot.isCorrect,st=Ot.feedback}catch{console.error("Grading failed")}const Lt=U[Se.id],Mn=(Date.now()-ce.current)/1e3,Gn={questionId:Se.id,selectedAnswer:Ne,isCorrect:ze,scoreEarned:we,timeTakenSeconds:((Lt==null?void 0:Lt.timeTakenSeconds)||0)+Mn,isOverthinking:!1,isGuessing:Mn<5,aiEvaluation:st,isDoubtful:(Lt==null?void 0:Lt.isDoubtful)||!1};F(Ot=>({...Ot,[Se.id]:Gn})),ce.current=Date.now()},Bn=()=>{const Ne=Ge[R];F(Se=>{const we=Se[Ne.id];return we?{...Se,[Ne.id]:{...we,isDoubtful:!we.isDoubtful}}:{...Se,[Ne.id]:{questionId:Ne.id,selectedAnswer:"",isCorrect:!1,scoreEarned:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,isDoubtful:!0}}})},qt=Ne=>{const Se=Math.floor(Ne/3600),we=Math.floor(Ne%3600/60),ze=Math.floor(Ne%60);return`${Se>0?Se+":":""}${we.toString().padStart(2,"0")}:${ze.toString().padStart(2,"0")}`},Pt=(Ne,Se)=>Ne.length===0?null:o.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[o.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 border-b border-slate-100 dark:border-slate-700 pb-1",children:Se}),o.jsx("div",{className:"grid grid-cols-5 gap-2",children:Ne.map((we,ze)=>{const st=Ge.findIndex(Gn=>Gn.id===we.id),Lt=U[we.id];let Mn="bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300";return Lt!=null&&Lt.selectedAnswer&&(Mn="bg-emerald-500 border-emerald-500 text-white"),Lt!=null&&Lt.isDoubtful&&(Mn="bg-amber-400 border-amber-400 text-white"),st===R&&(Mn+=" ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-slate-800"),o.jsx("button",{onClick:()=>{P(st),Y(!1)},className:`aspect-square rounded-lg border flex items-center justify-center font-bold text-sm transition-all ${Mn}`,children:st+1},we.id)})})]});if(X)return o.jsx(hB,{timeLeft:j,onFinish:()=>{if(J(!1),l){const Ne=yi[I].duration;St(Date.now()+Ne*60*1e3),nt(Ne*60)}}});if(Ge.length===0)return o.jsxs("div",{className:"p-10 text-center",children:[o.jsx(Pn,{className:"animate-spin mx-auto"})," Menyiapkan soal subtes..."]});const Tn=Ge[R],Ft=U[Tn.id];return o.jsxs("div",{className:"min-h-screen bg-transparent flex flex-col md:flex-row h-screen overflow-hidden transition-colors relative",children:[o.jsx(mB,{isOpen:Me,onCancel:()=>ne(!1),onConfirm:et,stats:fe}),o.jsx(fB,{isOpen:z,onClose:()=>Q(!1),question:Tn,category:u,showToast:h}),O&&o.jsx("div",{className:"absolute inset-0 z-50 bg-white/80 dark:bg-slate-900/90 backdrop-blur-md flex flex-col items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl text-center border border-slate-200 dark:border-slate-700 max-w-sm w-full",children:[o.jsx(Su,{size:48,className:"mx-auto mb-4 text-indigo-600"}),o.jsx("h2",{className:"text-2xl font-bold mb-4 dark:text-white",children:"Ujian Dijeda"}),o.jsxs("div",{className:"flex flex-col gap-3 justify-center",children:[o.jsxs("button",{onClick:xt,className:"w-full px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 flex items-center justify-center gap-2",children:[o.jsx(Oo,{size:20})," Lanjutkan"]}),!(f!=null&&f.startsWith("guest-"))&&o.jsxs("button",{onClick:Gt,disabled:oe,className:"w-full px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 flex items-center justify-center gap-2 disabled:opacity-50",children:[oe?o.jsx(Pn,{className:"animate-spin"}):o.jsx(N1,{size:20}),"Simpan & Lanjut Nanti"]}),o.jsx("button",{onClick:Rn,className:"w-full px-6 py-3 border-2 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700",children:"Keluar (Simpan Lokal)"})]})]})}),o.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative order-1",children:[o.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20",children:[o.jsxs("div",{className:"font-bold text-slate-700 dark:text-white text-sm",children:["No. ",R+1]}),o.jsxs("div",{className:"flex items-center gap-2",children:[n===Fe.SIMULATION&&o.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs font-mono font-bold dark:text-white",children:qt(xe)}),o.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[o.jsx("button",{onClick:()=>G("down"),disabled:A==="sm",className:"p-1",children:o.jsx(C1,{size:14,className:"text-slate-600 dark:text-slate-300"})}),o.jsx("span",{className:"text-xs font-bold w-4 text-center text-slate-700 dark:text-slate-200",children:"A"}),o.jsx("button",{onClick:()=>G("up"),disabled:A==="xl",className:"p-1",children:o.jsx(eg,{size:14,className:"text-slate-600 dark:text-slate-300"})})]}),o.jsx("button",{onClick:()=>Y(!Le),className:"p-2 bg-indigo-50 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 rounded",children:o.jsx(Wi,{size:20})})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:o.jsxs("div",{className:"max-w-3xl mx-auto pb-24",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 md:p-8 mb-6 relative",children:[n===Fe.DRILL&&t&&o.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-100 dark:border-indigo-800 text-sm text-slate-700 dark:text-slate-300",children:[o.jsxs("h4",{className:"font-bold text-indigo-700 dark:text-indigo-300 mb-2 flex items-center gap-2",children:[o.jsx(Os,{size:16})," ",t.topic]}),o.jsx("p",{children:t.summary})]}),o.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:l?yi[I].name:((ws=Tn.metadata)==null?void 0:ws.subtest)||"General"}),(((Vs=Tn.metadata)==null?void 0:Vs.difficulty)==="HOTS"||((ta=Tn.metadata)==null?void 0:ta.difficulty)==="Hard")&&o.jsxs("span",{className:"flex items-center gap-1 text-white font-bold text-xs bg-rose-600 px-2 py-1 rounded-full shadow-sm animate-pulse border border-rose-500",children:[o.jsx(Os,{size:12,fill:"currentColor"})," HOTS"]}),o.jsx("button",{onClick:()=>Q(!0),className:"p-1.5 bg-slate-100 dark:bg-slate-700 text-slate-400 hover:text-rose-500 rounded-lg transition-colors",title:"Flag Question",children:o.jsx($l,{size:16})})]}),o.jsxs("div",{className:"hidden md:flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg border border-slate-200 dark:border-slate-600",children:[o.jsx("button",{onClick:()=>G("down"),disabled:A==="sm",className:"p-1 hover:bg-white dark:hover:bg-slate-600 rounded disabled:opacity-30 transition-colors",title:"Perkecil Font",children:o.jsx(C1,{size:14,className:"text-slate-600 dark:text-slate-300"})}),o.jsx("span",{className:"text-xs font-bold w-8 text-center text-slate-700 dark:text-slate-200 select-none",children:A==="sm"?"A":A==="md"?"A+":A==="lg"?"A++":"Max"}),o.jsx("button",{onClick:()=>G("up"),disabled:A==="xl",className:"p-1 hover:bg-white dark:hover:bg-slate-600 rounded disabled:opacity-30 transition-colors",title:"Perbesar Font",children:o.jsx(eg,{size:14,className:"text-slate-600 dark:text-slate-300"})})]})]}),o.jsx("div",{className:`prose prose-lg dark:prose-invert max-w-none mb-8 text-slate-800 dark:text-slate-100 fs-${A}`,children:o.jsx(wh,{text:Tn.content})}),Tn.type==="multiple_choice"?o.jsx("div",{className:"space-y-3",children:(Ai=Tn.options)==null?void 0:Ai.map((Ne,Se)=>{var Mn;const we=String.fromCharCode(65+Se),ze=(Ft==null?void 0:Ft.selectedAnswer)===Ne;let st="border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-750",Lt="bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 group-hover:bg-slate-200 dark:group-hover:bg-slate-600";return ze&&(st="border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 dark:border-indigo-500",Lt="bg-indigo-600 text-white"),n!==Fe.SIMULATION&&Ft&&((Tn.tkpPoints?((Mn=Tn.tkpPoints.find(Ut=>Ut.option===Ne))==null?void 0:Mn.points)===5:Ne===Tn.correctAnswer)?(st="border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20",Lt="bg-emerald-500 text-white"):ze&&(st="border-rose-500 bg-rose-50 dark:bg-rose-900/20",Lt="bg-rose-500 text-white")),o.jsxs("button",{onClick:()=>oi(Ne),className:`w-full flex items-start p-4 rounded-xl border-2 transition-all group text-left ${st}`,children:[o.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm mr-4 transition-colors ${Lt}`,children:we}),o.jsx("div",{className:`flex-1 pt-1 text-slate-700 dark:text-slate-200 fs-${A}`,children:o.jsx(wh,{text:Ne})})]},Se)})}):o.jsxs("div",{children:[" ",o.jsx("textarea",{className:`w-full p-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-indigo-500 dark:bg-slate-900 dark:text-white fs-${A}`,placeholder:"Ketik jawaban Anda...",rows:4,value:(Ft==null?void 0:Ft.selectedAnswer)||"",onChange:Ne=>oi(Ne.target.value)})," "]})]}),n!==Fe.SIMULATION&&Ft&&o.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800 rounded-2xl p-6 animate-fade-in-up",children:[o.jsxs("h4",{className:"font-bold text-emerald-800 dark:text-emerald-300 mb-3 flex items-center gap-2",children:[o.jsx(bk,{size:20})," Pembahasan"]}),o.jsx("div",{className:`text-slate-700 dark:text-slate-300 leading-relaxed fs-${A}`,children:o.jsx(wh,{text:Tn.explanation})})]})]})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 z-10",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[o.jsxs("button",{onClick:()=>{P(Ne=>Math.max(0,Ne-1))},disabled:R===0,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",children:[o.jsx(ft,{size:20})," ",o.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[m&&o.jsxs("div",{className:"hidden sm:flex items-center gap-1 text-xs text-emerald-600 dark:text-emerald-400 font-bold bg-emerald-50 dark:bg-emerald-900/30 px-2 py-1 rounded",children:[o.jsx(xx,{size:12})," Disimpan Otomatis"]}),o.jsxs("button",{onClick:Bn,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-bold border transition ${Ft!=null&&Ft.isDoubtful?"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-400 border-amber-300 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 border-slate-200 dark:border-slate-600"}`,children:[o.jsx("input",{type:"checkbox",checked:(Ft==null?void 0:Ft.isDoubtful)||!1,readOnly:!0,className:"w-4 h-4 accent-amber-500 cursor-pointer"}),o.jsx("span",{children:"Ragu-ragu"})]})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),R<Ge.length-1?P(Ne=>Ne+1):Oe()},className:"flex items-center gap-2 px-6 py-2 rounded-lg font-bold bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg",children:[o.jsx("span",{className:"hidden sm:inline",children:R===Ge.length-1?l&&I<yi.length-1?"Lanjut Subtes":"Selesai":"Berikutnya"}),o.jsx(_r,{size:20})]})]})})]}),o.jsxs("div",{className:`fixed inset-y-0 right-0 w-80 bg-white dark:bg-slate-800 border-l border-slate-200 dark:border-slate-700 transform transition-transform duration-300 z-40 flex flex-col order-2 ${Le?"translate-x-0":"translate-x-full"} md:translate-x-0 md:relative md:w-80`,children:[o.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex flex-col gap-3 bg-slate-50 dark:bg-slate-800",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300",children:"Navigasi Soal"}),o.jsx("button",{onClick:()=>Y(!1),className:"md:hidden text-slate-500",children:o.jsx(Fr,{size:24})})]}),!(f!=null&&f.startsWith("guest-"))&&o.jsxs("button",{onClick:Gt,disabled:oe,className:"w-full flex items-center justify-center gap-2 py-2 bg-emerald-600 text-white rounded-lg font-bold text-xs hover:bg-emerald-700 disabled:opacity-50 transition",children:[oe?o.jsx(Pn,{size:14,className:"animate-spin"}):o.jsx(N1,{size:14}),"Kerjakan Lagi Nanti (Cloud)"]}),o.jsxs("button",{onClick:Rn,className:"w-full flex items-center justify-center gap-2 py-2 border border-rose-200 dark:border-rose-900 text-rose-600 dark:text-rose-400 rounded-lg font-bold text-xs hover:bg-rose-50 dark:hover:bg-rose-900/20 transition",children:[o.jsx(ft,{size:14})," Keluar (Simpan Lokal)"]})]}),n===Fe.SIMULATION&&xe>0&&o.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 hidden md:block",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Sisa Waktu"}),o.jsxs("button",{onClick:Mt,className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded font-bold hover:bg-amber-200 flex items-center gap-1",children:[o.jsx(Su,{size:12})," Jeda"]})]}),o.jsx("div",{className:"text-3xl font-mono font-bold text-slate-800 dark:text-white text-center",children:qt(xe)})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:a?o.jsxs(o.Fragment,{children:[Pt(Ge.filter(Ne=>{var Se,we;return(we=(Se=Ne.metadata)==null?void 0:Se.subtest)==null?void 0:we.includes("TWK")}),"Tes Wawasan Kebangsaan (TWK)"),Pt(Ge.filter(Ne=>{var Se,we;return(we=(Se=Ne.metadata)==null?void 0:Se.subtest)==null?void 0:we.includes("TIU")}),"Tes Intelegensia Umum (TIU)"),Pt(Ge.filter(Ne=>{var Se,we;return(we=(Se=Ne.metadata)==null?void 0:Se.subtest)==null?void 0:we.includes("TKP")}),"Tes Karakteristik Pribadi (TKP)")]}):u==="TPA"&&n===Fe.SIMULATION?_==="PSIKOTEST_KEDINASAN"?o.jsxs(o.Fragment,{children:[Pt(Ge.filter(Ne=>{var Se,we;return(we=(Se=Ne.metadata)==null?void 0:Se.subtest)==null?void 0:we.includes("TIU")}),"TIU - Verbal & Numerik"),Pt(Ge.filter(Ne=>{var Se,we;return(we=(Se=Ne.metadata)==null?void 0:Se.subtest)==null?void 0:we.includes("Gambar")}),"Tes Logika Gambar"),Pt(Ge.filter(Ne=>{var Se,we;return(we=(Se=Ne.metadata)==null?void 0:Se.subtest)==null?void 0:we.includes("Kepribadian")}),"Tes Kepribadian")]}):o.jsxs(o.Fragment,{children:[Pt(Ge.filter(Ne=>{var Se,we;return(we=(Se=Ne.metadata)==null?void 0:Se.subtest)==null?void 0:we.includes("Verbal")}),"TPA - Verbal"),Pt(Ge.filter(Ne=>{var Se,we;return(we=(Se=Ne.metadata)==null?void 0:Se.subtest)==null?void 0:we.includes("Kuantitatif")}),"TPA - Kuantitatif"),Pt(Ge.filter(Ne=>{var Se,we,ze,st;return((we=(Se=Ne.metadata)==null?void 0:Se.subtest)==null?void 0:we.includes("Penalaran"))||((st=(ze=Ne.metadata)==null?void 0:ze.subtest)==null?void 0:st.includes("Logika"))}),"TPA - Penalaran"),Pt(Ge.filter(Ne=>{var Se,we,ze,st;return((we=(Se=Ne.metadata)==null?void 0:Se.subtest)==null?void 0:we.includes("TBI"))||((st=(ze=Ne.metadata)==null?void 0:ze.subtest)==null?void 0:st.includes("Inggris"))}),"TBI - Bahasa Inggris")]}):Pt(Ge,l?yi[I].name:u)}),o.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 md:hidden",children:o.jsx("button",{onClick:Oe,className:"w-full py-3 bg-rose-600 text-white rounded-xl font-bold",children:"Hentikan Ujian"})})]}),Le&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>Y(!1)})]})},dh=10,op=60,xB=500,j1=50,yB=(n,e)=>Array.from({length:n},()=>Array.from({length:e},()=>Math.floor(Math.random()*10))),bB=(n,e,t,s,a)=>{let l=0;return n>=400?l+=40:n>=300?l+=30:n>=200?l+=20:l+=10,t>=99?l+=20:t>=97?l+=15:t>=95?l+=10:l+=5,s<3?l+=20:s<6?l+=15:s<9?l+=10:l+=5,a==="NAIK"?l+=20:a==="STABIL"?l+=15:l+=5,l>=90?"Sangat Disarankan (Konsisten & Tinggi)":l>=75?"Disarankan (Baik)":l>=60?"Cukup (Perlu Latihan)":a==="TURUN"&&s>8?"Indikasi Kelelahan / Emosi Tidak Stabil":"Kurang Disarankan"},vB=n=>{if(n.length<2)return"STABIL";const e=Math.floor(n.length/2),t=n.slice(0,e),s=n.slice(e),a=t.reduce((h,m)=>h+m,0)/(t.length||1),u=(s.reduce((h,m)=>h+m,0)/(s.length||1)-a)/a*100;return u>5?"NAIK":u<-10?"TURUN":"STABIL"},_B=({onBack:n,onComplete:e})=>{const[t,s]=B.useState("SETUP"),[a,l]=B.useState([]),[u,h]=B.useState(0),[m,f]=B.useState(0),[y,_]=B.useState(0),[T,E]=B.useState(0),[M,A]=B.useState([]),[C,D]=B.useState(0),[G,I]=B.useState(!1),[q,X]=B.useState(dh*60),[J,j]=B.useState(op),N=()=>{const ne=yB(xB,j1);l(ne),h(0),f(0),_(0),E(0),A([]),D(0),X(dh*60),j(op),s("PLAYING"),Z.play("click")},R=B.useCallback(ne=>{if(t!=="PLAYING")return;const z=a[u][m],Q=a[u][m+1];if(Q===void 0){h(Te=>Te+1),f(0);return}const ie=(z+Q)%10;ne===ie?(_(Te=>Te+1),D(Te=>Te+1)):(E(Te=>Te+1),Z.play("error")),m<j1-2?f(Te=>Te+1):(h(Te=>Te+1),f(0))},[a,u,m,t]);B.useEffect(()=>{const ne=z=>{t==="PLAYING"&&z.key>="0"&&z.key<="9"&&R(parseInt(z.key))};return window.addEventListener("keydown",ne),()=>window.removeEventListener("keydown",ne)},[t,R]),B.useEffect(()=>{if(t!=="PLAYING")return;const ne=setInterval(()=>{X(z=>z<=1?(F(),0):z-1),j(z=>(z<=6&&z>1&&Z.play("tick"),z<=1?(Z.play("success"),U(),op):z-1))},1e3);return()=>clearInterval(ne)},[t,C]);const P=B.useRef(0);B.useEffect(()=>{P.current=C},[C]);const U=()=>{const ne=P.current;A(z=>[...z,ne]),D(0),I(!0),setTimeout(()=>I(!1),2e3)},F=(ne=!1)=>{const z=P.current;z>0&&A(Q=>[...Q,z]),s("FINISHED"),ne||Z.play("finish")},O=()=>{const ne=y+T,z=(dh*60-q)/60,Q=z<.1?.1:z,fe=Q>0?Math.round(y/Q):0,ie=ne>0?y/ne*100:0;let ce=0;if(M.length>0){const nt=M.reduce((St,At)=>St+At,0)/M.length,Qe=M.reduce((St,At)=>St+Math.pow(At-nt,2),0)/M.length;ce=Math.sqrt(Qe)}const Te=vB(M),xe=bB(y,fe,ie,ce,Te);return{totalCorrect:y,totalWrong:T,totalAttempts:ne,totalColumns:u,speedPerMinute:fe,consistencyScore:parseFloat(ce.toFixed(2)),accuracy:Math.round(ie),intervalData:M,interpretation:{verdict:xe,speedDesc:fe>50?"Sangat Cepat":fe>35?"Cepat":"Sedang",accDesc:ie>98?"Sangat Teliti":ie>92?"Teliti":"Kurang Teliti",stabDesc:Te==="TURUN"?"Menurun (Lelah)":ce<4?"Stabil":"Fluktuatif",trend:Te}}},Ae=ne=>{const z=Math.floor(ne/60),Q=ne%60;return`${z}:${Q.toString().padStart(2,"0")}`},Le=()=>{const ne=O(),z={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:ne.totalCorrect,maxScore:0,details:ne,questions:[],answers:[],isAborted:!0};e(z)};if(t==="SETUP")return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-700 animate-fade-in-up",children:[o.jsxs("div",{className:"p-8 bg-indigo-600 text-white text-center relative overflow-hidden",children:[o.jsx(Xn,{size:64,className:"mx-auto mb-4 relative z-10"}),o.jsx("h1",{className:"text-3xl font-black relative z-10",children:"Tes Pauli Digital"}),o.jsx("p",{className:"opacity-90 relative z-10 text-sm mt-2",children:"Uji Ketahanan & Stabilitas Kerja"})]}),o.jsxs("div",{className:"p-8 space-y-6",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl text-sm text-slate-600 dark:text-slate-300 space-y-3",children:[o.jsxs("p",{className:"flex items-center gap-3",children:[o.jsx(Cr,{size:18,className:"text-indigo-500 shrink-0"})," ",o.jsxs("span",{children:[o.jsx("strong",{children:"Durasi:"})," ",dh," Menit"]})]}),o.jsxs("p",{className:"flex items-center gap-3",children:[o.jsx(Xn,{size:18,className:"text-emerald-500 shrink-0"})," ",o.jsxs("span",{children:[o.jsx("strong",{children:"Instruksi:"})," Jumlahkan dua angka yang berdekatan. Masukkan digit satuan saja (misal: 12  2)."]})]}),o.jsxs("p",{className:"flex items-center gap-3",children:[o.jsx(No,{size:18,className:"text-amber-500 shrink-0"})," ",o.jsxs("span",{children:[o.jsx("strong",{children:"Garis:"})," Setiap 1 menit, muncul tanda 'Garis'. Tetap lanjutkan menghitung."]})]})]}),o.jsxs("button",{onClick:N,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2 hover:scale-105 transform duration-200",children:[o.jsx(Oo,{size:24,fill:"currentColor"})," Mulai Tes"]}),o.jsx("button",{onClick:n,className:"w-full py-3 text-slate-500 hover:text-indigo-600 font-bold text-sm transition",children:"Kembali"})]})]})});if(t==="FINISHED"){const ne=O(),z={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:ne.totalCorrect,maxScore:0,details:ne,questions:[],answers:[]};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 flex items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"max-w-4xl w-full bg-white dark:bg-slate-800 rounded-3xl shadow-xl p-8 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white",children:"Analisis Profil Kerja"}),o.jsx("div",{className:"mt-4 inline-block px-6 py-2 bg-indigo-600 text-white text-xl font-bold rounded-full shadow-lg",children:ne.interpretation.verdict})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(Xn,{size:14})," Prestasi (Total)"]}),o.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:ne.totalCorrect}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(Cr,{size:14})," Tempo"]}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:ne.speedPerMinute}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"rata-rata/menit"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(es,{size:14})," Ketelitian"]}),o.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-400",children:ne.totalWrong}),o.jsxs("div",{className:"text-[10px] text-slate-500",children:["kesalahan (",ne.interpretation.accDesc,")"]})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(No,{size:14})," Stabilitas"]}),o.jsx("div",{className:"text-3xl font-black text-amber-500",children:ne.consistencyScore}),o.jsxs("div",{className:"text-[10px] text-slate-500",children:["deviasi (",ne.interpretation.trend,")"]})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 flex items-center gap-2",children:[o.jsx(No,{size:18})," Grafik Ritme Kerja (Per 1 Menit)"]}),o.jsx("div",{className:"h-48 flex items-end gap-1 p-2 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-x-auto",children:ne.intervalData.map((Q,fe)=>{const ie=Math.max(...ne.intervalData,1),ce=Q/ie*100;return o.jsxs("div",{className:"flex-1 min-w-[20px] bg-indigo-500/80 hover:bg-indigo-500 transition-all rounded-t relative group",style:{height:`${ce}%`},children:[o.jsx("div",{className:"absolute bottom-0 w-full text-center text-[8px] text-white/50",children:fe+1}),o.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg",children:Q})]},fe)})}),o.jsx("p",{className:"text-xs text-slate-400 mt-2 text-center",children:"Grafik yang menurun drastis menunjukkan indikasi kelelahan."})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>{s("SETUP")},className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ulangi Tes"}),o.jsxs("button",{onClick:()=>e(z),className:"flex-1 py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[o.jsx(xx,{size:20})," Simpan & Keluar"]})]})]})})}const Y=a[u]||[],oe=Y[m],_e=Y[m+1],Me=[1,2,3,4,5,6,7,8,9,0];return o.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[o.jsxs("div",{className:"px-6 py-3 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20 shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Waktu"}),o.jsx("div",{className:"text-xl font-mono font-bold text-slate-800 dark:text-white",children:Ae(q)})]}),o.jsxs("div",{className:"text-center pl-4 border-l border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Prestasi"}),o.jsx("div",{className:"text-xl font-bold text-emerald-600",children:y})]})]}),o.jsx("button",{onClick:()=>s("PAUSED"),className:"p-3 bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:o.jsx(Su,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),G&&o.jsx("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-50 bg-amber-500 text-white px-6 py-2 rounded-full font-bold shadow-lg animate-pulse border-2 border-white",children:"GARIS!  LANJUT HITUNG"}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative p-4",children:o.jsxs("div",{className:"flex flex-col items-center gap-2 transform scale-110",children:[o.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:m>0?Y[m-1]:"-"}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-xl border-4 border-indigo-100 dark:border-slate-700 flex flex-col items-center gap-2 w-64 animate-fade-in-up",children:[o.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:oe}),o.jsx("div",{className:"w-16 h-1 bg-slate-200 dark:bg-slate-600 rounded-full my-1"}),o.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:_e!==void 0?_e:"-"})]}),o.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:Y[m+2]!==void 0?Y[m+2]:"-"})]})}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 pb-8 border-t border-slate-200 dark:border-slate-700 shrink-0 z-30",children:[o.jsx("div",{className:"max-w-md mx-auto grid grid-cols-5 gap-3",children:Me.map(ne=>o.jsx("button",{onClick:()=>R(ne),className:"h-16 rounded-2xl bg-slate-100 dark:bg-slate-700 text-2xl font-bold text-slate-700 dark:text-white shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 transition-all hover:bg-indigo-50 dark:hover:bg-slate-600 active:bg-indigo-100 dark:active:bg-slate-500",children:ne},ne))}),o.jsx("div",{className:"text-center mt-4 text-xs text-slate-400",children:"Gunakan tombol di atas atau keyboard angka"})]}),t==="PAUSED"&&o.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),o.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, lalu lanjutkan."}),o.jsx("button",{onClick:()=>s("PLAYING"),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),o.jsx("button",{onClick:Le,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},lp=10,P1=60,L1=["A","B","C","D","E"],fs=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],U1=(n,e,t)=>{let s=0;return n===100?s+=50:n>=95?s+=45:n>=90?s+=40:n>=80?s+=30:n>=70?s+=20:s+=10,e>=50?s+=30:e>=40?s+=25:e>=30?s+=20:e>=20?s+=10:s+=5,t<2?s+=20:t<4?s+=15:t<6?s+=10:t<8&&(s+=5),s>=95?"Sempurna":s>=85?"Sangat Baik":s>=70?"Baik":s>=55?"Cukup":s>=40?"Kurang":"Buruk"},O1=n=>{let e=[];n==="ANGKA"?e=[...["0","1","2","3","4","5","6","7","8","9"]].sort(()=>.5-Math.random()).slice(0,5):n==="HURUF"?e=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")].sort(()=>.5-Math.random()).slice(0,5):n==="SIMBOL_HILANG"&&(e=[...fs].sort(()=>.5-Math.random()).slice(0,5));const t=Math.floor(Math.random()*5),s=e.filter((a,l)=>l!==t).sort(()=>.5-Math.random());return{reference:e,question:s,answer:t}},V1=()=>{const n=3+Math.floor(Math.random()*2),e=Array.from({length:n},()=>fs[Math.floor(Math.random()*fs.length)]),t=Math.random()>.5;let s=[...e];if(!t)if(Math.random()>.5){const a=Math.floor(Math.random()*n);let l=fs[Math.floor(Math.random()*fs.length)];for(;l===e[a];)l=fs[Math.floor(Math.random()*fs.length)];s[a]=l}else n>=2&&([s[0],s[1]]=[s[1],s[0]],s[0]===s[1]&&(s[0]=fs.find(u=>u!==s[0])||"X"));return{left:e,right:s,isSame:t}},B1=()=>{const e=[...fs].sort(()=>.5-Math.random()).slice(0,5),t=Math.floor(Math.random()*5),s=e[t];return{map:e,target:s,answer:t}},G1=()=>{const n=fs[Math.floor(Math.random()*fs.length)],e=Array.from({length:20},()=>{if(Math.random()<.3)return n;let s=fs[Math.floor(Math.random()*fs.length)];for(;s===n;)s=fs[Math.floor(Math.random()*fs.length)];return s}),t=e.filter(s=>s===n).length;return{target:n,grid:e,totalCorrect:t}},TB=({initialMode:n,onBack:e,onComplete:t})=>{var fe;const[s,a]=B.useState(n||"ANGKA"),[l,u]=B.useState(1),[h,m]=B.useState(P1),[f,y]=B.useState(!1),[_,T]=B.useState("PLAYING"),[E,M]=B.useState(null),[A,C]=B.useState(null),[D,G]=B.useState(null),[I,q]=B.useState(null),[X,J]=B.useState([]),[j,N]=B.useState([]),[R,P]=B.useState(0),[U,F]=B.useState(0),[O,Ae]=B.useState(null),Le=B.useCallback(()=>{if(s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG")if(E){const ie=Math.floor(Math.random()*5),ce=E.reference.filter((Te,xe)=>xe!==ie).sort(()=>.5-Math.random());M({...E,question:ce,answer:ie})}else{const ie=O1(s);M(ie)}else if(s==="SAMA_BEDA")C(V1());else if(s==="MATCHING")if(!D)G(B1());else{const ie=Math.floor(Math.random()*5);G({...D,target:D.map[ie],answer:ie})}else s==="GROUPING"&&(q(G1()),J([]))},[s,E,D]),Y=B.useCallback(()=>{M(null),G(null),C(null),q(null),s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?M(O1(s)):s==="SAMA_BEDA"?C(V1()):s==="MATCHING"?G(B1()):s==="GROUPING"&&(q(G1()),J([])),m(P1),P(0),F(0)},[s]);B.useEffect(()=>{_==="PLAYING"&&Y()},[l,s,_]);const oe=ie=>{if(f)return;let ce=!1;s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?ce=ie===(E==null?void 0:E.answer):s==="SAMA_BEDA"?ce=ie===(A==null?void 0:A.isSame):s==="MATCHING"&&(ce=ie===(D==null?void 0:D.answer)),ce?(P(Te=>Te+1),Ae("CORRECT")):(F(Te=>Te+1),Ae("WRONG"),Z.play("error")),setTimeout(()=>Ae(null),150),Le()},_e=()=>{if(!I)return;let ie=0,ce=0;X.forEach(xe=>{I.grid[xe]===I.target?ie++:ce++});const Te=I.totalCorrect-ie;P(xe=>xe+ie),F(xe=>xe+ce+Te),ce===0&&Te===0?(Ae("CORRECT"),Z.play("success")):(Ae("WRONG"),Z.play("error")),setTimeout(()=>Ae(null),200),Le()},Me=ie=>{Z.play("click"),J(ce=>ce.includes(ie)?ce.filter(Te=>Te!==ie):[...ce,ie])};B.useEffect(()=>{if(f||_==="FINISHED")return;const ie=setInterval(()=>{m(ce=>(ce<=6&&ce>1&&Z.play("tick"),ce<=1?(ne(),0):ce-1))},1e3);return()=>clearInterval(ie)},[f,l,_,R,U]);const ne=()=>{N(ie=>{if(ie.find(xe=>xe.section===l))return ie;const ce={section:l,correct:R,wrong:U},Te=[...ie,ce];return l>=lp?setTimeout(()=>T("FINISHED"),0):setTimeout(()=>{u(xe=>xe+1),Z.play("success")},0),Te})},z=()=>{const ie=j.length,ce=j.reduce((et,We)=>et+We.correct,0),Te=j.reduce((et,We)=>et+We.wrong,0),xe=ie>0?ce/ie:0,nt=ce+Te,Qe=nt>0?ce/nt*100:0,St=xe,At=j.reduce((et,We)=>et+Math.pow(We.correct-St,2),0)/(ie||1),at=Math.sqrt(At),Ge=U1(Qe,xe,at),ue={mode:s,totalCorrect:ce,totalWrong:Te,averageSpeed:parseFloat(xe.toFixed(1)),accuracy:parseFloat(Qe.toFixed(1)),sectionData:j,stability:parseFloat(at.toFixed(2)),verdict:Ge},Oe={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(Qe),maxScore:100,details:ue,questions:[],answers:[]};Z.play("finish"),t(Oe)},Q=()=>{const ie={section:l,correct:R,wrong:U},ce=[...j];ce.find(Oe=>Oe.section===l)||ce.push(ie);const Te=ce.reduce((Oe,et)=>Oe+et.correct,0),xe=ce.reduce((Oe,et)=>Oe+et.wrong,0),nt=Te/(ce.length||1),Qe=Te+xe,St=Qe>0?Te/Qe*100:0,Ge={mode:s,totalCorrect:Te,totalWrong:xe,averageSpeed:parseFloat(nt.toFixed(1)),accuracy:parseFloat(St.toFixed(1)),sectionData:ce,stability:parseFloat(0 .toFixed(2)),verdict:"Belum Selesai"},ue={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(St),maxScore:100,details:Ge,questions:[],answers:[],isAborted:!0};t(ue)};if(_==="FINISHED"){const ie=j.reduce((at,Ge)=>at+Ge.correct,0),ce=j.reduce((at,Ge)=>at+Ge.wrong,0),Te=ie/j.length,xe=ie/(ie+ce)*100,nt=Te,Qe=j.reduce((at,Ge)=>at+Math.pow(Ge.correct-nt,2),0)/j.length,St=Math.sqrt(Qe),At=U1(xe,Te,St);return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:"Tes Selesai!"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut hasil performa kecermatan Anda."}),o.jsx("div",{className:"flex justify-center mb-8",children:o.jsx("div",{className:"px-6 py-2 bg-indigo-600 text-white rounded-full font-bold text-xl shadow-lg shadow-indigo-200 dark:shadow-none animate-bounce-slow",children:At})}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Kecepatan"}),o.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:Te.toFixed(1)}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"poin/menit"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Akurasi"}),o.jsxs("div",{className:"text-2xl font-black text-emerald-500",children:[xe.toFixed(1),"%"]})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Stabilitas"}),o.jsx("div",{className:"text-2xl font-black text-amber-500",children:St.toFixed(2)}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-3 text-left",children:"Grafik Performa Per Menit"}),o.jsx("div",{className:"h-40 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative",children:Array.from({length:lp}).map((at,Ge)=>{const ue=j.find(Rn=>Rn.section===Ge+1),Oe=ue?ue.correct:0,et=Math.max(...j.map(Rn=>Rn.correct),10),We=Oe/et*100;return o.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full",children:[o.jsx("div",{className:"w-full bg-indigo-500/80 hover:bg-indigo-600 transition-all rounded-t-sm relative",style:{height:`${We}%`},children:o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg whitespace-nowrap",children:["Menit ",Ge+1,": ",Oe]})}),o.jsx("div",{className:"mt-1 text-[9px] font-bold text-slate-400",children:Ge+1})]},Ge)})})]}),o.jsxs("button",{onClick:z,className:"w-full py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition flex items-center justify-center gap-2",children:[o.jsx(xx,{size:20})," Simpan Hasil"]})]})})}return o.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[o.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm shrink-0 z-20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Bagian"}),o.jsxs("span",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400",children:[l,"/",lp]})]}),o.jsx("div",{className:"w-px h-8 bg-slate-200 dark:bg-slate-700"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu"}),o.jsxs("span",{className:`text-lg font-mono font-black ${h<=5?"text-rose-500 animate-pulse":"text-slate-800 dark:text-white"}`,children:[h,"s"]})]}),o.jsxs("div",{className:"hidden sm:flex flex-col border-l pl-4 border-slate-200 dark:border-slate-700",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Benar"}),o.jsx("span",{className:"text-lg font-black text-emerald-600",children:R})]})]}),o.jsx("button",{onClick:()=>y(!0),className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:o.jsx(Su,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),o.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:[O&&o.jsx("div",{className:`absolute inset-0 z-10 flex items-center justify-center pointer-events-none transition-opacity duration-150 ${O==="CORRECT"?"bg-emerald-500/10":"bg-rose-500/10"}`,children:o.jsx("div",{className:`p-4 rounded-full ${O==="CORRECT"?"bg-emerald-500 text-white":"bg-rose-500 text-white"} shadow-xl transform scale-125`,children:O==="CORRECT"?o.jsx(es,{size:64}):o.jsx(tg,{size:64})})}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-2 w-full max-w-4xl mx-auto h-full min-h-0",children:[(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&o.jsxs("div",{className:"w-full h-full flex flex-col justify-center gap-4 sm:gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-2 shrink-0",children:[o.jsx("div",{className:"grid grid-cols-5 gap-1",children:(fe=s==="MATCHING"?D==null?void 0:D.map:E==null?void 0:E.reference)==null?void 0:fe.map((ie,ce)=>o.jsx("div",{className:`aspect-square flex flex-col items-center justify-center bg-slate-100 dark:bg-slate-700 rounded-lg ${s==="MATCHING"?"py-1":""}`,children:o.jsx("span",{className:`${s==="MATCHING"||s==="SIMBOL_HILANG"?"text-3xl sm:text-5xl":"text-2xl sm:text-4xl"} font-black text-slate-800 dark:text-white`,children:ie})},ce))}),o.jsx("div",{className:"grid grid-cols-5 gap-1 text-center border-t border-slate-100 dark:border-slate-600 pt-1 mt-1",children:L1.map((ie,ce)=>o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:ie},ce))})]}),o.jsxs("div",{className:"text-center py-2 flex-1 flex flex-col justify-center",children:[o.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:s==="MATCHING"?"Cari Pasangan:":"Mana yang hilang?"}),s==="MATCHING"?o.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 mx-auto flex items-center justify-center bg-indigo-600 rounded-3xl shadow-xl transform transition-all duration-300",children:o.jsx("span",{className:"text-6xl sm:text-7xl font-black text-white",children:D==null?void 0:D.target})}):o.jsx("div",{className:"flex justify-center gap-2 sm:gap-4 flex-wrap",children:E==null?void 0:E.question.map((ie,ce)=>o.jsx("div",{className:"w-12 h-12 sm:w-20 sm:h-20 flex items-center justify-center bg-white dark:bg-slate-800 rounded-xl border-2 border-slate-200 dark:border-slate-600 shadow-sm text-slate-800 dark:text-white font-bold text-xl sm:text-3xl",children:ie},ce))})]})]}),s==="SAMA_BEDA"&&A&&o.jsxs("div",{className:"w-full max-w-md h-full flex flex-col justify-center gap-4 text-center min-h-0",children:[o.jsxs("div",{className:"flex flex-col gap-2 sm:gap-4 flex-1 justify-center min-h-0",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:o.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:A.left.map((ie,ce)=>o.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:ie},ce))})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:o.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:A.right.map((ie,ce)=>o.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:ie},ce))})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 shrink-0",children:[o.jsxs("button",{onClick:()=>oe(!0),className:"h-16 sm:h-24 bg-emerald-500 hover:bg-emerald-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[o.jsx(es,{size:24,className:"mb-1 hidden sm:block"})," SAMA"]}),o.jsxs("button",{onClick:()=>oe(!1),className:"h-16 sm:h-24 bg-rose-500 hover:bg-rose-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[o.jsx(tg,{size:24,className:"mb-1 hidden sm:block"})," BEDA"]})]}),o.jsx("p",{className:"text-xs text-slate-400 pb-1",children:"Bandingkan kedua kotak. Sama atau Beda?"})]}),s==="GROUPING"&&I&&o.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden min-h-0",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 shrink-0",children:[o.jsxs("div",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 flex items-center gap-2",children:["Pilih: ",o.jsx("span",{className:"text-2xl bg-white dark:bg-slate-800 px-3 py-1 rounded-lg border inline-block shadow-sm text-indigo-600",children:I.target})]}),o.jsx("button",{onClick:_e,className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 shadow-md active:scale-95 transition",children:"Lanjut"})]}),o.jsx("div",{className:"flex-1 grid grid-cols-5 grid-rows-4 gap-1 sm:gap-2 p-1 content-center justify-items-center h-full min-h-0",children:I.grid.map((ie,ce)=>{const Te=X.includes(ce);return o.jsx("button",{onClick:()=>Me(ce),className:`w-full h-full rounded-xl flex items-center justify-center text-xl sm:text-3xl transition-all duration-75 ${Te?"bg-indigo-600 text-white shadow-inner scale-95 border-2 border-indigo-700":"bg-white dark:bg-slate-800 text-slate-800 dark:text-white border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-300"}`,children:ie},ce)})})]})]})]}),(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&o.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-2 sm:p-4 pb-6 shrink-0 z-30",children:o.jsx("div",{className:"max-w-3xl mx-auto",children:o.jsx("div",{className:"grid grid-cols-5 gap-2 md:gap-4",children:L1.map((ie,ce)=>o.jsx("button",{onClick:()=>oe(ce),className:"h-14 sm:h-20 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-indigo-600 dark:hover:bg-indigo-600 hover:text-white active:scale-95 transition-all shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 flex flex-col items-center justify-center gap-1 group text-slate-700 dark:text-slate-200",children:o.jsx("span",{className:"text-xl sm:text-2xl font-black",children:ie})},ce))})})}),f&&o.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),o.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, fokus kembali."}),o.jsx("button",{onClick:()=>y(!1),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),o.jsx("button",{onClick:Q,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},SB={RED_GREEN:{fg:["#EA5455","#FF9F43","#E55039","#F8EFBA","#F97F51"],bg:["#2ECC71","#26C6DA","#1ABC9C","#55E6C1","#58B19F","#CAD3C8"]},BLUE_YELLOW:{fg:["#5F27CD","#341F97","#54A0FF","#2E86DE","#0ABDE3"],bg:["#FECA57","#FF9F43","#F8C291","#6AB04C","#BADC58"]},GRAYSCALE:{fg:["#2d3436","#636e72","#b2bec3"],bg:["#dfe6e9","#f5f6fa","#dcdde1"]},PROTANOPIA:{fg:["#833471","#6D214F","#B33771","#3B3B98"],bg:["#182C61","#2C3A47","#58B19F","#2C2C54"]},DEUTERANOPIA:{fg:["#D6A2E8","#82589F","#E056FD","#BE2EDD"],bg:["#95AFC0","#7ED6DF","#22A6B3","#30336B"]}},EB=()=>{const n=[];let e=1;n.push({id:e++,type:"NUMBER",palette:"RED_GREEN",target:12,difficulty:"EASY",description:"Control Plate"});for(let a=0;a<5;a++){const l=Math.floor(Math.random()*90)+10,u=Math.random();let h="RED_GREEN";u>.7?h="DEUTERANOPIA":u>.4&&(h="PROTANOPIA"),n.push({id:e++,type:"NUMBER",palette:h,target:l,difficulty:"MEDIUM",description:"Red-Green Defect Check"})}n.push({id:e++,type:"NUMBER",palette:"BLUE_YELLOW",target:Math.floor(Math.random()*90)+10,difficulty:"MEDIUM",description:"Tritanopia Check"}),n.push({id:e++,type:"NUMBER",palette:"GRAYSCALE",target:Math.floor(Math.random()*90)+10,difficulty:"HARD",description:"Contrast Sensitivity"}),n.push({id:e++,type:"NUMBER",palette:"BLUE_YELLOW",target:Math.floor(Math.random()*90)+10,difficulty:"HARD",description:"Tritanopia Check"});const s=["curve_simple","snake","loop","spiral","zigzag","square","triangle","infinity"].sort(()=>.5-Math.random());for(let a=0;a<6;a++){const l=s[a%s.length],u=Math.random();let h="RED_GREEN";u>.8?h="GRAYSCALE":u>.6&&(h="BLUE_YELLOW"),n.push({id:e++,type:"PATH",palette:h,target:l,difficulty:a>3?"HARD":"MEDIUM",description:`Path Tracking (${h})`})}return n},wB=()=>o.jsxs("div",{className:"absolute inset-0 pointer-events-none z-50 overflow-hidden",children:[[...Array(20)].map((n,e)=>o.jsx("div",{className:"absolute animate-confetti",style:{left:`${Math.random()*100}%`,top:"-10%",backgroundColor:["#ef4444","#3b82f6","#10b981","#f59e0b","#8b5cf6"][Math.floor(Math.random()*5)],width:"10px",height:"10px",animationDelay:`${Math.random()*2}s`,animationDuration:`${2+Math.random()*3}s`}},e)),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"animate-bounce-slow text-6xl text-yellow-400 drop-shadow-lg",children:o.jsx(Es,{size:120,fill:"currentColor"})})})]}),NB=({config:n,onPathGenerated:e})=>{const t=B.useRef(null);return B.useEffect(()=>{const s=t.current;if(!s)return;const a=s.getContext("2d");if(!a)return;const l=document.createElement("canvas");l.width=s.width,l.height=s.height;const u=l.getContext("2d");if(!u)return;u.fillStyle="#000000",u.fillRect(0,0,s.width,s.height),u.fillStyle="#FFFFFF",u.strokeStyle="#FFFFFF";const h=[];if(n.type==="NUMBER"){u.font='bold 180px "Arial Rounded MT Bold", Arial, sans-serif',u.textAlign="center",u.textBaseline="middle";const A=(Math.random()-.5)*.2;u.save(),u.translate(s.width/2,s.height/2),u.rotate(A),u.fillText(n.target.toString(),0,15),u.restore()}else{u.lineWidth=55,u.lineCap="round",u.lineJoin="round",u.beginPath();const A=s.width,C=s.height,D=50;if(n.target==="curve_simple")u.moveTo(D,C/2),u.quadraticCurveTo(A/2,-50,A-D,C/2);else if(n.target==="snake")u.moveTo(D,C/2),u.bezierCurveTo(A/3,0,2*A/3,C,A-D,C/2);else if(n.target==="loop")u.arc(A/2,C/2,A/3,0,Math.PI*2);else if(n.target==="spiral"){const q=A/2,X=C/2;u.moveTo(q,X);for(let J=0;J<100;J++){const j=.3*J,N=2*J,R=q+N*Math.cos(j),P=X+N*Math.sin(j);if(R<D||R>A-D||P<D||P>C-D)break;u.lineTo(R,P)}}else n.target==="zigzag"?(u.moveTo(D,D),u.lineTo(A/2,C-D),u.lineTo(A-D,D)):n.target==="square"?u.rect(D,D,A-2*D,C-2*D):n.target==="triangle"?(u.moveTo(A/2,D),u.lineTo(A-D,C-D),u.lineTo(D,C-D),u.closePath()):n.target==="infinity"?(u.moveTo(D,C/2),u.bezierCurveTo(A/3,0,A/3,C,A/2,C/2),u.bezierCurveTo(2*A/3,0,2*A/3,C,A-D,C/2)):(u.moveTo(D,C-D),u.bezierCurveTo(A/2,0,A,C/2,A/2,C/2),u.bezierCurveTo(0,C/2,A/2,C,A-D,D));u.stroke();const G=u.getImageData(0,0,A,C),I=20;for(let q=0;q<C;q+=I)for(let X=0;X<A;X+=I)G.data[(q*A+X)*4]>200&&h.push({x:X,y:q});e(h)}const f=u.getImageData(0,0,s.width,s.height).data,y=SB[n.palette];a.clearRect(0,0,s.width,s.height);const _=s.width/2,T=s.height/2,E=s.width/2-2,M=3200;for(let A=0;A<M;A++){let C=Math.random()*s.width,D=Math.random()*s.height;if(Math.sqrt(Math.pow(C-_,2)+Math.pow(D-T,2))>E)continue;const I=(Math.floor(D)*s.width+Math.floor(C))*4,q=f[I]>128;let X=Math.random()*3+2;n.difficulty==="HARD"&&(X=Math.random()*2.5+1.5);let J=q?y.fg:y.bg;n.difficulty==="HARD"&&Math.random()<.08&&(J=q?y.bg:y.fg);const j=J[Math.floor(Math.random()*J.length)];a.beginPath(),a.arc(C,D,X,0,Math.PI*2),a.fillStyle=j,a.fill()}},[n]),o.jsx("canvas",{ref:t,width:320,height:320,className:"rounded-full shadow-lg bg-slate-100 dark:bg-slate-800"})},kB=({isActive:n,onStroke:e,clearTrigger:t})=>{const s=B.useRef(null),[a,l]=B.useState(!1);return B.useEffect(()=>{const u=s.current;if(u){const h=u.getContext("2d");h==null||h.clearRect(0,0,u.width,u.height)}},[t]),B.useEffect(()=>{const u=s.current;if(!u||!n)return;const h=u.getContext("2d");if(!h)return;const m=T=>{const E=u.getBoundingClientRect();let M,A;return"touches"in T?(M=T.touches[0].clientX,A=T.touches[0].clientY):(M=T.clientX,A=T.clientY),{x:(M-E.left)*(u.width/E.width),y:(A-E.top)*(u.height/E.height)}},f=T=>{T.preventDefault(),l(!0);const E=m(T);h.beginPath(),h.moveTo(E.x,E.y),h.lineWidth=15,h.lineCap="round",h.lineJoin="round",h.strokeStyle="rgba(0, 0, 255, 0.7)",e(E)},y=T=>{if(!a)return;T.preventDefault();const E=m(T);h.lineTo(E.x,E.y),h.stroke(),e(E)},_=()=>{l(!1),h.closePath()};return u.addEventListener("mousedown",f),u.addEventListener("touchstart",f,{passive:!1}),window.addEventListener("mousemove",y),window.addEventListener("touchmove",y,{passive:!1}),window.addEventListener("mouseup",_),window.addEventListener("touchend",_),()=>{u.removeEventListener("mousedown",f),u.removeEventListener("touchstart",f),window.removeEventListener("mousemove",y),window.removeEventListener("touchmove",y),window.removeEventListener("mouseup",_),window.removeEventListener("touchend",_)}},[n,a,e]),o.jsx("canvas",{ref:s,width:320,height:320,className:"absolute top-0 left-0 cursor-crosshair touch-none z-10"})},AB=({onFinish:n})=>{const[e,t]=B.useState([]),[s,a]=B.useState(null),[l,u]=B.useState(!1),[h,m]=B.useState(0);B.useEffect(()=>{const T=Array.from({length:15},(M,A)=>({id:A,color:`hsl(${A*21.333333333333332}, 65%, 55%)`,correctIndex:A})),E=T.slice(1,14).sort(()=>Math.random()-.5);t([T[0],...E,T[14]])},[]);const f=_=>{if(!l){if(_===0||_===e.length-1){Z.play("error");return}if(s===null)Z.play("tap"),a(_);else{const T=[...e];[T[s],T[_]]=[T[_],T[s]],t(T),a(null),Z.play("click")}}},y=()=>{let _=0;for(let E=0;E<e.length-1;E++){const M=Math.abs(e[E].correctIndex-e[E+1].correctIndex);M>1&&(_+=M-1)}const T=Math.max(0,100-_*3);m(T),u(!0),Z.play("finish")};return l?o.jsxs("div",{className:"text-center p-6 bg-white dark:bg-slate-800 rounded-3xl shadow-xl",children:[o.jsx(Yl,{size:64,className:"mx-auto mb-4 text-indigo-500"}),o.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:"Hasil Tes Spektrum"}),o.jsx("div",{className:"text-6xl font-black text-indigo-600 dark:text-indigo-400 mb-4",children:h}),o.jsx("p",{className:"text-slate-500 mb-6",children:h>=90?"Penglihatan warna sangat akurat!":h>=70?"Diskriminasi warna baik.":"Terindikasi kesulitan membedakan nuansa warna."}),o.jsx("div",{className:"flex justify-center gap-1 mb-6 h-8 rounded-lg overflow-hidden border border-slate-200",children:e.map((_,T)=>o.jsx("div",{className:"flex-1",style:{backgroundColor:_.color}},T))}),o.jsx("button",{onClick:()=>n(h),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold",children:"Lanjut"})]}):o.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"text-center font-bold text-lg mb-4 text-slate-800 dark:text-white flex items-center justify-center gap-2",children:[o.jsx(Yl,{size:20})," Urutkan Warna"]}),o.jsxs("p",{className:"text-center text-sm text-slate-500 mb-6",children:["Klik untuk menukar posisi kotak warna agar membentuk gradasi yang halus dari kiri ke kanan.",o.jsx("br",{}),o.jsx("span",{className:"text-xs text-rose-500 font-bold",children:"Kotak pertama dan terakhir terkunci."})]}),o.jsx("div",{className:"grid grid-cols-5 sm:flex sm:flex-nowrap gap-1 mb-8",children:e.map((_,T)=>{const E=T===0||T===e.length-1,M=s===T;return o.jsx("div",{onClick:()=>f(T),className:`
                                h-16 sm:h-24 sm:flex-1 rounded-lg cursor-pointer transition-all transform
                                ${M?"scale-110 ring-4 ring-indigo-500 z-10":"hover:scale-105"}
                                ${E?"opacity-100 ring-2 ring-slate-400 z-0 cursor-default":"opacity-100"}
                            `,style:{backgroundColor:_.color},children:E&&o.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/50",children:o.jsx(qf,{size:16})})},T)})}),o.jsxs("button",{onClick:y,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition flex items-center justify-center gap-2",children:[o.jsx(es,{size:20})," Selesai Mengurutkan"]})]})},CB=({onFinish:n})=>{const[e,t]=B.useState(1),[s,a]=B.useState(0),[l,u]=B.useState([]),[h,m]=B.useState({x:0,y:0}),[f,y]=B.useState(null),[_,T]=B.useState("CLOSEST"),[E,M]=B.useState(!1),A=B.useRef(null),C=10,D=[{base:"#f43f5e",light:"#fb7185",glow:"rgba(244, 63, 94, 0.6)"},{base:"#3b82f6",light:"#60a5fa",glow:"rgba(59, 130, 246, 0.6)"},{base:"#10b981",light:"#34d399",glow:"rgba(16, 185, 129, 0.6)"},{base:"#f59e0b",light:"#fbbf24",glow:"rgba(245, 158, 11, 0.6)"},{base:"#8b5cf6",light:"#a78bfa",glow:"rgba(139, 92, 246, 0.6)"}],G=()=>{y(null);const X=Math.random()>.5?"CLOSEST":"FURTHEST";T(X);const J=[],j=[-1,0,1].sort(()=>.5-Math.random());for(let N=0;N<3;N++){const R=j[N],P=-100-Math.floor(Math.random()*300),U=Math.floor(Math.random()*D.length);J.push({id:N,z:P,lane:R,color:JSON.stringify(D[U])})}u(J)};B.useEffect(()=>{G()},[]);const I=X=>{if(!A.current)return;const J=A.current.getBoundingClientRect();let j,N;"touches"in X?(j=X.touches[0].clientX,N=X.touches[0].clientY):(j=X.clientX,N=X.clientY);const R=(j-J.left)/J.width*2-1,P=(N-J.top)/J.height*2-1;m({x:R,y:P})},q=(X,J)=>{if(E||f!==null)return;y(X);const j=l.map(P=>P.z),N=_==="CLOSEST"?Math.max(...j):Math.min(...j);J===N?(Z.play("success"),a(P=>P+1)):Z.play("error"),setTimeout(()=>{e<C?(t(P=>P+1),G()):(M(!0),Z.play("finish"))},500)};return E?o.jsxs("div",{className:"text-center p-6 bg-white dark:bg-slate-800 rounded-3xl shadow-xl animate-fade-in",children:[o.jsx(px,{size:64,className:"mx-auto mb-4 text-indigo-500"}),o.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:"Hasil Persepsi Kedalaman"}),o.jsx("div",{className:"text-6xl font-black text-indigo-600 dark:text-indigo-400 mb-4",children:s*10}),o.jsx("p",{className:"text-slate-500 mb-6",children:s>=8?"Persepsi kedalaman sangat baik!":"Perlu latihan estimasi jarak visual."}),o.jsx("button",{onClick:()=>n(s*10),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold",children:"Lanjut"})]}):o.jsxs("div",{className:"w-full max-w-2xl bg-slate-900 p-6 rounded-3xl shadow-xl overflow-hidden relative select-none",children:[o.jsxs("div",{className:"absolute top-4 left-4 z-10 bg-black/50 px-3 py-1 rounded text-white text-xs font-bold",children:["Round ",e,"/",C]}),o.jsx("h3",{className:"text-center font-bold text-lg mb-8 text-white flex items-center justify-center gap-2 z-10 relative",children:_==="CLOSEST"?"Pilih yang TERDEKAT (Paling Besar/Jelas)":"Pilih yang TERJAUH (Paling Kecil/Buram)"}),o.jsxs("div",{ref:A,className:"h-96 w-full relative flex justify-center items-center bg-gradient-to-b from-slate-800 to-slate-900 overflow-hidden rounded-xl border border-slate-700 cursor-crosshair touch-none perspective-container",onMouseMove:I,onTouchMove:I,children:[o.jsx("div",{className:"absolute bottom-0 w-[200%] h-[100%] left-[-50%] bg-[linear-gradient(rgba(255,255,255,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.05)_1px,transparent_1px)] bg-[size:40px_40px]",style:{transform:"perspective(600px) rotateX(60deg) translateY(100px) scale(2)",pointerEvents:"none"}}),l.map(X=>{const j=1e3/(1e3-X.z),N=Math.abs(X.z+100)/100,R=h.x*j*30,P=h.y*j*15,O=X.lane*100+R,Ae=P,Le=1e3+Math.floor(X.z),Y=100,oe=JSON.parse(X.color),_e=f===X.id;return o.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:`translate(calc(-50% + ${O}px), calc(-50% + ${Ae}px))`,zIndex:_e?2e3:Le,width:`${Y*j}px`,height:`${Y*j}px`,transition:_e?"transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)":"transform 0.1s linear"},children:[o.jsx("div",{className:"absolute bg-black/50 rounded-full blur-md",style:{bottom:"-20%",left:"10%",width:"80%",height:"20%",opacity:.6*j,transform:_e?"scale(1.5)":"scale(1)",transition:"all 0.3s"}}),o.jsxs("div",{onClick:Me=>{Me.stopPropagation(),q(X.id,X.z)},className:"w-full h-full rounded-full cursor-pointer touch-manipulation relative",style:{background:`radial-gradient(circle at 30% 30%, ${oe.light}, ${oe.base})`,boxShadow:_e?`0 0 50px 20px ${oe.glow}, inset -10px -10px 20px rgba(0,0,0,0.5)`:"inset -10px -10px 20px rgba(0,0,0,0.5), 0 0 10px rgba(0,0,0,0.3)",filter:_e?"blur(0px)":`blur(${N}px)`,transform:_e?"scale(1.2)":"scale(1)",transition:"all 0.3s ease-out"},children:[o.jsx("div",{className:"absolute top-[15%] left-[15%] w-[25%] h-[25%] bg-white/60 rounded-full blur-[2px] pointer-events-none"}),_e&&o.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white animate-ping opacity-75"})]})]},X.id)})]}),o.jsxs("div",{className:"text-center text-slate-400 text-xs mt-4 flex items-center justify-center gap-2",children:[o.jsx(_k,{size:12})," Gerakkan mouse/jari untuk melihat efek 3D (Paralaks)."]})]})},IB=({onBack:n,onComplete:e})=>{const[t,s]=B.useState("MENU"),[a,l]=B.useState([]),[u,h]=B.useState(0),[m,f]=B.useState([]),[y,_]=B.useState(""),[T,E]=B.useState(!1),[M,A]=B.useState([]),[C,D]=B.useState([]),[G,I]=B.useState(0),q=()=>{const P=EB();l(P),f([]),h(0),E(!1),s("ISHIHARA"),Z.play("click")},X=()=>{Z.play("click");const P=a[u];let U=!1;if(P.type==="NUMBER")U=y.trim(),_("");else{if(M.length===0||C.length===0)U=!1;else{let O=0;const Ae=30;M.forEach(Y=>{C.some(_e=>Math.sqrt(Math.pow(_e.x-Y.x,2)+Math.pow(_e.y-Y.y,2))<Ae)&&O++}),U=O/M.length>.55}D([]),A([]),I(O=>O+1)}const F=[...m,U];f(F),u<a.length-1?h(O=>O+1):(Z.play("finish"),E(!0),setTimeout(()=>{J(F)},3500))},J=P=>{let U=0,F={RED_GREEN:0,BLUE_YELLOW:0,TOTAL_RG:0,TOTAL_BY:0};const O=a.map((oe,_e)=>{const Me=P[_e];let ne=!1;return oe.type==="NUMBER"?ne=Me.toString()===oe.target.toString():ne=Me===!0,ne?U++:((oe.palette==="RED_GREEN"||oe.palette==="PROTANOPIA"||oe.palette==="DEUTERANOPIA")&&F.RED_GREEN++,oe.palette==="BLUE_YELLOW"&&F.BLUE_YELLOW++),(oe.palette==="RED_GREEN"||oe.palette==="PROTANOPIA"||oe.palette==="DEUTERANOPIA")&&F.TOTAL_RG++,oe.palette==="BLUE_YELLOW"&&F.TOTAL_BY++,{question:oe,answer:Me,isCorrect:ne}}),Ae=U>=12;let Le="Normal Color Vision";Ae||(F.RED_GREEN>2&&F.BLUE_YELLOW<=1?Le="Possible Red-Green Deficiency (Protan/Deutan)":F.BLUE_YELLOW>1&&F.RED_GREEN<=2?Le="Possible Blue-Yellow Deficiency (Tritan)":F.RED_GREEN>2&&F.BLUE_YELLOW>1?Le="Complex/Severe Deficiency":Le="Mild Deficiency / Inconsistent");const Y={id:`cb-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:Math.round(U/a.length*100),maxScore:100,details:{type:"Ishihara Simulation",passed:Ae,correctCount:U,diagnosis:Le,breakdown:F},questions:a.map(oe=>({id:`q-${oe.id}`,type:"short_answer",content:`Plate ${oe.id} (${oe.palette})`,correctAnswer:oe.target.toString(),explanation:oe.description||"",metadata:{difficulty:"Medium",idealTimeSeconds:15,topic:"Color",subtest:oe.palette}})),answers:O.map((oe,_e)=>({questionId:`q-${oe.question.id}`,selectedAnswer:oe.answer.toString(),isCorrect:oe.isCorrect,scoreEarned:oe.isCorrect?1:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1}))};e(Y)},j=P=>{const U={id:`hue-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:P,maxScore:100,details:{type:"Hue Discrimination",passed:P>70,diagnosis:P>70?"Good Discrimination":"Weak Discrimination"},questions:[],answers:[]};e(U)},N=P=>{const U={id:`depth-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:P,maxScore:100,details:{type:"Depth Perception",passed:P>70,diagnosis:P>70?"Good Depth Perception":"Poor Depth Estimation"},questions:[],answers:[]};e(U)};if(t==="MENU")return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"max-w-md w-full",children:[o.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 hover:text-indigo-600 mb-8 font-bold",children:[o.jsx(ft,{size:20,className:"mr-2"})," Kembali"]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx(Do,{size:64,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400"}),o.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:"Tes Visual"}),o.jsx("p",{className:"text-slate-500 mb-8",children:"Pilih metode pengujian:"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("button",{onClick:q,className:"w-full p-4 bg-indigo-50 dark:bg-indigo-900/20 border-2 border-indigo-100 dark:border-indigo-800 rounded-2xl hover:border-indigo-500 transition group text-left flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-full text-indigo-600 shadow-sm group-hover:scale-110 transition",children:o.jsx(Xn,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Simulasi Ishihara"}),o.jsx("p",{className:"text-xs text-slate-500",children:"15 Plate Angka & Jalur (Buta Warna)"})]})]}),o.jsxs("button",{onClick:()=>s("HUE_SORT"),className:"w-full p-4 bg-emerald-50 dark:bg-emerald-900/20 border-2 border-emerald-100 dark:border-emerald-800 rounded-2xl hover:border-emerald-500 transition group text-left flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-full text-emerald-600 shadow-sm group-hover:scale-110 transition",children:o.jsx(Yl,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Tes Spektrum Warna"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Farnsworth-Munsell D-15 (Sorting)"})]})]}),o.jsxs("button",{onClick:()=>s("DEPTH"),className:"w-full p-4 bg-sky-50 dark:bg-sky-900/20 border-2 border-sky-100 dark:border-sky-800 rounded-2xl hover:border-sky-500 transition group text-left flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-full text-sky-600 shadow-sm group-hover:scale-110 transition",children:o.jsx(px,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Persepsi Kedalaman"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Estimasi Jarak Objek 3D"})]})]})]})]})]})});if(t==="HUE_SORT")return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center animate-fade-in",children:[o.jsxs("button",{onClick:()=>s("MENU"),className:"absolute top-6 left-6 flex items-center text-slate-500 hover:text-indigo-600 font-bold",children:[o.jsx(ft,{size:20,className:"mr-2"})," Batal"]}),o.jsx(AB,{onFinish:j})]});if(t==="DEPTH")return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center animate-fade-in",children:[o.jsxs("button",{onClick:()=>s("MENU"),className:"absolute top-6 left-6 flex items-center text-slate-500 hover:text-indigo-600 font-bold",children:[o.jsx(ft,{size:20,className:"mr-2"})," Batal"]}),o.jsx(CB,{onFinish:N})]});const R=a[u];return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center transition-colors relative overflow-hidden",children:[T&&o.jsx(wB,{}),o.jsxs("div",{className:`w-full max-w-md transition-all duration-500 ${T?"scale-90 opacity-0":"scale-100 opacity-100"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("button",{onClick:()=>s("MENU"),className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600",children:[o.jsx(ft,{size:18,className:"mr-2"})," Keluar"]}),o.jsxs("span",{className:"text-sm font-bold text-slate-400 bg-slate-200 dark:bg-slate-700 px-3 py-1 rounded-full",children:[u+1," / ",a.length]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-lg border border-slate-100 dark:border-slate-700 text-center select-none relative",children:[o.jsx("div",{className:"mb-6 flex justify-center py-2 relative",children:o.jsxs("div",{className:"relative inline-block",children:[o.jsx(NB,{config:R,onPathGenerated:P=>A(P)}),R.type==="PATH"&&o.jsx(kB,{isActive:!0,onStroke:P=>D(U=>[...U,P]),clearTrigger:G})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-1",children:R.type==="NUMBER"?"Angka berapa yang terlihat?":"Ikuti jalur dengan jari/kursor!"}),o.jsx("div",{className:"flex justify-center gap-2 mt-2",children:o.jsx("span",{className:"text-[10px] bg-slate-100 dark:bg-slate-700 text-slate-500 px-2 py-1 rounded font-bold uppercase",children:R.palette.replace("_"," ")})})]}),R.type==="NUMBER"?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"number",className:"flex-1 p-4 text-center text-2xl font-bold border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none",placeholder:"?",value:y,onChange:P=>_(P.target.value),autoFocus:!0,onKeyDown:P=>P.key==="Enter"&&y&&X()}),o.jsx("button",{onClick:X,disabled:!y,className:"px-6 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 hover:bg-indigo-700 transition",children:"OK"})]}):o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>I(P=>P+1),className:"px-4 py-3 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-300 transition flex items-center justify-center gap-2",children:[o.jsx(e9,{size:18})," Hapus"]}),o.jsxs("button",{onClick:X,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition flex items-center justify-center gap-2",children:[o.jsx(es,{size:18})," Selesai Gambar"]})]}),R.type==="NUMBER"&&o.jsx("div",{className:"mt-4 flex justify-center",children:o.jsxs("button",{onClick:()=>_("0"),className:"text-xs text-slate-400 hover:text-indigo-500 underline flex items-center gap-1",children:[o.jsx(Do,{size:12})," Tidak terlihat apa-apa (Isi 0)"]})})]}),R.type==="PATH"&&o.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-xs text-slate-500 animate-pulse",children:[o.jsx(_k,{size:12})," Tarik garis di atas gambar."]})]})]})},_x=(n,e)=>{if(e===null)return 0;if(n==="REACTION")return e<=150?99:e>=450?1:Math.max(1,Math.min(99,Math.round(100-(e-150)/300*100)));if(n==="AIM")return e<=250?99:e>=800?1:Math.max(1,Math.min(99,Math.round(100-(e-250)/550*100)));if(n==="TYPING")return e>=120?99.9:e<=10?1:Math.max(1,Math.min(99,Math.round((e-10)/110*100)));{let t=50;return n==="SEQUENCE"&&(t=30),n==="CHIMP"&&(t=40),n==="VISUAL"&&(t=30),n==="NUMBER"&&(t=20),n==="VERBAL"&&(t=100),n==="BRIDGE"&&(t=30),n==="MATCH"&&(t=30),Math.max(1,Math.min(99,Math.round(e/t*100)))}},RB=n=>n>=90?"Top Class (Sangat Luar Biasa)":n>=75?"Superior (Di Atas Rata-rata)":n>=50?"Average (Rata-rata)":n>=25?"Below Average (Perlu Latihan)":"Novice (Pemula)",sg=n=>{switch(n){case"REACTION":return"text-amber-500 bg-amber-50 dark:bg-amber-900/20";case"SEQUENCE":return"text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20";case"AIM":return"text-orange-500 bg-orange-50 dark:bg-orange-900/20";case"CHIMP":return"text-teal-500 bg-teal-50 dark:bg-teal-900/20";case"VISUAL":return"text-sky-500 bg-sky-50 dark:bg-sky-900/20";case"NUMBER":return"text-blue-600 bg-blue-50 dark:bg-blue-900/20";case"VERBAL":return"text-purple-500 bg-purple-50 dark:bg-purple-900/20";case"TYPING":return"text-slate-500 bg-slate-50 dark:bg-slate-700/50";case"BRIDGE":return"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20";case"MATCH":return"text-pink-500 bg-pink-50 dark:bg-pink-900/20";case"HANGMAN":return"text-slate-900 bg-slate-100 dark:text-slate-100 dark:bg-slate-700";case"HOTCOLD":return"text-rose-500 bg-rose-50 dark:bg-rose-900/20";default:return"text-slate-500 bg-slate-100"}},Rk=n=>{switch(n){case"REACTION":return o.jsx(Os,{size:20});case"SEQUENCE":return o.jsx(Wi,{size:20});case"AIM":return o.jsx(Lr,{size:20});case"CHIMP":return o.jsx(_s,{size:20});case"VISUAL":return o.jsx(Wi,{size:20});case"NUMBER":return o.jsx(sf,{size:20});case"VERBAL":return o.jsx(Eu,{size:20});case"TYPING":return o.jsx(Us,{size:20});case"BRIDGE":return o.jsx(af,{size:20});case"MATCH":return o.jsx(Kl,{size:20});case"HANGMAN":return o.jsx(Or,{size:20});case"HOTCOLD":return o.jsx(yx,{size:20});default:return o.jsx(Xn,{size:20})}},Mk=n=>{switch(n){case"REACTION":return"Reaction Time";case"SEQUENCE":return"Sequence Memory";case"AIM":return"Aim Trainer";case"CHIMP":return"Chimp Test";case"VISUAL":return"Visual Memory";case"NUMBER":return"Number Memory";case"VERBAL":return"Verbal Memory";case"TYPING":return"Typing Test";case"BRIDGE":return"Bridge Memory";case"MATCH":return"Match Memory";default:return n}},MB=()=>o.jsx("div",{className:"text-amber-500 mb-4 mx-auto w-fit",children:o.jsx(Xn,{size:64})}),DB=({percentile:n,score:e,unit:t,game:s})=>{const u=n/100*300;return o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsxs("div",{className:"relative w-full max-w-[300px] h-[120px]",children:[o.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 300 100",className:"overflow-visible",children:[o.jsx("path",{d:"M0,100 C60,100 100,10 150,10 S240,100 300,100 Z",fill:"url(#grad1)",stroke:"none",className:"opacity-80"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[o.jsx("stop",{offset:"0%",style:{stopColor:"#3b82f6",stopOpacity:.2}}),o.jsx("stop",{offset:"50%",style:{stopColor:"#3b82f6",stopOpacity:.8}}),o.jsx("stop",{offset:"100%",style:{stopColor:"#3b82f6",stopOpacity:.2}})]})}),o.jsx("line",{x1:u,y1:"10",x2:u,y2:"100",stroke:"#ef4444",strokeWidth:"2",strokeDasharray:"4"}),o.jsx("circle",{cx:u,cy:"10",r:"4",fill:"#ef4444"})]}),o.jsxs("div",{className:"absolute top-0 transform -translate-x-1/2 -translate-y-6 bg-slate-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap",style:{left:`${n}%`},children:["You: ",e," ",t]})]}),o.jsxs("div",{className:"w-full flex justify-between text-[10px] text-slate-400 mt-1 max-w-[300px]",children:[o.jsx("span",{children:"Bottom 1%"}),o.jsx("span",{children:"Average"}),o.jsx("span",{children:"Top 1%"})]})]})},jB=({isOpen:n,onClose:e,game:t,bestScore:s})=>{if(!n)return null;const a=_x(t,s),l=RB(a);let u="pts";return(t==="REACTION"||t==="AIM")&&(u="ms"),t==="TYPING"&&(u="wpm"),(t==="SEQUENCE"||t==="NUMBER"||t==="CHIMP"||t==="VISUAL"||t==="BRIDGE"||t==="MATCH")&&(u="lvl"),o.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:e,children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700",onClick:h=>h.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(No,{className:"text-indigo-500"})," Statistik Anda"]}),o.jsx("button",{onClick:()=>{Z.play("back"),e()},children:o.jsx(vx,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),s!==null?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-sm text-slate-500 uppercase font-bold mb-1",children:"Skor Terbaik"}),o.jsxs("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:[s," ",o.jsx("span",{className:"text-lg font-medium text-slate-400",children:u})]}),o.jsxs("div",{className:"inline-block mt-2 px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-full text-xs font-bold",children:["Lebih baik dari ",a,"% orang"]})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-600",children:[o.jsx(DB,{percentile:a,score:s,unit:u,game:t}),o.jsx("p",{className:"text-center text-xs text-slate-500 mt-4 font-medium",children:l})]})]}):o.jsx("div",{className:"text-center py-8 text-slate-500",children:"Belum ada data. Mainkan game ini untuk melihat statistik Anda."})]})})},PB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState("WAITING"),[a,l]=B.useState(0),[u,h]=B.useState([]),[m,f]=B.useState(0),y=B.useRef(null);B.useEffect(()=>()=>{y.current&&clearTimeout(y.current)},[]);const _=()=>{s("READY");const C=Math.floor(Math.random()*3e3)+2e3;y.current=window.setTimeout(()=>{l(Date.now()),s("GO")},C)},T=()=>{if(t==="WAITING")_();else if(t==="READY")y.current&&clearTimeout(y.current),s("TOO_SOON");else if(t==="GO"){const C=Date.now()-a;f(C);const D=[...u,C];h(D),D.length>=5?(s("FINAL_SCORE"),Z.play("finish")):(s("RESULT"),Z.play("success"))}else(t==="RESULT"||t==="TOO_SOON")&&s("WAITING")},E=u.length>0?Math.round(u.reduce((C,D)=>C+D,0)/u.length):0;let M,A="bg-slate-900";return t==="WAITING"?(M=o.jsxs(o.Fragment,{children:[o.jsx(Os,{size:80,className:"mx-auto mb-6 text-amber-400"}),o.jsx("h2",{className:"text-4xl font-bold text-white mb-2",children:"Reaction Time"}),o.jsxs("h3",{className:"text-xl text-white/60 mb-8",children:["Percobaan ",u.length+1," dari 5"]}),o.jsx("p",{className:"text-white/80",children:"Klik untuk mulai."})]}),A="bg-slate-800"):t==="READY"?(M=o.jsx("h2",{className:"text-5xl font-bold text-white tracking-widest",children:"..."}),A="bg-rose-600"):t==="GO"?(M=o.jsx("h2",{className:"text-6xl font-black text-white",children:"KLIK!"}),A="bg-emerald-500"):t==="RESULT"?(M=o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-2xl text-white/80 mb-2",children:[m," ms"]}),o.jsx("p",{className:"text-white/60",children:"Klik untuk lanjut."})]}),A="bg-indigo-600"):t==="FINAL_SCORE"?(M=o.jsxs(o.Fragment,{children:[o.jsx(Xn,{size:64,className:"mx-auto mb-4 text-emerald-400"}),o.jsx("div",{className:"text-xl text-white/80 mb-2",children:"Rata-rata"}),o.jsxs("h2",{className:"text-7xl font-black text-white mb-8",children:[E," ms"]}),o.jsxs("div",{className:"flex flex-col gap-3 w-64 mx-auto",children:[o.jsx("button",{className:"px-6 py-3 bg-white text-slate-900 rounded-xl font-bold",onClick:()=>n(E),children:"Simpan Skor"}),o.jsx("button",{className:"px-6 py-3 border-2 border-white/30 text-white rounded-xl font-bold",onClick:()=>{h([]),s("WAITING")},children:"Coba Lagi"})]})]}),A="bg-slate-800"):t==="TOO_SOON"&&(M=o.jsxs(o.Fragment,{children:[o.jsx(MB,{}),o.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Terlalu Cepat!"}),o.jsx("p",{className:"text-white/80",children:"Klik untuk ulang."})]}),A="bg-slate-800"),o.jsxs("div",{className:`fixed inset-0 z-50 flex flex-col items-center justify-center cursor-pointer select-none ${A==="bg-slate-900"||A==="bg-slate-800"?"bg-slate-900/95 backdrop-blur-sm":A}`,onMouseDown:t!=="FINAL_SCORE"?T:void 0,children:[o.jsx("button",{onClick:C=>{C.stopPropagation(),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),M]})},LB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState([]),[a,l]=B.useState([]),[u,h]=B.useState(1),[m,f]=B.useState("START"),[y,_]=B.useState(null),T=async(M,A)=>{f("WATCHING"),l([]);const C=Math.floor(Math.random()*9),D=[...A,C];s(D),await new Promise(G=>setTimeout(G,800));for(let G=0;G<D.length;G++)_(D[G]),Z.play("click"),await new Promise(I=>setTimeout(I,600)),_(null),await new Promise(I=>setTimeout(I,200));f("PLAYING")},E=async M=>{if(m!=="PLAYING")return;_(M),Z.play("tap"),setTimeout(()=>_(null),200);const A=[...a,M];if(l(A),A[A.length-1]!==t[A.length-1]){f("GAMEOVER"),Z.play("error");return}A.length===t.length&&(f("WATCHING"),Z.play("success"),await new Promise(C=>setTimeout(C,800)),h(C=>C+1),T(u+1,t))};return m==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Wi,{size:80,className:"mx-auto mb-6 text-indigo-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Sequence Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Ingat urutan kotak yang menyala. Pola akan bertambah satu langkah setiap level."}),o.jsx("button",{onClick:()=>T(1,[]),className:"px-8 py-3 bg-indigo-500 text-white rounded-xl font-bold text-lg hover:bg-indigo-600 transition",children:"Mulai"})]})]}):m==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(Wi,{size:64,className:"mx-auto mb-6 text-rose-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:u})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{h(1),T(1,[])},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(Math.max(1,u-1)),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["Level ",u]}),o.jsx("p",{className:"text-slate-400 text-sm animate-pulse h-6",children:m==="WATCHING"?"Lihat polanya...":"Giliranmu!"})]}),o.jsx("div",{className:"grid grid-cols-3 gap-3 p-4",children:Array.from({length:9}).map((M,A)=>o.jsx("div",{onClick:()=>E(A),className:`w-20 h-20 sm:w-28 sm:h-28 rounded-xl transition-all duration-100 cursor-pointer border-4 border-slate-800 ${y===A?"bg-white shadow-[0_0_30px_rgba(255,255,255,0.8)] scale-95 border-white":"bg-slate-700 hover:bg-slate-600"}`},A))})]})},UB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState("IDLE"),[a,l]=B.useState(30),[u,h]=B.useState({top:"50%",left:"50%"}),[m,f]=B.useState([]),y=B.useRef(null),[_,T]=B.useState(0),[E,M]=B.useState(0),[A,C]=B.useState(0),[D,G]=B.useState(null),I=()=>{if(!y.current)return;const R=y.current.getBoundingClientRect(),P=96,U=50,F=R.width-P-U,O=R.height-P-U,Ae=Math.max(U,Math.random()*F),Le=Math.max(U,Math.random()*O);h({top:`${Le}px`,left:`${Ae}px`})},q=()=>{s("PLAYING"),l(30),f([]),T(0),M(0),I()};B.useEffect(()=>{if(t==="PLAYING"&&E>0){const R=setInterval(()=>{T(Date.now()-E)},50);return G(R),()=>clearInterval(R)}},[t,E]);const X=R=>{if(R.stopPropagation(),t!=="PLAYING")return;const P=Date.now();if(E===0){M(P),C(P),l(F=>F-1),I(),Z.play("click");return}const U=P-A;f(F=>[...F,U]),C(P),Z.play("click"),a<=1?(clearInterval(D),s("FINISHED"),Z.play("finish")):(l(F=>F-1),I())},J=()=>{t==="PLAYING"&&E>0&&Z.play("error")},j=m.length>0?Math.round(m.reduce((R,P)=>R+P,0)/m.length):0,N=m.length>0?Math.round(m.reduce((R,P)=>R+P,0)/m.length):0;return o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center select-none",onMouseDown:J,children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),t==="IDLE"&&o.jsxs("div",{className:"text-center text-white cursor-default",onClick:R=>R.stopPropagation(),children:[o.jsx(Lr,{size:80,className:"mx-auto mb-6 text-orange-500"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Aim Trainer"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Klik 30 target secepat mungkin. Waktu dimulai saat target pertama diklik."}),o.jsx("button",{onClick:q,className:"px-8 py-3 bg-orange-500 text-white rounded-xl font-bold text-lg hover:bg-orange-600 transition",children:"Mulai"})]}),t==="PLAYING"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"absolute top-8 flex gap-8 items-center pointer-events-none z-10 select-none",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Remaining"}),o.jsx("div",{className:"text-white font-mono text-3xl font-bold",children:a})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Time"}),o.jsxs("div",{className:"text-white font-mono text-3xl font-bold",children:[(_/1e3).toFixed(1),"s"]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Avg"}),o.jsxs("div",{className:"text-orange-400 font-mono text-3xl font-bold",children:[N," ms"]})]})]}),o.jsx("div",{ref:y,className:"w-full h-full relative max-w-5xl max-h-[80vh] cursor-crosshair",children:o.jsxs("div",{onMouseDown:X,className:"absolute w-24 h-24 rounded-full bg-orange-500 border-4 border-white shadow-[0_0_15px_rgba(249,115,22,0.6)] cursor-pointer flex items-center justify-center hover:scale-95 transition-transform duration-75",style:{top:u.top,left:u.left},children:[o.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),o.jsx("div",{className:"absolute w-12 h-12 border-2 border-white/50 rounded-full"}),o.jsx("div",{className:"absolute w-20 h-20 border border-white/20 rounded-full"})]})})]}),t==="FINISHED"&&o.jsxs("div",{className:"text-center text-white cursor-default",onClick:R=>R.stopPropagation(),children:[o.jsx(Lr,{size:64,className:"mx-auto mb-4 text-orange-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Selesai!"}),o.jsx("p",{className:"text-white/60 mb-6",children:"Rata-rata waktu per target"}),o.jsxs("h1",{className:"text-7xl font-black mb-8",children:[j," ms"]}),o.jsxs("div",{className:"text-white/40 mb-8 font-mono",children:["Total Waktu: ",(_/1e3).toFixed(2),"s"]}),o.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[o.jsx("button",{onClick:()=>n(j),className:"w-full py-3 bg-white text-slate-900 rounded-xl font-bold",children:"Simpan Skor"}),o.jsx("button",{onClick:q,className:"w-full py-3 border border-white/20 rounded-xl font-bold",children:"Coba Lagi"})]})]})]})},OB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState(4),[a,l]=B.useState([]),[u,h]=B.useState("IDLE"),[m,f]=B.useState(1),[y,_]=B.useState(!1),T=M=>{const C=Array.from({length:40},(G,I)=>I).sort(()=>.5-Math.random()),D=Array.from({length:M},(G,I)=>({id:I+1,pos:C[I],visible:!0}));l(D),f(1),_(!1),h("PLAYING")},E=M=>{u==="PLAYING"&&(M===m?(Z.play("click"),M===1&&_(!0),l(A=>A.map(C=>C.id===M?{...C,visible:!1}:C)),M===a.length?(Z.play("success"),setTimeout(()=>{s(A=>A+1),T(t+1)},500)):f(A=>A+1)):(Z.play("error"),h("GAMEOVER")))};return o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center select-none",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),u==="IDLE"&&o.jsxs("div",{className:"text-center text-white max-w-md p-6",children:[o.jsx(_s,{size:80,className:"mx-auto mb-6 text-teal-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Chimp Test"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Klik angka secara berurutan. Setelah klik angka 1, sisanya akan tertutup. Uji ingatan visualmu!"}),o.jsx("button",{onClick:()=>T(4),className:"px-8 py-3 bg-teal-500 text-white rounded-xl font-bold text-lg hover:bg-teal-600 transition",children:"Mulai Tes"})]}),u==="PLAYING"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-white mb-4 font-bold text-lg",children:["Level ",t-3]}),o.jsx("div",{className:"grid grid-cols-8 gap-2 md:gap-4 p-4 max-w-3xl",children:Array.from({length:40}).map((M,A)=>{const C=a.find(D=>D.pos===A);return!C||!C.visible?o.jsx("div",{className:"w-10 h-10 md:w-16 md:h-16"},A):o.jsx("button",{onMouseDown:()=>E(C.id),className:`w-10 h-10 md:w-16 md:h-16 rounded-lg border-2 font-bold flex items-center justify-center transition-transform active:scale-95 text-xl md:text-3xl ${y&&C.id>1?"bg-indigo-100 border-indigo-200 text-transparent hover:bg-indigo-200":"bg-indigo-500 border-indigo-400 text-white hover:bg-indigo-400 shadow-lg"}`,children:y&&C.id>1?"":C.id},A)})})]}),u==="GAMEOVER"&&o.jsxs("div",{className:"text-center text-white",children:[o.jsx(_s,{size:64,className:"mx-auto mb-4 text-rose-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-white/60 mb-6",children:["Skor: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t-1})]}),o.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[o.jsx("button",{onClick:()=>{T(4),s(4)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold hover:bg-indigo-700",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(Math.max(0,t-1)),className:"w-full py-3 border border-white/20 rounded-xl font-bold hover:bg-white/10",children:"Simpan Skor"})]})]})]})},VB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState(1),[a,l]=B.useState(3),[u,h]=B.useState(3),[m,f]=B.useState([]),[y,_]=B.useState([]),[T,E]=B.useState([]),[M,A]=B.useState("START"),C=G=>{let I=3;G>2&&(I=4),G>5&&(I=5),G>10&&(I=6),G>20&&(I=7),h(I);const q=Math.min(Math.floor(I*I/2),G+2),X=[];for(;X.length<q;){const J=Math.floor(Math.random()*(I*I));X.includes(J)||X.push(J)}f(X),_([]),E([]),A("SHOWING"),setTimeout(()=>A("PLAYING"),1e3+G*100)},D=G=>{if(M==="PLAYING"&&!(y.includes(G)||T.includes(G)))if(m.includes(G)){Z.play("tap");const I=[...y,G];_(I),I.length===m.length&&(Z.play("success"),setTimeout(()=>{s(q=>q+1),C(t+1)},500))}else{Z.play("error");const I=a-1;l(I),E(q=>[...q,G]),I<=0&&setTimeout(()=>A("GAMEOVER"),500)}};return M==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Wi,{size:80,className:"mx-auto mb-6 text-sky-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Visual Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!"}),o.jsx("button",{onClick:()=>{s(1),l(3),C(1)},className:"px-8 py-3 bg-sky-500 text-white rounded-xl font-bold text-lg hover:bg-sky-600 transition",children:"Mulai"})]})]}):M==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full border border-slate-700",children:[o.jsx(Wi,{size:64,className:"mx-auto mb-6 text-sky-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{s(1),l(3),C(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center mb-8 flex flex-col items-center gap-2",children:[o.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((G,I)=>o.jsx(zf,{size:24,className:I<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},I))})]}),o.jsx("div",{className:"grid gap-2 bg-slate-800 p-4 rounded-xl shadow-2xl transition-all duration-300",style:{gridTemplateColumns:`repeat(${u}, 1fr)`,width:"min(90vw, 400px)",aspectRatio:"1/1"},children:Array.from({length:u*u}).map((G,I)=>{const q=m.includes(I),X=y.includes(I),J=T.includes(I);let j="bg-slate-700 hover:bg-slate-600";return M==="SHOWING"&&q&&(j="bg-white shadow-[0_0_15px_white] scale-95"),M==="PLAYING"&&X&&(j="bg-white"),M==="PLAYING"&&J&&(j="bg-slate-900 border-2 border-rose-900"),o.jsx("div",{onMouseDown:()=>D(I),className:`rounded-lg transition-all duration-200 cursor-pointer ${j}`},I)})})]})},BB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState(1),[a,l]=B.useState(""),[u,h]=B.useState(""),[m,f]=B.useState("START"),[y,_]=B.useState(0),[T,E]=B.useState(100),M=G=>{let I="";for(let q=0;q<G;q++)I+=Math.floor(Math.random()*10);return I},A=()=>{s(1),C(1)},C=G=>{const I=M(G);l(I),f("SHOWING"),E(100);const q=1e3+G*500;_(q),setTimeout(()=>{E(0)},50),setTimeout(()=>{f("INPUT")},q)},D=G=>{G==null||G.preventDefault(),u===a?(Z.play("success"),f("RESULT"),setTimeout(()=>{s(I=>I+1),h(""),C(t+1)},1e3)):(Z.play("error"),f("GAMEOVER"))};return m==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(sf,{size:80,className:"mx-auto mb-6 text-blue-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Number Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Ingat angka yang muncul, lalu ketik ulang. Angka akan bertambah panjang setiap level."}),o.jsx("button",{onClick:A,className:"px-8 py-3 bg-blue-500 text-white rounded-xl font-bold text-lg hover:bg-blue-600 transition",children:"Mulai"})]})]}):m==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(sf,{size:64,className:"mx-auto mb-6 text-blue-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Salah!"}),o.jsxs("div",{className:"text-left bg-slate-900 p-4 rounded-xl mb-6 font-mono text-sm break-all",children:[o.jsx("div",{className:"text-slate-400 mb-1",children:"Angka:"}),o.jsx("div",{className:"text-white font-bold mb-2 tracking-widest",children:a}),o.jsx("div",{className:"text-slate-400 mb-1",children:"Jawab:"}),o.jsx("div",{className:"text-rose-500 line-through tracking-widest",children:u})]}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:A,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center select-none",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),m==="SHOWING"&&o.jsxs("div",{className:"text-center animate-fade-in-up w-full px-8",children:[o.jsx("h2",{className:"text-6xl md:text-8xl font-black text-white font-mono tracking-widest",children:a}),o.jsx("div",{className:"w-full max-w-md h-2 bg-slate-800 rounded-full mt-8 mx-auto overflow-hidden",children:o.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${T}%`,transitionDuration:`${y}ms`,opacity:T>0?1:.2}})})]}),m==="INPUT"&&o.jsxs("div",{className:"text-center w-full max-w-md px-4",children:[o.jsx("h3",{className:"text-xl text-white mb-4",children:"Apa angkanya?"}),o.jsxs("form",{onSubmit:D,children:[o.jsx("input",{type:"number",autoFocus:!0,value:u,onChange:G=>h(G.target.value),className:"w-full bg-slate-800 text-white text-3xl font-mono text-center py-4 rounded-xl border-2 border-slate-700 focus:border-blue-500 focus:outline-none mb-4"}),o.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition",children:"Submit"})]})]}),m==="RESULT"&&o.jsxs("div",{className:"text-center",children:[o.jsx(es,{size:80,className:"text-emerald-500 mx-auto mb-4 animate-bounce-slow"}),o.jsx("h2",{className:"text-2xl text-white font-bold",children:"Benar!"})]})]})},GB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState(0),[a,l]=B.useState(3),[u,h]=B.useState(""),[m,f]=B.useState(new Set),[y,_]=B.useState("START"),T=["RUMAH","POHON","MEJA","BUKU","JALAN","AIR","API","LANGIT","BUMI","LAUT","GUNUNG","KOTA","DESA","MOBIL","SEPEDA","KAPAL","IKAN","BURUNG","KUCING","ANJING","MERAH","BIRU","HIJAU","KUNING","PUTIH","HITAM","BESAR","KECIL","PANJANG","PENDEK","KERJA","MAIN","TIDUR","MAKAN","MINUM","LARI","DUDUK","BERDIRI","CINTA","BENCI","SENANG","SEDIH","MARAH","TAKUT","BERANI","KUAT","LEMAH","PINTAR","BODOH","CEPAT","AWAN","BINTANG","BULAN","CAHAYA","GELAP","TERANG","PAGI","SIANG","SORE","MALAM","WAKTU","JAM","MENIT","DETIK","TAHUN","BULAN","MINGGU","HARI"],E=()=>{const C=m.size>0&&Math.random()<.4;let D="";if(C){const G=Array.from(m);D=G[Math.floor(Math.random()*G.length)]}else{let G=0;do D=T[Math.floor(Math.random()*T.length)],G++;while(m.has(D)&&G<100)}h(D)},M=C=>{const D=m.has(u);if(C==="SEEN"&&D||C==="NEW"&&!D)s(I=>I+1),C==="NEW"&&f(I=>new Set(I).add(u)),Z.play("click"),E();else{const I=a-1;l(I),Z.play("error"),C==="NEW"&&f(q=>new Set(q).add(u)),I<=0?_("GAMEOVER"):E()}},A=()=>{s(0),l(3),f(new Set),_("PLAYING"),E()};return y==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Eu,{size:80,className:"mx-auto mb-6 text-purple-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Verbal Memory"}),o.jsxs("p",{className:"text-white/60 mb-8",children:["Anda akan melihat kata-kata satu per satu. Jika kata tersebut belum pernah muncul, klik ",o.jsx("strong",{children:"BARU"}),". Jika sudah, klik ",o.jsx("strong",{children:"SUDAH"}),"."]}),o.jsx("button",{onClick:A,className:"px-8 py-3 bg-purple-500 text-white rounded-xl font-bold text-lg hover:bg-purple-600 transition",children:"Mulai"})]})]}):y==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(Eu,{size:64,className:"mx-auto mb-6 text-purple-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Verbal Memory"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Skor: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})," kata"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:A,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center select-none",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"flex gap-8 mb-12 text-lg font-bold text-white items-center",children:[o.jsxs("div",{children:["Skor: ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((C,D)=>o.jsx(zf,{size:24,className:D<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},D))})]}),o.jsx("div",{className:"text-5xl md:text-7xl font-black text-white mb-12 animate-fade-in-up transition-all",children:u}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>M("SEEN"),className:"px-8 py-4 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-bold text-xl transition w-40",children:"SUDAH"}),o.jsx("button",{onClick:()=>M("NEW"),className:"px-8 py-4 bg-purple-500 hover:bg-purple-600 text-white rounded-xl font-bold text-xl transition w-40",children:"BARU"})]})]})},FB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState(""),[a,l]=B.useState(""),[u,h]=B.useState(null),[m,f]=B.useState(0),[y,_]=B.useState(0),[T,E]=B.useState("START");B.useEffect(()=>{const C=e_,D=C.length>0?String(C[Math.floor(Math.random()*C.length)]):"";s(D)},[]),B.useEffect(()=>{let C;return T==="PLAYING"&&u&&(C=setInterval(()=>{const G=(Date.now()-u)/1e3;_(Math.floor(G));const I=a.length,q=G/60;q>0&&f(Math.round(I/5/q))},1e3)),()=>clearInterval(C)},[T,u,a]);const M=C=>{const D=C.target.value;if(T==="START"&&(h(Date.now()),E("PLAYING")),l(D),D===t){const G=(Date.now()-(u||Date.now()))/6e4,I=Math.round(t.length/5/G);f(I),E("FINISHED"),Z.play("finish")}else D.length%5===0&&Z.play("tap")},A=()=>{const C=e_,D=C.length>0?String(C[Math.floor(Math.random()*C.length)]):"";s(D),l(""),h(null),f(0),_(0),E("START")};return T==="FINISHED"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(Us,{size:64,className:"mx-auto mb-6 text-slate-400"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Typing Speed"}),o.jsxs("h1",{className:"text-6xl font-black text-emerald-400 mb-6",children:[m," ",o.jsx("span",{className:"text-xl text-white/50",children:"WPM"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:A,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(m),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center p-6",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"flex gap-12 mb-8 text-white font-mono text-xl",children:[o.jsxs("div",{children:["WPM: ",o.jsx("span",{className:"font-bold text-emerald-400",children:m})]}),o.jsxs("div",{children:["Time: ",o.jsxs("span",{className:"font-bold text-emerald-400",children:[y,"s"]})]})]}),o.jsxs("div",{className:"w-full max-w-2xl bg-slate-800 p-6 rounded-2xl shadow-xl",children:[o.jsx("div",{className:"mb-6 text-lg text-slate-400 leading-relaxed select-none",children:t.split("").map((C,D)=>{let G="text-slate-500";return D<a.length&&(G=a[D]===C?"text-white":"text-rose-500 bg-rose-500/20"),o.jsx("span",{className:G,children:C},D)})}),o.jsx("textarea",{value:a,onChange:M,className:"w-full bg-slate-900 text-white p-4 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none h-32 resize-none font-mono",placeholder:"Mulai ketik di sini...",autoFocus:!0})]})]})},zB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState(1),[a,l]=B.useState(3),[u,h]=B.useState(5),[m,f]=B.useState(4),[y,_]=B.useState([]),[T,E]=B.useState("START"),[M,A]=B.useState(0),[C,D]=B.useState(100),[G,I]=B.useState(1500),q=j=>{const R=4+Math.floor(j/2);h(5),f(R);const P=[];let U=R-1,F=Math.floor(5/2);for(P.push({row:U,col:F});U>0;){U--;const O=[F];F>0&&O.push(F-1),F<4&&O.push(F+1),F=O[Math.floor(Math.random()*O.length)],P.push({row:U,col:F})}_(P)},X=j=>{q(j),E("SHOWING"),D(100);const N=1500;I(N),setTimeout(()=>D(0),50),setTimeout(()=>{E("PLAYING"),A(0)},N)},J=(j,N)=>{if(T!=="PLAYING")return;const R=y[M];if(j===R.row&&N===R.col){Z.play("click");const P=M+1;A(P),P===y.length&&(Z.play("success"),setTimeout(()=>{s(U=>U+1),X(t+1)},500))}else Z.play("error"),l(P=>P-1),a<=1?E("GAMEOVER"):(E("SHOWING"),D(100),setTimeout(()=>D(0),50),setTimeout(()=>{E("PLAYING"),A(0)},G))};return T==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:()=>{Z.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(af,{size:80,className:"mx-auto mb-6 text-emerald-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Bridge Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang."}),o.jsx("button",{onClick:()=>{Z.play("click"),s(1),l(3),X(1)},className:"px-8 py-3 bg-emerald-500 text-white rounded-xl font-bold text-lg hover:bg-emerald-600 transition",children:"Mulai"})]})]}):T==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(af,{size:64,className:"mx-auto mb-6 text-emerald-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{Z.play("click"),s(1),l(3),X(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>{Z.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center overflow-hidden",children:[o.jsx("button",{onClick:()=>{Z.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center mb-4 flex flex-col items-center gap-2",children:[o.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((j,N)=>o.jsx(zf,{size:24,className:N<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},N))})]}),o.jsx("div",{className:`w-full max-w-xs h-2 bg-slate-800 rounded-full mb-6 overflow-hidden transition-opacity duration-300 ${T==="SHOWING"?"opacity-100":"opacity-0"}`,children:o.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${C}%`,transitionDuration:`${G}ms`}})}),o.jsx("div",{className:"flex-1 w-full max-w-md flex items-center justify-center p-4",children:o.jsx("div",{className:"grid gap-1.5 w-full h-full max-h-[70vh]",style:{gridTemplateColumns:`repeat(${u}, 1fr)`,gridTemplateRows:`repeat(${m}, 1fr)`},children:Array.from({length:m}).map((j,N)=>Array.from({length:u}).map((R,P)=>{const U=y.findIndex(Le=>Le.row===N&&Le.col===P),F=U!==-1,O=F&&U<M;let Ae="bg-slate-700";return T==="SHOWING"&&F?Ae="bg-emerald-400":T==="PLAYING"&&(O?Ae="bg-emerald-600":F&&U===M&&(Ae="bg-slate-700 active:bg-emerald-400")),o.jsx("div",{onMouseDown:()=>J(N,P),className:`w-full h-full rounded-md transition-colors duration-200 cursor-pointer ${Ae} hover:opacity-90`},`${N}-${P}`)}))})}),o.jsxs("div",{className:"mt-2 text-emerald-400 animate-bounce flex flex-col items-center",children:[o.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-500 mb-1",children:"Start Here"}),o.jsx(m8,{size:32})]})]})},HB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState(1),[a,l]=B.useState(5),[u,h]=B.useState([]),[m,f]=B.useState([]),[y,_]=B.useState("START"),[T,E]=B.useState(!1),[M,A]=B.useState(3),C=["","","","","","","","","","","","","","","",""],D=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-cyan-500","bg-lime-500","bg-rose-500","bg-emerald-500","bg-fuchsia-500","bg-violet-500","bg-sky-500"],G=X=>{const J=X+2,j=J*2,N=Math.ceil(Math.sqrt(j));A(N);const R=[...C].sort(()=>Math.random()-.5).slice(0,J);let P=[];for(let U=0;U<J;U++){const F=R[U],O=D[U%D.length];P.push({id:U*2,icon:F,flipped:!0,matched:!1,color:O}),P.push({id:U*2+1,icon:F,flipped:!0,matched:!1,color:O})}P=P.sort(()=>Math.random()-.5).map((U,F)=>({...U,id:F})),h(P),_("PREVIEW")},I=()=>{Z.play("click"),h(X=>X.map(J=>({...J,flipped:!1}))),_("PLAYING")},q=X=>{if(y!=="PLAYING"||T)return;const J=u.find(R=>R.id===X);if(!J||J.flipped||J.matched)return;Z.play("click");const j=u.map(R=>R.id===X?{...R,flipped:!0}:R);h(j);const N=[...m,X];if(f(N),N.length===2){E(!0);const R=j.find(U=>U.id===N[0]),P=j.find(U=>U.id===N[1]);R&&P&&R.icon===P.icon?(Z.play("success"),setTimeout(()=>{h(U=>U.map(F=>N.includes(F.id)?{...F,matched:!0}:F)),f([]),E(!1),j.filter(U=>!U.matched&&!N.includes(U.id)).length===0&&setTimeout(()=>{s(U=>U+1),G(t+1)},500)},500)):setTimeout(()=>{Z.play("error"),h(U=>U.map(F=>N.includes(F.id)?{...F,flipped:!1}:F)),f([]),E(!1),l(U=>{const F=U-1;return F<=0&&_("GAMEOVER"),F})},1e3)}};return y==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:()=>{Z.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Kl,{size:80,className:"mx-auto mb-6 text-pink-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Match Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan posisi pasangan simbol sebelum kartu ditutup. Cocokkan semua pasangan!"}),o.jsx("button",{onClick:()=>{Z.play("click"),s(1),l(5),G(1)},className:"px-8 py-3 bg-pink-500 text-white rounded-xl font-bold text-lg hover:bg-pink-600 transition",children:"Mulai"})]})]}):y==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(Kl,{size:64,className:"mx-auto mb-6 text-pink-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{Z.play("click"),s(1),l(5),G(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>{Z.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center",children:[o.jsx("button",{onClick:()=>{Z.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center mb-6 flex flex-col items-center gap-2",children:[o.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((X,J)=>o.jsx(zf,{size:24,className:J<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},J))}),y==="PREVIEW"&&o.jsx("button",{onClick:I,className:"mt-4 px-8 py-2 bg-emerald-500 text-white font-bold rounded-full hover:bg-emerald-600 transition shadow-lg animate-pulse",children:"SAYA SIAP!"})]}),o.jsx("div",{className:"grid gap-3 justify-center max-w-2xl p-4",style:{gridTemplateColumns:`repeat(${M}, minmax(0, 1fr))`},children:u.map(X=>o.jsx("div",{onClick:()=>q(X.id),className:`w-16 h-16 sm:w-20 sm:h-20 rounded-xl flex items-center justify-center text-3xl font-bold cursor-pointer transition-all duration-300 transform ${X.flipped||X.matched?`${X.color} text-white rotate-y-180`:"bg-slate-700 hover:bg-slate-600"}`,children:X.flipped||X.matched?X.icon:""},X.id))})]})},qB=({username:n,history:e})=>{const[t,s]=B.useState({}),[a,l]=B.useState(!0),[u,h]=B.useState(!0),m=["REACTION","SEQUENCE","AIM","CHIMP","VISUAL","NUMBER","VERBAL","TYPING","BRIDGE","MATCH"];B.useEffect(()=>{(async()=>{if(!u)return;l(!0);const _={};await Promise.all(m.map(async T=>{try{const E=await HV(T);_[T]=E}catch{console.error("Failed to load leaderboard for",T),_[T]=[]}})),s(_),l(!1)})()},[u]);const f=y=>{const _=e.filter(T=>T.category!=="BENCHMARK"||!T.details?!1:T.details.game===y);return y==="REACTION"||y==="AIM"?_.sort((T,E)=>T.score-E.score):_.sort((T,E)=>E.score-T.score),_.slice(0,5).map(T=>{const E=T.details;return{name:n,score:T.score,unit:(E==null?void 0:E.unit)||""}})};return o.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(Es,{className:"text-amber-500"})," Leaderboard"]}),o.jsxs("div",{className:"bg-slate-200 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:[o.jsxs("button",{onClick:()=>h(!0),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:[o.jsx(x9,{size:14,className:"inline mr-1"})," Global"]}),o.jsxs("button",{onClick:()=>h(!1),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,children:[o.jsx(Or,{size:14,className:"inline mr-1"})," Personal"]})]})]}),a&&u?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[o.jsx(Pn,{size:40,className:"animate-spin mb-4 text-indigo-500"}),o.jsx("p",{children:"Memuat Data Global Rank..."})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:m.map(y=>{let _=[];u?_=t[y]||[]:_=f(y);const T=sg(y);return o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[o.jsxs("div",{className:`p-4 ${T} bg-opacity-20 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3`,children:[o.jsx("div",{className:"p-2 rounded-lg bg-white/50 text-slate-800",children:Rk(y)}),o.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:Mk(y)})]}),o.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:_.length>0?_.map((E,M)=>o.jsxs("div",{className:`p-3 flex justify-between items-center text-sm ${M===0?"bg-indigo-50 dark:bg-indigo-900/20":""}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`font-bold w-4 text-center ${M===0?"text-amber-500":M===1?"text-slate-400":M===2?"text-orange-700":"text-slate-500"}`,children:M+1}),o.jsxs("span",{className:`font-medium truncate max-w-[120px] ${E.username===n||E.name===n?"text-indigo-600 dark:text-indigo-400 font-bold":"text-slate-700 dark:text-slate-300"}`,children:[E.name||E.username," ",E.username===n||E.name===n?"(You)":""]})]}),o.jsxs("span",{className:"font-mono font-bold text-slate-800 dark:text-white",children:[E.score,o.jsx("span",{className:"text-xs text-slate-400 ml-1",children:E.unit})]})]},M)):o.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"Belum ada data"})})]},y)})})]})},KB=({history:n})=>{const e=n.filter(t=>t.category==="BENCHMARK").sort((t,s)=>new Date(s.date).getTime()-new Date(t.date).getTime()).slice(0,20);return e.length===0?o.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 rounded-3xl p-8 text-center border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"inline-block p-4 bg-slate-100 dark:bg-slate-700 rounded-full mb-4",children:o.jsx(Uu,{size:32,className:"text-slate-400"})}),o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Belum ada aktivitas"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Mainkan tes untuk melihat riwayat Anda di sini."})]}):o.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[o.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[o.jsx(Xn,{className:"text-indigo-500"})," Recent Activity"]}),o.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{className:"bg-white dark:bg-slate-800 border-b border-slate-100 dark:border-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Test"}),o.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider text-right",children:"Score"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:e.map(t=>{const s=t.details;if(!s)return null;const a=s.game,l=t.score,u=s.unit||"",h=_x(a,l);return o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors group",children:[o.jsx("td",{className:"p-5",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`p-2 rounded-xl ${sg(a)}`,children:Rk(a)}),o.jsx("span",{className:`font-bold text-base ${sg(a).split(" ")[0]}`,children:Mk(a)})]})}),o.jsx("td",{className:"p-5",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),o.jsx("span",{className:"text-xs text-slate-400",children:new Date(t.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})}),o.jsx("td",{className:"p-5 text-right",children:o.jsxs("div",{className:"flex flex-col items-end",children:[o.jsxs("span",{className:"text-xl font-black text-slate-800 dark:text-white font-mono",children:[l,u]}),o.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${h>=50?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400"}`,children:["Top ",h,"%"]})]})})]},t.id)})})]})})})]})},$B=({onFinish:n,onExit:e})=>{const t=["ALGORITHM","DATABASE","INTERFACE","VARIABLE","FUNCTION","COMPONENT","FRAMEWORK","BROWSER","SERVER","PYTHON","JAVASCRIPT","REACT","TYPESCRIPT","COMPILER","DEBUGGING"],[s,a]=B.useState(""),[l,u]=B.useState(new Set),[h,m]=B.useState(0),[f,y]=B.useState("PLAYING"),[_,T]=B.useState(0);B.useEffect(()=>{a(t[Math.floor(Math.random()*t.length)])},[]);const E=A=>{if(f!=="PLAYING"||l.has(A))return;const C=new Set(l);if(C.add(A),u(C),s.includes(A)){if(s.split("").every(G=>C.has(G))){y("WON");const G=s.length*10-h*5;T(G),setTimeout(()=>n(G),2e3)}}else{const D=h+1;m(D),D>=6&&(y("LOST"),setTimeout(()=>n(_),2e3))}},M="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");return o.jsxs("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center text-white p-4",children:[o.jsxs("div",{className:"mb-8 relative w-48 h-48 border-b-4 border-white",children:[o.jsx("div",{className:"absolute bottom-0 left-1/4 w-1 h-48 bg-white"}),o.jsx("div",{className:"absolute top-0 left-1/4 w-24 h-1 bg-white"}),o.jsx("div",{className:"absolute top-0 left-[calc(25%+6rem)] w-1 h-8 bg-white"}),h>=1&&o.jsx("div",{className:"absolute top-8 left-[calc(25%+5rem)] w-8 h-8 rounded-full border-2 border-white"})," ",h>=2&&o.jsx("div",{className:"absolute top-16 left-[calc(25%+6rem)] w-1 h-12 bg-white -translate-x-1/2"})," ",h>=3&&o.jsx("div",{className:"absolute top-20 left-[calc(25%+6rem)] w-8 h-1 bg-white -translate-x-full rotate-[-30deg] origin-right"})," ",h>=4&&o.jsx("div",{className:"absolute top-20 left-[calc(25%+6rem)] w-8 h-1 bg-white rotate-[30deg] origin-left"})," ",h>=5&&o.jsx("div",{className:"absolute top-28 left-[calc(25%+6rem)] w-8 h-1 bg-white -translate-x-full rotate-[-45deg] origin-right"})," ",h>=6&&o.jsx("div",{className:"absolute top-28 left-[calc(25%+6rem)] w-8 h-1 bg-white rotate-[45deg] origin-left"})," "]}),o.jsx("div",{className:"text-4xl font-mono tracking-widest mb-12",children:s.split("").map((A,C)=>o.jsx("span",{className:"mx-2 border-b-2 border-slate-500 min-w-[30px] inline-block text-center",children:l.has(A)||f==="LOST"?A:""},C))}),o.jsx("div",{className:"grid grid-cols-7 gap-2 max-w-2xl",children:M.map(A=>o.jsx("button",{onClick:()=>E(A),disabled:l.has(A)||f!=="PLAYING",className:`w-10 h-10 rounded font-bold ${l.has(A)?"bg-slate-700 text-slate-500":"bg-indigo-600 hover:bg-indigo-500"}`,children:A},A))}),f!=="PLAYING"&&o.jsx("div",{className:"mt-8 text-2xl font-bold animate-bounce",children:f==="WON"?"YOU WON!":"GAME OVER"}),o.jsx("button",{onClick:e,className:"absolute top-6 left-6 text-slate-400 hover:text-white",children:o.jsx(ft,{})})]})},YB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState(""),[a,l]=B.useState(""),[u,h]=B.useState([]),[m,f]=B.useState("PLAYING"),[y,_]=B.useState(!1);B.useEffect(()=>{const E=["APPLE","OCEAN","MOUNTAIN","GUITAR","COMPUTER","TIGER","PLANET","COFFEE"];s(E[Math.floor(Math.random()*E.length)])},[]);const T=async()=>{if(a.trim()){_(!0);try{const E=await Ij(t,a),M=[...u,{guess:a.toUpperCase(),score:E.score}].sort((A,C)=>C.score-A.score);h(M),(E.score===100||a.toUpperCase()===t)&&(f("WON"),setTimeout(()=>n(100-u.length*5),2e3))}catch{const M=Math.floor(Math.random()*100),A=[...u,{guess:a.toUpperCase(),score:M}].sort((C,D)=>D.score-C.score);h(A)}finally{_(!1),l("")}}};return o.jsxs("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center text-white p-4",children:[o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Hot & Cold Word"}),o.jsx("p",{className:"text-slate-400 mb-8",children:"Guess the secret word. Higher % means closer meaning."}),m==="PLAYING"?o.jsxs("div",{className:"flex gap-2 w-full max-w-md mb-8",children:[o.jsx("input",{type:"text",value:a,onChange:E=>l(E.target.value),onKeyDown:E=>E.key==="Enter"&&T(),className:"flex-1 bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"Type a word...",disabled:y}),o.jsx("button",{onClick:T,disabled:y||!a,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 rounded-xl font-bold disabled:opacity-50",children:y?o.jsx(Pn,{className:"animate-spin"}):"Guess"})]}):o.jsxs("div",{className:"text-center animate-bounce mb-8",children:[o.jsx("div",{className:"text-4xl font-bold text-emerald-500 mb-2",children:"FOUND IT!"}),o.jsxs("div",{className:"text-xl",children:["The word was ",t]})]}),o.jsx("div",{className:"w-full max-w-md space-y-4 mb-8",children:u.map((E,M)=>o.jsxs("div",{className:"flex justify-between items-center bg-slate-800 p-3 rounded-xl border border-slate-700",children:[o.jsx("span",{className:"font-bold",children:E.guess}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-32 h-2 bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full ${E.score>70?"bg-emerald-500":E.score>40?"bg-amber-500":"bg-rose-500"}`,style:{width:`${E.score}%`}})}),o.jsxs("span",{className:"font-mono",children:[E.score,"%"]})]})]},M))}),o.jsx("button",{onClick:e,className:"absolute top-6 left-6 text-slate-400 hover:text-white",children:o.jsx(ft,{})})]})},JB=({onBack:n,username:e,history:t,onComplete:s,isGuest:a,initialMode:l,initialTab:u})=>{const[h,m]=B.useState("MENU"),[f,y]=B.useState(u||"DASHBOARD");B.useEffect(()=>{l&&m(l)},[l]),B.useEffect(()=>{u&&y(u)},[u]);const[_,T]=B.useState(!1),[E,M]=B.useState("REACTION"),A=async(G,I)=>{let q="pts";(I==="REACTION"||I==="AIM")&&(q="ms"),(I==="SEQUENCE"||I==="NUMBER"||I==="CHIMP"||I==="VISUAL"||I==="BRIDGE"||I==="MATCH")&&(q="lvl"),I==="TYPING"&&(q="wpm"),a||zV(I,G,e,q).catch(J=>console.error("Cloud save failed",J));const X={id:`bench-${Date.now()}`,date:new Date().toISOString(),category:"BENCHMARK",score:G,maxScore:0,details:{game:I,unit:q},questions:[],answers:[]};s(X),m("MENU")},C=G=>{const I=t.filter(J=>J.category!=="BENCHMARK"||!J.details?!1:J.details.game===G).map(J=>{const j=J.details;return{id:J.id,game:j.game,score:J.score,unit:j.unit,date:J.date}});if(I.length===0)return{best:null,percentile:0};let q;G==="REACTION"||G==="AIM"?q=Math.min(...I.map(J=>J.score)):q=Math.max(...I.map(J=>J.score));const X=_x(G,q);return{best:q,percentile:X}};if(h!=="MENU")switch(h){case"REACTION":return o.jsx(PB,{onFinish:G=>A(G,"REACTION"),onExit:()=>m("MENU")});case"SEQUENCE":return o.jsx(LB,{onFinish:G=>A(G,"SEQUENCE"),onExit:()=>m("MENU")});case"AIM":return o.jsx(UB,{onFinish:G=>A(G,"AIM"),onExit:()=>m("MENU")});case"CHIMP":return o.jsx(OB,{onFinish:G=>A(G,"CHIMP"),onExit:()=>m("MENU")});case"VISUAL":return o.jsx(VB,{onFinish:G=>A(G,"VISUAL"),onExit:()=>m("MENU")});case"NUMBER":return o.jsx(BB,{onFinish:G=>A(G,"NUMBER"),onExit:()=>m("MENU")});case"VERBAL":return o.jsx(GB,{onFinish:G=>A(G,"VERBAL"),onExit:()=>m("MENU")});case"TYPING":return o.jsx(FB,{onFinish:G=>A(G,"TYPING"),onExit:()=>m("MENU")});case"BRIDGE":return o.jsx(zB,{onFinish:G=>A(G,"BRIDGE"),onExit:()=>m("MENU")});case"MATCH":return o.jsx(HB,{onFinish:G=>A(G,"MATCH"),onExit:()=>m("MENU")});case"HANGMAN":return o.jsx($B,{onFinish:G=>A(G,"HANGMAN"),onExit:()=>m("MENU")});case"HOTCOLD":return o.jsx(YB,{onFinish:G=>A(G,"HOTCOLD"),onExit:()=>m("MENU")});default:return m("MENU"),null}const D=({game:G,title:I,desc:q,icon:X,colorClass:J,btnColorClass:j})=>{const{best:N,percentile:R}=C(G);let P="pts";return(G==="REACTION"||G==="AIM")&&(P="ms"),G==="TYPING"&&(P="wpm"),(G==="SEQUENCE"||G==="NUMBER"||G==="CHIMP"||G==="VISUAL"||G==="BRIDGE"||G==="MATCH")&&(P="lvl"),o.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all group h-full",children:[o.jsx("div",{className:`absolute top-0 bottom-0 left-0 w-1.5 ${J}`}),o.jsxs("div",{className:"p-5 flex flex-col sm:flex-row items-center gap-5 h-full",children:[o.jsx("div",{className:`p-4 rounded-2xl ${J} bg-opacity-10 text-opacity-100 shrink-0`,children:o.jsx("div",{className:`${J.replace("bg-","text-")}`,children:X})}),o.jsxs("div",{className:"flex-1 text-center sm:text-left min-w-0 w-full",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1 truncate",children:I}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs mb-3 line-clamp-2 min-h-[2.5em]",children:q}),o.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2 mb-2 overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full ${J}`,style:{width:`${R}%`}})}),o.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[o.jsxs("span",{children:["Best: ",N!==null?`${N} ${P}`:"-"]}),o.jsx("span",{children:R>0?`Top ${R}%`:"-"})]})]}),o.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 w-full sm:w-auto shrink-0",children:[o.jsxs("button",{onClick:U=>{U.stopPropagation(),Z.play("click"),m(G)},className:`flex-1 sm:flex-none px-6 py-2.5 ${j} text-white rounded-xl font-bold text-sm shadow-md hover:shadow-lg hover:scale-105 transition flex items-center justify-center gap-2`,children:[o.jsx(Oo,{size:16,fill:"currentColor"})," MAIN"]}),o.jsxs("button",{onClick:U=>{U.stopPropagation(),Z.play("click"),M(G),T(!0)},className:"flex-1 sm:flex-none px-4 py-2.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-500 dark:text-slate-300 rounded-xl font-bold text-xs transition flex items-center justify-center gap-1",children:[o.jsx(No,{size:14})," Stats"]})]})]})]})};return o.jsx("div",{className:"min-h-screen bg-transparent p-6 flex flex-col font-sans transition-colors",children:o.jsxs("div",{className:"max-w-6xl mx-auto w-full",children:[o.jsx(jB,{isOpen:_,onClose:()=>T(!1),game:E,bestScore:C(E).best}),o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4",children:o.jsxs("button",{onClick:()=>{Z.play("back"),n()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium transition self-start",children:[o.jsx(ft,{size:20,className:"mr-2"})," Menu Utama"]})}),o.jsxs("div",{className:"mb-10 text-center sm:text-left",children:[o.jsxs("h1",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 flex items-center justify-center sm:justify-start gap-3",children:[o.jsx(Xn,{className:"text-rose-500",size:40})," Human Benchmark"]}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:["Halo ",o.jsx("span",{className:"font-bold text-indigo-500",children:e}),"! Uji batas kemampuan kognitifmu."]}),a&&o.jsx("div",{className:"mt-2 text-xs bg-amber-100 text-amber-700 inline-block px-3 py-1 rounded-full font-bold",children:"Mode Tamu: Skor tidak disimpan ke Global Leaderboard"})]}),o.jsxs("div",{className:"flex justify-center sm:justify-start gap-4 mb-8 border-b border-slate-200 dark:border-slate-700",children:[o.jsx("button",{onClick:()=>y("DASHBOARD"),className:`pb-3 px-4 font-bold transition-all ${f==="DASHBOARD"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Game Dashboard"}),o.jsx("button",{onClick:()=>y("RANKING"),className:`pb-3 px-4 font-bold transition-all ${f==="RANKING"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Leaderboard"})]}),f==="DASHBOARD"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-6 mb-10",children:[o.jsx(D,{game:"REACTION",title:"Reaction Time",desc:"Uji seberapa cepat refleks visual Anda merespons perubahan warna.",icon:o.jsx(Os,{size:32}),colorClass:"bg-amber-500",btnColorClass:"bg-amber-500 hover:bg-amber-600"}),o.jsx(D,{game:"SEQUENCE",title:"Sequence Memory",desc:"Ingat pola urutan kotak yang menyala semakin panjang.",icon:o.jsx(Wi,{size:32}),colorClass:"bg-indigo-500",btnColorClass:"bg-indigo-600 hover:bg-indigo-700"}),o.jsx(D,{game:"AIM",title:"Aim Trainer",desc:"Seberapa cepat Anda bisa mengenai semua target yang muncul?",icon:o.jsx(Lr,{size:32}),colorClass:"bg-orange-500",btnColorClass:"bg-orange-500 hover:bg-orange-600"}),o.jsx(D,{game:"CHIMP",title:"Chimp Test",desc:"Apakah Anda lebih pintar dari simpanse? Uji memori kerja spasial.",icon:o.jsx(_s,{size:32}),colorClass:"bg-teal-500",btnColorClass:"bg-teal-500 hover:bg-teal-600"}),o.jsx(D,{game:"VISUAL",title:"Visual Memory",desc:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!",icon:o.jsx(Wi,{size:32}),colorClass:"bg-sky-500",btnColorClass:"bg-sky-500 hover:bg-sky-600"}),o.jsx(D,{game:"NUMBER",title:"Number Memory",desc:"Ingat angka terpanjang yang bisa Anda hafal.",icon:o.jsx(sf,{size:32}),colorClass:"bg-blue-600",btnColorClass:"bg-blue-600 hover:bg-blue-700"}),o.jsx(D,{game:"VERBAL",title:"Verbal Memory",desc:"Ingat kata mana yang baru muncul dan mana yang sudah pernah.",icon:o.jsx(Eu,{size:32}),colorClass:"bg-purple-500",btnColorClass:"bg-purple-500 hover:bg-purple-600"}),o.jsx(D,{game:"TYPING",title:"Typing Test",desc:"Berapa banyak kata yang bisa Anda ketik per menit?",icon:o.jsx(Us,{size:32}),colorClass:"bg-slate-500",btnColorClass:"bg-slate-600 hover:bg-slate-700"}),o.jsx(D,{game:"BRIDGE",title:"Bridge Memory",desc:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang.",icon:o.jsx(af,{size:32}),colorClass:"bg-emerald-500",btnColorClass:"bg-emerald-600 hover:bg-emerald-700"}),o.jsx(D,{game:"MATCH",title:"Match Memory",desc:"Cari pasangan simbol yang sama di balik kartu.",icon:o.jsx(Kl,{size:32}),colorClass:"bg-pink-500",btnColorClass:"bg-pink-600 hover:bg-pink-700"}),o.jsx(D,{game:"HANGMAN",title:"Hangman",desc:"Tebak kata sebelum orangnya tergantung.",icon:o.jsx(Or,{size:32}),colorClass:"bg-slate-700",btnColorClass:"bg-slate-800 hover:bg-slate-900"}),o.jsx(D,{game:"HOTCOLD",title:"Hot & Cold",desc:"Tebak kata rahasia berdasarkan kedekatan makna.",icon:o.jsx(yx,{size:32}),colorClass:"bg-rose-500",btnColorClass:"bg-rose-600 hover:bg-rose-700"})]}),o.jsx(KB,{history:t})]}):o.jsx(qB,{username:e,history:t})]})})},hh=[{id:"utbk",label:"UTBK SNBT",type:"UTBK",sub:"General",mode:"SINGLE",color:"bg-rose-500",description:"Ranking berdasarkan skor IRT rata-rata."},{id:"skd_combined",label:"SKD CPNS & Kedinasan",type:"SKD",mode:"SPLIT_SKD",color:"bg-amber-500",description:"Ranking jalur CPNS Umum dan Sekolah Kedinasan."},{id:"tpa_combined",label:"Seleksi Lanjutan I",type:"TPA",mode:"SPLIT_TPA",color:"bg-blue-600",description:"Ranking TPA/TBI dan Psikotes Kedinasan."},{id:"psikotest",label:"Tes Koran & IQ",type:"PSIKOTEST",sub:"General",mode:"SINGLE",color:"bg-purple-500",description:"Ranking berdasarkan estimasi IQ & Tes Pauli."},{id:"kecermatan_combined",label:"Tes Kecermatan",type:"KECERMATAN",mode:"SPLIT_KECERMATAN",color:"bg-emerald-600",description:"Ranking ketelitian di berbagai mode tes."},{id:"benchmark",label:"Human Benchmark",type:"BENCHMARK",mode:"BENCHMARK",color:"bg-slate-800",description:"Ranking game kognitif khusus."}],QB=({rank:n})=>n===1?o.jsx(W8,{size:24,className:"text-amber-400 fill-amber-400"}):n===2?o.jsx(A1,{size:24,className:"text-slate-400 fill-slate-400"}):n===3?o.jsx(A1,{size:24,className:"text-orange-400 fill-orange-400"}):o.jsx("span",{className:"font-black text-slate-400 text-lg w-6 text-center",children:n}),bi=({title:n,data:e,currentUserId:t,colorClass:s,compact:a})=>e.length===0?o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6 flex flex-col items-center justify-center text-center h-full min-h-[200px]",children:[o.jsx("div",{className:`p-3 rounded-full ${s.replace("bg-","bg-opacity-10 text-")} mb-3`,children:o.jsx(Es,{size:24})}),o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-1",children:n}),o.jsx("p",{className:"text-xs text-slate-500",children:"Belum ada data ranking."})]}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[o.jsx("div",{className:`p-4 border-b border-slate-100 dark:border-slate-700 ${s} bg-opacity-10`,children:o.jsxs("h3",{className:`font-bold ${s.replace("bg-","text-")} flex items-center gap-2`,children:[o.jsx(Es,{size:18})," ",n]})}),o.jsx("div",{className:"flex-1 overflow-y-auto max-h-[500px] p-2 scrollbar-hide",children:o.jsx("div",{className:"space-y-2",children:e.map((l,u)=>{const h=u+1,m=t===l.uid;return o.jsxs("div",{className:`flex items-center p-3 rounded-xl border transition-all ${m?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 shadow-sm":"bg-white dark:bg-slate-800/50 border-slate-100 dark:border-slate-700"}`,children:[o.jsx("div",{className:"w-8 shrink-0 flex justify-center mr-2",children:o.jsx(QB,{rank:h})}),o.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center font-bold text-slate-500 dark:text-slate-400 mr-3 text-xs shrink-0",children:l.username[0].toUpperCase()}),o.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[o.jsxs("div",{className:`font-bold text-sm truncate ${m?"text-indigo-700 dark:text-indigo-300":"text-slate-800 dark:text-white"}`,children:[l.username," ",m&&"(You)"]}),!a&&l.packageName&&o.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-400 mt-0.5",children:[o.jsx(Tk,{size:10})," ",l.packageName]})]}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:`font-black ${a?"text-sm":"text-lg"} ${h<=3?"text-slate-800 dark:text-white":"text-slate-600 dark:text-slate-300"}`,children:l.score})})]},u)})})})]}),WB=({onBack:n,userProfile:e,onOpenHumanBenchmark:t})=>{const[s,a]=B.useState("utbk"),[l,u]=B.useState([]),[h,m]=B.useState({}),[f,y]=B.useState(!1),[_,T]=B.useState(!1),E=hh.find(D=>D.id===s)||hh[0];B.useEffect(()=>{(async()=>{if(E.mode!=="BENCHMARK"){y(!0),u([]),m({});try{if(E.mode==="SINGLE"){const G=await Sl(E.type,E.sub||"General");u(G)}else if(E.mode==="SPLIT_SKD"){const[G,I]=await Promise.all([Sl("SKD","CPNS"),Sl("SKD","KEDINASAN")]);m({CPNS:G,KEDINASAN:I})}else if(E.mode==="SPLIT_TPA"){const[G,I]=await Promise.all([Sl("TPA","TPA_TBI"),Sl("TPA","PSIKOTEST_KEDINASAN")]);m({TPA_TBI:G,PSIKOTEST_KEDINASAN:I})}else if(E.mode==="SPLIT_KECERMATAN"){const G=["ANGKA","HURUF","SIMBOL_HILANG","SAMA_BEDA","MATCHING","GROUPING"],I=G.map(J=>Sl("KECERMATAN",J)),q=await Promise.all(I),X={};G.forEach((J,j)=>{X[J]=q[j]}),m(X)}}catch(G){console.error("Error fetching leaderboard",G)}finally{y(!1)}}})()},[s]);const M=D=>{Z.play("click"),a(D),T(!1)},C=(()=>{if(!(e!=null&&e.uid)||E.mode!=="SINGLE")return null;const D=l.findIndex(G=>G.uid===e.uid);return D!==-1?{rank:D+1,data:l[D]}:null})();return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row transition-colors h-screen overflow-hidden",children:[o.jsxs("div",{className:"hidden md:flex w-64 bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 flex-col shrink-0 z-20",children:[o.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition text-slate-500 dark:text-slate-400",children:o.jsx(ft,{size:20})}),o.jsxs("h2",{className:"font-black text-lg text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(Es,{className:"text-amber-500",size:20})," Global Rank"]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:hh.map(D=>o.jsxs("button",{onClick:()=>M(D.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all text-left ${s===D.id?`${D.color} text-white shadow-md`:"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${s===D.id?"bg-white":D.color}`}),D.label]},D.id))})]}),o.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-4 z-30 sticky top-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 dark:text-slate-400 font-bold text-sm",children:[o.jsx(ft,{size:18,className:"mr-1"})," Menu"]}),o.jsxs("div",{className:"text-sm font-black text-slate-800 dark:text-white flex items-center gap-1",children:[o.jsx(Es,{size:16,className:"text-amber-500"})," Global Leaderboard"]})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>T(!_),className:"w-full flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-700 rounded-xl font-bold text-slate-700 dark:text-white",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${E.color}`}),E.label]}),o.jsx(gk,{size:18,className:`transition-transform ${_?"rotate-180":""}`})]}),_&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50 animate-fade-in-down max-h-[60vh] overflow-y-auto",children:hh.map(D=>o.jsxs("button",{onClick:()=>M(D.id),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-bold transition-all text-left border-b border-slate-50 dark:border-slate-700 last:border-0 ${s===D.id?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${D.color}`}),D.label]},D.id))})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col h-full relative overflow-hidden bg-slate-50 dark:bg-slate-900",onClick:()=>T(!1),children:[o.jsxs("div",{className:"p-6 pb-4 hidden md:block",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:E.label}),o.jsx("p",{className:"text-slate-500 text-sm",children:E.description})]}),f&&o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx(Pn,{className:"animate-spin text-indigo-600 mb-4",size:40}),o.jsx("p",{className:"text-slate-500 font-medium",children:"Memuat data ranking..."})]}),!f&&o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 pb-24 scrollbar-hide",children:[E.mode==="BENCHMARK"&&o.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 max-w-md w-full",children:[o.jsx(Xn,{size:64,className:"mx-auto mb-6 text-indigo-500 animate-bounce-slow"}),o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-4",children:"Human Benchmark"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Peringkat untuk game kognitif (Reaction Time, Memory, dll) tersedia di dashboard khusus."}),o.jsxs("button",{onClick:()=>{Z.play("click"),t()},className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg",children:[o.jsx(n9,{size:20})," Buka Dashboard"]})]})}),E.mode==="SINGLE"&&o.jsx("div",{className:"max-w-3xl mx-auto",children:o.jsx(bi,{title:`Ranking ${E.label}`,data:l,currentUserId:e==null?void 0:e.uid,colorClass:E.color})}),E.mode==="SPLIT_SKD"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto h-full",children:[o.jsx(bi,{title:"SKD CPNS Umum",data:h.CPNS||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-amber-500"}),o.jsx(bi,{title:"SKD Kedinasan",data:h.KEDINASAN||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-orange-500"})]}),E.mode==="SPLIT_TPA"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto h-full",children:[o.jsx(bi,{title:"TPA & TBI (Standar)",data:h.TPA_TBI||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-blue-600"}),o.jsx(bi,{title:"Psikotes Kedinasan",data:h.PSIKOTEST_KEDINASAN||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-purple-600"})]}),E.mode==="SPLIT_KECERMATAN"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-7xl mx-auto",children:[o.jsx(bi,{title:"Angka Hilang",data:h.ANGKA||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-emerald-500",compact:!0}),o.jsx(bi,{title:"Huruf Hilang",data:h.HURUF||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-teal-500",compact:!0}),o.jsx(bi,{title:"Simbol Hilang",data:h.SIMBOL_HILANG||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-cyan-500",compact:!0}),o.jsx(bi,{title:"Sama Beda Simbol",data:h.SAMA_BEDA||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-blue-500",compact:!0}),o.jsx(bi,{title:"Matching",data:h.MATCHING||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-indigo-500",compact:!0}),o.jsx(bi,{title:"Grouping",data:h.GROUPING||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-violet-500",compact:!0})]})]}),C&&E.mode==="SINGLE"&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 shadow-[0_-5px_20px_rgba(0,0,0,0.05)] z-30 animate-slide-up",children:o.jsxs("div",{className:"max-w-3xl mx-auto flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Your Rank"}),o.jsxs("div",{className:"bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-black px-3 py-1 rounded-lg",children:["#",C.rank]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Your Score"}),o.jsx("div",{className:"text-2xl font-black text-indigo-600 dark:text-indigo-400",children:C.data.score})]})]})})]})]})},Dk={Footprints:u9,Flame:yk,Zap:Os,Crosshair:J8,Activity:Xn,Eye:Do,Moon:gx,Layers:px,Trophy:Es},XB=({profile:n,onOpenAchievements:e})=>{const t=tf(n.level),s=tf(n.level-1),a=(n.xp-s)/(t-s)*100,l=lk(n.level);return o.jsxs("div",{className:"flex items-center gap-3 bg-white dark:bg-slate-800 p-2 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm animate-fade-in-down w-full md:w-auto overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 rounded-lg border border-orange-100 dark:border-orange-800",children:[o.jsx(yk,{size:16,className:"fill-orange-500 animate-pulse"}),o.jsx("span",{className:"font-black text-sm",children:n.streak})]}),o.jsxs("div",{className:"flex-1 flex flex-col justify-center min-w-[100px]",children:[o.jsxs("div",{className:"flex justify-between items-end mb-1",children:[o.jsxs("span",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:["Lvl ",n.level,": ",l]}),o.jsxs("span",{className:"text-[9px] text-slate-400 font-mono",children:[n.xp," / ",t," XP"]})]}),o.jsx("div",{className:"w-full h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-1000 ease-out",style:{width:`${Math.min(100,Math.max(0,a))}%`}})})]}),o.jsx("button",{onClick:e,className:"p-2 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400 rounded-lg hover:bg-yellow-100 dark:hover:bg-yellow-900/40 transition border border-yellow-100 dark:border-yellow-800",children:o.jsx(Es,{size:18})})]})},ZB=({isOpen:n,onClose:e,profile:t})=>n?o.jsx("div",{className:"fixed inset-0 z-[80] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:e,children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-2xl rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700 max-h-[85vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-white dark:bg-slate-800 z-10 py-2",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(Es,{className:"text-yellow-500 fill-yellow-500"})," Pencapaian"]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Terkumpul: ",t.unlockedAchievements.length," / ",up.length]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full text-slate-500",children:o.jsx(vx,{size:24})})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:up.map(s=>{const a=t.unlockedAchievements.includes(s.id),l=Dk[s.icon]||Es;return o.jsxs("div",{className:`p-4 rounded-2xl border-2 flex items-center gap-4 transition-all ${a?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800":"bg-slate-50 dark:bg-slate-800 border-slate-100 dark:border-slate-700 opacity-60 grayscale"}`,children:[o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shrink-0 ${a?"bg-white dark:bg-slate-800 text-indigo-600 shadow-md":"bg-slate-200 dark:bg-slate-700 text-slate-400"}`,children:a?o.jsx(l,{size:24}):o.jsx(vk,{size:20})}),o.jsxs("div",{children:[o.jsx("h3",{className:`font-bold ${a?"text-slate-900 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:s.title}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-tight mb-1",children:s.description}),o.jsxs("span",{className:"text-[10px] font-bold bg-slate-200 dark:bg-slate-700 px-2 py-0.5 rounded text-slate-600 dark:text-slate-300",children:["+",s.xpReward," XP"]})]})]},s.id)})})]})}):null,eG=({newLevel:n,onClose:e})=>o.jsx("div",{className:"fixed inset-0 z-[90] bg-black/80 backdrop-blur-md flex items-center justify-center p-6 animate-fade-in",onClick:e,children:o.jsxs("div",{className:"text-center relative",children:[o.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-[100px] rounded-full pointer-events-none"}),o.jsx(C7,{size:120,className:"text-yellow-400 fill-yellow-400 mx-auto mb-6 animate-bounce-slow drop-shadow-[0_0_30px_rgba(250,204,21,0.6)]"}),o.jsx("h2",{className:"text-5xl font-black text-white mb-2 tracking-tight animate-scale-up",children:"LEVEL UP!"}),o.jsxs("div",{className:"text-2xl font-bold text-indigo-300 mb-8",children:["Level ",n,": ",lk(n)]}),o.jsx("button",{onClick:e,className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:scale-105 transition shadow-xl",children:"Lanjut Belajar"})]})}),tG=({achievement:n,onClose:e})=>{const t=Dk[n.icon]||Es;return K1.useEffect(()=>{const s=setTimeout(e,4e3);return()=>clearTimeout(s)},[]),o.jsxs("div",{className:"fixed bottom-24 left-1/2 transform -translate-x-1/2 z-[100] bg-slate-900 text-white p-4 rounded-2xl shadow-2xl border border-yellow-500/30 flex items-center gap-4 animate-slide-up w-max max-w-[90vw]",children:[o.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center shrink-0 text-slate-900 animate-pulse",children:o.jsx(t,{size:24})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-bold text-yellow-400 uppercase tracking-wider mb-0.5",children:"Achievement Unlocked!"}),o.jsx("div",{className:"font-bold text-lg",children:n.title}),o.jsxs("div",{className:"text-xs text-slate-400",children:["+",n.xpReward," XP"]})]})]})},F1={kedokteran:750,informatika:720,"ilmu komputer":710,hukum:680,manajemen:690,psikologi:670,akuntansi:685,"teknik sipil":660,"teknik mesin":665,"teknik elektro":675,komunikasi:695,farmasi:650},nG=({history:n,category:e,onBack:t,onStartSmartReview:s})=>{const[a,l]=B.useState(""),[u,h]=B.useState(""),[m,f]=B.useState(0),[y,_]=B.useState(0),[T,E]=B.useState([]);B.useEffect(()=>{const C=n.filter(G=>G.category===e);if(C.length>0){const G=C.reduce((I,q)=>I+q.score,0);_(Math.round(G/C.length))}const D={};n.forEach(G=>{G.category===e&&G.answers.forEach(I=>{if(!I.isCorrect){const q=G.questions.find(X=>X.id===I.questionId);q&&(D[q.id]=q)}})}),E(Object.values(D))},[n,e]);const M=C=>{const D=C.target.value;h(D);const G=D.toLowerCase();let I=600;Object.keys(F1).forEach(X=>{G.includes(X)&&(I=F1[X])});const q=a.toLowerCase();(q.includes("ui")||q.includes("itb")||q.includes("ugm"))&&(I+=50),f(I)},A=m>0?Math.min(100,Math.round(y/m*100)):0;return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:o.jsx(ft,{size:20})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(oc,{className:"text-indigo-600 dark:text-indigo-400"}),"Analisis Akademik ",e]}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Target skor & perbaikan kelemahan."})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-6 flex items-center gap-2",children:[o.jsx(Lr,{className:"text-rose-500"})," Target Score Calculator"]}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Universitas Impian"}),o.jsx("input",{type:"text",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",placeholder:"Contoh: Universitas Indonesia",value:a,onChange:C=>l(C.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Jurusan / Prodi"}),o.jsx("input",{type:"text",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",placeholder:"Contoh: Pendidikan Dokter",value:u,onChange:M})]})]}),u&&o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-5 rounded-2xl animate-fade-in-up border border-indigo-100 dark:border-indigo-800",children:[o.jsxs("div",{className:"flex justify-between items-end mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-bold uppercase",children:"Estimasi Target"}),o.jsx("div",{className:"text-3xl font-black text-indigo-700 dark:text-indigo-300",children:m})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 font-bold uppercase",children:"Skor Saat Ini"}),o.jsx("div",{className:"text-xl font-bold text-slate-700 dark:text-slate-200",children:y})]})]}),o.jsx("div",{className:"w-full h-3 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden mb-2",children:o.jsx("div",{className:`h-full transition-all duration-1000 ${A>=100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${A}%`}})}),o.jsx("div",{className:"text-xs text-center font-medium text-slate-600 dark:text-slate-400",children:A>=100?"Hebat! Skor rata-ratamu sudah melampaui target.":`Kamu butuh +${m-y} poin lagi untuk aman.`})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col",children:[o.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-6 flex items-center gap-2",children:[o.jsx(Xp,{className:"text-emerald-500"})," Smart Review"]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center mb-6",children:[o.jsxs("div",{className:"w-24 h-24 bg-rose-50 dark:bg-rose-900/20 rounded-full flex items-center justify-center mb-4 relative",children:[o.jsx(B8,{size:48,className:"text-rose-500"}),o.jsx("div",{className:"absolute top-0 right-0 bg-rose-600 text-white text-xs font-bold px-2 py-1 rounded-full border-2 border-white dark:border-slate-800",children:T.length})]}),o.jsx("h4",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Bank Kesalahan"}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1 max-w-xs",children:["Sistem mengumpulkan ",T.length," soal yang pernah kamu jawab salah. Kerjakan ulang untuk memastikan pemahaman."]})]}),o.jsxs("button",{onClick:()=>s(T),disabled:T.length===0,className:"w-full py-4 bg-slate-900 dark:bg-indigo-600 text-white rounded-xl font-bold hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2 shadow-lg",children:[o.jsx(Oo,{size:20,fill:"currentColor"}),"Kerjakan ",T.length," Soal Salah"]})]})]}),o.jsxs("div",{className:"mt-6 bg-gradient-to-r from-red-500 to-red-600 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -mr-10 -mt-10 blur-2xl"}),o.jsxs("div",{className:"relative z-10 flex items-center gap-6",children:[o.jsx("div",{className:"p-4 bg-white/20 rounded-2xl backdrop-blur-sm",children:o.jsx(kk,{size:40})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold mb-1",children:"Video Pembahasan Terintegrasi"}),o.jsx("p",{className:"text-red-100 text-sm max-w-lg",children:"Bingung dengan penjelasan teks? Sekarang setiap soal dilengkapi tombol pencarian otomatis ke YouTube untuk menemukan video pembahasan konsep terkait dari tutor terbaik."}),o.jsxs("div",{className:"mt-4 flex gap-2",children:[o.jsxs("span",{className:"text-xs bg-black/20 px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(es,{size:12})," Auto-Search Topic"]}),o.jsxs("span",{className:"text-xs bg-black/20 px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(es,{size:12})," Curated Keywords"]})]})]})]})]})]})})},sG=({userProfile:n,history:e,onBack:t,onUpdateProfile:s})=>{var Qe,St,At,at,Ge;const[a,l]=B.useState("PROFILE"),[u,h]=B.useState([]),[m,f]=B.useState([]),[y,_]=B.useState([]),[T,E]=B.useState(""),[M,A]=B.useState(!1),[C,D]=B.useState(null),[G,I]=B.useState(null),[q,X]=B.useState(!1),[J,j]=B.useState(n.username),[N,R]=B.useState(null),[P,U]=B.useState(!1),F=B.useRef(null);B.useEffect(()=>{(a==="FRIENDS"||a==="REQUESTS")&&O()},[a]);const O=async()=>{if(n.uid){A(!0);try{const ue=await ZV(n.uid);h(ue);const Oe=await JV(n.uid);f(Oe)}catch(ue){console.error(ue)}finally{A(!1)}}},Ae=ue=>{var et;const Oe=(et=ue.target.files)==null?void 0:et[0];if(Oe){if(Oe.size>2*1024*1024){alert("Ukuran file maksimal 2MB");return}const We=new FileReader;We.onload=Rn=>{var xt;const Mt=new Image;Mt.onload=()=>{const Gt=document.createElement("canvas"),oi=Gt.getContext("2d");if(!oi)return;const Bn=200;let qt=Mt.width,Pt=Mt.height;qt>Pt?qt>Bn&&(Pt*=Bn/qt,qt=Bn):Pt>Bn&&(qt*=Bn/Pt,Pt=Bn),Gt.width=qt,Gt.height=Pt,oi.drawImage(Mt,0,0,qt,Pt),R(Gt.toDataURL("image/jpeg",.8))},Mt.src=(xt=Rn.target)==null?void 0:xt.result},We.readAsDataURL(Oe)}},Le=async()=>{U(!0);try{const ue={};J!==n.username&&(ue.username=J),N&&(ue.photoURL=N),Object.keys(ue).length>0&&await s(ue),X(!1),R(null)}catch{alert("Gagal menyimpan profil.")}finally{U(!1)}},Y=async()=>{if(!(T.length<3)){A(!0);try{const ue=await $V(T),Oe=new Set(u.map(et=>et.uid));_(ue.filter(et=>et.uid!==n.uid&&!Oe.has(et.uid)))}catch(ue){console.error(ue)}finally{A(!1)}}},oe=async ue=>{var Oe;try{await YV({uid:n.uid,username:n.username,photoURL:n.photoURL||void 0,level:((Oe=n.gamification)==null?void 0:Oe.level)||1},ue.uid),alert("Permintaan pertemanan dikirim!"),_(et=>et.filter(We=>We.uid!==ue.uid))}catch{alert("Gagal mengirim request.")}},_e=async ue=>{var Oe;try{await QV(n.uid,{uid:n.uid,username:n.username,photoURL:n.photoURL||void 0,level:((Oe=n.gamification)==null?void 0:Oe.level)||1},ue),O()}catch{alert("Error accepting")}},Me=async ue=>{try{await WV(n.uid,ue.fromUid),f(Oe=>Oe.filter(et=>et.id!==ue.id))}catch{alert("Error rejecting")}},ne=async ue=>{if(window.confirm("Hapus teman ini?"))try{await XV(n.uid,ue),h(Oe=>Oe.filter(et=>et.uid!==ue))}catch{alert("Gagal menghapus teman.")}},z=ue=>ue&&Date.now()-new Date(ue).getTime()<900*1e3?"online":"offline",Q=async ue=>{A(!0);try{const Oe=await hk(ue.uid),et={utbk:Math.max(0,...Oe.filter(We=>We.category==="UTBK").map(We=>We.score)),skd:Math.max(0,...Oe.filter(We=>We.category==="SKD").map(We=>We.score)),tpa:Math.max(0,...Oe.filter(We=>We.category==="TPA").map(We=>We.score)),psikotest:Math.max(0,...Oe.filter(We=>We.category==="PSIKOTEST").map(We=>We.score)),kecermatan:Math.max(0,...Oe.filter(We=>We.category==="KECERMATAN").map(We=>We.score)),benchmark:Math.max(0,...Oe.filter(We=>We.category==="BENCHMARK").map(We=>We.score))};I(et),D(ue)}catch{alert("Gagal mengambil data teman.")}finally{A(!1)}},fe=ue=>{const Oe=e.filter(et=>et.category===ue);return Oe.length===0?0:Math.max(...Oe.map(et=>et.score))},ie=((Qe=n.gamification)==null?void 0:Qe.xp)||0,ce=((St=n.gamification)==null?void 0:St.level)||1,Te=tf(ce),xe=tf(ce-1),nt=Math.min(100,Math.max(0,(ie-xe)/(Te-xe)*100));return C&&G?o.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col p-6 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center mb-8",children:[o.jsx("button",{onClick:()=>D(null),className:"p-2 bg-white/10 rounded-full text-white mr-4",children:o.jsx(ft,{})}),o.jsx("h2",{className:"text-2xl font-bold text-white",children:"Duel Stats"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8 text-center text-white",children:[o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-indigo-500 mb-2 overflow-hidden border-4 border-indigo-400 shadow-lg shadow-indigo-500/30",children:n.photoURL?o.jsx("img",{src:n.photoURL,className:"w-full h-full object-cover"}):o.jsx("span",{className:"flex items-center justify-center h-full text-3xl font-bold",children:n.username[0]})}),o.jsx("span",{className:"font-bold truncate w-full text-lg",children:n.username})]}),o.jsx("div",{className:"flex items-center justify-center",children:o.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center",children:o.jsx(k1,{size:24,className:"text-white"})})}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-rose-500 mb-2 overflow-hidden border-4 border-rose-400 shadow-lg shadow-rose-500/30",children:C.photoURL?o.jsx("img",{src:C.photoURL,className:"w-full h-full object-cover"}):o.jsx("span",{className:"flex items-center justify-center h-full text-3xl font-bold",children:C.username[0]})}),o.jsx("span",{className:"font-bold truncate w-full text-lg",children:C.username})]})]}),o.jsx("div",{className:"space-y-4 max-w-2xl mx-auto w-full",children:[{label:"UTBK SNBT",key:"utbk",myScore:fe("UTBK"),friendScore:G.utbk},{label:"SKD CPNS",key:"skd",myScore:fe("SKD"),friendScore:G.skd},{label:"TPA & TBI",key:"tpa",myScore:fe("TPA"),friendScore:G.tpa},{label:"Psikotes",key:"psikotest",myScore:fe("PSIKOTEST"),friendScore:G.psikotest},{label:"Kecermatan",key:"kecermatan",myScore:fe("KECERMATAN"),friendScore:G.kecermatan},{label:"Benchmark",key:"benchmark",myScore:fe("BENCHMARK"),friendScore:G.benchmark}].map(ue=>o.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700 backdrop-blur-sm",children:[o.jsx("div",{className:"text-center text-slate-400 text-xs font-bold uppercase mb-3 tracking-widest",children:ue.label}),o.jsxs("div",{className:"flex justify-between items-center text-xl font-black",children:[o.jsx("span",{className:ue.myScore>ue.friendScore?"text-indigo-400":"text-slate-500",children:ue.myScore}),o.jsx("div",{className:"h-2 flex-1 mx-4 bg-slate-700 rounded-full overflow-hidden relative",children:o.jsx("div",{className:`h-full absolute left-0 top-0 bottom-0 transition-all duration-1000 ${ue.myScore>ue.friendScore?"bg-indigo-500":"bg-rose-500"}`,style:{width:`${ue.myScore/(ue.myScore+ue.friendScore||1)*100}%`}})}),o.jsx("span",{className:ue.friendScore>ue.myScore?"text-rose-400":"text-slate-500",children:ue.friendScore})]})]},ue.key))})]}):o.jsxs("div",{className:"min-h-screen bg-[#f0f4f8] dark:bg-[#0f172a] relative overflow-hidden transition-colors font-sans",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-96 bg-gradient-to-br from-indigo-200 via-purple-200 to-pink-200 dark:from-indigo-900/40 dark:via-purple-900/40 dark:to-pink-900/40 blur-3xl opacity-50 pointer-events-none"}),o.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto p-4 md:p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 font-bold bg-white/50 dark:bg-slate-800/50 backdrop-blur-md px-4 py-2 rounded-full shadow-sm border border-white/20",children:[o.jsx(ft,{size:18})," Back"]}),o.jsxs("div",{className:"flex items-center gap-1 bg-white/50 dark:bg-slate-800/50 backdrop-blur-md p-1 rounded-full shadow-sm border border-white/20",children:[o.jsx("button",{onClick:()=>l("PROFILE"),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${a==="PROFILE"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Profile"}),o.jsx("button",{onClick:()=>l("FRIENDS"),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${a==="FRIENDS"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"My Friends"}),o.jsxs("button",{onClick:()=>l("REQUESTS"),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${a==="REQUESTS"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:["Requests ",m.length>0&&o.jsx("span",{className:"ml-1 text-rose-500",children:""})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"p-3 bg-white/50 dark:bg-slate-800/50 backdrop-blur-md rounded-full shadow-sm text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-700 transition border border-white/20",children:o.jsx(Wp,{size:20})}),o.jsx("button",{className:"p-3 bg-white/50 dark:bg-slate-800/50 backdrop-blur-md rounded-full shadow-sm text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-700 transition border border-white/20",children:o.jsx(B9,{size:20})})]})]}),a==="PROFILE"&&o.jsxs("div",{className:"animate-fade-in-up space-y-6",children:[o.jsxs("div",{className:"relative w-full rounded-[2rem] overflow-hidden shadow-2xl border border-white/40 dark:border-white/10",children:[o.jsx("div",{className:"absolute inset-0 bg-white/60 dark:bg-slate-800/60 backdrop-blur-xl"}),o.jsxs("div",{className:"relative p-8 md:p-10 flex flex-col md:flex-row items-center gap-8",children:[o.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var ue;return q&&((ue=F.current)==null?void 0:ue.click())},children:[o.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 rounded-full p-1 bg-gradient-to-tr from-indigo-500 via-purple-500 to-pink-500 shadow-lg",children:o.jsxs("div",{className:"w-full h-full rounded-full overflow-hidden bg-white dark:bg-slate-900 relative",children:[N||n.photoURL?o.jsx("img",{src:N||n.photoURL,className:"w-full h-full object-cover",alt:"Avatar"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-4xl font-bold text-slate-300",children:(At=n.username)==null?void 0:At[0]}),q&&o.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center text-white",children:o.jsx(D8,{})})]})}),o.jsxs("div",{className:"absolute -bottom-2 -right-2 bg-gradient-to-r from-amber-400 to-orange-500 text-white px-4 py-1.5 rounded-full font-bold text-sm shadow-md border-2 border-white dark:border-slate-800",children:["Lvl ",ce]}),o.jsx("input",{type:"file",ref:F,className:"hidden",accept:"image/*",onChange:Ae})]}),o.jsxs("div",{className:"flex-1 text-center md:text-left w-full",children:[o.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-2",children:[q?o.jsx("input",{value:J,onChange:ue=>j(ue.target.value),className:"text-3xl font-black bg-white/50 dark:bg-slate-900/50 p-2 rounded-xl border border-slate-300 dark:border-slate-600 outline-none w-full md:w-auto",autoFocus:!0}):o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-black text-slate-800 dark:text-white tracking-tight",children:n.username}),o.jsx("button",{onClick:()=>X(!0),className:"p-1.5 text-slate-400 hover:text-indigo-600 transition",children:o.jsx(s7,{size:16})})]}),q&&o.jsxs("div",{className:"flex gap-2 mt-4 md:mt-0",children:[o.jsxs("button",{onClick:Le,disabled:P,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold text-sm flex items-center gap-2 hover:bg-indigo-700",children:[P&&o.jsx(Pn,{className:"animate-spin",size:14})," Save"]}),o.jsx("button",{onClick:()=>X(!1),className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-bold text-sm hover:bg-slate-300",children:"Cancel"})]})]}),o.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 text-slate-500 dark:text-slate-300 font-medium mb-6",children:[o.jsx(M1,{size:16,className:"text-indigo-500"}),o.jsx("span",{children:n.isGuest?"Guest Account":"Verified Student"})]}),o.jsxs("div",{className:"w-full bg-white/50 dark:bg-slate-900/50 rounded-full h-6 p-1 backdrop-blur-sm border border-white/20 dark:border-white/5 relative",children:[o.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-400 via-indigo-500 to-purple-500 relative overflow-hidden shadow-[0_0_15px_rgba(99,102,241,0.5)] transition-all duration-1000",style:{width:`${nt}%`},children:o.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_2s_infinite]"})}),o.jsxs("div",{className:"absolute top-0 right-0 -mt-8 text-xs font-bold text-indigo-600 dark:text-indigo-300 bg-white/80 dark:bg-slate-800/80 px-2 py-1 rounded-lg backdrop-blur-md shadow-sm",children:[ie," / ",Te," XP"]}),o.jsxs("div",{className:"absolute top-1/2 left-3 transform -translate-y-1/2 text-[10px] font-black text-white mix-blend-overlay uppercase tracking-widest pointer-events-none",children:[Math.round(nt),"% to Lvl ",ce+1]})]})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-200 mb-4 flex items-center gap-2 px-2",children:[o.jsx(No,{size:20,className:"text-indigo-500"})," Performance Stats"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"BEST UTBK",score:fe("UTBK"),icon:oc,color:"text-rose-500",bg:"bg-rose-500/10"},{label:"BEST SKD",score:fe("SKD"),icon:M1,color:"text-blue-500",bg:"bg-blue-500/10"},{label:"BEST TPA & TBI",score:fe("TPA"),icon:Os,color:"text-purple-500",bg:"bg-purple-500/10"},{label:"BEST PSIKOTES",score:fe("PSIKOTEST"),icon:_s,color:"text-pink-500",bg:"bg-pink-500/10"},{label:"BEST KECERMATAN",score:fe("KECERMATAN"),icon:Do,color:"text-emerald-500",bg:"bg-emerald-500/10"},{label:"BEST BENCHMARK",score:fe("BENCHMARK"),icon:Xn,color:"text-amber-500",bg:"bg-amber-500/10"},{label:"TOTAL BATTLES",score:((at=n.gamification)==null?void 0:at.battlesPlayed)||0,icon:Or,color:"text-sky-500",bg:"bg-sky-500/10"},{label:"BATTLE WIN RATE",score:`${(Ge=n.gamification)!=null&&Ge.battlesPlayed?Math.round((n.gamification.battlesWon||0)/n.gamification.battlesPlayed*100):0}%`,icon:Es,color:"text-yellow-500",bg:"bg-yellow-500/10"}].map((ue,Oe)=>{const et=ue.icon;return o.jsxs("div",{className:"bg-white/70 dark:bg-slate-800/70 backdrop-blur-md p-5 rounded-2xl border border-white/40 dark:border-white/5 shadow-sm hover:shadow-md transition-all hover:-translate-y-1",children:[o.jsx("div",{className:"flex items-start justify-between mb-3",children:o.jsx("div",{className:`p-2 rounded-xl ${ue.bg} ${ue.color}`,children:o.jsx(et,{size:20})})}),o.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:ue.label}),o.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:ue.score})]},Oe)})})]})]}),a==="FRIENDS"&&o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-white/70 dark:bg-slate-800/70 backdrop-blur-md p-6 rounded-3xl border border-white/40 dark:border-white/5 shadow-sm mb-8",children:[o.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-4 flex items-center gap-2",children:[o.jsx(fu,{size:16})," Find Friends"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"Username...",value:T,onChange:ue=>E(ue.target.value),onKeyDown:ue=>ue.key==="Enter"&&Y(),className:"flex-1 p-3 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white"}),o.jsx("button",{onClick:Y,className:"px-6 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Search"})]}),y.length>0&&o.jsx("div",{className:"mt-4 space-y-2",children:y.map(ue=>o.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:ue.username}),o.jsxs("button",{onClick:()=>oe(ue),className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-lg text-xs font-bold flex items-center gap-1 hover:bg-emerald-200 transition",children:[o.jsx(G7,{size:14})," Add"]})]},ue.uid))})]}),o.jsx("div",{className:"space-y-3",children:u.length===0?o.jsxs("div",{className:"text-center py-20 text-slate-400 bg-white/40 dark:bg-slate-800/40 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700",children:[o.jsx(Or,{size:48,className:"mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"You haven't added any friends yet."})]}):u.map(ue=>{const Oe=z(ue.lastActive);return o.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-md p-4 rounded-2xl border border-white/40 dark:border-white/5 flex justify-between items-center shadow-sm hover:shadow-md transition",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full flex items-center justify-center font-bold text-white overflow-hidden shadow-sm",children:ue.photoURL?o.jsx("img",{src:ue.photoURL,className:"w-full h-full object-cover"}):ue.username[0]}),o.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full border-2 border-white dark:border-slate-800 ${Oe==="online"?"bg-emerald-500":"bg-slate-400"}`})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:ue.username}),o.jsxs("div",{className:"text-xs text-slate-500 font-medium flex items-center gap-2",children:[o.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded text-slate-600 dark:text-slate-300",children:["Lvl ",ue.level]}),o.jsx("span",{className:Oe==="online"?"text-emerald-500":"text-slate-400",children:Oe==="online"?"Online":"Offline"})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Q(ue),className:"p-2.5 text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 rounded-xl transition",title:"Compare Stats",children:o.jsx(k1,{size:18})}),o.jsxs("button",{disabled:Oe!=="online",className:"px-4 py-2 bg-rose-50 text-rose-600 dark:bg-rose-900/20 dark:text-rose-400 rounded-xl font-bold text-xs flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-rose-100 transition",children:[o.jsx(Os,{size:14})," Duel"]}),o.jsx("button",{onClick:()=>ne(ue.uid),className:"p-2.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition",children:o.jsx(Ur,{size:18})})]})]},ue.uid)})})]}),a==="REQUESTS"&&o.jsx("div",{className:"space-y-3 animate-fade-in-up",children:m.length===0?o.jsxs("div",{className:"text-center py-20 text-slate-400 bg-white/40 dark:bg-slate-800/40 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700",children:[o.jsx(Wp,{size:48,className:"mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No new friend requests."})]}):m.map(ue=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl border border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center font-bold text-indigo-600",children:ue.fromPhotoURL?o.jsx("img",{src:ue.fromPhotoURL,className:"w-full h-full rounded-full object-cover"}):ue.fromUsername[0]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:ue.fromUsername}),o.jsxs("div",{className:"text-xs text-slate-500",children:["Level ",ue.fromLevel]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>_e(ue),className:"px-4 py-2 bg-emerald-500 text-white rounded-xl text-sm font-bold hover:bg-emerald-600 transition shadow-lg shadow-emerald-200 dark:shadow-none",children:"Accept"}),o.jsx("button",{onClick:()=>Me(ue),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl text-sm font-bold hover:bg-slate-200 transition",children:"Decline"})]})]},ue.id))})]})]})},z1=({text:n})=>{if(!n)return null;let e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return e=e.replace(/([\u00BC-\u00BE\u2150-\u215E\u2190-\u21FF\u2200-\u22FF\u2300-\u23FF\u2460-\u24FF\u2500-\u257F\u25A0-\u25FF\u2600-\u26FF\u2700-\u27BF\u2B00-\u2BFF\u{1F000}-\u{1F9FF}])/gu,'<span style="font-size: 2.5em; line-height: 1; vertical-align: middle; display: inline-block; padding: 0 4px;">$1</span>'),o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-800 dark:text-white leading-relaxed"})},iG=({userProfile:n,onBack:e,category:t})=>{var R;const[s,a]=B.useState("LOBBY"),[l,u]=B.useState(""),[h,m]=B.useState(""),[f,y]=B.useState(null),[_,T]=B.useState(!1),[E,M]=B.useState(""),[A,C]=B.useState(0),[D,G]=B.useState(!1),I=B.useRef(null);B.useEffect(()=>()=>{I.current&&I.current()},[]);const q=async()=>{T(!0),G(!0);try{const P=await on("DRILL",t,`1v1 Battle Mode - ${t}. Fast paced questions. Use 3D symbols if TPA/Spatial.`,10,[],t==="SKD"?"CPNS":void 0),U=await e8(n.uid,n.username,t,P);u(U),J(U)}catch{M("Gagal membuat room. Coba lagi.")}finally{T(!1),G(!1)}},X=async()=>{if(h){T(!0);try{await t8(h.toUpperCase(),n.uid,n.username),u(h.toUpperCase()),J(h.toUpperCase())}catch(P){M(P.message||"Gagal join room.")}finally{T(!1)}}},J=P=>{I.current&&I.current(),I.current=n8(P,U=>{y(U),U.status==="STARTING"&&s==="LOBBY"&&(a("GAME"),Z.play("success")),U.status==="FINISHED"&&(a("RESULT"),Z.play("finish"))})},j=async P=>{if(!f)return;const U=f.questions[A],F=P===U.correctAnswer,O=F?10:-2,Ae=f.scores[n.uid]||0,Le=Math.max(0,Ae+O);F?Z.play("success"):Z.play("error"),await s8(f.id,n.uid,Le,A+1),A<f.questions.length-1?C(Y=>Y+1):N(Le)},N=async P=>{if(!f)return;const U=f.hostUid===n.uid?f.guestUid:f.hostUid;if(!U)return;const F=f.scores[U]||0;if((f.progress[U]||0)>=f.questions.length){const Ae=P>F?n.uid:F>P?U:"DRAW";await i8(f.id,Ae)}};if(s==="LOBBY")return o.jsxs("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col p-6",children:[o.jsxs("button",{onClick:e,className:"self-start flex items-center text-slate-400 hover:text-white mb-8",children:[o.jsx(ft,{size:20,className:"mr-2"})," Quit Battle"]}),o.jsxs("div",{className:"max-w-md w-full mx-auto text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-[0_0_30px_rgba(79,70,229,0.5)] animate-pulse",children:o.jsx(wk,{size:40})}),o.jsx("h1",{className:"text-4xl font-black mb-2 uppercase italic tracking-wider",children:"Battle Arena"}),o.jsxs("p",{className:"text-slate-400 mb-8",children:[t," 1v1 Duel"]}),l?o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl border border-indigo-500/50 shadow-2xl",children:[o.jsx("h2",{className:"text-xl font-bold mb-6 text-slate-300",children:"Waiting for Opponent..."}),o.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl mb-6 border border-slate-700",children:[o.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-widest mb-2",children:"Room Code"}),o.jsxs("div",{className:"text-5xl font-mono font-black text-indigo-400 tracking-widest flex items-center justify-center gap-4",children:[l,o.jsx("button",{onClick:()=>navigator.clipboard.writeText(l),className:"p-2 hover:bg-white/10 rounded-full",children:o.jsx(Kl,{size:20})})]})]}),o.jsxs("div",{className:"flex items-center justify-center gap-4 animate-pulse",children:[o.jsx(Or,{size:24,className:"text-emerald-400"}),o.jsx("span",{className:"text-lg font-bold",children:"1/2 Players"})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700",children:[o.jsx("h3",{className:"font-bold text-lg mb-4",children:"Create Room"}),o.jsxs("button",{onClick:q,disabled:_,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-bold transition flex items-center justify-center gap-2",children:[_?o.jsx(Pn,{className:"animate-spin"}):o.jsx(Os,{size:20}),"Host Match"]})]}),o.jsxs("div",{className:"relative flex py-2 items-center",children:[o.jsx("div",{className:"flex-grow border-t border-slate-700"}),o.jsx("span",{className:"flex-shrink-0 mx-4 text-slate-500 text-xs",children:"OR JOIN"}),o.jsx("div",{className:"flex-grow border-t border-slate-700"})]}),o.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700",children:[o.jsx("h3",{className:"font-bold text-lg mb-4",children:"Join Room"}),o.jsx("input",{type:"text",placeholder:"Enter Room Code",value:h,onChange:P=>m(P.target.value.toUpperCase()),className:"w-full bg-slate-900 border border-slate-600 rounded-xl p-4 text-center font-mono text-xl tracking-widest mb-4 focus:border-indigo-500 outline-none"}),o.jsx("button",{onClick:X,disabled:!h||_,className:"w-full py-4 bg-emerald-600 hover:bg-emerald-500 rounded-xl font-bold transition disabled:opacity-50",children:"Join Fight"})]}),E&&o.jsx("p",{className:"text-rose-500 font-bold animate-pulse",children:E})]})]})]});if(s==="GAME"&&f){const P=f.hostUid===n.uid,U=P?f.guestUid:f.hostUid,F=P?f.guestName:f.hostName,O=f.scores[n.uid]||0,Ae=U&&f.scores[U]||0,Le=U&&f.progress[U]||0,Y=f.questions[A],oe=A>=f.questions.length||f.progress[n.uid]>=f.questions.length;return o.jsxs("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"bg-slate-800 p-4 shadow-md flex justify-between items-center z-10 border-b border-slate-700",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-xs text-indigo-400 font-bold",children:"YOU"}),o.jsx("span",{className:"text-2xl font-black",children:O})]}),o.jsx("div",{className:"flex flex-col items-center",children:o.jsx("div",{className:"text-xs font-bold bg-rose-600 px-3 py-1 rounded-full animate-pulse",children:"LIVE"})}),o.jsxs("div",{className:"flex flex-col items-end",children:[o.jsx("span",{className:"text-xs text-rose-400 font-bold truncate max-w-[100px]",children:F||"Opponent"}),o.jsx("span",{className:"text-2xl font-black",children:Ae})]})]}),o.jsxs("div",{className:"h-2 bg-slate-700 w-full flex",children:[o.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-500",style:{width:`${A/f.questions.length*50}%`}}),o.jsx("div",{className:"h-full bg-rose-500 transition-all duration-500 ml-auto",style:{width:`${Le/f.questions.length*50}%`}})]}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-6 relative",children:oe?o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Waiting for results..."}),o.jsx(Pn,{size:48,className:"animate-spin text-indigo-500 mx-auto"})]}):o.jsxs("div",{className:"w-full max-w-2xl",children:[o.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700 mb-6 shadow-xl",children:[o.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 block",children:["Question ",A+1,"/",f.questions.length]}),o.jsx("h3",{className:"text-xl md:text-2xl font-bold leading-relaxed",children:o.jsx(z1,{text:Y.content})})]}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:(R=Y.options)==null?void 0:R.map((_e,Me)=>o.jsx("button",{onClick:()=>j(_e),className:"p-4 rounded-xl border-2 border-slate-700 bg-slate-800 hover:bg-indigo-600 hover:border-indigo-500 hover:scale-[1.02] transition-all text-left font-medium",children:o.jsx(z1,{text:_e})},Me))})]})})]})}if(s==="RESULT"&&f){const P=f.winner===n.uid,U=f.winner==="DRAW";return o.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-6 text-white text-center",children:o.jsxs("div",{className:"max-w-md w-full",children:[o.jsx("div",{className:`w-32 h-32 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl ${P?"bg-emerald-500 shadow-emerald-500/50":"bg-rose-500 shadow-rose-500/50"}`,children:P?o.jsx(Es,{size:64}):U?o.jsx(Or,{size:64}):o.jsx(Fr,{size:64})}),o.jsx("h1",{className:"text-5xl font-black mb-2 italic uppercase",children:P?"VICTORY!":U?"DRAW":"DEFEAT"}),o.jsx("p",{className:"text-slate-400 mb-8 text-lg",children:P?"+100 XP":"+20 XP"}),o.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 border border-slate-700 mb-8",children:[o.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-4 mb-4",children:[o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"text-xs text-slate-500 font-bold uppercase",children:"You"}),o.jsx("div",{className:"text-3xl font-black text-indigo-400",children:f.scores[n.uid]})]}),o.jsx("div",{className:"text-xl font-black text-slate-600",children:"VS"}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-slate-500 font-bold uppercase",children:"Opponent"}),o.jsx("div",{className:"text-3xl font-black text-rose-400",children:f.scores[f.hostUid===n.uid?f.guestUid:f.hostUid]})]})]}),o.jsx("button",{onClick:e,className:"w-full py-3 bg-white text-slate-900 font-bold rounded-xl hover:scale-105 transition",children:"Back to Menu"})]})]})})}return null},cp=({text:n})=>{if(!n)return null;let e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return e=e.replace(/([\u00BC-\u00BE\u2150-\u215E\u2190-\u21FF\u2200-\u22FF\u2300-\u23FF\u2460-\u24FF\u2500-\u257F\u25A0-\u25FF\u2600-\u26FF\u2700-\u27BF\u2B00-\u2BFF\u{1F000}-\u{1F9FF}])/gu,'<span style="font-size: 2.5em; line-height: 1; vertical-align: middle; display: inline-block; padding: 0 4px;">$1</span>'),o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"leading-relaxed"})},aG=({onBack:n,showToast:e})=>{const[t,s]=B.useState([]),[a,l]=B.useState(null);B.useEffect(()=>{const f=localStorage.getItem("fajmuls_marked_questions");if(f)try{s(JSON.parse(f))}catch(y){console.error("Failed to parse marked questions",y)}},[]);const u=f=>{Z.play("click");const y=t.filter(_=>_.id!==f);s(y),localStorage.setItem("fajmuls_marked_questions",JSON.stringify(y)),e("Soal berhasil dihapus.","success")},h=f=>{Z.play("click"),l(a===f?null:f)},m=async f=>{var T;Z.play("click");const y=((T=f.question.options)==null?void 0:T.map((E,M)=>`${String.fromCharCode(65+M)}. ${E}`).join(`
`))||"",_=`[${f.category}] ID: ${f.id}

${f.question.content}

Options:
${y}

Jawaban Benar: ${f.question.correctAnswer}

Pembahasan:
${f.question.explanation}`;try{await navigator.clipboard.writeText(_),e("Soal, jawaban, dan pembahasan berhasil disalin!","success")}catch(E){console.error("Failed to copy: ",E),e("Gagal menyalin ke clipboard.","error")}};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:o.jsx(ft,{size:20})}),o.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx($l,{className:"text-rose-500"})," Soal Ditandai"]})]}),t.length===0?o.jsxs("div",{className:"text-center py-20 text-slate-500 dark:text-slate-400",children:[o.jsx($l,{size:48,className:"mx-auto mb-4 opacity-20"}),o.jsx("p",{children:"Belum ada soal yang ditandai."})]}):o.jsx("div",{className:"space-y-4",children:t.map(f=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden shadow-sm hover:shadow-md transition-all",children:[o.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50",onClick:()=>h(f.id),children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`p-2 rounded-lg ${f.category==="UTBK"?"bg-rose-100 text-rose-600":f.category==="SKD"?"bg-amber-100 text-amber-600":f.category==="TPA"?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-600"}`,children:o.jsx(Us,{size:20})}),o.jsxs("div",{children:[o.jsxs("div",{className:"font-bold text-slate-800 dark:text-white text-sm mb-1",children:[f.category,"  ",new Date(f.dateMarked).toLocaleDateString()]}),o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 line-clamp-1",children:["ID: ",f.id]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:y=>{y.stopPropagation(),u(f.id)},className:"p-2 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition",title:"Hapus",children:o.jsx(Ur,{size:18})}),a===f.id?o.jsx(O8,{size:20,className:"text-slate-400"}):o.jsx(gk,{size:20,className:"text-slate-400"})]})]}),a===f.id&&o.jsxs("div",{className:"p-6 border-t border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 animate-fade-in",children:[o.jsx("div",{className:"flex justify-end mb-4",children:o.jsxs("button",{onClick:y=>{y.stopPropagation(),m(f)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-300 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/40 transition font-bold text-sm",children:[o.jsx(Kl,{size:16})," Salin Semua"]})}),o.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none mb-6 text-slate-800 dark:text-slate-200",children:o.jsx(cp,{text:f.question.content})}),f.question.options&&o.jsx("div",{className:"space-y-2 mb-6",children:f.question.options.map((y,_)=>o.jsx("div",{className:`p-3 rounded-lg border ${y===f.question.correctAnswer?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-700 dark:text-emerald-300":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400"}`,children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("span",{className:"font-bold",children:[String.fromCharCode(65+_),"."]}),o.jsx("div",{className:"flex-1",children:o.jsx(cp,{text:y})}),y===f.question.correctAnswer&&o.jsx(es,{size:16,className:"text-emerald-500 shrink-0 mt-1"})]})},_))}),o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-xl border border-indigo-100 dark:border-indigo-800 text-sm text-slate-700 dark:text-slate-300",children:[o.jsx("h4",{className:"font-bold text-indigo-700 dark:text-indigo-300 mb-2",children:"Pembahasan:"}),o.jsx(cp,{text:f.question.explanation})]})]})]},f.id))})]})})},rG=({user:n})=>{var s,a;const[e,t]=B.useState(!1);return B.useEffect(()=>{t(!1)},[n==null?void 0:n.photoURL]),n!=null&&n.photoURL&&!e?o.jsx("img",{src:n.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full border border-slate-200 dark:border-slate-700 object-cover",onError:()=>t(!0)}):o.jsxs("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-300 font-bold text-sm",children:[" ",((a=(s=n==null?void 0:n.username)==null?void 0:s[0])==null?void 0:a.toUpperCase())||"T"," "]})},jk=({text:n})=>{if(!n)return null;let e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return e=e.replace(/([\u00BC-\u00BE\u2150-\u215E\u2190-\u21FF\u2200-\u22FF\u2300-\u23FF\u2460-\u24FF\u2500-\u257F\u25A0-\u25FF\u2600-\u26FF\u2700-\u27BF\u2B00-\u2BFF\u{1F000}-\u{1F9FF}])/gu,'<span style="font-size: 2.5em; line-height: 1; vertical-align: middle; display: inline-block; padding: 0 4px;">$1</span>'),o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},oG=({message:n,type:e,onClose:t})=>{const s=e==="success"?"bg-emerald-500":e==="error"?"bg-rose-500":"bg-indigo-600",a=e==="success"?o.jsx(es,{size:20}):e==="error"?o.jsx(qf,{size:20}):o.jsx(E9,{size:20});return B.useEffect(()=>{const l=setTimeout(t,3e3);return()=>clearTimeout(l)},[t]),o.jsxs("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl text-white ${s} animate-fade-in-down transition-all`,children:[" ",a," ",o.jsx("span",{className:"font-bold text-sm",children:n})," ",o.jsx("button",{onClick:t,className:"ml-4 hover:bg-white/20 p-1 rounded-full",children:o.jsx(Fr,{size:18})})," "]})},lG=({session:n,onResume:e,onDiscard:t})=>{const s=Math.round(Object.keys(n.answerMap).length/n.questions.length*100);return o.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:[" ",o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700 text-center",children:[" ",o.jsxs("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:[" ",o.jsx(Uu,{size:32})," "]})," ",o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Tes Belum Selesai"})," ",o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:[" Ditemukan sesi ",o.jsx("b",{children:n.packageTitle||n.category})," yang belum diselesaikan. Ingin melanjutkan? "]})," ",o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-6 text-left",children:[" ",o.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 dark:text-slate-400 mb-1",children:[" ",o.jsx("span",{children:"Progress"})," ",o.jsxs("span",{children:[s,"%"]})," "]})," ",o.jsxs("div",{className:"w-full bg-slate-200 dark:bg-slate-600 h-2 rounded-full overflow-hidden",children:[" ",o.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${s}%`}})," "]})," "]})," ",o.jsxs("div",{className:"flex flex-col gap-3",children:[" ",o.jsxs("button",{onClick:e,className:"w-full py-3.5 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[" ",o.jsx(Oo,{size:20})," Lanjutkan Tes "]})," ",o.jsxs("button",{onClick:t,className:"w-full py-3.5 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition flex items-center justify-center gap-2",children:[" ",o.jsx(Ur,{size:20})," Hapus & Menu Utama "]})," "]})," "]})," "]})},cG=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",children:[" ",o.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"})," ",o.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"})," ",o.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"})," ",o.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})," "]}),uG=({onGoogleLogin:n,onGuestLogin:e,isLoading:t})=>{const[s,a]=B.useState(!0);return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6 transition-colors duration-300",children:[" ",o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700 text-center relative overflow-hidden",children:[" ",t&&o.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-slate-900/80 z-20 flex flex-col items-center justify-center",children:[" ",o.jsx(Pn,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"})," ",o.jsx("p",{className:"font-bold text-slate-600 dark:text-slate-300",children:"Menghubungkan..."})," "]})," ",o.jsxs("div",{className:"mb-8 flex justify-center",children:[" ",o.jsx("img",{src:Nh,alt:"Logo",className:"w-24 h-24 object-contain animate-bounce-slow"})," "]})," ",o.jsxs("div",{className:"text-center mb-8",children:[" ",o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Fajmuls Learning"})," ",o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Platform Belajar Cerdas Terintegrasi AI"})," "]})," ",o.jsxs("div",{className:"space-y-4",children:[" ",o.jsxs("button",{onClick:()=>n(s),className:"w-full py-3 bg-white hover:bg-slate-50 text-slate-700 font-medium rounded-full border border-slate-300 shadow-sm hover:shadow-md transition-all flex items-center justify-center gap-3 relative",children:[" ",o.jsx("div",{className:"absolute left-4",children:o.jsx(cG,{})})," ",o.jsx("span",{className:"text-base font-roboto font-bold",children:"Masuk dengan Google"})," "]})," ",o.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[" ",o.jsx("input",{type:"checkbox",id:"remember",checked:s,onChange:l=>a(l.target.checked),className:"w-4 h-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500 dark:focus:ring-indigo-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})," ",o.jsx("label",{htmlFor:"remember",className:"cursor-pointer select-none",children:"Tetap masuk di perangkat ini"})," "]})," ",o.jsxs("div",{className:"relative flex py-2 items-center",children:[" ",o.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})," ",o.jsx("span",{className:"flex-shrink-0 mx-4 text-slate-400 text-xs",children:"ATAU"})," ",o.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})," "]})," ",o.jsxs("button",{onClick:e,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[" Masuk sebagai Tamu ",o.jsx(_r,{size:20})," "]})," ",o.jsx("p",{className:"text-xs text-slate-400 mt-2",children:" *Mode Tamu: Riwayat hanya tersimpan di perangkat ini & tidak masuk Leaderboard. "})," "]})," "]})," "]})},dG=({onSubmit:n,isLoading:e})=>{const[t,s]=B.useState(""),[a,l]=B.useState(""),u=h=>{if(h.preventDefault(),t.length<3){l("Username minimal 3 karakter.");return}if(!/^[a-zA-Z0-9_]+$/.test(t)){l("Hanya huruf, angka, dan underscore (_).");return}n(t)};return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6",children:[" ",o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700",children:[" ",o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Buat Username"})," ",o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Pilih nama unik untuk identitas belajarmu."})," ",o.jsxs("form",{onSubmit:u,children:[" ",o.jsxs("div",{className:"mb-4",children:[" ",o.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Username"})," ",o.jsx("input",{type:"text",className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none font-bold",placeholder:"Username_Unik",value:t,onChange:h=>{s(h.target.value.replace(/\s/g,"")),l("")},autoFocus:!0})," ",a&&o.jsx("p",{className:"text-rose-500 text-xs mt-2 font-bold",children:a})," "]})," ",o.jsxs("button",{type:"submit",disabled:e||!t,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition flex items-center justify-center gap-2",children:[" ",e?o.jsx(Pn,{className:"animate-spin"}):o.jsx(es,{size:20})," Simpan & Lanjut "]})," "]})," "]})," "]})},hG=({result:n,feature:e,onBack:t})=>o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center",children:o.jsxs("div",{className:"max-w-3xl w-full",children:[o.jsxs("button",{onClick:t,className:"mb-4 text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[o.jsx(ft,{size:18})," Kembali"]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-2xl font-bold mb-6 text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(Gf,{size:28,className:"text-indigo-600"})," Hasil ",e]}),o.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:o.jsx(jk,{text:n})})]})]})}),fG=({questions:n,onComplete:e})=>{const[t,s]=B.useState(0),[a,l]=B.useState(""),[u,h]=B.useState(null),[m,f]=B.useState(!1),[y,_]=B.useState([]),T=n[t],E=async()=>{if(a.trim()){f(!0);try{const A=await Sj(T.content,a);h(A)}catch{alert("Gagal evaluasi.")}finally{f(!1)}}},M=()=>{const A={questionId:T.id,selectedAnswer:a,isCorrect:!0,scoreEarned:(u==null?void 0:u.score)||0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,interviewFeedback:u||void 0},C=[...y,A];_(C),l(""),h(null),t<n.length-1?s(t+1):e(C)};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"mb-4 text-sm font-bold text-slate-400",children:["Pertanyaan ",t+1," dari ",n.length]}),o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6",children:T.content}),u?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:["Skor: ",u.score,"/100"]}),o.jsx("span",{className:"text-sm bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 px-2 py-1 rounded",children:u.toneAnalysis})]}),o.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:[o.jsx("b",{children:"Feedback:"})," ",u.feedback]}),o.jsxs("div",{className:"text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300 p-3 rounded-lg border border-emerald-100 dark:border-emerald-800",children:[o.jsx("b",{children:"Saran Jawaban:"})," ",u.improvedAnswer]})]}),o.jsx("button",{onClick:M,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90",children:"Lanjut"})]}):o.jsxs(o.Fragment,{children:[o.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-40 focus:ring-2 focus:ring-indigo-500",placeholder:"Jawab seolah sedang interview...",value:a,onChange:A=>l(A.target.value)}),o.jsxs("button",{onClick:E,disabled:m||!a,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[m?o.jsx(Pn,{className:"animate-spin"}):o.jsx(Hf,{size:18})," Submit Jawaban"]})]})]})})},mG=({flashcards:n,onFinish:e})=>{const[t,s]=B.useState(0),a=l=>{t<n.length-1?s(t+1):e()};return n.length===0?o.jsx("div",{children:"No Flashcards"}):o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:[o.jsxs("div",{className:"w-full max-w-xl mb-6 flex justify-between items-center",children:[o.jsx("button",{onClick:e,className:"text-slate-500 hover:text-indigo-600",children:o.jsx(ft,{size:20})}),o.jsxs("span",{className:"font-bold text-slate-400",children:[t+1," / ",n.length]})]}),o.jsx(X7,{data:n[t],onNext:a})]})},pG=({topic:n,onFinish:e})=>{const[t,s]=B.useState(""),[a,l]=B.useState(null),[u,h]=B.useState(!1),m=async()=>{h(!0);try{const f=await Ej(n,t);l(f)}catch{alert("Error")}finally{h(!1)}};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Feynman Technique"}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Jelaskan topik ",o.jsxs("b",{children:['"',n,'"']})," seolah-olah Anda sedang mengajari anak kecil (5 tahun)."]}),a?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[o.jsx("div",{className:"flex items-center gap-2 mb-4",children:o.jsxs("div",{className:`text-2xl font-bold ${a.understandingScore>70?"text-emerald-500":"text-amber-500"}`,children:[a.understandingScore,"/100"]})}),o.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[o.jsxs("p",{children:[o.jsx("b",{children:"Kualitas Penyederhanaan:"})," ",a.simplificationQuality]}),o.jsxs("p",{children:[o.jsx("b",{children:"Konsep yang Terlewat:"})," ",a.missingConcepts.join(", ")||"Tidak ada"]}),o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg border border-indigo-100 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[o.jsx("b",{children:"Koreksi / Saran:"})," ",a.correction]})]})]}),o.jsx("button",{onClick:e,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold",children:"Selesai Belajar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-48 focus:ring-2 focus:ring-indigo-500",placeholder:"Mulai jelaskan di sini...",value:t,onChange:f=>s(f.target.value)}),o.jsx("button",{onClick:m,disabled:u||!t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50",children:u?"Menganalisis...":"Cek Pemahaman Saya"})]})]})})},gG=({topic:n,onFinish:e})=>{const t=["Survey","Question","Read","Recite","Review"],[s,a]=B.useState(0);return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx("div",{className:"flex justify-center mb-8",children:t.map((l,u)=>o.jsxs("div",{className:`flex items-center ${u<t.length-1?"w-full":""}`,children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${u<=s?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:l[0]}),u<t.length-1&&o.jsx("div",{className:`h-1 flex-1 ${u<s?"bg-indigo-600":"bg-slate-100 dark:bg-slate-700"}`})]},l))}),o.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-4",children:t[s]}),o.jsxs("p",{className:"text-lg text-slate-600 dark:text-slate-300 mb-8",children:["Lakukan tahap ",t[s],' untuk materi "',n,'".']}),o.jsx("button",{onClick:()=>{s<4?a(s+1):e()},className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:s<4?"Lanjut Tahap Berikutnya":"Selesai SQ3R"})]})})},H1=()=>{const n=new WeakSet;return(e,t)=>{if(typeof t=="object"&&t!==null){if(n.has(t))return;n.add(t)}return t}},xG=({sessions:n,onBack:e,onResume:t,onDelete:s,loading:a})=>{const l=h=>{switch(h){case"UTBK":return{icon:oc,color:"text-rose-600",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800"};case"SKD":return{icon:Ff,color:"text-amber-600",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800"};case"PSIKOTEST":return{icon:_s,color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800"};case"TPA":return{icon:Os,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800"};case"KECERMATAN":return{icon:Do,color:"text-emerald-600",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800"};default:return{icon:Us,color:"text-slate-600",bg:"bg-slate-100 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"}}},u=h=>{const m=Math.floor(h/3600),f=Math.floor(h%3600/60),y=Math.floor(h%60);return`${m>0?m+":":""}${f.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`};return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:[" ",o.jsxs("div",{className:"max-w-5xl mx-auto",children:[" ",o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[" ",o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:o.jsx(ft,{size:20})})," ",o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Lanjutkan Sesi Tersimpan"})," "]})," ",a?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx(Pn,{className:"animate-spin text-indigo-600 w-8 h-8"})}):n.length===0?o.jsxs("div",{className:"text-center py-20 text-slate-500 dark:text-slate-400",children:[" ",o.jsx(Uu,{size:48,className:"mx-auto mb-4 opacity-20"})," ",o.jsx("p",{children:"Tidak ada sesi tersimpan."})," "]}):o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[" ",n.map(h=>{const m=Math.round(Object.keys(h.answerMap).length/h.questions.length*100),f=l(h.category),y=f.icon;return o.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-3xl border-2 ${f.border} shadow-sm flex flex-col gap-4 animate-fade-in-up hover:shadow-md transition-all`,children:[" ",o.jsxs("div",{className:"flex justify-between items-start",children:[" ",o.jsxs("div",{className:`p-3 rounded-xl ${f.bg} ${f.color}`,children:[" ",o.jsx(y,{size:24})," "]})," ",o.jsxs("div",{className:"text-right",children:[" ",o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-1",children:"SISA WAKTU"})," ",o.jsxs("div",{className:`font-mono text-xl font-bold ${h.timeLeft<300?"text-rose-500":"text-slate-800 dark:text-white"}`,children:[" ",u(h.timeLeft)," "]})," "]})," "]})," ",o.jsxs("div",{children:[" ",o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[" ",o.jsxs("span",{className:"font-bold text-lg text-slate-800 dark:text-white line-clamp-1",title:h.packageTitle||h.category,children:[" ",h.packageTitle||h.category," "]})," "]})," ",o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded inline-block mb-3",children:[" ",new Date(h.timestamp).toLocaleDateString(),"  ",h.questions.length," Soal "]})," ",o.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 dark:text-slate-400 mb-1",children:[" ",o.jsx("span",{children:"Progress"})," ",o.jsxs("span",{children:[m,"%"]})," "]})," ",o.jsxs("div",{className:"w-full bg-slate-100 dark:bg-slate-700 h-2 rounded-full overflow-hidden",children:[" ",o.jsx("div",{className:`h-full ${h.category==="UTBK"?"bg-rose-500":"bg-indigo-500"}`,style:{width:`${m}%`}})," "]})," "]})," ",o.jsxs("div",{className:"flex gap-2 mt-2",children:[" ",o.jsxs("button",{onClick:()=>s(h.id),className:"p-3 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition border border-rose-200 dark:border-rose-900/50",children:[" ",o.jsx(Ur,{size:20})," "]})," ",o.jsxs("button",{onClick:()=>t(h),className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[" ",o.jsx(Oo,{size:18,fill:"currentColor"})," Lanjutkan "]})," "]})," "]},h.id||h.timestamp)})," "]})," "]})," "]})},yG=n=>{const{category:e,onBack:t,onStartSession:s,onOpenTOSelection:a,onStartTesKoran:l,onStartTesKecermatan:u,onGeneralInputSubmit:h,generalInput:m,setGeneralInput:f,isReadingMaterial:y,onResetMaterial:_,onSubtestSelect:T,selectedSubtest:E,weakTopicsCount:M,loading:A,skdStream:C,onSkdStreamSelect:D,onHistory:G,onStartGeneralSession:I,onStartSkripsiSession:q,username:X,isDarkMode:J,onToggleDarkMode:j,tpaStream:N,onTpaStreamSelect:R,onOpenAcademicHub:P,onBattle:U}=n,[F,O]=B.useState(""),[Ae,Le]=B.useState(null),[Y,oe]=B.useState("MEDIUM"),[_e,Me]=B.useState("MEDIUM"),[ne,z]=B.useState(!1),Q=B.useRef(null),[fe,ie]=B.useState(""),[ce,Te]=B.useState(5),[xe,nt]=B.useState("Medium"),Qe=at=>{var ue;const Ge=(ue=at.target.files)==null?void 0:ue[0];if(Ge){if(Ge.type!=="application/pdf"){alert("Hanya file PDF yang diperbolehkan.");return}Le(Ge.name),O(""),z(!0);const Oe=new FileReader;Oe.onload=et=>{var Rn;const We=((Rn=et.target)==null?void 0:Rn.result).split(",")[1];setTimeout(()=>{f&&f({type:"pdf",content:We,title:Ge.name,lengthPreference:Y,difficultyPreference:_e}),z(!1)},800)},Oe.readAsDataURL(Ge)}},St=()=>{(m==null?void 0:m.type)==="pdf"?h({...m,lengthPreference:Y,difficultyPreference:_e}):F?h({type:"text",content:F,title:"Input Manual",lengthPreference:Y,difficultyPreference:_e}):alert("Mohon masukkan teks atau upload PDF.")},At=at=>{const Ge=at.filter(ue=>ue.toLowerCase().includes(fe.toLowerCase()));return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6 animate-fade-in-up",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Pilih Topik / Subtes:"}),o.jsxs("div",{className:"mb-4 relative",children:[o.jsx(fu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),o.jsx("input",{type:"text",placeholder:"Cari topik...",value:fe,onChange:ue=>ie(ue.target.value),className:"w-full pl-10 p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Ge.length>0?Ge.map(ue=>o.jsx("button",{onClick:()=>{Z.play("tap"),T(ue)},className:`px-4 py-2 rounded-full text-sm font-medium transition ${E===ue?"bg-indigo-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:ue},ue)):o.jsx("div",{className:"text-sm text-slate-500 italic p-2",children:"Tidak ada topik yang cocok."})}),E&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&o.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-6 animate-fade-in-up",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[o.jsxs("div",{className:"flex-1 w-full",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Jumlah Soal"}),o.jsxs("select",{value:ce,onChange:ue=>Te(Number(ue.target.value)),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[o.jsx("option",{value:"5",children:"5 Soal"}),o.jsx("option",{value:"10",children:"10 Soal"}),o.jsx("option",{value:"15",children:"15 Soal"}),o.jsx("option",{value:"20",children:"20 Soal"})]})]}),o.jsxs("div",{className:"flex-1 w-full",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Tingkat Kesulitan"}),o.jsxs("select",{value:xe,onChange:ue=>nt(ue.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[o.jsx("option",{value:"Easy",children:"Mudah"}),o.jsx("option",{value:"Medium",children:"Sedang"}),o.jsx("option",{value:"Hard",children:"Sulit"}),o.jsx("option",{value:"HOTS",children:"HOTS (Analisis Tinggi)"})]})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),s(Fe.PRACTICE,xe,ce)},className:"w-full sm:w-auto px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[o.jsx(Zp,{size:18})," Mulai Latihan"]})]})}),e==="INTERVIEW"&&E&&o.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-4 animate-fade-in-up",children:o.jsxs("button",{onClick:()=>{Z.play("click"),s(Fe.DRILL)},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[o.jsx(Hf,{size:20})," Mulai Sesi Wawancara"]})})]})};return o.jsxs("div",{className:"min-h-screen bg-transparent",children:[o.jsx(W7,{}),o.jsxs("div",{className:"max-w-5xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("button",{onClick:()=>{Z.play("back"),t()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium",children:[o.jsx(ft,{size:18,className:"mr-2"})," Kembali"]}),o.jsxs("div",{className:"flex items-center gap-3",children:[j&&o.jsx("button",{onClick:()=>{j()},className:"p-2 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 transition",children:J?o.jsx(Ek,{size:16}):o.jsx(gx,{size:16})}),o.jsxs("span",{className:"text-xs font-bold text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full flex items-center gap-1",children:[o.jsx(Nk,{size:12})," ",X]})]})]}),o.jsx("div",{className:"flex justify-between items-end mb-8",children:o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-bold tracking-wider text-indigo-600 uppercase mb-1 block",children:e==="TPA"?"Seleksi Lanjutan":e+" Dashboard"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Pusat Kendali Belajar"})]})}),A?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[o.jsx(Pn,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"}),o.jsx("p",{className:"text-slate-500 font-medium",children:"AI sedang memproses materi..."}),o.jsx("div",{className:"max-w-md w-full mt-8 space-y-4",children:o.jsx(eB,{})})]}):o.jsxs(o.Fragment,{children:[e==="KECERMATAN"&&o.jsx("div",{className:"animate-fade-in-up",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),u("ANGKA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg text-indigo-600 dark:text-indigo-400",children:o.jsx(Xn,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Angka Hilang"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Standar tes kedinasan/Polri. Temukan angka yang hilang dari kolom."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),u("HURUF")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg text-emerald-600 dark:text-emerald-400",children:o.jsx(Us,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Huruf Hilang"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Variasi huruf. Melatih ketelitian visual terhadap karakter mirip."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),u("SIMBOL_HILANG")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-purple-50 dark:hover:bg-purple-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-purple-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg text-purple-600 dark:text-purple-400",children:o.jsx(g7,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Simbol Hilang"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Temukan simbol yang hilang. Melatih ketelitian visual bentuk abstrak."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),u("SAMA_BEDA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-amber-50 dark:hover:bg-amber-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-amber-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg text-amber-600 dark:text-amber-400",children:o.jsx(p9,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Sama Beda Simbol"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Bandingkan dua baris simbol. Tentukan SAMA atau BEDA secepat mungkin."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),u("MATCHING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-rose-50 dark:hover:bg-rose-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-rose-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-rose-100 dark:bg-rose-900/40 rounded-lg text-rose-600 dark:text-rose-400",children:o.jsx(Lr,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Matching (Pencocokan)"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cocokkan simbol dengan kode kuncinya. Melatih memori kerja jangka pendek."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),u("GROUPING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-cyan-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-cyan-100 dark:bg-cyan-900/40 rounded-lg text-cyan-600 dark:text-cyan-400",children:o.jsx(C9,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Grouping (Pengelompokan)"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Pilih semua simbol yang diminta dari grid acak. Melatih fokus selektif."})]})]})}),e==="SKRIPSI"&&o.jsx("div",{className:"animate-fade-in-up max-w-2xl mx-auto",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(Gf,{size:24,className:"text-indigo-600"})," Skripsi Assistant"]}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Masukkan topik atau judul skripsi Anda untuk mendapatkan bantuan AI."}),o.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:ring-2 focus:ring-indigo-500 h-32",placeholder:"Contoh: Pengaruh Kecerdasan Buatan terhadap Minat Belajar Mahasiswa Teknik Informatika...",value:F,onChange:at=>O(at.target.value)}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),q&&q("TITLE_IDEAS",F)},className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 rounded-xl font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/40 flex flex-col items-center gap-2 border border-indigo-100 dark:border-indigo-800",children:[o.jsx(_s,{size:24})," Ide Judul"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),q&&q("OUTLINE",F)},className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/40 flex flex-col items-center gap-2 border border-emerald-100 dark:border-emerald-800",children:[o.jsx(Us,{size:24})," Buat Outline"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),q&&q("METHODOLOGY",F)},className:"p-4 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-xl font-bold hover:bg-amber-100 dark:hover:bg-amber-900/40 flex flex-col items-center gap-2 border border-amber-100 dark:border-amber-800",children:[o.jsx(fu,{size:24})," Cek Metodologi"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),q&&q("PARAPHRASE",F)},className:"p-4 bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-300 rounded-xl font-bold hover:bg-rose-100 dark:hover:bg-rose-900/40 flex flex-col items-center gap-2 border border-rose-100 dark:border-rose-800",children:[o.jsx(a9,{size:24})," Parafrase Teks"]})]})]})}),e==="GENERAL"&&o.jsx("div",{className:"space-y-8 animate-fade-in-up",children:y?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-slate-100 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(Xp,{size:20})," Materi Belajar"]}),o.jsx("button",{onClick:_,className:"text-sm text-rose-500 hover:underline",children:"Ganti Materi"})]}),(m==null?void 0:m.type)==="pdf"&&m.content&&o.jsx("div",{className:"mb-6",children:o.jsx("embed",{src:`data:application/pdf;base64,${m.content}`,className:"w-full h-[500px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})}),o.jsx("div",{className:"prose prose-sm max-w-none text-slate-700 dark:text-slate-300 leading-relaxed max-h-[400px] overflow-y-auto p-2 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-700",children:o.jsx(jk,{text:(m==null?void 0:m.extractedText)||(m==null?void 0:m.content)||""})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Sudah selesai membaca? Pilih Metode Belajar:"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:eC.map(at=>{const ue={Brain:_s,Repeat:l7,MessageCircle:F9,Share2:y7,Search:fu,GraduationCap:oc,BookOpen:Xp,PenTool:Zp}[at.icon]||_s;return o.jsxs("button",{onClick:()=>{Z.play("click"),I(at.id)},className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:shadow-md transition text-left flex flex-col h-full",children:[o.jsx("div",{className:"mb-3 text-indigo-600 dark:text-indigo-400",children:o.jsx(ue,{size:24})}),o.jsx("h4",{className:"font-bold text-sm mb-1 text-slate-900 dark:text-white",children:at.name}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:at.desc})]},at.id)})})]})]}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(bx,{size:20})," Input Materi"]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Masukkan topik, teks materi, atau upload PDF yang ingin dipelajari."}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx("input",{type:"text",className:"flex-1 p-3 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl",placeholder:Ae?`PDF Terpilih: ${Ae}`:"Contoh: Perang Dunia II, Hukum Newton, atau paste teks...",value:F,disabled:!!Ae,onChange:at=>{O(at.target.value)}}),o.jsx("input",{type:"file",ref:Q,accept:"application/pdf",className:"hidden",onChange:Qe}),o.jsxs("button",{className:`p-3 rounded-xl transition flex items-center gap-2 ${Ae?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200"}`,title:"Upload PDF",onClick:()=>{var at;return(at=Q.current)==null?void 0:at.click()},children:[o.jsx(Us,{size:20}),o.jsx("span",{className:"hidden sm:inline font-bold text-sm",children:"Upload PDF"})]})]}),Ae&&o.jsxs("div",{className:"mb-4 text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 px-4 py-2 rounded-lg flex items-center justify-between animate-fade-in-up border border-emerald-100 dark:border-emerald-800",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(es,{size:16})," ",o.jsxs("span",{children:["File siap: ",o.jsx("b",{children:Ae})]})]}),o.jsx("button",{onClick:()=>{Le(null),f&&f(null),Q.current&&(Q.current.value="")},className:"text-slate-400 hover:text-rose-500",title:"Hapus PDF",children:o.jsx(Ur,{size:16})})]}),ne?o.jsxs("div",{className:"mb-6 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-2",children:[o.jsx(Pn,{size:14,className:"animate-spin"})," Memuat Preview PDF..."]}),o.jsx(vo,{height:"h-[300px]",className:"rounded-xl"})]}):(m==null?void 0:m.type)==="pdf"&&m.content&&o.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 mb-2 block",children:"Preview PDF:"}),o.jsx("embed",{src:`data:application/pdf;base64,${m.content}`,className:"w-full h-[300px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Panjang Materi (Ringkasan)"}),o.jsxs("select",{value:Y,onChange:at=>oe(at.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[o.jsx("option",{value:"SHORT",children:"Ringkas / Poin Penting"}),o.jsx("option",{value:"MEDIUM",children:"Standar (Rekomedasi)"}),o.jsx("option",{value:"LONG",children:"Mendalam / Detail"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Tingkat Kesulitan Soal"}),o.jsxs("select",{value:_e,onChange:at=>Me(at.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[o.jsx("option",{value:"EASY",children:"Mudah (Recall)"}),o.jsx("option",{value:"MEDIUM",children:"Sedang (Konseptual)"}),o.jsx("option",{value:"HARD",children:"Sulit / HOTS"})]})]})]}),o.jsx("button",{onClick:()=>{Z.play("click"),St()},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Proses & Baca Materi"})]})}),e==="UTBK"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>{Z.play("click"),a()},className:"w-full bg-emerald-600 dark:bg-emerald-600 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group shadow-lg shadow-emerald-200 dark:shadow-none hover:bg-emerald-700 transition-all",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(Cr,{size:24,className:"text-white/80"})," Simulasi UTBK SNBT Full"]}),o.jsx("p",{className:"text-emerald-100 text-sm mt-1",children:"160 Soal. Durasi 195 Menit. Format Resmi 2025."})]}),o.jsx(_r,{className:"group-hover:translate-x-2 transition-transform"})]}),At(tC)]}),e==="TPA"&&o.jsx(o.Fragment,{children:N?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-600 dark:text-slate-300",children:[o.jsx("button",{onClick:()=>{Z.play("click"),R&&R(null)},className:"underline hover:text-indigo-600",children:"Ubah Jalur"})," ",o.jsx(_r,{size:14})," ",o.jsx("b",{className:"uppercase",children:N==="TPA_TBI"?"TPA & TBI":"Psikotes PKN STAN"})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),a()},className:"w-full bg-emerald-600 dark:bg-emerald-600 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group shadow-lg hover:bg-emerald-700 transition-all",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(Cr,{size:24,className:"text-white/80"})," Simulasi ",N==="TPA_TBI"?"TPA & TBI":"Psikotes"," Full"]}),o.jsx("p",{className:"text-emerald-100 text-sm mt-1",children:N==="TPA_TBI"?"65 Soal. 100 Menit.":"TIU, Logika Gambar, Kepribadian."})]}),o.jsx(_r,{className:"group-hover:translate-x-2 transition-transform"})]}),At(N==="TPA_TBI"?sC:iC)]}):o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8 animate-fade-in-up",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),R&&R("TPA_TBI")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-blue-500 dark:hover:border-blue-500 transition text-center group shadow-sm",children:[o.jsx(_s,{size:48,className:"mx-auto mb-4 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"TPA & TBI"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Seleksi Pascasarjana & Umum"})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),R&&R("PSIKOTEST_KEDINASAN")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-purple-500 dark:hover:border-purple-500 transition text-center group shadow-sm",children:[o.jsx(Ff,{size:48,className:"mx-auto mb-4 text-purple-600 dark:text-purple-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Psikotes Kedinasan"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Seleksi Lanjutan I PKN STAN"})]})]})}),e==="PSIKOTEST"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),l()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 transition text-center group shadow-sm",children:[o.jsx(I8,{size:48,className:"mx-auto mb-4 text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Tes Koran (Pauli/Kraepelin)"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Uji kecepatan, ketelitian, dan stabilitas emosi dengan menjumlahkan angka."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),a()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 transition text-center group shadow-sm",children:[o.jsx(_s,{size:48,className:"mx-auto mb-4 text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Psikotes Logika & IQ"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Analogi, Deret Angka, dan Penalaran Logis (HOTS)."})]})]}),o.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Latihan Per Subtes"}),At(aC)]})]}),e==="INTERVIEW"&&At(rC),e==="SKD"&&(C?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-600 dark:text-slate-300",children:[o.jsx("button",{onClick:()=>D(null),className:"underline",children:"Ubah Jalur"})," ",o.jsx(_r,{size:14})," ",o.jsx("b",{children:C})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),a()},className:"w-full bg-emerald-600 dark:bg-emerald-600 text-white p-6 rounded-2xl mb-8 flex justify-between items-center shadow-lg hover:bg-emerald-700 transition-all",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(Cr,{size:24,className:"text-white/80"})," Simulasi SKD CAT (110 Soal)"]}),o.jsx("p",{className:"text-emerald-100 text-sm mt-1",children:"TWK, TIU, TKP. Durasi 100 Menit. Scoring Resmi."})]}),o.jsx(_r,{className:"group-hover:translate-x-2 transition-transform"})]}),At(nC)]}):o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),D("KEDINASAN")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[o.jsx(N9,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Sekolah Kedinasan"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"STAN, STIS, IPDN, dll"})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),D("CPNS")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[o.jsx(A8,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"CPNS Umum"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Kementerian & Lembaga"})]})]})),e!=="GENERAL"&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&e!=="PSIKOTEST"&&e!=="KECERMATAN"&&e!=="BENCHMARK"&&o.jsxs("div",{className:"mt-8 animate-fade-in-up delay-100",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Mode Belajar Lainnya"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),s(Fe.DRILL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[o.jsx(Os,{className:"text-amber-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Learn & Drill"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Materi + 1 Soal"})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),s(Fe.ACTIVE_RECALL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[o.jsx(_s,{className:"text-emerald-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Active Recall"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Isian Singkat"})]}),M>0&&o.jsxs("button",{onClick:()=>{Z.play("click"),s(Fe.WEAKNESS)},className:"p-4 bg-white dark:bg-slate-800 border border-rose-200 dark:border-rose-900 rounded-xl hover:border-rose-500 hover:shadow-md transition text-left",children:[o.jsx(Lr,{className:"text-rose-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Weakness Attack"}),o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[M," Topik Lemah"]})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),P&&P()},className:"p-4 bg-white dark:bg-slate-800 border border-emerald-200 dark:border-emerald-900 rounded-xl hover:border-emerald-500 hover:shadow-md transition text-left",children:[o.jsx(No,{className:"text-emerald-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Analisis Akademik"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Target Skor & Review"})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),U&&U()},className:"p-4 bg-white dark:bg-slate-800 border border-indigo-200 dark:border-indigo-900 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[o.jsx(wk,{className:"text-indigo-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Battle Arena"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"1v1 Duel"})]})]})]})]})]})]})};function bG(){var ra;const[n,e]=B.useState("SPLASH"),[t,s]=B.useState(null),[a,l]=B.useState(!1),[u,h]=B.useState(!0),[m,f]=B.useState("DASHBOARD"),[y,_]=B.useState(!1),[T,E]=B.useState(null),[M,A]=B.useState(null),[C,D]=B.useState(""),[G,I]=B.useState([]),[q,X]=B.useState(!1),[J,j]=B.useState({soundEnabled:!0,musicEnabled:!0,volume:.5,funnyNotifications:!0,confirmActions:!0,darkMode:!1,theme:"light",appBaseColor:"#ffffff",appPattern:"none",fontSize:"md"}),[N,R]=B.useState(null),[P,U]=B.useState(!1),[F,O]=B.useState(null),[Ae,Le]=B.useState(!1),[Y,oe]=B.useState(""),[_e,Me]=B.useState(null),[ne,z]=B.useState(null),[Q,fe]=B.useState(null),[ie,ce]=B.useState(new Set),[Te,xe]=B.useState("ANGKA"),[nt,Qe]=B.useState(null),[St,At]=B.useState(null),[at,Ge]=B.useState([]),[ue,Oe]=B.useState(null),[et,We]=B.useState(null),[Rn,Mt]=B.useState(""),[xt,Gt]=B.useState([]),[oi,Bn]=B.useState(null),[qt,Pt]=B.useState([]),[Tn,Ft]=B.useState(!1),[ws,Vs]=B.useState(void 0),[ta,Ai]=B.useState([]),[Ne,Se]=B.useState(!1),[we,ze]=B.useState(null),[st,Lt]=B.useState(void 0),[Mn,Gn]=B.useState(!1),[Ut,pn]=B.useState([]),[Xt,ls]=B.useState(null),[Fn,Ot]=B.useState(null),Je=(K,he)=>Ot({msg:K,type:he}),[Ns,zn]=B.useState([...t_,...n_,...s_,...r_,...l_,...i_,...a_,...o_]),Ci=async K=>{try{const he=localStorage.getItem("fajmuls_active_session");if(he){const me=JSON.parse(he);if(me.uid===K&&Date.now()-me.timestamp<1440*60*1e3)return ze(me),!0;localStorage.removeItem("fajmuls_active_session")}}catch{localStorage.removeItem("fajmuls_active_session")}return!1},lc=K=>{s(K.category),Me(K.mode),Gt(K.questions),Bn(K.drillContent),K.skdStream&&z(K.skdStream),K.tpaStream&&fe(K.tpaStream),K.packageTitle&&Lt(K.packageTitle),Vs(K),ze(null),e("SESSION")},na=()=>{localStorage.removeItem("fajmuls_active_session"),ze(null)},zr=async()=>{if(Z.play("click"),!(N!=null&&N.uid)||N.isGuest){Je("Fitur ini hanya untuk pengguna login.","info");return}Se(!0),e("RESUME_LIST");try{const K=await BV(N.uid);Ai(K)}catch{Je("Gagal memuat sesi tersimpan.","error")}finally{Se(!1)}},Fa=async K=>{Z.play("click"),lc(K),K.id&&(N!=null&&N.uid)&&await S1(N.uid,K.id)},sa=async K=>{Z.play("click"),N!=null&&N.uid&&(await S1(N.uid,K),Ai(he=>he.filter(me=>me.id!==K&&String(me.timestamp)!==K)),Je("Sesi dihapus.","success"))};B.useEffect(()=>{const K=localStorage.getItem("fajmuls_settings");if(K){const me=JSON.parse(K);me.theme||(me.theme=me.darkMode?"dark":"light"),me.appBaseColor||(me.appBaseColor=me.darkMode?"#0f172a":"#ffffff",me.appBackground==="grid"?me.appPattern="grid":me.appBackground==="dots"?me.appPattern="dots":me.appBackground==="waves"?me.appPattern="waves":me.appBackground==="aurora"?me.appPattern="aurora":me.appBackground==="fajmuls"?me.appPattern="fajmuls":me.appPattern="none"),me.fontSize||(me.fontSize="md"),j(me)}else window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&j(me=>({...me,theme:"dark",darkMode:!0,appBaseColor:"#0f172a"}));const he=DV(async me=>{if(h(!0),me)try{const Ve=await Qp(me.uid);if(Ve){let Ie=Ve;if(Ve.gamification){const He=CV(Ve.gamification);He.streak!==Ve.gamification.streak&&(await T1(me.uid,He),Ie={...Ve,gamification:He})}R({uid:me.uid,username:Ie.username,email:me.email,photoURL:Ie.photoURL||me.photoURL,gamification:Ie.gamification});const Ee=await hk(me.uid);pn(Ee),await Ci(me.uid),(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else R({uid:me.uid,username:"",email:me.email,photoURL:me.photoURL}),e("USERNAME_SETUP")}catch(Ve){console.error("Profile fetch error",Ve)}else if(localStorage.getItem("fajmuls_guest_mode")==="true"){const Ie=localStorage.getItem("fajmuls_guest_username"),Ee="guest-"+(Ie||"user");R({uid:Ee,username:Ie||"Tamu",email:null,isGuest:!0});const He=localStorage.getItem("fajmuls_guest_history");if(He)try{pn(JSON.parse(He))}catch{}await Ci(Ee),(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else n!=="SPLASH"&&e("LOGIN");h(!1),U(!1)});return()=>he()},[]),B.useEffect(()=>{localStorage.setItem("fajmuls_settings",JSON.stringify(J)),J.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),Z.syncSettings(J)},[J]);const li=async K=>{U(!0);try{const he=await jV(K);await Qp(he.uid)||(R({uid:he.uid,username:"",email:he.email,photoURL:he.photoURL}),e("USERNAME_SETUP"))}catch{Je("Gagal login dengan Google.","error"),U(!1)}},Vo=()=>{Z.play("click"),localStorage.setItem("fajmuls_guest_mode","true"),localStorage.setItem("fajmuls_guest_username","Tamu"),R({uid:"guest-"+Date.now(),username:"Tamu",email:null,isGuest:!0});const K=localStorage.getItem("fajmuls_guest_history");if(K)try{pn(JSON.parse(K))}catch{}else pn([]);e("HOME")},ks=async K=>{if(N!=null&&N.uid){U(!0);try{if(!await LV(K)){Je("Username sudah dipakai. Pilih yang lain.","error"),U(!1);return}await UV(N.uid,{username:K,email:N.email||"",photoURL:N.photoURL||""}),R(me=>me?{...me,username:K,gamification:ef}:null),pn([]),Z.play("success"),e("HOME")}catch{Je("Gagal membuat profil.","error")}finally{U(!1)}}},As=async()=>{Z.play("click"),localStorage.removeItem("fajmuls_guest_mode"),localStorage.removeItem("fajmuls_guest_username"),localStorage.removeItem("fajmuls_active_session"),N!=null&&N.isGuest||await PV(),R(null),pn([]),e("LOGIN")},un=async K=>{const he=[K,...Ut];pn(he),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(he,H1())):N!=null&&N.uid&&await ap(N.uid,K)},Sn=async K=>{const he=Ut.filter(me=>me.id!==K);pn(he),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(he)):N!=null&&N.uid&&await FV(N.uid,K),Je("Riwayat berhasil dihapus.","success"),Z.play("click")},Bs=async K=>{const he=Ut.map(me=>me.id===K?{...me,isStudied:!me.isStudied}:me);if(pn(he),N!=null&&N.isGuest)localStorage.setItem("fajmuls_guest_history",JSON.stringify(he));else if(N!=null&&N.uid){const me=he.find(Ve=>Ve.id===K);me&&await ap(N.uid,me)}Z.play("click")},ia=async K=>{if(N!=null&&N.isGuest){K.username&&(R(he=>he?{...he,username:K.username}:null),localStorage.setItem("fajmuls_guest_username",K.username),Je("Nama Tamu diubah.","success"));return}if(N!=null&&N.uid)try{await OV(N.uid,K),R(he=>he?{...he,...K}:null),Je("Profil berhasil diperbarui!","success")}catch(he){Je(he.message||"Gagal memperbarui profil.","error")}},cc=async K=>{Ft(!0);try{const he=await wj(K);O({...K,extractedText:he}),Le(!0)}catch{Je("Gagal memproses materi. Coba lagi.","error")}finally{Ft(!1)}},Bo=async(K,he)=>{if(!he.trim()){Je("Mohon isi judul atau topik.","error");return}Ft(!0),We(K);try{const me=await Nj(he,K);Mt(me),e("SESSION")}catch{Je("Gagal generate konten skripsi.","error")}finally{Ft(!1)}},Go=async K=>{if(!F){Je("Materi hilang. Silakan input ulang.","error");return}Ft(!0),At(K),Me(Fe.DRILL);try{if(K==="ACTIVE_RECALL"||K==="PBL"||K==="PRACTICE"||K==="TEACHING"){const he=await on(Fe.DRILL,"GENERAL",F,5,[],void 0,K);Gt(he)}else if(K==="SPACED_REPETITION"){const he=await kj(F);Ge(he)}else if(K==="MIND_MAP"){const he=await Aj(F);Oe(he)}e("SESSION")}catch{Je("Gagal memuat materi AI.","error")}finally{Ft(!1)}},Gs=K=>{if(K.length===0){Je("Tidak ada soal salah untuk dikerjakan.","info");return}Gt(K),Me(Fe.DRILL),Lt("Smart Review: Weakness Attack"),Vs(void 0),e("SESSION")},aa=async(K,he,me)=>{if(t){if(Lt(void 0),Vs(void 0),["UTBK","SKD","TPA","PSIKOTEST","INTERVIEW"].includes(t)&&!Y&&K!==Fe.SIMULATION&&K!==Fe.WEAKNESS){Je(`Harap pilih topik/subtes untuk ${t}.`,"error");return}if(t==="SKD"&&!ne){Je("Harap pilih jalur (CPNS / Kedinasan).","error");return}Ft(!0),Me(K),Pt([]),Gt([]),Bn(null);try{const Ve=Y;if(K===Fe.DRILL){const Ie=await Cj(t,Ve,ne||void 0);Bn(Ie),Ie&&Ie.question&&Gt([Ie.question])}else if(K===Fe.SIMULATION&&t==="SKD"&&ne){const Ie=await FT(ne);Gt(Ie||[])}else if(K===Fe.SIMULATION&&t==="UTBK"){const Ie=await zT();Gt(Ie||[])}else if(K===Fe.SIMULATION&&t==="TPA")if(Q==="PSIKOTEST_KEDINASAN"){const Ie=await qT();Gt(Ie||[])}else{const Ie=await HT();Gt(Ie||[])}else if(K===Fe.SIMULATION&&t==="PSIKOTEST"){const Ie=await KT();Gt(Ie||[])}else{let Ie=me||5;t==="PSIKOTEST"&&K===Fe.SIMULATION&&(Ie=40),t==="INTERVIEW"&&(Ie=3);const Ee=await on(K,t,Ve,Ie,Array.from(ie),ne||void 0,void 0,he);Gt(Ee||[])}e("SESSION")}catch(Ve){console.error(Ve),Je("Gagal memuat soal. Kemungkinan traffic AI sedang tinggi. Coba lagi.","error")}finally{Ft(!1)}}},Hn=async(K,he,me=!1)=>{let Ve;if(he)Ve={...he,isAborted:me};else{Pt(K);let Ie=0,Ee=0,He;if(t==="SKD"&&_e===Fe.SIMULATION){let je=0,Ze=0,qe=0;K.forEach(Ye=>{var Et,Vt,gn,Zt,en,Ii;const mt=xt.find(oa=>oa.id===Ye.questionId);mt&&((Vt=(Et=mt.metadata)==null?void 0:Et.subtest)!=null&&Vt.includes("TWK")&&(je+=Ye.scoreEarned),(Zt=(gn=mt.metadata)==null?void 0:gn.subtest)!=null&&Zt.includes("TIU")&&(Ze+=Ye.scoreEarned),(Ii=(en=mt.metadata)==null?void 0:en.subtest)!=null&&Ii.includes("TKP")&&(qe+=Ye.scoreEarned))}),Ie=je+Ze+qe,Ee=550,He={twk:je,tiu:Ze,tkp:qe,total:Ie,passed:je>=65&&Ze>=80&&qe>=166}}else if(t==="UTBK"&&_e===Fe.SIMULATION){const je=en=>{const Ii=xt.filter(Ri=>{var qs,Mi;return(Mi=(qs=Ri.metadata)==null?void 0:qs.subtest)==null?void 0:Mi.includes(en)});if(!Ii.length)return 0;const oa=K.filter(Ri=>{var qs,Mi,ci;return Ri.isCorrect&&((ci=(Mi=(qs=xt.find(za=>za.id===Ri.questionId))==null?void 0:qs.metadata)==null?void 0:Mi.subtest)==null?void 0:ci.includes(en))}).length;return Math.round(200+oa/Ii.length*600)},Ze=je("Penalaran Umum"),qe=je("PPU"),Ye=je("PBM"),mt=je("Kuantitatif"),Et=je("Literasi B.Indo"),Vt=je("Literasi B.Inggris"),gn=je("Penalaran Matematika"),Zt=Math.round((Ze+qe+Ye+mt+Et+Vt+gn)/7);Ie=Zt,Ee=1e3,He={pu:Ze,ppu:qe,pbm:Ye,pk:mt,lbi:Et,lbe:Vt,pm:gn,average:Zt}}else if(t==="TPA"&&_e===Fe.SIMULATION)if(Q==="PSIKOTEST_KEDINASAN"){let je=0,Ze=0,qe=0,Ye=0;K.forEach(gn=>{const Zt=xt.find(en=>en.id===gn.questionId);Zt&&(Zt.metadata.subtest.includes("TIU")?je+=gn.scoreEarned:Zt.metadata.subtest.includes("Gambar")||Zt.metadata.subtest.includes("Figural")?Ze+=gn.scoreEarned:Zt.metadata.subtest.includes("Kepribadian")&&(qe+=gn.scoreEarned,Ye++))});const mt=Ye*5,Et=mt>0?Math.round(qe/mt*100):0;Ie=je+Ze+Et,Ee=500;const Vt=Et>=70;He={tiuScore:je,figuralScore:Ze,personalityScore:Et,passed:Vt,verdict:Vt?"MEMENUHI SYARAT":"TIDAK MEMENUHI SYARAT"}}else{let je=0,Ze=0;K.forEach(Ye=>{var Et,Vt,gn,Zt;const mt=xt.find(en=>en.id===Ye.questionId);mt&&(((Vt=(Et=mt.metadata)==null?void 0:Et.subtest)==null?void 0:Vt.includes("TBI"))||((Zt=(gn=mt.metadata)==null?void 0:gn.subtest)==null?void 0:Zt.includes("Inggris"))?Ye.isCorrect&&(Ze+=5):Ye.selectedAnswer&&(Ye.isCorrect?je+=4:je-=1))});const qe=je>=67&&Ze>=30;Ie=je+Ze,Ee=280,He={tpaScore:je,tbiScore:Ze,passed:qe}}else if(t==="INTERVIEW"){const je=K.map(Ze=>{var qe;return((qe=Ze.interviewFeedback)==null?void 0:qe.score)||0});Ie=Math.round(je.reduce((Ze,qe)=>Ze+qe,0)/(je.length||1)),Ee=100}else if(t==="PSIKOTEST"&&_e===Fe.SIMULATION){const je=K.filter(Et=>Et.isCorrect).length,Ze=xt.length,qe=je/Ze,Ye=Math.round(70+qe*75);let mt=Ye>=130?"Very Superior":Ye>=120?"Superior":Ye>=110?"High Average":Ye>=90?"Average":"Low Average";Ie=Ye,Ee=160,He={iqScore:Ye,classification:mt}}else if(t==="GENERAL"){const je=K.reduce((Ze,qe)=>Ze+(qe.scoreEarned||0),0);Ie=Math.round(je/(K.length||1)),Ee=100}else{const je=K.filter(Ze=>Ze.isCorrect).length;Ie=Math.round(je/xt.length*100),Ee=100}Ve={id:`h-${Date.now()}`,date:new Date().toISOString(),category:t,skdStream:ne||void 0,tpaStream:Q||void 0,score:Ie,maxScore:Ee,details:He,questions:xt,answers:K,isAborted:me,packageTitle:st}}if(await un(Ve),!me&&!(N!=null&&N.isGuest)&&(N!=null&&N.uid)&&N.gamification){const Ie=AV(Ve.score,Ve.answers||[],_e===Fe.SIMULATION,Ve.category||"");let Ee={...N.gamification};Ee.xp+=Ie;const He=_1(Ee.xp);He>Ee.level&&(Ee.level=He,Z.play("levelUp"),E({level:He}));const je=[Ve,...Ut],Ze=IV(Ee,je);if(Ze.length>0){const qe=Ze.map(Et=>Et.id);Ee.unlockedAchievements=[...Ee.unlockedAchievements,...qe];const Ye=Ze.reduce((Et,Vt)=>Et+Vt.xpReward,0);Ee.xp+=Ye;const mt=_1(Ee.xp);mt>Ee.level&&(Ee.level=mt,T||(Z.play("levelUp"),E({level:mt}))),A(Ze[0]),Z.play("success")}await T1(N.uid,Ee),R({...N,gamification:Ee})}if(!me&&!(N!=null&&N.isGuest)&&(N!=null&&N.uid)){if(Ve.category==="KECERMATAN"&&Ve.details){const Ie=Ve.details;E1("KECERMATAN",Ie.mode||"General",Ve.score,N.username,N.uid)}else if(t&&_e===Fe.SIMULATION){let Ie="General";t==="SKD"&&ne&&(Ie=ne),t==="TPA"&&Q&&(Ie=Q),E1(t,Ie,Ve.score,N.username,N.uid,st)}}Lt(void 0),he?(he.category!=="BENCHMARK"||me)&&e("HOME"):e("RESULTS")},cs=K=>{Z.play("click"),s(K),Lt(void 0),Vs(void 0),K==="BUTAWRNA"?e("COLORBLIND"):K==="BENCHMARK"?(Qe(null),f("DASHBOARD"),e("BENCHMARK")):(e("DASHBOARD"),O(null),Le(!1),oe(""),z(null),fe(null),At(null),We(null),Mt(""))},ts=K=>{xe(K),e("TES_KECERMATAN")},Fs=()=>{if(Ut.length===0){Je("Belum ada riwayat untuk disimpan.","info");return}const K=JSON.stringify(Ut,H1(),2),he=new Blob([K],{type:"application/json"}),me=URL.createObjectURL(he),Ve=document.createElement("a");Ve.href=me,Ve.download=`Fajmuls_History_${(N==null?void 0:N.username)||"user"}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ve),Ve.click(),document.body.removeChild(Ve),URL.revokeObjectURL(me),Je("Export berhasil!","success")},dn=K=>{const he=new FileReader;he.onload=me=>{var Ve;try{const Ie=(Ve=me.target)==null?void 0:Ve.result,Ee=JSON.parse(Ie);if(!Array.isArray(Ee))throw new Error("Format salah");const He=new Set(Ut.map(qe=>qe.id)),je=Ee.filter(qe=>!He.has(qe.id)),Ze=[...Ut,...je].sort((qe,Ye)=>new Date(Ye.date).getTime()-new Date(qe.date).getTime());pn(Ze),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(Ze)):N!=null&&N.uid&&je.forEach(qe=>{ap(N.uid,qe)}),Je(`Berhasil memuat ${je.length} riwayat baru.`,"success")}catch{Je("Gagal membaca file JSON.","error")}},he.readAsText(K)},Hr=K=>{Gt(K.questions),Me(Fe.SIMULATION),Lt(K.title),Vs(void 0),e("SESSION")},qr=async K=>{if(t)try{let he=[],me=60;t==="SKD"?(he=await FT(ne||"CPNS"),me=100):t==="UTBK"?(he=await zT(),me=195):t==="TPA"?Q==="PSIKOTEST_KEDINASAN"?(he=await qT(),me=90):(he=await HT(),me=100):t==="PSIKOTEST"?(he=await KT(),me=40):he=await on(Fe.SIMULATION,t,"SIMULATION",20,[],ne||void 0,void 0,"HOTS");const Ee=Ns.filter(Ye=>Ye.category!==t?!1:t==="SKD"?Ye.skdStream===ne:t==="TPA"?Ye.tpaStream===Q:!0).reduce((Ye,mt)=>{const Et=mt.title.match(/(\d+)$/);if(Et){const Vt=parseInt(Et[1]);return Vt>Ye?Vt:Ye}return Ye},0)+1;let He="",je="gen";t==="SKD"?ne==="CPNS"?(He=`TO SKD CPNS ${Ee}`,je+="-skd-cpns"):ne==="KEDINASAN"?(He=`TO SKD Kedinasan ${Ee}`,je+="-skd-kedinasan"):(He=`TO SKD ${Ee}`,je+="-skd-general"):t==="UTBK"?(He=`TO UTBK ${Ee}`,je+="-utbk"):t==="TPA"?Q==="PSIKOTEST_KEDINASAN"?(He=`TO Psikotes Kedinasan ${Ee}`,je+="-tpa-psikotest_kedinasan"):(He=`TO TPA TBI ${Ee}`,je+="-tpa-tbi"):t==="PSIKOTEST"?(He=`TO Psikotest ${Ee}`,je+="-psikotest"):(He=`TO ${t} ${Ee}`,je+=`-${t.toLowerCase()}`);const qe={id:`${je}-${Ee}-${Date.now()}`,title:He,category:t,skdStream:ne||void 0,tpaStream:Q||void 0,questions:he,durationMinutes:me,isAiGenerated:!0,version:"v3",createdAt:new Date().toISOString()};await ch(qe),zn(Ye=>[qe,...Ye]),Je(`Paket baru "${He}" (v3) berhasil dibuat dan disimpan!`,"success")}catch(he){console.error(he),Je("Gagal membuat paket soal. Coba lagi.","error")}},zs=async K=>{if(zn(he=>he.filter(me=>me.id!==K)),K.startsWith("gen-")||K.startsWith("pkg-"))try{await KV(K),Je("Paket dihapus dari database.","success")}catch(he){console.error(he)}else Je("Paket dihapus dari tampilan lokal.","success")},Hs=K=>{Array.from(K).forEach(he=>{const me=new FileReader;me.onload=async Ve=>{var Ie;try{const Ee=(Ie=Ve.target)==null?void 0:Ie.result,He=JSON.parse(Ee);He.id&&He.questions&&(await ch(He),zn(je=>je.find(Ze=>Ze.id===He.id)?je:[He,...je]),Je(`Paket "${He.title}" diimpor dan disimpan.`,"success"))}catch{Je("File tidak valid.","error")}},me.readAsDataURL(he)})},Kr=async()=>{Gn(!0);try{const K=await qV(),he=new Map;[...t_,...n_,...s_,...r_,...l_,...i_,...a_,...o_].forEach(me=>he.set(me.id,me)),K.forEach(me=>he.set(me.id,me)),zn(Array.from(he.values())),Je("Paket soal diperbarui.","success")}catch(K){console.error(K),Je("Gagal memuat paket soal.","error")}finally{Gn(!1)}},$r=async()=>{if(t){Gn(!0);try{const K=Ns.filter(Ee=>Ee.category!==t?!1:t==="SKD"?Ee.skdStream===ne:t==="TPA"?Ee.tpaStream===Q:!0),he=new Map;K.forEach(Ee=>{const He=Ee.title.trim();he.has(He)||he.set(He,[]),he.get(He).push(Ee)});const me=Array.from(he.values()).filter(Ee=>Ee.length>1);if(me.length===0){Je("Tidak ditemukan duplikasi.","info"),Gn(!1);return}const Ve=[],Ie=[...Ns];for(const Ee of me){Ee.sort((Ye,mt)=>(Ye.createdAt||"").localeCompare(mt.createdAt||""));const He=Ee[0],je=He.title.match(/^(.*?)(\d+)$/),Ze=je?je[1]:He.title+" ";let qe=0;K.forEach(Ye=>{if(Ye.title.startsWith(Ze)){const mt=Ye.title.match(/(\d+)$/);if(mt){const Et=parseInt(mt[1]);Et>qe&&(qe=Et)}}});for(let Ye=1;Ye<Ee.length;Ye++){const mt=Ee[Ye];qe++;const Et=`${Ze}${qe}`,Vt={...mt,title:Et};Ve.push(ch(Vt));const gn=Ie.findIndex(Zt=>Zt.id===mt.id);gn!==-1&&(Ie[gn]=Vt)}}await Promise.all(Ve),zn(Ie),Je(`Berhasil memperbaiki ${Ve.length} duplikasi.`,"success")}catch(K){console.error(K),Je("Gagal memperbaiki duplikasi.","error")}finally{Gn(!1)}}},Yr=async()=>{if(t){Gn(!0);try{const K=Ns.filter(Ie=>Ie.category!==t?!1:t==="SKD"?Ie.skdStream===ne:t==="TPA"?Ie.tpaStream===Q:!0);K.sort((Ie,Ee)=>new Date(Ie.createdAt).getTime()-new Date(Ee.createdAt).getTime());const he=[],me=[...Ns];let Ve=0;K.forEach((Ie,Ee)=>{const He=Ee+1,je=Ie.title.match(/^(.*?)(\d+)$/);if(je){const Ze=je[1];if(parseInt(je[2])!==He){const Ye=`${Ze}${He}`,mt={...Ie,title:Ye};he.push(ch(mt));const Et=me.findIndex(Vt=>Vt.id===Ie.id);Et!==-1&&(me[Et]=mt),Ve++}}}),he.length>0?(await Promise.all(he),zn(me),Je(`Berhasil mengurutkan ulang ${Ve} paket.`,"success")):Je("Urutan paket sudah benar.","info")}catch(K){console.error(K),Je("Gagal mengurutkan paket.","error")}finally{Gn(!1)}}},Fo=K=>{if(Z.play("click"),D(""),X(!1),K.type==="CATEGORY")cs(K.id);else if(K.type==="FEATURE"){if(K.id==="TES_KORAN")s("PSIKOTEST"),e("TES_KORAN");else if(K.id.startsWith("KECERMATAN_")){s("KECERMATAN");const he=K.id.replace("KECERMATAN_","");ts(he)}else if(["REACTION","AIM","SEQUENCE","CHIMP","VISUAL","NUMBER","VERBAL","TYPING","BRIDGE","MATCH"].includes(K.id))s("BENCHMARK"),Qe(K.id),f("DASHBOARD"),e("BENCHMARK");else if(K.id.startsWith("UTBK_")){s("UTBK");const he=K.label.replace("UTBK ","");oe(he),e("DASHBOARD")}else if(K.id.startsWith("SKD_")){s("SKD");const he=K.label.replace("SKD ","");oe(he),z("CPNS"),e("DASHBOARD")}}};return n==="SPLASH"?o.jsx(tB,{onComplete:()=>e(N?"HOME":"LOGIN")}):u?o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:[" ",o.jsx(Pn,{className:"animate-spin text-indigo-600 w-10 h-10"})," "]}):n==="LOGIN"?o.jsx(uG,{onGoogleLogin:li,onGuestLogin:Vo,isLoading:P}):n==="USERNAME_SETUP"?o.jsx(dG,{onSubmit:ks,isLoading:P}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`fixed inset-0 -z-10 transition-colors duration-500 bg-pattern-${J.appPattern||"none"}`,style:{backgroundColor:J.appBaseColor||"#ffffff"}}),Fn&&o.jsx(oG,{message:Fn.msg,type:Fn.type,onClose:()=>Ot(null)}),M&&o.jsx(tG,{achievement:M,onClose:()=>A(null)}),T&&o.jsx(eG,{newLevel:T.level,onClose:()=>E(null)}),o.jsx(ZB,{isOpen:y,onClose:()=>_(!1),profile:(N==null?void 0:N.gamification)||ef}),we&&o.jsx(lG,{session:we,onResume:()=>Fa(we),onDiscard:na}),o.jsx(nB,{isOpen:a,onClose:()=>l(!1),settings:J,onUpdate:j,userProfile:N,onUpdateProfile:ia}),n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&n!=="GLOBAL_LEADERBOARD"&&n!=="ACADEMIC_HUB"&&n!=="SOCIAL_HUB"&&n!=="BATTLE"&&n!=="MARKED_QUESTIONS"&&o.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md z-40 border-b border-slate-200 dark:border-slate-700 px-4 sm:px-6 py-3 flex flex-col sm:flex-row justify-between items-center animate-fade-in-down gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto cursor-pointer",onClick:()=>{Z.play("click"),e("HOME")},children:[o.jsx("img",{src:Nh,alt:"Logo",className:"w-8 h-8 object-contain"}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white hidden md:block",children:"Fajmuls Learning"})]}),o.jsxs("div",{className:"flex-1 max-w-lg relative w-full sm:w-auto mx-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(fu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),o.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-slate-800 border-none rounded-full text-sm text-slate-800 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Cari: UTBK, Pauli, Reaction Time...",value:C,onChange:K=>D(K.target.value)})]}),q&&G.length>0&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden z-50 animate-fade-in-up max-h-80 overflow-y-auto scrollbar-hide",children:G.map(K=>o.jsxs("button",{onClick:()=>Fo(K),className:"w-full text-left px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-700 flex items-center justify-between group transition-colors",children:[o.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:K.label}),o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-bold uppercase ${K.type==="CATEGORY"?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900 dark:text-indigo-300":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900 dark:text-emerald-300"}`,children:K.type})]},K.id))})]}),!(N!=null&&N.isGuest)&&(N==null?void 0:N.gamification)&&o.jsx("div",{className:"w-full sm:w-auto flex justify-center",children:o.jsx(XB,{profile:N.gamification,onOpenAchievements:()=>{Z.play("click"),_(!0)}})}),o.jsxs("div",{className:"flex items-center gap-3 hidden sm:flex",children:[o.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 p-2 rounded-xl transition",onClick:()=>{!(N!=null&&N.uid)||N.isGuest?Je("Login untuk akses Social Hub","info"):(Z.play("click"),e("SOCIAL_HUB"))},children:[o.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[o.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:(N==null?void 0:N.username)||"Tamu"}),o.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:N!=null&&N.isGuest?"Mode Tamu":"Online"})]}),o.jsx(rG,{user:N})]}),o.jsx("button",{onClick:()=>{Z.play("click"),l(!0)},className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition",children:o.jsx(Sk,{size:20,className:"text-slate-600 dark:text-slate-300"})})]})]}),o.jsxs("div",{className:`${n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&n!=="GLOBAL_LEADERBOARD"&&n!=="ACADEMIC_HUB"&&n!=="SOCIAL_HUB"&&n!=="BATTLE"&&n!=="MARKED_QUESTIONS"?"pt-32 sm:pt-20":""}`,children:[n==="HOME"&&o.jsxs("div",{className:"min-h-screen p-6 flex flex-col items-center justify-center relative transition-colors duration-300 bg-transparent",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("img",{src:Nh,alt:"Logo",className:"w-32 h-32 object-contain mx-auto mb-6 animate-float"}),o.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Pilih Jalur Belajarmu"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Sistem belajar adaptif untuk persiapan ujian."})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl",children:$1.map(K=>{let he=J.theme==="fajmuls"?"bg-white/60 backdrop-blur-xl border-white/50 shadow-xl hover:bg-white/80 hover:scale-[1.02] text-slate-900":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:-translate-y-1 hover:shadow-xl";J.theme!=="fajmuls"&&(K.id==="BENCHMARK"?he+=" hover:border-red-500 dark:hover:border-red-500":K.id==="KECERMATAN"||K.id==="BUTAWRNA"?he+=" hover:border-orange-500 dark:hover:border-orange-500":K.id==="UTBK"||K.id==="SKD"||K.id==="TPA"||K.id==="PSIKOTEST"?he+=" hover:border-emerald-500 dark:hover:border-emerald-500":he+=" hover:border-indigo-500 dark:hover:border-indigo-500");let me="bg-indigo-50 dark:bg-slate-700",Ve="text-indigo-600 dark:text-indigo-400",Ie="bg-indigo-50 dark:bg-indigo-900/20";return K.id==="BENCHMARK"?(me="bg-red-100 dark:bg-red-900/40",Ve="text-red-600 dark:text-red-400",Ie="bg-red-50 dark:bg-red-900/20"):K.id==="KECERMATAN"||K.id==="BUTAWRNA"?(me="bg-orange-100 dark:bg-orange-900/40",Ve="text-orange-600 dark:text-orange-400",Ie="bg-orange-50 dark:bg-orange-900/20"):(K.id==="UTBK"||K.id==="SKD"||K.id==="TPA"||K.id==="PSIKOTEST")&&(me="bg-emerald-100 dark:bg-emerald-900/40",Ve="text-emerald-600 dark:text-emerald-400",Ie="bg-emerald-50 dark:bg-emerald-900/20"),o.jsxs("button",{onClick:()=>cs(K.id),className:`p-8 rounded-2xl border-2 transition-all group text-left flex flex-col items-start relative overflow-hidden ${he}`,children:[o.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110 ${Ie}`}),o.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center mb-6 transition-colors relative z-10 ${me} ${Ve} group-hover:bg-opacity-80`,children:K.id==="GENERAL"?o.jsx(Us,{}):K.id==="SKD"?o.jsx(Ff,{}):K.id==="INTERVIEW"?o.jsx(Hf,{}):K.id==="BUTAWRNA"?o.jsx(Yl,{}):K.id==="PSIKOTEST"?o.jsx(_s,{}):K.id==="SKRIPSI"?o.jsx(Gf,{}):K.id==="KECERMATAN"?o.jsx(Do,{}):K.id==="BENCHMARK"?o.jsx(Xn,{}):K.id==="TPA"?o.jsx(Os,{}):o.jsx(oc,{})}),o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2 relative z-10",children:K.name}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm leading-relaxed relative z-10",children:K.desc})]},K.id)})}),o.jsxs("div",{className:"mt-12 flex gap-4 flex-wrap justify-center",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),e("HISTORY")},className:`flex items-center gap-2 px-6 py-3 rounded-xl shadow-sm border font-bold transition ${J.theme==="fajmuls"?"bg-white/80 backdrop-blur text-slate-700 border-white/50 hover:bg-white":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx(Uu,{size:18})," Riwayat"]}),o.jsxs("button",{onClick:zr,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 dark:shadow-none border border-indigo-600 font-bold hover:bg-indigo-700 transition",children:[o.jsx(z8,{size:18})," Lanjutkan TO"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),e("MARKED_QUESTIONS")},className:`flex items-center gap-2 px-6 py-3 rounded-xl shadow-sm border font-bold transition ${J.theme==="fajmuls"?"bg-white/80 backdrop-blur text-slate-700 border-white/50 hover:bg-white":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx($l,{size:18,className:"text-rose-500"})," Soal Ditandai"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),e("GLOBAL_LEADERBOARD")},className:`flex items-center gap-2 px-6 py-3 rounded-xl shadow-sm border font-bold transition ${J.theme==="fajmuls"?"bg-white/80 backdrop-blur text-slate-700 border-white/50 hover:bg-white":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx(Es,{size:18,className:"text-amber-500"})," Global Rank"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),!(N!=null&&N.uid)||N.isGuest?Je("Login diperlukan untuk fitur sosial.","info"):e("SOCIAL_HUB")},className:`flex items-center gap-2 px-6 py-3 rounded-xl shadow-sm border font-bold transition ${J.theme==="fajmuls"?"bg-white/80 backdrop-blur text-slate-700 border-white/50 hover:bg-white":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx(Or,{size:18,className:"text-blue-500"})," Social"]}),o.jsxs("button",{onClick:As,className:`flex items-center gap-2 px-6 py-3 rounded-xl shadow-sm border font-bold transition ${J.theme==="fajmuls"?"bg-white/50 border-rose-200 text-rose-600 hover:bg-rose-50":"bg-rose-50 dark:bg-rose-900/20 border-rose-100 dark:border-rose-900 text-rose-700 dark:text-rose-400 hover:bg-rose-100 dark:hover:bg-rose-900/40"}`,children:[o.jsx(L9,{size:18})," Keluar"]})]})]}),n==="DASHBOARD"&&o.jsx(yG,{category:t,onBack:()=>{Z.play("back"),e("HOME")},onStartSession:aa,onOpenTOSelection:()=>{Z.play("click"),e("TO_SELECTION")},onStartTesKoran:()=>{Z.play("click"),e("TES_KORAN")},onStartTesKecermatan:ts,onGeneralInputSubmit:cc,generalInput:F,setGeneralInput:O,isReadingMaterial:Ae,onResetMaterial:()=>{Le(!1),O(null)},onSubtestSelect:oe,selectedSubtest:Y,weakTopicsCount:ie.size,loading:Tn,skdStream:ne,onSkdStreamSelect:z,onHistory:()=>{Z.play("click"),e("HISTORY")},onStartGeneralSession:Go,onStartSkripsiSession:Bo,username:(N==null?void 0:N.username)||"Guest",isDarkMode:J.darkMode,onToggleDarkMode:()=>{j(K=>({...K,darkMode:!K.darkMode,theme:K.darkMode?"light":"dark"}))},tpaStream:Q,onTpaStreamSelect:fe,onOpenAcademicHub:()=>{Z.play("click"),e("ACADEMIC_HUB")},onBattle:()=>{!(N!=null&&N.uid)||N.isGuest?Je("Login diperlukan untuk Battle Mode.","info"):(Z.play("click"),e("BATTLE"))}}),n==="TO_SELECTION"&&o.jsx(iB,{category:t,skdStream:ne||void 0,tpaStream:Q||void 0,availablePackages:Ns,history:Ut,onSelectPackage:Hr,onGenerateNew:qr,onDeletePackage:zs,onImportPackage:Hs,onFixDuplicates:$r,onFixGaps:Yr,onBack:()=>{Z.play("back"),e("DASHBOARD")},showToast:Je,confirmEnabled:J.confirmActions,onRefresh:Kr,isLoading:Mn}),n==="RESUME_LIST"&&o.jsx(xG,{sessions:ta,onBack:()=>{Z.play("back"),e("HOME")},onResume:Fa,onDelete:sa,loading:Ne}),n==="ACADEMIC_HUB"&&o.jsx(nG,{history:Ut,category:t,onBack:()=>{Z.play("back"),e("DASHBOARD")},onStartSmartReview:Gs}),n==="SOCIAL_HUB"&&N&&o.jsx(sG,{userProfile:N,history:Ut,onBack:()=>{Z.play("back"),e("HOME")},onUpdateProfile:ia}),n==="BATTLE"&&N&&o.jsx(iG,{userProfile:N,category:t||"SKD",onBack:()=>{Z.play("back"),e("DASHBOARD")}}),n==="MARKED_QUESTIONS"&&o.jsx(aG,{onBack:()=>{Z.play("back"),e("HOME")},showToast:Je}),n==="SESSION"&&(t==="SKRIPSI"?o.jsx(hG,{result:Rn,feature:et,onBack:()=>{Z.play("back"),e("DASHBOARD")}}):t==="INTERVIEW"?o.jsx(fG,{questions:xt,onComplete:K=>Hn(K)}):t==="GENERAL"&&St==="SPACED_REPETITION"?o.jsx(mG,{flashcards:at,onFinish:()=>{Z.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&St==="MIND_MAP"?o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col transition-colors duration-300",children:[" ",o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[" ",o.jsxs("button",{onClick:()=>{Z.play("back"),e("DASHBOARD")},className:"flex items-center text-slate-500 dark:text-slate-400",children:[o.jsx(ft,{size:18})," Kembali"]})," ",o.jsx("h2",{className:"font-bold text-slate-800 dark:text-white",children:"Mind Mapping"})," "]})," ",o.jsx(Z7,{data:ue})," "]}):t==="GENERAL"&&St==="FEYNMAN"?o.jsx(pG,{topic:(F==null?void 0:F.content)||"",onFinish:()=>{Z.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&St==="SQ3R"?o.jsx(gG,{topic:(F==null?void 0:F.content)||"",onFinish:()=>{Z.play("back"),e("DASHBOARD")}}):o.jsx(gB,{mode:_e,questions:xt,drillContent:oi,onComplete:(K,he,me)=>Hn(K,he,me),isSkdSimulation:_e===Fe.SIMULATION&&t==="SKD",isUtbkSimulation:_e===Fe.SIMULATION&&t==="UTBK",category:t,showToast:Je,initialState:ws,userId:N==null?void 0:N.uid,skdStream:ne,tpaStream:Q,packageTitle:st,onSaveAndExit:()=>e("HOME"),initialFontSize:J.fontSize})),n==="TES_KORAN"&&o.jsx(_B,{onBack:()=>e("DASHBOARD"),onComplete:K=>Hn([],K)}),n==="TES_KECERMATAN"&&o.jsx(TB,{initialMode:Te,onBack:()=>e("DASHBOARD"),onComplete:K=>Hn([],K)}),n==="BENCHMARK"&&o.jsx(JB,{onBack:()=>e("HOME"),onComplete:K=>Hn([],K),username:(N==null?void 0:N.username)||"Guest",history:Ut,isGuest:N==null?void 0:N.isGuest,initialMode:nt||void 0,initialTab:m}),n==="GLOBAL_LEADERBOARD"&&o.jsx(WB,{onBack:()=>{Z.play("back"),e("HOME")},userProfile:N,onOpenHumanBenchmark:()=>{Z.play("click"),s("BENCHMARK"),Qe(null),f("RANKING"),e("BENCHMARK")}}),n==="RESULTS"&&o.jsx(rB,{answers:qt,questions:xt,onHome:()=>{Z.play("back"),e("HOME")},onRetry:()=>{Z.play("click"),aa(_e)},category:t,details:(ra=Ut[0])==null?void 0:ra.details}),n==="HISTORY"&&o.jsx(uB,{history:Ut,onBack:()=>{Z.play("back"),e("HOME")},onReview:K=>{Z.play("click"),ls(K),e("REVIEW")},username:(N==null?void 0:N.username)||"Guest",onExport:Fs,onImport:dn,isDarkMode:J.darkMode,onDelete:Sn,onToggleStudied:Bs}),n==="REVIEW"&&o.jsx(dB,{item:Xt,onBack:()=>{Z.play("back"),e("HISTORY")}}),n==="COLORBLIND"&&o.jsx(IB,{onBack:()=>{Z.play("back"),e("HOME")},onComplete:K=>Hn([],K)})]})]})}const Pk=document.getElementById("root");if(!Pk)throw new Error("Could not find root element to mount to");const vG=T2.createRoot(Pk);vG.render(o.jsx(K1.StrictMode,{children:o.jsx(bG,{})}));
