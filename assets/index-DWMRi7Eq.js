(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function JE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dp={exports:{}},Cc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb;function mC(){if(nb)return Cc;nb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var f in r)f!=="key"&&(o[f]=r[f])}else o=r;return r=o.ref,{$$typeof:n,type:s,key:c,ref:r!==void 0?r:null,props:o}}return Cc.Fragment=e,Cc.jsx=t,Cc.jsxs=t,Cc}var sb;function pC(){return sb||(sb=1,dp.exports=mC()),dp.exports}var u=pC(),fp={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib;function gC(){if(ib)return We;ib=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function A(H){return H===null||typeof H!="object"?null:(H=T&&H[T]||H["@@iterator"],typeof H=="function"?H:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,N={};function L(H,re,pe){this.props=H,this.context=re,this.refs=N,this.updater=pe||C}L.prototype.isReactComponent={},L.prototype.setState=function(H,re){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,re,"setState")},L.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function O(){}O.prototype=L.prototype;function B(H,re,pe){this.props=H,this.context=re,this.refs=N,this.updater=pe||C}var $=B.prototype=new O;$.constructor=B,D($,L.prototype),$.isPureReactComponent=!0;var W=Array.isArray;function se(){}var R={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function k(H,re,pe){var ie=pe.ref;return{$$typeof:n,type:H,key:re,ref:ie!==void 0?ie:null,props:pe}}function V(H,re){return k(H.type,re,H.props)}function U(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function G(H){var re={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(pe){return re[pe]})}var j=/\/+/g;function me(H,re){return typeof H=="object"&&H!==null&&H.key!=null?G(""+H.key):re.toString(36)}function Ae(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(se,se):(H.status="pending",H.then(function(re){H.status==="pending"&&(H.status="fulfilled",H.value=re)},function(re){H.status==="pending"&&(H.status="rejected",H.reason=re)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function Y(H,re,pe,ie,te){var ge=typeof H;(ge==="undefined"||ge==="boolean")&&(H=null);var _e=!1;if(H===null)_e=!0;else switch(ge){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(H.$$typeof){case n:case e:_e=!0;break;case v:return _e=H._init,Y(_e(H._payload),re,pe,ie,te)}}if(_e)return te=te(H),_e=ie===""?"."+me(H,0):ie,W(te)?(pe="",_e!=null&&(pe=_e.replace(j,"$&/")+"/"),Y(te,re,pe,"",function(ze){return ze})):te!=null&&(U(te)&&(te=V(te,pe+(te.key==null||H&&H.key===te.key?"":(""+te.key).replace(j,"$&/")+"/")+_e)),re.push(te)),1;_e=0;var Ie=ie===""?".":ie+":";if(W(H))for(var He=0;He<H.length;He++)ie=H[He],ge=Ie+me(ie,He),_e+=Y(ie,re,pe,ge,te);else if(He=A(H),typeof He=="function")for(H=He.call(H),He=0;!(ie=H.next()).done;)ie=ie.value,ge=Ie+me(ie,He++),_e+=Y(ie,re,pe,ge,te);else if(ge==="object"){if(typeof H.then=="function")return Y(Ae(H),re,pe,ie,te);throw re=String(H),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return _e}function ue(H,re,pe){if(H==null)return H;var ie=[],te=0;return Y(H,ie,"","",function(ge){return re.call(pe,ge,te++)}),ie}function xe(H){if(H._status===-1){var re=H._result;re=re(),re.then(function(pe){(H._status===0||H._status===-1)&&(H._status=1,H._result=pe)},function(pe){(H._status===0||H._status===-1)&&(H._status=2,H._result=pe)}),H._status===-1&&(H._status=0,H._result=re)}if(H._status===1)return H._result.default;throw H._result}var Le=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},ye={map:ue,forEach:function(H,re,pe){ue(H,function(){re.apply(this,arguments)},pe)},count:function(H){var re=0;return ue(H,function(){re++}),re},toArray:function(H){return ue(H,function(re){return re})||[]},only:function(H){if(!U(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return We.Activity=_,We.Children=ye,We.Component=L,We.Fragment=t,We.Profiler=r,We.PureComponent=B,We.StrictMode=s,We.Suspense=p,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,We.__COMPILER_RUNTIME={__proto__:null,c:function(H){return R.H.useMemoCache(H)}},We.cache=function(H){return function(){return H.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(H,re,pe){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ie=D({},H.props),te=H.key;if(re!=null)for(ge in re.key!==void 0&&(te=""+re.key),re)!M.call(re,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&re.ref===void 0||(ie[ge]=re[ge]);var ge=arguments.length-2;if(ge===1)ie.children=pe;else if(1<ge){for(var _e=Array(ge),Ie=0;Ie<ge;Ie++)_e[Ie]=arguments[Ie+2];ie.children=_e}return k(H.type,te,ie)},We.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:o,_context:H},H},We.createElement=function(H,re,pe){var ie,te={},ge=null;if(re!=null)for(ie in re.key!==void 0&&(ge=""+re.key),re)M.call(re,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(te[ie]=re[ie]);var _e=arguments.length-2;if(_e===1)te.children=pe;else if(1<_e){for(var Ie=Array(_e),He=0;He<_e;He++)Ie[He]=arguments[He+2];te.children=Ie}if(H&&H.defaultProps)for(ie in _e=H.defaultProps,_e)te[ie]===void 0&&(te[ie]=_e[ie]);return k(H,ge,te)},We.createRef=function(){return{current:null}},We.forwardRef=function(H){return{$$typeof:f,render:H}},We.isValidElement=U,We.lazy=function(H){return{$$typeof:v,_payload:{_status:-1,_result:H},_init:xe}},We.memo=function(H,re){return{$$typeof:m,type:H,compare:re===void 0?null:re}},We.startTransition=function(H){var re=R.T,pe={};R.T=pe;try{var ie=H(),te=R.S;te!==null&&te(pe,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(se,Le)}catch(ge){Le(ge)}finally{re!==null&&pe.types!==null&&(re.types=pe.types),R.T=re}},We.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},We.use=function(H){return R.H.use(H)},We.useActionState=function(H,re,pe){return R.H.useActionState(H,re,pe)},We.useCallback=function(H,re){return R.H.useCallback(H,re)},We.useContext=function(H){return R.H.useContext(H)},We.useDebugValue=function(){},We.useDeferredValue=function(H,re){return R.H.useDeferredValue(H,re)},We.useEffect=function(H,re){return R.H.useEffect(H,re)},We.useEffectEvent=function(H){return R.H.useEffectEvent(H)},We.useId=function(){return R.H.useId()},We.useImperativeHandle=function(H,re,pe){return R.H.useImperativeHandle(H,re,pe)},We.useInsertionEffect=function(H,re){return R.H.useInsertionEffect(H,re)},We.useLayoutEffect=function(H,re){return R.H.useLayoutEffect(H,re)},We.useMemo=function(H,re){return R.H.useMemo(H,re)},We.useOptimistic=function(H,re){return R.H.useOptimistic(H,re)},We.useReducer=function(H,re,pe){return R.H.useReducer(H,re,pe)},We.useRef=function(H){return R.H.useRef(H)},We.useState=function(H){return R.H.useState(H)},We.useSyncExternalStore=function(H,re,pe){return R.H.useSyncExternalStore(H,re,pe)},We.useTransition=function(){return R.H.useTransition()},We.version="19.2.3",We}var rb;function A0(){return rb||(rb=1,fp.exports=gC()),fp.exports}var F=A0();const yC=JE(F);var hp={exports:{}},Ic={},mp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ab;function xC(){return ab||(ab=1,(function(n){function e(Y,ue){var xe=Y.length;Y.push(ue);e:for(;0<xe;){var Le=xe-1>>>1,ye=Y[Le];if(0<r(ye,ue))Y[Le]=ue,Y[xe]=ye,xe=Le;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var ue=Y[0],xe=Y.pop();if(xe!==ue){Y[0]=xe;e:for(var Le=0,ye=Y.length,H=ye>>>1;Le<H;){var re=2*(Le+1)-1,pe=Y[re],ie=re+1,te=Y[ie];if(0>r(pe,xe))ie<ye&&0>r(te,pe)?(Y[Le]=te,Y[ie]=xe,Le=ie):(Y[Le]=pe,Y[re]=xe,Le=re);else if(ie<ye&&0>r(te,xe))Y[Le]=te,Y[ie]=xe,Le=ie;else break e}}return ue}function r(Y,ue){var xe=Y.sortIndex-ue.sortIndex;return xe!==0?xe:Y.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var p=[],m=[],v=1,_=null,T=3,A=!1,C=!1,D=!1,N=!1,L=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function $(Y){for(var ue=t(m);ue!==null;){if(ue.callback===null)s(m);else if(ue.startTime<=Y)s(m),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=t(m)}}function W(Y){if(D=!1,$(Y),!C)if(t(p)!==null)C=!0,se||(se=!0,G());else{var ue=t(m);ue!==null&&Ae(W,ue.startTime-Y)}}var se=!1,R=-1,M=5,k=-1;function V(){return N?!0:!(n.unstable_now()-k<M)}function U(){if(N=!1,se){var Y=n.unstable_now();k=Y;var ue=!0;try{e:{C=!1,D&&(D=!1,O(R),R=-1),A=!0;var xe=T;try{t:{for($(Y),_=t(p);_!==null&&!(_.expirationTime>Y&&V());){var Le=_.callback;if(typeof Le=="function"){_.callback=null,T=_.priorityLevel;var ye=Le(_.expirationTime<=Y);if(Y=n.unstable_now(),typeof ye=="function"){_.callback=ye,$(Y),ue=!0;break t}_===t(p)&&s(p),$(Y)}else s(p);_=t(p)}if(_!==null)ue=!0;else{var H=t(m);H!==null&&Ae(W,H.startTime-Y),ue=!1}}break e}finally{_=null,T=xe,A=!1}ue=void 0}}finally{ue?G():se=!1}}}var G;if(typeof B=="function")G=function(){B(U)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,me=j.port2;j.port1.onmessage=U,G=function(){me.postMessage(null)}}else G=function(){L(U,0)};function Ae(Y,ue){R=L(function(){Y(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(Y){switch(T){case 1:case 2:case 3:var ue=3;break;default:ue=T}var xe=T;T=ue;try{return Y()}finally{T=xe}},n.unstable_requestPaint=function(){N=!0},n.unstable_runWithPriority=function(Y,ue){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var xe=T;T=Y;try{return ue()}finally{T=xe}},n.unstable_scheduleCallback=function(Y,ue,xe){var Le=n.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?Le+xe:Le):xe=Le,Y){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=xe+ye,Y={id:v++,callback:ue,priorityLevel:Y,startTime:xe,expirationTime:ye,sortIndex:-1},xe>Le?(Y.sortIndex=xe,e(m,Y),t(p)===null&&Y===t(m)&&(D?(O(R),R=-1):D=!0,Ae(W,xe-Le))):(Y.sortIndex=ye,e(p,Y),C||A||(C=!0,se||(se=!0,G()))),Y},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(Y){var ue=T;return function(){var xe=T;T=ue;try{return Y.apply(this,arguments)}finally{T=xe}}}})(pp)),pp}var ob;function vC(){return ob||(ob=1,mp.exports=xC()),mp.exports}var gp={exports:{}},Rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lb;function bC(){if(lb)return Rn;lb=1;var n=A0();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(p,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:p,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Rn.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(p,m,null,v)},Rn.flushSync=function(p){var m=c.T,v=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=m,s.p=v,s.d.f()}},Rn.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},Rn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Rn.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,_=f(v,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:A}):v==="script"&&s.d.X(p,{crossOrigin:_,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Rn.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=f(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},Rn.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=f(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Rn.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=f(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},Rn.requestFormReset=function(p){s.d.r(p)},Rn.unstable_batchedUpdates=function(p,m){return p(m)},Rn.useFormState=function(p,m,v){return c.H.useFormState(p,m,v)},Rn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Rn.version="19.2.3",Rn}var cb;function _C(){if(cb)return gp.exports;cb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gp.exports=bC(),gp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ub;function TC(){if(ub)return Ic;ub=1;var n=vC(),e=A0(),t=_C();function s(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function c(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function f(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function p(i){if(o(i)!==i)throw Error(s(188))}function m(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(s(188));return a!==i?null:i}for(var l=i,d=a;;){var x=l.return;if(x===null)break;var b=x.alternate;if(b===null){if(d=x.return,d!==null){l=d;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===l)return p(x),i;if(b===d)return p(x),a;b=b.sibling}throw Error(s(188))}if(l.return!==d.return)l=x,d=b;else{for(var S=!1,I=x.child;I;){if(I===l){S=!0,l=x,d=b;break}if(I===d){S=!0,d=x,l=b;break}I=I.sibling}if(!S){for(I=b.child;I;){if(I===l){S=!0,l=b,d=x;break}if(I===d){S=!0,d=b,l=x;break}I=I.sibling}if(!S)throw Error(s(189))}}if(l.alternate!==d)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?i:a}function v(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=v(i),a!==null)return a;i=i.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),B=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var j=Symbol.for("react.client.reference");function me(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===j?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case L:return"Profiler";case N:return"StrictMode";case W:return"Suspense";case se:return"SuspenseList";case k:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case C:return"Portal";case B:return i.displayName||"Context";case O:return(i._context.displayName||"Context")+".Consumer";case $:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return a=i.displayName||null,a!==null?a:me(i.type)||"Memo";case M:a=i._payload,i=i._init;try{return me(i(a))}catch{}}return null}var Ae=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},Le=[],ye=-1;function H(i){return{current:i}}function re(i){0>ye||(i.current=Le[ye],Le[ye]=null,ye--)}function pe(i,a){ye++,Le[ye]=i.current,i.current=a}var ie=H(null),te=H(null),ge=H(null),_e=H(null);function Ie(i,a){switch(pe(ge,a),pe(te,i),pe(ie,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?Av(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=Av(a),i=wv(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}re(ie),pe(ie,i)}function He(){re(ie),re(te),re(ge)}function ze(i){i.memoizedState!==null&&pe(_e,i);var a=ie.current,l=wv(a,i.type);a!==l&&(pe(te,i),pe(ie,l))}function pt(i){te.current===i&&(re(ie),re(te)),_e.current===i&&(re(_e),Sc._currentValue=xe)}var Ce,Ee;function Ge(i){if(Ce===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Ce=a&&a[1]||"",Ee=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ce+i+Ee}var it=!1;function mt(i,a){if(!i||it)return"";it=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ae){var ee=ae}Reflect.construct(i,[],fe)}else{try{fe.call()}catch(ae){ee=ae}i.call(fe.prototype)}}else{try{throw Error()}catch(ae){ee=ae}(fe=i())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ae){if(ae&&ee&&typeof ae.stack=="string")return[ae.stack,ee.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),S=b[0],I=b[1];if(S&&I){var z=S.split(`
`),Z=I.split(`
`);for(x=d=0;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;for(;x<Z.length&&!Z[x].includes("DetermineComponentFrameRoot");)x++;if(d===z.length||x===Z.length)for(d=z.length-1,x=Z.length-1;1<=d&&0<=x&&z[d]!==Z[x];)x--;for(;1<=d&&0<=x;d--,x--)if(z[d]!==Z[x]){if(d!==1||x!==1)do if(d--,x--,0>x||z[d]!==Z[x]){var le=`
`+z[d].replace(" at new "," at ");return i.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",i.displayName)),le}while(1<=d&&0<=x);break}}}finally{it=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Ge(l):""}function tt(i,a){switch(i.tag){case 26:case 27:case 5:return Ge(i.type);case 16:return Ge("Lazy");case 13:return i.child!==a&&a!==null?Ge("Suspense Fallback"):Ge("Suspense");case 19:return Ge("SuspenseList");case 0:case 15:return mt(i.type,!1);case 11:return mt(i.type.render,!1);case 1:return mt(i.type,!0);case 31:return Ge("Activity");default:return""}}function $t(i){try{var a="",l=null;do a+=tt(i,l),l=i,i=i.return;while(i);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var St=Object.prototype.hasOwnProperty,Ut=n.unstable_scheduleCallback,jt=n.unstable_cancelCallback,fr=n.unstable_shouldYield,pa=n.unstable_requestPaint,yn=n.unstable_now,ls=n.unstable_getCurrentPriorityLevel,ga=n.unstable_ImmediatePriority,hr=n.unstable_UserBlockingPriority,mn=n.unstable_NormalPriority,cs=n.unstable_LowPriority,uo=n.unstable_IdlePriority,fo=n.log,mr=n.unstable_setDisableYieldValue,Jn=null,qe=null;function Vn(i){if(typeof fo=="function"&&mr(i),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Jn,i)}catch{}}var Dt=Math.clz32?Math.clz32:mo,ho=Math.log,Ii=Math.LN2;function mo(i){return i>>>=0,i===0?32:31-(ho(i)/Ii|0)|0}var Ts=256,ki=262144,Yt=4194304;function Es(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ss(i,a,l){var d=i.pendingLanes;if(d===0)return 0;var x=0,b=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var I=d&134217727;return I!==0?(d=I&~b,d!==0?x=Es(d):(S&=I,S!==0?x=Es(S):l||(l=I&~i,l!==0&&(x=Es(l))))):(I=d&~b,I!==0?x=Es(I):S!==0?x=Es(S):l||(l=d&~i,l!==0&&(x=Es(l)))),x===0?0:a!==0&&a!==x&&(a&b)===0&&(b=x&-x,l=a&-a,b>=l||b===32&&(l&4194048)!==0)?a:x}function us(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Pl(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function po(){var i=Yt;return Yt<<=1,(Yt&62914560)===0&&(Yt=4194304),i}function ds(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Ri(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ll(i,a,l,d,x,b){var S=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var I=i.entanglements,z=i.expirationTimes,Z=i.hiddenUpdates;for(l=S&~l;0<l;){var le=31-Dt(l),fe=1<<le;I[le]=0,z[le]=-1;var ee=Z[le];if(ee!==null)for(Z[le]=null,le=0;le<ee.length;le++){var ae=ee[le];ae!==null&&(ae.lane&=-536870913)}l&=~fe}d!==0&&Mi(i,d,0),b!==0&&x===0&&i.tag!==0&&(i.suspendedLanes|=b&~(S&~a))}function Mi(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var d=31-Dt(a);i.entangledLanes|=a,i.entanglements[d]=i.entanglements[d]|1073741824|l&261930}function ya(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var d=31-Dt(l),x=1<<d;x&a|i[d]&a&&(i[d]|=a),l&=~x}}function xa(i,a){var l=a&-a;return l=(l&42)!==0?1:ai(l),(l&(i.suspendedLanes|a))!==0?0:l}function ai(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function kn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function va(){var i=ue.p;return i!==0?i:(i=window.event,i===void 0?32:Jv(i.type))}function Qn(i,a){var l=ue.p;try{return ue.p=i,a()}finally{ue.p=l}}var fs=Math.random().toString(36).slice(2),Jt="__reactFiber$"+fs,rn="__reactProps$"+fs,As="__reactContainer$"+fs,pr="__reactEvents$"+fs,Ul="__reactListeners$"+fs,ba="__reactHandles$"+fs,J="__reactResources$"+fs,ve="__reactMarker$"+fs;function Ue(i){delete i[Jt],delete i[rn],delete i[pr],delete i[Ul],delete i[ba]}function Pe(i){var a=i[Jt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[As]||l[Jt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=Dv(i);i!==null;){if(l=i[Jt])return l;i=Dv(i)}return a}i=l,l=i.parentNode}return null}function Me(i){if(i=i[Jt]||i[As]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function st(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(s(33))}function Be(i){var a=i[J];return a||(a=i[J]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ve(i){i[ve]=!0}var vt=new Set,bt={};function Ot(i,a){Xt(i,a),Xt(i+"Capture",a)}function Xt(i,a){for(bt[i]=a,i=0;i<a.length;i++)vt.add(a[i])}var jn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),On={},Wn={};function hs(i){return St.call(Wn,i)?!0:St.call(On,i)?!1:jn.test(i)?Wn[i]=!0:(On[i]=!0,!1)}function Gn(i,a,l){if(hs(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function an(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function Pt(i,a,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+d)}}function zt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Xn(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function gr(i,a,l){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,b=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return x.call(this)},set:function(S){l=""+S,b.call(this,S)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function _t(i){if(!i._valueTracker){var a=Xn(i)?"checked":"value";i._valueTracker=gr(i,a,""+i[a])}}function _a(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),d="";return i&&(d=Xn(i)?i.checked?"true":"false":i.value),i=d,i!==l?(a.setValue(i),!0):!1}function oi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ta=/[\n"\\]/g;function Zn(i){return i.replace(Ta,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function go(i,a,l,d,x,b,S,I){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),a!=null?S==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+zt(a)):i.value!==""+zt(a)&&(i.value=""+zt(a)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),a!=null?Vl(i,S,zt(a)):l!=null?Vl(i,S,zt(l)):d!=null&&i.removeAttribute("value"),x==null&&b!=null&&(i.defaultChecked=!!b),x!=null&&(i.checked=x&&typeof x!="function"&&typeof x!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+zt(I):i.removeAttribute("name")}function hu(i,a,l,d,x,b,S,I){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),a!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){_t(i);return}l=l!=null?""+zt(l):"",a=a!=null?""+zt(a):l,I||a===i.value||(i.value=a),i.defaultValue=a}d=d??x,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=I?i.checked:!!d,i.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),_t(i)}function Vl(i,a,l){a==="number"&&oi(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function yr(i,a,l,d){if(i=i.options,a){a={};for(var x=0;x<l.length;x++)a["$"+l[x]]=!0;for(l=0;l<i.length;l++)x=a.hasOwnProperty("$"+i[l].value),i[l].selected!==x&&(i[l].selected=x),x&&d&&(i[l].defaultSelected=!0)}else{for(l=""+zt(l),a=null,x=0;x<i.length;x++){if(i[x].value===l){i[x].selected=!0,d&&(i[x].defaultSelected=!0);return}a!==null||i[x].disabled||(a=i[x])}a!==null&&(a.selected=!0)}}function mu(i,a,l){if(a!=null&&(a=""+zt(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+zt(l):""}function xr(i,a,l,d){if(a==null){if(d!=null){if(l!=null)throw Error(s(92));if(Ae(d)){if(1<d.length)throw Error(s(93));d=d[0]}l=d}l==null&&(l=""),a=l}l=zt(a),i.defaultValue=l,d=i.textContent,d===l&&d!==""&&d!==null&&(i.value=d),_t(i)}function es(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var pu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jl(i,a,l){var d=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":d?i.setProperty(a,l):typeof l!="number"||l===0||pu.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Ol(i,a,l){if(a!=null&&typeof a!="object")throw Error(s(62));if(i=i.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var x in a)d=a[x],a.hasOwnProperty(x)&&l[x]!==d&&jl(i,x,d)}else for(var b in a)a.hasOwnProperty(b)&&jl(i,b,a[b])}function yo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xo(i){return vr.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Fs(){}var Gl=null;function ws(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var br=null,li=null;function Ea(i){var a=Me(i);if(a&&(i=a.stateNode)){var l=i[rn]||null;e:switch(i=a.stateNode,a.type){case"input":if(go(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Zn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var d=l[a];if(d!==i&&d.form===i.form){var x=d[rn]||null;if(!x)throw Error(s(90));go(d,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(a=0;a<l.length;a++)d=l[a],d.form===i.form&&_a(d)}break e;case"textarea":mu(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&yr(i,!!l.multiple,a,!1)}}}var vo=!1;function _r(i,a,l){if(vo)return i(a,l);vo=!0;try{var d=i(a);return d}finally{if(vo=!1,(br!==null||li!==null)&&(cd(),br&&(a=br,i=li,li=br=null,Ea(a),i)))for(a=0;a<i.length;a++)Ea(i[a])}}function qs(i,a){var l=i.stateNode;if(l===null)return null;var d=l[rn]||null;if(d===null)return null;l=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(s(231,a,typeof l));return l}var Ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sa=!1;if(Ns)try{var It={};Object.defineProperty(It,"passive",{get:function(){Sa=!0}}),window.addEventListener("test",It,It),window.removeEventListener("test",It,It)}catch{Sa=!1}var ci=null,Bl=null,Aa=null;function Hl(){if(Aa)return Aa;var i,a=Bl,l=a.length,d,x="value"in ci?ci.value:ci.textContent,b=x.length;for(i=0;i<l&&a[i]===x[i];i++);var S=l-i;for(d=1;d<=S&&a[l-d]===x[b-d];d++);return Aa=x.slice(i,1<d?1-d:void 0)}function wa(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Di(){return!0}function Ks(){return!1}function _n(i){function a(l,d,x,b,S){this._reactName=l,this._targetInst=x,this.type=d,this.nativeEvent=b,this.target=S,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(l=i[I],this[I]=l?l(b):b[I]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Di:Ks,this.isPropagationStopped=Ks,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Di)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Di)},persist:function(){},isPersistent:Di}),a}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ui=_n(Pi),Tr=_({},Pi,{view:0,detail:0}),zl=_n(Tr),Er,bo,di,_o=_({},Tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==di&&(di&&i.type==="mousemove"?(Er=i.screenX-di.screenX,bo=i.screenY-di.screenY):bo=Er=0,di=i),Er)},movementY:function(i){return"movementY"in i?i.movementY:bo}}),Fl=_n(_o),Na=_({},_o,{dataTransfer:0}),yu=_n(Na),xu=_({},Tr,{relatedTarget:0}),Ca=_n(xu),ql=_({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),vu=_n(ql),To=_({},Pi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),bu=_n(To),_u=_({},Pi,{data:0}),fi=_n(_u),Tu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Au(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Su[i])?!!a[i]:!1}function Sr(){return Au}var Bn=_({},Tr,{key:function(i){if(i.key){var a=Tu[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=wa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Eu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sr,charCode:function(i){return i.type==="keypress"?wa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?wa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),wu=_n(Bn),Nu=_({},_o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Li=_n(Nu),y=_({},Tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sr}),E=_n(y),w=_({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),P=_n(w),Q=_({},_o,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=_n(Q),be=_({},Pi,{newState:0,oldState:0}),Ze=_n(be),Zt=[9,13,27,32],Tt=Ns&&"CompositionEvent"in window,Ft=null;Ns&&"documentMode"in document&&(Ft=document.documentMode);var Cs=Ns&&"TextEvent"in window&&!Ft,hi=Ns&&(!Tt||Ft&&8<Ft&&11>=Ft),$s=" ",Ys=!1;function Ia(i,a){switch(i){case"keyup":return Zt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eo(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var So=!1;function j1(i,a){switch(i){case"compositionend":return Eo(a);case"keypress":return a.which!==32?null:(Ys=!0,$s);case"textInput":return i=a.data,i===$s&&Ys?null:i;default:return null}}function O1(i,a){if(So)return i==="compositionend"||!Tt&&Ia(i,a)?(i=Hl(),Aa=Bl=ci=null,So=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return hi&&a.locale!=="ko"?null:a.data;default:return null}}var G1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ug(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!G1[i.type]:a==="textarea"}function Vg(i,a,l,d){br?li?li.push(d):li=[d]:br=d,a=gd(a,"onChange"),0<a.length&&(l=new ui("onChange","change",null,l,d),i.push({event:l,listeners:a}))}var Kl=null,$l=null;function B1(i){vv(i,0)}function Cu(i){var a=st(i);if(_a(a))return i}function jg(i,a){if(i==="change")return a}var Og=!1;if(Ns){var xh;if(Ns){var vh="oninput"in document;if(!vh){var Gg=document.createElement("div");Gg.setAttribute("oninput","return;"),vh=typeof Gg.oninput=="function"}xh=vh}else xh=!1;Og=xh&&(!document.documentMode||9<document.documentMode)}function Bg(){Kl&&(Kl.detachEvent("onpropertychange",Hg),$l=Kl=null)}function Hg(i){if(i.propertyName==="value"&&Cu($l)){var a=[];Vg(a,$l,i,ws(i)),_r(B1,a)}}function H1(i,a,l){i==="focusin"?(Bg(),Kl=a,$l=l,Kl.attachEvent("onpropertychange",Hg)):i==="focusout"&&Bg()}function z1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Cu($l)}function F1(i,a){if(i==="click")return Cu(a)}function q1(i,a){if(i==="input"||i==="change")return Cu(a)}function K1(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ms=typeof Object.is=="function"?Object.is:K1;function Yl(i,a){if(ms(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),d=Object.keys(a);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var x=l[d];if(!St.call(a,x)||!ms(i[x],a[x]))return!1}return!0}function zg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Fg(i,a){var l=zg(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=a&&d>=a)return{node:l,offset:a-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=zg(l)}}function qg(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?qg(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Kg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=oi(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=oi(i.document)}return a}function bh(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var $1=Ns&&"documentMode"in document&&11>=document.documentMode,Ao=null,_h=null,Jl=null,Th=!1;function $g(i,a,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Th||Ao==null||Ao!==oi(d)||(d=Ao,"selectionStart"in d&&bh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Jl&&Yl(Jl,d)||(Jl=d,d=gd(_h,"onSelect"),0<d.length&&(a=new ui("onSelect","select",null,a,l),i.push({event:a,listeners:d}),a.target=Ao)))}function ka(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var wo={animationend:ka("Animation","AnimationEnd"),animationiteration:ka("Animation","AnimationIteration"),animationstart:ka("Animation","AnimationStart"),transitionrun:ka("Transition","TransitionRun"),transitionstart:ka("Transition","TransitionStart"),transitioncancel:ka("Transition","TransitionCancel"),transitionend:ka("Transition","TransitionEnd")},Eh={},Yg={};Ns&&(Yg=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function Ra(i){if(Eh[i])return Eh[i];if(!wo[i])return i;var a=wo[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in Yg)return Eh[i]=a[l];return i}var Jg=Ra("animationend"),Qg=Ra("animationiteration"),Wg=Ra("animationstart"),Y1=Ra("transitionrun"),J1=Ra("transitionstart"),Q1=Ra("transitioncancel"),Xg=Ra("transitionend"),Zg=new Map,Sh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sh.push("scrollEnd");function Js(i,a){Zg.set(i,a),Ot(a,[i])}var Iu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Is=[],No=0,Ah=0;function ku(){for(var i=No,a=Ah=No=0;a<i;){var l=Is[a];Is[a++]=null;var d=Is[a];Is[a++]=null;var x=Is[a];Is[a++]=null;var b=Is[a];if(Is[a++]=null,d!==null&&x!==null){var S=d.pending;S===null?x.next=x:(x.next=S.next,S.next=x),d.pending=x}b!==0&&ey(l,x,b)}}function Ru(i,a,l,d){Is[No++]=i,Is[No++]=a,Is[No++]=l,Is[No++]=d,Ah|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function wh(i,a,l,d){return Ru(i,a,l,d),Mu(i)}function Ma(i,a){return Ru(i,null,null,a),Mu(i)}function ey(i,a,l){i.lanes|=l;var d=i.alternate;d!==null&&(d.lanes|=l);for(var x=!1,b=i.return;b!==null;)b.childLanes|=l,d=b.alternate,d!==null&&(d.childLanes|=l),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(x=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,x&&a!==null&&(x=31-Dt(l),i=b.hiddenUpdates,d=i[x],d===null?i[x]=[a]:d.push(a),a.lane=l|536870912),b):null}function Mu(i){if(50<yc)throw yc=0,Lm=null,Error(s(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Co={};function W1(i,a,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(i,a,l,d){return new W1(i,a,l,d)}function Nh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ui(i,a){var l=i.alternate;return l===null?(l=ps(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function ty(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Du(i,a,l,d,x,b){var S=0;if(d=i,typeof i=="function")Nh(i)&&(S=1);else if(typeof i=="string")S=nC(i,l,ie.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case k:return i=ps(31,l,a,x),i.elementType=k,i.lanes=b,i;case D:return Da(l.children,x,b,a);case N:S=8,x|=24;break;case L:return i=ps(12,l,a,x|2),i.elementType=L,i.lanes=b,i;case W:return i=ps(13,l,a,x),i.elementType=W,i.lanes=b,i;case se:return i=ps(19,l,a,x),i.elementType=se,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:S=10;break e;case O:S=9;break e;case $:S=11;break e;case R:S=14;break e;case M:S=16,d=null;break e}S=29,l=Error(s(130,i===null?"null":typeof i,"")),d=null}return a=ps(S,l,a,x),a.elementType=i,a.type=d,a.lanes=b,a}function Da(i,a,l,d){return i=ps(7,i,d,a),i.lanes=l,i}function Ch(i,a,l){return i=ps(6,i,null,a),i.lanes=l,i}function ny(i){var a=ps(18,null,null,0);return a.stateNode=i,a}function Ih(i,a,l){return a=ps(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var sy=new WeakMap;function ks(i,a){if(typeof i=="object"&&i!==null){var l=sy.get(i);return l!==void 0?l:(a={value:i,source:a,stack:$t(a)},sy.set(i,a),a)}return{value:i,source:a,stack:$t(a)}}var Io=[],ko=0,Pu=null,Ql=0,Rs=[],Ms=0,Ar=null,mi=1,pi="";function Vi(i,a){Io[ko++]=Ql,Io[ko++]=Pu,Pu=i,Ql=a}function iy(i,a,l){Rs[Ms++]=mi,Rs[Ms++]=pi,Rs[Ms++]=Ar,Ar=i;var d=mi;i=pi;var x=32-Dt(d)-1;d&=~(1<<x),l+=1;var b=32-Dt(a)+x;if(30<b){var S=x-x%5;b=(d&(1<<S)-1).toString(32),d>>=S,x-=S,mi=1<<32-Dt(a)+x|l<<x|d,pi=b+i}else mi=1<<b|l<<x|d,pi=i}function kh(i){i.return!==null&&(Vi(i,1),iy(i,1,0))}function Rh(i){for(;i===Pu;)Pu=Io[--ko],Io[ko]=null,Ql=Io[--ko],Io[ko]=null;for(;i===Ar;)Ar=Rs[--Ms],Rs[Ms]=null,pi=Rs[--Ms],Rs[Ms]=null,mi=Rs[--Ms],Rs[Ms]=null}function ry(i,a){Rs[Ms++]=mi,Rs[Ms++]=pi,Rs[Ms++]=Ar,mi=a.id,pi=a.overflow,Ar=i}var Tn=null,Gt=null,ft=!1,wr=null,Ds=!1,Mh=Error(s(519));function Nr(i){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wl(ks(a,i)),Mh}function ay(i){var a=i.stateNode,l=i.type,d=i.memoizedProps;switch(a[Jt]=i,a[rn]=d,l){case"dialog":at("cancel",a),at("close",a);break;case"iframe":case"object":case"embed":at("load",a);break;case"video":case"audio":for(l=0;l<vc.length;l++)at(vc[l],a);break;case"source":at("error",a);break;case"img":case"image":case"link":at("error",a),at("load",a);break;case"details":at("toggle",a);break;case"input":at("invalid",a),hu(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":at("invalid",a);break;case"textarea":at("invalid",a),xr(a,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||d.suppressHydrationWarning===!0||Ev(a.textContent,l)?(d.popover!=null&&(at("beforetoggle",a),at("toggle",a)),d.onScroll!=null&&at("scroll",a),d.onScrollEnd!=null&&at("scrollend",a),d.onClick!=null&&(a.onclick=Fs),a=!0):a=!1,a||Nr(i,!0)}function oy(i){for(Tn=i.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:Ds=!1;return;case 27:case 3:Ds=!0;return;default:Tn=Tn.return}}function Ro(i){if(i!==Tn)return!1;if(!ft)return oy(i),ft=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Qm(i.type,i.memoizedProps)),l=!l),l&&Gt&&Nr(i),oy(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Gt=Mv(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Gt=Mv(i)}else a===27?(a=Gt,Br(i.type)?(i=tp,tp=null,Gt=i):Gt=a):Gt=Tn?Ls(i.stateNode.nextSibling):null;return!0}function Pa(){Gt=Tn=null,ft=!1}function Dh(){var i=wr;return i!==null&&(is===null?is=i:is.push.apply(is,i),wr=null),i}function Wl(i){wr===null?wr=[i]:wr.push(i)}var Ph=H(null),La=null,ji=null;function Cr(i,a,l){pe(Ph,a._currentValue),a._currentValue=l}function Oi(i){i._currentValue=Ph.current,re(Ph)}function Lh(i,a,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),i===l)break;i=i.return}}function Uh(i,a,l,d){var x=i.child;for(x!==null&&(x.return=i);x!==null;){var b=x.dependencies;if(b!==null){var S=x.child;b=b.firstContext;e:for(;b!==null;){var I=b;b=x;for(var z=0;z<a.length;z++)if(I.context===a[z]){b.lanes|=l,I=b.alternate,I!==null&&(I.lanes|=l),Lh(b.return,l,i),d||(S=null);break e}b=I.next}}else if(x.tag===18){if(S=x.return,S===null)throw Error(s(341));S.lanes|=l,b=S.alternate,b!==null&&(b.lanes|=l),Lh(S,l,i),S=null}else S=x.child;if(S!==null)S.return=x;else for(S=x;S!==null;){if(S===i){S=null;break}if(x=S.sibling,x!==null){x.return=S.return,S=x;break}S=S.return}x=S}}function Mo(i,a,l,d){i=null;for(var x=a,b=!1;x!==null;){if(!b){if((x.flags&524288)!==0)b=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var S=x.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var I=x.type;ms(x.pendingProps.value,S.value)||(i!==null?i.push(I):i=[I])}}else if(x===_e.current){if(S=x.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(i!==null?i.push(Sc):i=[Sc])}x=x.return}i!==null&&Uh(a,i,l,d),a.flags|=262144}function Lu(i){for(i=i.firstContext;i!==null;){if(!ms(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ua(i){La=i,ji=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function En(i){return ly(La,i)}function Uu(i,a){return La===null&&Ua(i),ly(i,a)}function ly(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},ji===null){if(i===null)throw Error(s(308));ji=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else ji=ji.next=a;return l}var X1=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,d){i.push(d)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},Z1=n.unstable_scheduleCallback,eN=n.unstable_NormalPriority,on={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vh(){return{controller:new X1,data:new Map,refCount:0}}function Xl(i){i.refCount--,i.refCount===0&&Z1(eN,function(){i.controller.abort()})}var Zl=null,jh=0,Do=0,Po=null;function tN(i,a){if(Zl===null){var l=Zl=[];jh=0,Do=Bm(),Po={status:"pending",value:void 0,then:function(d){l.push(d)}}}return jh++,a.then(cy,cy),a}function cy(){if(--jh===0&&Zl!==null){Po!==null&&(Po.status="fulfilled");var i=Zl;Zl=null,Do=0,Po=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function nN(i,a){var l=[],d={status:"pending",value:null,reason:null,then:function(x){l.push(x)}};return i.then(function(){d.status="fulfilled",d.value=a;for(var x=0;x<l.length;x++)(0,l[x])(a)},function(x){for(d.status="rejected",d.reason=x,x=0;x<l.length;x++)(0,l[x])(void 0)}),d}var uy=Y.S;Y.S=function(i,a){$x=yn(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&tN(i,a),uy!==null&&uy(i,a)};var Va=H(null);function Oh(){var i=Va.current;return i!==null?i:Lt.pooledCache}function Vu(i,a){a===null?pe(Va,Va.current):pe(Va,a.pool)}function dy(){var i=Oh();return i===null?null:{parent:on._currentValue,pool:i}}var Lo=Error(s(460)),Gh=Error(s(474)),ju=Error(s(542)),Ou={then:function(){}};function fy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function hy(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Fs,Fs),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,py(i),i;default:if(typeof a.status=="string")a.then(Fs,Fs);else{if(i=Lt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=a,i.status="pending",i.then(function(d){if(a.status==="pending"){var x=a;x.status="fulfilled",x.value=d}},function(d){if(a.status==="pending"){var x=a;x.status="rejected",x.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,py(i),i}throw Oa=a,Lo}}function ja(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Oa=l,Lo):l}}var Oa=null;function my(){if(Oa===null)throw Error(s(459));var i=Oa;return Oa=null,i}function py(i){if(i===Lo||i===ju)throw Error(s(483))}var Uo=null,ec=0;function Gu(i){var a=ec;return ec+=1,Uo===null&&(Uo=[]),hy(Uo,i,a)}function tc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Bu(i,a){throw a.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(a),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function gy(i){function a(K,q){if(i){var X=K.deletions;X===null?(K.deletions=[q],K.flags|=16):X.push(q)}}function l(K,q){if(!i)return null;for(;q!==null;)a(K,q),q=q.sibling;return null}function d(K){for(var q=new Map;K!==null;)K.key!==null?q.set(K.key,K):q.set(K.index,K),K=K.sibling;return q}function x(K,q){return K=Ui(K,q),K.index=0,K.sibling=null,K}function b(K,q,X){return K.index=X,i?(X=K.alternate,X!==null?(X=X.index,X<q?(K.flags|=67108866,q):X):(K.flags|=67108866,q)):(K.flags|=1048576,q)}function S(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function I(K,q,X,ce){return q===null||q.tag!==6?(q=Ch(X,K.mode,ce),q.return=K,q):(q=x(q,X),q.return=K,q)}function z(K,q,X,ce){var je=X.type;return je===D?le(K,q,X.props.children,ce,X.key):q!==null&&(q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===M&&ja(je)===q.type)?(q=x(q,X.props),tc(q,X),q.return=K,q):(q=Du(X.type,X.key,X.props,null,K.mode,ce),tc(q,X),q.return=K,q)}function Z(K,q,X,ce){return q===null||q.tag!==4||q.stateNode.containerInfo!==X.containerInfo||q.stateNode.implementation!==X.implementation?(q=Ih(X,K.mode,ce),q.return=K,q):(q=x(q,X.children||[]),q.return=K,q)}function le(K,q,X,ce,je){return q===null||q.tag!==7?(q=Da(X,K.mode,ce,je),q.return=K,q):(q=x(q,X),q.return=K,q)}function fe(K,q,X){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Ch(""+q,K.mode,X),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return X=Du(q.type,q.key,q.props,null,K.mode,X),tc(X,q),X.return=K,X;case C:return q=Ih(q,K.mode,X),q.return=K,q;case M:return q=ja(q),fe(K,q,X)}if(Ae(q)||G(q))return q=Da(q,K.mode,X,null),q.return=K,q;if(typeof q.then=="function")return fe(K,Gu(q),X);if(q.$$typeof===B)return fe(K,Uu(K,q),X);Bu(K,q)}return null}function ee(K,q,X,ce){var je=q!==null?q.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return je!==null?null:I(K,q,""+X,ce);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case A:return X.key===je?z(K,q,X,ce):null;case C:return X.key===je?Z(K,q,X,ce):null;case M:return X=ja(X),ee(K,q,X,ce)}if(Ae(X)||G(X))return je!==null?null:le(K,q,X,ce,null);if(typeof X.then=="function")return ee(K,q,Gu(X),ce);if(X.$$typeof===B)return ee(K,q,Uu(K,X),ce);Bu(K,X)}return null}function ae(K,q,X,ce,je){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return K=K.get(X)||null,I(q,K,""+ce,je);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case A:return K=K.get(ce.key===null?X:ce.key)||null,z(q,K,ce,je);case C:return K=K.get(ce.key===null?X:ce.key)||null,Z(q,K,ce,je);case M:return ce=ja(ce),ae(K,q,X,ce,je)}if(Ae(ce)||G(ce))return K=K.get(X)||null,le(q,K,ce,je,null);if(typeof ce.then=="function")return ae(K,q,X,Gu(ce),je);if(ce.$$typeof===B)return ae(K,q,X,Uu(q,ce),je);Bu(q,ce)}return null}function Re(K,q,X,ce){for(var je=null,gt=null,De=q,nt=q=0,lt=null;De!==null&&nt<X.length;nt++){De.index>nt?(lt=De,De=null):lt=De.sibling;var yt=ee(K,De,X[nt],ce);if(yt===null){De===null&&(De=lt);break}i&&De&&yt.alternate===null&&a(K,De),q=b(yt,q,nt),gt===null?je=yt:gt.sibling=yt,gt=yt,De=lt}if(nt===X.length)return l(K,De),ft&&Vi(K,nt),je;if(De===null){for(;nt<X.length;nt++)De=fe(K,X[nt],ce),De!==null&&(q=b(De,q,nt),gt===null?je=De:gt.sibling=De,gt=De);return ft&&Vi(K,nt),je}for(De=d(De);nt<X.length;nt++)lt=ae(De,K,nt,X[nt],ce),lt!==null&&(i&&lt.alternate!==null&&De.delete(lt.key===null?nt:lt.key),q=b(lt,q,nt),gt===null?je=lt:gt.sibling=lt,gt=lt);return i&&De.forEach(function(Kr){return a(K,Kr)}),ft&&Vi(K,nt),je}function Fe(K,q,X,ce){if(X==null)throw Error(s(151));for(var je=null,gt=null,De=q,nt=q=0,lt=null,yt=X.next();De!==null&&!yt.done;nt++,yt=X.next()){De.index>nt?(lt=De,De=null):lt=De.sibling;var Kr=ee(K,De,yt.value,ce);if(Kr===null){De===null&&(De=lt);break}i&&De&&Kr.alternate===null&&a(K,De),q=b(Kr,q,nt),gt===null?je=Kr:gt.sibling=Kr,gt=Kr,De=lt}if(yt.done)return l(K,De),ft&&Vi(K,nt),je;if(De===null){for(;!yt.done;nt++,yt=X.next())yt=fe(K,yt.value,ce),yt!==null&&(q=b(yt,q,nt),gt===null?je=yt:gt.sibling=yt,gt=yt);return ft&&Vi(K,nt),je}for(De=d(De);!yt.done;nt++,yt=X.next())yt=ae(De,K,nt,yt.value,ce),yt!==null&&(i&&yt.alternate!==null&&De.delete(yt.key===null?nt:yt.key),q=b(yt,q,nt),gt===null?je=yt:gt.sibling=yt,gt=yt);return i&&De.forEach(function(hC){return a(K,hC)}),ft&&Vi(K,nt),je}function Mt(K,q,X,ce){if(typeof X=="object"&&X!==null&&X.type===D&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case A:e:{for(var je=X.key;q!==null;){if(q.key===je){if(je=X.type,je===D){if(q.tag===7){l(K,q.sibling),ce=x(q,X.props.children),ce.return=K,K=ce;break e}}else if(q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===M&&ja(je)===q.type){l(K,q.sibling),ce=x(q,X.props),tc(ce,X),ce.return=K,K=ce;break e}l(K,q);break}else a(K,q);q=q.sibling}X.type===D?(ce=Da(X.props.children,K.mode,ce,X.key),ce.return=K,K=ce):(ce=Du(X.type,X.key,X.props,null,K.mode,ce),tc(ce,X),ce.return=K,K=ce)}return S(K);case C:e:{for(je=X.key;q!==null;){if(q.key===je)if(q.tag===4&&q.stateNode.containerInfo===X.containerInfo&&q.stateNode.implementation===X.implementation){l(K,q.sibling),ce=x(q,X.children||[]),ce.return=K,K=ce;break e}else{l(K,q);break}else a(K,q);q=q.sibling}ce=Ih(X,K.mode,ce),ce.return=K,K=ce}return S(K);case M:return X=ja(X),Mt(K,q,X,ce)}if(Ae(X))return Re(K,q,X,ce);if(G(X)){if(je=G(X),typeof je!="function")throw Error(s(150));return X=je.call(X),Fe(K,q,X,ce)}if(typeof X.then=="function")return Mt(K,q,Gu(X),ce);if(X.$$typeof===B)return Mt(K,q,Uu(K,X),ce);Bu(K,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,q!==null&&q.tag===6?(l(K,q.sibling),ce=x(q,X),ce.return=K,K=ce):(l(K,q),ce=Ch(X,K.mode,ce),ce.return=K,K=ce),S(K)):l(K,q)}return function(K,q,X,ce){try{ec=0;var je=Mt(K,q,X,ce);return Uo=null,je}catch(De){if(De===Lo||De===ju)throw De;var gt=ps(29,De,null,K.mode);return gt.lanes=ce,gt.return=K,gt}finally{}}}var Ga=gy(!0),yy=gy(!1),Ir=!1;function Bh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hh(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function kr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Rr(i,a,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Et&2)!==0){var x=d.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),d.pending=a,a=Mu(i),ey(i,null,l),a}return Ru(i,d,a,l),Mu(i)}function nc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var d=a.lanes;d&=i.pendingLanes,l|=d,a.lanes=l,ya(i,l)}}function zh(i,a){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var x=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?x=b=S:b=b.next=S,l=l.next}while(l!==null);b===null?x=b=a:b=b.next=a}else x=b=a;l={baseState:d.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Fh=!1;function sc(){if(Fh){var i=Po;if(i!==null)throw i}}function ic(i,a,l,d){Fh=!1;var x=i.updateQueue;Ir=!1;var b=x.firstBaseUpdate,S=x.lastBaseUpdate,I=x.shared.pending;if(I!==null){x.shared.pending=null;var z=I,Z=z.next;z.next=null,S===null?b=Z:S.next=Z,S=z;var le=i.alternate;le!==null&&(le=le.updateQueue,I=le.lastBaseUpdate,I!==S&&(I===null?le.firstBaseUpdate=Z:I.next=Z,le.lastBaseUpdate=z))}if(b!==null){var fe=x.baseState;S=0,le=Z=z=null,I=b;do{var ee=I.lane&-536870913,ae=ee!==I.lane;if(ae?(ot&ee)===ee:(d&ee)===ee){ee!==0&&ee===Do&&(Fh=!0),le!==null&&(le=le.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Re=i,Fe=I;ee=a;var Mt=l;switch(Fe.tag){case 1:if(Re=Fe.payload,typeof Re=="function"){fe=Re.call(Mt,fe,ee);break e}fe=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Fe.payload,ee=typeof Re=="function"?Re.call(Mt,fe,ee):Re,ee==null)break e;fe=_({},fe,ee);break e;case 2:Ir=!0}}ee=I.callback,ee!==null&&(i.flags|=64,ae&&(i.flags|=8192),ae=x.callbacks,ae===null?x.callbacks=[ee]:ae.push(ee))}else ae={lane:ee,tag:I.tag,payload:I.payload,callback:I.callback,next:null},le===null?(Z=le=ae,z=fe):le=le.next=ae,S|=ee;if(I=I.next,I===null){if(I=x.shared.pending,I===null)break;ae=I,I=ae.next,ae.next=null,x.lastBaseUpdate=ae,x.shared.pending=null}}while(!0);le===null&&(z=fe),x.baseState=z,x.firstBaseUpdate=Z,x.lastBaseUpdate=le,b===null&&(x.shared.lanes=0),Ur|=S,i.lanes=S,i.memoizedState=fe}}function xy(i,a){if(typeof i!="function")throw Error(s(191,i));i.call(a)}function vy(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)xy(l[i],a)}var Vo=H(null),Hu=H(0);function by(i,a){i=Yi,pe(Hu,i),pe(Vo,a),Yi=i|a.baseLanes}function qh(){pe(Hu,Yi),pe(Vo,Vo.current)}function Kh(){Yi=Hu.current,re(Vo),re(Hu)}var gs=H(null),Ps=null;function Mr(i){var a=i.alternate;pe(en,en.current&1),pe(gs,i),Ps===null&&(a===null||Vo.current!==null||a.memoizedState!==null)&&(Ps=i)}function $h(i){pe(en,en.current),pe(gs,i),Ps===null&&(Ps=i)}function _y(i){i.tag===22?(pe(en,en.current),pe(gs,i),Ps===null&&(Ps=i)):Dr()}function Dr(){pe(en,en.current),pe(gs,gs.current)}function ys(i){re(gs),Ps===i&&(Ps=null),re(en)}var en=H(0);function zu(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Zm(l)||ep(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Gi=0,et=null,kt=null,ln=null,Fu=!1,jo=!1,Ba=!1,qu=0,rc=0,Oo=null,sN=0;function Qt(){throw Error(s(321))}function Yh(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!ms(i[l],a[l]))return!1;return!0}function Jh(i,a,l,d,x,b){return Gi=b,et=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Y.H=i===null||i.memoizedState===null?ix:um,Ba=!1,b=l(d,x),Ba=!1,jo&&(b=Ey(a,l,d,x)),Ty(i),b}function Ty(i){Y.H=lc;var a=kt!==null&&kt.next!==null;if(Gi=0,ln=kt=et=null,Fu=!1,rc=0,Oo=null,a)throw Error(s(300));i===null||cn||(i=i.dependencies,i!==null&&Lu(i)&&(cn=!0))}function Ey(i,a,l,d){et=i;var x=0;do{if(jo&&(Oo=null),rc=0,jo=!1,25<=x)throw Error(s(301));if(x+=1,ln=kt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}Y.H=rx,b=a(l,d)}while(jo);return b}function iN(){var i=Y.H,a=i.useState()[0];return a=typeof a.then=="function"?ac(a):a,i=i.useState()[0],(kt!==null?kt.memoizedState:null)!==i&&(et.flags|=1024),a}function Qh(){var i=qu!==0;return qu=0,i}function Wh(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function Xh(i){if(Fu){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Fu=!1}Gi=0,ln=kt=et=null,jo=!1,rc=qu=0,Oo=null}function Hn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?et.memoizedState=ln=i:ln=ln.next=i,ln}function tn(){if(kt===null){var i=et.alternate;i=i!==null?i.memoizedState:null}else i=kt.next;var a=ln===null?et.memoizedState:ln.next;if(a!==null)ln=a,kt=i;else{if(i===null)throw et.alternate===null?Error(s(467)):Error(s(310));kt=i,i={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},ln===null?et.memoizedState=ln=i:ln=ln.next=i}return ln}function Ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ac(i){var a=rc;return rc+=1,Oo===null&&(Oo=[]),i=hy(Oo,i,a),a=et,(ln===null?a.memoizedState:ln.next)===null&&(a=a.alternate,Y.H=a===null||a.memoizedState===null?ix:um),i}function $u(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ac(i);if(i.$$typeof===B)return En(i)}throw Error(s(438,String(i)))}function Zh(i){var a=null,l=et.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var d=et.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(x){return x.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Ku(),et.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),d=0;d<i;d++)l[d]=V;return a.index++,l}function Bi(i,a){return typeof a=="function"?a(i):a}function Yu(i){var a=tn();return em(a,kt,i)}function em(i,a,l){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=l;var x=i.baseQueue,b=d.pending;if(b!==null){if(x!==null){var S=x.next;x.next=b.next,b.next=S}a.baseQueue=x=b,d.pending=null}if(b=i.baseState,x===null)i.memoizedState=b;else{a=x.next;var I=S=null,z=null,Z=a,le=!1;do{var fe=Z.lane&-536870913;if(fe!==Z.lane?(ot&fe)===fe:(Gi&fe)===fe){var ee=Z.revertLane;if(ee===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),fe===Do&&(le=!0);else if((Gi&ee)===ee){Z=Z.next,ee===Do&&(le=!0);continue}else fe={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(I=z=fe,S=b):z=z.next=fe,et.lanes|=ee,Ur|=ee;fe=Z.action,Ba&&l(b,fe),b=Z.hasEagerState?Z.eagerState:l(b,fe)}else ee={lane:fe,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(I=z=ee,S=b):z=z.next=ee,et.lanes|=fe,Ur|=fe;Z=Z.next}while(Z!==null&&Z!==a);if(z===null?S=b:z.next=I,!ms(b,i.memoizedState)&&(cn=!0,le&&(l=Po,l!==null)))throw l;i.memoizedState=b,i.baseState=S,i.baseQueue=z,d.lastRenderedState=b}return x===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function tm(i){var a=tn(),l=a.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var d=l.dispatch,x=l.pending,b=a.memoizedState;if(x!==null){l.pending=null;var S=x=x.next;do b=i(b,S.action),S=S.next;while(S!==x);ms(b,a.memoizedState)||(cn=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),l.lastRenderedState=b}return[b,d]}function Sy(i,a,l){var d=et,x=tn(),b=ft;if(b){if(l===void 0)throw Error(s(407));l=l()}else l=a();var S=!ms((kt||x).memoizedState,l);if(S&&(x.memoizedState=l,cn=!0),x=x.queue,im(Ny.bind(null,d,x,i),[i]),x.getSnapshot!==a||S||ln!==null&&ln.memoizedState.tag&1){if(d.flags|=2048,Go(9,{destroy:void 0},wy.bind(null,d,x,l,a),null),Lt===null)throw Error(s(349));b||(Gi&127)!==0||Ay(d,a,l)}return l}function Ay(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=et.updateQueue,a===null?(a=Ku(),et.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function wy(i,a,l,d){a.value=l,a.getSnapshot=d,Cy(a)&&Iy(i)}function Ny(i,a,l){return l(function(){Cy(a)&&Iy(i)})}function Cy(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!ms(i,l)}catch{return!0}}function Iy(i){var a=Ma(i,2);a!==null&&rs(a,i,2)}function nm(i){var a=Hn();if(typeof i=="function"){var l=i;if(i=l(),Ba){Vn(!0);try{l()}finally{Vn(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:i},a}function ky(i,a,l,d){return i.baseState=l,em(i,kt,typeof d=="function"?d:Bi)}function rN(i,a,l,d,x){if(Wu(i))throw Error(s(485));if(i=a.action,i!==null){var b={payload:x,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){b.listeners.push(S)}};Y.T!==null?l(!0):b.isTransition=!1,d(b),l=a.pending,l===null?(b.next=a.pending=b,Ry(a,b)):(b.next=l.next,a.pending=l.next=b)}}function Ry(i,a){var l=a.action,d=a.payload,x=i.state;if(a.isTransition){var b=Y.T,S={};Y.T=S;try{var I=l(x,d),z=Y.S;z!==null&&z(S,I),My(i,a,I)}catch(Z){sm(i,a,Z)}finally{b!==null&&S.types!==null&&(b.types=S.types),Y.T=b}}else try{b=l(x,d),My(i,a,b)}catch(Z){sm(i,a,Z)}}function My(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Dy(i,a,d)},function(d){return sm(i,a,d)}):Dy(i,a,l)}function Dy(i,a,l){a.status="fulfilled",a.value=l,Py(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Ry(i,l)))}function sm(i,a,l){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=l,Py(a),a=a.next;while(a!==d)}i.action=null}function Py(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Ly(i,a){return a}function Uy(i,a){if(ft){var l=Lt.formState;if(l!==null){e:{var d=et;if(ft){if(Gt){t:{for(var x=Gt,b=Ds;x.nodeType!==8;){if(!b){x=null;break t}if(x=Ls(x.nextSibling),x===null){x=null;break t}}b=x.data,x=b==="F!"||b==="F"?x:null}if(x){Gt=Ls(x.nextSibling),d=x.data==="F!";break e}}Nr(d)}d=!1}d&&(a=l[0])}}return l=Hn(),l.memoizedState=l.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ly,lastRenderedState:a},l.queue=d,l=tx.bind(null,et,d),d.dispatch=l,d=nm(!1),b=cm.bind(null,et,!1,d.queue),d=Hn(),x={state:a,dispatch:null,action:i,pending:null},d.queue=x,l=rN.bind(null,et,x,b,l),x.dispatch=l,d.memoizedState=i,[a,l,!1]}function Vy(i){var a=tn();return jy(a,kt,i)}function jy(i,a,l){if(a=em(i,a,Ly)[0],i=Yu(Bi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=ac(a)}catch(S){throw S===Lo?ju:S}else d=a;a=tn();var x=a.queue,b=x.dispatch;return l!==a.memoizedState&&(et.flags|=2048,Go(9,{destroy:void 0},aN.bind(null,x,l),null)),[d,b,i]}function aN(i,a){i.action=a}function Oy(i){var a=tn(),l=kt;if(l!==null)return jy(a,l,i);tn(),a=a.memoizedState,l=tn();var d=l.queue.dispatch;return l.memoizedState=i,[a,d,!1]}function Go(i,a,l,d){return i={tag:i,create:l,deps:d,inst:a,next:null},a=et.updateQueue,a===null&&(a=Ku(),et.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,a.lastEffect=i),i}function Gy(){return tn().memoizedState}function Ju(i,a,l,d){var x=Hn();et.flags|=i,x.memoizedState=Go(1|a,{destroy:void 0},l,d===void 0?null:d)}function Qu(i,a,l,d){var x=tn();d=d===void 0?null:d;var b=x.memoizedState.inst;kt!==null&&d!==null&&Yh(d,kt.memoizedState.deps)?x.memoizedState=Go(a,b,l,d):(et.flags|=i,x.memoizedState=Go(1|a,b,l,d))}function By(i,a){Ju(8390656,8,i,a)}function im(i,a){Qu(2048,8,i,a)}function oN(i){et.flags|=4;var a=et.updateQueue;if(a===null)a=Ku(),et.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function Hy(i){var a=tn().memoizedState;return oN({ref:a,nextImpl:i}),function(){if((Et&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function zy(i,a){return Qu(4,2,i,a)}function Fy(i,a){return Qu(4,4,i,a)}function qy(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Ky(i,a,l){l=l!=null?l.concat([i]):null,Qu(4,4,qy.bind(null,a,i),l)}function rm(){}function $y(i,a){var l=tn();a=a===void 0?null:a;var d=l.memoizedState;return a!==null&&Yh(a,d[1])?d[0]:(l.memoizedState=[i,a],i)}function Yy(i,a){var l=tn();a=a===void 0?null:a;var d=l.memoizedState;if(a!==null&&Yh(a,d[1]))return d[0];if(d=i(),Ba){Vn(!0);try{i()}finally{Vn(!1)}}return l.memoizedState=[d,a],d}function am(i,a,l){return l===void 0||(Gi&1073741824)!==0&&(ot&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=Jx(),et.lanes|=i,Ur|=i,l)}function Jy(i,a,l,d){return ms(l,a)?l:Vo.current!==null?(i=am(i,l,d),ms(i,a)||(cn=!0),i):(Gi&42)===0||(Gi&1073741824)!==0&&(ot&261930)===0?(cn=!0,i.memoizedState=l):(i=Jx(),et.lanes|=i,Ur|=i,a)}function Qy(i,a,l,d,x){var b=ue.p;ue.p=b!==0&&8>b?b:8;var S=Y.T,I={};Y.T=I,cm(i,!1,a,l);try{var z=x(),Z=Y.S;if(Z!==null&&Z(I,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var le=nN(z,d);oc(i,a,le,bs(i))}else oc(i,a,d,bs(i))}catch(fe){oc(i,a,{then:function(){},status:"rejected",reason:fe},bs())}finally{ue.p=b,S!==null&&I.types!==null&&(S.types=I.types),Y.T=S}}function lN(){}function om(i,a,l,d){if(i.tag!==5)throw Error(s(476));var x=Wy(i).queue;Qy(i,x,a,xe,l===null?lN:function(){return Xy(i),l(d)})}function Wy(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:xe},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function Xy(i){var a=Wy(i);a.next===null&&(a=i.alternate.memoizedState),oc(i,a.next.queue,{},bs())}function lm(){return En(Sc)}function Zy(){return tn().memoizedState}function ex(){return tn().memoizedState}function cN(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=bs();i=kr(l);var d=Rr(a,i,l);d!==null&&(rs(d,a,l),nc(d,a,l)),a={cache:Vh()},i.payload=a;return}a=a.return}}function uN(i,a,l){var d=bs();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Wu(i)?nx(a,l):(l=wh(i,a,l,d),l!==null&&(rs(l,i,d),sx(l,a,d)))}function tx(i,a,l){var d=bs();oc(i,a,l,d)}function oc(i,a,l,d){var x={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Wu(i))nx(a,x);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var S=a.lastRenderedState,I=b(S,l);if(x.hasEagerState=!0,x.eagerState=I,ms(I,S))return Ru(i,a,x,0),Lt===null&&ku(),!1}catch{}finally{}if(l=wh(i,a,x,d),l!==null)return rs(l,i,d),sx(l,a,d),!0}return!1}function cm(i,a,l,d){if(d={lane:2,revertLane:Bm(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Wu(i)){if(a)throw Error(s(479))}else a=wh(i,l,d,2),a!==null&&rs(a,i,2)}function Wu(i){var a=i.alternate;return i===et||a!==null&&a===et}function nx(i,a){jo=Fu=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function sx(i,a,l){if((l&4194048)!==0){var d=a.lanes;d&=i.pendingLanes,l|=d,a.lanes=l,ya(i,l)}}var lc={readContext:En,use:$u,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};lc.useEffectEvent=Qt;var ix={readContext:En,use:$u,useCallback:function(i,a){return Hn().memoizedState=[i,a===void 0?null:a],i},useContext:En,useEffect:By,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Ju(4194308,4,qy.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Ju(4194308,4,i,a)},useInsertionEffect:function(i,a){Ju(4,2,i,a)},useMemo:function(i,a){var l=Hn();a=a===void 0?null:a;var d=i();if(Ba){Vn(!0);try{i()}finally{Vn(!1)}}return l.memoizedState=[d,a],d},useReducer:function(i,a,l){var d=Hn();if(l!==void 0){var x=l(a);if(Ba){Vn(!0);try{l(a)}finally{Vn(!1)}}}else x=a;return d.memoizedState=d.baseState=x,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:x},d.queue=i,i=i.dispatch=uN.bind(null,et,i),[d.memoizedState,i]},useRef:function(i){var a=Hn();return i={current:i},a.memoizedState=i},useState:function(i){i=nm(i);var a=i.queue,l=tx.bind(null,et,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:rm,useDeferredValue:function(i,a){var l=Hn();return am(l,i,a)},useTransition:function(){var i=nm(!1);return i=Qy.bind(null,et,i.queue,!0,!1),Hn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var d=et,x=Hn();if(ft){if(l===void 0)throw Error(s(407));l=l()}else{if(l=a(),Lt===null)throw Error(s(349));(ot&127)!==0||Ay(d,a,l)}x.memoizedState=l;var b={value:l,getSnapshot:a};return x.queue=b,By(Ny.bind(null,d,b,i),[i]),d.flags|=2048,Go(9,{destroy:void 0},wy.bind(null,d,b,l,a),null),l},useId:function(){var i=Hn(),a=Lt.identifierPrefix;if(ft){var l=pi,d=mi;l=(d&~(1<<32-Dt(d)-1)).toString(32)+l,a="_"+a+"R_"+l,l=qu++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=sN++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:lm,useFormState:Uy,useActionState:Uy,useOptimistic:function(i){var a=Hn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=cm.bind(null,et,!0,l),l.dispatch=a,[i,a]},useMemoCache:Zh,useCacheRefresh:function(){return Hn().memoizedState=cN.bind(null,et)},useEffectEvent:function(i){var a=Hn(),l={impl:i};return a.memoizedState=l,function(){if((Et&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},um={readContext:En,use:$u,useCallback:$y,useContext:En,useEffect:im,useImperativeHandle:Ky,useInsertionEffect:zy,useLayoutEffect:Fy,useMemo:Yy,useReducer:Yu,useRef:Gy,useState:function(){return Yu(Bi)},useDebugValue:rm,useDeferredValue:function(i,a){var l=tn();return Jy(l,kt.memoizedState,i,a)},useTransition:function(){var i=Yu(Bi)[0],a=tn().memoizedState;return[typeof i=="boolean"?i:ac(i),a]},useSyncExternalStore:Sy,useId:Zy,useHostTransitionStatus:lm,useFormState:Vy,useActionState:Vy,useOptimistic:function(i,a){var l=tn();return ky(l,kt,i,a)},useMemoCache:Zh,useCacheRefresh:ex};um.useEffectEvent=Hy;var rx={readContext:En,use:$u,useCallback:$y,useContext:En,useEffect:im,useImperativeHandle:Ky,useInsertionEffect:zy,useLayoutEffect:Fy,useMemo:Yy,useReducer:tm,useRef:Gy,useState:function(){return tm(Bi)},useDebugValue:rm,useDeferredValue:function(i,a){var l=tn();return kt===null?am(l,i,a):Jy(l,kt.memoizedState,i,a)},useTransition:function(){var i=tm(Bi)[0],a=tn().memoizedState;return[typeof i=="boolean"?i:ac(i),a]},useSyncExternalStore:Sy,useId:Zy,useHostTransitionStatus:lm,useFormState:Oy,useActionState:Oy,useOptimistic:function(i,a){var l=tn();return kt!==null?ky(l,kt,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Zh,useCacheRefresh:ex};rx.useEffectEvent=Hy;function dm(i,a,l,d){a=i.memoizedState,l=l(d,a),l=l==null?a:_({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var fm={enqueueSetState:function(i,a,l){i=i._reactInternals;var d=bs(),x=kr(d);x.payload=a,l!=null&&(x.callback=l),a=Rr(i,x,d),a!==null&&(rs(a,i,d),nc(a,i,d))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var d=bs(),x=kr(d);x.tag=1,x.payload=a,l!=null&&(x.callback=l),a=Rr(i,x,d),a!==null&&(rs(a,i,d),nc(a,i,d))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=bs(),d=kr(l);d.tag=2,a!=null&&(d.callback=a),a=Rr(i,d,l),a!==null&&(rs(a,i,l),nc(a,i,l))}};function ax(i,a,l,d,x,b,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,b,S):a.prototype&&a.prototype.isPureReactComponent?!Yl(l,d)||!Yl(x,b):!0}function ox(i,a,l,d){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,d),a.state!==i&&fm.enqueueReplaceState(a,a.state,null)}function Ha(i,a){var l=a;if("ref"in a){l={};for(var d in a)d!=="ref"&&(l[d]=a[d])}if(i=i.defaultProps){l===a&&(l=_({},l));for(var x in i)l[x]===void 0&&(l[x]=i[x])}return l}function lx(i){Iu(i)}function cx(i){console.error(i)}function ux(i){Iu(i)}function Xu(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function dx(i,a,l){try{var d=i.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function hm(i,a,l){return l=kr(l),l.tag=3,l.payload={element:null},l.callback=function(){Xu(i,a)},l}function fx(i){return i=kr(i),i.tag=3,i}function hx(i,a,l,d){var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var b=d.value;i.payload=function(){return x(b)},i.callback=function(){dx(a,l,d)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){dx(a,l,d),typeof x!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})})}function dN(i,a,l,d,x){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=l.alternate,a!==null&&Mo(a,l,x,!0),l=gs.current,l!==null){switch(l.tag){case 31:case 13:return Ps===null?ud():l.alternate===null&&Wt===0&&(Wt=3),l.flags&=-257,l.flags|=65536,l.lanes=x,d===Ou?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([d]):a.add(d),jm(i,d,x)),!1;case 22:return l.flags|=65536,d===Ou?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([d]):l.add(d)),jm(i,d,x)),!1}throw Error(s(435,l.tag))}return jm(i,d,x),ud(),!1}if(ft)return a=gs.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=x,d!==Mh&&(i=Error(s(422),{cause:d}),Wl(ks(i,l)))):(d!==Mh&&(a=Error(s(423),{cause:d}),Wl(ks(a,l))),i=i.current.alternate,i.flags|=65536,x&=-x,i.lanes|=x,d=ks(d,l),x=hm(i.stateNode,d,x),zh(i,x),Wt!==4&&(Wt=2)),!1;var b=Error(s(520),{cause:d});if(b=ks(b,l),gc===null?gc=[b]:gc.push(b),Wt!==4&&(Wt=2),a===null)return!0;d=ks(d,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=x&-x,l.lanes|=i,i=hm(l.stateNode,d,i),zh(l,i),!1;case 1:if(a=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Vr===null||!Vr.has(b))))return l.flags|=65536,x&=-x,l.lanes|=x,x=fx(x),hx(x,i,l,d),zh(l,x),!1}l=l.return}while(l!==null);return!1}var mm=Error(s(461)),cn=!1;function Sn(i,a,l,d){a.child=i===null?yy(a,null,l,d):Ga(a,i.child,l,d)}function mx(i,a,l,d,x){l=l.render;var b=a.ref;if("ref"in d){var S={};for(var I in d)I!=="ref"&&(S[I]=d[I])}else S=d;return Ua(a),d=Jh(i,a,l,S,b,x),I=Qh(),i!==null&&!cn?(Wh(i,a,x),Hi(i,a,x)):(ft&&I&&kh(a),a.flags|=1,Sn(i,a,d,x),a.child)}function px(i,a,l,d,x){if(i===null){var b=l.type;return typeof b=="function"&&!Nh(b)&&b.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=b,gx(i,a,b,d,x)):(i=Du(l.type,null,d,a,a.mode,x),i.ref=a.ref,i.return=a,a.child=i)}if(b=i.child,!Tm(i,x)){var S=b.memoizedProps;if(l=l.compare,l=l!==null?l:Yl,l(S,d)&&i.ref===a.ref)return Hi(i,a,x)}return a.flags|=1,i=Ui(b,d),i.ref=a.ref,i.return=a,a.child=i}function gx(i,a,l,d,x){if(i!==null){var b=i.memoizedProps;if(Yl(b,d)&&i.ref===a.ref)if(cn=!1,a.pendingProps=d=b,Tm(i,x))(i.flags&131072)!==0&&(cn=!0);else return a.lanes=i.lanes,Hi(i,a,x)}return pm(i,a,l,d,x)}function yx(i,a,l,d){var x=d.children,b=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,i!==null){for(d=a.child=i.child,x=0;d!==null;)x=x|d.lanes|d.childLanes,d=d.sibling;d=x&~b}else d=0,a.child=null;return xx(i,a,b,l,d)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Vu(a,b!==null?b.cachePool:null),b!==null?by(a,b):qh(),_y(a);else return d=a.lanes=536870912,xx(i,a,b!==null?b.baseLanes|l:l,l,d)}else b!==null?(Vu(a,b.cachePool),by(a,b),Dr(),a.memoizedState=null):(i!==null&&Vu(a,null),qh(),Dr());return Sn(i,a,x,l),a.child}function cc(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function xx(i,a,l,d,x){var b=Oh();return b=b===null?null:{parent:on._currentValue,pool:b},a.memoizedState={baseLanes:l,cachePool:b},i!==null&&Vu(a,null),qh(),_y(a),i!==null&&Mo(i,a,d,!0),a.childLanes=x,null}function Zu(i,a){return a=td({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function vx(i,a,l){return Ga(a,i.child,null,l),i=Zu(a,a.pendingProps),i.flags|=2,ys(a),a.memoizedState=null,i}function fN(i,a,l){var d=a.pendingProps,x=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(ft){if(d.mode==="hidden")return i=Zu(a,d),a.lanes=536870912,cc(null,i);if($h(a),(i=Gt)?(i=Rv(i,Ds),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Ar!==null?{id:mi,overflow:pi}:null,retryLane:536870912,hydrationErrors:null},l=ny(i),l.return=a,a.child=l,Tn=a,Gt=null)):i=null,i===null)throw Nr(a);return a.lanes=536870912,null}return Zu(a,d)}var b=i.memoizedState;if(b!==null){var S=b.dehydrated;if($h(a),x)if(a.flags&256)a.flags&=-257,a=vx(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(s(558));else if(cn||Mo(i,a,l,!1),x=(l&i.childLanes)!==0,cn||x){if(d=Lt,d!==null&&(S=xa(d,l),S!==0&&S!==b.retryLane))throw b.retryLane=S,Ma(i,S),rs(d,i,S),mm;ud(),a=vx(i,a,l)}else i=b.treeContext,Gt=Ls(S.nextSibling),Tn=a,ft=!0,wr=null,Ds=!1,i!==null&&ry(a,i),a=Zu(a,d),a.flags|=4096;return a}return i=Ui(i.child,{mode:d.mode,children:d.children}),i.ref=a.ref,a.child=i,i.return=a,i}function ed(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function pm(i,a,l,d,x){return Ua(a),l=Jh(i,a,l,d,void 0,x),d=Qh(),i!==null&&!cn?(Wh(i,a,x),Hi(i,a,x)):(ft&&d&&kh(a),a.flags|=1,Sn(i,a,l,x),a.child)}function bx(i,a,l,d,x,b){return Ua(a),a.updateQueue=null,l=Ey(a,d,l,x),Ty(i),d=Qh(),i!==null&&!cn?(Wh(i,a,b),Hi(i,a,b)):(ft&&d&&kh(a),a.flags|=1,Sn(i,a,l,b),a.child)}function _x(i,a,l,d,x){if(Ua(a),a.stateNode===null){var b=Co,S=l.contextType;typeof S=="object"&&S!==null&&(b=En(S)),b=new l(d,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=fm,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=d,b.state=a.memoizedState,b.refs={},Bh(a),S=l.contextType,b.context=typeof S=="object"&&S!==null?En(S):Co,b.state=a.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(dm(a,l,S,d),b.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(S=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),S!==b.state&&fm.enqueueReplaceState(b,b.state,null),ic(a,d,b,x),sc(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(i===null){b=a.stateNode;var I=a.memoizedProps,z=Ha(l,I);b.props=z;var Z=b.context,le=l.contextType;S=Co,typeof le=="object"&&le!==null&&(S=En(le));var fe=l.getDerivedStateFromProps;le=typeof fe=="function"||typeof b.getSnapshotBeforeUpdate=="function",I=a.pendingProps!==I,le||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(I||Z!==S)&&ox(a,b,d,S),Ir=!1;var ee=a.memoizedState;b.state=ee,ic(a,d,b,x),sc(),Z=a.memoizedState,I||ee!==Z||Ir?(typeof fe=="function"&&(dm(a,l,fe,d),Z=a.memoizedState),(z=Ir||ax(a,l,z,d,ee,Z,S))?(le||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=Z),b.props=d,b.state=Z,b.context=S,d=z):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{b=a.stateNode,Hh(i,a),S=a.memoizedProps,le=Ha(l,S),b.props=le,fe=a.pendingProps,ee=b.context,Z=l.contextType,z=Co,typeof Z=="object"&&Z!==null&&(z=En(Z)),I=l.getDerivedStateFromProps,(Z=typeof I=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(S!==fe||ee!==z)&&ox(a,b,d,z),Ir=!1,ee=a.memoizedState,b.state=ee,ic(a,d,b,x),sc();var ae=a.memoizedState;S!==fe||ee!==ae||Ir||i!==null&&i.dependencies!==null&&Lu(i.dependencies)?(typeof I=="function"&&(dm(a,l,I,d),ae=a.memoizedState),(le=Ir||ax(a,l,le,d,ee,ae,z)||i!==null&&i.dependencies!==null&&Lu(i.dependencies))?(Z||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,ae,z),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,ae,z)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=ae),b.props=d,b.state=ae,b.context=z,d=le):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(a.flags|=1024),d=!1)}return b=d,ed(i,a),d=(a.flags&128)!==0,b||d?(b=a.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,i!==null&&d?(a.child=Ga(a,i.child,null,x),a.child=Ga(a,null,l,x)):Sn(i,a,l,x),a.memoizedState=b.state,i=a.child):i=Hi(i,a,x),i}function Tx(i,a,l,d){return Pa(),a.flags|=256,Sn(i,a,l,d),a.child}var gm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ym(i){return{baseLanes:i,cachePool:dy()}}function xm(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=vs),i}function Ex(i,a,l){var d=a.pendingProps,x=!1,b=(a.flags&128)!==0,S;if((S=b)||(S=i!==null&&i.memoizedState===null?!1:(en.current&2)!==0),S&&(x=!0,a.flags&=-129),S=(a.flags&32)!==0,a.flags&=-33,i===null){if(ft){if(x?Mr(a):Dr(),(i=Gt)?(i=Rv(i,Ds),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Ar!==null?{id:mi,overflow:pi}:null,retryLane:536870912,hydrationErrors:null},l=ny(i),l.return=a,a.child=l,Tn=a,Gt=null)):i=null,i===null)throw Nr(a);return ep(i)?a.lanes=32:a.lanes=536870912,null}var I=d.children;return d=d.fallback,x?(Dr(),x=a.mode,I=td({mode:"hidden",children:I},x),d=Da(d,x,l,null),I.return=a,d.return=a,I.sibling=d,a.child=I,d=a.child,d.memoizedState=ym(l),d.childLanes=xm(i,S,l),a.memoizedState=gm,cc(null,d)):(Mr(a),vm(a,I))}var z=i.memoizedState;if(z!==null&&(I=z.dehydrated,I!==null)){if(b)a.flags&256?(Mr(a),a.flags&=-257,a=bm(i,a,l)):a.memoizedState!==null?(Dr(),a.child=i.child,a.flags|=128,a=null):(Dr(),I=d.fallback,x=a.mode,d=td({mode:"visible",children:d.children},x),I=Da(I,x,l,null),I.flags|=2,d.return=a,I.return=a,d.sibling=I,a.child=d,Ga(a,i.child,null,l),d=a.child,d.memoizedState=ym(l),d.childLanes=xm(i,S,l),a.memoizedState=gm,a=cc(null,d));else if(Mr(a),ep(I)){if(S=I.nextSibling&&I.nextSibling.dataset,S)var Z=S.dgst;S=Z,d=Error(s(419)),d.stack="",d.digest=S,Wl({value:d,source:null,stack:null}),a=bm(i,a,l)}else if(cn||Mo(i,a,l,!1),S=(l&i.childLanes)!==0,cn||S){if(S=Lt,S!==null&&(d=xa(S,l),d!==0&&d!==z.retryLane))throw z.retryLane=d,Ma(i,d),rs(S,i,d),mm;Zm(I)||ud(),a=bm(i,a,l)}else Zm(I)?(a.flags|=192,a.child=i.child,a=null):(i=z.treeContext,Gt=Ls(I.nextSibling),Tn=a,ft=!0,wr=null,Ds=!1,i!==null&&ry(a,i),a=vm(a,d.children),a.flags|=4096);return a}return x?(Dr(),I=d.fallback,x=a.mode,z=i.child,Z=z.sibling,d=Ui(z,{mode:"hidden",children:d.children}),d.subtreeFlags=z.subtreeFlags&65011712,Z!==null?I=Ui(Z,I):(I=Da(I,x,l,null),I.flags|=2),I.return=a,d.return=a,d.sibling=I,a.child=d,cc(null,d),d=a.child,I=i.child.memoizedState,I===null?I=ym(l):(x=I.cachePool,x!==null?(z=on._currentValue,x=x.parent!==z?{parent:z,pool:z}:x):x=dy(),I={baseLanes:I.baseLanes|l,cachePool:x}),d.memoizedState=I,d.childLanes=xm(i,S,l),a.memoizedState=gm,cc(i.child,d)):(Mr(a),l=i.child,i=l.sibling,l=Ui(l,{mode:"visible",children:d.children}),l.return=a,l.sibling=null,i!==null&&(S=a.deletions,S===null?(a.deletions=[i],a.flags|=16):S.push(i)),a.child=l,a.memoizedState=null,l)}function vm(i,a){return a=td({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function td(i,a){return i=ps(22,i,null,a),i.lanes=0,i}function bm(i,a,l){return Ga(a,i.child,null,l),i=vm(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Sx(i,a,l){i.lanes|=a;var d=i.alternate;d!==null&&(d.lanes|=a),Lh(i.return,a,l)}function _m(i,a,l,d,x,b){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:x,treeForkCount:b}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=l,S.tailMode=x,S.treeForkCount=b)}function Ax(i,a,l){var d=a.pendingProps,x=d.revealOrder,b=d.tail;d=d.children;var S=en.current,I=(S&2)!==0;if(I?(S=S&1|2,a.flags|=128):S&=1,pe(en,S),Sn(i,a,d,l),d=ft?Ql:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Sx(i,l,a);else if(i.tag===19)Sx(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(x){case"forwards":for(l=a.child,x=null;l!==null;)i=l.alternate,i!==null&&zu(i)===null&&(x=l),l=l.sibling;l=x,l===null?(x=a.child,a.child=null):(x=l.sibling,l.sibling=null),_m(a,!1,x,l,b,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,x=a.child,a.child=null;x!==null;){if(i=x.alternate,i!==null&&zu(i)===null){a.child=x;break}i=x.sibling,x.sibling=l,l=x,x=i}_m(a,!0,l,null,b,d);break;case"together":_m(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function Hi(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),Ur|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(Mo(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(s(153));if(a.child!==null){for(i=a.child,l=Ui(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Ui(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Tm(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Lu(i)))}function hN(i,a,l){switch(a.tag){case 3:Ie(a,a.stateNode.containerInfo),Cr(a,on,i.memoizedState.cache),Pa();break;case 27:case 5:ze(a);break;case 4:Ie(a,a.stateNode.containerInfo);break;case 10:Cr(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,$h(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Mr(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Ex(i,a,l):(Mr(a),i=Hi(i,a,l),i!==null?i.sibling:null);Mr(a);break;case 19:var x=(i.flags&128)!==0;if(d=(l&a.childLanes)!==0,d||(Mo(i,a,l,!1),d=(l&a.childLanes)!==0),x){if(d)return Ax(i,a,l);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),pe(en,en.current),d)break;return null;case 22:return a.lanes=0,yx(i,a,l,a.pendingProps);case 24:Cr(a,on,i.memoizedState.cache)}return Hi(i,a,l)}function wx(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)cn=!0;else{if(!Tm(i,l)&&(a.flags&128)===0)return cn=!1,hN(i,a,l);cn=(i.flags&131072)!==0}else cn=!1,ft&&(a.flags&1048576)!==0&&iy(a,Ql,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(i=ja(a.elementType),a.type=i,typeof i=="function")Nh(i)?(d=Ha(i,d),a.tag=1,a=_x(null,a,i,d,l)):(a.tag=0,a=pm(null,a,i,d,l));else{if(i!=null){var x=i.$$typeof;if(x===$){a.tag=11,a=mx(null,a,i,d,l);break e}else if(x===R){a.tag=14,a=px(null,a,i,d,l);break e}}throw a=me(i)||i,Error(s(306,a,""))}}return a;case 0:return pm(i,a,a.type,a.pendingProps,l);case 1:return d=a.type,x=Ha(d,a.pendingProps),_x(i,a,d,x,l);case 3:e:{if(Ie(a,a.stateNode.containerInfo),i===null)throw Error(s(387));d=a.pendingProps;var b=a.memoizedState;x=b.element,Hh(i,a),ic(a,d,null,l);var S=a.memoizedState;if(d=S.cache,Cr(a,on,d),d!==b.cache&&Uh(a,[on],l,!0),sc(),d=S.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:S.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=Tx(i,a,d,l);break e}else if(d!==x){x=ks(Error(s(424)),a),Wl(x),a=Tx(i,a,d,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Gt=Ls(i.firstChild),Tn=a,ft=!0,wr=null,Ds=!0,l=yy(a,null,d,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Pa(),d===x){a=Hi(i,a,l);break e}Sn(i,a,d,l)}a=a.child}return a;case 26:return ed(i,a),i===null?(l=Vv(a.type,null,a.pendingProps,null))?a.memoizedState=l:ft||(l=a.type,i=a.pendingProps,d=yd(ge.current).createElement(l),d[Jt]=a,d[rn]=i,An(d,l,i),Ve(d),a.stateNode=d):a.memoizedState=Vv(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return ze(a),i===null&&ft&&(d=a.stateNode=Pv(a.type,a.pendingProps,ge.current),Tn=a,Ds=!0,x=Gt,Br(a.type)?(tp=x,Gt=Ls(d.firstChild)):Gt=x),Sn(i,a,a.pendingProps.children,l),ed(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&ft&&((x=d=Gt)&&(d=zN(d,a.type,a.pendingProps,Ds),d!==null?(a.stateNode=d,Tn=a,Gt=Ls(d.firstChild),Ds=!1,x=!0):x=!1),x||Nr(a)),ze(a),x=a.type,b=a.pendingProps,S=i!==null?i.memoizedProps:null,d=b.children,Qm(x,b)?d=null:S!==null&&Qm(x,S)&&(a.flags|=32),a.memoizedState!==null&&(x=Jh(i,a,iN,null,null,l),Sc._currentValue=x),ed(i,a),Sn(i,a,d,l),a.child;case 6:return i===null&&ft&&((i=l=Gt)&&(l=FN(l,a.pendingProps,Ds),l!==null?(a.stateNode=l,Tn=a,Gt=null,i=!0):i=!1),i||Nr(a)),null;case 13:return Ex(i,a,l);case 4:return Ie(a,a.stateNode.containerInfo),d=a.pendingProps,i===null?a.child=Ga(a,null,d,l):Sn(i,a,d,l),a.child;case 11:return mx(i,a,a.type,a.pendingProps,l);case 7:return Sn(i,a,a.pendingProps,l),a.child;case 8:return Sn(i,a,a.pendingProps.children,l),a.child;case 12:return Sn(i,a,a.pendingProps.children,l),a.child;case 10:return d=a.pendingProps,Cr(a,a.type,d.value),Sn(i,a,d.children,l),a.child;case 9:return x=a.type._context,d=a.pendingProps.children,Ua(a),x=En(x),d=d(x),a.flags|=1,Sn(i,a,d,l),a.child;case 14:return px(i,a,a.type,a.pendingProps,l);case 15:return gx(i,a,a.type,a.pendingProps,l);case 19:return Ax(i,a,l);case 31:return fN(i,a,l);case 22:return yx(i,a,l,a.pendingProps);case 24:return Ua(a),d=En(on),i===null?(x=Oh(),x===null&&(x=Lt,b=Vh(),x.pooledCache=b,b.refCount++,b!==null&&(x.pooledCacheLanes|=l),x=b),a.memoizedState={parent:d,cache:x},Bh(a),Cr(a,on,x)):((i.lanes&l)!==0&&(Hh(i,a),ic(a,null,null,l),sc()),x=i.memoizedState,b=a.memoizedState,x.parent!==d?(x={parent:d,cache:d},a.memoizedState=x,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=x),Cr(a,on,d)):(d=b.cache,Cr(a,on,d),d!==x.cache&&Uh(a,[on],l,!0))),Sn(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function zi(i){i.flags|=4}function Em(i,a,l,d,x){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(x&335544128)===x)if(i.stateNode.complete)i.flags|=8192;else if(Zx())i.flags|=8192;else throw Oa=Ou,Gh}else i.flags&=-16777217}function Nx(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Hv(a))if(Zx())i.flags|=8192;else throw Oa=Ou,Gh}function nd(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?po():536870912,i.lanes|=a,Fo|=a)}function uc(i,a){if(!ft)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Bt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(a)for(var x=i.child;x!==null;)l|=x.lanes|x.childLanes,d|=x.subtreeFlags&65011712,d|=x.flags&65011712,x.return=i,x=x.sibling;else for(x=i.child;x!==null;)l|=x.lanes|x.childLanes,d|=x.subtreeFlags,d|=x.flags,x.return=i,x=x.sibling;return i.subtreeFlags|=d,i.childLanes=l,a}function mN(i,a,l){var d=a.pendingProps;switch(Rh(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(a),null;case 1:return Bt(a),null;case 3:return l=a.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Oi(on),He(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Ro(a)?zi(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Dh())),Bt(a),null;case 26:var x=a.type,b=a.memoizedState;return i===null?(zi(a),b!==null?(Bt(a),Nx(a,b)):(Bt(a),Em(a,x,null,d,l))):b?b!==i.memoizedState?(zi(a),Bt(a),Nx(a,b)):(Bt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==d&&zi(a),Bt(a),Em(a,x,i,d,l)),null;case 27:if(pt(a),l=ge.current,x=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&zi(a);else{if(!d){if(a.stateNode===null)throw Error(s(166));return Bt(a),null}i=ie.current,Ro(a)?ay(a):(i=Pv(x,d,l),a.stateNode=i,zi(a))}return Bt(a),null;case 5:if(pt(a),x=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&zi(a);else{if(!d){if(a.stateNode===null)throw Error(s(166));return Bt(a),null}if(b=ie.current,Ro(a))ay(a);else{var S=yd(ge.current);switch(b){case 1:b=S.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:b=S.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":b=S.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":b=S.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":b=S.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?S.createElement("select",{is:d.is}):S.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?S.createElement(x,{is:d.is}):S.createElement(x)}}b[Jt]=a,b[rn]=d;e:for(S=a.child;S!==null;){if(S.tag===5||S.tag===6)b.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===a)break e;for(;S.sibling===null;){if(S.return===null||S.return===a)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}a.stateNode=b;e:switch(An(b,x,d),x){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&zi(a)}}return Bt(a),Em(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==d&&zi(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(s(166));if(i=ge.current,Ro(a)){if(i=a.stateNode,l=a.memoizedProps,d=null,x=Tn,x!==null)switch(x.tag){case 27:case 5:d=x.memoizedProps}i[Jt]=a,i=!!(i.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||Ev(i.nodeValue,l)),i||Nr(a,!0)}else i=yd(i).createTextNode(d),i[Jt]=a,a.stateNode=i}return Bt(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(d=Ro(a),l!==null){if(i===null){if(!d)throw Error(s(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Jt]=a}else Pa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),i=!1}else l=Dh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(ys(a),a):(ys(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Bt(a),null;case 13:if(d=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(x=Ro(a),d!==null&&d.dehydrated!==null){if(i===null){if(!x)throw Error(s(318));if(x=a.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(s(317));x[Jt]=a}else Pa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),x=!1}else x=Dh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=x),x=!0;if(!x)return a.flags&256?(ys(a),a):(ys(a),null)}return ys(a),(a.flags&128)!==0?(a.lanes=l,a):(l=d!==null,i=i!==null&&i.memoizedState!==null,l&&(d=a.child,x=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(x=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==x&&(d.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),nd(a,a.updateQueue),Bt(a),null);case 4:return He(),i===null&&qm(a.stateNode.containerInfo),Bt(a),null;case 10:return Oi(a.type),Bt(a),null;case 19:if(re(en),d=a.memoizedState,d===null)return Bt(a),null;if(x=(a.flags&128)!==0,b=d.rendering,b===null)if(x)uc(d,!1);else{if(Wt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(b=zu(i),b!==null){for(a.flags|=128,uc(d,!1),i=b.updateQueue,a.updateQueue=i,nd(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)ty(l,i),l=l.sibling;return pe(en,en.current&1|2),ft&&Vi(a,d.treeForkCount),a.child}i=i.sibling}d.tail!==null&&yn()>od&&(a.flags|=128,x=!0,uc(d,!1),a.lanes=4194304)}else{if(!x)if(i=zu(b),i!==null){if(a.flags|=128,x=!0,i=i.updateQueue,a.updateQueue=i,nd(a,i),uc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!ft)return Bt(a),null}else 2*yn()-d.renderingStartTime>od&&l!==536870912&&(a.flags|=128,x=!0,uc(d,!1),a.lanes=4194304);d.isBackwards?(b.sibling=a.child,a.child=b):(i=d.last,i!==null?i.sibling=b:a.child=b,d.last=b)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=yn(),i.sibling=null,l=en.current,pe(en,x?l&1|2:l&1),ft&&Vi(a,d.treeForkCount),i):(Bt(a),null);case 22:case 23:return ys(a),Kh(),d=a.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(l&536870912)!==0&&(a.flags&128)===0&&(Bt(a),a.subtreeFlags&6&&(a.flags|=8192)):Bt(a),l=a.updateQueue,l!==null&&nd(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==l&&(a.flags|=2048),i!==null&&re(Va),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Oi(on),Bt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function pN(i,a){switch(Rh(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Oi(on),He(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return pt(a),null;case 31:if(a.memoizedState!==null){if(ys(a),a.alternate===null)throw Error(s(340));Pa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(ys(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Pa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return re(en),null;case 4:return He(),null;case 10:return Oi(a.type),null;case 22:case 23:return ys(a),Kh(),i!==null&&re(Va),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Oi(on),null;case 25:return null;default:return null}}function Cx(i,a){switch(Rh(a),a.tag){case 3:Oi(on),He();break;case 26:case 27:case 5:pt(a);break;case 4:He();break;case 31:a.memoizedState!==null&&ys(a);break;case 13:ys(a);break;case 19:re(en);break;case 10:Oi(a.type);break;case 22:case 23:ys(a),Kh(),i!==null&&re(Va);break;case 24:Oi(on)}}function dc(i,a){try{var l=a.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var x=d.next;l=x;do{if((l.tag&i)===i){d=void 0;var b=l.create,S=l.inst;d=b(),S.destroy=d}l=l.next}while(l!==x)}}catch(I){Nt(a,a.return,I)}}function Pr(i,a,l){try{var d=a.updateQueue,x=d!==null?d.lastEffect:null;if(x!==null){var b=x.next;d=b;do{if((d.tag&i)===i){var S=d.inst,I=S.destroy;if(I!==void 0){S.destroy=void 0,x=a;var z=l,Z=I;try{Z()}catch(le){Nt(x,z,le)}}}d=d.next}while(d!==b)}}catch(le){Nt(a,a.return,le)}}function Ix(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{vy(a,l)}catch(d){Nt(i,i.return,d)}}}function kx(i,a,l){l.props=Ha(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(d){Nt(i,a,d)}}function fc(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof l=="function"?i.refCleanup=l(d):l.current=d}}catch(x){Nt(i,a,x)}}function gi(i,a){var l=i.ref,d=i.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(x){Nt(i,a,x)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(x){Nt(i,a,x)}else l.current=null}function Rx(i){var a=i.type,l=i.memoizedProps,d=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(x){Nt(i,i.return,x)}}function Sm(i,a,l){try{var d=i.stateNode;VN(d,i.type,l,a),d[rn]=a}catch(x){Nt(i,i.return,x)}}function Mx(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Br(i.type)||i.tag===4}function Am(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Mx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Br(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function wm(i,a,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Fs));else if(d!==4&&(d===27&&Br(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(wm(i,a,l),i=i.sibling;i!==null;)wm(i,a,l),i=i.sibling}function sd(i,a,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(d!==4&&(d===27&&Br(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(sd(i,a,l),i=i.sibling;i!==null;)sd(i,a,l),i=i.sibling}function Dx(i){var a=i.stateNode,l=i.memoizedProps;try{for(var d=i.type,x=a.attributes;x.length;)a.removeAttributeNode(x[0]);An(a,d,l),a[Jt]=i,a[rn]=l}catch(b){Nt(i,i.return,b)}}var Fi=!1,un=!1,Nm=!1,Px=typeof WeakSet=="function"?WeakSet:Set,xn=null;function gN(i,a){if(i=i.containerInfo,Ym=Sd,i=Kg(i),bh(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var x=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var S=0,I=-1,z=-1,Z=0,le=0,fe=i,ee=null;t:for(;;){for(var ae;fe!==l||x!==0&&fe.nodeType!==3||(I=S+x),fe!==b||d!==0&&fe.nodeType!==3||(z=S+d),fe.nodeType===3&&(S+=fe.nodeValue.length),(ae=fe.firstChild)!==null;)ee=fe,fe=ae;for(;;){if(fe===i)break t;if(ee===l&&++Z===x&&(I=S),ee===b&&++le===d&&(z=S),(ae=fe.nextSibling)!==null)break;fe=ee,ee=fe.parentNode}fe=ae}l=I===-1||z===-1?null:{start:I,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(Jm={focusedElem:i,selectionRange:l},Sd=!1,xn=a;xn!==null;)if(a=xn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,xn=i;else for(;xn!==null;){switch(a=xn,b=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)x=i[l],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,l=a,x=b.memoizedProps,b=b.memoizedState,d=l.stateNode;try{var Re=Ha(l.type,x);i=d.getSnapshotBeforeUpdate(Re,b),d.__reactInternalSnapshotBeforeUpdate=i}catch(Fe){Nt(l,l.return,Fe)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)Xm(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Xm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=a.sibling,i!==null){i.return=a.return,xn=i;break}xn=a.return}}function Lx(i,a,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:Ki(i,l),d&4&&dc(5,l);break;case 1:if(Ki(i,l),d&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(S){Nt(l,l.return,S)}else{var x=Ha(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(x,a,i.__reactInternalSnapshotBeforeUpdate)}catch(S){Nt(l,l.return,S)}}d&64&&Ix(l),d&512&&fc(l,l.return);break;case 3:if(Ki(i,l),d&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{vy(i,a)}catch(S){Nt(l,l.return,S)}}break;case 27:a===null&&d&4&&Dx(l);case 26:case 5:Ki(i,l),a===null&&d&4&&Rx(l),d&512&&fc(l,l.return);break;case 12:Ki(i,l);break;case 31:Ki(i,l),d&4&&jx(i,l);break;case 13:Ki(i,l),d&4&&Ox(i,l),d&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=AN.bind(null,l),qN(i,l))));break;case 22:if(d=l.memoizedState!==null||Fi,!d){a=a!==null&&a.memoizedState!==null||un,x=Fi;var b=un;Fi=d,(un=a)&&!b?$i(i,l,(l.subtreeFlags&8772)!==0):Ki(i,l),Fi=x,un=b}break;case 30:break;default:Ki(i,l)}}function Ux(i){var a=i.alternate;a!==null&&(i.alternate=null,Ux(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Ue(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var qt=null,ts=!1;function qi(i,a,l){for(l=l.child;l!==null;)Vx(i,a,l),l=l.sibling}function Vx(i,a,l){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Jn,l)}catch{}switch(l.tag){case 26:un||gi(l,a),qi(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:un||gi(l,a);var d=qt,x=ts;Br(l.type)&&(qt=l.stateNode,ts=!1),qi(i,a,l),_c(l.stateNode),qt=d,ts=x;break;case 5:un||gi(l,a);case 6:if(d=qt,x=ts,qt=null,qi(i,a,l),qt=d,ts=x,qt!==null)if(ts)try{(qt.nodeType===9?qt.body:qt.nodeName==="HTML"?qt.ownerDocument.body:qt).removeChild(l.stateNode)}catch(b){Nt(l,a,b)}else try{qt.removeChild(l.stateNode)}catch(b){Nt(l,a,b)}break;case 18:qt!==null&&(ts?(i=qt,Iv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Xo(i)):Iv(qt,l.stateNode));break;case 4:d=qt,x=ts,qt=l.stateNode.containerInfo,ts=!0,qi(i,a,l),qt=d,ts=x;break;case 0:case 11:case 14:case 15:Pr(2,l,a),un||Pr(4,l,a),qi(i,a,l);break;case 1:un||(gi(l,a),d=l.stateNode,typeof d.componentWillUnmount=="function"&&kx(l,a,d)),qi(i,a,l);break;case 21:qi(i,a,l);break;case 22:un=(d=un)||l.memoizedState!==null,qi(i,a,l),un=d;break;default:qi(i,a,l)}}function jx(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Xo(i)}catch(l){Nt(a,a.return,l)}}}function Ox(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Xo(i)}catch(l){Nt(a,a.return,l)}}function yN(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Px),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Px),a;default:throw Error(s(435,i.tag))}}function id(i,a){var l=yN(i);a.forEach(function(d){if(!l.has(d)){l.add(d);var x=wN.bind(null,i,d);d.then(x,x)}})}function ns(i,a){var l=a.deletions;if(l!==null)for(var d=0;d<l.length;d++){var x=l[d],b=i,S=a,I=S;e:for(;I!==null;){switch(I.tag){case 27:if(Br(I.type)){qt=I.stateNode,ts=!1;break e}break;case 5:qt=I.stateNode,ts=!1;break e;case 3:case 4:qt=I.stateNode.containerInfo,ts=!0;break e}I=I.return}if(qt===null)throw Error(s(160));Vx(b,S,x),qt=null,ts=!1,b=x.alternate,b!==null&&(b.return=null),x.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Gx(a,i),a=a.sibling}var Qs=null;function Gx(i,a){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ns(a,i),ss(i),d&4&&(Pr(3,i,i.return),dc(3,i),Pr(5,i,i.return));break;case 1:ns(a,i),ss(i),d&512&&(un||l===null||gi(l,l.return)),d&64&&Fi&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var x=Qs;if(ns(a,i),ss(i),d&512&&(un||l===null||gi(l,l.return)),d&4){var b=l!==null?l.memoizedState:null;if(d=i.memoizedState,l===null)if(d===null)if(i.stateNode===null){e:{d=i.type,l=i.memoizedProps,x=x.ownerDocument||x;t:switch(d){case"title":b=x.getElementsByTagName("title")[0],(!b||b[ve]||b[Jt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=x.createElement(d),x.head.insertBefore(b,x.querySelector("head > title"))),An(b,d,l),b[Jt]=i,Ve(b),d=b;break e;case"link":var S=Gv("link","href",x).get(d+(l.href||""));if(S){for(var I=0;I<S.length;I++)if(b=S[I],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(I,1);break t}}b=x.createElement(d),An(b,d,l),x.head.appendChild(b);break;case"meta":if(S=Gv("meta","content",x).get(d+(l.content||""))){for(I=0;I<S.length;I++)if(b=S[I],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(I,1);break t}}b=x.createElement(d),An(b,d,l),x.head.appendChild(b);break;default:throw Error(s(468,d))}b[Jt]=i,Ve(b),d=b}i.stateNode=d}else Bv(x,i.type,i.stateNode);else i.stateNode=Ov(x,d,i.memoizedProps);else b!==d?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,d===null?Bv(x,i.type,i.stateNode):Ov(x,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Sm(i,i.memoizedProps,l.memoizedProps)}break;case 27:ns(a,i),ss(i),d&512&&(un||l===null||gi(l,l.return)),l!==null&&d&4&&Sm(i,i.memoizedProps,l.memoizedProps);break;case 5:if(ns(a,i),ss(i),d&512&&(un||l===null||gi(l,l.return)),i.flags&32){x=i.stateNode;try{es(x,"")}catch(Re){Nt(i,i.return,Re)}}d&4&&i.stateNode!=null&&(x=i.memoizedProps,Sm(i,x,l!==null?l.memoizedProps:x)),d&1024&&(Nm=!0);break;case 6:if(ns(a,i),ss(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,l=i.stateNode;try{l.nodeValue=d}catch(Re){Nt(i,i.return,Re)}}break;case 3:if(bd=null,x=Qs,Qs=xd(a.containerInfo),ns(a,i),Qs=x,ss(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Xo(a.containerInfo)}catch(Re){Nt(i,i.return,Re)}Nm&&(Nm=!1,Bx(i));break;case 4:d=Qs,Qs=xd(i.stateNode.containerInfo),ns(a,i),ss(i),Qs=d;break;case 12:ns(a,i),ss(i);break;case 31:ns(a,i),ss(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,id(i,d)));break;case 13:ns(a,i),ss(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(ad=yn()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,id(i,d)));break;case 22:x=i.memoizedState!==null;var z=l!==null&&l.memoizedState!==null,Z=Fi,le=un;if(Fi=Z||x,un=le||z,ns(a,i),un=le,Fi=Z,ss(i),d&8192)e:for(a=i.stateNode,a._visibility=x?a._visibility&-2:a._visibility|1,x&&(l===null||z||Fi||un||za(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){z=l=a;try{if(b=z.stateNode,x)S=b.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{I=z.stateNode;var fe=z.memoizedProps.style,ee=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;I.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Re){Nt(z,z.return,Re)}}}else if(a.tag===6){if(l===null){z=a;try{z.stateNode.nodeValue=x?"":z.memoizedProps}catch(Re){Nt(z,z.return,Re)}}}else if(a.tag===18){if(l===null){z=a;try{var ae=z.stateNode;x?kv(ae,!0):kv(z.stateNode,!1)}catch(Re){Nt(z,z.return,Re)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=i.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,id(i,l))));break;case 19:ns(a,i),ss(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,id(i,d)));break;case 30:break;case 21:break;default:ns(a,i),ss(i)}}function ss(i){var a=i.flags;if(a&2){try{for(var l,d=i.return;d!==null;){if(Mx(d)){l=d;break}d=d.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var x=l.stateNode,b=Am(i);sd(i,b,x);break;case 5:var S=l.stateNode;l.flags&32&&(es(S,""),l.flags&=-33);var I=Am(i);sd(i,I,S);break;case 3:case 4:var z=l.stateNode.containerInfo,Z=Am(i);wm(i,Z,z);break;default:throw Error(s(161))}}catch(le){Nt(i,i.return,le)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Bx(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;Bx(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Ki(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Lx(i,a.alternate,a),a=a.sibling}function za(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Pr(4,a,a.return),za(a);break;case 1:gi(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&kx(a,a.return,l),za(a);break;case 27:_c(a.stateNode);case 26:case 5:gi(a,a.return),za(a);break;case 22:a.memoizedState===null&&za(a);break;case 30:za(a);break;default:za(a)}i=i.sibling}}function $i(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,x=i,b=a,S=b.flags;switch(b.tag){case 0:case 11:case 15:$i(x,b,l),dc(4,b);break;case 1:if($i(x,b,l),d=b,x=d.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Z){Nt(d,d.return,Z)}if(d=b,x=d.updateQueue,x!==null){var I=d.stateNode;try{var z=x.shared.hiddenCallbacks;if(z!==null)for(x.shared.hiddenCallbacks=null,x=0;x<z.length;x++)xy(z[x],I)}catch(Z){Nt(d,d.return,Z)}}l&&S&64&&Ix(b),fc(b,b.return);break;case 27:Dx(b);case 26:case 5:$i(x,b,l),l&&d===null&&S&4&&Rx(b),fc(b,b.return);break;case 12:$i(x,b,l);break;case 31:$i(x,b,l),l&&S&4&&jx(x,b);break;case 13:$i(x,b,l),l&&S&4&&Ox(x,b);break;case 22:b.memoizedState===null&&$i(x,b,l),fc(b,b.return);break;case 30:break;default:$i(x,b,l)}a=a.sibling}}function Cm(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Xl(l))}function Im(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Xl(i))}function Ws(i,a,l,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Hx(i,a,l,d),a=a.sibling}function Hx(i,a,l,d){var x=a.flags;switch(a.tag){case 0:case 11:case 15:Ws(i,a,l,d),x&2048&&dc(9,a);break;case 1:Ws(i,a,l,d);break;case 3:Ws(i,a,l,d),x&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Xl(i)));break;case 12:if(x&2048){Ws(i,a,l,d),i=a.stateNode;try{var b=a.memoizedProps,S=b.id,I=b.onPostCommit;typeof I=="function"&&I(S,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(z){Nt(a,a.return,z)}}else Ws(i,a,l,d);break;case 31:Ws(i,a,l,d);break;case 13:Ws(i,a,l,d);break;case 23:break;case 22:b=a.stateNode,S=a.alternate,a.memoizedState!==null?b._visibility&2?Ws(i,a,l,d):hc(i,a):b._visibility&2?Ws(i,a,l,d):(b._visibility|=2,Bo(i,a,l,d,(a.subtreeFlags&10256)!==0||!1)),x&2048&&Cm(S,a);break;case 24:Ws(i,a,l,d),x&2048&&Im(a.alternate,a);break;default:Ws(i,a,l,d)}}function Bo(i,a,l,d,x){for(x=x&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=i,S=a,I=l,z=d,Z=S.flags;switch(S.tag){case 0:case 11:case 15:Bo(b,S,I,z,x),dc(8,S);break;case 23:break;case 22:var le=S.stateNode;S.memoizedState!==null?le._visibility&2?Bo(b,S,I,z,x):hc(b,S):(le._visibility|=2,Bo(b,S,I,z,x)),x&&Z&2048&&Cm(S.alternate,S);break;case 24:Bo(b,S,I,z,x),x&&Z&2048&&Im(S.alternate,S);break;default:Bo(b,S,I,z,x)}a=a.sibling}}function hc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,d=a,x=d.flags;switch(d.tag){case 22:hc(l,d),x&2048&&Cm(d.alternate,d);break;case 24:hc(l,d),x&2048&&Im(d.alternate,d);break;default:hc(l,d)}a=a.sibling}}var mc=8192;function Ho(i,a,l){if(i.subtreeFlags&mc)for(i=i.child;i!==null;)zx(i,a,l),i=i.sibling}function zx(i,a,l){switch(i.tag){case 26:Ho(i,a,l),i.flags&mc&&i.memoizedState!==null&&sC(l,Qs,i.memoizedState,i.memoizedProps);break;case 5:Ho(i,a,l);break;case 3:case 4:var d=Qs;Qs=xd(i.stateNode.containerInfo),Ho(i,a,l),Qs=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=mc,mc=16777216,Ho(i,a,l),mc=d):Ho(i,a,l));break;default:Ho(i,a,l)}}function Fx(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function pc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];xn=d,Kx(d,i)}Fx(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)qx(i),i=i.sibling}function qx(i){switch(i.tag){case 0:case 11:case 15:pc(i),i.flags&2048&&Pr(9,i,i.return);break;case 3:pc(i);break;case 12:pc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,rd(i)):pc(i);break;default:pc(i)}}function rd(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];xn=d,Kx(d,i)}Fx(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Pr(8,a,a.return),rd(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,rd(a));break;default:rd(a)}i=i.sibling}}function Kx(i,a){for(;xn!==null;){var l=xn;switch(l.tag){case 0:case 11:case 15:Pr(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Xl(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,xn=d;else e:for(l=i;xn!==null;){d=xn;var x=d.sibling,b=d.return;if(Ux(d),d===l){xn=null;break e}if(x!==null){x.return=b,xn=x;break e}xn=b}}}var xN={getCacheForType:function(i){var a=En(on),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return En(on).controller.signal}},vN=typeof WeakMap=="function"?WeakMap:Map,Et=0,Lt=null,rt=null,ot=0,wt=0,xs=null,Lr=!1,zo=!1,km=!1,Yi=0,Wt=0,Ur=0,Fa=0,Rm=0,vs=0,Fo=0,gc=null,is=null,Mm=!1,ad=0,$x=0,od=1/0,ld=null,Vr=null,pn=0,jr=null,qo=null,Ji=0,Dm=0,Pm=null,Yx=null,yc=0,Lm=null;function bs(){return(Et&2)!==0&&ot!==0?ot&-ot:Y.T!==null?Bm():va()}function Jx(){if(vs===0)if((ot&536870912)===0||ft){var i=ki;ki<<=1,(ki&3932160)===0&&(ki=262144),vs=i}else vs=536870912;return i=gs.current,i!==null&&(i.flags|=32),vs}function rs(i,a,l){(i===Lt&&(wt===2||wt===9)||i.cancelPendingCommit!==null)&&(Ko(i,0),Or(i,ot,vs,!1)),Ri(i,l),((Et&2)===0||i!==Lt)&&(i===Lt&&((Et&2)===0&&(Fa|=l),Wt===4&&Or(i,ot,vs,!1)),yi(i))}function Qx(i,a,l){if((Et&6)!==0)throw Error(s(327));var d=!l&&(a&127)===0&&(a&i.expiredLanes)===0||us(i,a),x=d?TN(i,a):Vm(i,a,!0),b=d;do{if(x===0){zo&&!d&&Or(i,a,0,!1);break}else{if(l=i.current.alternate,b&&!bN(l)){x=Vm(i,a,!1),b=!1;continue}if(x===2){if(b=a,i.errorRecoveryDisabledLanes&b)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){a=S;e:{var I=i;x=gc;var z=I.current.memoizedState.isDehydrated;if(z&&(Ko(I,S).flags|=256),S=Vm(I,S,!1),S!==2){if(km&&!z){I.errorRecoveryDisabledLanes|=b,Fa|=b,x=4;break e}b=is,is=x,b!==null&&(is===null?is=b:is.push.apply(is,b))}x=S}if(b=!1,x!==2)continue}}if(x===1){Ko(i,0),Or(i,a,0,!0);break}e:{switch(d=i,b=x,b){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Or(d,a,vs,!Lr);break e;case 2:is=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(x=ad+300-yn(),10<x)){if(Or(d,a,vs,!Lr),Ss(d,0,!0)!==0)break e;Ji=a,d.timeoutHandle=Nv(Wx.bind(null,d,l,is,ld,Mm,a,vs,Fa,Fo,Lr,b,"Throttled",-0,0),x);break e}Wx(d,l,is,ld,Mm,a,vs,Fa,Fo,Lr,b,null,-0,0)}}break}while(!0);yi(i)}function Wx(i,a,l,d,x,b,S,I,z,Z,le,fe,ee,ae){if(i.timeoutHandle=-1,fe=a.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fs},zx(a,b,fe);var Re=(b&62914560)===b?ad-yn():(b&4194048)===b?$x-yn():0;if(Re=iC(fe,Re),Re!==null){Ji=b,i.cancelPendingCommit=Re(rv.bind(null,i,a,b,l,d,x,S,I,z,le,fe,null,ee,ae)),Or(i,b,S,!Z);return}}rv(i,a,b,l,d,x,S,I,z)}function bN(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var x=l[d],b=x.getSnapshot;x=x.value;try{if(!ms(b(),x))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Or(i,a,l,d){a&=~Rm,a&=~Fa,i.suspendedLanes|=a,i.pingedLanes&=~a,d&&(i.warmLanes|=a),d=i.expirationTimes;for(var x=a;0<x;){var b=31-Dt(x),S=1<<b;d[b]=-1,x&=~S}l!==0&&Mi(i,l,a)}function cd(){return(Et&6)===0?(xc(0),!1):!0}function Um(){if(rt!==null){if(wt===0)var i=rt.return;else i=rt,ji=La=null,Xh(i),Uo=null,ec=0,i=rt;for(;i!==null;)Cx(i.alternate,i),i=i.return;rt=null}}function Ko(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,GN(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Ji=0,Um(),Lt=i,rt=l=Ui(i.current,null),ot=a,wt=0,xs=null,Lr=!1,zo=us(i,a),km=!1,Fo=vs=Rm=Fa=Ur=Wt=0,is=gc=null,Mm=!1,(a&8)!==0&&(a|=a&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=a;0<d;){var x=31-Dt(d),b=1<<x;a|=i[x],d&=~b}return Yi=a,ku(),l}function Xx(i,a){et=null,Y.H=lc,a===Lo||a===ju?(a=my(),wt=3):a===Gh?(a=my(),wt=4):wt=a===mm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,xs=a,rt===null&&(Wt=1,Xu(i,ks(a,i.current)))}function Zx(){var i=gs.current;return i===null?!0:(ot&4194048)===ot?Ps===null:(ot&62914560)===ot||(ot&536870912)!==0?i===Ps:!1}function ev(){var i=Y.H;return Y.H=lc,i===null?lc:i}function tv(){var i=Y.A;return Y.A=xN,i}function ud(){Wt=4,Lr||(ot&4194048)!==ot&&gs.current!==null||(zo=!0),(Ur&134217727)===0&&(Fa&134217727)===0||Lt===null||Or(Lt,ot,vs,!1)}function Vm(i,a,l){var d=Et;Et|=2;var x=ev(),b=tv();(Lt!==i||ot!==a)&&(ld=null,Ko(i,a)),a=!1;var S=Wt;e:do try{if(wt!==0&&rt!==null){var I=rt,z=xs;switch(wt){case 8:Um(),S=6;break e;case 3:case 2:case 9:case 6:gs.current===null&&(a=!0);var Z=wt;if(wt=0,xs=null,$o(i,I,z,Z),l&&zo){S=0;break e}break;default:Z=wt,wt=0,xs=null,$o(i,I,z,Z)}}_N(),S=Wt;break}catch(le){Xx(i,le)}while(!0);return a&&i.shellSuspendCounter++,ji=La=null,Et=d,Y.H=x,Y.A=b,rt===null&&(Lt=null,ot=0,ku()),S}function _N(){for(;rt!==null;)nv(rt)}function TN(i,a){var l=Et;Et|=2;var d=ev(),x=tv();Lt!==i||ot!==a?(ld=null,od=yn()+500,Ko(i,a)):zo=us(i,a);e:do try{if(wt!==0&&rt!==null){a=rt;var b=xs;t:switch(wt){case 1:wt=0,xs=null,$o(i,a,b,1);break;case 2:case 9:if(fy(b)){wt=0,xs=null,sv(a);break}a=function(){wt!==2&&wt!==9||Lt!==i||(wt=7),yi(i)},b.then(a,a);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:fy(b)?(wt=0,xs=null,sv(a)):(wt=0,xs=null,$o(i,a,b,7));break;case 5:var S=null;switch(rt.tag){case 26:S=rt.memoizedState;case 5:case 27:var I=rt;if(S?Hv(S):I.stateNode.complete){wt=0,xs=null;var z=I.sibling;if(z!==null)rt=z;else{var Z=I.return;Z!==null?(rt=Z,dd(Z)):rt=null}break t}}wt=0,xs=null,$o(i,a,b,5);break;case 6:wt=0,xs=null,$o(i,a,b,6);break;case 8:Um(),Wt=6;break e;default:throw Error(s(462))}}EN();break}catch(le){Xx(i,le)}while(!0);return ji=La=null,Y.H=d,Y.A=x,Et=l,rt!==null?0:(Lt=null,ot=0,ku(),Wt)}function EN(){for(;rt!==null&&!fr();)nv(rt)}function nv(i){var a=wx(i.alternate,i,Yi);i.memoizedProps=i.pendingProps,a===null?dd(i):rt=a}function sv(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=bx(l,a,a.pendingProps,a.type,void 0,ot);break;case 11:a=bx(l,a,a.pendingProps,a.type.render,a.ref,ot);break;case 5:Xh(a);default:Cx(l,a),a=rt=ty(a,Yi),a=wx(l,a,Yi)}i.memoizedProps=i.pendingProps,a===null?dd(i):rt=a}function $o(i,a,l,d){ji=La=null,Xh(a),Uo=null,ec=0;var x=a.return;try{if(dN(i,x,a,l,ot)){Wt=1,Xu(i,ks(l,i.current)),rt=null;return}}catch(b){if(x!==null)throw rt=x,b;Wt=1,Xu(i,ks(l,i.current)),rt=null;return}a.flags&32768?(ft||d===1?i=!0:zo||(ot&536870912)!==0?i=!1:(Lr=i=!0,(d===2||d===9||d===3||d===6)&&(d=gs.current,d!==null&&d.tag===13&&(d.flags|=16384))),iv(a,i)):dd(a)}function dd(i){var a=i;do{if((a.flags&32768)!==0){iv(a,Lr);return}i=a.return;var l=mN(a.alternate,a,Yi);if(l!==null){rt=l;return}if(a=a.sibling,a!==null){rt=a;return}rt=a=i}while(a!==null);Wt===0&&(Wt=5)}function iv(i,a){do{var l=pN(i.alternate,i);if(l!==null){l.flags&=32767,rt=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){rt=i;return}rt=i=l}while(i!==null);Wt=6,rt=null}function rv(i,a,l,d,x,b,S,I,z){i.cancelPendingCommit=null;do fd();while(pn!==0);if((Et&6)!==0)throw Error(s(327));if(a!==null){if(a===i.current)throw Error(s(177));if(b=a.lanes|a.childLanes,b|=Ah,Ll(i,l,b,S,I,z),i===Lt&&(rt=Lt=null,ot=0),qo=a,jr=i,Ji=l,Dm=b,Pm=x,Yx=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,NN(mn,function(){return uv(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null,x=ue.p,ue.p=2,S=Et,Et|=4;try{gN(i,a,l)}finally{Et=S,ue.p=x,Y.T=d}}pn=1,av(),ov(),lv()}}function av(){if(pn===1){pn=0;var i=jr,a=qo,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var d=ue.p;ue.p=2;var x=Et;Et|=4;try{Gx(a,i);var b=Jm,S=Kg(i.containerInfo),I=b.focusedElem,z=b.selectionRange;if(S!==I&&I&&I.ownerDocument&&qg(I.ownerDocument.documentElement,I)){if(z!==null&&bh(I)){var Z=z.start,le=z.end;if(le===void 0&&(le=Z),"selectionStart"in I)I.selectionStart=Z,I.selectionEnd=Math.min(le,I.value.length);else{var fe=I.ownerDocument||document,ee=fe&&fe.defaultView||window;if(ee.getSelection){var ae=ee.getSelection(),Re=I.textContent.length,Fe=Math.min(z.start,Re),Mt=z.end===void 0?Fe:Math.min(z.end,Re);!ae.extend&&Fe>Mt&&(S=Mt,Mt=Fe,Fe=S);var K=Fg(I,Fe),q=Fg(I,Mt);if(K&&q&&(ae.rangeCount!==1||ae.anchorNode!==K.node||ae.anchorOffset!==K.offset||ae.focusNode!==q.node||ae.focusOffset!==q.offset)){var X=fe.createRange();X.setStart(K.node,K.offset),ae.removeAllRanges(),Fe>Mt?(ae.addRange(X),ae.extend(q.node,q.offset)):(X.setEnd(q.node,q.offset),ae.addRange(X))}}}}for(fe=[],ae=I;ae=ae.parentNode;)ae.nodeType===1&&fe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<fe.length;I++){var ce=fe[I];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Sd=!!Ym,Jm=Ym=null}finally{Et=x,ue.p=d,Y.T=l}}i.current=a,pn=2}}function ov(){if(pn===2){pn=0;var i=jr,a=qo,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var d=ue.p;ue.p=2;var x=Et;Et|=4;try{Lx(i,a.alternate,a)}finally{Et=x,ue.p=d,Y.T=l}}pn=3}}function lv(){if(pn===4||pn===3){pn=0,pa();var i=jr,a=qo,l=Ji,d=Yx;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?pn=5:(pn=0,qo=jr=null,cv(i,i.pendingLanes));var x=i.pendingLanes;if(x===0&&(Vr=null),kn(l),a=a.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Jn,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=Y.T,x=ue.p,ue.p=2,Y.T=null;try{for(var b=i.onRecoverableError,S=0;S<d.length;S++){var I=d[S];b(I.value,{componentStack:I.stack})}}finally{Y.T=a,ue.p=x}}(Ji&3)!==0&&fd(),yi(i),x=i.pendingLanes,(l&261930)!==0&&(x&42)!==0?i===Lm?yc++:(yc=0,Lm=i):yc=0,xc(0)}}function cv(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Xl(a)))}function fd(){return av(),ov(),lv(),uv()}function uv(){if(pn!==5)return!1;var i=jr,a=Dm;Dm=0;var l=kn(Ji),d=Y.T,x=ue.p;try{ue.p=32>l?32:l,Y.T=null,l=Pm,Pm=null;var b=jr,S=Ji;if(pn=0,qo=jr=null,Ji=0,(Et&6)!==0)throw Error(s(331));var I=Et;if(Et|=4,qx(b.current),Hx(b,b.current,S,l),Et=I,xc(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Jn,b)}catch{}return!0}finally{ue.p=x,Y.T=d,cv(i,a)}}function dv(i,a,l){a=ks(l,a),a=hm(i.stateNode,a,2),i=Rr(i,a,2),i!==null&&(Ri(i,2),yi(i))}function Nt(i,a,l){if(i.tag===3)dv(i,i,l);else for(;a!==null;){if(a.tag===3){dv(a,i,l);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Vr===null||!Vr.has(d))){i=ks(l,i),l=fx(2),d=Rr(a,l,2),d!==null&&(hx(l,d,a,i),Ri(d,2),yi(d));break}}a=a.return}}function jm(i,a,l){var d=i.pingCache;if(d===null){d=i.pingCache=new vN;var x=new Set;d.set(a,x)}else x=d.get(a),x===void 0&&(x=new Set,d.set(a,x));x.has(l)||(km=!0,x.add(l),i=SN.bind(null,i,a,l),a.then(i,i))}function SN(i,a,l){var d=i.pingCache;d!==null&&d.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Lt===i&&(ot&l)===l&&(Wt===4||Wt===3&&(ot&62914560)===ot&&300>yn()-ad?(Et&2)===0&&Ko(i,0):Rm|=l,Fo===ot&&(Fo=0)),yi(i)}function fv(i,a){a===0&&(a=po()),i=Ma(i,a),i!==null&&(Ri(i,a),yi(i))}function AN(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),fv(i,l)}function wN(i,a){var l=0;switch(i.tag){case 31:case 13:var d=i.stateNode,x=i.memoizedState;x!==null&&(l=x.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(a),fv(i,l)}function NN(i,a){return Ut(i,a)}var hd=null,Yo=null,Om=!1,md=!1,Gm=!1,Gr=0;function yi(i){i!==Yo&&i.next===null&&(Yo===null?hd=Yo=i:Yo=Yo.next=i),md=!0,Om||(Om=!0,IN())}function xc(i,a){if(!Gm&&md){Gm=!0;do for(var l=!1,d=hd;d!==null;){if(i!==0){var x=d.pendingLanes;if(x===0)var b=0;else{var S=d.suspendedLanes,I=d.pingedLanes;b=(1<<31-Dt(42|i)+1)-1,b&=x&~(S&~I),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,gv(d,b))}else b=ot,b=Ss(d,d===Lt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||us(d,b)||(l=!0,gv(d,b));d=d.next}while(l);Gm=!1}}function CN(){hv()}function hv(){md=Om=!1;var i=0;Gr!==0&&ON()&&(i=Gr);for(var a=yn(),l=null,d=hd;d!==null;){var x=d.next,b=mv(d,a);b===0?(d.next=null,l===null?hd=x:l.next=x,x===null&&(Yo=l)):(l=d,(i!==0||(b&3)!==0)&&(md=!0)),d=x}pn!==0&&pn!==5||xc(i),Gr!==0&&(Gr=0)}function mv(i,a){for(var l=i.suspendedLanes,d=i.pingedLanes,x=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var S=31-Dt(b),I=1<<S,z=x[S];z===-1?((I&l)===0||(I&d)!==0)&&(x[S]=Pl(I,a)):z<=a&&(i.expiredLanes|=I),b&=~I}if(a=Lt,l=ot,l=Ss(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,l===0||i===a&&(wt===2||wt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&jt(d),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||us(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(d!==null&&jt(d),kn(l)){case 2:case 8:l=hr;break;case 32:l=mn;break;case 268435456:l=uo;break;default:l=mn}return d=pv.bind(null,i),l=Ut(l,d),i.callbackPriority=a,i.callbackNode=l,a}return d!==null&&d!==null&&jt(d),i.callbackPriority=2,i.callbackNode=null,2}function pv(i,a){if(pn!==0&&pn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(fd()&&i.callbackNode!==l)return null;var d=ot;return d=Ss(i,i===Lt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(Qx(i,d,a),mv(i,yn()),i.callbackNode!=null&&i.callbackNode===l?pv.bind(null,i):null)}function gv(i,a){if(fd())return null;Qx(i,a,!0)}function IN(){BN(function(){(Et&6)!==0?Ut(ga,CN):hv()})}function Bm(){if(Gr===0){var i=Do;i===0&&(i=Ts,Ts<<=1,(Ts&261888)===0&&(Ts=256)),Gr=i}return Gr}function yv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:xo(""+i)}function xv(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function kN(i,a,l,d,x){if(a==="submit"&&l&&l.stateNode===x){var b=yv((x[rn]||null).action),S=d.submitter;S&&(a=(a=S[rn]||null)?yv(a.formAction):S.getAttribute("formAction"),a!==null&&(b=a,S=null));var I=new ui("action","action",null,d,x);i.push({event:I,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Gr!==0){var z=S?xv(x,S):new FormData(x);om(l,{pending:!0,data:z,method:x.method,action:b},null,z)}}else typeof b=="function"&&(I.preventDefault(),z=S?xv(x,S):new FormData(x),om(l,{pending:!0,data:z,method:x.method,action:b},b,z))},currentTarget:x}]})}}for(var Hm=0;Hm<Sh.length;Hm++){var zm=Sh[Hm],RN=zm.toLowerCase(),MN=zm[0].toUpperCase()+zm.slice(1);Js(RN,"on"+MN)}Js(Jg,"onAnimationEnd"),Js(Qg,"onAnimationIteration"),Js(Wg,"onAnimationStart"),Js("dblclick","onDoubleClick"),Js("focusin","onFocus"),Js("focusout","onBlur"),Js(Y1,"onTransitionRun"),Js(J1,"onTransitionStart"),Js(Q1,"onTransitionCancel"),Js(Xg,"onTransitionEnd"),Xt("onMouseEnter",["mouseout","mouseover"]),Xt("onMouseLeave",["mouseout","mouseover"]),Xt("onPointerEnter",["pointerout","pointerover"]),Xt("onPointerLeave",["pointerout","pointerover"]),Ot("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ot("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ot("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ot("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ot("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ot("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vc));function vv(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],x=d.event;d=d.listeners;e:{var b=void 0;if(a)for(var S=d.length-1;0<=S;S--){var I=d[S],z=I.instance,Z=I.currentTarget;if(I=I.listener,z!==b&&x.isPropagationStopped())break e;b=I,x.currentTarget=Z;try{b(x)}catch(le){Iu(le)}x.currentTarget=null,b=z}else for(S=0;S<d.length;S++){if(I=d[S],z=I.instance,Z=I.currentTarget,I=I.listener,z!==b&&x.isPropagationStopped())break e;b=I,x.currentTarget=Z;try{b(x)}catch(le){Iu(le)}x.currentTarget=null,b=z}}}}function at(i,a){var l=a[pr];l===void 0&&(l=a[pr]=new Set);var d=i+"__bubble";l.has(d)||(bv(a,i,2,!1),l.add(d))}function Fm(i,a,l){var d=0;a&&(d|=4),bv(l,i,d,a)}var pd="_reactListening"+Math.random().toString(36).slice(2);function qm(i){if(!i[pd]){i[pd]=!0,vt.forEach(function(l){l!=="selectionchange"&&(DN.has(l)||Fm(l,!1,i),Fm(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[pd]||(a[pd]=!0,Fm("selectionchange",!1,a))}}function bv(i,a,l,d){switch(Jv(a)){case 2:var x=oC;break;case 8:x=lC;break;default:x=ap}l=x.bind(null,a,l,i),x=void 0,!Sa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),d?x!==void 0?i.addEventListener(a,l,{capture:!0,passive:x}):i.addEventListener(a,l,!0):x!==void 0?i.addEventListener(a,l,{passive:x}):i.addEventListener(a,l,!1)}function Km(i,a,l,d,x){var b=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var I=d.stateNode.containerInfo;if(I===x)break;if(S===4)for(S=d.return;S!==null;){var z=S.tag;if((z===3||z===4)&&S.stateNode.containerInfo===x)return;S=S.return}for(;I!==null;){if(S=Pe(I),S===null)return;if(z=S.tag,z===5||z===6||z===26||z===27){d=b=S;continue e}I=I.parentNode}}d=d.return}_r(function(){var Z=b,le=ws(l),fe=[];e:{var ee=Zg.get(i);if(ee!==void 0){var ae=ui,Re=i;switch(i){case"keypress":if(wa(l)===0)break e;case"keydown":case"keyup":ae=wu;break;case"focusin":Re="focus",ae=Ca;break;case"focusout":Re="blur",ae=Ca;break;case"beforeblur":case"afterblur":ae=Ca;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=yu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=E;break;case Jg:case Qg:case Wg:ae=vu;break;case Xg:ae=P;break;case"scroll":case"scrollend":ae=zl;break;case"wheel":ae=ne;break;case"copy":case"cut":case"paste":ae=bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Li;break;case"toggle":case"beforetoggle":ae=Ze}var Fe=(a&4)!==0,Mt=!Fe&&(i==="scroll"||i==="scrollend"),K=Fe?ee!==null?ee+"Capture":null:ee;Fe=[];for(var q=Z,X;q!==null;){var ce=q;if(X=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||X===null||K===null||(ce=qs(q,K),ce!=null&&Fe.push(bc(q,ce,X))),Mt)break;q=q.return}0<Fe.length&&(ee=new ae(ee,Re,null,l,le),fe.push({event:ee,listeners:Fe}))}}if((a&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",ae=i==="mouseout"||i==="pointerout",ee&&l!==Gl&&(Re=l.relatedTarget||l.fromElement)&&(Pe(Re)||Re[As]))break e;if((ae||ee)&&(ee=le.window===le?le:(ee=le.ownerDocument)?ee.defaultView||ee.parentWindow:window,ae?(Re=l.relatedTarget||l.toElement,ae=Z,Re=Re?Pe(Re):null,Re!==null&&(Mt=o(Re),Fe=Re.tag,Re!==Mt||Fe!==5&&Fe!==27&&Fe!==6)&&(Re=null)):(ae=null,Re=Z),ae!==Re)){if(Fe=Fl,ce="onMouseLeave",K="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Fe=Li,ce="onPointerLeave",K="onPointerEnter",q="pointer"),Mt=ae==null?ee:st(ae),X=Re==null?ee:st(Re),ee=new Fe(ce,q+"leave",ae,l,le),ee.target=Mt,ee.relatedTarget=X,ce=null,Pe(le)===Z&&(Fe=new Fe(K,q+"enter",Re,l,le),Fe.target=X,Fe.relatedTarget=Mt,ce=Fe),Mt=ce,ae&&Re)t:{for(Fe=PN,K=ae,q=Re,X=0,ce=K;ce;ce=Fe(ce))X++;ce=0;for(var je=q;je;je=Fe(je))ce++;for(;0<X-ce;)K=Fe(K),X--;for(;0<ce-X;)q=Fe(q),ce--;for(;X--;){if(K===q||q!==null&&K===q.alternate){Fe=K;break t}K=Fe(K),q=Fe(q)}Fe=null}else Fe=null;ae!==null&&_v(fe,ee,ae,Fe,!1),Re!==null&&Mt!==null&&_v(fe,Mt,Re,Fe,!0)}}e:{if(ee=Z?st(Z):window,ae=ee.nodeName&&ee.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ee.type==="file")var gt=jg;else if(Ug(ee))if(Og)gt=q1;else{gt=z1;var De=H1}else ae=ee.nodeName,!ae||ae.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?Z&&yo(Z.elementType)&&(gt=jg):gt=F1;if(gt&&(gt=gt(i,Z))){Vg(fe,gt,l,le);break e}De&&De(i,ee,Z),i==="focusout"&&Z&&ee.type==="number"&&Z.memoizedProps.value!=null&&Vl(ee,"number",ee.value)}switch(De=Z?st(Z):window,i){case"focusin":(Ug(De)||De.contentEditable==="true")&&(Ao=De,_h=Z,Jl=null);break;case"focusout":Jl=_h=Ao=null;break;case"mousedown":Th=!0;break;case"contextmenu":case"mouseup":case"dragend":Th=!1,$g(fe,l,le);break;case"selectionchange":if($1)break;case"keydown":case"keyup":$g(fe,l,le)}var nt;if(Tt)e:{switch(i){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else So?Ia(i,l)&&(lt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(lt="onCompositionStart");lt&&(hi&&l.locale!=="ko"&&(So||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&So&&(nt=Hl()):(ci=le,Bl="value"in ci?ci.value:ci.textContent,So=!0)),De=gd(Z,lt),0<De.length&&(lt=new fi(lt,i,null,l,le),fe.push({event:lt,listeners:De}),nt?lt.data=nt:(nt=Eo(l),nt!==null&&(lt.data=nt)))),(nt=Cs?j1(i,l):O1(i,l))&&(lt=gd(Z,"onBeforeInput"),0<lt.length&&(De=new fi("onBeforeInput","beforeinput",null,l,le),fe.push({event:De,listeners:lt}),De.data=nt)),kN(fe,i,Z,l,le)}vv(fe,a)})}function bc(i,a,l){return{instance:i,listener:a,currentTarget:l}}function gd(i,a){for(var l=a+"Capture",d=[];i!==null;){var x=i,b=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||b===null||(x=qs(i,l),x!=null&&d.unshift(bc(i,x,b)),x=qs(i,a),x!=null&&d.push(bc(i,x,b))),i.tag===3)return d;i=i.return}return[]}function PN(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function _v(i,a,l,d,x){for(var b=a._reactName,S=[];l!==null&&l!==d;){var I=l,z=I.alternate,Z=I.stateNode;if(I=I.tag,z!==null&&z===d)break;I!==5&&I!==26&&I!==27||Z===null||(z=Z,x?(Z=qs(l,b),Z!=null&&S.unshift(bc(l,Z,z))):x||(Z=qs(l,b),Z!=null&&S.push(bc(l,Z,z)))),l=l.return}S.length!==0&&i.push({event:a,listeners:S})}var LN=/\r\n?/g,UN=/\u0000|\uFFFD/g;function Tv(i){return(typeof i=="string"?i:""+i).replace(LN,`
`).replace(UN,"")}function Ev(i,a){return a=Tv(a),Tv(i)===a}function Rt(i,a,l,d,x,b){switch(l){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||es(i,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&es(i,""+d);break;case"className":an(i,"class",d);break;case"tabIndex":an(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":an(i,l,d);break;case"style":Ol(i,d,b);break;case"data":if(a!=="object"){an(i,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=xo(""+d),i.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(a!=="input"&&Rt(i,a,"name",x.name,x,null),Rt(i,a,"formEncType",x.formEncType,x,null),Rt(i,a,"formMethod",x.formMethod,x,null),Rt(i,a,"formTarget",x.formTarget,x,null)):(Rt(i,a,"encType",x.encType,x,null),Rt(i,a,"method",x.method,x,null),Rt(i,a,"target",x.target,x,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=xo(""+d),i.setAttribute(l,d);break;case"onClick":d!=null&&(i.onclick=Fs);break;case"onScroll":d!=null&&at("scroll",i);break;case"onScrollEnd":d!=null&&at("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(x.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}l=xo(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""+d):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":d===!0?i.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,d):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(l,d):i.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(l):i.setAttribute(l,d);break;case"popover":at("beforetoggle",i),at("toggle",i),Gn(i,"popover",d);break;case"xlinkActuate":Pt(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Pt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Pt(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Pt(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Pt(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Pt(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Pt(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Pt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Pt(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Gn(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=gu.get(l)||l,Gn(i,l,d))}}function $m(i,a,l,d,x,b){switch(l){case"style":Ol(i,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(x.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"children":typeof d=="string"?es(i,d):(typeof d=="number"||typeof d=="bigint")&&es(i,""+d);break;case"onScroll":d!=null&&at("scroll",i);break;case"onScrollEnd":d!=null&&at("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Fs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bt.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(x=l.endsWith("Capture"),a=l.slice(2,x?l.length-7:void 0),b=i[rn]||null,b=b!=null?b[l]:null,typeof b=="function"&&i.removeEventListener(a,b,x),typeof d=="function")){typeof b!="function"&&b!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,d,x);break e}l in i?i[l]=d:d===!0?i.setAttribute(l,""):Gn(i,l,d)}}}function An(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",i),at("load",i);var d=!1,x=!1,b;for(b in l)if(l.hasOwnProperty(b)){var S=l[b];if(S!=null)switch(b){case"src":d=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Rt(i,a,b,S,l,null)}}x&&Rt(i,a,"srcSet",l.srcSet,l,null),d&&Rt(i,a,"src",l.src,l,null);return;case"input":at("invalid",i);var I=b=S=x=null,z=null,Z=null;for(d in l)if(l.hasOwnProperty(d)){var le=l[d];if(le!=null)switch(d){case"name":x=le;break;case"type":S=le;break;case"checked":z=le;break;case"defaultChecked":Z=le;break;case"value":b=le;break;case"defaultValue":I=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,a));break;default:Rt(i,a,d,le,l,null)}}hu(i,b,I,z,Z,S,x,!1);return;case"select":at("invalid",i),d=S=b=null;for(x in l)if(l.hasOwnProperty(x)&&(I=l[x],I!=null))switch(x){case"value":b=I;break;case"defaultValue":S=I;break;case"multiple":d=I;default:Rt(i,a,x,I,l,null)}a=b,l=S,i.multiple=!!d,a!=null?yr(i,!!d,a,!1):l!=null&&yr(i,!!d,l,!0);return;case"textarea":at("invalid",i),b=x=d=null;for(S in l)if(l.hasOwnProperty(S)&&(I=l[S],I!=null))switch(S){case"value":d=I;break;case"defaultValue":x=I;break;case"children":b=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:Rt(i,a,S,I,l,null)}xr(i,d,x,b);return;case"option":for(z in l)if(l.hasOwnProperty(z)&&(d=l[z],d!=null))switch(z){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Rt(i,a,z,d,l,null)}return;case"dialog":at("beforetoggle",i),at("toggle",i),at("cancel",i),at("close",i);break;case"iframe":case"object":at("load",i);break;case"video":case"audio":for(d=0;d<vc.length;d++)at(vc[d],i);break;case"image":at("error",i),at("load",i);break;case"details":at("toggle",i);break;case"embed":case"source":case"link":at("error",i),at("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in l)if(l.hasOwnProperty(Z)&&(d=l[Z],d!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Rt(i,a,Z,d,l,null)}return;default:if(yo(a)){for(le in l)l.hasOwnProperty(le)&&(d=l[le],d!==void 0&&$m(i,a,le,d,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(d=l[I],d!=null&&Rt(i,a,I,d,l,null))}function VN(i,a,l,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,b=null,S=null,I=null,z=null,Z=null,le=null;for(ae in l){var fe=l[ae];if(l.hasOwnProperty(ae)&&fe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":z=fe;default:d.hasOwnProperty(ae)||Rt(i,a,ae,null,d,fe)}}for(var ee in d){var ae=d[ee];if(fe=l[ee],d.hasOwnProperty(ee)&&(ae!=null||fe!=null))switch(ee){case"type":b=ae;break;case"name":x=ae;break;case"checked":Z=ae;break;case"defaultChecked":le=ae;break;case"value":S=ae;break;case"defaultValue":I=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,a));break;default:ae!==fe&&Rt(i,a,ee,ae,d,fe)}}go(i,S,I,z,Z,le,b,x);return;case"select":ae=S=I=ee=null;for(b in l)if(z=l[b],l.hasOwnProperty(b)&&z!=null)switch(b){case"value":break;case"multiple":ae=z;default:d.hasOwnProperty(b)||Rt(i,a,b,null,d,z)}for(x in d)if(b=d[x],z=l[x],d.hasOwnProperty(x)&&(b!=null||z!=null))switch(x){case"value":ee=b;break;case"defaultValue":I=b;break;case"multiple":S=b;default:b!==z&&Rt(i,a,x,b,d,z)}a=I,l=S,d=ae,ee!=null?yr(i,!!l,ee,!1):!!d!=!!l&&(a!=null?yr(i,!!l,a,!0):yr(i,!!l,l?[]:"",!1));return;case"textarea":ae=ee=null;for(I in l)if(x=l[I],l.hasOwnProperty(I)&&x!=null&&!d.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Rt(i,a,I,null,d,x)}for(S in d)if(x=d[S],b=l[S],d.hasOwnProperty(S)&&(x!=null||b!=null))switch(S){case"value":ee=x;break;case"defaultValue":ae=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:x!==b&&Rt(i,a,S,x,d,b)}mu(i,ee,ae);return;case"option":for(var Re in l)if(ee=l[Re],l.hasOwnProperty(Re)&&ee!=null&&!d.hasOwnProperty(Re))switch(Re){case"selected":i.selected=!1;break;default:Rt(i,a,Re,null,d,ee)}for(z in d)if(ee=d[z],ae=l[z],d.hasOwnProperty(z)&&ee!==ae&&(ee!=null||ae!=null))switch(z){case"selected":i.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Rt(i,a,z,ee,d,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in l)ee=l[Fe],l.hasOwnProperty(Fe)&&ee!=null&&!d.hasOwnProperty(Fe)&&Rt(i,a,Fe,null,d,ee);for(Z in d)if(ee=d[Z],ae=l[Z],d.hasOwnProperty(Z)&&ee!==ae&&(ee!=null||ae!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,a));break;default:Rt(i,a,Z,ee,d,ae)}return;default:if(yo(a)){for(var Mt in l)ee=l[Mt],l.hasOwnProperty(Mt)&&ee!==void 0&&!d.hasOwnProperty(Mt)&&$m(i,a,Mt,void 0,d,ee);for(le in d)ee=d[le],ae=l[le],!d.hasOwnProperty(le)||ee===ae||ee===void 0&&ae===void 0||$m(i,a,le,ee,d,ae);return}}for(var K in l)ee=l[K],l.hasOwnProperty(K)&&ee!=null&&!d.hasOwnProperty(K)&&Rt(i,a,K,null,d,ee);for(fe in d)ee=d[fe],ae=l[fe],!d.hasOwnProperty(fe)||ee===ae||ee==null&&ae==null||Rt(i,a,fe,ee,d,ae)}function Sv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jN(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var x=l[d],b=x.transferSize,S=x.initiatorType,I=x.duration;if(b&&I&&Sv(S)){for(S=0,I=x.responseEnd,d+=1;d<l.length;d++){var z=l[d],Z=z.startTime;if(Z>I)break;var le=z.transferSize,fe=z.initiatorType;le&&Sv(fe)&&(z=z.responseEnd,S+=le*(z<I?1:(I-Z)/(z-Z)))}if(--d,a+=8*(b+S)/(x.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Ym=null,Jm=null;function yd(i){return i.nodeType===9?i:i.ownerDocument}function Av(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wv(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Qm(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Wm=null;function ON(){var i=window.event;return i&&i.type==="popstate"?i===Wm?!1:(Wm=i,!0):(Wm=null,!1)}var Nv=typeof setTimeout=="function"?setTimeout:void 0,GN=typeof clearTimeout=="function"?clearTimeout:void 0,Cv=typeof Promise=="function"?Promise:void 0,BN=typeof queueMicrotask=="function"?queueMicrotask:typeof Cv<"u"?function(i){return Cv.resolve(null).then(i).catch(HN)}:Nv;function HN(i){setTimeout(function(){throw i})}function Br(i){return i==="head"}function Iv(i,a){var l=a,d=0;do{var x=l.nextSibling;if(i.removeChild(l),x&&x.nodeType===8)if(l=x.data,l==="/$"||l==="/&"){if(d===0){i.removeChild(x),Xo(a);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")_c(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,_c(l);for(var b=l.firstChild;b;){var S=b.nextSibling,I=b.nodeName;b[ve]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=S}}else l==="body"&&_c(i.ownerDocument.body);l=x}while(l);Xo(a)}function kv(i,a){var l=i;i=0;do{var d=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=d}while(l)}function Xm(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Xm(l),Ue(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function zN(i,a,l,d){for(;i.nodeType===1;){var x=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[ve])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==x.rel||i.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||i.getAttribute("title")!==(x.title==null?null:x.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(x.src==null?null:x.src)||i.getAttribute("type")!==(x.type==null?null:x.type)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var b=x.name==null?null:""+x.name;if(x.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=Ls(i.nextSibling),i===null)break}return null}function FN(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Ls(i.nextSibling),i===null))return null;return i}function Rv(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Ls(i.nextSibling),i===null))return null;return i}function Zm(i){return i.data==="$?"||i.data==="$~"}function ep(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function qN(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var d=function(){a(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Ls(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var tp=null;function Mv(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return Ls(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function Dv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function Pv(i,a,l){switch(a=yd(l),i){case"html":if(i=a.documentElement,!i)throw Error(s(452));return i;case"head":if(i=a.head,!i)throw Error(s(453));return i;case"body":if(i=a.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function _c(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Ue(i)}var Us=new Map,Lv=new Set;function xd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Qi=ue.d;ue.d={f:KN,r:$N,D:YN,C:JN,L:QN,m:WN,X:ZN,S:XN,M:eC};function KN(){var i=Qi.f(),a=cd();return i||a}function $N(i){var a=Me(i);a!==null&&a.tag===5&&a.type==="form"?Xy(a):Qi.r(i)}var Jo=typeof document>"u"?null:document;function Uv(i,a,l){var d=Jo;if(d&&typeof a=="string"&&a){var x=Zn(a);x='link[rel="'+i+'"][href="'+x+'"]',typeof l=="string"&&(x+='[crossorigin="'+l+'"]'),Lv.has(x)||(Lv.add(x),i={rel:i,crossOrigin:l,href:a},d.querySelector(x)===null&&(a=d.createElement("link"),An(a,"link",i),Ve(a),d.head.appendChild(a)))}}function YN(i){Qi.D(i),Uv("dns-prefetch",i,null)}function JN(i,a){Qi.C(i,a),Uv("preconnect",i,a)}function QN(i,a,l){Qi.L(i,a,l);var d=Jo;if(d&&i&&a){var x='link[rel="preload"][as="'+Zn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(x+='[imagesrcset="'+Zn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(x+='[imagesizes="'+Zn(l.imageSizes)+'"]')):x+='[href="'+Zn(i)+'"]';var b=x;switch(a){case"style":b=Qo(i);break;case"script":b=Wo(i)}Us.has(b)||(i=_({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Us.set(b,i),d.querySelector(x)!==null||a==="style"&&d.querySelector(Tc(b))||a==="script"&&d.querySelector(Ec(b))||(a=d.createElement("link"),An(a,"link",i),Ve(a),d.head.appendChild(a)))}}function WN(i,a){Qi.m(i,a);var l=Jo;if(l&&i){var d=a&&typeof a.as=="string"?a.as:"script",x='link[rel="modulepreload"][as="'+Zn(d)+'"][href="'+Zn(i)+'"]',b=x;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Wo(i)}if(!Us.has(b)&&(i=_({rel:"modulepreload",href:i},a),Us.set(b,i),l.querySelector(x)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ec(b)))return}d=l.createElement("link"),An(d,"link",i),Ve(d),l.head.appendChild(d)}}}function XN(i,a,l){Qi.S(i,a,l);var d=Jo;if(d&&i){var x=Be(d).hoistableStyles,b=Qo(i);a=a||"default";var S=x.get(b);if(!S){var I={loading:0,preload:null};if(S=d.querySelector(Tc(b)))I.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Us.get(b))&&np(i,l);var z=S=d.createElement("link");Ve(z),An(z,"link",i),z._p=new Promise(function(Z,le){z.onload=Z,z.onerror=le}),z.addEventListener("load",function(){I.loading|=1}),z.addEventListener("error",function(){I.loading|=2}),I.loading|=4,vd(S,a,d)}S={type:"stylesheet",instance:S,count:1,state:I},x.set(b,S)}}}function ZN(i,a){Qi.X(i,a);var l=Jo;if(l&&i){var d=Be(l).hoistableScripts,x=Wo(i),b=d.get(x);b||(b=l.querySelector(Ec(x)),b||(i=_({src:i,async:!0},a),(a=Us.get(x))&&sp(i,a),b=l.createElement("script"),Ve(b),An(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(x,b))}}function eC(i,a){Qi.M(i,a);var l=Jo;if(l&&i){var d=Be(l).hoistableScripts,x=Wo(i),b=d.get(x);b||(b=l.querySelector(Ec(x)),b||(i=_({src:i,async:!0,type:"module"},a),(a=Us.get(x))&&sp(i,a),b=l.createElement("script"),Ve(b),An(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(x,b))}}function Vv(i,a,l,d){var x=(x=ge.current)?xd(x):null;if(!x)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Qo(l.href),l=Be(x).hoistableStyles,d=l.get(a),d||(d={type:"style",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Qo(l.href);var b=Be(x).hoistableStyles,S=b.get(i);if(S||(x=x.ownerDocument||x,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,S),(b=x.querySelector(Tc(i)))&&!b._p&&(S.instance=b,S.state.loading=5),Us.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Us.set(i,l),b||tC(x,i,l,S.state))),a&&d===null)throw Error(s(528,""));return S}if(a&&d!==null)throw Error(s(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Wo(l),l=Be(x).hoistableScripts,d=l.get(a),d||(d={type:"script",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Qo(i){return'href="'+Zn(i)+'"'}function Tc(i){return'link[rel="stylesheet"]['+i+"]"}function jv(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function tC(i,a,l,d){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=i.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),An(a,"link",l),Ve(a),i.head.appendChild(a))}function Wo(i){return'[src="'+Zn(i)+'"]'}function Ec(i){return"script[async]"+i}function Ov(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var d=i.querySelector('style[data-href~="'+Zn(l.href)+'"]');if(d)return a.instance=d,Ve(d),d;var x=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Ve(d),An(d,"style",x),vd(d,l.precedence,i),a.instance=d;case"stylesheet":x=Qo(l.href);var b=i.querySelector(Tc(x));if(b)return a.state.loading|=4,a.instance=b,Ve(b),b;d=jv(l),(x=Us.get(x))&&np(d,x),b=(i.ownerDocument||i).createElement("link"),Ve(b);var S=b;return S._p=new Promise(function(I,z){S.onload=I,S.onerror=z}),An(b,"link",d),a.state.loading|=4,vd(b,l.precedence,i),a.instance=b;case"script":return b=Wo(l.src),(x=i.querySelector(Ec(b)))?(a.instance=x,Ve(x),x):(d=l,(x=Us.get(b))&&(d=_({},l),sp(d,x)),i=i.ownerDocument||i,x=i.createElement("script"),Ve(x),An(x,"link",d),i.head.appendChild(x),a.instance=x);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,vd(d,l.precedence,i));return a.instance}function vd(i,a,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=d.length?d[d.length-1]:null,b=x,S=0;S<d.length;S++){var I=d[S];if(I.dataset.precedence===a)b=I;else if(b!==x)break}b?b.parentNode.insertBefore(i,b.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function np(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function sp(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var bd=null;function Gv(i,a,l){if(bd===null){var d=new Map,x=bd=new Map;x.set(l,d)}else x=bd,d=x.get(l),d||(d=new Map,x.set(l,d));if(d.has(i))return d;for(d.set(i,null),l=l.getElementsByTagName(i),x=0;x<l.length;x++){var b=l[x];if(!(b[ve]||b[Jt]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var S=b.getAttribute(a)||"";S=i+S;var I=d.get(S);I?I.push(b):d.set(S,[b])}}return d}function Bv(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function nC(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Hv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function sC(i,a,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var x=Qo(d.href),b=a.querySelector(Tc(x));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=_d.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=b,Ve(b);return}b=a.ownerDocument||a,d=jv(d),(x=Us.get(x))&&np(d,x),b=b.createElement("link"),Ve(b);var S=b;S._p=new Promise(function(I,z){S.onload=I,S.onerror=z}),An(b,"link",d),l.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=_d.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var ip=0;function iC(i,a){return i.stylesheets&&i.count===0&&Ed(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var d=setTimeout(function(){if(i.stylesheets&&Ed(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+a);0<i.imgBytes&&ip===0&&(ip=62500*jN());var x=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Ed(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>ip?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(x)}}:null}function _d(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ed(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Td=null;function Ed(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Td=new Map,a.forEach(rC,i),Td=null,_d.call(i))}function rC(i,a){if(!(a.state.loading&4)){var l=Td.get(i);if(l)var d=l.get(null);else{l=new Map,Td.set(i,l);for(var x=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<x.length;b++){var S=x[b];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),d=S)}d&&l.set(null,d)}x=a.instance,S=x.getAttribute("data-precedence"),b=l.get(S)||d,b===d&&l.set(null,x),l.set(S,x),this.count++,d=_d.bind(this),x.addEventListener("load",d),x.addEventListener("error",d),b?b.parentNode.insertBefore(x,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(x,i.firstChild)),a.state.loading|=4}}var Sc={$$typeof:B,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function aC(i,a,l,d,x,b,S,I,z){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ds(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ds(0),this.hiddenUpdates=ds(null),this.identifierPrefix=d,this.onUncaughtError=x,this.onCaughtError=b,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function zv(i,a,l,d,x,b,S,I,z,Z,le,fe){return i=new aC(i,a,l,S,z,Z,le,fe,I),a=1,b===!0&&(a|=24),b=ps(3,null,null,a),i.current=b,b.stateNode=i,a=Vh(),a.refCount++,i.pooledCache=a,a.refCount++,b.memoizedState={element:d,isDehydrated:l,cache:a},Bh(b),i}function Fv(i){return i?(i=Co,i):Co}function qv(i,a,l,d,x,b){x=Fv(x),d.context===null?d.context=x:d.pendingContext=x,d=kr(a),d.payload={element:l},b=b===void 0?null:b,b!==null&&(d.callback=b),l=Rr(i,d,a),l!==null&&(rs(l,i,a),nc(l,i,a))}function Kv(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function rp(i,a){Kv(i,a),(i=i.alternate)&&Kv(i,a)}function $v(i){if(i.tag===13||i.tag===31){var a=Ma(i,67108864);a!==null&&rs(a,i,67108864),rp(i,67108864)}}function Yv(i){if(i.tag===13||i.tag===31){var a=bs();a=ai(a);var l=Ma(i,a);l!==null&&rs(l,i,a),rp(i,a)}}var Sd=!0;function oC(i,a,l,d){var x=Y.T;Y.T=null;var b=ue.p;try{ue.p=2,ap(i,a,l,d)}finally{ue.p=b,Y.T=x}}function lC(i,a,l,d){var x=Y.T;Y.T=null;var b=ue.p;try{ue.p=8,ap(i,a,l,d)}finally{ue.p=b,Y.T=x}}function ap(i,a,l,d){if(Sd){var x=op(d);if(x===null)Km(i,a,d,Ad,l),Qv(i,d);else if(uC(x,i,a,l,d))d.stopPropagation();else if(Qv(i,d),a&4&&-1<cC.indexOf(i)){for(;x!==null;){var b=Me(x);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var S=Es(b.pendingLanes);if(S!==0){var I=b;for(I.pendingLanes|=2,I.entangledLanes|=2;S;){var z=1<<31-Dt(S);I.entanglements[1]|=z,S&=~z}yi(b),(Et&6)===0&&(od=yn()+500,xc(0))}}break;case 31:case 13:I=Ma(b,2),I!==null&&rs(I,b,2),cd(),rp(b,2)}if(b=op(d),b===null&&Km(i,a,d,Ad,l),b===x)break;x=b}x!==null&&d.stopPropagation()}else Km(i,a,d,null,l)}}function op(i){return i=ws(i),lp(i)}var Ad=null;function lp(i){if(Ad=null,i=Pe(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=c(a),i!==null)return i;i=null}else if(l===31){if(i=f(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Ad=i,null}function Jv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ls()){case ga:return 2;case hr:return 8;case mn:case cs:return 32;case uo:return 268435456;default:return 32}default:return 32}}var cp=!1,Hr=null,zr=null,Fr=null,Ac=new Map,wc=new Map,qr=[],cC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qv(i,a){switch(i){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":Ac.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":wc.delete(a.pointerId)}}function Nc(i,a,l,d,x,b){return i===null||i.nativeEvent!==b?(i={blockedOn:a,domEventName:l,eventSystemFlags:d,nativeEvent:b,targetContainers:[x]},a!==null&&(a=Me(a),a!==null&&$v(a)),i):(i.eventSystemFlags|=d,a=i.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),i)}function uC(i,a,l,d,x){switch(a){case"focusin":return Hr=Nc(Hr,i,a,l,d,x),!0;case"dragenter":return zr=Nc(zr,i,a,l,d,x),!0;case"mouseover":return Fr=Nc(Fr,i,a,l,d,x),!0;case"pointerover":var b=x.pointerId;return Ac.set(b,Nc(Ac.get(b)||null,i,a,l,d,x)),!0;case"gotpointercapture":return b=x.pointerId,wc.set(b,Nc(wc.get(b)||null,i,a,l,d,x)),!0}return!1}function Wv(i){var a=Pe(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){i.blockedOn=a,Qn(i.priority,function(){Yv(l)});return}}else if(a===31){if(a=f(l),a!==null){i.blockedOn=a,Qn(i.priority,function(){Yv(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function wd(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=op(i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);Gl=d,l.target.dispatchEvent(d),Gl=null}else return a=Me(l),a!==null&&$v(a),i.blockedOn=l,!1;a.shift()}return!0}function Xv(i,a,l){wd(i)&&l.delete(a)}function dC(){cp=!1,Hr!==null&&wd(Hr)&&(Hr=null),zr!==null&&wd(zr)&&(zr=null),Fr!==null&&wd(Fr)&&(Fr=null),Ac.forEach(Xv),wc.forEach(Xv)}function Nd(i,a){i.blockedOn===a&&(i.blockedOn=null,cp||(cp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,dC)))}var Cd=null;function Zv(i){Cd!==i&&(Cd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Cd===i&&(Cd=null);for(var a=0;a<i.length;a+=3){var l=i[a],d=i[a+1],x=i[a+2];if(typeof d!="function"){if(lp(d||l)===null)continue;break}var b=Me(l);b!==null&&(i.splice(a,3),a-=3,om(b,{pending:!0,data:x,method:l.method,action:d},d,x))}}))}function Xo(i){function a(z){return Nd(z,i)}Hr!==null&&Nd(Hr,i),zr!==null&&Nd(zr,i),Fr!==null&&Nd(Fr,i),Ac.forEach(a),wc.forEach(a);for(var l=0;l<qr.length;l++){var d=qr[l];d.blockedOn===i&&(d.blockedOn=null)}for(;0<qr.length&&(l=qr[0],l.blockedOn===null);)Wv(l),l.blockedOn===null&&qr.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var x=l[d],b=l[d+1],S=x[rn]||null;if(typeof b=="function")S||Zv(l);else if(S){var I=null;if(b&&b.hasAttribute("formAction")){if(x=b,S=b[rn]||null)I=S.formAction;else if(lp(x)!==null)continue}else I=S.action;typeof I=="function"?l[d+1]=I:(l.splice(d,3),d-=3),Zv(l)}}}function eb(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(S){return x=S})},focusReset:"manual",scroll:"manual"})}function a(){x!==null&&(x(),x=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,x=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),x!==null&&(x(),x=null)}}}function up(i){this._internalRoot=i}Id.prototype.render=up.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(s(409));var l=a.current,d=bs();qv(l,d,i,a,null,null)},Id.prototype.unmount=up.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;qv(i.current,2,null,i,null,null),cd(),a[As]=null}};function Id(i){this._internalRoot=i}Id.prototype.unstable_scheduleHydration=function(i){if(i){var a=va();i={blockedOn:null,target:i,priority:a};for(var l=0;l<qr.length&&a!==0&&a<qr[l].priority;l++);qr.splice(l,0,i),l===0&&Wv(i)}};var tb=e.version;if(tb!=="19.2.3")throw Error(s(527,tb,"19.2.3"));ue.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(a),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var fC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kd.isDisabled&&kd.supportsFiber)try{Jn=kd.inject(fC),qe=kd}catch{}}return Ic.createRoot=function(i,a){if(!r(i))throw Error(s(299));var l=!1,d="",x=lx,b=cx,S=ux;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(x=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),a=zv(i,1,!1,null,null,l,d,null,x,b,S,eb),i[As]=a.current,qm(i),new up(a)},Ic.hydrateRoot=function(i,a,l){if(!r(i))throw Error(s(299));var d=!1,x="",b=lx,S=cx,I=ux,z=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.formState!==void 0&&(z=l.formState)),a=zv(i,1,!0,a,l??null,d,x,z,b,S,I,eb),a.context=Fv(null),l=a.current,d=bs(),d=ai(d),x=kr(d),x.callback=null,Rr(l,x,d),l=d,a.current.lanes=l,Ri(a,l),yi(a),i[As]=a.current,qm(i),new Id(a)},Ic.version="19.2.3",Ic}var db;function EC(){if(db)return hp.exports;db=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hp.exports=TC(),hp.exports}var SC=EC();const AC=JE(SC);var Ye=(n=>(n.DRILL="Learn & Drill",n.ACTIVE_RECALL="Active Recall",n.SIMULATION="Test Simulation",n.WEAKNESS="Weakness Attack",n.EXAMPLE="Contoh Soal",n.PRACTICE="Latihan Kustom",n))(Ye||{});const sf="https://files.catbox.moe/02xqjo.png",fb={click:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",tap:"",back:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/arrow.mp3",success:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/gem-collect.mp3",error:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/loss.mp3",tick:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",intro:"",finish:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/frozen_missile.mp3"},hb=["Pendidikan adalah senjata paling mematikan di dunia, karena dengan pendidikan, Anda dapat mengubah dunia. Nelson Mandela pernah berkata demikian untuk menekankan pentingnya ilmu pengetahuan.","Kecerdasan buatan bukanlah pengganti kecerdasan manusia, melainkan alat untuk memperkuat kemampuan kita. Kuncinya adalah bagaimana kita berkolaborasi dengan teknologi.","Keberhasilan bukanlah akhir, kegagalan bukanlah hal yang fatal: keberanian untuk melanjutkanlah yang terpenting. Jangan takut untuk memulai hal baru setiap harinya.","Hutan hujan tropis Indonesia adalah salah satu paru-paru dunia. Menjaganya bukan hanya tanggung jawab pemerintah, tetapi tugas kita bersama demi masa depan bumi.","The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet. It is commonly used to test typewriters and computer keyboards.","Dalam dunia yang berubah sangat cepat, satu-satunya strategi yang dijamin gagal adalah tidak mengambil risiko. Mark Zuckerberg mengingatkan kita untuk berani berinovasi.","Sabar itu ilmu tingkat tinggi. Belajarnya setiap hari, latihannya setiap saat, ujiannya sering mendadak, sekolahnya seumur hidup.","Technology is a useful servant but a dangerous master. We must ensure that we control technology, rather than letting it control our lives and decisions.","Bhinneka Tunggal Ika berbeda-beda tetapi tetap satu jua. Semboyan ini menggambarkan persatuan dan kesatuan Bangsa dan Negara Kesatuan Republik Indonesia.","Membaca adalah jendela dunia. Dengan membaca, kita bisa menjelajahi tempat-tempat yang belum pernah kita kunjungi dan memahami pemikiran orang-orang hebat."],Pp=[{id:"BENCHMARK",name:"Human Benchmark",desc:"Tes Kognitif: Reaction Time & Sequence Memory"},{id:"SKRIPSI",name:"Skripsi Helper",desc:"Bantuan Judul, Outline, & Metodologi"},{id:"UTBK",name:"UTBK SNBT",desc:"Tes Potensi Skolastik & Literasi (2025)"},{id:"SKD",name:"SKD CPNS/Kedinasan",desc:"TWK, TIU, TKP"},{id:"TPA",name:"TPA & TBI",desc:"Tes Potensi Akademik & B.Inggris (Seleksi Lanjutan)"},{id:"PSIKOTEST",name:"Psikotes Lengkap",desc:"IQ, Koran/Pauli, Gambar, & Kepribadian"},{id:"KECERMATAN",name:"Tes Kecermatan",desc:"Angka/Huruf Hilang (Khas Polri/Kedinasan)"},{id:"INTERVIEW",name:"Wawancara Tulis",desc:"Simulasi Jawab Interview & Review AI"},{id:"BUTAWRNA",name:"Tes Buta Warna",desc:"Simulasi Ishihara & Warna"},{id:"GENERAL",name:"Materi Umum",desc:"Belajar Apapun: PDF, Topik, Hafalan"}],wC=[{id:"ACTIVE_RECALL",name:"Active Recall",desc:"Paksa otak mengingat tanpa melihat catatan.",icon:"Brain"},{id:"PRACTICE",name:"Latihan Soal",desc:"Drill soal pilihan ganda dari materi.",icon:"PenTool"},{id:"SPACED_REPETITION",name:"Spaced Repetition",desc:"Flashcards untuk hafalan jangka panjang.",icon:"Repeat"},{id:"FEYNMAN",name:"Feynman Technique",desc:"Jelaskan materi seolah ke anak kecil.",icon:"MessageCircle"},{id:"MIND_MAP",name:"Mind Mapping",desc:"Visualisasikan hubungan antar konsep.",icon:"Share2"},{id:"PBL",name:"Problem-Based",desc:"Belajar lewat studi kasus nyata.",icon:"Search"},{id:"TEACHING",name:"Teaching Method",desc:"Simulasi mengajar murid (AI).",icon:"GraduationCap"},{id:"SQ3R",name:"SQ3R Method",desc:"Survey, Question, Read, Recite, Review.",icon:"BookOpen"}],NC=["Penalaran Umum (Induktif)","Penalaran Umum (Deduktif)","Penalaran Umum (Kuantitatif)","Pengetahuan & Pemahaman Umum","Pemahaman Bacaan & Menulis","Pengetahuan Kuantitatif","Literasi Bahasa Indonesia","Literasi Bahasa Inggris","Penalaran Matematika"],CC=["Tes Wawasan Kebangsaan (TWK)","Tes Intelegensia Umum (TIU)","Tes Karakteristik Pribadi (TKP)"],IC=["Verbal (Analogi, Silogisme)","Numerik (Deret, Aritmatika)","Penalaran Logis & Analitis","Spasial (Gambar)","Tes Bahasa Inggris (TBI)"],kC=["Kognitif & Logika (Verbal, Analitik)","Tes Koran/Pauli (Hitungan Cepat)","Tes Spasial (Analogi Gambar)","Tes Kepribadian (EPPS/DISC)"],RC=["Pertanyaan Personal (Kelebihan/Kekurangan)","Motivasi & Komitmen","Studi Kasus & Problem Solving","Wawasan Kebangsaan & Integritas"],mb=[],pb=[],gb=[],yb=[],xb=[],vb=[],bb=[],_b=[],$r=[{name:"Penalaran Umum",duration:30,count:30},{name:"Pengetahuan dan Pemahaman Umum",duration:15,count:20},{name:"Pemahaman Bacaan dan Menulis",duration:25,count:20},{name:"Pengetahuan Kuantitatif",duration:20,count:20},{name:"Literasi Bahasa Indonesia",duration:37.5,count:25},{name:"Literasi Bahasa Inggris",duration:37.5,count:25},{name:"Penalaran Matematika",duration:30,count:20}];var MC={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let DC,PC;function LC(){return{geminiUrl:DC,vertexUrl:PC}}function UC(n,e,t,s){var r,o;if(!(n!=null&&n.baseUrl)){const c=LC();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:t:(o=c.geminiUrl)!==null&&o!==void 0?o:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cr{}function we(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function g(n,e,t){for(let o=0;o<e.length-1;o++){const c=e[o];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[f])){const p=n[f];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(o+1),t[m])}else for(const m of p)g(m,e.slice(o+1),t)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in n||(n[f]=[{}]);const p=n[f];g(p[0],e.slice(o+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function h(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const r=e[s];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in n){const c=n[o];return Array.isArray(c)?c.map(f=>h(f,e.slice(s+1),t)):t}else return t}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function VC(n,e){for(const[t,s]of Object.entries(e)){const r=t.split("."),o=s.split("."),c=new Set;let f=-1;for(let p=0;p<r.length;p++)if(r[p]==="*"){f=p;break}if(f!==-1&&o.length>f)for(let p=f;p<o.length;p++){const m=o[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}Lp(n,r,o,0,c)}}function Lp(n,e,t,s,r){if(s>=e.length||typeof n!="object"||n===null)return;const o=e[s];if(o.endsWith("[]")){const c=o.slice(0,-2),f=n;if(c in f&&Array.isArray(f[c]))for(const p of f[c])Lp(p,e,t,s+1,r)}else if(o==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,f=Object.keys(c).filter(m=>!m.startsWith("_")&&!r.has(m)),p={};for(const m of f)p[m]=c[m];for(const[m,v]of Object.entries(p)){const _=[];for(const T of t.slice(s))T==="*"?_.push(m):_.push(T);g(c,_,v)}for(const m of f)delete c[m]}}else{const c=n;o in c&&Lp(c[o],e,t,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w0(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jC(n){const e={},t=h(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=h(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function OC(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],BC(c)),e}function GC(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response"]);return c!=null&&g(e,["response"],HC(c)),e}function BC(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(c=>zC(c))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const r=h(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function HC(n){const e={},t=h(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(c=>FC(c))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const r=h(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function zC(n){const e={},t=h(n,["video"]);return t!=null&&g(e,["video"],QC(t)),e}function FC(n){const e={},t=h(n,["_self"]);return t!=null&&g(e,["video"],WC(t)),e}function qC(n){const e={},t=h(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function KC(n){const e={},t=h(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function $C(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response"]);return c!=null&&g(e,["response"],YC(c)),e}function YC(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["parent"]);s!=null&&g(e,["parent"],s);const r=h(n,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function QE(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response"]);return c!=null&&g(e,["response"],JC(c)),e}function JC(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["parent"]);s!=null&&g(e,["parent"],s);const r=h(n,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function QC(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["uri"],t);const s=h(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],w0(s));const r=h(n,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function WC(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],w0(s));const r=h(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Tb;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Tb||(Tb={}));var Eb;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Eb||(Eb={}));var Sb;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Sb||(Sb={}));var Se;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Se||(Se={}));var Ab;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ab||(Ab={}));var wb;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(wb||(wb={}));var Nb;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Nb||(Nb={}));var Cb;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Cb||(Cb={}));var Ib;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Ib||(Ib={}));var kb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(kb||(kb={}));var Rb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Rb||(Rb={}));var Mb;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(Mb||(Mb={}));var Db;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Db||(Db={}));var Pb;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Pb||(Pb={}));var Lb;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Lb||(Lb={}));var Ub;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Ub||(Ub={}));var Vb;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Vb||(Vb={}));var jb;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(jb||(jb={}));var Ob;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ob||(Ob={}));var Gb;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Gb||(Gb={}));var Bb;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Bb||(Bb={}));var rf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(rf||(rf={}));var Hb;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Hb||(Hb={}));var zb;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(zb||(zb={}));var Fb;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Fb||(Fb={}));var Up;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Up||(Up={}));var qb;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(qb||(qb={}));var Kb;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Kb||(Kb={}));var $b;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})($b||($b={}));var Yb;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Yb||(Yb={}));var Jb;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Jb||(Jb={}));var Qb;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Qb||(Qb={}));var Wb;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Wb||(Wb={}));var Xb;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Xb||(Xb={}));var Zb;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Zb||(Zb={}));var e_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(e_||(e_={}));var t_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(t_||(t_={}));var n_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(n_||(n_={}));var s_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(s_||(s_={}));var i_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(i_||(i_={}));var r_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(r_||(r_={}));var a_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(a_||(a_={}));var o_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(o_||(o_={}));var l_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(l_||(l_={}));var c_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(c_||(c_={}));var u_;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(u_||(u_={}));var d_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(d_||(d_={}));var f_;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(f_||(f_={}));var h_;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(h_||(h_={}));var m_;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(m_||(m_={}));var p_;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(p_||(p_={}));var g_;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(g_||(g_={}));var y_;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(y_||(y_={}));var x_;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(x_||(x_={}));var il;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(il||(il={}));class Vp{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class kc{get text(){var e,t,s,r,o,c,f,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const T of(p=(f=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[A,C]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(C!==null||C!==void 0)&&_.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;v=!0,m+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,s,r,o,c,f,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(p=(f=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[T,A]of Object.entries(_))T!=="inlineData"&&(A!==null||A!==void 0)&&v.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,r,o,c,f,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(f=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,r,o,c,f,p,m;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(f=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,r,o,c,f,p,m;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(f=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class v_{}class b_{}class XC{}class ZC{}class eI{}class tI{}class __{}class T_{}class E_{}class nI{}class af{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new af;let r;const o=e;return t?r=GC(o):r=OC(o),Object.assign(s,r),s}}class S_{}class A_{}class w_{}class N_{}class sI{}class iI{}class rI{}class N0{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new N0,o=$C(e);return Object.assign(s,o),s}}class aI{}class oI{}class lI{}class C_{}class cI{get text(){var e,t,s;let r="",o=!1;const c=[];for(const f of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,m]of Object.entries(f))p!=="text"&&p!=="thought"&&m!==null&&c.push(p);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;o=!0,r+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,t,s;let r="";const o=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[f,p]of Object.entries(c))f!=="inlineData"&&p!==null&&o.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class uI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class C0{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new C0,o=QE(e);return Object.assign(s,o),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function WE(n,e){const t=xt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function XE(n){return Array.isArray(n)?n.map(e=>of(e)):[of(n)]}function of(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function ZE(n){const e=of(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function eS(n){const e=of(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function I_(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function tS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>I_(e)):[I_(n)]}function jp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function k_(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function R_(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Ln(n){if(n==null)throw new Error("ContentUnion is required");return jp(n)?n:{role:"user",parts:tS(n)}}function I0(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=Ln(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=Ln(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Ln(t)):[Ln(e)]}function Os(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(k_(n)||R_(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ln(n)]}const e=[],t=[],s=jp(n[0]);for(const r of n){const o=jp(r);if(o!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(k_(r)||R_(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return s||e.push({role:"user",parts:tS(t)}),e}function dI(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Se).includes(t[0].toUpperCase())?t[0].toUpperCase():Se.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Se).includes(s.toUpperCase())?s.toUpperCase():Se.TYPE_UNSPECIFIED})}}function al(n){const e={},t=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=n.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,n=o[1]):o[1].type==="null"&&(e.nullable=!0,n=o[0])),n.type instanceof Array&&dI(n.type,e);for(const[c,f]of Object.entries(n))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Se).includes(f.toUpperCase())?f.toUpperCase():Se.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=al(f);else if(s.includes(c)){const p=[];for(const m of f){if(m.type=="null"){e.nullable=!0;continue}p.push(al(m))}e[c]=p}else if(r.includes(c)){const p={};for(const[m,v]of Object.entries(f))p[m]=al(v);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=f}return e}function k0(n){return al(n)}function R0(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function M0(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Tl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=al(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=al(e.response));return n}function El(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function fI(n,e,t,s=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function ur(n,e){if(typeof e!="string")throw new Error("name must be a string");return fI(n,e,"cachedContents")}function nS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function fa(n){return w0(n)}function hI(n){return n!=null&&typeof n=="object"&&"name"in n}function mI(n){return n!=null&&typeof n=="object"&&"video"in n}function pI(n){return n!=null&&typeof n=="object"&&"uri"in n}function sS(n){var e;let t;if(hI(n)&&(t=n.name),!(pI(n)&&(t=n.uri,t===void 0))&&!(mI(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function iS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function rS(n){for(const e of["models","tunedModels","publisherModels"])if(gI(n,e))return n[e];return[]}function gI(n,e){return n!==null&&typeof n=="object"&&e in n}function yI(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function xI(n,e={}){const t=[],s=new Set;for(const r of n){const o=r.name;if(s.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);s.add(o);const c=yI(r,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function aS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function vI(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function oS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let o=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Sl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function lS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bI(n){const e={},t=h(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=h(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>ek(c))),g(e,["inlinedResponses"],o)}const r=h(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["inlinedEmbedContentResponses"],o)}return e}function _I(n){const e={},t=h(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=h(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const r=h(n,["bigqueryDestination","outputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function TI(n){const e={},t=h(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=h(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const r=h(n,["bigqueryUri"]);if(r!=null&&g(e,["bigqueryDestination","outputUri"],r),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function zd(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const r=h(n,["metadata","state"]);r!=null&&g(e,["state"],lS(r));const o=h(n,["metadata","createTime"]);o!=null&&g(e,["createTime"],o);const c=h(n,["metadata","endTime"]);c!=null&&g(e,["endTime"],c);const f=h(n,["metadata","updateTime"]);f!=null&&g(e,["updateTime"],f);const p=h(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=h(n,["metadata","output"]);return m!=null&&g(e,["dest"],bI(oS(m))),e}function Op(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["displayName"]);s!=null&&g(e,["displayName"],s);const r=h(n,["state"]);r!=null&&g(e,["state"],lS(r));const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["createTime"]);c!=null&&g(e,["createTime"],c);const f=h(n,["startTime"]);f!=null&&g(e,["startTime"],f);const p=h(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=h(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=h(n,["model"]);v!=null&&g(e,["model"],v);const _=h(n,["inputConfig"]);_!=null&&g(e,["src"],EI(_));const T=h(n,["outputConfig"]);T!=null&&g(e,["dest"],_I(oS(T)));const A=h(n,["completionStats"]);return A!=null&&g(e,["completionStats"],A),e}function EI(n){const e={},t=h(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=h(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const r=h(n,["bigquerySource","inputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function SI(n,e){const t={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=h(e,["fileName"]);s!=null&&g(t,["fileName"],s);const r=h(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>ZI(n,c))),g(t,["requests","requests"],o)}return t}function AI(n){const e={},t=h(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=h(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const r=h(n,["bigqueryUri"]);if(r!=null&&g(e,["bigquerySource","inputUri"],r),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function wI(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function NI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Sl(n,s)),t}function CI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Sl(n,s)),t}function II(n){const e={},t=h(n,["content"]);t!=null&&g(e,["content"],t);const s=h(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],kI(s));const r=h(n,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const o=h(n,["finishReason"]);o!=null&&g(e,["finishReason"],o);const c=h(n,["avgLogprobs"]);c!=null&&g(e,["avgLogprobs"],c);const f=h(n,["groundingMetadata"]);f!=null&&g(e,["groundingMetadata"],f);const p=h(n,["index"]);p!=null&&g(e,["index"],p);const m=h(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=h(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(A=>A)),g(e,["safetyRatings"],T)}const _=h(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function kI(n){const e={},t=h(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),g(e,["citations"],s)}return e}function cS(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>ok(o))),g(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function RI(n,e){const t={},s=h(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),h(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function MI(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const r=h(n,["dest"]);return e!==void 0&&r!=null&&g(e,["outputConfig"],TI(vI(r))),t}function M_(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["src"]);r!=null&&g(t,["batch","inputConfig"],SI(n,aS(n,r)));const o=h(e,["config"]);return o!=null&&RI(o,t),t}function DI(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["model"],xt(n,s));const r=h(e,["src"]);r!=null&&g(t,["inputConfig"],AI(aS(n,r)));const o=h(e,["config"]);return o!=null&&MI(o,t),t}function PI(n,e){const t={},s=h(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function LI(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["src"]);r!=null&&g(t,["batch","inputConfig"],HI(n,r));const o=h(e,["config"]);return o!=null&&PI(o,t),t}function UI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Sl(n,s)),t}function VI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Sl(n,s)),t}function jI(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);return o!=null&&g(e,["error"],o),e}function OI(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);return o!=null&&g(e,["error"],o),e}function GI(n,e){const t={},s=h(e,["contents"]);if(s!=null){let o=I0(n,s);Array.isArray(o)&&(o=o.map(c=>c)),g(t,["requests[]","request","content"],o)}const r=h(e,["config"]);return r!=null&&(g(t,["_self"],BI(r,t)),VC(t,{"requests[].*":"requests[].request.*"})),t}function BI(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const r=h(n,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const o=h(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&g(e,["requests[]","outputDimensionality"],o),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function HI(n,e){const t={},s=h(e,["fileName"]);s!=null&&g(t,["file_name"],s);const r=h(e,["inlinedRequests"]);return r!=null&&g(t,["requests"],GI(n,r)),t}function zI(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function FI(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const r=h(n,["name"]);if(r!=null&&g(e,["name"],r),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qI(n){const e={},t=h(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=h(n,["mode"]);if(s!=null&&g(e,["mode"],s),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function KI(n,e,t){const s={},r=h(e,["systemInstruction"]);t!==void 0&&r!=null&&g(t,["systemInstruction"],cS(Ln(r)));const o=h(e,["temperature"]);o!=null&&g(s,["temperature"],o);const c=h(e,["topP"]);c!=null&&g(s,["topP"],c);const f=h(e,["topK"]);f!=null&&g(s,["topK"],f);const p=h(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=h(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=h(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=h(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=h(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const A=h(e,["presencePenalty"]);A!=null&&g(s,["presencePenalty"],A);const C=h(e,["frequencyPenalty"]);C!=null&&g(s,["frequencyPenalty"],C);const D=h(e,["seed"]);D!=null&&g(s,["seed"],D);const N=h(e,["responseMimeType"]);N!=null&&g(s,["responseMimeType"],N);const L=h(e,["responseSchema"]);L!=null&&g(s,["responseSchema"],k0(L));const O=h(e,["responseJsonSchema"]);if(O!=null&&g(s,["responseJsonSchema"],O),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=h(e,["safetySettings"]);if(t!==void 0&&B!=null){let j=B;Array.isArray(j)&&(j=j.map(me=>lk(me))),g(t,["safetySettings"],j)}const $=h(e,["tools"]);if(t!==void 0&&$!=null){let j=El($);Array.isArray(j)&&(j=j.map(me=>uk(Tl(me)))),g(t,["tools"],j)}const W=h(e,["toolConfig"]);if(t!==void 0&&W!=null&&g(t,["toolConfig"],ck(W)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=h(e,["cachedContent"]);t!==void 0&&se!=null&&g(t,["cachedContent"],ur(n,se));const R=h(e,["responseModalities"]);R!=null&&g(s,["responseModalities"],R);const M=h(e,["mediaResolution"]);M!=null&&g(s,["mediaResolution"],M);const k=h(e,["speechConfig"]);if(k!=null&&g(s,["speechConfig"],R0(k)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=h(e,["thinkingConfig"]);V!=null&&g(s,["thinkingConfig"],V);const U=h(e,["imageConfig"]);U!=null&&g(s,["imageConfig"],XI(U));const G=h(e,["enableEnhancedCivicAnswers"]);return G!=null&&g(s,["enableEnhancedCivicAnswers"],G),s}function $I(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>II(m))),g(e,["candidates"],p)}const r=h(n,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const o=h(n,["promptFeedback"]);o!=null&&g(e,["promptFeedback"],o);const c=h(n,["responseId"]);c!=null&&g(e,["responseId"],c);const f=h(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function YI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Sl(n,s)),t}function JI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Sl(n,s)),t}function QI(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function WI(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function XI(n){const e={},t=h(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=h(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),h(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(h(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ZI(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["request","model"],xt(n,s));const r=h(e,["contents"]);if(r!=null){let f=Os(r);Array.isArray(f)&&(f=f.map(p=>cS(p))),g(t,["request","contents"],f)}const o=h(e,["metadata"]);o!=null&&g(t,["metadata"],o);const c=h(e,["config"]);return c!=null&&g(t,["request","generationConfig"],KI(n,c,h(t,["request"],{}))),t}function ek(n){const e={},t=h(n,["response"]);t!=null&&g(e,["response"],$I(t));const s=h(n,["error"]);return s!=null&&g(e,["error"],s),e}function tk(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);if(e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),h(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function nk(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);e!==void 0&&r!=null&&g(e,["_query","pageToken"],r);const o=h(n,["filter"]);return e!==void 0&&o!=null&&g(e,["_query","filter"],o),t}function sk(n){const e={},t=h(n,["config"]);return t!=null&&tk(t,e),e}function ik(n){const e={},t=h(n,["config"]);return t!=null&&nk(t,e),e}function rk(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>zd(c))),g(e,["batchJobs"],o)}return e}function ak(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>Op(c))),g(e,["batchJobs"],o)}return e}function ok(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const r=h(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],zI(o));const c=h(n,["functionCall"]);c!=null&&g(e,["functionCall"],FI(c));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const p=h(n,["inlineData"]);p!=null&&g(e,["inlineData"],wI(p));const m=h(n,["text"]);m!=null&&g(e,["text"],m);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function lk(n){const e={},t=h(n,["category"]);if(t!=null&&g(e,["category"],t),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function ck(n){const e={},t=h(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=h(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],qI(s)),e}function uk(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const r=h(n,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const c=h(n,["googleMaps"]);c!=null&&g(e,["googleMaps"],QI(c));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],WI(f));const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=h(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(sr||(sr={}));class ro{constructor(e,t,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,r)}init(e,t,s){var r,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(o=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dk extends cr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ro(sr.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=M_(this.apiClient,e),s=t._url,r=we("{model}:batchGenerateContent",s),f=t.batch.inputConfig.requests,p=f.requests,m=[];for(const v of p){const _=Object.assign({},v);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const A=_.request;A.systemInstruction=T,_.request=A}m.push(_)}return f.requests=m,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const o=this.getGcsUri(e),c=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?s.dest=`${o.slice(0,-6)}/dest`:s.dest=`${o}_dest_${r}`;else if(c)s.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=DI(this.apiClient,e);return f=we("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Op(v))}else{const m=M_(this.apiClient,e);return f=we("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>zd(v))}}async createEmbeddingsInternal(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=LI(this.apiClient,e);return o=we("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>zd(p))}}async get(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=JI(this.apiClient,e);return f=we("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Op(v))}else{const m=YI(this.apiClient,e);return f=we("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>zd(v))}}async cancel(e){var t,s,r,o;let c="",f={};if(this.apiClient.isVertexAI()){const p=CI(this.apiClient,e);c=we("batchPredictionJobs/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=NI(this.apiClient,e);c=we("batches/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=ik(e);return f=we("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=ak(v),T=new C_;return Object.assign(T,_),T})}else{const m=sk(e);return f=we("batches",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=rk(v),T=new C_;return Object.assign(T,_),T})}}async delete(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=VI(this.apiClient,e);return f=we("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>OI(v))}else{const m=UI(this.apiClient,e);return f=we("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>jI(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fk(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function D_(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>Lk(o))),g(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function hk(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const r=h(n,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const o=h(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const c=h(n,["contents"]);if(e!==void 0&&c!=null){let v=Os(c);Array.isArray(v)&&(v=v.map(_=>D_(_))),g(e,["contents"],v)}const f=h(n,["systemInstruction"]);e!==void 0&&f!=null&&g(e,["systemInstruction"],D_(Ln(f)));const p=h(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(_=>Vk(_))),g(e,["tools"],v)}const m=h(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],Uk(m)),h(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function mk(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const r=h(n,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const o=h(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const c=h(n,["contents"]);if(e!==void 0&&c!=null){let _=Os(c);Array.isArray(_)&&(_=_.map(T=>T)),g(e,["contents"],_)}const f=h(n,["systemInstruction"]);e!==void 0&&f!=null&&g(e,["systemInstruction"],Ln(f));const p=h(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>jk(T))),g(e,["tools"],_)}const m=h(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=h(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function pk(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["model"],WE(n,s));const r=h(e,["config"]);return r!=null&&hk(r,t),t}function gk(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["model"],WE(n,s));const r=h(e,["config"]);return r!=null&&mk(r,t),t}function yk(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],ur(n,s)),t}function xk(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],ur(n,s)),t}function vk(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function bk(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function _k(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Tk(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const r=h(n,["name"]);if(r!=null&&g(e,["name"],r),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ek(n){const e={},t=h(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=h(n,["mode"]);if(s!=null&&g(e,["mode"],s),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Sk(n){const e={},t=h(n,["description"]);t!=null&&g(e,["description"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const r=h(n,["parameters"]);r!=null&&g(e,["parameters"],r);const o=h(n,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const c=h(n,["response"]);c!=null&&g(e,["response"],c);const f=h(n,["responseJsonSchema"]);if(f!=null&&g(e,["responseJsonSchema"],f),h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Ak(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],ur(n,s)),t}function wk(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],ur(n,s)),t}function Nk(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Ck(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function Ik(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function kk(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function Rk(n){const e={},t=h(n,["config"]);return t!=null&&Ik(t,e),e}function Mk(n){const e={},t=h(n,["config"]);return t!=null&&kk(t,e),e}function Dk(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["cachedContents"],o)}return e}function Pk(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["cachedContents"],o)}return e}function Lk(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const r=h(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],_k(o));const c=h(n,["functionCall"]);c!=null&&g(e,["functionCall"],Tk(c));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const p=h(n,["inlineData"]);p!=null&&g(e,["inlineData"],fk(p));const m=h(n,["text"]);m!=null&&g(e,["text"],m);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function Uk(n){const e={},t=h(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=h(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],Ek(s)),e}function Vk(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const r=h(n,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const c=h(n,["googleMaps"]);c!=null&&g(e,["googleMaps"],Nk(c));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],Ck(f));const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=h(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function jk(n){const e={},t=h(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=h(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=h(n,["codeExecution"]);r!=null&&g(e,["codeExecution"],r);const o=h(n,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const c=h(n,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>Sk(T))),g(e,["functionDeclarations"],_)}const f=h(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const p=h(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const m=h(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const v=h(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function Ok(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const r=h(n,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),t}function Gk(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const r=h(n,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),t}function Bk(n,e){const t={},s=h(e,["name"]);s!=null&&g(t,["_url","name"],ur(n,s));const r=h(e,["config"]);return r!=null&&Ok(r,t),t}function Hk(n,e){const t={},s=h(e,["name"]);s!=null&&g(t,["_url","name"],ur(n,s));const r=h(e,["config"]);return r!=null&&Gk(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zk extends cr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ro(sr.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=gk(this.apiClient,e);return f=we("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=pk(this.apiClient,e);return f=we("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=wk(this.apiClient,e);return f=we("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Ak(this.apiClient,e);return f=we("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=xk(this.apiClient,e);return f=we("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=bk(v),T=new w_;return Object.assign(T,_),T})}else{const m=yk(this.apiClient,e);return f=we("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=vk(v),T=new w_;return Object.assign(T,_),T})}}async update(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=Hk(this.apiClient,e);return f=we("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Bk(this.apiClient,e);return f=we("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=Mk(e);return f=we("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Pk(v),T=new N_;return Object.assign(T,_),T})}else{const m=Rk(e);return f=we("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Dk(v),T=new N_;return Object.assign(T,_),T})}}}function lf(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function P_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Je(n){return this instanceof Je?(this.v=n,this):new Je(n)}function ei(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(A){return function(C){return Promise.resolve(C).then(A,_)}}function f(A,C){s[A]&&(r[A]=function(D){return new Promise(function(N,L){o.push([A,D,N,L])>1||p(A,D)})},C&&(r[A]=C(r[A])))}function p(A,C){try{m(s[A](C))}catch(D){T(o[0][3],D)}}function m(A){A.value instanceof Je?Promise.resolve(A.value.v).then(v,_):T(o[0][2],A)}function v(A){p("next",A)}function _(A){p("throw",A)}function T(A,C){A(C),o.shift(),o.length&&p(o[0][0],o[0][1])}}function ti(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof P_=="function"?P_(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(o){t[o]=n[o]&&function(c){return new Promise(function(f,p){c=n[o](c),r(f,p,c.done,c.value)})}}function r(o,c,f,p){Promise.resolve(p).then(function(m){o({value:m,done:f})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fk(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:uS(t)}function uS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function qk(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function L_(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let o=!0;for(;s<t&&n[s].role==="model";)r.push(n[s]),o&&!uS(n[s])&&(o=!1),s++;o?e.push(...r):e.pop()}return e}class Kk{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new $k(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class $k{constructor(e,t,s,r={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),qk(o)}async sendMessage(e){var t;await this.sendPromise;const s=Ln(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,c,f;const p=await r,m=(c=(o=p.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content,v=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];v!=null&&(T=(f=v.slice(_))!==null&&f!==void 0?f:[]);const A=m?[m]:[];this.recordHistory(s,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const s=Ln(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,s)}getHistory(e=!1){const t=e?L_(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return ei(this,arguments,function*(){var r,o,c,f,p,m;const v=[];try{for(var _=!0,T=ti(e),A;A=yield Je(T.next()),r=A.done,!r;_=!0){f=A.value,_=!1;const C=f;if(Fk(C)){const D=(m=(p=C.candidates)===null||p===void 0?void 0:p[0])===null||m===void 0?void 0:m.content;D!==void 0&&v.push(D)}yield yield Je(C)}}catch(C){o={error:C}}finally{try{!_&&!r&&(c=T.return)&&(yield Je(c.call(T)))}finally{if(o)throw o.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let r=[];t.length>0&&t.every(o=>o.role!==void 0)?r=t:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...L_(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Lf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yk(n){const e={},t=h(n,["file"]);return t!=null&&g(e,["file"],t),e}function Jk(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Qk(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","file"],sS(t)),e}function Wk(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Xk(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","file"],sS(t)),e}function Zk(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function e2(n){const e={},t=h(n,["config"]);return t!=null&&Zk(t,e),e}function t2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n2 extends cr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ro(sr.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=e2(e);return o=we("files",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),r.then(p=>{const m=t2(p),v=new aI;return Object.assign(v,m),v})}}async createInternal(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Yk(e);return o=we("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>{const m=Jk(p),v=new oI;return Object.assign(v,m),v})}}async get(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Xk(e);return o=we("files/{file}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Qk(e);return o=we("files/{file}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),r.then(p=>{const m=Wk(p),v=new lI;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fd(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function s2(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>v2(o))),g(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function i2(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function r2(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const r=h(n,["name"]);if(r!=null&&g(e,["name"],r),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function a2(n){const e={},t=h(n,["description"]);t!=null&&g(e,["description"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const r=h(n,["parameters"]);r!=null&&g(e,["parameters"],r);const o=h(n,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const c=h(n,["response"]);c!=null&&g(e,["response"],c);const f=h(n,["responseJsonSchema"]);if(f!=null&&g(e,["responseJsonSchema"],f),h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function o2(n){const e={},t=h(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=h(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const r=h(n,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const o=h(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const c=h(n,["enableAffectiveDialog"]);c!=null&&g(e,["enableAffectiveDialog"],c);const f=h(n,["frequencyPenalty"]);f!=null&&g(e,["frequencyPenalty"],f);const p=h(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=h(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=h(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=h(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=h(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const A=h(n,["responseMimeType"]);A!=null&&g(e,["responseMimeType"],A);const C=h(n,["responseModalities"]);C!=null&&g(e,["responseModalities"],C);const D=h(n,["responseSchema"]);D!=null&&g(e,["responseSchema"],D);const N=h(n,["routingConfig"]);N!=null&&g(e,["routingConfig"],N);const L=h(n,["seed"]);L!=null&&g(e,["seed"],L);const O=h(n,["speechConfig"]);O!=null&&g(e,["speechConfig"],O);const B=h(n,["stopSequences"]);B!=null&&g(e,["stopSequences"],B);const $=h(n,["temperature"]);$!=null&&g(e,["temperature"],$);const W=h(n,["thinkingConfig"]);W!=null&&g(e,["thinkingConfig"],W);const se=h(n,["topK"]);se!=null&&g(e,["topK"],se);const R=h(n,["topP"]);if(R!=null&&g(e,["topP"],R),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function l2(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function c2(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function u2(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const r=h(n,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const o=h(n,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const c=h(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const f=h(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const p=h(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=h(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=h(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=h(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],M0(_));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const A=h(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],A);const C=h(n,["systemInstruction"]);e!==void 0&&C!=null&&g(e,["setup","systemInstruction"],s2(Ln(C)));const D=h(n,["tools"]);if(e!==void 0&&D!=null){let se=El(D);Array.isArray(se)&&(se=se.map(R=>_2(Tl(R)))),g(e,["setup","tools"],se)}const N=h(n,["sessionResumption"]);e!==void 0&&N!=null&&g(e,["setup","sessionResumption"],b2(N));const L=h(n,["inputAudioTranscription"]);e!==void 0&&L!=null&&g(e,["setup","inputAudioTranscription"],L);const O=h(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&g(e,["setup","outputAudioTranscription"],O);const B=h(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const $=h(n,["contextWindowCompression"]);e!==void 0&&$!=null&&g(e,["setup","contextWindowCompression"],$);const W=h(n,["proactivity"]);if(e!==void 0&&W!=null&&g(e,["setup","proactivity"],W),h(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function d2(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],o2(s));const r=h(n,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const o=h(n,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const c=h(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const f=h(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const p=h(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=h(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=h(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=h(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],M0(_));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const A=h(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],A);const C=h(n,["systemInstruction"]);e!==void 0&&C!=null&&g(e,["setup","systemInstruction"],Ln(C));const D=h(n,["tools"]);if(e!==void 0&&D!=null){let R=El(D);Array.isArray(R)&&(R=R.map(M=>T2(Tl(M)))),g(e,["setup","tools"],R)}const N=h(n,["sessionResumption"]);e!==void 0&&N!=null&&g(e,["setup","sessionResumption"],N);const L=h(n,["inputAudioTranscription"]);e!==void 0&&L!=null&&g(e,["setup","inputAudioTranscription"],L);const O=h(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&g(e,["setup","outputAudioTranscription"],O);const B=h(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const $=h(n,["contextWindowCompression"]);e!==void 0&&$!=null&&g(e,["setup","contextWindowCompression"],$);const W=h(n,["proactivity"]);e!==void 0&&W!=null&&g(e,["setup","proactivity"],W);const se=h(n,["explicitVadSignal"]);return e!==void 0&&se!=null&&g(e,["setup","explicitVadSignal"],se),t}function f2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["setup","model"],xt(n,s));const r=h(e,["config"]);return r!=null&&g(t,["config"],u2(r,t)),t}function h2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["setup","model"],xt(n,s));const r=h(e,["config"]);return r!=null&&g(t,["config"],d2(r,t)),t}function m2(n){const e={},t=h(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function p2(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),g(e,["weightedPrompts"],s)}return e}function g2(n){const e={},t=h(n,["media"]);if(t!=null){let m=XE(t);Array.isArray(m)&&(m=m.map(v=>Fd(v))),g(e,["mediaChunks"],m)}const s=h(n,["audio"]);s!=null&&g(e,["audio"],Fd(eS(s)));const r=h(n,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const o=h(n,["video"]);o!=null&&g(e,["video"],Fd(ZE(o)));const c=h(n,["text"]);c!=null&&g(e,["text"],c);const f=h(n,["activityStart"]);f!=null&&g(e,["activityStart"],f);const p=h(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function y2(n){const e={},t=h(n,["media"]);if(t!=null){let m=XE(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const s=h(n,["audio"]);s!=null&&g(e,["audio"],eS(s));const r=h(n,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const o=h(n,["video"]);o!=null&&g(e,["video"],ZE(o));const c=h(n,["text"]);c!=null&&g(e,["text"],c);const f=h(n,["activityStart"]);f!=null&&g(e,["activityStart"],f);const p=h(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function x2(n){const e={},t=h(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=h(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const r=h(n,["toolCall"]);r!=null&&g(e,["toolCall"],r);const o=h(n,["toolCallCancellation"]);o!=null&&g(e,["toolCallCancellation"],o);const c=h(n,["usageMetadata"]);c!=null&&g(e,["usageMetadata"],E2(c));const f=h(n,["goAway"]);f!=null&&g(e,["goAway"],f);const p=h(n,["sessionResumptionUpdate"]);p!=null&&g(e,["sessionResumptionUpdate"],p);const m=h(n,["voiceActivityDetectionSignal"]);return m!=null&&g(e,["voiceActivityDetectionSignal"],m),e}function v2(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const r=h(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],i2(o));const c=h(n,["functionCall"]);c!=null&&g(e,["functionCall"],r2(c));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const p=h(n,["inlineData"]);p!=null&&g(e,["inlineData"],Fd(p));const m=h(n,["text"]);m!=null&&g(e,["text"],m);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function b2(n){const e={},t=h(n,["handle"]);if(t!=null&&g(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function _2(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const r=h(n,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const c=h(n,["googleMaps"]);c!=null&&g(e,["googleMaps"],l2(c));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],c2(f));const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=h(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function T2(n){const e={},t=h(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=h(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=h(n,["codeExecution"]);r!=null&&g(e,["codeExecution"],r);const o=h(n,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const c=h(n,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>a2(T))),g(e,["functionDeclarations"],_)}const f=h(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const p=h(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const m=h(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const v=h(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function E2(n){const e={},t=h(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=h(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const r=h(n,["candidatesTokenCount"]);r!=null&&g(e,["responseTokenCount"],r);const o=h(n,["toolUsePromptTokenCount"]);o!=null&&g(e,["toolUsePromptTokenCount"],o);const c=h(n,["thoughtsTokenCount"]);c!=null&&g(e,["thoughtsTokenCount"],c);const f=h(n,["totalTokenCount"]);f!=null&&g(e,["totalTokenCount"],f);const p=h(n,["promptTokensDetails"]);if(p!=null){let A=p;Array.isArray(A)&&(A=A.map(C=>C)),g(e,["promptTokensDetails"],A)}const m=h(n,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(C=>C)),g(e,["cacheTokensDetails"],A)}const v=h(n,["candidatesTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(C=>C)),g(e,["responseTokensDetails"],A)}const _=h(n,["toolUsePromptTokensDetails"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(C=>C)),g(e,["toolUsePromptTokensDetails"],A)}const T=h(n,["trafficType"]);return T!=null&&g(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S2(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function A2(n){const e={},t=h(n,["content"]);t!=null&&g(e,["content"],t);const s=h(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],w2(s));const r=h(n,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const o=h(n,["finishReason"]);o!=null&&g(e,["finishReason"],o);const c=h(n,["avgLogprobs"]);c!=null&&g(e,["avgLogprobs"],c);const f=h(n,["groundingMetadata"]);f!=null&&g(e,["groundingMetadata"],f);const p=h(n,["index"]);p!=null&&g(e,["index"],p);const m=h(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=h(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(A=>A)),g(e,["safetyRatings"],T)}const _=h(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function w2(n){const e={},t=h(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),g(e,["citations"],s)}return e}function N2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["contents"]);if(r!=null){let o=Os(r);Array.isArray(o)&&(o=o.map(c=>c)),g(t,["contents"],o)}return t}function C2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>o)),g(e,["tokensInfo"],r)}return e}function I2(n){const e={},t=h(n,["values"]);t!=null&&g(e,["values"],t);const s=h(n,["statistics"]);return s!=null&&g(e,["statistics"],k2(s)),e}function k2(n){const e={},t=h(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=h(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function Uf(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>OR(o))),g(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function R2(n){const e={},t=h(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=h(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function M2(n){const e={};if(h(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function D2(n,e){const t={},s=h(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],Ln(s));const r=h(n,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>mS(f))),g(e,["tools"],c)}const o=h(n,["generationConfig"]);return e!==void 0&&o!=null&&g(e,["generationConfig"],SR(o)),t}function P2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["contents"]);if(r!=null){let c=Os(r);Array.isArray(c)&&(c=c.map(f=>Uf(f))),g(t,["contents"],c)}const o=h(e,["config"]);return o!=null&&M2(o),t}function L2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["contents"]);if(r!=null){let c=Os(r);Array.isArray(c)&&(c=c.map(f=>f)),g(t,["contents"],c)}const o=h(e,["config"]);return o!=null&&D2(o,t),t}function U2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const r=h(n,["cachedContentTokenCount"]);return r!=null&&g(e,["cachedContentTokenCount"],r),e}function V2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function j2(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],xt(n,s)),t}function O2(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],xt(n,s)),t}function G2(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function B2(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function H2(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const r=h(n,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const o=h(n,["numberOfImages"]);e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o);const c=h(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const f=h(n,["guidanceScale"]);e!==void 0&&f!=null&&g(e,["parameters","guidanceScale"],f);const p=h(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=h(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=h(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=h(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=h(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const A=h(n,["language"]);e!==void 0&&A!=null&&g(e,["parameters","language"],A);const C=h(n,["outputMimeType"]);e!==void 0&&C!=null&&g(e,["parameters","outputOptions","mimeType"],C);const D=h(n,["outputCompressionQuality"]);e!==void 0&&D!=null&&g(e,["parameters","outputOptions","compressionQuality"],D);const N=h(n,["addWatermark"]);e!==void 0&&N!=null&&g(e,["parameters","addWatermark"],N);const L=h(n,["labels"]);e!==void 0&&L!=null&&g(e,["labels"],L);const O=h(n,["editMode"]);e!==void 0&&O!=null&&g(e,["parameters","editMode"],O);const B=h(n,["baseSteps"]);return e!==void 0&&B!=null&&g(e,["parameters","editConfig","baseSteps"],B),t}function z2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const o=h(e,["referenceImages"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>qR(p))),g(t,["instances[0]","referenceImages"],f)}const c=h(e,["config"]);return c!=null&&H2(c,t),t}function F2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>Vf(o))),g(e,["generatedImages"],r)}return e}function q2(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const r=h(n,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const o=h(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&g(e,["requests[]","outputDimensionality"],o),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function K2(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const r=h(n,["title"]);e!==void 0&&r!=null&&g(e,["instances[]","title"],r);const o=h(n,["outputDimensionality"]);e!==void 0&&o!=null&&g(e,["parameters","outputDimensionality"],o);const c=h(n,["mimeType"]);e!==void 0&&c!=null&&g(e,["instances[]","mimeType"],c);const f=h(n,["autoTruncate"]);return e!==void 0&&f!=null&&g(e,["parameters","autoTruncate"],f),t}function $2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["contents"]);if(r!=null){let f=I0(n,r);Array.isArray(f)&&(f=f.map(p=>p)),g(t,["requests[]","content"],f)}const o=h(e,["config"]);o!=null&&q2(o,t);const c=h(e,["model"]);return c!==void 0&&g(t,["requests[]","model"],xt(n,c)),t}function Y2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["contents"]);if(r!=null){let c=I0(n,r);Array.isArray(c)&&(c=c.map(f=>f)),g(t,["instances[]","content"],c)}const o=h(e,["config"]);return o!=null&&K2(o,t),t}function J2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["embeddings"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["embeddings"],o)}const r=h(n,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function Q2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions[]","embeddings"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>I2(c))),g(e,["embeddings"],o)}const r=h(n,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function W2(n){const e={},t=h(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=h(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function X2(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Z2(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const r=h(n,["name"]);if(r!=null&&g(e,["name"],r),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eR(n){const e={},t=h(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=h(n,["mode"]);if(s!=null&&g(e,["mode"],s),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function tR(n){const e={},t=h(n,["description"]);t!=null&&g(e,["description"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const r=h(n,["parameters"]);r!=null&&g(e,["parameters"],r);const o=h(n,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const c=h(n,["response"]);c!=null&&g(e,["response"],c);const f=h(n,["responseJsonSchema"]);if(f!=null&&g(e,["responseJsonSchema"],f),h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function nR(n,e,t){const s={},r=h(e,["systemInstruction"]);t!==void 0&&r!=null&&g(t,["systemInstruction"],Uf(Ln(r)));const o=h(e,["temperature"]);o!=null&&g(s,["temperature"],o);const c=h(e,["topP"]);c!=null&&g(s,["topP"],c);const f=h(e,["topK"]);f!=null&&g(s,["topK"],f);const p=h(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=h(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=h(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=h(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=h(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const A=h(e,["presencePenalty"]);A!=null&&g(s,["presencePenalty"],A);const C=h(e,["frequencyPenalty"]);C!=null&&g(s,["frequencyPenalty"],C);const D=h(e,["seed"]);D!=null&&g(s,["seed"],D);const N=h(e,["responseMimeType"]);N!=null&&g(s,["responseMimeType"],N);const L=h(e,["responseSchema"]);L!=null&&g(s,["responseSchema"],k0(L));const O=h(e,["responseJsonSchema"]);if(O!=null&&g(s,["responseJsonSchema"],O),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=h(e,["safetySettings"]);if(t!==void 0&&B!=null){let j=B;Array.isArray(j)&&(j=j.map(me=>KR(me))),g(t,["safetySettings"],j)}const $=h(e,["tools"]);if(t!==void 0&&$!=null){let j=El($);Array.isArray(j)&&(j=j.map(me=>ZR(Tl(me)))),g(t,["tools"],j)}const W=h(e,["toolConfig"]);if(t!==void 0&&W!=null&&g(t,["toolConfig"],XR(W)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=h(e,["cachedContent"]);t!==void 0&&se!=null&&g(t,["cachedContent"],ur(n,se));const R=h(e,["responseModalities"]);R!=null&&g(s,["responseModalities"],R);const M=h(e,["mediaResolution"]);M!=null&&g(s,["mediaResolution"],M);const k=h(e,["speechConfig"]);if(k!=null&&g(s,["speechConfig"],R0(k)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=h(e,["thinkingConfig"]);V!=null&&g(s,["thinkingConfig"],V);const U=h(e,["imageConfig"]);U!=null&&g(s,["imageConfig"],IR(U));const G=h(e,["enableEnhancedCivicAnswers"]);return G!=null&&g(s,["enableEnhancedCivicAnswers"],G),s}function sR(n,e,t){const s={},r=h(e,["systemInstruction"]);t!==void 0&&r!=null&&g(t,["systemInstruction"],Ln(r));const o=h(e,["temperature"]);o!=null&&g(s,["temperature"],o);const c=h(e,["topP"]);c!=null&&g(s,["topP"],c);const f=h(e,["topK"]);f!=null&&g(s,["topK"],f);const p=h(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=h(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=h(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=h(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=h(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const A=h(e,["presencePenalty"]);A!=null&&g(s,["presencePenalty"],A);const C=h(e,["frequencyPenalty"]);C!=null&&g(s,["frequencyPenalty"],C);const D=h(e,["seed"]);D!=null&&g(s,["seed"],D);const N=h(e,["responseMimeType"]);N!=null&&g(s,["responseMimeType"],N);const L=h(e,["responseSchema"]);L!=null&&g(s,["responseSchema"],k0(L));const O=h(e,["responseJsonSchema"]);O!=null&&g(s,["responseJsonSchema"],O);const B=h(e,["routingConfig"]);B!=null&&g(s,["routingConfig"],B);const $=h(e,["modelSelectionConfig"]);$!=null&&g(s,["modelConfig"],$);const W=h(e,["safetySettings"]);if(t!==void 0&&W!=null){let Y=W;Array.isArray(Y)&&(Y=Y.map(ue=>ue)),g(t,["safetySettings"],Y)}const se=h(e,["tools"]);if(t!==void 0&&se!=null){let Y=El(se);Array.isArray(Y)&&(Y=Y.map(ue=>mS(Tl(ue)))),g(t,["tools"],Y)}const R=h(e,["toolConfig"]);t!==void 0&&R!=null&&g(t,["toolConfig"],R);const M=h(e,["labels"]);t!==void 0&&M!=null&&g(t,["labels"],M);const k=h(e,["cachedContent"]);t!==void 0&&k!=null&&g(t,["cachedContent"],ur(n,k));const V=h(e,["responseModalities"]);V!=null&&g(s,["responseModalities"],V);const U=h(e,["mediaResolution"]);U!=null&&g(s,["mediaResolution"],U);const G=h(e,["speechConfig"]);G!=null&&g(s,["speechConfig"],R0(G));const j=h(e,["audioTimestamp"]);j!=null&&g(s,["audioTimestamp"],j);const me=h(e,["thinkingConfig"]);me!=null&&g(s,["thinkingConfig"],me);const Ae=h(e,["imageConfig"]);if(Ae!=null&&g(s,["imageConfig"],kR(Ae)),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function U_(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["contents"]);if(r!=null){let c=Os(r);Array.isArray(c)&&(c=c.map(f=>Uf(f))),g(t,["contents"],c)}const o=h(e,["config"]);return o!=null&&g(t,["generationConfig"],nR(n,o,t)),t}function V_(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["contents"]);if(r!=null){let c=Os(r);Array.isArray(c)&&(c=c.map(f=>f)),g(t,["contents"],c)}const o=h(e,["config"]);return o!=null&&g(t,["generationConfig"],sR(n,o,t)),t}function j_(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>A2(m))),g(e,["candidates"],p)}const r=h(n,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const o=h(n,["promptFeedback"]);o!=null&&g(e,["promptFeedback"],o);const c=h(n,["responseId"]);c!=null&&g(e,["responseId"],c);const f=h(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function O_(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const r=h(n,["createTime"]);r!=null&&g(e,["createTime"],r);const o=h(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const c=h(n,["promptFeedback"]);c!=null&&g(e,["promptFeedback"],c);const f=h(n,["responseId"]);f!=null&&g(e,["responseId"],f);const p=h(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function iR(n,e){const t={};if(h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=h(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const r=h(n,["aspectRatio"]);e!==void 0&&r!=null&&g(e,["parameters","aspectRatio"],r);const o=h(n,["guidanceScale"]);if(e!==void 0&&o!=null&&g(e,["parameters","guidanceScale"],o),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=h(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const f=h(n,["personGeneration"]);e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f);const p=h(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=h(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=h(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const _=h(n,["outputMimeType"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","mimeType"],_);const T=h(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T),h(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=h(n,["imageSize"]);if(e!==void 0&&A!=null&&g(e,["parameters","sampleImageSize"],A),h(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function rR(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const r=h(n,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const o=h(n,["numberOfImages"]);e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o);const c=h(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const f=h(n,["guidanceScale"]);e!==void 0&&f!=null&&g(e,["parameters","guidanceScale"],f);const p=h(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=h(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=h(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=h(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=h(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const A=h(n,["language"]);e!==void 0&&A!=null&&g(e,["parameters","language"],A);const C=h(n,["outputMimeType"]);e!==void 0&&C!=null&&g(e,["parameters","outputOptions","mimeType"],C);const D=h(n,["outputCompressionQuality"]);e!==void 0&&D!=null&&g(e,["parameters","outputOptions","compressionQuality"],D);const N=h(n,["addWatermark"]);e!==void 0&&N!=null&&g(e,["parameters","addWatermark"],N);const L=h(n,["labels"]);e!==void 0&&L!=null&&g(e,["labels"],L);const O=h(n,["imageSize"]);e!==void 0&&O!=null&&g(e,["parameters","sampleImageSize"],O);const B=h(n,["enhancePrompt"]);return e!==void 0&&B!=null&&g(e,["parameters","enhancePrompt"],B),t}function aR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const o=h(e,["config"]);return o!=null&&iR(o,t),t}function oR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const o=h(e,["config"]);return o!=null&&rR(o,t),t}function lR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>bR(c))),g(e,["generatedImages"],o)}const r=h(n,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],fS(r)),e}function cR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>Vf(c))),g(e,["generatedImages"],o)}const r=h(n,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],hS(r)),e}function uR(n,e){const t={},s=h(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=h(n,["durationSeconds"]);if(e!==void 0&&r!=null&&g(e,["parameters","durationSeconds"],r),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const c=h(n,["resolution"]);e!==void 0&&c!=null&&g(e,["parameters","resolution"],c);const f=h(n,["personGeneration"]);if(e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f),h(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=h(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=h(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),h(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=h(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],jf(v));const _=h(n,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(A=>fM(A))),g(e,["instances[0]","referenceImages"],T)}if(h(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function dR(n,e){const t={},s=h(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const r=h(n,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const o=h(n,["fps"]);e!==void 0&&o!=null&&g(e,["parameters","fps"],o);const c=h(n,["durationSeconds"]);e!==void 0&&c!=null&&g(e,["parameters","durationSeconds"],c);const f=h(n,["seed"]);e!==void 0&&f!=null&&g(e,["parameters","seed"],f);const p=h(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=h(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=h(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=h(n,["pubsubTopic"]);e!==void 0&&_!=null&&g(e,["parameters","pubsubTopic"],_);const T=h(n,["negativePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","negativePrompt"],T);const A=h(n,["enhancePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","enhancePrompt"],A);const C=h(n,["generateAudio"]);e!==void 0&&C!=null&&g(e,["parameters","generateAudio"],C);const D=h(n,["lastFrame"]);e!==void 0&&D!=null&&g(e,["instances[0]","lastFrame"],ri(D));const N=h(n,["referenceImages"]);if(e!==void 0&&N!=null){let B=N;Array.isArray(B)&&(B=B.map($=>hM($))),g(e,["instances[0]","referenceImages"],B)}const L=h(n,["mask"]);e!==void 0&&L!=null&&g(e,["instances[0]","mask"],dM(L));const O=h(n,["compressionQuality"]);return e!==void 0&&O!=null&&g(e,["parameters","compressionQuality"],O),t}function fR(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],gR(c)),e}function hR(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response"]);return c!=null&&g(e,["response"],yR(c)),e}function mR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const o=h(e,["image"]);o!=null&&g(t,["instances[0]","image"],jf(o));const c=h(e,["video"]);c!=null&&g(t,["instances[0]","video"],pS(c));const f=h(e,["source"]);f!=null&&xR(f,t);const p=h(e,["config"]);return p!=null&&uR(p,t),t}function pR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const o=h(e,["image"]);o!=null&&g(t,["instances[0]","image"],ri(o));const c=h(e,["video"]);c!=null&&g(t,["instances[0]","video"],gS(c));const f=h(e,["source"]);f!=null&&vR(f,t);const p=h(e,["config"]);return p!=null&&dR(p,t),t}function gR(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(c=>TR(c))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const r=h(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function yR(n){const e={},t=h(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(c=>ER(c))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const r=h(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function xR(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const r=h(n,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],jf(r));const o=h(n,["video"]);return e!==void 0&&o!=null&&g(e,["instances[0]","video"],pS(o)),t}function vR(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const r=h(n,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],ri(r));const o=h(n,["video"]);return e!==void 0&&o!=null&&g(e,["instances[0]","video"],gS(o)),t}function bR(n){const e={},t=h(n,["_self"]);t!=null&&g(e,["image"],RR(t));const s=h(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const r=h(n,["_self"]);return r!=null&&g(e,["safetyAttributes"],fS(r)),e}function Vf(n){const e={},t=h(n,["_self"]);t!=null&&g(e,["image"],dS(t));const s=h(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const r=h(n,["_self"]);r!=null&&g(e,["safetyAttributes"],hS(r));const o=h(n,["prompt"]);return o!=null&&g(e,["enhancedPrompt"],o),e}function _R(n){const e={},t=h(n,["_self"]);t!=null&&g(e,["mask"],dS(t));const s=h(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>o)),g(e,["labels"],r)}return e}function TR(n){const e={},t=h(n,["video"]);return t!=null&&g(e,["video"],cM(t)),e}function ER(n){const e={},t=h(n,["_self"]);return t!=null&&g(e,["video"],uM(t)),e}function SR(n){const e={},t=h(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=h(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const r=h(n,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const o=h(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const c=h(n,["enableAffectiveDialog"]);c!=null&&g(e,["enableAffectiveDialog"],c);const f=h(n,["frequencyPenalty"]);f!=null&&g(e,["frequencyPenalty"],f);const p=h(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=h(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=h(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=h(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=h(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const A=h(n,["responseMimeType"]);A!=null&&g(e,["responseMimeType"],A);const C=h(n,["responseModalities"]);C!=null&&g(e,["responseModalities"],C);const D=h(n,["responseSchema"]);D!=null&&g(e,["responseSchema"],D);const N=h(n,["routingConfig"]);N!=null&&g(e,["routingConfig"],N);const L=h(n,["seed"]);L!=null&&g(e,["seed"],L);const O=h(n,["speechConfig"]);O!=null&&g(e,["speechConfig"],O);const B=h(n,["stopSequences"]);B!=null&&g(e,["stopSequences"],B);const $=h(n,["temperature"]);$!=null&&g(e,["temperature"],$);const W=h(n,["thinkingConfig"]);W!=null&&g(e,["thinkingConfig"],W);const se=h(n,["topK"]);se!=null&&g(e,["topK"],se);const R=h(n,["topP"]);if(R!=null&&g(e,["topP"],R),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function AR(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],xt(n,s)),t}function wR(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],xt(n,s)),t}function NR(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function CR(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function IR(n){const e={},t=h(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=h(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),h(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(h(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function kR(n){const e={},t=h(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=h(n,["imageSize"]);s!=null&&g(e,["imageSize"],s);const r=h(n,["personGeneration"]);r!=null&&g(e,["personGeneration"],r);const o=h(n,["outputMimeType"]);o!=null&&g(e,["imageOutputOptions","mimeType"],o);const c=h(n,["outputCompressionQuality"]);return c!=null&&g(e,["imageOutputOptions","compressionQuality"],c),e}function RR(n){const e={},t=h(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],fa(t));const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function dS(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],fa(s));const r=h(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function jf(n){const e={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=h(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],fa(t));const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function ri(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=h(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],fa(s));const r=h(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function MR(n,e,t){const s={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&g(t,["_query","pageSize"],r);const o=h(e,["pageToken"]);t!==void 0&&o!=null&&g(t,["_query","pageToken"],o);const c=h(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const f=h(e,["queryBase"]);return t!==void 0&&f!=null&&g(t,["_url","models_url"],iS(n,f)),s}function DR(n,e,t){const s={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&g(t,["_query","pageSize"],r);const o=h(e,["pageToken"]);t!==void 0&&o!=null&&g(t,["_query","pageToken"],o);const c=h(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const f=h(e,["queryBase"]);return t!==void 0&&f!=null&&g(t,["_url","models_url"],iS(n,f)),s}function PR(n,e){const t={},s=h(e,["config"]);return s!=null&&MR(n,s,t),t}function LR(n,e){const t={},s=h(e,["config"]);return s!=null&&DR(n,s,t),t}function UR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["_self"]);if(r!=null){let o=rS(r);Array.isArray(o)&&(o=o.map(c=>Gp(c))),g(e,["models"],o)}return e}function VR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["_self"]);if(r!=null){let o=rS(r);Array.isArray(o)&&(o=o.map(c=>Bp(c))),g(e,["models"],o)}return e}function jR(n){const e={},t=h(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=h(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const r=h(n,["maskDilation"]);return r!=null&&g(e,["dilation"],r),e}function Gp(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["displayName"]);s!=null&&g(e,["displayName"],s);const r=h(n,["description"]);r!=null&&g(e,["description"],r);const o=h(n,["version"]);o!=null&&g(e,["version"],o);const c=h(n,["_self"]);c!=null&&g(e,["tunedModelInfo"],eM(c));const f=h(n,["inputTokenLimit"]);f!=null&&g(e,["inputTokenLimit"],f);const p=h(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=h(n,["supportedGenerationMethods"]);m!=null&&g(e,["supportedActions"],m);const v=h(n,["temperature"]);v!=null&&g(e,["temperature"],v);const _=h(n,["maxTemperature"]);_!=null&&g(e,["maxTemperature"],_);const T=h(n,["topP"]);T!=null&&g(e,["topP"],T);const A=h(n,["topK"]);A!=null&&g(e,["topK"],A);const C=h(n,["thinking"]);return C!=null&&g(e,["thinking"],C),e}function Bp(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["displayName"]);s!=null&&g(e,["displayName"],s);const r=h(n,["description"]);r!=null&&g(e,["description"],r);const o=h(n,["versionId"]);o!=null&&g(e,["version"],o);const c=h(n,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>W2(T))),g(e,["endpoints"],_)}const f=h(n,["labels"]);f!=null&&g(e,["labels"],f);const p=h(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],tM(p));const m=h(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=h(n,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(T=>T)),g(e,["checkpoints"],_)}return e}function OR(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const r=h(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],X2(o));const c=h(n,["functionCall"]);c!=null&&g(e,["functionCall"],Z2(c));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const p=h(n,["inlineData"]);p!=null&&g(e,["inlineData"],S2(p));const m=h(n,["text"]);m!=null&&g(e,["text"],m);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function GR(n){const e={},t=h(n,["productImage"]);return t!=null&&g(e,["image"],ri(t)),e}function BR(n,e){const t={},s=h(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const r=h(n,["baseSteps"]);e!==void 0&&r!=null&&g(e,["parameters","baseSteps"],r);const o=h(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const c=h(n,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const f=h(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const p=h(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=h(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=h(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const _=h(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","compressionQuality"],_);const T=h(n,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const A=h(n,["labels"]);return e!==void 0&&A!=null&&g(e,["labels"],A),t}function HR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["source"]);r!=null&&FR(r,t);const o=h(e,["config"]);return o!=null&&BR(o,t),t}function zR(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>Vf(r))),g(e,["generatedImages"],s)}return e}function FR(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const r=h(n,["personImage"]);e!==void 0&&r!=null&&g(e,["instances[0]","personImage","image"],ri(r));const o=h(n,["productImages"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>GR(f))),g(e,["instances[0]","productImages"],c)}return t}function qR(n){const e={},t=h(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],ri(t));const s=h(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const r=h(n,["referenceType"]);r!=null&&g(e,["referenceType"],r);const o=h(n,["maskImageConfig"]);o!=null&&g(e,["maskImageConfig"],jR(o));const c=h(n,["controlImageConfig"]);c!=null&&g(e,["controlImageConfig"],R2(c));const f=h(n,["styleImageConfig"]);f!=null&&g(e,["styleImageConfig"],f);const p=h(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function fS(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=h(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const r=h(n,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function hS(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=h(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const r=h(n,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function KR(n){const e={},t=h(n,["category"]);if(t!=null&&g(e,["category"],t),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function $R(n){const e={},t=h(n,["image"]);return t!=null&&g(e,["image"],ri(t)),e}function YR(n,e){const t={},s=h(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const r=h(n,["maxPredictions"]);e!==void 0&&r!=null&&g(e,["parameters","maxPredictions"],r);const o=h(n,["confidenceThreshold"]);e!==void 0&&o!=null&&g(e,["parameters","confidenceThreshold"],o);const c=h(n,["maskDilation"]);e!==void 0&&c!=null&&g(e,["parameters","maskDilation"],c);const f=h(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&g(e,["parameters","binaryColorThreshold"],f);const p=h(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function JR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["source"]);r!=null&&WR(r,t);const o=h(e,["config"]);return o!=null&&YR(o,t),t}function QR(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>_R(r))),g(e,["generatedMasks"],s)}return e}function WR(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const r=h(n,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],ri(r));const o=h(n,["scribbleImage"]);return e!==void 0&&o!=null&&g(e,["instances[0]","scribble"],$R(o)),t}function XR(n){const e={},t=h(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=h(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],eR(s)),e}function ZR(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const r=h(n,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const c=h(n,["googleMaps"]);c!=null&&g(e,["googleMaps"],NR(c));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],CR(f));const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=h(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function mS(n){const e={},t=h(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=h(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=h(n,["codeExecution"]);r!=null&&g(e,["codeExecution"],r);const o=h(n,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const c=h(n,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>tR(T))),g(e,["functionDeclarations"],_)}const f=h(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const p=h(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const m=h(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const v=h(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function eM(n){const e={},t=h(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=h(n,["createTime"]);s!=null&&g(e,["createTime"],s);const r=h(n,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function tM(n){const e={},t=h(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=h(n,["createTime"]);s!=null&&g(e,["createTime"],s);const r=h(n,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function nM(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const r=h(n,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const o=h(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&g(e,["defaultCheckpointId"],o),t}function sM(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const r=h(n,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const o=h(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&g(e,["defaultCheckpointId"],o),t}function iM(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","name"],xt(n,s));const r=h(e,["config"]);return r!=null&&nM(r,t),t}function rM(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["config"]);return r!=null&&sM(r,t),t}function aM(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const r=h(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&g(e,["parameters","safetySetting"],r);const o=h(n,["personGeneration"]);e!==void 0&&o!=null&&g(e,["parameters","personGeneration"],o);const c=h(n,["includeRaiReason"]);e!==void 0&&c!=null&&g(e,["parameters","includeRaiReason"],c);const f=h(n,["outputMimeType"]);e!==void 0&&f!=null&&g(e,["parameters","outputOptions","mimeType"],f);const p=h(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const m=h(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=h(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=h(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=h(n,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const A=h(n,["mode"]);return e!==void 0&&A!=null&&g(e,["parameters","mode"],A),t}function oM(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],xt(n,s));const r=h(e,["image"]);r!=null&&g(t,["instances[0]","image"],ri(r));const o=h(e,["upscaleFactor"]);o!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],o);const c=h(e,["config"]);return c!=null&&aM(c,t),t}function lM(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>Vf(o))),g(e,["generatedImages"],r)}return e}function cM(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["uri"],t);const s=h(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],fa(s));const r=h(n,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function uM(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],fa(s));const r=h(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function dM(n){const e={},t=h(n,["image"]);t!=null&&g(e,["_self"],ri(t));const s=h(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function fM(n){const e={},t=h(n,["image"]);t!=null&&g(e,["image"],jf(t));const s=h(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function hM(n){const e={},t=h(n,["image"]);t!=null&&g(e,["image"],ri(t));const s=h(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function pS(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["uri"],t);const s=h(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],fa(s));const r=h(n,["mimeType"]);return r!=null&&g(e,["encoding"],r),e}function gS(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=h(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],fa(s));const r=h(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mM(n,e){const t={},s=h(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["displayName"],s),t}function pM(n){const e={},t=h(n,["config"]);return t!=null&&mM(t,e),e}function gM(n,e){const t={},s=h(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function yM(n){const e={},t=h(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=h(n,["config"]);return s!=null&&gM(s,e),e}function xM(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function vM(n,e){const t={},s=h(n,["customMetadata"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["customMetadata"],o)}const r=h(n,["chunkingConfig"]);return e!==void 0&&r!=null&&g(e,["chunkingConfig"],r),t}function bM(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response"]);return c!=null&&g(e,["response"],TM(c)),e}function _M(n){const e={},t=h(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=h(n,["fileName"]);s!=null&&g(e,["fileName"],s);const r=h(n,["config"]);return r!=null&&vM(r,e),e}function TM(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["parent"]);s!=null&&g(e,["parent"],s);const r=h(n,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function EM(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function SM(n){const e={},t=h(n,["config"]);return t!=null&&EM(t,e),e}function AM(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["fileSearchStores"],o)}return e}function yS(n,e){const t={},s=h(n,["mimeType"]);e!==void 0&&s!=null&&g(e,["mimeType"],s);const r=h(n,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const o=h(n,["customMetadata"]);if(e!==void 0&&o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),g(e,["customMetadata"],f)}const c=h(n,["chunkingConfig"]);return e!==void 0&&c!=null&&g(e,["chunkingConfig"],c),t}function wM(n){const e={},t=h(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=h(n,["config"]);return s!=null&&yS(s,e),e}function NM(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CM="Content-Type",IM="X-Server-Timeout",kM="User-Agent",Hp="x-goog-api-client",RM="1.35.0",MM=`google-genai-sdk/${RM}`,DM="v1beta1",PM="v1beta";class LM{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:DM,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:PM,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const r=[this.getRequestUrlInternal(t)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))r.searchParams.append(c,String(f));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(t))typeof o=="object"?s[r]=Object.assign(Object.assign({},s[r]),o):o!==void 0&&(s[r]=o);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,r){if(t&&t.timeout||r){const o=new AbortController,c=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>o.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=c}return t&&t.extraBody!==null&&UM(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await G_(r),new Vp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await G_(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return ei(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";const f="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield Je(r.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=o.decode(v,{stream:!0});try{const C=JSON.parse(_);if("error"in C){const D=JSON.parse(JSON.stringify(C.error)),N=D.status,L=D.code,O=`got status: ${N}. ${JSON.stringify(C)}`;if(L>=400&&L<600)throw new Lf({message:O,status:L})}}catch(C){if(C.name==="ApiError")throw C}c+=_;let T=-1,A=0;for(;;){T=-1,A=0;for(const N of p){const L=c.indexOf(N);L!==-1&&(T===-1||L<T)&&(T=L,A=N.length)}if(T===-1)break;const C=c.substring(0,T);c=c.substring(T+A);const D=C.trim();if(D.startsWith(f)){const N=D.substring(f.length).trim();try{const L=new Response(N,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Je(new Vp(L))}catch(L){throw new Error(`exception parsing stream chunk ${N}. ${L}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=MM+" "+this.clientOptions.userAgentExtra;return e[kM]=t,e[Hp]=t,e[CM]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))s.append(r,o);e.timeout&&e.timeout>0&&s.append(IM,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,c=await o.stat(e);r.sizeBytes=String(c.size);const f=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const p={file:r},m=this.getFileName(e),v=we("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,m,p,t==null?void 0:t.httpOptions);return o.upload(e,_,this)}async uploadFileToFileSearchStore(e,t,s){var r;const o=this.clientOptions.uploader,c=await o.stat(t),f=String(c.size),p=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),_={};s!=null&&yS(s,_);const T=await this.fetchUploadUrl(m,f,p,v,_,s==null?void 0:s.httpOptions);return o.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,r,o,c){var f;let p={};c?p=c:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:p});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(f=m==null?void 0:m.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function G_(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw t>=400&&t<600?new Lf({message:r,status:t}):new Error(r)}}function UM(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const o=JSON.parse(n.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))t=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(o,c){const f=Object.assign({},o);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const m=c[p],v=f[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?f[p]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),f[p]=m)}return f}const r=s(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VM="mcp_used/unknown";let jM=!1;function xS(n){for(const e of n)if(OM(e)||typeof e=="object"&&"inputSchema"in e)return!0;return jM}function vS(n){var e;const t=(e=n[Hp])!==null&&e!==void 0?e:"";n[Hp]=(t+` ${VM}`).trimStart()}function OM(n){return n!==null&&typeof n=="object"&&n instanceof D0}function GM(n){return ei(this,arguments,function*(t,s=100){let r,o=0;for(;o<s;){const c=yield Je(t.listTools({cursor:r}));for(const f of c.tools)yield yield Je(f),o++;if(!c.nextCursor)break;r=c.nextCursor}})}class D0{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new D0(e,t)}async initialize(){var e,t,s,r;if(this.mcpTools.length>0)return;const o={},c=[];for(const v of this.mcpClients)try{for(var f=!0,p=(t=void 0,ti(GM(v))),m;m=await p.next(),e=m.done,!e;f=!0){r=m.value,f=!1;const _=r;c.push(_);const T=_.name;if(o[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);o[T]=v}}catch(_){t={error:_}}finally{try{!f&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),xI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const c=await r.callTool({name:s.name,arguments:s.args},void 0,o);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function BM(n,e,t){const s=new uI;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(s,r),e(s)}class HM{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),c=qM(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),p=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${f}`;let m=()=>{};const v=new Promise(B=>{m=B}),_=e.callbacks,T=function(){m({})},A=this.apiClient,C={onopen:T,onmessage:B=>{BM(A,_.onmessage,B)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(B){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(B){}},D=this.webSocketFactory.create(p,FM(c),C);D.connect(),await v;const O={setup:{model:xt(this.apiClient,e.model)}};return D.send(JSON.stringify(O)),new zM(D,this.apiClient)}}class zM{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=p2(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=m2(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(il.PLAY)}pause(){this.sendPlaybackControl(il.PAUSE)}stop(){this.sendPlaybackControl(il.STOP)}resetContext(){this.sendPlaybackControl(il.RESET_CONTEXT)}close(){this.conn.close()}}function FM(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function qM(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function $M(n,e,t){const s=new cI;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const o=JSON.parse(r);if(n.isVertexAI()){const c=x2(o);Object.assign(s,c)}else Object.assign(s,o);e(s)}class YM{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new HM(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,r,o,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&xS(e.config.tools)&&vS(_);const T=XM(_);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,v);else{const k=this.apiClient.getApiKey();let V="BidiGenerateContent",U="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",U="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${V}?${U}=${k}`}let A=()=>{};const C=new Promise(k=>{A=k}),D=e.callbacks,N=function(){var k;(k=D==null?void 0:D.onopen)===null||k===void 0||k.call(D),A({})},L=this.apiClient,O={onopen:N,onmessage:k=>{$M(L,D.onmessage,k)},onerror:(t=D==null?void 0:D.onerror)!==null&&t!==void 0?t:function(k){},onclose:(s=D==null?void 0:D.onclose)!==null&&s!==void 0?s:function(k){}},B=this.webSocketFactory.create(v,WM(T),O);B.connect(),await C;let $=xt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&$.startsWith("publishers/")){const k=this.apiClient.getProject(),V=this.apiClient.getLocation();$=`projects/${k}/locations/${V}/`+$}let W={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[rf.AUDIO]}:e.config.responseModalities=[rf.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const se=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],R=[];for(const k of se)if(this.isCallableTool(k)){const V=k;R.push(await V.tool())}else R.push(k);R.length>0&&(e.config.tools=R);const M={model:$,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?W=h2(this.apiClient,M):W=f2(this.apiClient,M),delete W.config,B.send(JSON.stringify(W)),new QM(B,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const JM={turnComplete:!0};class QM{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Os(t.turns),e.isVertexAI()||(s=s.map(r=>Uf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const o of s){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(KM)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},JM),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:y2(e)}:t={realtimeInput:g2(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function WM(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function XM(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const B_=10;function H_(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(ol(c)){r=!0;break}if(!r)return!0;const o=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function ol(n){return"callTool"in n&&typeof n.callTool=="function"}function ZM(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>ol(r)))!==null&&s!==void 0?s:!1}function z_(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,r)=>{if(ol(s))return;const o=s;o.functionDeclarations&&o.functionDeclarations.length>0&&t.push(r)}),t}function F_(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e4 extends cr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,r,o,c,f;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!ZM(t)||H_(t.config))return await this.generateContentInternal(p);const m=z_(t);if(m.length>0){const D=m.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${D}.`)}let v,_;const T=Os(p.contents),A=(o=(r=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:B_;let C=0;for(;C<A&&(v=await this.generateContentInternal(p),!(!v.functionCalls||v.functionCalls.length===0));){const D=v.candidates[0].content,N=[];for(const L of(f=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(ol(L)){const B=await L.callTool(v.functionCalls);N.push(...B)}C++,_={role:"user",parts:N},p.contents=Os(p.contents),p.contents.push(D),p.contents.push(_),F_(p.config)&&(T.push(D),T.push(_))}return F_(p.config)&&(v.automaticFunctionCallingHistory=T),v},this.generateContentStream=async t=>{var s,r,o,c,f;if(this.maybeMoveToResponseJsonSchem(t),H_(t.config)){const _=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(_)}const p=z_(t);if(p.length>0){const _=p.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(o=(r=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,v=(f=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var r;let o;const c=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((r=p==null?void 0:p.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=p==null?void 0:p.safetyAttributes:c.push(p);let f;return o?f={generatedImages:c,positivePromptSafetyAttributes:o,sdkHttpResponse:s.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},f}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new ro(sr.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var s,r,o,c,f,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(o=t.source)===null||o===void 0?void 0:o.video)===null||c===void 0)&&c.uri&&(!((p=(f=t.source)===null||f===void 0?void 0:f.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,r;const o=(t=e.config)===null||t===void 0?void 0:t.tools;if(!o)return e;const c=await Promise.all(o.map(async p=>ol(p)?await p.tool():p)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&xS(e.config.tools)){const p=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),vS(m),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return f}async initAfcToolsMap(e){var t,s,r;const o=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(ol(c)){const f=c,p=await f.tool();for(const m of(r=p.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(o.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);o.set(m.name,f)}}return o}async processAfcStream(e){var t,s,r;const o=(r=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:B_;let c=!1,f=0;const p=await this.initAfcToolsMap(e);return(function(m,v,_){return ei(this,arguments,function*(){for(var T,A,C,D,N,L;f<o;){c&&(f++,c=!1);const W=yield Je(m.processParamsMaybeAddMcpUsage(_)),se=yield Je(m.generateContentStreamInternal(W)),R=[],M=[];try{for(var O=!0,B=(A=void 0,ti(se)),$;$=yield Je(B.next()),T=$.done,!T;O=!0){D=$.value,O=!1;const k=D;if(yield yield Je(k),k.candidates&&(!((N=k.candidates[0])===null||N===void 0)&&N.content)){M.push(k.candidates[0].content);for(const V of(L=k.candidates[0].content.parts)!==null&&L!==void 0?L:[])if(f<o&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(V.functionCall.name)){const U=yield Je(v.get(V.functionCall.name).callTool([V.functionCall]));R.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(k){A={error:k}}finally{try{!O&&!T&&(C=B.return)&&(yield Je(C.call(B)))}finally{if(A)throw A.error}}if(R.length>0){c=!0;const k=new kc;k.candidates=[{content:{role:"user",parts:R}}],yield yield Je(k);const V=[];V.push(...M),V.push({role:"user",parts:R});const U=Os(_.contents).concat(V);_.contents=U}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=V_(this.apiClient,e);return f=we("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=O_(v),T=new kc;return Object.assign(T,_),T})}else{const m=U_(this.apiClient,e);return f=we("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=j_(v),T=new kc;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=V_(this.apiClient,e);return f=we("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(_){return ei(this,arguments,function*(){var T,A,C,D;try{for(var N=!0,L=ti(_),O;O=yield Je(L.next()),T=O.done,!T;N=!0){D=O.value,N=!1;const B=D,$=O_(yield Je(B.json()));$.sdkHttpResponse={headers:B.headers};const W=new kc;Object.assign(W,$),yield yield Je(W)}}catch(B){A={error:B}}finally{try{!N&&!T&&(C=L.return)&&(yield Je(C.call(L)))}finally{if(A)throw A.error}}})})}else{const m=U_(this.apiClient,e);return f=we("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(_){return ei(this,arguments,function*(){var T,A,C,D;try{for(var N=!0,L=ti(_),O;O=yield Je(L.next()),T=O.done,!T;N=!0){D=O.value,N=!1;const B=D,$=j_(yield Je(B.json()));$.sdkHttpResponse={headers:B.headers};const W=new kc;Object.assign(W,$),yield yield Je(W)}}catch(B){A={error:B}}finally{try{!N&&!T&&(C=L.return)&&(yield Je(C.call(L)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=Y2(this.apiClient,e);return f=we("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Q2(v),T=new v_;return Object.assign(T,_),T})}else{const m=$2(this.apiClient,e);return f=we("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=J2(v),T=new v_;return Object.assign(T,_),T})}}async generateImagesInternal(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=oR(this.apiClient,e);return f=we("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=cR(v),T=new b_;return Object.assign(T,_),T})}else{const m=aR(this.apiClient,e);return f=we("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=lR(v),T=new b_;return Object.assign(T,_),T})}}async editImageInternal(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI()){const f=z2(this.apiClient,e);return o=we("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),r.then(p=>{const m=F2(p),v=new XC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI()){const f=oM(this.apiClient,e);return o=we("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),r.then(p=>{const m=lM(p),v=new ZC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI()){const f=HR(this.apiClient,e);return o=we("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>{const m=zR(p),v=new eI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI()){const f=JR(this.apiClient,e);return o=we("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>{const m=QR(p),v=new tI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=wR(this.apiClient,e);return f=we("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Bp(v))}else{const m=AR(this.apiClient,e);return f=we("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Gp(v))}}async listInternal(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=LR(this.apiClient,e);return f=we("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=VR(v),T=new __;return Object.assign(T,_),T})}else{const m=PR(this.apiClient,e);return f=we("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=UR(v),T=new __;return Object.assign(T,_),T})}}async update(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=rM(this.apiClient,e);return f=we("{model}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Bp(v))}else{const m=iM(this.apiClient,e);return f=we("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Gp(v))}}async delete(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=O2(this.apiClient,e);return f=we("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=B2(v),T=new T_;return Object.assign(T,_),T})}else{const m=j2(this.apiClient,e);return f=we("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=G2(v),T=new T_;return Object.assign(T,_),T})}}async countTokens(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=L2(this.apiClient,e);return f=we("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=V2(v),T=new E_;return Object.assign(T,_),T})}else{const m=P2(this.apiClient,e);return f=we("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=U2(v),T=new E_;return Object.assign(T,_),T})}}async computeTokens(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI()){const f=N2(this.apiClient,e);return o=we("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),r.then(p=>{const m=C2(p),v=new nI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=pR(this.apiClient,e);return f=we("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const _=hR(v),T=new af;return Object.assign(T,_),T})}else{const m=mR(this.apiClient,e);return f=we("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>{const _=fR(v),T=new af;return Object.assign(T,_),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t4 extends cr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let o;s&&"httpOptions"in s&&(o=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let o;s&&"httpOptions"in s&&(o=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=KC(e);return f=we("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const m=qC(e);return f=we("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI()){const f=jC(e);return o=we("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function n4(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function s4(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>f4(o))),g(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function i4(n,e,t){const s={},r=h(e,["expireTime"]);t!==void 0&&r!=null&&g(t,["expireTime"],r);const o=h(e,["newSessionExpireTime"]);t!==void 0&&o!=null&&g(t,["newSessionExpireTime"],o);const c=h(e,["uses"]);t!==void 0&&c!=null&&g(t,["uses"],c);const f=h(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&g(t,["bidiGenerateContentSetup"],d4(n,f));const p=h(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function r4(n,e){const t={},s=h(e,["config"]);return s!=null&&g(t,["config"],i4(n,s,t)),t}function a4(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function o4(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const r=h(n,["name"]);if(r!=null&&g(e,["name"],r),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function l4(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function c4(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function u4(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const r=h(n,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const o=h(n,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const c=h(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const f=h(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const p=h(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=h(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=h(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=h(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],M0(_));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const A=h(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],A);const C=h(n,["systemInstruction"]);e!==void 0&&C!=null&&g(e,["setup","systemInstruction"],s4(Ln(C)));const D=h(n,["tools"]);if(e!==void 0&&D!=null){let se=El(D);Array.isArray(se)&&(se=se.map(R=>m4(Tl(R)))),g(e,["setup","tools"],se)}const N=h(n,["sessionResumption"]);e!==void 0&&N!=null&&g(e,["setup","sessionResumption"],h4(N));const L=h(n,["inputAudioTranscription"]);e!==void 0&&L!=null&&g(e,["setup","inputAudioTranscription"],L);const O=h(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&g(e,["setup","outputAudioTranscription"],O);const B=h(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const $=h(n,["contextWindowCompression"]);e!==void 0&&$!=null&&g(e,["setup","contextWindowCompression"],$);const W=h(n,["proactivity"]);if(e!==void 0&&W!=null&&g(e,["setup","proactivity"],W),h(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function d4(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["setup","model"],xt(n,s));const r=h(e,["config"]);return r!=null&&g(t,["config"],u4(r,t)),t}function f4(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const r=h(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],a4(o));const c=h(n,["functionCall"]);c!=null&&g(e,["functionCall"],o4(c));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const p=h(n,["inlineData"]);p!=null&&g(e,["inlineData"],n4(p));const m=h(n,["text"]);m!=null&&g(e,["text"],m);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function h4(n){const e={},t=h(n,["handle"]);if(t!=null&&g(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function m4(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const r=h(n,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const c=h(n,["googleMaps"]);c!=null&&g(e,["googleMaps"],l4(c));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],c4(f));const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=h(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p4(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(o=>`${t}.${o}`);e.push(...r)}else e.push(t)}return e.join(",")}function g4(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const o=s.setup;typeof o=="object"&&o!==null?(n.bidiGenerateContentSetup=o,t=o):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const o=p4(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?n.fieldMask=o:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(m=>c.includes(m)?`generationConfig.${m}`:m));const p=[];o&&p.push(o),f.length>0&&p.push(...f),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class y4 extends cr{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=r4(this.apiClient,e);o=we("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const p=g4(f,e.config);return r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x4(n,e){const t={},s=h(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function v4(n){const e={},t=h(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=h(n,["config"]);return s!=null&&x4(s,e),e}function b4(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function _4(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function T4(n){const e={},t=h(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const s=h(n,["config"]);return s!=null&&_4(s,e),e}function E4(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S4 extends cr{constructor(e){super(),this.apiClient=e,this.list=async t=>new ro(sr.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=b4(e);return o=we("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var t,s;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=v4(e);r=we("{name}",c._url),o=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=T4(e);return o=we("{parent}/documents",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>{const m=E4(p),v=new sI;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A4 extends cr{constructor(e,t=new S4(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new ro(sr.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=pM(e);return o=we("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async get(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=xM(e);return o=we("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var t,s;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=yM(e);r=we("{name}",c._url),o=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=SM(e);return o=we("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>{const m=AM(p),v=new iI;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=wM(e);return o=we("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>{const m=NM(p),v=new rI;return Object.assign(v,m),v})}}async importFile(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=_M(e);return o=we("{file_search_store_name}:importFile",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>{const m=bM(p),v=new N0;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let bS=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return bS=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const w4=()=>bS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Fp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hs extends Error{}class $n extends Hs{constructor(e,t,s,r){super(`${$n.makeMessage(e,t,s)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,s){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,s,r){if(!e||!r)return new Of({message:s,cause:Fp(t)});const o=t;return e===400?new TS(e,o,s,r):e===401?new ES(e,o,s,r):e===403?new SS(e,o,s,r):e===404?new AS(e,o,s,r):e===409?new wS(e,o,s,r):e===422?new NS(e,o,s,r):e===429?new CS(e,o,s,r):e>=500?new IS(e,o,s,r):new $n(e,o,s,r)}}class qp extends $n{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Of extends $n{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class _S extends Of{constructor({message:e}={}){super({message:e??"Request timed out."})}}class TS extends $n{}class ES extends $n{}class SS extends $n{}class AS extends $n{}class wS extends $n{}class NS extends $n{}class CS extends $n{}class IS extends $n{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N4=/^[a-z][a-z0-9+.-]*:/i,C4=n=>N4.test(n);let Kp=n=>(Kp=Array.isArray,Kp(n));const I4=Kp;let k4=I4;const q_=k4;function R4(n){if(!n)return!0;for(const e in n)return!1;return!0}function M4(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const D4=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Hs(`${n} must be an integer`);if(e<0)throw new Hs(`${n} must be a positive integer`);return e},P4=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const L4=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U4(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const V4=()=>{var n,e,t,s,r;const o=U4();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zo,"X-Stainless-OS":$_(Deno.build.os),"X-Stainless-Arch":K_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zo,"X-Stainless-OS":$_((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":K_((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const c=j4();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function j4(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const r=s[1]||0,o=s[2]||0,c=s[3]||0;return{browser:e,version:`${r}.${o}.${c}`}}}return null}const K_=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",$_=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Rd;const O4=()=>Rd??(Rd=V4());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G4(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function kS(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function B4(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return kS({start(){},async pull(t){const{done:s,value:r}=await e.next();s?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function RS(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function H4(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z4=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MS=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function yp(n,e,t){return MS(),new File(n,e??"unknown_file",t)}function F4(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const q4=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DS=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",K4=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&DS(n),$4=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function Y4(n,e,t){if(MS(),n=await n,K4(n))return n instanceof File?n:yp([await n.arrayBuffer()],n.name);if($4(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),yp(await $p(r),e,t)}const s=await $p(n);if(e||(e=F4(n)),!(t!=null&&t.type)){const r=s.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return yp(s,e,t)}async function $p(n){var e,t,s,r,o;let c=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)c.push(n);else if(DS(n))c.push(n instanceof Blob?n:await n.arrayBuffer());else if(q4(n))try{for(var f=!0,p=ti(n),m;m=await p.next(),e=m.done,!e;f=!0){r=m.value,f=!1;const v=r;c.push(...await $p(v))}}catch(v){t={error:v}}finally{try{!f&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}else{const v=(o=n==null?void 0:n.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${J4(n)}`)}return c}function J4(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PS{constructor(e){this._client=e}}PS._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LS(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Y_=Object.freeze(Object.create(null)),Q4=(n=LS)=>(function(t,...s){if(t.length===1)return t[0];let r=!1;const o=[],c=t.reduce((v,_,T)=>{var A,C,D;/[?#]/.test(_)&&(r=!0);const N=s[T];let L=(r?encodeURIComponent:n)(""+N);return T!==s.length&&(N==null||typeof N=="object"&&N.toString===((D=Object.getPrototypeOf((C=Object.getPrototypeOf((A=N.hasOwnProperty)!==null&&A!==void 0?A:Y_))!==null&&C!==void 0?C:Y_))===null||D===void 0?void 0:D.toString))&&(L=N+"",o.push({start:v.length+_.length,length:L.length,error:`Value of type ${Object.prototype.toString.call(N).slice(8,-1)} is not a valid path parameter`})),v+_+(T===s.length?"":L)},""),f=c.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=p.exec(f))!==null;)o.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(o.sort((v,_)=>v.start-_.start),o.length>0){let v=0;const _=o.reduce((T,A)=>{const C=" ".repeat(A.start-v),D="^".repeat(A.length);return v=A.start+A.length,T+C+D},"");throw new Hs(`Path parameters result in path with invalid segments:
${o.map(T=>T.error).join(`
`)}
${c}
${_}`)}return c}),Md=Q4(LS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class US extends PS{create(e,t){var s;const{api_version:r=this._client.apiVersion}=e,o=lf(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Hs("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Hs("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Md`/${r}/interactions`,Object.assign(Object.assign({body:o},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(Md`/${r}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(Md`/${r}/interactions/${e}/cancel`,s)}get(e,t={},s){var r;const o=t??{},{api_version:c=this._client.apiVersion}=o,f=lf(o,["api_version"]);return this._client.get(Md`/${c}/interactions/${e}`,Object.assign(Object.assign({query:f},s),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}US._key=Object.freeze(["interactions"]);class VS extends US{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W4(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let s=0;for(const r of n)t.set(r,s),s+=r.length;return t}let Dd;function P0(n){let e;return(Dd??(e=new globalThis.TextEncoder,Dd=e.encode.bind(e)))(n)}let Pd;function J_(n){let e;return(Pd??(e=new globalThis.TextDecoder,Pd=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?P0(e):e;this.buffer=W4([this.buffer,t]);const s=[];let r;for(;(r=X4(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(J_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,c=J_(this.buffer.subarray(0,o));s.push(c),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Gf.NEWLINE_CHARS=new Set([`
`,"\r"]);Gf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function X4(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Z4(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cf={off:0,error:200,warn:300,info:400,debug:500},Q_=(n,e,t)=>{if(n){if(M4(cf,n))return n;zn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(cf))}`)}};function Mc(){}function Ld(n,e,t){return!e||cf[n]>cf[t]?Mc:e[n].bind(e)}const eD={error:Mc,warn:Mc,info:Mc,debug:Mc};let W_=new WeakMap;function zn(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return eD;const r=W_.get(t);if(r&&r[0]===s)return r[1];const o={error:Ld("error",t,s),warn:Ld("warn",t,s),info:Ld("info",t,s),debug:Ld("debug",t,s)};return W_.set(t,[s,o]),o}const qa=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rl{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let r=!1;const o=s?zn(s):console;function c(){return ei(this,arguments,function*(){var p,m,v,_;if(r)throw new Hs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,C=ti(tD(e,t)),D;D=yield Je(C.next()),p=D.done,!p;A=!0){_=D.value,A=!1;const N=_;if(!T)if(N.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Je(JSON.parse(N.data))}catch(L){throw o.error("Could not parse message into JSON:",N.data),o.error("From chunk:",N.raw),L}}}catch(N){m={error:N}}finally{try{!A&&!p&&(v=C.return)&&(yield Je(v.call(C)))}finally{if(m)throw m.error}}T=!0}catch(N){if(zp(N))return yield Je(void 0);throw N}finally{T||t.abort()}})}return new rl(c,t,s)}static fromReadableStream(e,t,s){let r=!1;function o(){return ei(this,arguments,function*(){var p,m,v,_;const T=new Gf,A=RS(e);try{for(var C=!0,D=ti(A),N;N=yield Je(D.next()),p=N.done,!p;C=!0){_=N.value,C=!1;const L=_;for(const O of T.decode(L))yield yield Je(O)}}catch(L){m={error:L}}finally{try{!C&&!p&&(v=D.return)&&(yield Je(v.call(D)))}finally{if(m)throw m.error}}for(const L of T.flush())yield yield Je(L)})}function c(){return ei(this,arguments,function*(){var p,m,v,_;if(r)throw new Hs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,C=ti(o()),D;D=yield Je(C.next()),p=D.done,!p;A=!0){_=D.value,A=!1;const N=_;T||N&&(yield yield Je(JSON.parse(N)))}}catch(N){m={error:N}}finally{try{!A&&!p&&(v=C.return)&&(yield Je(v.call(C)))}finally{if(m)throw m.error}}T=!0}catch(N){if(zp(N))return yield Je(void 0);throw N}finally{T||t.abort()}})}return new rl(c,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),r=o=>({next:()=>{if(o.length===0){const c=s.next();e.push(c),t.push(c)}return o.shift()}});return[new rl(()=>r(e),this.controller,this.client),new rl(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return kS({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:o}=await t.next();if(o)return s.close();const c=P0(JSON.stringify(r)+`
`);s.enqueue(c)}catch(r){s.error(r)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function tD(n,e){return ei(this,arguments,function*(){var s,r,o,c;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Hs("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Hs("Attempted to iterate over a response with no body");const f=new sD,p=new Gf,m=RS(n.body);try{for(var v=!0,_=ti(nD(m)),T;T=yield Je(_.next()),s=T.done,!s;v=!0){c=T.value,v=!1;const A=c;for(const C of p.decode(A)){const D=f.decode(C);D&&(yield yield Je(D))}}}catch(A){r={error:A}}finally{try{!v&&!s&&(o=_.return)&&(yield Je(o.call(_)))}finally{if(r)throw r.error}}for(const A of p.flush()){const C=f.decode(A);C&&(yield yield Je(C))}})}function nD(n){return ei(this,arguments,function*(){var t,s,r,o;let c=new Uint8Array;try{for(var f=!0,p=ti(n),m;m=yield Je(p.next()),t=m.done,!t;f=!0){o=m.value,f=!1;const v=o;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?P0(v):v;let T=new Uint8Array(c.length+_.length);T.set(c),T.set(_,c.length),c=T;let A;for(;(A=Z4(c))!==-1;)yield yield Je(c.slice(0,A)),c=c.slice(A)}}catch(v){s={error:v}}finally{try{!f&&!t&&(r=p.return)&&(yield Je(r.call(p)))}finally{if(s)throw s.error}}c.length>0&&(yield yield Je(c))})}class sD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,r]=iD(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function iD(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function rD(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:r,startTime:o}=e,c=await(async()=>{var f;if(e.options.stream)return zn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):rl.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const p=t.headers.get("content-type"),m=(f=p==null?void 0:p.split(";")[0])===null||f===void 0?void 0:f.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await t.json():await t.text()})();return zn(n).debug(`[${s}] response parsed`,qa({retryOfRequestLogID:r,url:t.url,status:t.status,body:c,durationMs:Date.now()-o})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L0 extends Promise{constructor(e,t,s=rD){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new L0(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jS=Symbol("brand.privateNullableHeaders");function*aD(n){if(!n)return;if(jS in n){const{values:s,nulls:r}=n;yield*s.entries();for(const o of r)yield[o,null];return}let e=!1,t;n instanceof Headers?t=n.entries():q_(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=q_(s[1])?s[1]:[s[1]];let c=!1;for(const f of o)f!==void 0&&(e&&!c&&(c=!0,yield[r,null]),yield[r,f])}}const Rc=n=>{const e=new Headers,t=new Set;for(const s of n){const r=new Set;for(const[o,c]of aD(s)){const f=o.toLowerCase();r.has(f)||(e.delete(o),r.add(f)),c===null?(e.delete(o),t.add(f)):(e.append(o,c),t.delete(f))}}return{[jS]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xp=n=>{var e,t,s,r,o,c;if(typeof globalThis.process<"u")return(s=(t=(e=MC)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(c=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,n))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var OS;class Bf{constructor(e){var t,s,r,o,c,f,p,{baseURL:m=xp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=xp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:_="v1beta"}=e,T=lf(e,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:v,apiVersion:_},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(s=A.timeout)!==null&&s!==void 0?s:Bf.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const C="warn";this.logLevel=C,this.logLevel=(c=(o=Q_(A.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:Q_(xp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:C,this.fetchOptions=A.fetchOptions,this.maxRetries=(f=A.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(p=A.fetch)!==null&&p!==void 0?p:G4(),this.encoder=z4,this._options=A,this.apiKey=v,this.apiVersion=_,this.clientAdapter=A.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Rc([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Rc([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Rc([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new Hs(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Zo}`}defaultIdempotencyKey(){return`stainless-node-retry-${w4()}`}makeStatusError(e,t,s,r){return $n.generate(e,t,s,r)}buildURL(e,t,s){const r=!this.baseURLOverridden()&&s||this.baseURL,o=C4(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return R4(c)||(t=Object.assign(Object.assign({},c),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new L0(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var r,o,c;const f=await e,p=(r=f.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=p),await this.prepareOptions(f);const{req:m,url:v,timeout:_}=await this.buildRequest(f,{retryCount:p-t});await this.prepareRequest(m,{url:v,options:f});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=s===void 0?"":`, retryOf: ${s}`,C=Date.now();if(zn(this).debug(`[${T}] sending request`,qa({retryOfRequestLogID:s,method:f.method,url:v,options:f,headers:m.headers})),!((o=f.signal)===null||o===void 0)&&o.aborted)throw new qp;const D=new AbortController,N=await this.fetchWithTimeout(v,m,_,D).catch(Fp),L=Date.now();if(N instanceof globalThis.Error){const B=`retrying, ${t} attempts remaining`;if(!((c=f.signal)===null||c===void 0)&&c.aborted)throw new qp;const $=zp(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(t)return zn(this).info(`[${T}] connection ${$?"timed out":"failed"} - ${B}`),zn(this).debug(`[${T}] connection ${$?"timed out":"failed"} (${B})`,qa({retryOfRequestLogID:s,url:v,durationMs:L-C,message:N.message})),this.retryRequest(f,t,s??T);throw zn(this).info(`[${T}] connection ${$?"timed out":"failed"} - error; no more retries left`),zn(this).debug(`[${T}] connection ${$?"timed out":"failed"} (error; no more retries left)`,qa({retryOfRequestLogID:s,url:v,durationMs:L-C,message:N.message})),$?new _S:new Of({cause:N})}const O=`[${T}${A}] ${m.method} ${v} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${L-C}ms`;if(!N.ok){const B=await this.shouldRetry(N);if(t&&B){const k=`retrying, ${t} attempts remaining`;return await H4(N.body),zn(this).info(`${O} - ${k}`),zn(this).debug(`[${T}] response error (${k})`,qa({retryOfRequestLogID:s,url:N.url,status:N.status,headers:N.headers,durationMs:L-C})),this.retryRequest(f,t,s??T,N.headers)}const $=B?"error; no more retries left":"error; not retryable";zn(this).info(`${O} - ${$}`);const W=await N.text().catch(k=>Fp(k).message),se=P4(W),R=se?void 0:W;throw zn(this).debug(`[${T}] response error (${$})`,qa({retryOfRequestLogID:s,url:N.url,status:N.status,headers:N.headers,message:R,durationMs:Date.now()-C})),this.makeStatusError(N.status,se,R,N.headers)}return zn(this).info(O),zn(this).debug(`[${T}] response start`,qa({retryOfRequestLogID:s,url:N.url,status:N.status,headers:N.headers,durationMs:L-C})),{response:N,options:f,controller:D,requestLogID:T,retryOfRequestLogID:s,startTime:C}}async fetchWithTimeout(e,t,s,r){const o=t||{},{signal:c,method:f}=o,p=lf(o,["signal","method"]);c&&c.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),s),v=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,_=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),p);f&&(_.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(m)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,r){var o;let c;const f=r==null?void 0:r.get("retry-after-ms");if(f){const m=parseFloat(f);Number.isNaN(m)||(c=m)}const p=r==null?void 0:r.get("retry-after");if(p&&!c){const m=parseFloat(p);Number.isNaN(m)?c=Date.parse(p)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(t,m)}return await L4(c),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const o=t-e,c=Math.min(.5*Math.pow(2,o),8),f=1-Math.random()*.25;return c*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,r,o;const c=Object.assign({},e),{method:f,path:p,query:m,defaultBaseURL:v}=c,_=this.buildURL(p,m,v);"timeout"in c&&D4("timeout",c.timeout),c.timeout=(s=c.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:c}),C=await this.buildHeaders({options:e,method:f,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:C},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=c.fetchOptions)!==null&&o!==void 0?o:{}),url:_,timeout:c.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:r}){let o={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let f=Rc([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),O4()),this._options.defaultHeaders,s,e.headers,c]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Rc([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:B4(e)}:this.encoder({body:e,headers:s})}}Bf.DEFAULT_TIMEOUT=6e4;class bn extends Bf{constructor(){super(...arguments),this.interactions=new VS(this)}}OS=bn;bn.GeminiNextGenAPIClient=OS;bn.GeminiNextGenAPIClientError=Hs;bn.APIError=$n;bn.APIConnectionError=Of;bn.APIConnectionTimeoutError=_S;bn.APIUserAbortError=qp;bn.NotFoundError=AS;bn.ConflictError=wS;bn.RateLimitError=CS;bn.BadRequestError=TS;bn.AuthenticationError=ES;bn.InternalServerError=IS;bn.PermissionDeniedError=SS;bn.UnprocessableEntityError=NS;bn.toFile=Y4;bn.Interactions=VS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oD(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function lD(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function cD(n,e){const t={},s=h(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function uD(n,e){const t={},s=h(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function dD(n,e,t){const s={};if(h(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=h(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&g(e,["displayName"],r),h(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=h(n,["epochCount"]);e!==void 0&&o!=null&&g(e,["tuningTask","hyperparameters","epochCount"],o);const c=h(n,["learningRateMultiplier"]);if(c!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),h(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=h(n,["batchSize"]);e!==void 0&&f!=null&&g(e,["tuningTask","hyperparameters","batchSize"],f);const p=h(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function fD(n,e,t){const s={};let r=h(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const A=h(n,["validationDataset"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec"],X_(A))}else if(r==="PREFERENCE_TUNING"){const A=h(n,["validationDataset"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec"],X_(A))}const o=h(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&g(e,["tunedModelDisplayName"],o);const c=h(n,["description"]);e!==void 0&&c!=null&&g(e,["description"],c);let f=h(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const A=h(n,["epochCount"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(f==="PREFERENCE_TUNING"){const A=h(n,["epochCount"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let p=h(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const A=h(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(p==="PREFERENCE_TUNING"){const A=h(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let m=h(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=h(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(m==="PREFERENCE_TUNING"){const A=h(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let v=h(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=h(n,["adapterSize"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(v==="PREFERENCE_TUNING"){const A=h(n,["adapterSize"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(h(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=h(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=h(n,["beta"]);return e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function hD(n,e){const t={},s=h(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const r=h(n,["preTunedModel"]);r!=null&&g(t,["preTunedModel"],r);const o=h(n,["trainingDataset"]);o!=null&&SD(o);const c=h(n,["config"]);return c!=null&&dD(c,t),t}function mD(n,e){const t={},s=h(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const r=h(n,["preTunedModel"]);r!=null&&g(t,["preTunedModel"],r);const o=h(n,["trainingDataset"]);o!=null&&AD(o,t,e);const c=h(n,["config"]);return c!=null&&fD(c,t,e),t}function pD(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function gD(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function yD(n,e,t){const s={},r=h(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const o=h(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const c=h(n,["filter"]);return e!==void 0&&c!=null&&g(e,["_query","filter"],c),s}function xD(n,e,t){const s={},r=h(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const o=h(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const c=h(n,["filter"]);return e!==void 0&&c!=null&&g(e,["_query","filter"],c),s}function vD(n,e){const t={},s=h(n,["config"]);return s!=null&&yD(s,t),t}function bD(n,e){const t={},s=h(n,["config"]);return s!=null&&xD(s,t),t}function _D(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const r=h(n,["nextPageToken"]);r!=null&&g(t,["nextPageToken"],r);const o=h(n,["tunedModels"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>GS(f))),g(t,["tuningJobs"],c)}return t}function TD(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const r=h(n,["nextPageToken"]);r!=null&&g(t,["nextPageToken"],r);const o=h(n,["tuningJobs"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>Yp(f))),g(t,["tuningJobs"],c)}return t}function ED(n,e){const t={},s=h(n,["name"]);s!=null&&g(t,["model"],s);const r=h(n,["name"]);return r!=null&&g(t,["endpoint"],r),t}function SD(n,e){const t={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=h(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>o)),g(t,["examples","examples"],r)}return t}function AD(n,e,t){const s={};let r=h(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=h(n,["gcsUri"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=h(n,["gcsUri"]);e!==void 0&&c!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let o=h(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const c=h(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(o==="PREFERENCE_TUNING"){const c=h(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(h(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function GS(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const r=h(n,["name"]);r!=null&&g(t,["name"],r);const o=h(n,["state"]);o!=null&&g(t,["state"],nS(o));const c=h(n,["createTime"]);c!=null&&g(t,["createTime"],c);const f=h(n,["tuningTask","startTime"]);f!=null&&g(t,["startTime"],f);const p=h(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const m=h(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=h(n,["description"]);v!=null&&g(t,["description"],v);const _=h(n,["baseModel"]);_!=null&&g(t,["baseModel"],_);const T=h(n,["_self"]);return T!=null&&g(t,["tunedModel"],ED(T)),t}function Yp(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const r=h(n,["name"]);r!=null&&g(t,["name"],r);const o=h(n,["state"]);o!=null&&g(t,["state"],nS(o));const c=h(n,["createTime"]);c!=null&&g(t,["createTime"],c);const f=h(n,["startTime"]);f!=null&&g(t,["startTime"],f);const p=h(n,["endTime"]);p!=null&&g(t,["endTime"],p);const m=h(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=h(n,["error"]);v!=null&&g(t,["error"],v);const _=h(n,["description"]);_!=null&&g(t,["description"],_);const T=h(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const A=h(n,["tunedModel"]);A!=null&&g(t,["tunedModel"],A);const C=h(n,["preTunedModel"]);C!=null&&g(t,["preTunedModel"],C);const D=h(n,["supervisedTuningSpec"]);D!=null&&g(t,["supervisedTuningSpec"],D);const N=h(n,["preferenceOptimizationSpec"]);N!=null&&g(t,["preferenceOptimizationSpec"],N);const L=h(n,["tuningDataStats"]);L!=null&&g(t,["tuningDataStats"],L);const O=h(n,["encryptionSpec"]);O!=null&&g(t,["encryptionSpec"],O);const B=h(n,["partnerModelTuningSpec"]);B!=null&&g(t,["partnerModelTuningSpec"],B);const $=h(n,["customBaseModel"]);$!=null&&g(t,["customBaseModel"],$);const W=h(n,["experiment"]);W!=null&&g(t,["experiment"],W);const se=h(n,["labels"]);se!=null&&g(t,["labels"],se);const R=h(n,["outputUri"]);R!=null&&g(t,["outputUri"],R);const M=h(n,["pipelineJob"]);M!=null&&g(t,["pipelineJob"],M);const k=h(n,["serviceAccount"]);k!=null&&g(t,["serviceAccount"],k);const V=h(n,["tunedModelDisplayName"]);V!=null&&g(t,["tunedModelDisplayName"],V);const U=h(n,["veoTuningSpec"]);return U!=null&&g(t,["veoTuningSpec"],U),t}function wD(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const r=h(n,["name"]);r!=null&&g(t,["name"],r);const o=h(n,["metadata"]);o!=null&&g(t,["metadata"],o);const c=h(n,["done"]);c!=null&&g(t,["done"],c);const f=h(n,["error"]);return f!=null&&g(t,["error"],f),t}function X_(n,e){const t={},s=h(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const r=h(n,["vertexDatasetResource"]);return r!=null&&g(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ND extends cr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ro(sr.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},t),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),o=await this.tuneMldevInternal(r);let c="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?c=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(c=o.name.split("/operations/")[0]),{name:c,state:Up.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=gD(e);return f=we("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>Yp(v))}else{const m=pD(e);return f=we("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>GS(v))}}async listInternal(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=bD(e);return f=we("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=TD(v),T=new S_;return Object.assign(T,_),T})}else{const m=vD(e);return f=we("tunedModels",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=_D(v),T=new S_;return Object.assign(T,_),T})}}async cancel(e){var t,s,r,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=lD(e);return f=we("{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=uD(v),T=new A_;return Object.assign(T,_),T})}else{const m=oD(e);return f=we("{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=cD(v),T=new A_;return Object.assign(T,_),T})}}async tuneInternal(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI()){const f=mD(e,e);return o=we("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),r.then(p=>Yp(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let r,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=hD(e);return o=we("tunedModels",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),r.then(p=>wD(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CD{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ID=1024*1024*8,kD=3,RD=1e3,MD=2,uf="x-goog-upload-status";async function DD(n,e,t){var s;const r=await BS(n,e,t),o=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[uf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function PD(n,e,t){var s;const r=await BS(n,e,t),o=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[uf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=QE(o),f=new C0;return Object.assign(f,c),f}async function BS(n,e,t){var s,r;let o=0,c=0,f=new Vp(new Response),p="upload";for(o=n.size;c<o;){const m=Math.min(ID,o-c),v=n.slice(c,c+m);c+m>=o&&(p+=", finalize");let _=0,T=RD;for(;_<kD&&(f=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((s=f==null?void 0:f.headers)===null||s===void 0)&&s[uf]));)_++,await UD(T),T=T*MD;if(c+=m,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[uf])!=="active")break;if(o<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function LD(n){return{size:n.size,type:n.type}}function UD(n){return new Promise(e=>setTimeout(e,n))}class VD{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await DD(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await PD(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await LD(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jD{create(e,t,s){return new OD(e,t,s)}}class OD{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z_="x-goog-api-key";class GD{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(Z_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Z_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BD="gl-node/";class HD{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new bn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=UC(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new GD(this.apiKey);this.apiClient=new LM({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:BD+"web",uploader:new VD,downloader:new CD}),this.models=new e4(this.apiClient),this.live=new YM(this.apiClient,r,new jD),this.batches=new dk(this.apiClient),this.chats=new Kk(this.models,this.apiClient),this.caches=new zk(this.apiClient),this.files=new n2(this.apiClient),this.operations=new t4(this.apiClient),this.authTokens=new y4(this.apiClient),this.tunings=new ND(this.apiClient),this.fileSearchStores=new A4(this.apiClient)}}const zD=new HD({apiKey:"PLACEHOLDER_API_KEY"});function eT(n){const e=[...n];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}const HS={type:Se.OBJECT,properties:{id:{type:Se.STRING},type:{type:Se.STRING,enum:["multiple_choice","short_answer","long_text"]},content:{type:Se.STRING},options:{type:Se.ARRAY,items:{type:Se.STRING}},correctAnswer:{type:Se.STRING},tkpPoints:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{option:{type:Se.STRING},points:{type:Se.INTEGER}}}},explanation:{type:Se.STRING},shortcut:{type:Se.STRING},metadata:{type:Se.OBJECT,properties:{difficulty:{type:Se.STRING,enum:["Easy","Medium","Hard","HOTS"]},idealTimeSeconds:{type:Se.INTEGER},topic:{type:Se.STRING},subtest:{type:Se.STRING},trapPattern:{type:Se.STRING}}}},required:["id","type","content","correctAnswer","explanation","metadata"]},FD={type:Se.OBJECT,properties:{questions:{type:Se.ARRAY,items:HS}},required:["questions"]};async function wi(n,e,t){const s="gemini-3-flash-preview",r={temperature:.85,topP:.95,topK:40};e&&(r.responseMimeType="application/json",r.responseSchema=e);const o=[];t&&o.push({inlineData:{mimeType:"application/pdf",data:t}}),o.push({text:n});try{const f=(await zD.models.generateContent({model:s,contents:{role:"user",parts:o},config:r})).text;if(!f)throw new Error("Empty response from AI");if(e)try{let p=f.trim();return p.startsWith("```json")?p=p.replace(/^```json\n?/,"").replace(/\n?```$/,""):p.startsWith("```")&&(p=p.replace(/^```\n?/,"").replace(/\n?```$/,"")),JSON.parse(p)}catch(p){console.error("JSON Parse Error",p);const m=f.match(/\{[\s\S]*\}|\[[\s\S]*\]/);return m?JSON.parse(m[0]):f}return f}catch(c){throw console.error("Gemini API Error:",c),c}}function qD(n){return n.id||(n.id=`q-${Math.random().toString(36).substr(2,9)}`),n.type==="multiple_choice"&&((!n.options||n.options.length===0)&&(n.options=["Option A","Option B","Option C","Option D","Option E"]),n.tkpPoints&&n.tkpPoints.length>0,n.options=eT(n.options)),n}const Fn=async(n,e,t,s=5,r=[],o,c,f)=>{let p="",m;const v="CRITICAL: DETECT the language of the input material/context. The generated questions/answers MUST BE in the SAME LANGUAGE as the input (Bahasa Indonesia mostly).";let _=FD;if(e==="GENERAL"&&c){const C=t,D=C.type==="topic"?`Topic: ${C.content}`:"Material Content";C.type==="pdf"&&(m=C.content);const N=C.difficultyPreference||"MEDIUM",L=`DIFFICULTY LEVEL: ${N}. ${N==="HARD"?"Use complex analysis/HOTS.":N==="EASY"?"Use straightforward recall.":""}`;c==="ACTIVE_RECALL"?p=`Create ${s} Active Recall questions (Short Answer format) based on this: ${D}. 
          ${v} ${L}
          Questions must be specific and require recall of key facts/concepts.`:c==="PBL"?p=`Create ${s} Problem-Based Learning scenarios (Case Study).
          ${v} ${L}
          Format: 'long_text' or 'multiple_choice'.
          Based on: ${D}. 
          Each question should be a realistic scenario requiring application of the concept.`:p=`Create ${s} practice questions based on: ${D}. ${v} ${L}`,C.type==="text"&&(p+=`

CONTENT: ${C.content}`)}else{let C="";if(f?(C=`CONTEXT: ${e} - ${o||""}. DIFFICULTY: ${f}.`,f==="HOTS"&&(C+=" QUESTIONS MUST BE ADVANCED AND DIFFICULT (High Order Thinking Skills). Distractors/options must be plausible and tricky. Avoid easy questions. Questions must require analysis, evaluation, or creation.")):e==="SKD"&&o?C=`CONTEXT: SKD ${o}. DIFFICULTY: STANDARD TO HOTS.`:e==="UTBK"?C="CONTEXT: UTBK SNBT 2025. DIFFICULTY: ADAPTIVE (HOTS).":e==="TPA"?C="CONTEXT: TPA (Tes Potensi Akademik) & TBI. High Logic Requirement.":e==="PSIKOTEST"?C=`
          CONTEXT: PROFESSIONAL PSYCHOMETRIC TEST (High IQ & Logical Reasoning).
          Generate ${s} questions distributed among these 4 subtest types:

          1. **Number Series (Deret Angka)**: 
             - Create complex sequences (e.g., Fibonacci, multi-level differences, alternating patterns).
             - Example: 2, 5, 10, 17, ... (n^2 + 1).

          2. **Verbal Analogy (Analogi Verbal)**:
             - Create 'Word A : Word B = Word C : ?' questions.
             - Relationships should be subtle (e.g., degree, cause-effect, antonyms).
             - Example: "Api : Panas = Es : Dingin" (Cause-Effect/Property).
          
          3. **Formal Logic (Silogisme)**:
             - Create syllogisms with 2 or 3 premises.
             - Use 'All', 'Some', 'None' quantifiers.
             - Ensure options have logical distractors.
             - Example: "Semua A adalah B. Sebagian B adalah C. Maka..."
          
          4. **Figural/Spatial (Tes Spasial)**:
             - Since this is text-based, describe the pattern in text format.
             - E.g., "Image A rotates 90 degrees clockwise. Image B is mirror of A. Image C is..."
          
          Instruction: "Options must be tricky. Explanation must be clear step-by-step logic."
          `:e==="INTERVIEW"?(C="CONTEXT: JOB/SCHOOL ADMISSION INTERVIEW.",_={type:Se.OBJECT,properties:{questions:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{id:{type:Se.STRING},type:{type:Se.STRING,enum:["long_text"]},content:{type:Se.STRING},explanation:{type:Se.STRING},metadata:{type:Se.OBJECT,properties:{topic:{type:Se.STRING}}}},required:["content","type"]}}}}):C="Standard difficulty.",e==="INTERVIEW")p=`Roleplay Task: Act as a professional HR Interviewer.
        Context: ${t}.
        Generate ${s} distinct interview questions. 
        Style: Conversational, direct, and engaging.
        Questions should range from introduction to behavioral/situational.
        Metadata subtest: "Interview".`;else{const D=`
            Generate ${s} questions.
            ${C}
            MANDATORY: Provide a DETAILED 'explanation' for the answer.
            MANDATORY METADATA:
            - idealTimeSeconds: Realistic time (e.g. 60s for Logic, 30s for Verbal).
            - subtest: Use specific names like "Deret Angka", "Analogi Verbal", "Silogisme", "Tes Spasial".
        `,N=typeof t=="string"&&t.toUpperCase().includes("TKP")||e==="SKD"&&f==="TKP";let L="";N&&(L=`
           CRITICAL RULES FOR TKP (Tes Karakteristik Pribadi):
           1. **AMBIGUITY & CONFUSION**: The distinction between the 5-point and 4-point answers MUST be very subtle.
           2. **SCORING LOGIC**:
              - 5 Points: Best answer (professional, proactive, leadership).
              - 4 Points: Good answer (standard procedure).
              - 3 Points: Neutral.
              - 1-2 Points: Negative.
           5. **FORMAT**: Provide 'tkpPoints' list mapping EACH option to a score 1-5.
           `),n===Ye.WEAKNESS?p=`WEAKNESS ATTACK MODE. User weak in: ${r.join(", ")}. ${C} ${L}`:n===Ye.ACTIVE_RECALL?p=`ACTIVE RECALL. Type: "short_answer". ${C}`:p=`TRY OUT / PRACTICE.
            Context: ${e} - ${JSON.stringify(t)}.
            ${D}
            ${L}`}}return((await wi(p,_,m)).questions||[]).filter(C=>!!C).map(C=>{const D=qD(C);return e==="INTERVIEW"&&(D.type="long_text",D.options=[]),D})},KD=async(n,e,t)=>{const s={type:Se.OBJECT,properties:{score:{type:Se.INTEGER,description:"Score from 0 to 100"},isCorrect:{type:Se.BOOLEAN,description:"True if score > 70"},feedback:{type:Se.STRING,description:"Constructive feedback"}},required:["score","isCorrect","feedback"]},r=`Evaluate this answer. 
  Question: ${n}
  Correct Answer / Key Concept: ${e}
  User Answer: ${t}
  
  Provide a score (0-100), boolean correctness, and feedback.`;return wi(r,s)},$D=async n=>{const e=`The user is weak in these topics: ${n.join(", ")}. Provide a concise, actionable study plan (3 paragraphs max) to improve.`;return wi(e)},YD=async(n,e)=>{const t={type:Se.OBJECT,properties:{score:{type:Se.INTEGER},feedback:{type:Se.STRING},improvedAnswer:{type:Se.STRING},keyPointsCovered:{type:Se.ARRAY,items:{type:Se.STRING}},toneAnalysis:{type:Se.STRING}},required:["score","feedback","improvedAnswer","toneAnalysis"]},s=`Evaluate this job interview answer given by a candidate.
  Question: ${n}
  Candidate Answer: ${e}
  
  Act as a senior HR manager. Critique the tone, content, and structure.
  `;return wi(s,t)},JD=async(n,e)=>{const t={type:Se.OBJECT,properties:{understandingScore:{type:Se.INTEGER},simplificationQuality:{type:Se.STRING},missingConcepts:{type:Se.ARRAY,items:{type:Se.STRING}},correction:{type:Se.STRING}},required:["understandingScore","simplificationQuality","correction"]},s=`Evaluate this Feynman Technique explanation. The user is trying to explain "${n}" to a 5-year old.
  Explanation: ${e}`;return wi(s,t)},QD=async n=>n.type==="pdf"&&n.content?await wi("Extract and summarize the main text content from this PDF for study purposes. Ignore headers/footers.",void 0,n.content):n.content,WD=async(n,e)=>{const t=`Context: University Thesis (Skripsi). Topic: ${n}. Task: ${e}. Provide detailed output.`;return wi(t)},XD=async n=>{const e={type:Se.OBJECT,properties:{flashcards:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{id:{type:Se.STRING},front:{type:Se.STRING},back:{type:Se.STRING}},required:["front","back"]}}}},t=`Create 10 flashcards based on this material: ${n.extractedText||n.content}`;return(await wi(t,e)).flashcards},ZD=async n=>{const e={type:Se.OBJECT,properties:{label:{type:Se.STRING},children:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{label:{type:Se.STRING},children:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{label:{type:Se.STRING}}}}}}}}},t=`Create a hierarchical mind map structure (JSON) for the topic: ${n.title||n.content.substring(0,50)}. Base it on the content.`;return wi(t,e)},eP=async(n,e,t)=>{const s={type:Se.OBJECT,properties:{topic:{type:Se.STRING},summary:{type:Se.STRING},keyPoints:{type:Se.ARRAY,items:{type:Se.STRING}},question:HS},required:["topic","summary","keyPoints","question"]},r=`Create a Drill Card (Mini Lesson + 1 Question) for ${n} - ${e} ${t?"("+t+")":""}.`;return wi(r,s)},tT=async n=>{const e=Fn(Ye.SIMULATION,"SKD","Tes Wawasan Kebangsaan (TWK)",30,[],n,void 0,"HOTS"),t=Fn(Ye.SIMULATION,"SKD","Tes Intelegensia Umum (TIU)",35,[],n,void 0,"HOTS"),s=Fn(Ye.SIMULATION,"SKD","Tes Karakteristik Pribadi (TKP)",45,[],n,void 0,"TKP"),[r,o,c]=await Promise.all([e,t,s]);return r.forEach(f=>f.metadata.subtest="Tes Wawasan Kebangsaan (TWK)"),o.forEach(f=>f.metadata.subtest="Tes Intelegensia Umum (TIU)"),c.forEach(f=>f.metadata.subtest="Tes Karakteristik Pribadi (TKP)"),[...r,...o,...c]},nT=async()=>{const n=Fn(Ye.SIMULATION,"UTBK","Penalaran Umum (Induktif, Deduktif, Kuantitatif)",30,[],void 0,void 0,"HOTS"),e=Fn(Ye.SIMULATION,"UTBK","Pengetahuan dan Pemahaman Umum",20,[],void 0,void 0,"HOTS"),t=Fn(Ye.SIMULATION,"UTBK","Pemahaman Bacaan dan Menulis",20,[],void 0,void 0,"HOTS"),s=Fn(Ye.SIMULATION,"UTBK","Pengetahuan Kuantitatif",20,[],void 0,void 0,"HOTS"),r=Fn(Ye.SIMULATION,"UTBK","Literasi Bahasa Indonesia",25,[],void 0,void 0,"HOTS"),o=Fn(Ye.SIMULATION,"UTBK","Literasi Bahasa Inggris",25,[],void 0,void 0,"HOTS"),c=Fn(Ye.SIMULATION,"UTBK","Penalaran Matematika",20,[],void 0,void 0,"HOTS"),[f,p,m,v,_,T,A]=await Promise.all([n,e,t,s,r,o,c]);return f.forEach(C=>C.metadata.subtest="Penalaran Umum"),p.forEach(C=>C.metadata.subtest="Pengetahuan dan Pemahaman Umum"),m.forEach(C=>C.metadata.subtest="Pemahaman Bacaan dan Menulis"),v.forEach(C=>C.metadata.subtest="Pengetahuan Kuantitatif"),_.forEach(C=>C.metadata.subtest="Literasi Bahasa Indonesia"),T.forEach(C=>C.metadata.subtest="Literasi Bahasa Inggris"),A.forEach(C=>C.metadata.subtest="Penalaran Matematika"),[...f,...p,...m,...v,..._,...T,...A]},tP=async()=>Fn(Ye.SIMULATION,"TPA","SIMULATION",65,[],void 0,void 0,"HOTS"),nP=async()=>Fn(Ye.SIMULATION,"PSIKOTEST","SIMULATION",40,[],void 0,void 0,"HOTS"),sP=()=>{};var sT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},iP=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[t++];e[s++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[t++],c=n[t++],f=n[t++],p=((r&7)<<18|(o&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const o=n[t++],c=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(o&63)<<6|c&63)}}return e.join("")},FS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const o=n[r],c=r+1<n.length,f=c?n[r+1]:0,p=r+2<n.length,m=p?n[r+2]:0,v=o>>2,_=(o&3)<<4|f>>4;let T=(f&15)<<2|m>>6,A=m&63;p||(A=64,c||(T=64)),s.push(t[v],t[_],t[T],t[A])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(zS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):iP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const o=t[n.charAt(r++)],f=r<n.length?t[n.charAt(r)]:0;++r;const m=r<n.length?t[n.charAt(r)]:64;++r;const _=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||f==null||m==null||_==null)throw new rP;const T=o<<2|f>>4;if(s.push(T),m!==64){const A=f<<4&240|m>>2;if(s.push(A),_!==64){const C=m<<6&192|_;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class rP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aP=function(n){const e=zS(n);return FS.encodeByteArray(e,!0)},df=function(n){return aP(n).replace(/\./g,"")},qS=function(n){try{return FS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=()=>oP().__FIREBASE_DEFAULTS__,cP=()=>{if(typeof process>"u"||typeof sT>"u")return;const n=sT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&qS(n[1]);return e&&JSON.parse(e)},Hf=()=>{try{return sP()||lP()||cP()||uP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},KS=n=>{var e,t;return(t=(e=Hf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},dP=n=>{const e=KS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},$S=()=>{var n;return(n=Hf())==null?void 0:n.config},YS=n=>{var e;return(e=Hf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function JS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[df(JSON.stringify(t)),df(JSON.stringify(c)),""].join(".")}const Vc={};function mP(){const n={prod:[],emulator:[]};for(const e of Object.keys(Vc))Vc[e]?n.emulator.push(e):n.prod.push(e);return n}function pP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let iT=!1;function QS(n,e){if(typeof window>"u"||typeof document>"u"||!Al(window.location.host)||Vc[n]===e||Vc[n]||iT)return;Vc[n]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",o=mP().prod.length>0;function c(){const T=document.getElementById(s);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,A){T.setAttribute("width","24"),T.setAttribute("id",A),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{iT=!0,c()},T}function v(T,A){T.setAttribute("id",A),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=pP(s),A=t("text"),C=document.getElementById(A)||document.createElement("span"),D=t("learnmore"),N=document.getElementById(D)||document.createElement("a"),L=t("preprendIcon"),O=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const B=T.element;f(B),v(N,D);const $=m();p(O,L),B.append(O,C,N,$),document.body.appendChild(B)}o?(C.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())}function yP(){var e;const n=(e=Hf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function bP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _P(){const n=Un();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function TP(){return!yP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EP(){try{return typeof indexedDB=="object"}catch{return!1}}function SP(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="FirebaseError";class dr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=AP,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eu.prototype.create)}}class eu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],c=o?wP(o,s):"Error",f=`${this.serviceName}: ${c} (${r}).`;return new dr(r,f,s)}}function wP(n,e){return n.replace(NP,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const NP=/\{\$([^}]+)}/g;function CP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Za(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const o=n[r],c=e[r];if(rT(o)&&rT(c)){if(!Za(o,c))return!1}else if(o!==c)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function rT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function IP(n,e){const t=new kP(n,e);return t.subscribe.bind(t)}class kP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let r;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");RP(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:s},r.next===void 0&&(r.next=vp),r.error===void 0&&(r.error=vp),r.complete===void 0&&(r.complete=vp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function vp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(n){return n&&n._delegate?n._delegate:n}class eo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new fP;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PP(e))try{this.getOrInitializeService({instanceIdentifier:Ka})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});s.resolve(o)}catch{}}}}clearInstance(e=Ka){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ka){return this.instances.has(e)}getOptions(e=Ka){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[o,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(o);s===f&&c.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:DP(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ka){return this.component?this.component.multipleInstances?e:Ka:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DP(n){return n===Ka?void 0:n}function PP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new MP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ct||(ct={}));const UP={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},VP=ct.INFO,jP={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},OP=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=jP[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class U0{constructor(e){this.name=e,this._logLevel=VP,this._logHandler=OP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const GP=(n,e)=>e.some(t=>n instanceof t);let aT,oT;function BP(){return aT||(aT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HP(){return oT||(oT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WS=new WeakMap,Jp=new WeakMap,XS=new WeakMap,bp=new WeakMap,V0=new WeakMap;function zP(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Zr(n.result)),r()},c=()=>{s(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&WS.set(t,n)}).catch(()=>{}),V0.set(e,n),e}function FP(n){if(Jp.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),r()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Jp.set(n,e)}let Qp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Jp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||XS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function qP(n){Qp=n(Qp)}function KP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(_p(this),e,...t);return XS.set(s,e.sort?e.sort():[e]),Zr(s)}:HP().includes(n)?function(...e){return n.apply(_p(this),e),Zr(WS.get(this))}:function(...e){return Zr(n.apply(_p(this),e))}}function $P(n){return typeof n=="function"?KP(n):(n instanceof IDBTransaction&&FP(n),GP(n,BP())?new Proxy(n,Qp):n)}function Zr(n){if(n instanceof IDBRequest)return zP(n);if(bp.has(n))return bp.get(n);const e=$P(n);return e!==n&&(bp.set(n,e),V0.set(e,n)),e}const _p=n=>V0.get(n);function YP(n,e,{blocked:t,upgrade:s,blocking:r,terminated:o}={}){const c=indexedDB.open(n,e),f=Zr(c);return s&&c.addEventListener("upgradeneeded",p=>{s(Zr(c.result),p.oldVersion,p.newVersion,Zr(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{o&&p.addEventListener("close",()=>o()),r&&p.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const JP=["get","getKey","getAll","getAllKeys","count"],QP=["put","add","delete","clear"],Tp=new Map;function lT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Tp.get(e))return Tp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=QP.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||JP.includes(t)))return;const o=async function(c,...f){const p=this.transaction(c,r?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(f.shift())),(await Promise.all([m[t](...f),r&&p.done]))[0]};return Tp.set(e,o),o}qP(n=>({...n,get:(e,t,s)=>lT(e,t)||n.get(e,t,s),has:(e,t)=>!!lT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(XP(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function XP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wp="@firebase/app",cT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new U0("@firebase/app"),ZP="@firebase/app-compat",e6="@firebase/analytics-compat",t6="@firebase/analytics",n6="@firebase/app-check-compat",s6="@firebase/app-check",i6="@firebase/auth",r6="@firebase/auth-compat",a6="@firebase/database",o6="@firebase/data-connect",l6="@firebase/database-compat",c6="@firebase/functions",u6="@firebase/functions-compat",d6="@firebase/installations",f6="@firebase/installations-compat",h6="@firebase/messaging",m6="@firebase/messaging-compat",p6="@firebase/performance",g6="@firebase/performance-compat",y6="@firebase/remote-config",x6="@firebase/remote-config-compat",v6="@firebase/storage",b6="@firebase/storage-compat",_6="@firebase/firestore",T6="@firebase/ai",E6="@firebase/firestore-compat",S6="firebase",A6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="[DEFAULT]",w6={[Wp]:"fire-core",[ZP]:"fire-core-compat",[t6]:"fire-analytics",[e6]:"fire-analytics-compat",[s6]:"fire-app-check",[n6]:"fire-app-check-compat",[i6]:"fire-auth",[r6]:"fire-auth-compat",[a6]:"fire-rtdb",[o6]:"fire-data-connect",[l6]:"fire-rtdb-compat",[c6]:"fire-fn",[u6]:"fire-fn-compat",[d6]:"fire-iid",[f6]:"fire-iid-compat",[h6]:"fire-fcm",[m6]:"fire-fcm-compat",[p6]:"fire-perf",[g6]:"fire-perf-compat",[y6]:"fire-rc",[x6]:"fire-rc-compat",[v6]:"fire-gcs",[b6]:"fire-gcs-compat",[_6]:"fire-fst",[E6]:"fire-fst-compat",[T6]:"fire-vertex","fire-js":"fire-js",[S6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=new Map,N6=new Map,Zp=new Map;function uT(n,e){try{n.container.addComponent(e)}catch(t){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function hl(n){const e=n.name;if(Zp.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;Zp.set(e,n);for(const t of ff.values())uT(t,n);for(const t of N6.values())uT(t,n);return!0}function j0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Xs(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ea=new eu("app","Firebase",C6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ea.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=A6;function ZS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Xp,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw ea.create("bad-app-name",{appName:String(r)});if(t||(t=$S()),!t)throw ea.create("no-options");const o=ff.get(r);if(o){if(Za(t,o.options)&&Za(s,o.config))return o;throw ea.create("duplicate-app",{appName:r})}const c=new LP(r);for(const p of Zp.values())c.addComponent(p);const f=new I6(t,s,c);return ff.set(r,f),f}function eA(n=Xp){const e=ff.get(n);if(!e&&n===Xp&&$S())return ZS();if(!e)throw ea.create("no-app",{appName:n});return e}function ta(n,e,t){let s=w6[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const c=[`Unable to register library "${s}" with version "${e}":`];r&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(c.join(" "));return}hl(new eo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6="firebase-heartbeat-database",R6=1,Fc="firebase-heartbeat-store";let Ep=null;function tA(){return Ep||(Ep=YP(k6,R6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Fc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ea.create("idb-open",{originalErrorMessage:n.message})})),Ep}async function M6(n){try{const t=(await tA()).transaction(Fc),s=await t.objectStore(Fc).get(nA(n));return await t.done,s}catch(e){if(e instanceof dr)ir.warn(e.message);else{const t=ea.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ir.warn(t.message)}}}async function dT(n,e){try{const s=(await tA()).transaction(Fc,"readwrite");await s.objectStore(Fc).put(e,nA(n)),await s.done}catch(t){if(t instanceof dr)ir.warn(t.message);else{const s=ea.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ir.warn(s.message)}}}function nA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=1024,P6=30;class L6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new V6(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=fT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>P6){const c=j6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ir.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=fT(),{heartbeatsToSend:s,unsentEntries:r}=U6(this._heartbeatsCache.heartbeats),o=df(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ir.warn(t),""}}}function fT(){return new Date().toISOString().substring(0,10)}function U6(n,e=D6){const t=[];let s=n.slice();for(const r of n){const o=t.find(c=>c.agent===r.agent);if(o){if(o.dates.push(r.date),hT(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),hT(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class V6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EP()?SP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await M6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return dT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return dT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function hT(n){return df(JSON.stringify({version:2,heartbeats:n})).length}function j6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(n){hl(new eo("platform-logger",e=>new WP(e),"PRIVATE")),hl(new eo("heartbeat",e=>new L6(e),"PRIVATE")),ta(Wp,cT,n),ta(Wp,cT,"esm2020"),ta("fire-js","")}O6("");var G6="firebase",B6="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ta(G6,B6,"app");var mT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var na,sA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,M){function k(){}k.prototype=M.prototype,R.F=M.prototype,R.prototype=new k,R.prototype.constructor=R,R.D=function(V,U,G){for(var j=Array(arguments.length-2),me=2;me<arguments.length;me++)j[me-2]=arguments[me];return M.prototype[U].apply(V,j)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,M,k){k||(k=0);const V=Array(16);if(typeof M=="string")for(var U=0;U<16;++U)V[U]=M.charCodeAt(k++)|M.charCodeAt(k++)<<8|M.charCodeAt(k++)<<16|M.charCodeAt(k++)<<24;else for(U=0;U<16;++U)V[U]=M[k++]|M[k++]<<8|M[k++]<<16|M[k++]<<24;M=R.g[0],k=R.g[1],U=R.g[2];let G=R.g[3],j;j=M+(G^k&(U^G))+V[0]+3614090360&4294967295,M=k+(j<<7&4294967295|j>>>25),j=G+(U^M&(k^U))+V[1]+3905402710&4294967295,G=M+(j<<12&4294967295|j>>>20),j=U+(k^G&(M^k))+V[2]+606105819&4294967295,U=G+(j<<17&4294967295|j>>>15),j=k+(M^U&(G^M))+V[3]+3250441966&4294967295,k=U+(j<<22&4294967295|j>>>10),j=M+(G^k&(U^G))+V[4]+4118548399&4294967295,M=k+(j<<7&4294967295|j>>>25),j=G+(U^M&(k^U))+V[5]+1200080426&4294967295,G=M+(j<<12&4294967295|j>>>20),j=U+(k^G&(M^k))+V[6]+2821735955&4294967295,U=G+(j<<17&4294967295|j>>>15),j=k+(M^U&(G^M))+V[7]+4249261313&4294967295,k=U+(j<<22&4294967295|j>>>10),j=M+(G^k&(U^G))+V[8]+1770035416&4294967295,M=k+(j<<7&4294967295|j>>>25),j=G+(U^M&(k^U))+V[9]+2336552879&4294967295,G=M+(j<<12&4294967295|j>>>20),j=U+(k^G&(M^k))+V[10]+4294925233&4294967295,U=G+(j<<17&4294967295|j>>>15),j=k+(M^U&(G^M))+V[11]+2304563134&4294967295,k=U+(j<<22&4294967295|j>>>10),j=M+(G^k&(U^G))+V[12]+1804603682&4294967295,M=k+(j<<7&4294967295|j>>>25),j=G+(U^M&(k^U))+V[13]+4254626195&4294967295,G=M+(j<<12&4294967295|j>>>20),j=U+(k^G&(M^k))+V[14]+2792965006&4294967295,U=G+(j<<17&4294967295|j>>>15),j=k+(M^U&(G^M))+V[15]+1236535329&4294967295,k=U+(j<<22&4294967295|j>>>10),j=M+(U^G&(k^U))+V[1]+4129170786&4294967295,M=k+(j<<5&4294967295|j>>>27),j=G+(k^U&(M^k))+V[6]+3225465664&4294967295,G=M+(j<<9&4294967295|j>>>23),j=U+(M^k&(G^M))+V[11]+643717713&4294967295,U=G+(j<<14&4294967295|j>>>18),j=k+(G^M&(U^G))+V[0]+3921069994&4294967295,k=U+(j<<20&4294967295|j>>>12),j=M+(U^G&(k^U))+V[5]+3593408605&4294967295,M=k+(j<<5&4294967295|j>>>27),j=G+(k^U&(M^k))+V[10]+38016083&4294967295,G=M+(j<<9&4294967295|j>>>23),j=U+(M^k&(G^M))+V[15]+3634488961&4294967295,U=G+(j<<14&4294967295|j>>>18),j=k+(G^M&(U^G))+V[4]+3889429448&4294967295,k=U+(j<<20&4294967295|j>>>12),j=M+(U^G&(k^U))+V[9]+568446438&4294967295,M=k+(j<<5&4294967295|j>>>27),j=G+(k^U&(M^k))+V[14]+3275163606&4294967295,G=M+(j<<9&4294967295|j>>>23),j=U+(M^k&(G^M))+V[3]+4107603335&4294967295,U=G+(j<<14&4294967295|j>>>18),j=k+(G^M&(U^G))+V[8]+1163531501&4294967295,k=U+(j<<20&4294967295|j>>>12),j=M+(U^G&(k^U))+V[13]+2850285829&4294967295,M=k+(j<<5&4294967295|j>>>27),j=G+(k^U&(M^k))+V[2]+4243563512&4294967295,G=M+(j<<9&4294967295|j>>>23),j=U+(M^k&(G^M))+V[7]+1735328473&4294967295,U=G+(j<<14&4294967295|j>>>18),j=k+(G^M&(U^G))+V[12]+2368359562&4294967295,k=U+(j<<20&4294967295|j>>>12),j=M+(k^U^G)+V[5]+4294588738&4294967295,M=k+(j<<4&4294967295|j>>>28),j=G+(M^k^U)+V[8]+2272392833&4294967295,G=M+(j<<11&4294967295|j>>>21),j=U+(G^M^k)+V[11]+1839030562&4294967295,U=G+(j<<16&4294967295|j>>>16),j=k+(U^G^M)+V[14]+4259657740&4294967295,k=U+(j<<23&4294967295|j>>>9),j=M+(k^U^G)+V[1]+2763975236&4294967295,M=k+(j<<4&4294967295|j>>>28),j=G+(M^k^U)+V[4]+1272893353&4294967295,G=M+(j<<11&4294967295|j>>>21),j=U+(G^M^k)+V[7]+4139469664&4294967295,U=G+(j<<16&4294967295|j>>>16),j=k+(U^G^M)+V[10]+3200236656&4294967295,k=U+(j<<23&4294967295|j>>>9),j=M+(k^U^G)+V[13]+681279174&4294967295,M=k+(j<<4&4294967295|j>>>28),j=G+(M^k^U)+V[0]+3936430074&4294967295,G=M+(j<<11&4294967295|j>>>21),j=U+(G^M^k)+V[3]+3572445317&4294967295,U=G+(j<<16&4294967295|j>>>16),j=k+(U^G^M)+V[6]+76029189&4294967295,k=U+(j<<23&4294967295|j>>>9),j=M+(k^U^G)+V[9]+3654602809&4294967295,M=k+(j<<4&4294967295|j>>>28),j=G+(M^k^U)+V[12]+3873151461&4294967295,G=M+(j<<11&4294967295|j>>>21),j=U+(G^M^k)+V[15]+530742520&4294967295,U=G+(j<<16&4294967295|j>>>16),j=k+(U^G^M)+V[2]+3299628645&4294967295,k=U+(j<<23&4294967295|j>>>9),j=M+(U^(k|~G))+V[0]+4096336452&4294967295,M=k+(j<<6&4294967295|j>>>26),j=G+(k^(M|~U))+V[7]+1126891415&4294967295,G=M+(j<<10&4294967295|j>>>22),j=U+(M^(G|~k))+V[14]+2878612391&4294967295,U=G+(j<<15&4294967295|j>>>17),j=k+(G^(U|~M))+V[5]+4237533241&4294967295,k=U+(j<<21&4294967295|j>>>11),j=M+(U^(k|~G))+V[12]+1700485571&4294967295,M=k+(j<<6&4294967295|j>>>26),j=G+(k^(M|~U))+V[3]+2399980690&4294967295,G=M+(j<<10&4294967295|j>>>22),j=U+(M^(G|~k))+V[10]+4293915773&4294967295,U=G+(j<<15&4294967295|j>>>17),j=k+(G^(U|~M))+V[1]+2240044497&4294967295,k=U+(j<<21&4294967295|j>>>11),j=M+(U^(k|~G))+V[8]+1873313359&4294967295,M=k+(j<<6&4294967295|j>>>26),j=G+(k^(M|~U))+V[15]+4264355552&4294967295,G=M+(j<<10&4294967295|j>>>22),j=U+(M^(G|~k))+V[6]+2734768916&4294967295,U=G+(j<<15&4294967295|j>>>17),j=k+(G^(U|~M))+V[13]+1309151649&4294967295,k=U+(j<<21&4294967295|j>>>11),j=M+(U^(k|~G))+V[4]+4149444226&4294967295,M=k+(j<<6&4294967295|j>>>26),j=G+(k^(M|~U))+V[11]+3174756917&4294967295,G=M+(j<<10&4294967295|j>>>22),j=U+(M^(G|~k))+V[2]+718787259&4294967295,U=G+(j<<15&4294967295|j>>>17),j=k+(G^(U|~M))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+M&4294967295,R.g[1]=R.g[1]+(U+(j<<21&4294967295|j>>>11))&4294967295,R.g[2]=R.g[2]+U&4294967295,R.g[3]=R.g[3]+G&4294967295}s.prototype.v=function(R,M){M===void 0&&(M=R.length);const k=M-this.blockSize,V=this.C;let U=this.h,G=0;for(;G<M;){if(U==0)for(;G<=k;)r(this,R,G),G+=this.blockSize;if(typeof R=="string"){for(;G<M;)if(V[U++]=R.charCodeAt(G++),U==this.blockSize){r(this,V),U=0;break}}else for(;G<M;)if(V[U++]=R[G++],U==this.blockSize){r(this,V),U=0;break}}this.h=U,this.o+=M},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var M=1;M<R.length-8;++M)R[M]=0;M=this.o*8;for(var k=R.length-8;k<R.length;++k)R[k]=M&255,M/=256;for(this.v(R),R=Array(16),M=0,k=0;k<4;++k)for(let V=0;V<32;V+=8)R[M++]=this.g[k]>>>V&255;return R};function o(R,M){var k=f;return Object.prototype.hasOwnProperty.call(k,R)?k[R]:k[R]=M(R)}function c(R,M){this.h=M;const k=[];let V=!0;for(let U=R.length-1;U>=0;U--){const G=R[U]|0;V&&G==M||(k[U]=G,V=!1)}this.g=k}var f={};function p(R){return-128<=R&&R<128?o(R,function(M){return new c([M|0],M<0?-1:0)}):new c([R|0],R<0?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return _;if(R<0)return N(m(-R));const M=[];let k=1;for(let V=0;R>=k;V++)M[V]=R/k|0,k*=4294967296;return new c(M,0)}function v(R,M){if(R.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(R.charAt(0)=="-")return N(v(R.substring(1),M));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=m(Math.pow(M,8));let V=_;for(let G=0;G<R.length;G+=8){var U=Math.min(8,R.length-G);const j=parseInt(R.substring(G,G+U),M);U<8?(U=m(Math.pow(M,U)),V=V.j(U).add(m(j))):(V=V.j(k),V=V.add(m(j)))}return V}var _=p(0),T=p(1),A=p(16777216);n=c.prototype,n.m=function(){if(D(this))return-N(this).m();let R=0,M=1;for(let k=0;k<this.g.length;k++){const V=this.i(k);R+=(V>=0?V:4294967296+V)*M,M*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(C(this))return"0";if(D(this))return"-"+N(this).toString(R);const M=m(Math.pow(R,6));var k=this;let V="";for(;;){const U=$(k,M).g;k=L(k,U.j(M));let G=((k.g.length>0?k.g[0]:k.h)>>>0).toString(R);if(k=U,C(k))return G+V;for(;G.length<6;)G="0"+G;V=G+V}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function C(R){if(R.h!=0)return!1;for(let M=0;M<R.g.length;M++)if(R.g[M]!=0)return!1;return!0}function D(R){return R.h==-1}n.l=function(R){return R=L(this,R),D(R)?-1:C(R)?0:1};function N(R){const M=R.g.length,k=[];for(let V=0;V<M;V++)k[V]=~R.g[V];return new c(k,~R.h).add(T)}n.abs=function(){return D(this)?N(this):this},n.add=function(R){const M=Math.max(this.g.length,R.g.length),k=[];let V=0;for(let U=0;U<=M;U++){let G=V+(this.i(U)&65535)+(R.i(U)&65535),j=(G>>>16)+(this.i(U)>>>16)+(R.i(U)>>>16);V=j>>>16,G&=65535,j&=65535,k[U]=j<<16|G}return new c(k,k[k.length-1]&-2147483648?-1:0)};function L(R,M){return R.add(N(M))}n.j=function(R){if(C(this)||C(R))return _;if(D(this))return D(R)?N(this).j(N(R)):N(N(this).j(R));if(D(R))return N(this.j(N(R)));if(this.l(A)<0&&R.l(A)<0)return m(this.m()*R.m());const M=this.g.length+R.g.length,k=[];for(var V=0;V<2*M;V++)k[V]=0;for(V=0;V<this.g.length;V++)for(let U=0;U<R.g.length;U++){const G=this.i(V)>>>16,j=this.i(V)&65535,me=R.i(U)>>>16,Ae=R.i(U)&65535;k[2*V+2*U]+=j*Ae,O(k,2*V+2*U),k[2*V+2*U+1]+=G*Ae,O(k,2*V+2*U+1),k[2*V+2*U+1]+=j*me,O(k,2*V+2*U+1),k[2*V+2*U+2]+=G*me,O(k,2*V+2*U+2)}for(R=0;R<M;R++)k[R]=k[2*R+1]<<16|k[2*R];for(R=M;R<2*M;R++)k[R]=0;return new c(k,0)};function O(R,M){for(;(R[M]&65535)!=R[M];)R[M+1]+=R[M]>>>16,R[M]&=65535,M++}function B(R,M){this.g=R,this.h=M}function $(R,M){if(C(M))throw Error("division by zero");if(C(R))return new B(_,_);if(D(R))return M=$(N(R),M),new B(N(M.g),N(M.h));if(D(M))return M=$(R,N(M)),new B(N(M.g),M.h);if(R.g.length>30){if(D(R)||D(M))throw Error("slowDivide_ only works with positive integers.");for(var k=T,V=M;V.l(R)<=0;)k=W(k),V=W(V);var U=se(k,1),G=se(V,1);for(V=se(V,2),k=se(k,2);!C(V);){var j=G.add(V);j.l(R)<=0&&(U=U.add(k),G=j),V=se(V,1),k=se(k,1)}return M=L(R,U.j(M)),new B(U,M)}for(U=_;R.l(M)>=0;){for(k=Math.max(1,Math.floor(R.m()/M.m())),V=Math.ceil(Math.log(k)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),G=m(k),j=G.j(M);D(j)||j.l(R)>0;)k-=V,G=m(k),j=G.j(M);C(G)&&(G=T),U=U.add(G),R=L(R,j)}return new B(U,R)}n.B=function(R){return $(this,R).h},n.and=function(R){const M=Math.max(this.g.length,R.g.length),k=[];for(let V=0;V<M;V++)k[V]=this.i(V)&R.i(V);return new c(k,this.h&R.h)},n.or=function(R){const M=Math.max(this.g.length,R.g.length),k=[];for(let V=0;V<M;V++)k[V]=this.i(V)|R.i(V);return new c(k,this.h|R.h)},n.xor=function(R){const M=Math.max(this.g.length,R.g.length),k=[];for(let V=0;V<M;V++)k[V]=this.i(V)^R.i(V);return new c(k,this.h^R.h)};function W(R){const M=R.g.length+1,k=[];for(let V=0;V<M;V++)k[V]=R.i(V)<<1|R.i(V-1)>>>31;return new c(k,R.h)}function se(R,M){const k=M>>5;M%=32;const V=R.g.length-k,U=[];for(let G=0;G<V;G++)U[G]=M>0?R.i(G+k)>>>M|R.i(G+k+1)<<32-M:R.i(G+k);return new c(U,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,sA=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,na=c}).apply(typeof mT<"u"?mT:typeof self<"u"?self:typeof window<"u"?window:{});var Ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iA,Dc,rA,qd,e0,aA,oA,lA;(function(){var n,e=Object.defineProperty;function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ud=="object"&&Ud];for(var E=0;E<y.length;++E){var w=y[E];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function r(y,E){if(E)e:{var w=s;y=y.split(".");for(var P=0;P<y.length-1;P++){var Q=y[P];if(!(Q in w))break e;w=w[Q]}y=y[y.length-1],P=w[y],E=E(P),E!=P&&E!=null&&e(w,y,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(y){return y||function(E){var w=[],P;for(P in E)Object.prototype.hasOwnProperty.call(E,P)&&w.push([P,E[P]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function f(y){var E=typeof y;return E=="object"&&y!=null||E=="function"}function p(y,E,w){return y.call.apply(y.bind,arguments)}function m(y,E,w){return m=p,m.apply(null,arguments)}function v(y,E){var w=Array.prototype.slice.call(arguments,1);return function(){var P=w.slice();return P.push.apply(P,arguments),y.apply(this,P)}}function _(y,E){function w(){}w.prototype=E.prototype,y.Z=E.prototype,y.prototype=new w,y.prototype.constructor=y,y.Ob=function(P,Q,ne){for(var be=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)be[Ze-2]=arguments[Ze];return E.prototype[Q].apply(P,be)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function A(y){const E=y.length;if(E>0){const w=Array(E);for(let P=0;P<E;P++)w[P]=y[P];return w}return[]}function C(y,E){for(let P=1;P<arguments.length;P++){const Q=arguments[P];var w=typeof Q;if(w=w!="object"?w:Q?Array.isArray(Q)?"array":w:"null",w=="array"||w=="object"&&typeof Q.length=="number"){w=y.length||0;const ne=Q.length||0;y.length=w+ne;for(let be=0;be<ne;be++)y[w+be]=Q[be]}else y.push(Q)}}class D{constructor(E,w){this.i=E,this.j=w,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function N(y){c.setTimeout(()=>{throw y},0)}function L(){var y=R;let E=null;return y.g&&(E=y.g,y.g=y.g.next,y.g||(y.h=null),E.next=null),E}class O{constructor(){this.h=this.g=null}add(E,w){const P=B.get();P.set(E,w),this.h?this.h.next=P:this.g=P,this.h=P}}var B=new D(()=>new $,y=>y.reset());class ${constructor(){this.next=this.g=this.h=null}set(E,w){this.h=E,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let W,se=!1,R=new O,M=()=>{const y=Promise.resolve(void 0);W=()=>{y.then(k)}};function k(){for(var y;y=L();){try{y.h.call(y.g)}catch(w){N(w)}var E=B;E.j(y),E.h<100&&(E.h++,y.next=E.g,E.g=y)}se=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(y,E){this.type=y,this.g=this.target=E,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var G=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var y=!1,E=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const w=()=>{};c.addEventListener("test",w,E),c.removeEventListener("test",w,E)}catch{}return y})();function j(y){return/^[\s\xa0]*$/.test(y)}function me(y,E){U.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,E)}_(me,U),me.prototype.init=function(y,E){const w=this.type=y.type,P=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=E,E=y.relatedTarget,E||(w=="mouseover"?E=y.fromElement:w=="mouseout"&&(E=y.toElement)),this.relatedTarget=E,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Ae="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ue(y,E,w,P,Q){this.listener=y,this.proxy=null,this.src=E,this.type=w,this.capture=!!P,this.ha=Q,this.key=++Y,this.da=this.fa=!1}function xe(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Le(y,E,w){for(const P in y)E.call(w,y[P],P,y)}function ye(y,E){for(const w in y)E.call(void 0,y[w],w,y)}function H(y){const E={};for(const w in y)E[w]=y[w];return E}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(y,E){let w,P;for(let Q=1;Q<arguments.length;Q++){P=arguments[Q];for(w in P)y[w]=P[w];for(let ne=0;ne<re.length;ne++)w=re[ne],Object.prototype.hasOwnProperty.call(P,w)&&(y[w]=P[w])}}function ie(y){this.src=y,this.g={},this.h=0}ie.prototype.add=function(y,E,w,P,Q){const ne=y.toString();y=this.g[ne],y||(y=this.g[ne]=[],this.h++);const be=ge(y,E,P,Q);return be>-1?(E=y[be],w||(E.fa=!1)):(E=new ue(E,this.src,ne,!!P,Q),E.fa=w,y.push(E)),E};function te(y,E){const w=E.type;if(w in y.g){var P=y.g[w],Q=Array.prototype.indexOf.call(P,E,void 0),ne;(ne=Q>=0)&&Array.prototype.splice.call(P,Q,1),ne&&(xe(E),y.g[w].length==0&&(delete y.g[w],y.h--))}}function ge(y,E,w,P){for(let Q=0;Q<y.length;++Q){const ne=y[Q];if(!ne.da&&ne.listener==E&&ne.capture==!!w&&ne.ha==P)return Q}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),Ie={};function He(y,E,w,P,Q){if(Array.isArray(E)){for(let ne=0;ne<E.length;ne++)He(y,E[ne],w,P,Q);return null}return w=$t(w),y&&y[Ae]?y.J(E,w,f(P)?!!P.capture:!1,Q):ze(y,E,w,!1,P,Q)}function ze(y,E,w,P,Q,ne){if(!E)throw Error("Invalid event type");const be=f(Q)?!!Q.capture:!!Q;let Ze=mt(y);if(Ze||(y[_e]=Ze=new ie(y)),w=Ze.add(E,w,P,be,ne),w.proxy)return w;if(P=pt(),w.proxy=P,P.src=y,P.listener=w,y.addEventListener)G||(Q=be),Q===void 0&&(Q=!1),y.addEventListener(E.toString(),P,Q);else if(y.attachEvent)y.attachEvent(Ge(E.toString()),P);else if(y.addListener&&y.removeListener)y.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return w}function pt(){function y(w){return E.call(y.src,y.listener,w)}const E=it;return y}function Ce(y,E,w,P,Q){if(Array.isArray(E))for(var ne=0;ne<E.length;ne++)Ce(y,E[ne],w,P,Q);else P=f(P)?!!P.capture:!!P,w=$t(w),y&&y[Ae]?(y=y.i,ne=String(E).toString(),ne in y.g&&(E=y.g[ne],w=ge(E,w,P,Q),w>-1&&(xe(E[w]),Array.prototype.splice.call(E,w,1),E.length==0&&(delete y.g[ne],y.h--)))):y&&(y=mt(y))&&(E=y.g[E.toString()],y=-1,E&&(y=ge(E,w,P,Q)),(w=y>-1?E[y]:null)&&Ee(w))}function Ee(y){if(typeof y!="number"&&y&&!y.da){var E=y.src;if(E&&E[Ae])te(E.i,y);else{var w=y.type,P=y.proxy;E.removeEventListener?E.removeEventListener(w,P,y.capture):E.detachEvent?E.detachEvent(Ge(w),P):E.addListener&&E.removeListener&&E.removeListener(P),(w=mt(E))?(te(w,y),w.h==0&&(w.src=null,E[_e]=null)):xe(y)}}}function Ge(y){return y in Ie?Ie[y]:Ie[y]="on"+y}function it(y,E){if(y.da)y=!0;else{E=new me(E,this);const w=y.listener,P=y.ha||y.src;y.fa&&Ee(y),y=w.call(P,E)}return y}function mt(y){return y=y[_e],y instanceof ie?y:null}var tt="__closure_events_fn_"+(Math.random()*1e9>>>0);function $t(y){return typeof y=="function"?y:(y[tt]||(y[tt]=function(E){return y.handleEvent(E)}),y[tt])}function St(){V.call(this),this.i=new ie(this),this.M=this,this.G=null}_(St,V),St.prototype[Ae]=!0,St.prototype.removeEventListener=function(y,E,w,P){Ce(this,y,E,w,P)};function Ut(y,E){var w,P=y.G;if(P)for(w=[];P;P=P.G)w.push(P);if(y=y.M,P=E.type||E,typeof E=="string")E=new U(E,y);else if(E instanceof U)E.target=E.target||y;else{var Q=E;E=new U(P,y),pe(E,Q)}Q=!0;let ne,be;if(w)for(be=w.length-1;be>=0;be--)ne=E.g=w[be],Q=jt(ne,P,!0,E)&&Q;if(ne=E.g=y,Q=jt(ne,P,!0,E)&&Q,Q=jt(ne,P,!1,E)&&Q,w)for(be=0;be<w.length;be++)ne=E.g=w[be],Q=jt(ne,P,!1,E)&&Q}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var y=this.i;for(const E in y.g){const w=y.g[E];for(let P=0;P<w.length;P++)xe(w[P]);delete y.g[E],y.h--}}this.G=null},St.prototype.J=function(y,E,w,P){return this.i.add(String(y),E,!1,w,P)},St.prototype.K=function(y,E,w,P){return this.i.add(String(y),E,!0,w,P)};function jt(y,E,w,P){if(E=y.i.g[String(E)],!E)return!0;E=E.concat();let Q=!0;for(let ne=0;ne<E.length;++ne){const be=E[ne];if(be&&!be.da&&be.capture==w){const Ze=be.listener,Zt=be.ha||be.src;be.fa&&te(y.i,be),Q=Ze.call(Zt,P)!==!1&&Q}}return Q&&!P.defaultPrevented}function fr(y,E){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(y,E||0)}function pa(y){y.g=fr(()=>{y.g=null,y.i&&(y.i=!1,pa(y))},y.l);const E=y.h;y.h=null,y.m.apply(null,E)}class yn extends V{constructor(E,w){super(),this.m=E,this.l=w,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:pa(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ls(y){V.call(this),this.h=y,this.g={}}_(ls,V);var ga=[];function hr(y){Le(y.g,function(E,w){this.g.hasOwnProperty(w)&&Ee(E)},y),y.g={}}ls.prototype.N=function(){ls.Z.N.call(this),hr(this)},ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mn=c.JSON.stringify,cs=c.JSON.parse,uo=class{stringify(y){return c.JSON.stringify(y,void 0)}parse(y){return c.JSON.parse(y,void 0)}};function fo(){}function mr(){}var Jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qe(){U.call(this,"d")}_(qe,U);function Vn(){U.call(this,"c")}_(Vn,U);var Dt={},ho=null;function Ii(){return ho=ho||new St}Dt.Ia="serverreachability";function mo(y){U.call(this,Dt.Ia,y)}_(mo,U);function Ts(y){const E=Ii();Ut(E,new mo(E))}Dt.STAT_EVENT="statevent";function ki(y,E){U.call(this,Dt.STAT_EVENT,y),this.stat=E}_(ki,U);function Yt(y){const E=Ii();Ut(E,new ki(E,y))}Dt.Ja="timingevent";function Es(y,E){U.call(this,Dt.Ja,y),this.size=E}_(Es,U);function Ss(y,E){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){y()},E)}function us(){this.g=!0}us.prototype.ua=function(){this.g=!1};function Pl(y,E,w,P,Q,ne){y.info(function(){if(y.g)if(ne){var be="",Ze=ne.split("&");for(let Tt=0;Tt<Ze.length;Tt++){var Zt=Ze[Tt].split("=");if(Zt.length>1){const Ft=Zt[0];Zt=Zt[1];const Cs=Ft.split("_");be=Cs.length>=2&&Cs[1]=="type"?be+(Ft+"="+Zt+"&"):be+(Ft+"=redacted&")}}}else be=null;else be=ne;return"XMLHTTP REQ ("+P+") [attempt "+Q+"]: "+E+`
`+w+`
`+be})}function po(y,E,w,P,Q,ne,be){y.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+Q+"]: "+E+`
`+w+`
`+ne+" "+be})}function ds(y,E,w,P){y.info(function(){return"XMLHTTP TEXT ("+E+"): "+Ll(y,w)+(P?" "+P:"")})}function Ri(y,E){y.info(function(){return"TIMEOUT: "+E})}us.prototype.info=function(){};function Ll(y,E){if(!y.g)return E;if(!E)return null;try{const ne=JSON.parse(E);if(ne){for(y=0;y<ne.length;y++)if(Array.isArray(ne[y])){var w=ne[y];if(!(w.length<2)){var P=w[1];if(Array.isArray(P)&&!(P.length<1)){var Q=P[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let be=1;be<P.length;be++)P[be]=""}}}}return mn(ne)}catch{return E}}var Mi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ya={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xa;function ai(){}_(ai,fo),ai.prototype.g=function(){return new XMLHttpRequest},xa=new ai;function kn(y){return encodeURIComponent(String(y))}function va(y){var E=1;y=y.split(":");const w=[];for(;E>0&&y.length;)w.push(y.shift()),E--;return y.length&&w.push(y.join(":")),w}function Qn(y,E,w,P){this.j=y,this.i=E,this.l=w,this.S=P||1,this.V=new ls(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fs}function fs(){this.i=null,this.g="",this.h=!1}var Jt={},rn={};function As(y,E,w){y.M=1,y.A=_a(Pt(E)),y.u=w,y.R=!0,pr(y,null)}function pr(y,E){y.F=Date.now(),ve(y),y.B=Pt(y.A);var w=y.B,P=y.S;Array.isArray(P)||(P=[String(P)]),yo(w.i,"t",P),y.C=0,w=y.j.L,y.h=new fs,y.g=Su(y.j,w?E:null,!y.u),y.P>0&&(y.O=new yn(m(y.Y,y,y.g),y.P)),E=y.V,w=y.g,P=y.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(ga[0]=Q.toString()),Q=ga);for(let ne=0;ne<Q.length;ne++){const be=He(w,Q[ne],P||E.handleEvent,!1,E.h||E);if(!be)break;E.g[be.key]=be}E=y.J?H(y.J):{},y.u?(y.v||(y.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,E)):(y.v="GET",y.g.ea(y.B,y.v,null,E)),Ts(),Pl(y.i,y.v,y.B,y.l,y.S,y.u)}Qn.prototype.ba=function(y){y=y.target;const E=this.O;E&&Ks(y)==3?E.j():this.Y(y)},Qn.prototype.Y=function(y){try{if(y==this.g)e:{const Ze=Ks(this.g),Zt=this.g.ya(),Tt=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||_n(this.g)))){this.K||Ze!=4||Zt==7||(Zt==8||Tt<=0?Ts(3):Ts(2)),Pe(this);var E=this.g.ca();this.X=E;var w=Ul(this);if(this.o=E==200,po(this.i,this.v,this.B,this.l,this.S,Ze,E),this.o){if(this.U&&!this.L){t:{if(this.g){var P,Q=this.g;if((P=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(P)){var ne=P;break t}}ne=null}if(y=ne)ds(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Be(this,y);else{this.o=!1,this.m=3,Yt(12),st(this),Me(this);break e}}if(this.R){y=!0;let Ft;for(;!this.K&&this.C<w.length;)if(Ft=J(this,w),Ft==rn){Ze==4&&(this.m=4,Yt(14),y=!1),ds(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==Jt){this.m=4,Yt(15),ds(this.i,this.l,w,"[Invalid Chunk]"),y=!1;break}else ds(this.i,this.l,Ft,null),Be(this,Ft);if(ba(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||w.length!=0||this.h.h||(this.m=1,Yt(16),y=!1),this.o=this.o&&y,!y)ds(this.i,this.l,w,"[Invalid Chunked Response]"),st(this),Me(this);else if(w.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),ql(be),be.P=!0,Yt(11))}}else ds(this.i,this.l,w,null),Be(this,w);Ze==4&&st(this),this.o&&!this.K&&(Ze==4?bu(this.j,this):(this.o=!1,ve(this)))}else Pi(this.g),E==400&&w.indexOf("Unknown SID")>0?(this.m=3,Yt(12)):(this.m=0,Yt(13)),st(this),Me(this)}}}catch{}finally{}};function Ul(y){if(!ba(y))return y.g.la();const E=_n(y.g);if(E==="")return"";let w="";const P=E.length,Q=Ks(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return st(y),Me(y),"";y.h.i=new c.TextDecoder}for(let ne=0;ne<P;ne++)y.h.h=!0,w+=y.h.i.decode(E[ne],{stream:!(Q&&ne==P-1)});return E.length=0,y.h.g+=w,y.C=0,y.h.g}function ba(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function J(y,E){var w=y.C,P=E.indexOf(`
`,w);return P==-1?rn:(w=Number(E.substring(w,P)),isNaN(w)?Jt:(P+=1,P+w>E.length?rn:(E=E.slice(P,P+w),y.C=P+w,E)))}Qn.prototype.cancel=function(){this.K=!0,st(this)};function ve(y){y.T=Date.now()+y.H,Ue(y,y.H)}function Ue(y,E){if(y.D!=null)throw Error("WatchDog timer not null");y.D=Ss(m(y.aa,y),E)}function Pe(y){y.D&&(c.clearTimeout(y.D),y.D=null)}Qn.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(Ri(this.i,this.B),this.M!=2&&(Ts(),Yt(17)),st(this),this.m=2,Me(this)):Ue(this,this.T-y)};function Me(y){y.j.I==0||y.K||bu(y.j,y)}function st(y){Pe(y);var E=y.O;E&&typeof E.dispose=="function"&&E.dispose(),y.O=null,hr(y.V),y.g&&(E=y.g,y.g=null,E.abort(),E.dispose())}function Be(y,E){try{var w=y.j;if(w.I!=0&&(w.g==y||Xt(w.h,y))){if(!y.L&&Xt(w.h,y)&&w.I==3){try{var P=w.Ba.g.parse(E)}catch{P=null}if(Array.isArray(P)&&P.length==3){var Q=P;if(Q[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<y.F)To(w),Er(w);else break e;Ca(w),Yt(18)}}else w.xa=Q[1],0<w.xa-w.K&&Q[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Ss(m(w.Va,w),6e3));Ot(w.h)<=1&&w.ta&&(w.ta=void 0)}else fi(w,11)}else if((y.L||w.g==y)&&To(w),!j(E))for(Q=w.Ba.g.parse(E),E=0;E<Q.length;E++){let Tt=Q[E];const Ft=Tt[0];if(!(Ft<=w.K))if(w.K=Ft,Tt=Tt[1],w.I==2)if(Tt[0]=="c"){w.M=Tt[1],w.ba=Tt[2];const Cs=Tt[3];Cs!=null&&(w.ka=Cs,w.j.info("VER="+w.ka));const hi=Tt[4];hi!=null&&(w.za=hi,w.j.info("SVER="+w.za));const $s=Tt[5];$s!=null&&typeof $s=="number"&&$s>0&&(P=1.5*$s,w.O=P,w.j.info("backChannelRequestTimeoutMs_="+P)),P=w;const Ys=y.g;if(Ys){const Ia=Ys.g?Ys.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ia){var ne=P.h;ne.g||Ia.indexOf("spdy")==-1&&Ia.indexOf("quic")==-1&&Ia.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(jn(ne,ne.h),ne.h=null))}if(P.G){const Eo=Ys.g?Ys.g.getResponseHeader("X-HTTP-Session-Id"):null;Eo&&(P.wa=Eo,_t(P.J,P.G,Eo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-y.F,w.j.info("Handshake RTT: "+w.T+"ms")),P=w;var be=y;if(P.na=Eu(P,P.L?P.ba:null,P.W),be.L){On(P.h,be);var Ze=be,Zt=P.O;Zt&&(Ze.H=Zt),Ze.D&&(Pe(Ze),ve(Ze)),P.g=be}else xu(P);w.i.length>0&&di(w)}else Tt[0]!="stop"&&Tt[0]!="close"||fi(w,7);else w.I==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?fi(w,7):zl(w):Tt[0]!="noop"&&w.l&&w.l.qa(Tt),w.A=0)}}Ts(4)}catch{}}var Ve=class{constructor(y,E){this.g=y,this.map=E}};function vt(y){this.l=y||10,c.PerformanceNavigationTiming?(y=c.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bt(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Ot(y){return y.h?1:y.g?y.g.size:0}function Xt(y,E){return y.h?y.h==E:y.g?y.g.has(E):!1}function jn(y,E){y.g?y.g.add(E):y.h=E}function On(y,E){y.h&&y.h==E?y.h=null:y.g&&y.g.has(E)&&y.g.delete(E)}vt.prototype.cancel=function(){if(this.i=Wn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Wn(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let E=y.i;for(const w of y.g.values())E=E.concat(w.G);return E}return A(y.i)}var hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gn(y,E){if(y){y=y.split("&");for(let w=0;w<y.length;w++){const P=y[w].indexOf("=");let Q,ne=null;P>=0?(Q=y[w].substring(0,P),ne=y[w].substring(P+1)):Q=y[w],E(Q,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function an(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;y instanceof an?(this.l=y.l,zt(this,y.j),this.o=y.o,this.g=y.g,Xn(this,y.u),this.h=y.h,gr(this,gu(y.i)),this.m=y.m):y&&(E=String(y).match(hs))?(this.l=!1,zt(this,E[1]||"",!0),this.o=oi(E[2]||""),this.g=oi(E[3]||"",!0),Xn(this,E[4]),this.h=oi(E[5]||"",!0),gr(this,E[6]||"",!0),this.m=oi(E[7]||"")):(this.l=!1,this.i=new xr(null,this.l))}an.prototype.toString=function(){const y=[];var E=this.j;E&&y.push(Ta(E,go,!0),":");var w=this.g;return(w||E=="file")&&(y.push("//"),(E=this.o)&&y.push(Ta(E,go,!0),"@"),y.push(kn(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&y.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&y.push("/"),y.push(Ta(w,w.charAt(0)=="/"?Vl:hu,!0))),(w=this.i.toString())&&y.push("?",w),(w=this.m)&&y.push("#",Ta(w,mu)),y.join("")},an.prototype.resolve=function(y){const E=Pt(this);let w=!!y.j;w?zt(E,y.j):w=!!y.o,w?E.o=y.o:w=!!y.g,w?E.g=y.g:w=y.u!=null;var P=y.h;if(w)Xn(E,y.u);else if(w=!!y.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var Q=E.h.lastIndexOf("/");Q!=-1&&(P=E.h.slice(0,Q+1)+P)}if(Q=P,Q==".."||Q==".")P="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){P=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ne=[];for(let be=0;be<Q.length;){const Ze=Q[be++];Ze=="."?P&&be==Q.length&&ne.push(""):Ze==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),P&&be==Q.length&&ne.push("")):(ne.push(Ze),P=!0)}P=ne.join("/")}else P=Q}return w?E.h=P:w=y.i.toString()!=="",w?gr(E,gu(y.i)):w=!!y.m,w&&(E.m=y.m),E};function Pt(y){return new an(y)}function zt(y,E,w){y.j=w?oi(E,!0):E,y.j&&(y.j=y.j.replace(/:$/,""))}function Xn(y,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);y.u=E}else y.u=null}function gr(y,E,w){E instanceof xr?(y.i=E,xo(y.i,y.l)):(w||(E=Ta(E,yr)),y.i=new xr(E,y.l))}function _t(y,E,w){y.i.set(E,w)}function _a(y){return _t(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function oi(y,E){return y?E?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Ta(y,E,w){return typeof y=="string"?(y=encodeURI(y).replace(E,Zn),w&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function Zn(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var go=/[#\/\?@]/g,hu=/[#\?:]/g,Vl=/[#\?]/g,yr=/[#\?@]/g,mu=/#/g;function xr(y,E){this.h=this.g=null,this.i=y||null,this.j=!!E}function es(y){y.g||(y.g=new Map,y.h=0,y.i&&Gn(y.i,function(E,w){y.add(decodeURIComponent(E.replace(/\+/g," ")),w)}))}n=xr.prototype,n.add=function(y,E){es(this),this.i=null,y=vr(this,y);let w=this.g.get(y);return w||this.g.set(y,w=[]),w.push(E),this.h+=1,this};function pu(y,E){es(y),E=vr(y,E),y.g.has(E)&&(y.i=null,y.h-=y.g.get(E).length,y.g.delete(E))}function jl(y,E){return es(y),E=vr(y,E),y.g.has(E)}n.forEach=function(y,E){es(this),this.g.forEach(function(w,P){w.forEach(function(Q){y.call(E,Q,P,this)},this)},this)};function Ol(y,E){es(y);let w=[];if(typeof E=="string")jl(y,E)&&(w=w.concat(y.g.get(vr(y,E))));else for(y=Array.from(y.g.values()),E=0;E<y.length;E++)w=w.concat(y[E]);return w}n.set=function(y,E){return es(this),this.i=null,y=vr(this,y),jl(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[E]),this.h+=1,this},n.get=function(y,E){return y?(y=Ol(this,y),y.length>0?String(y[0]):E):E};function yo(y,E,w){pu(y,E),w.length>0&&(y.i=null,y.g.set(vr(y,E),A(w)),y.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],E=Array.from(this.g.keys());for(let P=0;P<E.length;P++){var w=E[P];const Q=kn(w);w=Ol(this,w);for(let ne=0;ne<w.length;ne++){let be=Q;w[ne]!==""&&(be+="="+kn(w[ne])),y.push(be)}}return this.i=y.join("&")};function gu(y){const E=new xr;return E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),E}function vr(y,E){return E=String(E),y.j&&(E=E.toLowerCase()),E}function xo(y,E){E&&!y.j&&(es(y),y.i=null,y.g.forEach(function(w,P){const Q=P.toLowerCase();P!=Q&&(pu(this,P),yo(this,Q,w))},y)),y.j=E}function Fs(y,E){const w=new us;if(c.Image){const P=new Image;P.onload=v(ws,w,"TestLoadImage: loaded",!0,E,P),P.onerror=v(ws,w,"TestLoadImage: error",!1,E,P),P.onabort=v(ws,w,"TestLoadImage: abort",!1,E,P),P.ontimeout=v(ws,w,"TestLoadImage: timeout",!1,E,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=y}else E(!1)}function Gl(y,E){const w=new us,P=new AbortController,Q=setTimeout(()=>{P.abort(),ws(w,"TestPingServer: timeout",!1,E)},1e4);fetch(y,{signal:P.signal}).then(ne=>{clearTimeout(Q),ne.ok?ws(w,"TestPingServer: ok",!0,E):ws(w,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Q),ws(w,"TestPingServer: error",!1,E)})}function ws(y,E,w,P,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),P(w)}catch{}}function br(){this.g=new uo}function li(y){this.i=y.Sb||null,this.h=y.ab||!1}_(li,fo),li.prototype.g=function(){return new Ea(this.i,this.h)};function Ea(y,E){St.call(this),this.H=y,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Ea,St),n=Ea.prototype,n.open=function(y,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=E,this.readyState=1,qs(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(E.body=y),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_r(this)),this.readyState=0},n.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,qs(this)),this.g&&(this.readyState=3,qs(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vo(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function vo(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}n.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var E=y.value?y.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!y.done}))&&(this.response=this.responseText+=E)}y.done?_r(this):qs(this),this.readyState==3&&vo(this)}},n.Oa=function(y){this.g&&(this.response=this.responseText=y,_r(this))},n.Na=function(y){this.g&&(this.response=y,_r(this))},n.ga=function(){this.g&&_r(this)};function _r(y){y.readyState=4,y.l=null,y.j=null,y.B=null,qs(y)}n.setRequestHeader=function(y,E){this.A.append(y,E)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],E=this.h.entries();for(var w=E.next();!w.done;)w=w.value,y.push(w[0]+": "+w[1]),w=E.next();return y.join(`\r
`)};function qs(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Ea.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function Ns(y){let E="";return Le(y,function(w,P){E+=P,E+=":",E+=w,E+=`\r
`}),E}function Sa(y,E,w){e:{for(P in w){var P=!1;break e}P=!0}P||(w=Ns(w),typeof y=="string"?w!=null&&kn(w):_t(y,E,w))}function It(y){St.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(It,St);var ci=/^https?$/i,Bl=["POST","PUT"];n=It.prototype,n.Fa=function(y){this.H=y},n.ea=function(y,E,w,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);E=E?E.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xa.g(),this.g.onreadystatechange=T(m(this.Ca,this));try{this.B=!0,this.g.open(E,String(y),!0),this.B=!1}catch(ne){Aa(this,ne);return}if(y=w||"",w=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var Q in P)w.set(Q,P[Q]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const ne of P.keys())w.set(ne,P.get(ne));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(w.keys()).find(ne=>ne.toLowerCase()=="content-type"),Q=c.FormData&&y instanceof c.FormData,!(Array.prototype.indexOf.call(Bl,E,void 0)>=0)||P||Q||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,be]of w)this.g.setRequestHeader(ne,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(ne){Aa(this,ne)}};function Aa(y,E){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=E,y.o=5,Hl(y),Di(y)}function Hl(y){y.A||(y.A=!0,Ut(y,"complete"),Ut(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,Ut(this,"complete"),Ut(this,"abort"),Di(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Di(this,!0)),It.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?wa(this):this.Xa())},n.Xa=function(){wa(this)};function wa(y){if(y.h&&typeof o<"u"){if(y.v&&Ks(y)==4)setTimeout(y.Ca.bind(y),0);else if(Ut(y,"readystatechange"),Ks(y)==4){y.h=!1;try{const ne=y.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var w;if(!(w=E)){var P;if(P=ne===0){let be=String(y.D).match(hs)[1]||null;!be&&c.self&&c.self.location&&(be=c.self.location.protocol.slice(0,-1)),P=!ci.test(be?be.toLowerCase():"")}w=P}if(w)Ut(y,"complete"),Ut(y,"success");else{y.o=6;try{var Q=Ks(y)>2?y.g.statusText:""}catch{Q=""}y.l=Q+" ["+y.ca()+"]",Hl(y)}}finally{Di(y)}}}}function Di(y,E){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const w=y.g;y.g=null,E||Ut(y,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ks(y){return y.g?y.g.readyState:0}n.ca=function(){try{return Ks(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(y){if(this.g){var E=this.g.responseText;return y&&E.indexOf(y)==0&&(E=E.substring(y.length)),cs(E)}};function _n(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Pi(y){const E={};y=(y.g&&Ks(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<y.length;P++){if(j(y[P]))continue;var w=va(y[P]);const Q=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ne=E[Q]||[];E[Q]=ne,ne.push(w)}ye(E,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ui(y,E,w){return w&&w.internalChannelParams&&w.internalChannelParams[y]||E}function Tr(y){this.za=0,this.i=[],this.j=new us,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ui("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ui("baseRetryDelayMs",5e3,y),this.Za=ui("retryDelaySeedMs",1e4,y),this.Ta=ui("forwardChannelMaxRetries",2,y),this.va=ui("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new vt(y&&y.concurrentRequestLimit),this.Ba=new br,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Tr.prototype,n.ka=8,n.I=1,n.connect=function(y,E,w,P){Yt(0),this.W=y,this.H=E||{},w&&P!==void 0&&(this.H.OSID=w,this.H.OAID=P),this.F=this.X,this.J=Eu(this,null,this.W),di(this)};function zl(y){if(bo(y),y.I==3){var E=y.V++,w=Pt(y.J);if(_t(w,"SID",y.M),_t(w,"RID",E),_t(w,"TYPE","terminate"),Na(y,w),E=new Qn(y,y.j,E),E.M=2,E.A=_a(Pt(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=E.A,w=!0),w||(E.g=Su(E.j,null),E.g.ea(E.A)),E.F=Date.now(),ve(E)}Tu(y)}function Er(y){y.g&&(ql(y),y.g.cancel(),y.g=null)}function bo(y){Er(y),y.v&&(c.clearTimeout(y.v),y.v=null),To(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&c.clearTimeout(y.m),y.m=null)}function di(y){if(!bt(y.h)&&!y.m){y.m=!0;var E=y.Ea;W||M(),se||(W(),se=!0),R.add(E,y),y.D=0}}function _o(y,E){return Ot(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=E.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=Ss(m(y.Ea,y,E),_u(y,y.D)),y.D++,!0)}n.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const Q=new Qn(this,this.j,y);let ne=this.o;if(this.U&&(ne?(ne=H(ne),pe(ne,this.U)):ne=this.U),this.u!==null||this.R||(Q.J=ne,ne=null),this.S)e:{for(var E=0,w=0;w<this.i.length;w++){t:{var P=this.i[w];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(E+=P,E>4096){E=w;break e}if(E===4096||w===this.i.length-1){E=w+1;break e}}E=1e3}else E=1e3;E=yu(this,Q,E),w=Pt(this.J),_t(w,"RID",y),_t(w,"CVER",22),this.G&&_t(w,"X-HTTP-Session-Id",this.G),Na(this,w),ne&&(this.R?E="headers="+kn(Ns(ne))+"&"+E:this.u&&Sa(w,this.u,ne)),jn(this.h,Q),this.Ra&&_t(w,"TYPE","init"),this.S?(_t(w,"$req",E),_t(w,"SID","null"),Q.U=!0,As(Q,w,null)):As(Q,w,E),this.I=2}}else this.I==3&&(y?Fl(this,y):this.i.length==0||bt(this.h)||Fl(this))};function Fl(y,E){var w;E?w=E.l:w=y.V++;const P=Pt(y.J);_t(P,"SID",y.M),_t(P,"RID",w),_t(P,"AID",y.K),Na(y,P),y.u&&y.o&&Sa(P,y.u,y.o),w=new Qn(y,y.j,w,y.D+1),y.u===null&&(w.J=y.o),E&&(y.i=E.G.concat(y.i)),E=yu(y,w,1e3),w.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),jn(y.h,w),As(w,P,E)}function Na(y,E){y.H&&Le(y.H,function(w,P){_t(E,P,w)}),y.l&&Le({},function(w,P){_t(E,P,w)})}function yu(y,E,w){w=Math.min(y.i.length,w);const P=y.l?m(y.l.Ka,y.l,y):null;e:{var Q=y.i;let Ze=-1;for(;;){const Zt=["count="+w];Ze==-1?w>0?(Ze=Q[0].g,Zt.push("ofs="+Ze)):Ze=0:Zt.push("ofs="+Ze);let Tt=!0;for(let Ft=0;Ft<w;Ft++){var ne=Q[Ft].g;const Cs=Q[Ft].map;if(ne-=Ze,ne<0)Ze=Math.max(0,Q[Ft].g-100),Tt=!1;else try{ne="req"+ne+"_"||"";try{var be=Cs instanceof Map?Cs:Object.entries(Cs);for(const[hi,$s]of be){let Ys=$s;f($s)&&(Ys=mn($s)),Zt.push(ne+hi+"="+encodeURIComponent(Ys))}}catch(hi){throw Zt.push(ne+"type="+encodeURIComponent("_badmap")),hi}}catch{P&&P(Cs)}}if(Tt){be=Zt.join("&");break e}}be=void 0}return y=y.i.splice(0,w),E.G=y,be}function xu(y){if(!y.g&&!y.v){y.Y=1;var E=y.Da;W||M(),se||(W(),se=!0),R.add(E,y),y.A=0}}function Ca(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=Ss(m(y.Da,y),_u(y,y.A)),y.A++,!0)}n.Da=function(){if(this.v=null,vu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=Ss(m(this.Wa,this),y)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yt(10),Er(this),vu(this))};function ql(y){y.B!=null&&(c.clearTimeout(y.B),y.B=null)}function vu(y){y.g=new Qn(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var E=Pt(y.na);_t(E,"RID","rpc"),_t(E,"SID",y.M),_t(E,"AID",y.K),_t(E,"CI",y.F?"0":"1"),!y.F&&y.ia&&_t(E,"TO",y.ia),_t(E,"TYPE","xmlhttp"),Na(y,E),y.u&&y.o&&Sa(E,y.u,y.o),y.O&&(y.g.H=y.O);var w=y.g;y=y.ba,w.M=1,w.A=_a(Pt(E)),w.u=null,w.R=!0,pr(w,y)}n.Va=function(){this.C!=null&&(this.C=null,Er(this),Ca(this),Yt(19))};function To(y){y.C!=null&&(c.clearTimeout(y.C),y.C=null)}function bu(y,E){var w=null;if(y.g==E){To(y),ql(y),y.g=null;var P=2}else if(Xt(y.h,E))w=E.G,On(y.h,E),P=1;else return;if(y.I!=0){if(E.o)if(P==1){w=E.u?E.u.length:0,E=Date.now()-E.F;var Q=y.D;P=Ii(),Ut(P,new Es(P,w)),di(y)}else xu(y);else if(Q=E.m,Q==3||Q==0&&E.X>0||!(P==1&&_o(y,E)||P==2&&Ca(y)))switch(w&&w.length>0&&(E=y.h,E.i=E.i.concat(w)),Q){case 1:fi(y,5);break;case 4:fi(y,10);break;case 3:fi(y,6);break;default:fi(y,2)}}}function _u(y,E){let w=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(w*=2),w*E}function fi(y,E){if(y.j.info("Error code "+E),E==2){var w=m(y.bb,y),P=y.Ua;const Q=!P;P=new an(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||zt(P,"https"),_a(P),Q?Fs(P.toString(),w):Gl(P.toString(),w)}else Yt(2);y.I=0,y.l&&y.l.pa(E),Tu(y),bo(y)}n.bb=function(y){y?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function Tu(y){if(y.I=0,y.ja=[],y.l){const E=Wn(y.h);(E.length!=0||y.i.length!=0)&&(C(y.ja,E),C(y.ja,y.i),y.h.i.length=0,A(y.i),y.i.length=0),y.l.oa()}}function Eu(y,E,w){var P=w instanceof an?Pt(w):new an(w);if(P.g!="")E&&(P.g=E+"."+P.g),Xn(P,P.u);else{var Q=c.location;P=Q.protocol,E=E?E+"."+Q.hostname:Q.hostname,Q=+Q.port;const ne=new an(null);P&&zt(ne,P),E&&(ne.g=E),Q&&Xn(ne,Q),w&&(ne.h=w),P=ne}return w=y.G,E=y.wa,w&&E&&_t(P,w,E),_t(P,"VER",y.ka),Na(y,P),P}function Su(y,E,w){if(E&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=y.Aa&&!y.ma?new It(new li({ab:w})):new It(y.ma),E.Fa(y.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Au(){}n=Au.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Sr(){}Sr.prototype.g=function(y,E){return new Bn(y,E)};function Bn(y,E){St.call(this),this.g=new Tr(E),this.l=y,this.h=E&&E.messageUrlParams||null,y=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(y?y["X-WebChannel-Content-Type"]=E.messageContentType:y={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(y?y["X-WebChannel-Client-Profile"]=E.sa:y={"X-WebChannel-Client-Profile":E.sa}),this.g.U=y,(y=E&&E.Qb)&&!j(y)&&(this.g.u=y),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!j(E)&&(this.g.G=E,y=this.h,y!==null&&E in y&&(y=this.h,E in y&&delete y[E])),this.j=new Li(this)}_(Bn,St),Bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bn.prototype.close=function(){zl(this.g)},Bn.prototype.o=function(y){var E=this.g;if(typeof y=="string"){var w={};w.__data__=y,y=w}else this.v&&(w={},w.__data__=mn(y),y=w);E.i.push(new Ve(E.Ya++,y)),E.I==3&&di(E)},Bn.prototype.N=function(){this.g.l=null,delete this.j,zl(this.g),delete this.g,Bn.Z.N.call(this)};function wu(y){qe.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var E=y.__sm__;if(E){e:{for(const w in E){y=w;break e}y=void 0}(this.i=y)&&(y=this.i,E=E!==null&&y in E?E[y]:void 0),this.data=E}else this.data=y}_(wu,qe);function Nu(){Vn.call(this),this.status=1}_(Nu,Vn);function Li(y){this.g=y}_(Li,Au),Li.prototype.ra=function(){Ut(this.g,"a")},Li.prototype.qa=function(y){Ut(this.g,new wu(y))},Li.prototype.pa=function(y){Ut(this.g,new Nu)},Li.prototype.oa=function(){Ut(this.g,"b")},Sr.prototype.createWebChannel=Sr.prototype.g,Bn.prototype.send=Bn.prototype.o,Bn.prototype.open=Bn.prototype.m,Bn.prototype.close=Bn.prototype.close,lA=function(){return new Sr},oA=function(){return Ii()},aA=Dt,e0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Mi.NO_ERROR=0,Mi.TIMEOUT=8,Mi.HTTP_ERROR=6,qd=Mi,ya.COMPLETE="complete",rA=ya,mr.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",St.prototype.listen=St.prototype.J,Dc=mr,It.prototype.listenOnce=It.prototype.K,It.prototype.getLastError=It.prototype.Ha,It.prototype.getLastErrorCode=It.prototype.ya,It.prototype.getStatus=It.prototype.ca,It.prototype.getResponseJson=It.prototype.La,It.prototype.getResponseText=It.prototype.la,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Fa,iA=It}).apply(typeof Ud<"u"?Ud:typeof self<"u"?self:typeof window<"u"?window:{});const pT="@firebase/firestore",gT="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new U0("@firebase/firestore");function el(){return to.logLevel}function ke(n,...e){if(to.logLevel<=ct.DEBUG){const t=e.map(O0);to.debug(`Firestore (${Nl}): ${n}`,...t)}}function rr(n,...e){if(to.logLevel<=ct.ERROR){const t=e.map(O0);to.error(`Firestore (${Nl}): ${n}`,...t)}}function ml(n,...e){if(to.logLevel<=ct.WARN){const t=e.map(O0);to.warn(`Firestore (${Nl}): ${n}`,...t)}}function O0(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,cA(n,s,t)}function cA(n,e,t){let s=`FIRESTORE (${Nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw rr(s),new Error(s)}function At(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||cA(e,r,s)}function Xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends dr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class H6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Dn.UNAUTHENTICATED)))}shutdown(){}}class z6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class F6{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){At(this.o===void 0,42304);let s=this.i;const r=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let o=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new tr,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const p=o;e.enqueueRetryable((async()=>{await p.promise,await r(this.currentUser)}))},f=p=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new tr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(At(typeof s.accessToken=="string",31837,{l:s}),new uA(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return At(e===null||typeof e=="string",2055,{h:e}),new Dn(e)}}class q6{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class K6{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new q6(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $6{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){At(this.o===void 0,3512);const s=o=>{o.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>s(o)))};const r=o=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new yT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(At(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new yT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=Y6(40);for(let o=0;o<r.length;++o)s.length<20&&r[o]<t&&(s+=e.charAt(r[o]%62))}return s}}function ut(n,e){return n<e?-1:n>e?1:0}function t0(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),o=e.charAt(s);if(r!==o)return Sp(r)===Sp(o)?ut(r,o):Sp(r)?1:-1}return ut(n.length,e.length)}const J6=55296,Q6=57343;function Sp(n){const e=n.charCodeAt(0);return e>=J6&&e<=Q6}function pl(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="__name__";class xi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ke(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ke(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return xi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const o=xi.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return ut(e.length,t.length)}static compareSegments(e,t){const s=xi.isNumericId(e),r=xi.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?xi.extractNumericId(e).compare(xi.extractNumericId(t)):t0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return na.fromString(e.substring(4,e.length-2))}}class Vt extends xi{construct(e,t,s){return new Vt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ne(de.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new Vt(t)}static emptyPath(){return new Vt([])}}const W6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends xi{construct(e,t,s){return new Nn(e,t,s)}static isValidIdentifier(e){return W6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xT}static keyField(){return new Nn([xT])}static fromServerFormat(e){const t=[];let s="",r=0;const o=()=>{if(s.length===0)throw new Ne(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;r<e.length;){const f=e[r];if(f==="\\"){if(r+1===e.length)throw new Ne(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[r+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ne(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,r+=2}else f==="`"?(c=!c,r++):f!=="."||c?(s+=f,r++):(o(),r++)}if(o(),c)throw new Ne(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nn(t)}static emptyPath(){return new Nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(Vt.fromString(e))}static fromName(e){return new Oe(Vt.fromString(e).popFirst(5))}static empty(){return new Oe(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new Vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(n,e,t){if(!t)throw new Ne(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function X6(n,e,t,s){if(e===!0&&s===!0)throw new Ne(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vT(n){if(!Oe.isDocumentKey(n))throw new Ne(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bT(n){if(Oe.isDocumentKey(n))throw new Ne(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function zf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ke(12329,{type:typeof n})}function si(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zf(n);throw new Ne(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(n,e){const t={typeString:n};return e&&(t.value=e),t}function nu(n,e){if(!fA(n))throw new Ne(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,o="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(r&&typeof c!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${s}' field to equal '${o.value}'`;break}}if(t)throw new Ne(de.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=-62135596800,TT=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*TT);return new Ht(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_T)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/TT}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nu(e,Ht._jsonSchema))return new Ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_T;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ht._jsonSchemaVersion="firestore/timestamp/1.0",Ht._jsonSchema={type:hn("string",Ht._jsonSchemaVersion),seconds:hn("number"),nanoseconds:hn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new Ht(0,0))}static max(){return new Qe(new Ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=-1;function Z6(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=Qe.fromTimestamp(s===1e9?new Ht(t+1,0):new Ht(t,s));return new ia(r,Oe.empty(),e)}function e5(n){return new ia(n.readTime,n.key,qc)}class ia{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ia(Qe.min(),Oe.empty(),qc)}static max(){return new ia(Qe.max(),Oe.empty(),qc)}}function t5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Oe.comparator(n.documentKey,e.documentKey),t!==0?t:ut(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class s5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==n5)throw n;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he(((s,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):he.reject(t)}static resolve(e){return new he(((t,s)=>{t(e)}))}static reject(e){return new he(((t,s)=>{s(e)}))}static waitFor(e){return new he(((t,s)=>{let r=0,o=0,c=!1;e.forEach((f=>{++r,f.next((()=>{++o,c&&o===r&&t()}),(p=>s(p)))})),c=!0,o===r&&t()}))}static or(e){let t=he.resolve(!1);for(const s of e)t=t.next((r=>r?he.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,o)=>{s.push(t.call(this,r,o))})),this.waitFor(s)}static mapArray(e,t){return new he(((s,r)=>{const o=e.length,c=new Array(o);let f=0;for(let p=0;p<o;p++){const m=p;t(e[m]).next((v=>{c[m]=v,++f,f===o&&s(c)}),(v=>r(v)))}}))}static doWhile(e,t){return new he(((s,r)=>{const o=()=>{e()===!0?t().next((()=>{o()}),r):s()};o()}))}}function i5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Il(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ff.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=-1;function qf(n){return n==null}function hf(n){return n===0&&1/n==-1/0}function r5(n){return typeof n=="number"&&Number.isInteger(n)&&!hf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="";function a5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ET(e)),e=o5(n.get(t),e);return ET(e)}function o5(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const o=n.charAt(r);switch(o){case"\0":t+="";break;case hA:t+="";break;default:t+=o}}return t}function ET(n){return n+hA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ha(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t){this.comparator=e,this.root=t||wn.EMPTY}insert(e,t){return new Kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vd(this.root,e,this.comparator,!0)}}class Vd{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?s(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wn{constructor(e,t,s,r,o){this.key=e,this.value=t,this.color=s??wn.RED,this.left=r??wn.EMPTY,this.right=o??wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,o){return new wn(e??this.key,t??this.value,s??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const o=s(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,s),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return wn.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ke(27949);return e+(this.isRed()?0:1)}}wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke(57766)}get value(){throw Ke(16141)}get color(){throw Ke(16727)}get left(){throw Ke(29726)}get right(){throw Ke(36894)}copy(e,t,s,r,o){return this}insert(e,t,s){return new wn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new AT(this.data.getIterator())}getIteratorFrom(e){return new AT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=s.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gn(this.comparator);return t.data=e,t}}class AT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.fields=e,e.sort(Nn.comparator)}static empty(){return new _s([])}unionWith(e){let t=new gn(Nn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new _s(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pl(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new pA("Invalid base64 string: "+o):o}})(e);return new In(t)}static fromUint8Array(e){const t=(function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o})(e);return new In(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}In.EMPTY_BYTE_STRING=new In("");const l5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ra(n){if(At(!!n,39018),typeof n=="string"){let e=0;const t=l5.exec(n);if(At(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:nn(n.seconds),nanos:nn(n.nanos)}}function nn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function aa(n){return typeof n=="string"?In.fromBase64String(n):In.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="server_timestamp",yA="__type__",xA="__previous_value__",vA="__local_write_time__";function H0(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[yA])==null?void 0:s.stringValue)===gA}function Kf(n){const e=n.mapValue.fields[xA];return H0(e)?Kf(e):e}function Kc(n){const e=ra(n.mapValue.fields[vA].timestampValue);return new Ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e,t,s,r,o,c,f,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const mf="(default)";class $c{constructor(e,t){this.projectId=e,this.database=t||mf}static empty(){return new $c("","")}get isDefaultDatabase(){return this.database===mf}isEqual(e){return e instanceof $c&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="__type__",u5="__max__",jd={mapValue:{}},_A="__vector__",pf="value";function oa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?H0(n)?4:f5(n)?9007199254740991:d5(n)?10:11:Ke(28295,{value:n})}function Si(n,e){if(n===e)return!0;const t=oa(n);if(t!==oa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Kc(n).isEqual(Kc(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=ra(r.timestampValue),f=ra(o.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return aa(r.bytesValue).isEqual(aa(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return nn(r.geoPointValue.latitude)===nn(o.geoPointValue.latitude)&&nn(r.geoPointValue.longitude)===nn(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return nn(r.integerValue)===nn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=nn(r.doubleValue),f=nn(o.doubleValue);return c===f?hf(c)===hf(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return pl(n.arrayValue.values||[],e.arrayValue.values||[],Si);case 10:case 11:return(function(r,o){const c=r.mapValue.fields||{},f=o.mapValue.fields||{};if(ST(c)!==ST(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!Si(c[p],f[p])))return!1;return!0})(n,e);default:return Ke(52216,{left:n})}}function Yc(n,e){return(n.values||[]).find((t=>Si(t,e)))!==void 0}function gl(n,e){if(n===e)return 0;const t=oa(n),s=oa(e);if(t!==s)return ut(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ut(n.booleanValue,e.booleanValue);case 2:return(function(o,c){const f=nn(o.integerValue||o.doubleValue),p=nn(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(n,e);case 3:return wT(n.timestampValue,e.timestampValue);case 4:return wT(Kc(n),Kc(e));case 5:return t0(n.stringValue,e.stringValue);case 6:return(function(o,c){const f=aa(o),p=aa(c);return f.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(o,c){const f=o.split("/"),p=c.split("/");for(let m=0;m<f.length&&m<p.length;m++){const v=ut(f[m],p[m]);if(v!==0)return v}return ut(f.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,c){const f=ut(nn(o.latitude),nn(c.latitude));return f!==0?f:ut(nn(o.longitude),nn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return NT(n.arrayValue,e.arrayValue);case 10:return(function(o,c){var T,A,C,D;const f=o.fields||{},p=c.fields||{},m=(T=f[pf])==null?void 0:T.arrayValue,v=(A=p[pf])==null?void 0:A.arrayValue,_=ut(((C=m==null?void 0:m.values)==null?void 0:C.length)||0,((D=v==null?void 0:v.values)==null?void 0:D.length)||0);return _!==0?_:NT(m,v)})(n.mapValue,e.mapValue);case 11:return(function(o,c){if(o===jd.mapValue&&c===jd.mapValue)return 0;if(o===jd.mapValue)return 1;if(c===jd.mapValue)return-1;const f=o.fields||{},p=Object.keys(f),m=c.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let _=0;_<p.length&&_<v.length;++_){const T=t0(p[_],v[_]);if(T!==0)return T;const A=gl(f[p[_]],m[v[_]]);if(A!==0)return A}return ut(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Ke(23264,{he:t})}}function wT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ut(n,e);const t=ra(n),s=ra(e),r=ut(t.seconds,s.seconds);return r!==0?r:ut(t.nanos,s.nanos)}function NT(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const o=gl(t[r],s[r]);if(o)return o}return ut(t.length,s.length)}function yl(n){return n0(n)}function n0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=ra(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return aa(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Oe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const o of t.values||[])r?r=!1:s+=",",s+=n0(o);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",o=!0;for(const c of s)o?o=!1:r+=",",r+=`${c}:${n0(t.fields[c])}`;return r+"}"})(n.mapValue):Ke(61005,{value:n})}function Kd(n){switch(oa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kf(n);return e?16+Kd(e):16;case 5:return 2*n.stringValue.length;case 6:return aa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,o)=>r+Kd(o)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return ha(s.fields,((o,c)=>{r+=o.length+Kd(c)})),r})(n.mapValue);default:throw Ke(13486,{value:n})}}function CT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function s0(n){return!!n&&"integerValue"in n}function z0(n){return!!n&&"arrayValue"in n}function IT(n){return!!n&&"nullValue"in n}function kT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $d(n){return!!n&&"mapValue"in n}function d5(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[bA])==null?void 0:s.stringValue)===_A}function jc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ha(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=jc(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jc(n.arrayValue.values[t]);return e}return{...n}}function f5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===u5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.value=e}static empty(){return new os({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!$d(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jc(t)}setAll(e){let t=Nn.emptyPath(),s={},r=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,s,r),s={},r=[],t=f.popLast()}c?s[f.lastSegment()]=jc(c):r.push(f.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,s,r)}delete(e){const t=this.field(e.popLast());$d(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Si(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];$d(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){ha(t,((r,o)=>e[r]=o));for(const r of s)delete e[r]}clone(){return new os(jc(this.value))}}function TA(n){const e=[];return ha(n.fields,((t,s)=>{const r=new Nn([t]);if($d(s)){const o=TA(s.mapValue).fields;if(o.length===0)e.push(r);else for(const c of o)e.push(r.child(c))}else e.push(r)})),new _s(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,t,s,r,o,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=o,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Pn(e,0,Qe.min(),Qe.min(),Qe.min(),os.empty(),0)}static newFoundDocument(e,t,s,r){return new Pn(e,1,t,Qe.min(),s,r,0)}static newNoDocument(e,t){return new Pn(e,2,t,Qe.min(),Qe.min(),os.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,Qe.min(),Qe.min(),os.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=os.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=os.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t){this.position=e,this.inclusive=t}}function RT(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const o=e[r],c=n.position[r];if(o.field.isKeyField()?s=Oe.comparator(Oe.fromName(c.referenceValue),t.key):s=gl(c,t.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function MT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Si(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t="asc"){this.field=e,this.dir=t}}function h5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{}class fn extends EA{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new p5(e,t,s):t==="array-contains"?new x5(e,s):t==="in"?new v5(e,s):t==="not-in"?new b5(e,s):t==="array-contains-any"?new _5(e,s):new fn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new g5(e,s):new y5(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(gl(t,this.value)):t!==null&&oa(this.value)===oa(t)&&this.matchesComparison(gl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ii extends EA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ii(e,t)}matches(e){return SA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function SA(n){return n.op==="and"}function AA(n){return m5(n)&&SA(n)}function m5(n){for(const e of n.filters)if(e instanceof ii)return!1;return!0}function i0(n){if(n instanceof fn)return n.field.canonicalString()+n.op.toString()+yl(n.value);if(AA(n))return n.filters.map((e=>i0(e))).join(",");{const e=n.filters.map((t=>i0(t))).join(",");return`${n.op}(${e})`}}function wA(n,e){return n instanceof fn?(function(s,r){return r instanceof fn&&s.op===r.op&&s.field.isEqual(r.field)&&Si(s.value,r.value)})(n,e):n instanceof ii?(function(s,r){return r instanceof ii&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((o,c,f)=>o&&wA(c,r.filters[f])),!0):!1})(n,e):void Ke(19439)}function NA(n){return n instanceof fn?(function(t){return`${t.field.canonicalString()} ${t.op} ${yl(t.value)}`})(n):n instanceof ii?(function(t){return t.op.toString()+" {"+t.getFilters().map(NA).join(" ,")+"}"})(n):"Filter"}class p5 extends fn{constructor(e,t,s){super(e,t,s),this.key=Oe.fromName(s.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class g5 extends fn{constructor(e,t){super(e,"in",t),this.keys=CA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class y5 extends fn{constructor(e,t){super(e,"not-in",t),this.keys=CA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function CA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Oe.fromName(s.referenceValue)))}class x5 extends fn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return z0(t)&&Yc(t.arrayValue,this.value)}}class v5 extends fn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yc(this.value.arrayValue,t)}}class b5 extends fn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Yc(this.value.arrayValue,t)}}class _5 extends fn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!z0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Yc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e,t=null,s=[],r=[],o=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=o,this.startAt=c,this.endAt=f,this.Te=null}}function DT(n,e=null,t=[],s=[],r=null,o=null,c=null){return new T5(n,e,t,s,r,o,c)}function F0(n){const e=Xe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>i0(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(o){return o.field.canonicalString()+o.dir})(s))).join(","),qf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>yl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>yl(s))).join(",")),e.Te=t}return e.Te}function q0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!h5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MT(n.startAt,e.startAt)&&MT(n.endAt,e.endAt)}function r0(n){return Oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t=null,s=[],r=[],o=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=o,this.limitType=c,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function E5(n,e,t,s,r,o,c,f){return new kl(n,e,t,s,r,o,c,f)}function K0(n){return new kl(n)}function PT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function IA(n){return n.collectionGroup!==null}function Oc(n){const e=Xe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new gn(Nn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(f=f.add(m.field))}))})),f})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Jc(o,s))})),t.has(Nn.keyField().canonicalString())||e.Ie.push(new Jc(Nn.keyField(),s))}return e.Ie}function vi(n){const e=Xe(n);return e.Ee||(e.Ee=S5(e,Oc(n))),e.Ee}function S5(n,e){if(n.limitType==="F")return DT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new Jc(r.field,o)}));const t=n.endAt?new gf(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new gf(n.startAt.position,n.startAt.inclusive):null;return DT(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function a0(n,e){const t=n.filters.concat([e]);return new kl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function o0(n,e,t){return new kl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $f(n,e){return q0(vi(n),vi(e))&&n.limitType===e.limitType}function kA(n){return`${F0(vi(n))}|lt:${n.limitType}`}function tl(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>NA(r))).join(", ")}]`),qf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>yl(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>yl(r))).join(",")),`Target(${s})`})(vi(n))}; limitType=${n.limitType})`}function Yf(n,e){return e.isFoundDocument()&&(function(s,r){const o=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):Oe.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)})(n,e)&&(function(s,r){for(const o of Oc(s))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const o of s.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(c,f,p){const m=RT(c,f,p);return c.inclusive?m<=0:m<0})(s.startAt,Oc(s),r)||s.endAt&&!(function(c,f,p){const m=RT(c,f,p);return c.inclusive?m>=0:m>0})(s.endAt,Oc(s),r))})(n,e)}function A5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RA(n){return(e,t)=>{let s=!1;for(const r of Oc(n)){const o=w5(r,e,t);if(o!==0)return o;s=s||r.field.isKeyField()}return 0}}function w5(n,e,t){const s=n.field.isKeyField()?Oe.comparator(e.key,t.key):(function(o,c,f){const p=c.data.field(o),m=f.data.field(o);return p!==null&&m!==null?gl(p,m):Ke(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ke(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,o]of s)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,((t,s)=>{for(const[r,o]of s)e(r,o)}))}isEmpty(){return mA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5=new Kt(Oe.comparator);function ar(){return N5}const MA=new Kt(Oe.comparator);function Pc(...n){let e=MA;for(const t of n)e=e.insert(t.key,t);return e}function DA(n){let e=MA;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ya(){return Gc()}function PA(){return Gc()}function Gc(){return new ao((n=>n.toString()),((n,e)=>n.isEqual(e)))}const C5=new Kt(Oe.comparator),I5=new gn(Oe.comparator);function dt(...n){let e=I5;for(const t of n)e=e.add(t);return e}const k5=new gn(ut);function R5(){return k5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hf(e)?"-0":e}}function LA(n){return{integerValue:""+n}}function M5(n,e){return r5(e)?LA(e):$0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this._=void 0}}function D5(n,e,t){return n instanceof yf?(function(r,o){const c={fields:{[yA]:{stringValue:gA},[vA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&H0(o)&&(o=Kf(o)),o&&(c.fields[xA]=o),{mapValue:c}})(t,e):n instanceof Qc?VA(n,e):n instanceof Wc?jA(n,e):(function(r,o){const c=UA(r,o),f=LT(c)+LT(r.Ae);return s0(c)&&s0(r.Ae)?LA(f):$0(r.serializer,f)})(n,e)}function P5(n,e,t){return n instanceof Qc?VA(n,e):n instanceof Wc?jA(n,e):t}function UA(n,e){return n instanceof xf?(function(s){return s0(s)||(function(o){return!!o&&"doubleValue"in o})(s)})(e)?e:{integerValue:0}:null}class yf extends Jf{}class Qc extends Jf{constructor(e){super(),this.elements=e}}function VA(n,e){const t=OA(e);for(const s of n.elements)t.some((r=>Si(r,s)))||t.push(s);return{arrayValue:{values:t}}}class Wc extends Jf{constructor(e){super(),this.elements=e}}function jA(n,e){let t=OA(e);for(const s of n.elements)t=t.filter((r=>!Si(r,s)));return{arrayValue:{values:t}}}class xf extends Jf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function LT(n){return nn(n.integerValue||n.doubleValue)}function OA(n){return z0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function L5(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof Qc&&r instanceof Qc||s instanceof Wc&&r instanceof Wc?pl(s.elements,r.elements,Si):s instanceof xf&&r instanceof xf?Si(s.Ae,r.Ae):s instanceof yf&&r instanceof yf})(n.transform,e.transform)}class U5{constructor(e,t){this.version=e,this.transformResults=t}}class Gs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gs}static exists(e){return new Gs(void 0,e)}static updateTime(e){return new Gs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Qf{}function GA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Y0(n.key,Gs.none()):new su(n.key,n.data,Gs.none());{const t=n.data,s=os.empty();let r=new gn(Nn.comparator);for(let o of e.fields)if(!r.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?s.delete(o):s.set(o,c),r=r.add(o)}return new ma(n.key,s,new _s(r.toArray()),Gs.none())}}function V5(n,e,t){n instanceof su?(function(r,o,c){const f=r.value.clone(),p=VT(r.fieldTransforms,o,c.transformResults);f.setAll(p),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof ma?(function(r,o,c){if(!Yd(r.precondition,o))return void o.convertToUnknownDocument(c.version);const f=VT(r.fieldTransforms,o,c.transformResults),p=o.data;p.setAll(BA(r)),p.setAll(f),o.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(r,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Bc(n,e,t,s){return n instanceof su?(function(o,c,f,p){if(!Yd(o.precondition,c))return f;const m=o.value.clone(),v=jT(o.fieldTransforms,p,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof ma?(function(o,c,f,p){if(!Yd(o.precondition,c))return f;const m=jT(o.fieldTransforms,p,c),v=c.data;return v.setAll(BA(o)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),f===null?null:f.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(n,e,t,s):(function(o,c,f){return Yd(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function j5(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),o=UA(s.transform,r||null);o!=null&&(t===null&&(t=os.empty()),t.set(s.field,o))}return t||null}function UT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&pl(s,r,((o,c)=>L5(o,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class su extends Qf{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ma extends Qf{constructor(e,t,s,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function BA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function VT(n,e,t){const s=new Map;At(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const o=n[r],c=o.transform,f=e.data.field(o.field);s.set(o.field,P5(c,f,t[r]))}return s}function jT(n,e,t){const s=new Map;for(const r of n){const o=r.transform,c=t.data.field(r.field);s.set(r.field,D5(o,c,e))}return s}class Y0 extends Qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class O5 extends Qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&V5(o,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Bc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Bc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=PA();return this.mutations.forEach((r=>{const o=e.get(r.key),c=o.overlayedDocument;let f=this.applyToLocalView(c,o.mutatedFields);f=t.has(r.key)?null:f;const p=GA(c,f);p!==null&&s.set(r.key,p),c.isValidDocument()||c.convertToNoDocument(Qe.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),dt())}isEqual(e){return this.batchId===e.batchId&&pl(this.mutations,e.mutations,((t,s)=>UT(t,s)))&&pl(this.baseMutations,e.baseMutations,((t,s)=>UT(t,s)))}}class J0{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){At(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return C5})();const o=e.mutations;for(let c=0;c<o.length;c++)r=r.insert(o[c].key,s[c].version);return new J0(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn,ht;function z5(n){switch(n){case de.OK:return Ke(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Ke(15467,{code:n})}}function HA(n){if(n===void 0)return rr("GRPC error has no .code"),de.UNKNOWN;switch(n){case dn.OK:return de.OK;case dn.CANCELLED:return de.CANCELLED;case dn.UNKNOWN:return de.UNKNOWN;case dn.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case dn.INTERNAL:return de.INTERNAL;case dn.UNAVAILABLE:return de.UNAVAILABLE;case dn.UNAUTHENTICATED:return de.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case dn.NOT_FOUND:return de.NOT_FOUND;case dn.ALREADY_EXISTS:return de.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return de.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case dn.ABORTED:return de.ABORTED;case dn.OUT_OF_RANGE:return de.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return de.UNIMPLEMENTED;case dn.DATA_LOSS:return de.DATA_LOSS;default:return Ke(39323,{code:n})}}(ht=dn||(dn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=new na([4294967295,4294967295],0);function OT(n){const e=F5().encode(n),t=new sA;return t.update(e),new Uint8Array(t.digest())}function GT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new na([t,s],0),new na([r,o],0)]}class Q0{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Lc(`Invalid padding: ${t}`);if(s<0)throw new Lc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Lc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Lc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=na.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(na.fromNumber(s)));return r.compare(q5)===1&&(r=new na([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=OT(e),[s,r]=GT(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(s,r,o);if(!this.we(c))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Q0(o,r,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=OT(e),[s,r]=GT(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(s,r,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t,s,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,iu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Wf(Qe.min(),r,new Kt(ut),ar(),dt())}}class iu{constructor(e,t,s,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new iu(s,t,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class zA{constructor(e,t){this.targetId=e,this.Ce=t}}class FA{constructor(e,t,s=In.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class BT{constructor(){this.ve=0,this.Fe=HT(),this.Me=In.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dt(),t=dt(),s=dt();return this.Fe.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:Ke(38017,{changeType:o})}})),new iu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=HT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,At(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class K5{constructor(e){this.Ge=e,this.ze=new Map,this.je=ar(),this.Je=Od(),this.He=Od(),this.Ye=new Kt(ut)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(r0(o))if(s===0){const c=new Oe(o.path);this.et(t,c,Pn.newNoDocument(c,Qe.min()))}else At(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const f=this.ut(e),p=f?this.ct(f,e,c):1;if(p!==0){this.it(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:o=0}=t;let c,f;try{c=aa(s).toUint8Array()}catch(p){if(p instanceof pA)return ml("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Q0(c,r,o)}catch(p){return ml(p instanceof Lc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((o=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(f)||(this.et(t,o,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const f=this.ot(c);if(f){if(o.current&&r0(f.target)){const p=new Oe(f.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Pn.newNoDocument(p,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let s=dt();this.He.forEach(((o,c)=>{let f=!0;c.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const r=new Wf(e,t,this.Ye,this.je,s);return this.je=ar(),this.Je=Od(),this.He=Od(),this.Ye=new Kt(ut),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new BT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new gn(ut),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new gn(ut),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ke("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new BT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Od(){return new Kt(Oe.comparator)}function HT(){return new Kt(Oe.comparator)}const $5={asc:"ASCENDING",desc:"DESCENDING"},Y5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J5={and:"AND",or:"OR"};class Q5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function l0(n,e){return n.useProto3Json||qf(e)?e:{value:e}}function vf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function W5(n,e){return vf(n,e.toTimestamp())}function bi(n){return At(!!n,49232),Qe.fromTimestamp((function(t){const s=ra(t);return new Ht(s.seconds,s.nanos)})(n))}function W0(n,e){return c0(n,e).canonicalString()}function c0(n,e){const t=(function(r){return new Vt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function KA(n){const e=Vt.fromString(n);return At(WA(e),10190,{key:e.toString()}),e}function u0(n,e){return W0(n.databaseId,e.path)}function Ap(n,e){const t=KA(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(YA(t))}function $A(n,e){return W0(n.databaseId,e)}function X5(n){const e=KA(n);return e.length===4?Vt.emptyPath():YA(e)}function d0(n){return new Vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function YA(n){return At(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function zT(n,e,t){return{name:u0(n,e),fields:t.value.mapValue.fields}}function Z5(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ke(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(m,v){return m.useProto3Json?(At(v===void 0||typeof v=="string",58123),In.fromBase64String(v||"")):(At(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),In.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(m){const v=m.code===void 0?de.UNKNOWN:HA(m.code);return new Ne(v,m.message||"")})(c);t=new FA(s,r,o,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Ap(n,s.document.name),o=bi(s.document.updateTime),c=s.document.createTime?bi(s.document.createTime):Qe.min(),f=new os({mapValue:{fields:s.document.fields}}),p=Pn.newFoundDocument(r,o,c,f),m=s.targetIds||[],v=s.removedTargetIds||[];t=new Jd(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Ap(n,s.document),o=s.readTime?bi(s.readTime):Qe.min(),c=Pn.newNoDocument(r,o),f=s.removedTargetIds||[];t=new Jd([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Ap(n,s.document),o=s.removedTargetIds||[];t=new Jd([],o,r,null)}else{if(!("filter"in e))return Ke(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:o}=s,c=new H5(r,o),f=s.targetId;t=new zA(f,c)}}return t}function eL(n,e){let t;if(e instanceof su)t={update:zT(n,e.key,e.value)};else if(e instanceof Y0)t={delete:u0(n,e.key)};else if(e instanceof ma)t={update:zT(n,e.key,e.data),updateMask:cL(e.fieldMask)};else{if(!(e instanceof O5))return Ke(16599,{Vt:e.type});t={verify:u0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(o,c){const f=c.transform;if(f instanceof yf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Qc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Wc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof xf)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Ke(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:W5(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ke(27497)})(n,e.precondition)),t}function tL(n,e){return n&&n.length>0?(At(e!==void 0,14353),n.map((t=>(function(r,o){let c=r.updateTime?bi(r.updateTime):bi(o);return c.isEqual(Qe.min())&&(c=bi(o)),new U5(c,r.transformResults||[])})(t,e)))):[]}function nL(n,e){return{documents:[$A(n,e.path)]}}function sL(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=$A(n,r);const o=(function(m){if(m.length!==0)return QA(ii.create(m,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(m){if(m.length!==0)return m.map((v=>(function(T){return{field:nl(T.field),direction:aL(T.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=l0(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:r}}function iL(n){let e=X5(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){At(s===1,65062);const v=t.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let o=[];t.where&&(o=(function(_){const T=JA(_);return T instanceof ii&&AA(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(_){return _.map((T=>(function(C){return new Jc(sl(C.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(T)))})(t.orderBy));let f=null;t.limit&&(f=(function(_){let T;return T=typeof _=="object"?_.value:_,qf(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(_){const T=!!_.before,A=_.values||[];return new gf(A,T)})(t.startAt));let m=null;return t.endAt&&(m=(function(_){const T=!_.before,A=_.values||[];return new gf(A,T)})(t.endAt)),E5(e,r,c,o,f,"F",p,m)}function rL(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=sl(t.unaryFilter.field);return fn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=sl(t.unaryFilter.field);return fn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=sl(t.unaryFilter.field);return fn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=sl(t.unaryFilter.field);return fn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ke(61313);default:return Ke(60726)}})(n):n.fieldFilter!==void 0?(function(t){return fn.create(sl(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ke(58110);default:return Ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ii.create(t.compositeFilter.filters.map((s=>JA(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ke(1026)}})(t.compositeFilter.op))})(n):Ke(30097,{filter:n})}function aL(n){return $5[n]}function oL(n){return Y5[n]}function lL(n){return J5[n]}function nl(n){return{fieldPath:n.canonicalString()}}function sl(n){return Nn.fromServerFormat(n.fieldPath)}function QA(n){return n instanceof fn?(function(t){if(t.op==="=="){if(kT(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NAN"}};if(IT(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kT(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NOT_NAN"}};if(IT(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nl(t.field),op:oL(t.op),value:t.value}}})(n):n instanceof ii?(function(t){const s=t.getFilters().map((r=>QA(r)));return s.length===1?s[0]:{compositeFilter:{op:lL(t.op),filters:s}}})(n):Ke(54877,{filter:n})}function cL(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function WA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,t,s,r,o=Qe.min(),c=Qe.min(),f=In.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.yt=e}}function dL(n){const e=iL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?o0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(){this.Cn=new hL}addToCollectionParentIndex(e,t){return this.Cn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(ia.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(ia.min())}updateCollectionGroup(e,t,s){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class hL{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new gn(Vt.comparator),o=!r.has(s);return this.index[t]=r.add(s),o}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new gn(Vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XA=41943040;class as{static withCacheSize(e){return new as(e,as.DEFAULT_COLLECTION_PERCENTILE,as.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */as.DEFAULT_COLLECTION_PERCENTILE=10,as.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,as.DEFAULT=new as(XA,as.DEFAULT_COLLECTION_PERCENTILE,as.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),as.DISABLED=new as(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new xl(0)}static cr(){return new xl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="LruGarbageCollector",mL=1048576;function KT([n,e],[t,s]){const r=ut(n,t);return r===0?ut(e,s):r}class pL{constructor(e){this.Ir=e,this.buffer=new gn(KT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();KT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gL{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ke(qT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Il(t)?ke(qT,"Ignoring IndexedDB error during garbage collection: ",t):await Cl(t)}await this.Vr(3e5)}))}}class yL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return he.resolve(Ff.ce);const s=new pL(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(FT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,o,c,f,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,c=Date.now(),this.nthSequenceNumber(e,r)))).next((_=>(s=_,f=Date.now(),this.removeTargets(e,s,t)))).next((_=>(o=_,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(m=Date.now(),el()<=ct.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${r} in `+(f-c)+`ms
	Removed ${o} targets in `+(p-f)+`ms
	Removed ${_} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_}))))}}function xL(n,e){return new yL(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(){this.changes=new ao((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?he.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&Bc(s.mutation,r,_s.empty(),Ht.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,dt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=dt()){const r=Ya();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((o=>{let c=Pc();return o.forEach(((f,p)=>{c=c.insert(f,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Ya();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,dt())))}populateOverlays(e,t,s){const r=[];return s.forEach((o=>{t.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,r){let o=ar();const c=Gc(),f=(function(){return Gc()})();return t.forEach(((p,m)=>{const v=s.get(m.key);r.has(m.key)&&(v===void 0||v.mutation instanceof ma)?o=o.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),Bc(v.mutation,m,v.mutation.getFieldMask(),Ht.now())):c.set(m.key,_s.empty())})),this.recalculateAndSaveOverlays(e,o).next((p=>(p.forEach(((m,v)=>c.set(m,v))),t.forEach(((m,v)=>f.set(m,new bL(v,c.get(m)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Gc();let r=new Kt(((c,f)=>c-f)),o=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=s.get(p)||_s.empty();v=f.applyToLocalView(m,v),s.set(p,v);const _=(r.get(f.batchId)||dt()).add(p);r=r.insert(f.batchId,_)}))})).next((()=>{const c=[],f=r.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),m=p.key,v=p.value,_=PA();v.forEach((T=>{if(!o.has(T)){const A=GA(t.get(T),s.get(T));A!==null&&_.set(T,A),o=o.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,_))}return he.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(c){return Oe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):IA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((o=>{const c=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-o.size):he.resolve(Ya());let f=qc,p=o;return c.next((m=>he.forEach(m,((v,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),o.get(v)?he.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{p=p.insert(v,T)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,p,m,dt()))).next((v=>({batchId:f,changes:DA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next((s=>{let r=Pc();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const o=t.collectionGroup;let c=Pc();return this.indexManager.getCollectionParents(e,o).next((f=>he.forEach(f,(p=>{const m=(function(_,T){return new kl(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,p.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,s,r).next((v=>{v.forEach(((_,T)=>{c=c.insert(_,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,o,r)))).next((c=>{o.forEach(((p,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,Pn.newInvalidDocument(v)))}));let f=Pc();return c.forEach(((p,m)=>{const v=o.get(p);v!==void 0&&Bc(v.mutation,m,_s.empty(),Ht.now()),Yf(t,m)&&(f=f.insert(p,m))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return he.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:bi(r.createTime)}})(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:dL(r.bundledQuery),readTime:bi(r.readTime)}})(t)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(){this.overlays=new Kt(Oe.comparator),this.qr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ya();return he.forEach(t,(r=>this.getOverlay(e,r).next((o=>{o!==null&&s.set(r,o)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,o)=>{this.St(e,t,o)})),he.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(s)),he.resolve()}getOverlaysForCollection(e,t,s){const r=Ya(),o=t.length+1,c=new Oe(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&p.largestBatchId>s&&r.set(p.getKey(),p)}return he.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let o=new Kt(((m,v)=>m-v));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=o.get(m.largestBatchId);v===null&&(v=Ya(),o=o.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const f=Ya(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>f.set(m,v))),!(f.size()>=r)););return he.resolve(f)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new B5(t,s));let o=this.qr.get(t);o===void 0&&(o=dt(),this.qr.set(t,o)),this.qr.set(t,o.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(){this.sessionToken=In.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.Qr=new gn(vn.$r),this.Ur=new gn(vn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new vn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new vn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Oe(new Vt([])),s=new vn(t,e),r=new vn(t,e+1),o=[];return this.Ur.forEachInRange([s,r],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Oe(new Vt([])),s=new vn(t,e),r=new vn(t,e+1);let o=dt();return this.Ur.forEachInRange([s,r],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new vn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class vn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Oe.comparator(e.key,t.key)||ut(e.Yr,t.Yr)}static Kr(e,t){return ut(e.Yr,t.Yr)||Oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new gn(vn.$r)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new G5(o,t,s,r);this.mutationQueue.push(c);for(const f of r)this.Zr=this.Zr.add(new vn(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),o=r<0?0:r;return he.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?B0:this.tr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new vn(t,0),r=new vn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([s,r],(c=>{const f=this.Xr(c.Yr);o.push(f)})),he.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new gn(ut);return t.forEach((r=>{const o=new vn(r,0),c=new vn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(f=>{s=s.add(f.Yr)}))})),he.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let o=s;Oe.isDocumentKey(o)||(o=o.child(""));const c=new vn(new Oe(o),0);let f=new gn(ut);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===r&&(f=f.add(p.Yr)),!0)}),c),he.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){At(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return he.forEach(t.mutations,(r=>{const o=new vn(r.key,t.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new vn(t,0),r=this.Zr.firstAfterOrEqual(s);return he.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.ri=e,this.docs=(function(){return new Kt(Oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),o=r?r.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return he.resolve(s?s.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let s=ar();return t.forEach((r=>{const o=this.docs.get(r);s=s.insert(r,o?o.document.mutableCopy():Pn.newInvalidDocument(r))})),he.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let o=ar();const c=t.path,f=new Oe(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||t5(e5(v),s)<=0||(r.has(v.key)||Yf(t,v))&&(o=o.insert(v.key,v.mutableCopy()))}return he.resolve(o)}getAllFromCollectionGroup(e,t,s,r){Ke(9500)}ii(e,t){return he.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new NL(this)}getSize(e){return he.resolve(this.size)}}class NL extends vL{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),he.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.persistence=e,this.si=new ao((t=>F0(t)),q0),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.oi=0,this._i=new X0,this.targetCount=0,this.ai=xl.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),he.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new xl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Pr(t),he.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,s){let r=0;const o=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,f.targetId)),r++)})),he.waitFor(o).next((()=>r))}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return he.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),he.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((c=>{o.push(r.markPotentiallyOrphaned(e,c))})),he.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return he.resolve(s)}containsKey(e,t){return he.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ff(0),this.li=!1,this.li=!0,this.hi=new SL,this.referenceDelegate=e(this),this.Pi=new CL(this),this.indexManager=new fL,this.remoteDocumentCache=(function(r){return new wL(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new uL(t),this.Ii=new TL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new EL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new AL(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ke("MemoryPersistence","Starting transaction:",e);const r=new IL(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(e,t){return he.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class IL extends s5{constructor(e){super(),this.currentSequenceNumber=e}}class Z0{constructor(e){this.persistence=e,this.Ri=new X0,this.Vi=null}static mi(e){return new Z0(e)}get fi(){if(this.Vi)return this.Vi;throw Ke(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),he.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.fi,(s=>{const r=Oe.fromPath(s);return this.gi(e,r).next((o=>{o||t.removeEntry(r,Qe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return he.or([()=>he.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class bf{constructor(e,t){this.persistence=e,this.pi=new ao((s=>a5(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=xL(this,t)}static mi(e,t){return new bf(e,t)}Ei(){}di(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return he.forEach(this.pi,((s,r)=>this.br(e,s,r).next((o=>o?he.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,(c=>this.br(e,c,t).next((f=>{f||(s++,o.removeEntry(c,Qe.min()))})))).next((()=>o.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),he.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),he.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kd(e.data.value)),t}br(e,t,s){return he.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return he.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=dt(),r=dt();for(const o of t.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new eg(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return TP()?8:i5(Un())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,r,s).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new kL;return this.Ss(e,t,c).next((f=>{if(o.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>o.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(el()<=ct.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",tl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),he.resolve()):(el()<=ct.DEBUG&&ke("QueryEngine","Query:",tl(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(el()<=ct.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",tl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vi(t))):he.resolve())}ys(e,t){if(PT(t))return he.resolve(null);let s=vi(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=o0(t,null,"F"),s=vi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((o=>{const c=dt(...o);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.Ds(t,f);return this.Cs(t,m,c,p.readTime)?this.ys(e,o0(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ws(e,t,s,r){return PT(t)||r.isEqual(Qe.min())?he.resolve(null):this.ps.getDocuments(e,s).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,s,r)?he.resolve(null):(el()<=ct.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),tl(t)),this.vs(e,c,t,Z6(r,qc)).next((f=>f)))}))}Ds(e,t){let s=new gn(RA(e));return t.forEach(((r,o)=>{Yf(e,o)&&(s=s.add(o))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,t,s){return el()<=ct.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",tl(t)),this.ps.getDocumentsMatchingQuery(e,t,ia.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="LocalStore",ML=3e8;class DL{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Kt(ut),this.xs=new ao((o=>F0(o)),q0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _L(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function PL(n,e,t,s){return new DL(n,e,t,s)}async function ew(n,e){const t=Xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((o=>(r=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((o=>{const c=[],f=[];let p=dt();for(const m of r){c.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of o){f.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:f})))}))}))}function LL(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,p,m,v){const _=m.batch,T=_.keys();let A=he.resolve();return T.forEach((C=>{A=A.next((()=>v.getEntry(p,C))).next((D=>{const N=m.docVersions.get(C);At(N!==null,48541),D.version.compareTo(N)<0&&(_.applyToRemoteDocument(D,m),D.isValidDocument()&&(D.setReadTime(m.commitVersion),v.addEntry(D)))}))})),A.next((()=>f.mutationQueue.removeMutationBatch(p,_)))})(t,s,e,o).next((()=>o.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let p=dt();for(let m=0;m<f.mutationResults.length;++m)f.mutationResults[m].transformResults.length>0&&(p=p.add(f.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function tw(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function UL(n,e){const t=Xe(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const f=[];e.targetChanges.forEach(((v,_)=>{const T=r.get(_);if(!T)return;f.push(t.Pi.removeMatchingKeys(o,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(o,v.addedDocuments,_))));let A=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?A=A.withResumeToken(In.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,s)),r=r.insert(_,A),(function(D,N,L){return D.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=ML?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(T,A,v)&&f.push(t.Pi.updateTargetData(o,A))}));let p=ar(),m=dt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(o,v))})),f.push(VL(o,c,e.documentUpdates).next((v=>{p=v.ks,m=v.qs}))),!s.isEqual(Qe.min())){const v=t.Pi.getLastRemoteSnapshotVersion(o).next((_=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,s)));f.push(v)}return he.waitFor(f).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,p,m))).next((()=>p))})).then((o=>(t.Ms=r,o)))}function VL(n,e,t){let s=dt(),r=dt();return t.forEach((o=>s=s.add(o))),e.getEntries(n,s).next((o=>{let c=ar();return t.forEach(((f,p)=>{const m=o.get(f);p.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(f)),p.isNoDocument()&&p.version.isEqual(Qe.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):ke(tg,"Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",p.version)})),{ks:c,qs:r}}))}function jL(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=B0),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function OL(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((o=>o?(r=o,he.resolve(r)):t.Pi.allocateTargetId(s).next((c=>(r=new Xr(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function f0(n,e,t){const s=Xe(n),r=s.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",o,(c=>s.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Il(c))throw c;ke(tg,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function $T(n,e,t){const s=Xe(n);let r=Qe.min(),o=dt();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,m,v){const _=Xe(p),T=_.xs.get(v);return T!==void 0?he.resolve(_.Ms.get(T)):_.Pi.getTargetData(m,v)})(s,c,vi(e)).next((f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,f.targetId).next((p=>{o=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?r:Qe.min(),t?o:dt()))).next((f=>(GL(s,A5(e),f),{documents:f,Qs:o})))))}function GL(n,e,t){let s=n.Os.get(e)||Qe.min();t.forEach(((r,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)})),n.Os.set(e,s)}class YT{constructor(){this.activeTargetIds=R5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BL{constructor(){this.Mo=new YT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new YT,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="ConnectivityMonitor";class QT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ke(JT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ke(JT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd=null;function h0(){return Gd===null?Gd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gd++,"0x"+Gd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="RestConnection",zL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===mf?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,o){const c=h0(),f=this.zo(e,t.toUriEncodedString());ke(wp,`Sending RPC '${e}' ${c}:`,f,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,r,o);const{host:m}=new URL(f),v=Al(m);return this.Jo(e,f,p,s,v).then((_=>(ke(wp,`Received RPC '${e}' ${c}: `,_),_)),(_=>{throw ml(wp,`RPC '${e}' ${c} failed with error: `,_,"url: ",f,"request:",s),_}))}Ho(e,t,s,r,o,c){return this.Go(e,t,s,r,o)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Nl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,o)=>e[o]=r)),s&&s.headers.forEach(((r,o)=>e[o]=r))}zo(e,t){const s=zL[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="WebChannelConnection";class KL extends FL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,o){const c=h0();return new Promise(((f,p)=>{const m=new iA;m.setWithCredentials(!0),m.listenOnce(rA.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case qd.NO_ERROR:const _=m.getResponseJson();ke(Mn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),f(_);break;case qd.TIMEOUT:ke(Mn,`RPC '${e}' ${c} timed out`),p(new Ne(de.DEADLINE_EXCEEDED,"Request time out"));break;case qd.HTTP_ERROR:const T=m.getStatus();if(ke(Mn,`RPC '${e}' ${c} failed with status:`,T,"response text:",m.getResponseText()),T>0){let A=m.getResponseJson();Array.isArray(A)&&(A=A[0]);const C=A==null?void 0:A.error;if(C&&C.status&&C.message){const D=(function(L){const O=L.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(O)>=0?O:de.UNKNOWN})(C.status);p(new Ne(D,C.message))}else p(new Ne(de.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new Ne(de.UNAVAILABLE,"Connection failed."));break;default:Ke(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{ke(Mn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(r);ke(Mn,`RPC '${e}' ${c} sending request:`,r),m.send(t,"POST",v,s,15)}))}T_(e,t,s){const r=h0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=lA(),f=oA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=o.join("");ke(Mn,`Creating RPC '${e}' stream ${r}: ${v}`,p);const _=c.createWebChannel(v,p);this.I_(_);let T=!1,A=!1;const C=new qL({Yo:N=>{A?ke(Mn,`Not sending because RPC '${e}' stream ${r} is closed:`,N):(T||(ke(Mn,`Opening RPC '${e}' stream ${r} transport.`),_.open(),T=!0),ke(Mn,`RPC '${e}' stream ${r} sending:`,N),_.send(N))},Zo:()=>_.close()}),D=(N,L,O)=>{N.listen(L,(B=>{try{O(B)}catch($){setTimeout((()=>{throw $}),0)}}))};return D(_,Dc.EventType.OPEN,(()=>{A||(ke(Mn,`RPC '${e}' stream ${r} transport opened.`),C.o_())})),D(_,Dc.EventType.CLOSE,(()=>{A||(A=!0,ke(Mn,`RPC '${e}' stream ${r} transport closed`),C.a_(),this.E_(_))})),D(_,Dc.EventType.ERROR,(N=>{A||(A=!0,ml(Mn,`RPC '${e}' stream ${r} transport errored. Name:`,N.name,"Message:",N.message),C.a_(new Ne(de.UNAVAILABLE,"The operation could not be completed")))})),D(_,Dc.EventType.MESSAGE,(N=>{var L;if(!A){const O=N.data[0];At(!!O,16349);const B=O,$=(B==null?void 0:B.error)||((L=B[0])==null?void 0:L.error);if($){ke(Mn,`RPC '${e}' stream ${r} received error:`,$);const W=$.status;let se=(function(k){const V=dn[k];if(V!==void 0)return HA(V)})(W),R=$.message;se===void 0&&(se=de.INTERNAL,R="Unknown error status: "+W+" with message "+$.message),A=!0,C.a_(new Ne(se,R)),_.close()}else ke(Mn,`RPC '${e}' stream ${r} received:`,O),C.u_(O)}})),D(f,aA.STAT_EVENT,(N=>{N.stat===e0.PROXY?ke(Mn,`RPC '${e}' stream ${r} detected buffering proxy`):N.stat===e0.NOPROXY&&ke(Mn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(n){return new Q5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,t,s=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&ke("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="PersistentStream";class sw{constructor(e,t,s,r,o,c,f,p){this.Mi=e,this.S_=s,this.b_=r,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(rr(t.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new Ne(de.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ke(WT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ke(WT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $L extends sw{constructor(e,t,s,r,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Z5(this.serializer,e),s=(function(o){if(!("targetChange"in o))return Qe.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Qe.min():c.readTime?bi(c.readTime):Qe.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=d0(this.serializer),t.addTarget=(function(o,c){let f;const p=c.target;if(f=r0(p)?{documents:nL(o,p)}:{query:sL(o,p).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=qA(o,c.resumeToken);const m=l0(o,c.expectedCount);m!==null&&(f.expectedCount=m)}else if(c.snapshotVersion.compareTo(Qe.min())>0){f.readTime=vf(o,c.snapshotVersion.toTimestamp());const m=l0(o,c.expectedCount);m!==null&&(f.expectedCount=m)}return f})(this.serializer,e);const s=rL(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=d0(this.serializer),t.removeTarget=e,this.q_(t)}}class YL extends sw{constructor(e,t,s,r,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return At(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,At(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){At(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=tL(e.writeResults,e.commitTime),s=bi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=d0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>eL(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{}class QL extends JL{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,c0(t,s),r,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ne(de.UNKNOWN,o.toString())}))}Ho(e,t,s,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,c0(t,s),r,c,f,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ne(de.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class WL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rr(t),this.aa=!1):ke("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="RemoteStore";class XL{constructor(e,t,s,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{oo(this)&&(ke(no,"Restarting streams for network reachability change."),await(async function(p){const m=Xe(p);m.Ea.add(4),await ru(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Zf(m)})(this))}))})),this.Ra=new WL(s,r)}}async function Zf(n){if(oo(n))for(const e of n.da)await e(!0)}async function ru(n){for(const e of n.da)await e(!1)}function iw(n,e){const t=Xe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),rg(t)?ig(t):Rl(t).O_()&&sg(t,e))}function ng(n,e){const t=Xe(n),s=Rl(t);t.Ia.delete(e),s.O_()&&rw(t,e),t.Ia.size===0&&(s.O_()?s.L_():oo(t)&&t.Ra.set("Unknown"))}function sg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rl(n).Y_(e)}function rw(n,e){n.Va.Ue(e),Rl(n).Z_(e)}function ig(n){n.Va=new K5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Rl(n).start(),n.Ra.ua()}function rg(n){return oo(n)&&!Rl(n).x_()&&n.Ia.size>0}function oo(n){return Xe(n).Ea.size===0}function aw(n){n.Va=void 0}async function ZL(n){n.Ra.set("Online")}async function e3(n){n.Ia.forEach(((e,t)=>{sg(n,e)}))}async function t3(n,e){aw(n),rg(n)?(n.Ra.ha(e),ig(n)):n.Ra.set("Unknown")}async function n3(n,e,t){if(n.Ra.set("Online"),e instanceof FA&&e.state===2&&e.cause)try{await(async function(r,o){const c=o.cause;for(const f of o.targetIds)r.Ia.has(f)&&(await r.remoteSyncer.rejectListen(f,c),r.Ia.delete(f),r.Va.removeTarget(f))})(n,e)}catch(s){ke(no,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await _f(n,s)}else if(e instanceof Jd?n.Va.Ze(e):e instanceof zA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Qe.min()))try{const s=await tw(n.localStore);t.compareTo(s)>=0&&await(function(o,c){const f=o.Va.Tt(c);return f.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=o.Ia.get(m);v&&o.Ia.set(m,v.withResumeToken(p.resumeToken,c))}})),f.targetMismatches.forEach(((p,m)=>{const v=o.Ia.get(p);if(!v)return;o.Ia.set(p,v.withResumeToken(In.EMPTY_BYTE_STRING,v.snapshotVersion)),rw(o,p);const _=new Xr(v.target,p,m,v.sequenceNumber);sg(o,_)})),o.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){ke(no,"Failed to raise snapshot:",s),await _f(n,s)}}async function _f(n,e,t){if(!Il(e))throw e;n.Ea.add(1),await ru(n),n.Ra.set("Offline"),t||(t=()=>tw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ke(no,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Zf(n)}))}function ow(n,e){return e().catch((t=>_f(n,t,e)))}async function eh(n){const e=Xe(n),t=la(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:B0;for(;s3(e);)try{const r=await jL(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,i3(e,r)}catch(r){await _f(e,r)}lw(e)&&cw(e)}function s3(n){return oo(n)&&n.Ta.length<10}function i3(n,e){n.Ta.push(e);const t=la(n);t.O_()&&t.X_&&t.ea(e.mutations)}function lw(n){return oo(n)&&!la(n).x_()&&n.Ta.length>0}function cw(n){la(n).start()}async function r3(n){la(n).ra()}async function a3(n){const e=la(n);for(const t of n.Ta)e.ea(t.mutations)}async function o3(n,e,t){const s=n.Ta.shift(),r=J0.from(s,e,t);await ow(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await eh(n)}async function l3(n,e){e&&la(n).X_&&await(async function(s,r){if((function(c){return z5(c)&&c!==de.ABORTED})(r.code)){const o=s.Ta.shift();la(s).B_(),await ow(s,(()=>s.remoteSyncer.rejectFailedWrite(o.batchId,r))),await eh(s)}})(n,e),lw(n)&&cw(n)}async function XT(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),ke(no,"RemoteStore received new credentials");const s=oo(t);t.Ea.add(3),await ru(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Zf(t)}async function c3(n,e){const t=Xe(n);e?(t.Ea.delete(2),await Zf(t)):e||(t.Ea.add(2),await ru(t),t.Ra.set("Unknown"))}function Rl(n){return n.ma||(n.ma=(function(t,s,r){const o=Xe(t);return o.sa(),new $L(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:ZL.bind(null,n),t_:e3.bind(null,n),r_:t3.bind(null,n),H_:n3.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),rg(n)?ig(n):n.Ra.set("Unknown")):(await n.ma.stop(),aw(n))}))),n.ma}function la(n){return n.fa||(n.fa=(function(t,s,r){const o=Xe(t);return o.sa(),new YL(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:r3.bind(null,n),r_:l3.bind(null,n),ta:a3.bind(null,n),na:o3.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await eh(n)):(await n.fa.stop(),n.Ta.length>0&&(ke(no,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t,s,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=o,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,o){const c=Date.now()+s,f=new ag(e,t,c,r,o);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function og(n,e){if(rr("AsyncQueue",`${e}: ${n}`),Il(n))return new Ne(de.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{static emptySet(e){return new ll(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Oe.comparator(t.key,s.key):(t,s)=>Oe.comparator(t.key,s.key),this.keyedMap=Pc(),this.sortedSet=new Kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ll)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=s.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new ll;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(){this.ga=new Kt(Oe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ke(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class vl{constructor(e,t,s,r,o,c,f,p,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,r,o){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new vl(e,t,ll.emptySet(t),c,s,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class d3{constructor(){this.queries=eE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=Xe(t),o=r.queries;r.queries=eE(),o.forEach(((c,f)=>{for(const p of f.Sa)p.onError(s)}))})(this,new Ne(de.ABORTED,"Firestore shutting down"))}}function eE(){return new ao((n=>kA(n)),$f)}async function uw(n,e){const t=Xe(n);let s=3;const r=e.query;let o=t.queries.get(r);o?!o.ba()&&e.Da()&&(s=2):(o=new u3,s=e.Da()?0:1);try{switch(s){case 0:o.wa=await t.onListen(r,!0);break;case 1:o.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const f=og(c,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&lg(t)}async function dw(n,e){const t=Xe(n),s=e.query;let r=3;const o=t.queries.get(s);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function f3(n,e){const t=Xe(n);let s=!1;for(const r of e){const o=r.query,c=t.queries.get(o);if(c){for(const f of c.Sa)f.Fa(r)&&(s=!0);c.wa=r}}s&&lg(t)}function h3(n,e,t){const s=Xe(n),r=s.queries.get(e);if(r)for(const o of r.Sa)o.onError(t);s.queries.delete(e)}function lg(n){n.Ca.forEach((e=>{e.next()}))}var m0,tE;(tE=m0||(m0={})).Ma="default",tE.Cache="cache";class fw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new vl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==m0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e){this.key=e}}class mw{constructor(e){this.key=e}}class m3{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=dt(),this.mutatedKeys=dt(),this.eu=RA(e),this.tu=new ll(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new ZT,r=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=r,f=!1;const p=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((v,_)=>{const T=r.get(v),A=Yf(this.query,_)?_:null,C=!!T&&this.mutatedKeys.has(T.key),D=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let N=!1;T&&A?T.data.isEqual(A.data)?C!==D&&(s.track({type:3,doc:A}),N=!0):this.su(T,A)||(s.track({type:2,doc:A}),N=!0,(p&&this.eu(A,p)>0||m&&this.eu(A,m)<0)&&(f=!0)):!T&&A?(s.track({type:0,doc:A}),N=!0):T&&!A&&(s.track({type:1,doc:T}),N=!0,(p||m)&&(f=!0)),N&&(A?(c=c.add(A),o=D?o.add(v):o.delete(v)):(c=c.delete(v),o=o.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),o=o.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:f,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,_)=>(function(A,C){const D=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke(20277,{Rt:N})}};return D(A)-D(C)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(s),r=r??!1;const f=t&&!r?this._u():[],p=this.Xa.size===0&&this.current&&!r?1:0,m=p!==this.Za;return this.Za=p,c.length!==0||m?{snapshot:new vl(this.query,e.tu,o,c,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ZT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=dt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new mw(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new hw(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=dt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return vl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cg="SyncEngine";class p3{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class g3{constructor(e){this.key=e,this.hu=!1}}class y3{constructor(e,t,s,r,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ao((f=>kA(f)),$f),this.Iu=new Map,this.Eu=new Set,this.du=new Kt(Oe.comparator),this.Au=new Map,this.Ru=new X0,this.Vu={},this.mu=new Map,this.fu=xl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function x3(n,e,t=!0){const s=bw(n);let r;const o=s.Tu.get(e);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await pw(s,e,t,!0),r}async function v3(n,e){const t=bw(n);await pw(t,e,!0,!1)}async function pw(n,e,t,s){const r=await OL(n.localStore,vi(e)),o=r.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let f;return s&&(f=await b3(n,e,o,c==="current",r.resumeToken)),n.isPrimaryClient&&t&&iw(n.remoteStore,r),f}async function b3(n,e,t,s,r){n.pu=(_,T,A)=>(async function(D,N,L,O){let B=N.view.ru(L);B.Cs&&(B=await $T(D.localStore,N.query,!1).then((({documents:R})=>N.view.ru(R,B))));const $=O&&O.targetChanges.get(N.targetId),W=O&&O.targetMismatches.get(N.targetId)!=null,se=N.view.applyChanges(B,D.isPrimaryClient,$,W);return sE(D,N.targetId,se.au),se.snapshot})(n,_,T,A);const o=await $T(n.localStore,e,!0),c=new m3(e,o.Qs),f=c.ru(o.documents),p=iu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),m=c.applyChanges(f,n.isPrimaryClient,p);sE(n,t,m.au);const v=new p3(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function _3(n,e,t){const s=Xe(n),r=s.Tu.get(e),o=s.Iu.get(r.targetId);if(o.length>1)return s.Iu.set(r.targetId,o.filter((c=>!$f(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await f0(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&ng(s.remoteStore,r.targetId),p0(s,r.targetId)})).catch(Cl)):(p0(s,r.targetId),await f0(s.localStore,r.targetId,!0))}async function T3(n,e){const t=Xe(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),ng(t.remoteStore,s.targetId))}async function E3(n,e,t){const s=k3(n);try{const r=await(function(c,f){const p=Xe(c),m=Ht.now(),v=f.reduce(((A,C)=>A.add(C.key)),dt());let _,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let C=ar(),D=dt();return p.Ns.getEntries(A,v).next((N=>{C=N,C.forEach(((L,O)=>{O.isValidDocument()||(D=D.add(L))}))})).next((()=>p.localDocuments.getOverlayedDocuments(A,C))).next((N=>{_=N;const L=[];for(const O of f){const B=j5(O,_.get(O.key).overlayedDocument);B!=null&&L.push(new ma(O.key,B,TA(B.value.mapValue),Gs.exists(!0)))}return p.mutationQueue.addMutationBatch(A,m,L,f)})).next((N=>{T=N;const L=N.applyToLocalDocumentSet(_,D);return p.documentOverlayCache.saveOverlays(A,N.batchId,L)}))})).then((()=>({batchId:T.batchId,changes:DA(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(c,f,p){let m=c.Vu[c.currentUser.toKey()];m||(m=new Kt(ut)),m=m.insert(f,p),c.Vu[c.currentUser.toKey()]=m})(s,r.batchId,t),await au(s,r.changes),await eh(s.remoteStore)}catch(r){const o=og(r,"Failed to persist write");t.reject(o)}}async function gw(n,e){const t=Xe(n);try{const s=await UL(t.localStore,e);e.targetChanges.forEach(((r,o)=>{const c=t.Au.get(o);c&&(At(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?At(c.hu,14607):r.removedDocuments.size>0&&(At(c.hu,42227),c.hu=!1))})),await au(t,s,e)}catch(s){await Cl(s)}}function nE(n,e,t){const s=Xe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((o,c)=>{const f=c.view.va(e);f.snapshot&&r.push(f.snapshot)})),(function(c,f){const p=Xe(c);p.onlineState=f;let m=!1;p.queries.forEach(((v,_)=>{for(const T of _.Sa)T.va(f)&&(m=!0)})),m&&lg(p)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function S3(n,e,t){const s=Xe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),o=r&&r.key;if(o){let c=new Kt(Oe.comparator);c=c.insert(o,Pn.newNoDocument(o,Qe.min()));const f=dt().add(o),p=new Wf(Qe.min(),new Map,new Kt(ut),c,f);await gw(s,p),s.du=s.du.remove(o),s.Au.delete(e),ug(s)}else await f0(s.localStore,e,!1).then((()=>p0(s,e,t))).catch(Cl)}async function A3(n,e){const t=Xe(n),s=e.batch.batchId;try{const r=await LL(t.localStore,e);xw(t,s,null),yw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await au(t,r)}catch(r){await Cl(r)}}async function w3(n,e,t){const s=Xe(n);try{const r=await(function(c,f){const p=Xe(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,f).next((_=>(At(_!==null,37113),v=_.keys(),p.mutationQueue.removeMutationBatch(m,_)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);xw(s,e,t),yw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await au(s,r)}catch(r){await Cl(r)}}function yw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function xw(n,e,t){const s=Xe(n);let r=s.Vu[s.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function p0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||vw(n,s)}))}function vw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ng(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ug(n))}function sE(n,e,t){for(const s of t)s instanceof hw?(n.Ru.addReference(s.key,e),N3(n,s)):s instanceof mw?(ke(cg,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||vw(n,s.key)):Ke(19791,{wu:s})}function N3(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(ke(cg,"New document in limbo: "+t),n.Eu.add(s),ug(n))}function ug(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Oe(Vt.fromString(e)),s=n.fu.next();n.Au.set(s,new g3(t)),n.du=n.du.insert(t,s),iw(n.remoteStore,new Xr(vi(K0(t.path)),s,"TargetPurposeLimboResolution",Ff.ce))}}async function au(n,e,t){const s=Xe(n),r=[],o=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,p)=>{c.push(s.pu(p,e,t).then((m=>{var v;if((m||t)&&s.isPrimaryClient){const _=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(m){r.push(m);const _=eg.As(p.targetId,m);o.push(_)}})))})),await Promise.all(c),s.Pu.H_(r),await(async function(p,m){const v=Xe(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>he.forEach(m,(T=>he.forEach(T.Es,(A=>v.persistence.referenceDelegate.addReference(_,T.targetId,A))).next((()=>he.forEach(T.ds,(A=>v.persistence.referenceDelegate.removeReference(_,T.targetId,A)))))))))}catch(_){if(!Il(_))throw _;ke(tg,"Failed to update sequence numbers: "+_)}for(const _ of m){const T=_.targetId;if(!_.fromCache){const A=v.Ms.get(T),C=A.snapshotVersion,D=A.withLastLimboFreeSnapshotVersion(C);v.Ms=v.Ms.insert(T,D)}}})(s.localStore,o))}async function C3(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){ke(cg,"User change. New user:",e.toKey());const s=await ew(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((f=>{f.forEach((p=>{p.reject(new Ne(de.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await au(t,s.Ls)}}function I3(n,e){const t=Xe(n),s=t.Au.get(e);if(s&&s.hu)return dt().add(s.key);{let r=dt();const o=t.Iu.get(e);if(!o)return r;for(const c of o){const f=t.Tu.get(c);r=r.unionWith(f.view.nu)}return r}}function bw(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S3.bind(null,e),e.Pu.H_=f3.bind(null,e.eventManager),e.Pu.yu=h3.bind(null,e.eventManager),e}function k3(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=A3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w3.bind(null,e),e}class Tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return PL(this.persistence,new RL,e.initialUser,this.serializer)}Cu(e){return new ZA(Z0.mi,this.serializer)}Du(e){return new BL}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tf.provider={build:()=>new Tf};class R3 extends Tf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){At(this.persistence.referenceDelegate instanceof bf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new gL(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?as.withCacheSize(this.cacheSizeBytes):as.DEFAULT;return new ZA((s=>bf.mi(s,t)),this.serializer)}}class g0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>nE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=C3.bind(null,this.syncEngine),await c3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new d3})()}createDatastore(e){const t=Xf(e.databaseInfo.databaseId),s=(function(o){return new KL(o)})(e.databaseInfo);return(function(o,c,f,p){return new QL(o,c,f,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,o,c,f){return new XL(s,r,o,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>nE(this.syncEngine,t,0)),(function(){return QT.v()?new QT:new HL})())}createSyncEngine(e,t){return(function(r,o,c,f,p,m,v){const _=new y3(r,o,c,f,p,m);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const o=Xe(r);ke(no,"RemoteStore shutting down."),o.Ea.add(5),await ru(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}g0.provider={build:()=>new g0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="FirestoreClient";class M3{constructor(e,t,s,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=Dn.UNAUTHENTICATED,this.clientId=G0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,(async c=>{ke(ca,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ke(ca,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=og(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Cp(n,e){n.asyncQueue.verifyOperationInProgress(),ke(ca,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await ew(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function iE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await D3(n);ke(ca,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>XT(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>XT(e.remoteStore,r))),n._onlineComponents=e}async function D3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ke(ca,"Using user provided OfflineComponentProvider");try{await Cp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===de.FAILED_PRECONDITION||r.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;ml("Error using user provided cache. Falling back to memory cache: "+t),await Cp(n,new Tf)}}else ke(ca,"Using default OfflineComponentProvider"),await Cp(n,new R3(void 0));return n._offlineComponents}async function Tw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ke(ca,"Using user provided OnlineComponentProvider"),await iE(n,n._uninitializedComponentsProvider._online)):(ke(ca,"Using default OnlineComponentProvider"),await iE(n,new g0))),n._onlineComponents}function P3(n){return Tw(n).then((e=>e.syncEngine))}async function Ew(n){const e=await Tw(n),t=e.eventManager;return t.onListen=x3.bind(null,e.syncEngine),t.onUnlisten=_3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=v3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=T3.bind(null,e.syncEngine),t}function L3(n,e,t={}){const s=new tr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,f,p,m){const v=new _w({next:T=>{v.Nu(),c.enqueueAndForget((()=>dw(o,_)));const A=T.docs.has(f);!A&&T.fromCache?m.reject(new Ne(de.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&p&&p.source==="server"?m.reject(new Ne(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),_=new fw(K0(f.path),v,{includeMetadataChanges:!0,qa:!0});return uw(o,_)})(await Ew(n),n.asyncQueue,e,t,s))),s.promise}function U3(n,e,t={}){const s=new tr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,f,p,m){const v=new _w({next:T=>{v.Nu(),c.enqueueAndForget((()=>dw(o,_))),T.fromCache&&p.source==="server"?m.reject(new Ne(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),_=new fw(f,v,{includeMetadataChanges:!0,qa:!0});return uw(o,_)})(await Ew(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="firestore.googleapis.com",aE=!0;class oE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Aw,this.ssl=aE}else this.host=e.host,this.ssl=e.ssl??aE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=XA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mL)throw new Ne(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ne(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ne(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ne(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class th{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new H6;switch(s.type){case"firstParty":return new K6(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ne(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=rE.get(t);s&&(ke("ComponentProvider","Removing Datastore"),rE.delete(t),s.terminate())})(this),Promise.resolve()}}function V3(n,e,t,s={}){var m;n=si(n,th);const r=Al(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;r&&(JS(`https://${f}`),QS("Firestore",!0)),o.host!==Aw&&o.host!==f&&ml("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...o,host:f,ssl:r,emulatorOptions:s};if(!Za(p,c)&&(n._setSettings(p),s.mockUserToken)){let v,_;if(typeof s.mockUserToken=="string")v=s.mockUserToken,_=Dn.MOCK_USER;else{v=hP(s.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new Ne(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Dn(T)}n._authCredentials=new z6(new uA(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new lo(this.firestore,e,this._query)}}class sn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}toJSON(){return{type:sn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(nu(t,sn._jsonSchema))return new sn(e,s||null,new Oe(Vt.fromString(t.referencePath)))}}sn._jsonSchemaVersion="firestore/documentReference/1.0",sn._jsonSchema={type:hn("string",sn._jsonSchemaVersion),referencePath:hn("string")};class sa extends lo{constructor(e,t,s){super(e,t,K0(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new Oe(e))}withConverter(e){return new sa(this.firestore,e,this._path)}}function Ml(n,e,...t){if(n=Cn(n),dA("collection","path",e),n instanceof th){const s=Vt.fromString(e,...t);return bT(s),new sa(n,null,s)}{if(!(n instanceof sn||n instanceof sa))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Vt.fromString(e,...t));return bT(s),new sa(n.firestore,null,s)}}function Ni(n,e,...t){if(n=Cn(n),arguments.length===1&&(e=G0.newId()),dA("doc","path",e),n instanceof th){const s=Vt.fromString(e,...t);return vT(s),new sn(n,null,new Oe(s))}{if(!(n instanceof sn||n instanceof sa))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Vt.fromString(e,...t));return vT(s),new sn(n.firestore,n instanceof sa?n.converter:null,new Oe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="AsyncQueue";class cE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nw(this,"async_queue_retry"),this._c=()=>{const s=Np();s&&ke(lE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Np();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Np();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new tr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Il(e))throw e;ke(lE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,rr("INTERNAL UNHANDLED ERROR: ",uE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=ag.createAndSchedule(this,e,t,s,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&Ke(47125,{Pc:uE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function uE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class co extends th{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new cE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cE(e),this._firestoreClient=void 0,await e}}}function j3(n,e){const t=typeof n=="object"?n:eA(),s=typeof n=="string"?n:mf,r=j0(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const o=dP("firestore");o&&V3(r,...o)}return r}function dg(n){if(n._terminated)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||O3(n),n._firestoreClient}function O3(n){var s,r,o;const e=n._freezeSettings(),t=(function(f,p,m,v){return new c5(f,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Sw(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new M3(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new js(In.fromBase64String(e))}catch(t){throw new Ne(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new js(In.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:js._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nu(e,js._jsonSchema))return js.fromBase64String(e.bytes)}}js._jsonSchemaVersion="firestore/bytes/1.0",js._jsonSchema={type:hn("string",js._jsonSchemaVersion),bytes:hn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ne(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_i._jsonSchemaVersion}}static fromJSON(e){if(nu(e,_i._jsonSchema))return new _i(e.latitude,e.longitude)}}_i._jsonSchemaVersion="firestore/geoPoint/1.0",_i._jsonSchema={type:hn("string",_i._jsonSchemaVersion),latitude:hn("number"),longitude:hn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ti._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nu(e,Ti._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ti(e.vectorValues);throw new Ne(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ti._jsonSchemaVersion="firestore/vectorValue/1.0",Ti._jsonSchema={type:hn("string",Ti._jsonSchemaVersion),vectorValues:hn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=/^__.*__$/;class B3{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ma(e,this.data,this.fieldMask,t,this.fieldTransforms):new su(e,this.data,t,this.fieldTransforms)}}class ww{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ma(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Nw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke(40011,{Ac:n})}}class hg{constructor(e,t,s,r,o,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ef(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Nw(this.Ac)&&G3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class H3{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Xf(e)}Cc(e,t,s,r=!1){return new hg({Ac:e,methodName:t,Dc:s,path:Nn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sh(n){const e=n._freezeSettings(),t=Xf(n._databaseId);return new H3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Cw(n,e,t,s,r,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,e,t,r);mg("Data must be an object, but it was:",c,s);const f=Iw(s,c);let p,m;if(o.merge)p=new _s(c.fieldMask),m=c.fieldTransforms;else if(o.mergeFields){const v=[];for(const _ of o.mergeFields){const T=y0(e,_,t);if(!c.contains(T))throw new Ne(de.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Rw(v,T)||v.push(T)}p=new _s(v),m=c.fieldTransforms.filter((_=>p.covers(_.field)))}else p=null,m=c.fieldTransforms;return new B3(new os(f),p,m)}class ih extends fg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ih}}function z3(n,e,t,s){const r=n.Cc(1,e,t);mg("Data must be an object, but it was:",r,s);const o=[],c=os.empty();ha(s,((p,m)=>{const v=pg(e,p,t);m=Cn(m);const _=r.yc(v);if(m instanceof ih)o.push(v);else{const T=ou(m,_);T!=null&&(o.push(v),c.set(v,T))}}));const f=new _s(o);return new ww(c,f,r.fieldTransforms)}function F3(n,e,t,s,r,o){const c=n.Cc(1,e,t),f=[y0(e,s,t)],p=[r];if(o.length%2!=0)throw new Ne(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)f.push(y0(e,o[T])),p.push(o[T+1]);const m=[],v=os.empty();for(let T=f.length-1;T>=0;--T)if(!Rw(m,f[T])){const A=f[T];let C=p[T];C=Cn(C);const D=c.yc(A);if(C instanceof ih)m.push(A);else{const N=ou(C,D);N!=null&&(m.push(A),v.set(A,N))}}const _=new _s(m);return new ww(v,_,c.fieldTransforms)}function q3(n,e,t,s=!1){return ou(t,n.Cc(s?4:3,e))}function ou(n,e){if(kw(n=Cn(n)))return mg("Unsupported field value:",e,n),Iw(n,e);if(n instanceof fg)return(function(s,r){if(!Nw(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const o=[];let c=0;for(const f of s){let p=ou(f,r.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),o.push(p),c++}return{arrayValue:{values:o}}})(n,e)}return(function(s,r){if((s=Cn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return M5(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=Ht.fromDate(s);return{timestampValue:vf(r.serializer,o)}}if(s instanceof Ht){const o=new Ht(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:vf(r.serializer,o)}}if(s instanceof _i)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof js)return{bytesValue:qA(r.serializer,s._byteString)};if(s instanceof sn){const o=r.databaseId,c=s.firestore._databaseId;if(!c.isEqual(o))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:W0(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Ti)return(function(c,f){return{mapValue:{fields:{[bA]:{stringValue:_A},[pf]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw f.Sc("VectorValues must only contain numeric values.");return $0(f.serializer,m)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${zf(s)}`)})(n,e)}function Iw(n,e){const t={};return mA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(n,((s,r)=>{const o=ou(r,e.mc(s));o!=null&&(t[s]=o)})),{mapValue:{fields:t}}}function kw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ht||n instanceof _i||n instanceof js||n instanceof sn||n instanceof fg||n instanceof Ti)}function mg(n,e,t){if(!kw(t)||!fA(t)){const s=zf(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function y0(n,e,t){if((e=Cn(e))instanceof nh)return e._internalPath;if(typeof e=="string")return pg(n,e);throw Ef("Field path arguments must be of type string or ",n,!1,void 0,t)}const K3=new RegExp("[~\\*/\\[\\]]");function pg(n,e,t){if(e.search(K3)>=0)throw Ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nh(...e.split("."))._internalPath}catch{throw Ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ef(n,e,t,s,r){const o=s&&!s.isEmpty(),c=r!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(o||c)&&(p+=" (found",o&&(p+=` in field ${s}`),c&&(p+=` in document ${r}`),p+=")"),new Ne(de.INVALID_ARGUMENT,f+n+p)}function Rw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,t,s,r,o){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $3 extends Mw{data(){return super.data()}}function rh(n,e){return typeof e=="string"?pg(n,e):e instanceof nh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ne(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gg{}class Dw extends gg{}function ah(n,e,...t){let s=[];e instanceof gg&&s.push(e),s=s.concat(t),(function(o){const c=o.filter((p=>p instanceof yg)).length,f=o.filter((p=>p instanceof oh)).length;if(c>1||c>0&&f>0)throw new Ne(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)n=r._apply(n);return n}class oh extends Dw{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new oh(e,t,s)}_apply(e){const t=this._parse(e);return Lw(e._query,t),new lo(e.firestore,e.converter,a0(e._query,t))}_parse(e){const t=sh(e.firestore);return(function(o,c,f,p,m,v,_){let T;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){fE(_,v);const C=[];for(const D of _)C.push(dE(p,o,D));T={arrayValue:{values:C}}}else T=dE(p,o,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||fE(_,v),T=q3(f,c,_,v==="in"||v==="not-in");return fn.create(m,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Pw(n,e,t){const s=e,r=rh("where",n);return oh._create(r,s,t)}class yg extends gg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new yg(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:ii.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let c=r;const f=o.getFlattenedFilters();for(const p of f)Lw(c,p),c=a0(c,p)})(e._query,t),new lo(e.firestore,e.converter,a0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xg extends Dw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xg(e,t)}_apply(e){const t=(function(r,o,c){if(r.startAt!==null)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jc(o,c)})(e._query,this._field,this._direction);return new lo(e.firestore,e.converter,(function(r,o){const c=r.explicitOrderBy.concat([o]);return new kl(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function J3(n,e="asc"){const t=e,s=rh("orderBy",n);return xg._create(s,t)}function dE(n,e,t){if(typeof(t=Cn(t))=="string"){if(t==="")throw new Ne(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IA(e)&&t.indexOf("/")!==-1)throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Vt.fromString(t));if(!Oe.isDocumentKey(s))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return CT(n,new Oe(s))}if(t instanceof sn)return CT(n,t._key);throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zf(t)}.`)}function fE(n,e){if(!Array.isArray(n)||n.length===0)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Lw(n,e){const t=(function(r,o){for(const c of r)for(const f of c.getFlattenedFilters())if(o.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ne(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Q3{convertValue(e,t="none"){switch(oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ha(e,((r,o)=>{s[r]=this.convertValue(o,t)})),s}convertVectorValue(e){var s,r,o;const t=(o=(r=(s=e.fields)==null?void 0:s[pf].arrayValue)==null?void 0:r.values)==null?void 0:o.map((c=>nn(c.doubleValue)));return new Ti(t)}convertGeoPoint(e){return new _i(nn(e.latitude),nn(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Kf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Kc(e));default:return null}}convertTimestamp(e){const t=ra(e);return new Ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Vt.fromString(e);At(WA(s),9688,{name:e});const r=new $c(s.get(1),s.get(3)),o=new Oe(s.popFirst(5));return r.isEqual(t)||rr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Uc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wa extends Mw{constructor(e,t,s,r,o,c){super(e,t,s,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(rh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Wa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Wa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wa._jsonSchema={type:hn("string",Wa._jsonSchemaVersion),bundleSource:hn("string","DocumentSnapshot"),bundleName:hn("string"),bundle:hn("string")};class Qd extends Wa{data(e={}){return super.data(e)}}class cl{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Uc(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Qd(this._firestore,this._userDataWriter,s.key,s,new Uc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((f=>{const p=new Qd(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Uc(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((f=>o||f.type!==3)).map((f=>{const p=new Qd(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Uc(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return f.type!==0&&(m=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),v=c.indexOf(f.doc.key)),{type:W3(f.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=cl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=G0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),s.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function W3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(n){n=si(n,sn);const e=si(n.firestore,co);return L3(dg(e),n._key).then((t=>tU(e,n,t)))}cl._jsonSchemaVersion="firestore/querySnapshot/1.0",cl._jsonSchema={type:hn("string",cl._jsonSchemaVersion),bundleSource:hn("string","QuerySnapshot"),bundleName:hn("string"),bundle:hn("string")};class Vw extends Q3{constructor(e){super(),this.firestore=e}convertBytes(e){return new js(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,t)}}function lu(n){n=si(n,lo);const e=si(n.firestore,co),t=dg(e),s=new Vw(e);return Y3(n._query),U3(t,n._query).then((r=>new cl(e,s,n,r)))}function lh(n,e,t){n=si(n,sn);const s=si(n.firestore,co),r=Uw(n.converter,e,t);return ch(s,[Cw(sh(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Gs.none())])}function Z3(n,e,t,...s){n=si(n,sn);const r=si(n.firestore,co),o=sh(r);let c;return c=typeof(e=Cn(e))=="string"||e instanceof nh?F3(o,"updateDoc",n._key,e,t,s):z3(o,"updateDoc",n._key,e),ch(r,[c.toMutation(n._key,Gs.exists(!0))])}function vg(n){return ch(si(n.firestore,co),[new Y0(n._key,Gs.none())])}function eU(n,e){const t=si(n.firestore,co),s=Ni(n),r=Uw(n.converter,e);return ch(t,[Cw(sh(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,Gs.exists(!1))]).then((()=>s))}function ch(n,e){return(function(s,r){const o=new tr;return s.asyncQueue.enqueueAndForget((async()=>E3(await P3(s),r,o))),o.promise})(dg(n),e)}function tU(n,e,t){const s=t.docs.get(e._key),r=new Vw(n);return new Wa(n,r,e._key,s,new Uc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Nl=r})(wl),hl(new eo("firestore",((s,{instanceIdentifier:r,options:o})=>{const c=s.getProvider("app").getImmediate(),f=new co(new F6(s.getProvider("auth-internal")),new $6(c,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ne(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $c(m.options.projectId,v)})(c,r),c);return o={useFetchStreams:t,...o},f._setSettings(o),f}),"PUBLIC").setMultipleInstances(!0)),ta(pT,gT,e),ta(pT,gT,"esm2020")})();function jw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nU=jw,Ow=new eu("auth","Firebase",jw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new U0("@firebase/auth");function sU(n,...e){Sf.logLevel<=ct.WARN&&Sf.warn(`Auth (${wl}): ${n}`,...e)}function Wd(n,...e){Sf.logLevel<=ct.ERROR&&Sf.error(`Auth (${wl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(n,...e){throw _g(n,...e)}function ni(n,...e){return _g(n,...e)}function bg(n,e,t){const s={...nU(),[e]:t};return new eu("auth","Firebase",s).create(e,{appName:n.name})}function Xa(n){return bg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iU(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Ai(n,"argument-error"),bg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _g(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return Ow.create(n,...e)}function $e(n,e,...t){if(!n)throw _g(e,...t)}function Xi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Wd(e),new Error(e)}function or(n,e){n||Xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function rU(){return hE()==="http:"||hE()==="https:"}function hE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rU()||vP()||"connection"in navigator)?navigator.onLine:!0}function oU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,t){this.shortDelay=e,this.longDelay=t,or(t>e,"Short delay should be less than long delay!"),this.isMobile=gP()||bP()}get(){return aU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(n,e){or(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uU=new cu(3e4,6e4);function Eg(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Dl(n,e,t,s,r={}){return Bw(n,r,async()=>{let o={},c={};s&&(e==="GET"?c=s:o={body:JSON.stringify(s)});const f=tu({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:p,...o};return xP()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Al(n.emulatorConfig.host)&&(m.credentials="include"),Gw.fetch()(await Hw(n,n.config.apiHost,t,f),m)})}async function Bw(n,e,t){n._canInitEmulator=!1;const s={...lU,...e};try{const r=new fU(n),o=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Bd(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const f=o.ok?c.errorMessage:c.error.message,[p,m]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bd(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Bd(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Bd(n,"user-disabled",c);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw bg(n,v,m);Ai(n,v)}}catch(r){if(r instanceof dr)throw r;Ai(n,"network-request-failed",{message:String(r)})}}async function dU(n,e,t,s,r={}){const o=await Dl(n,e,t,s,r);return"mfaPendingCredential"in o&&Ai(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function Hw(n,e,t,s){const r=`${e}${t}?${s}`,o=n,c=o.config.emulator?Tg(n.config,r):`${n.config.apiScheme}://${r}`;return cU.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}class fU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ni(this.auth,"network-request-failed")),uU.get())})}}function Bd(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const r=ni(n,e,s);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hU(n,e){return Dl(n,"POST","/v1/accounts:delete",e)}async function Af(n,e){return Dl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mU(n,e=!1){const t=Cn(n),s=await t.getIdToken(e),r=Sg(s);$e(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:r,token:s,authTime:Hc(Ip(r.auth_time)),issuedAtTime:Hc(Ip(r.iat)),expirationTime:Hc(Ip(r.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Ip(n){return Number(n)*1e3}function Sg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Wd("JWT malformed, contained fewer than 3 sections"),null;try{const r=qS(t);return r?JSON.parse(r):(Wd("Failed to decode base64 JWT payload"),null)}catch(r){return Wd("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function mE(n){const e=Sg(n);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xc(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof dr&&pU(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function pU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hc(this.lastLoginAt),this.creationTime=Hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wf(n){var _;const e=n.auth,t=await n.getIdToken(),s=await Xc(n,Af(e,{idToken:t}));$e(s==null?void 0:s.users.length,e,"internal-error");const r=s.users[0];n._notifyReloadListener(r);const o=(_=r.providerUserInfo)!=null&&_.length?zw(r.providerUserInfo):[],c=xU(n.providerData,o),f=n.isAnonymous,p=!(n.email&&r.passwordHash)&&!(c!=null&&c.length),m=f?p:!1,v={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new v0(r.createdAt,r.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function yU(n){const e=Cn(n);await wf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xU(n,e){return[...n.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function zw(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(n,e){const t=await Bw(n,{},async()=>{const s=tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,c=await Hw(n,r,"/v1/token",`key=${o}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:s};return n.emulatorConfig&&Al(n.emulatorConfig.host)&&(p.credentials="include"),Gw.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function bU(n,e){return Dl(n,"POST","/v2/accounts:revokeToken",Eg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const t=mE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:r,expiresIn:o}=await vU(e,t);this.updateTokensAndExpiration(s,r,Number(o))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:r,expirationTime:o}=t,c=new ul;return s&&($e(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),r&&($e(typeof r=="string","internal-error",{appName:e}),c.accessToken=r),o&&($e(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ul,this.toJSON())}_performRefresh(){return Xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(n,e){$e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Zs{constructor({uid:e,auth:t,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new gU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new v0(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Xc(this,this.stsTokenManager.getToken(this.auth,e));return $e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return mU(this,e)}reload(){return yU(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await wf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xs(this.auth.app))return Promise.reject(Xa(this.auth));const e=await this.getIdToken();return await Xc(this,hU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,r=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,m=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:A,providerData:C,stsTokenManager:D}=t;$e(_&&D,e,"internal-error");const N=ul.fromJSON(this.name,D);$e(typeof _=="string",e,"internal-error"),Yr(s,e.name),Yr(r,e.name),$e(typeof T=="boolean",e,"internal-error"),$e(typeof A=="boolean",e,"internal-error"),Yr(o,e.name),Yr(c,e.name),Yr(f,e.name),Yr(p,e.name),Yr(m,e.name),Yr(v,e.name);const L=new Zs({uid:_,auth:e,email:r,emailVerified:T,displayName:s,isAnonymous:A,photoURL:c,phoneNumber:o,tenantId:f,stsTokenManager:N,createdAt:m,lastLoginAt:v});return C&&Array.isArray(C)&&(L.providerData=C.map(O=>({...O}))),p&&(L._redirectEventId=p),L}static async _fromIdTokenResponse(e,t,s=!1){const r=new ul;r.updateFromServerResponse(t);const o=new Zs({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await wf(o),o}static async _fromGetAccountInfoResponse(e,t,s){const r=t.users[0];$e(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?zw(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),f=new ul;f.updateFromIdToken(s);const p=new Zs({uid:r.localId,auth:e,stsTokenManager:f,isAnonymous:c}),m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new v0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=new Map;function Zi(n){or(n instanceof Function,"Expected a class definition");let e=pE.get(n);return e?(or(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,pE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Fw.type="NONE";const gE=Fw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(n,e,t){return`firebase:${n}:${e}:${t}`}class dl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:r,name:o}=this.auth;this.fullUserKey=Xd(this.userKey,r.apiKey,o),this.fullPersistenceKey=Xd("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Af(this.auth,{idToken:e}).catch(()=>{});return t?Zs._fromGetAccountInfoResponse(this.auth,t,e):null}return Zs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new dl(Zi(gE),e,s);const r=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=r[0]||Zi(gE);const c=Xd(s,e.config.apiKey,e.name);let f=null;for(const m of t)try{const v=await m._get(c);if(v){let _;if(typeof v=="string"){const T=await Af(e,{idToken:v}).catch(()=>{});if(!T)break;_=await Zs._fromGetAccountInfoResponse(e,T,v)}else _=Zs._fromJSON(e,v);m!==o&&(f=_),o=m;break}}catch{}const p=r.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!p.length?new dl(o,e,s):(o=p[0],f&&await o._set(c,f.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(c)}catch{}})),new dl(o,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Yw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Qw(e))return"Blackberry";if(Ww(e))return"Webos";if(Kw(e))return"Safari";if((e.includes("chrome/")||$w(e))&&!e.includes("edge/"))return"Chrome";if(Jw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function qw(n=Un()){return/firefox\//i.test(n)}function Kw(n=Un()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $w(n=Un()){return/crios\//i.test(n)}function Yw(n=Un()){return/iemobile/i.test(n)}function Jw(n=Un()){return/android/i.test(n)}function Qw(n=Un()){return/blackberry/i.test(n)}function Ww(n=Un()){return/webos/i.test(n)}function Ag(n=Un()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function _U(n=Un()){var e;return Ag(n)&&!!((e=window.navigator)!=null&&e.standalone)}function TU(){return _P()&&document.documentMode===10}function Xw(n=Un()){return Ag(n)||Jw(n)||Ww(n)||Qw(n)||/windows phone/i.test(n)||Yw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(n,e=[]){let t;switch(n){case"Browser":t=yE(Un());break;case"Worker":t=`${yE(Un())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${wl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=o=>new Promise((c,f)=>{try{const p=e(o);c(p)}catch(p){f(p)}});s.onAbort=t,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(n,e={}){return Dl(n,"GET","/v2/passwordPolicy",Eg(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=6;class wU{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??AU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e,t,s,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xE(this),this.idTokenSubscription=new xE(this),this.beforeStateQueue=new EU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ow,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zi(t)),this._initializationPromise=this.queue(async()=>{var s,r,o;if(!this._deleted&&(this.persistenceManager=await dl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Af(this,{idToken:e}),s=await Zs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Xs(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,f=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&(p!=null&&p.user)&&(s=p.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xs(this.app))return Promise.reject(Xa(this));const t=e?Cn(e):null;return t&&$e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xs(this.app)?Promise.reject(Xa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xs(this.app)?Promise.reject(Xa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SU(this),t=new wU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new eu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await bU(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Zi(e)||this._popupRedirectResolver;$e(t,this,"argument-error"),this.redirectPersistenceManager=await dl.create(this,[Zi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,r){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(f,this,"internal-error"),f.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,r);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Xs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&sU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function uh(n){return Cn(n)}class xE{constructor(e){this.auth=e,this.observer=null,this.addObserver=IP(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CU(n){wg=n}function IU(n){return wg.loadJS(n)}function kU(){return wg.gapiScript}function RU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(n,e){const t=j0(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),o=t.getOptions();if(Za(o,e??{}))return r;Ai(r,"already-initialized")}return t.initialize({options:e})}function DU(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Zi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function PU(n,e,t){const s=uh(n);$e(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,o=e1(e),{host:c,port:f}=LU(e),p=f===null?"":`:${f}`,m={url:`${o}//${c}${p}/`},v=Object.freeze({host:c,port:f,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){$e(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),$e(Za(m,s.config.emulator)&&Za(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Al(c)?(JS(`${o}//${c}${p}`),QS("Auth",!0)):UU()}function e1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function LU(n){const e=e1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const o=r[1];return{host:o,port:vE(s.substr(o.length+1))}}else{const[o,c]=s.split(":");return{host:o,port:vE(c)}}}function vE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function UU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xi("not implemented")}_getIdTokenResponse(e){return Xi("not implemented")}_linkToIdToken(e,t){return Xi("not implemented")}_getReauthenticationResolver(e){return Xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(n,e){return dU(n,"POST","/v1/accounts:signInWithIdp",Eg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU="http://localhost";class so extends t1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ai("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...o}=t;if(!s||!r)return null;const c=new so(s,r);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return fl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,fl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fl(e,t)}buildRequest(){const e={requestUri:VU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends Ng{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends uu{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return so._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Wi.credential(t,s)}catch{return null}}}Wi.GOOGLE_SIGN_IN_METHOD="google.com";Wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends uu{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.GITHUB_SIGN_IN_METHOD="github.com";Qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends uu{constructor(){super("twitter.com")}static credential(e,t){return so._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Wr.credential(t,s)}catch{return null}}}Wr.TWITTER_SIGN_IN_METHOD="twitter.com";Wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,r=!1){const o=await Zs._fromIdTokenResponse(e,s,r),c=bE(s);return new bl({user:o,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const r=bE(s);return new bl({user:e,providerId:r,_tokenResponse:s,operationType:t})}}function bE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf extends dr{constructor(e,t,s,r){super(t.code,t.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Nf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,r){return new Nf(e,t,s,r)}}function n1(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Nf._fromErrorAndOperation(n,o,e,s):o})}async function jU(n,e,t=!1){const s=await Xc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return bl._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OU(n,e,t=!1){const{auth:s}=n;if(Xs(s.app))return Promise.reject(Xa(s));const r="reauthenticate";try{const o=await Xc(n,n1(s,r,e,n),t);$e(o.idToken,s,"internal-error");const c=Sg(o.idToken);$e(c,s,"internal-error");const{sub:f}=c;return $e(n.uid===f,s,"user-mismatch"),bl._forOperation(n,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ai(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GU(n,e,t=!1){if(Xs(n.app))return Promise.reject(Xa(n));const s="signIn",r=await n1(n,s,e),o=await bl._fromIdTokenResponse(n,s,r);return t||await n._updateCurrentUser(o.user),o}function BU(n,e,t,s){return Cn(n).onIdTokenChanged(e,t,s)}function HU(n,e,t){return Cn(n).beforeAuthStateChanged(e,t)}function zU(n,e,t,s){return Cn(n).onAuthStateChanged(e,t,s)}function FU(n){return Cn(n).signOut()}const Cf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cf,"1"),this.storage.removeItem(Cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=1e3,KU=10;class i1 extends s1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),r=this.localCache[t];s!==r&&e(t,r,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},o=this.storage.getItem(s);TU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,KU):r()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},qU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}i1.type="LOCAL";const $U=i1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1 extends s1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}r1.type="SESSION";const a1=r1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const s=new dh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:r,data:o}=t.data,c=this.handlersMap[r];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const f=Array.from(c).map(async m=>m(t.origin,o)),p=await YU(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,c;return new Promise((f,p)=>{const m=Cg("",20);r.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:r,onMessage(_){const T=_;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),f(T.data.response);break;default:clearTimeout(v),clearTimeout(o),p(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(){return window}function QU(n){Ei().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(){return typeof Ei().WorkerGlobalScope<"u"&&typeof Ei().importScripts=="function"}async function WU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function ZU(){return o1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="firebaseLocalStorageDb",eV=1,If="firebaseLocalStorage",c1="fbase_key";class du{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fh(n,e){return n.transaction([If],e?"readwrite":"readonly").objectStore(If)}function tV(){const n=indexedDB.deleteDatabase(l1);return new du(n).toPromise()}function b0(){const n=indexedDB.open(l1,eV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(If,{keyPath:c1})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(If)?e(s):(s.close(),await tV(),e(await b0()))})})}async function _E(n,e,t){const s=fh(n,!0).put({[c1]:e,value:t});return new du(s).toPromise()}async function nV(n,e){const t=fh(n,!1).get(e),s=await new du(t).toPromise();return s===void 0?null:s.value}function TE(n,e){const t=fh(n,!0).delete(e);return new du(t).toPromise()}const sV=800,iV=3;class u1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await b0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>iV)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return o1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dh._getInstance(ZU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await WU(),!this.activeServiceWorker)return;this.sender=new JU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await b0();return await _E(e,Cf,"1"),await TE(e,Cf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>_E(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>nV(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>TE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=fh(r,!1).getAll();return new du(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}u1.type="LOCAL";const rV=u1;new cu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(n,e){return e?Zi(e):($e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig extends t1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function aV(n){return GU(n.auth,new Ig(n),n.bypassAuthState)}function oV(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),OU(t,new Ig(n),n.bypassAuthState)}async function lV(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),jU(t,new Ig(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,t,s,r,o=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:r,tenantId:o,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aV;case"linkViaPopup":case"linkViaRedirect":return lV;case"reauthViaPopup":case"reauthViaRedirect":return oV;default:Ai(this.auth,"internal-error")}}resolve(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=new cu(2e3,1e4);async function uV(n,e,t){if(Xs(n.app))return Promise.reject(ni(n,"operation-not-supported-in-this-environment"));const s=uh(n);iU(n,e,Ng);const r=d1(s,t);return new Ja(s,"signInViaPopup",e,r).executeNotNull()}class Ja extends f1{constructor(e,t,s,r,o){super(e,t,r,o),this.provider=s,this.authWindow=null,this.pollId=null,Ja.currentPopupAction&&Ja.currentPopupAction.cancel(),Ja.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){or(this.filter.length===1,"Popup operations only handle one event");const e=Cg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ja.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cV.get())};e()}}Ja.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="pendingRedirect",Zd=new Map;class fV extends f1{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Zd.get(this.auth._key());if(!e){try{const s=await hV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Zd.set(this.auth._key(),e)}return this.bypassAuthState||Zd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hV(n,e){const t=gV(e),s=pV(n);if(!await s._isAvailable())return!1;const r=await s._get(t)==="true";return await s._remove(t),r}function mV(n,e){Zd.set(n._key(),e)}function pV(n){return Zi(n._redirectPersistence)}function gV(n){return Xd(dV,n.config.apiKey,n.name)}async function yV(n,e,t=!1){if(Xs(n.app))return Promise.reject(Xa(n));const s=uh(n),r=d1(s,e),c=await new fV(s,r,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=600*1e3;class vV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!h1(e)){const r=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(ni(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xV&&this.cachedEventUids.clear(),this.cachedEventUids.has(EE(e))}saveEventToCache(e){this.cachedEventUids.add(EE(e)),this.lastProcessedEventTime=Date.now()}}function EE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function h1({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return h1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _V(n,e={}){return Dl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EV=/^https?/;async function SV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await _V(n);for(const t of e)try{if(AV(t))return}catch{}Ai(n,"unauthorized-domain")}function AV(n){const e=x0(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!EV.test(t))return!1;if(TV.test(n))return s===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=new cu(3e4,6e4);function SE(){const n=Ei().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function NV(n){return new Promise((e,t)=>{var r,o,c;function s(){SE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{SE(),t(ni(n,"network-request-failed"))},timeout:wV.get()})}if((o=(r=Ei().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((c=Ei().gapi)!=null&&c.load)s();else{const f=RU("iframefcb");return Ei()[f]=()=>{gapi.load?s():t(ni(n,"network-request-failed"))},IU(`${kU()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw ef=null,e})}let ef=null;function CV(n){return ef=ef||NV(n),ef}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=new cu(5e3,15e3),kV="__/auth/iframe",RV="emulator/auth/iframe",MV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PV(n){const e=n.config;$e(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Tg(e,RV):`https://${n.config.authDomain}/${kV}`,s={apiKey:e.apiKey,appName:n.name,v:wl},r=DV.get(n.config.apiHost);r&&(s.eid=r);const o=n._getFrameworks();return o.length&&(s.fw=o.join(",")),`${t}?${tu(s).slice(1)}`}async function LV(n){const e=await CV(n),t=Ei().gapi;return $e(t,n,"internal-error"),e.open({where:document.body,url:PV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MV,dontclear:!0},s=>new Promise(async(r,o)=>{await s.restyle({setHideOnLeave:!1});const c=ni(n,"network-request-failed"),f=Ei().setTimeout(()=>{o(c)},IV.get());function p(){Ei().clearTimeout(f),r(s)}s.ping(p).then(p,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VV=500,jV=600,OV="_blank",GV="http://localhost";class AE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BV(n,e,t,s=VV,r=jV){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p={...UV,width:s.toString(),height:r.toString(),top:o,left:c},m=Un().toLowerCase();t&&(f=$w(m)?OV:t),qw(m)&&(e=e||GV,p.scrollbars="yes");const v=Object.entries(p).reduce((T,[A,C])=>`${T}${A}=${C},`,"");if(_U(m)&&f!=="_self")return HV(e||"",f),new AE(null);const _=window.open(e||"",f,v);$e(_,n,"popup-blocked");try{_.focus()}catch{}return new AE(_)}function HV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV="__/auth/handler",FV="emulator/auth/handler",qV=encodeURIComponent("fac");async function wE(n,e,t,s,r,o){$e(n.config.authDomain,n,"auth-domain-config-required"),$e(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:wl,eventId:r};if(e instanceof Ng){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",CP(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))c[v]=_}if(e instanceof uu){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const p=await n._getAppCheckToken(),m=p?`#${qV}=${encodeURIComponent(p)}`:"";return`${KV(n)}?${tu(f).slice(1)}${m}`}function KV({config:n}){return n.emulator?Tg(n,FV):`https://${n.authDomain}/${zV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="webStorageSupport";class $V{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=a1,this._completeRedirectFn=yV,this._overrideRedirectResult=mV}async _openPopup(e,t,s,r){var c;or((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await wE(e,t,s,x0(),r);return BV(e,o,Cg())}async _openRedirect(e,t,s,r){await this._originValidation(e);const o=await wE(e,t,s,x0(),r);return QU(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(or(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await LV(e),s=new vV(e);return t.register("authEvent",r=>($e(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kp,{type:kp},r=>{var c;const o=(c=r==null?void 0:r[0])==null?void 0:c[kp];o!==void 0&&t(!!o),Ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=SV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Xw()||Kw()||Ag()}}const YV=$V;var NE="@firebase/auth",CE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WV(n){hl(new eo("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;$e(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zw(n)},m=new NU(s,r,o,p);return DU(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),hl(new eo("auth-internal",e=>{const t=uh(e.getProvider("auth").getImmediate());return(s=>new JV(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ta(NE,CE,QV(n)),ta(NE,CE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=300,ZV=YS("authIdTokenMaxAge")||XV;let IE=null;const ej=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>ZV)return;const r=t==null?void 0:t.token;IE!==r&&(IE=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function tj(n=eA()){const e=j0(n,"auth");if(e.isInitialized())return e.getImmediate();const t=MU(n,{popupRedirectResolver:YV,persistence:[rV,$U,a1]}),s=YS("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const c=ej(o.toString());HU(t,c,()=>c(t.currentUser)),BU(t,f=>c(f))}}const r=KS("auth");return r&&PU(t,`http://${r}`),t}function nj(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}CU({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=r=>{const o=ni("internal-error");o.customData=r,t(o)},s.type="text/javascript",s.charset="UTF-8",nj().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WV("Browser");const sj={apiKey:"AIzaSyBsULKLrF5rPubDQ10RPWdL4gbjvo8obPI",authDomain:"fajmuls-learning.firebaseapp.com",projectId:"fajmuls-learning",storageBucket:"fajmuls-learning.firebasestorage.app",messagingSenderId:"1078635450652",appId:"1:1078635450652:web:41de35e0038d3bd40caad9"},m1=ZS(sj),Yn=j3(m1),kg=tj(m1),ij=new Wi;console.log("Firebase Service Initialized for: fajmuls-learning");const p1="benchmark_scores",Rg="test_packages",Ci="users",rj=n=>zU(kg,n),aj=async()=>{try{return(await uV(kg,ij)).user}catch(n){throw console.error("Error signing in with Google",n),n}},oj=async()=>{try{await FU(kg)}catch(n){console.error("Error signing out",n)}},lj=async n=>{const e=ah(Ml(Yn,Ci),Pw("username_lowercase","==",n.toLowerCase()));return(await lu(e)).empty},kE=async n=>{const e=Ni(Yn,Ci,n),t=await X3(e);return t.exists()?t.data():null},cj=async(n,e)=>{await lh(Ni(Yn,Ci,n),{...e,username_lowercase:e.username.toLowerCase(),lastLogin:new Date().toISOString()},{merge:!0})},uj=async(n,e)=>{const t={};e.username&&(t.username=e.username,t.username_lowercase=e.username.toLowerCase()),e.photoURL!==void 0&&(t.photoURL=e.photoURL),await Z3(Ni(Yn,Ci,n),t)},dj=async(n,e)=>{try{const t=e.timestamp?`sess-${e.timestamp}`:`sess-${Date.now()}`;await lh(Ni(Yn,Ci,n,"sessions",t),{...e,id:t}),console.log(`Session ${t} saved to cloud`)}catch(t){throw console.error("Error saving session to cloud",t),t}},fj=async n=>{try{const e=ah(Ml(Yn,Ci,n,"sessions"),J3("timestamp","desc")),t=await lu(e),s=[];return t.forEach(r=>{s.push({...r.data(),id:r.id})}),s}catch(e){return console.error("Error fetching all saved sessions",e),[]}},RE=async(n,e)=>{try{await vg(Ni(Yn,Ci,n,"sessions",e)),console.log(`Cloud session ${e} deleted`)}catch(t){console.error("Error deleting session from cloud",t)}},hj=async n=>{console.log("clearSessionFromCloud called - Use deleteSavedSession for specific items")},ME=async(n,e)=>{try{await lh(Ni(Yn,Ci,n,"history",e.id),e),console.log("History saved to cloud")}catch(t){console.error("Error saving history to cloud",t)}},mj=async n=>{try{const e=ah(Ml(Yn,Ci,n,"history")),t=await lu(e),s=[];return t.forEach(r=>{s.push(r.data())}),s.sort((r,o)=>new Date(o.date).getTime()-new Date(r.date).getTime())}catch(e){return console.error("Error fetching history from cloud",e),[]}},pj=async(n,e)=>{try{await vg(Ni(Yn,Ci,n,"history",e))}catch(t){console.error("Error deleting history from cloud",t)}},gj=async(n,e,t,s)=>{try{await eU(Ml(Yn,p1),{game:n,score:e,username:t,unit:s,timestamp:Date.now()}),console.log(`Score saved to Cloud Leaderboard: ${n} - ${e}`)}catch(r){console.error("Error saving score to Firebase:",r)}},yj=async(n,e=5)=>{try{const t=n==="REACTION"||n==="AIM",s=ah(Ml(Yn,p1),Pw("game","==",n)),r=await lu(s),o=[];r.forEach(p=>{o.push({id:p.id,...p.data()})}),o.sort((p,m)=>t?p.score-m.score:m.score-p.score);const c=[],f=new Set;for(const p of o){const m=p.username.toLowerCase().trim();if(f.has(m)||(c.push(p),f.add(m)),c.length>=e)break}return c}catch(t){return console.error("Error fetching leaderboard from Firebase:",t),[]}},DE=async n=>{try{const e=JSON.parse(JSON.stringify(n));await lh(Ni(Yn,Rg,n.id),e)}catch(e){throw console.error("Error saving package to Firebase:",e),e}},xj=async()=>{try{const n=await lu(Ml(Yn,Rg)),e=[];return n.forEach(t=>{e.push(t.data())}),e.sort((t,s)=>new Date(s.createdAt).getTime()-new Date(t.createdAt).getTime()),e}catch(n){return console.error("Error fetching packages from Firebase:",n),[]}},vj=async n=>{try{await vg(Ni(Yn,Rg,n))}catch(e){throw console.error("Error deleting package from Firebase:",e),e}};class bj{constructor(){if(this.audioCache={},this.soundEnabled=!0,typeof Audio<"u")try{this.preload("click"),this.preload("back"),this.preload("tap")}catch(e){console.error("Audio init error",e)}}preload(e){const t=new Audio(fb[e]);t.preload="auto",t.volume=.5,this.audioCache[e]=t}syncSettings(e){this.soundEnabled=e.soundEnabled;const t=e.volume!==void 0?e.volume:.5;Object.values(this.audioCache).forEach(s=>{s&&(s.volume=t)})}startMusic(){}stopMusic(){}play(e){if(this.soundEnabled)try{if(this.audioCache[e]){const r=this.audioCache[e];r.currentTime=0;const o=r.play();o!==void 0&&o.catch(()=>{});return}const t=fb[e];if(!t)return;const s=new Audio(t);s.volume=this.audioCache.click?this.audioCache.click.volume:.5,s.play().catch(()=>{})}catch{}}}const oe=new bj;/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Tj=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),PE=n=>{const e=Tj(n);return e.charAt(0).toUpperCase()+e.slice(1)},g1=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),Ej=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=F.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:o,iconNode:c,...f},p)=>F.createElement("svg",{ref:p,...Sj,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:g1("lucide",r),...!o&&!Ej(f)&&{"aria-hidden":"true"},...f},[...c.map(([m,v])=>F.createElement(m,v)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(n,e)=>{const t=F.forwardRef(({className:s,...r},o)=>F.createElement(Aj,{ref:o,iconNode:e,className:g1(`lucide-${_j(PE(n))}`,`lucide-${n}`,s),...r}));return t.displayName=PE(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Bs=Te("activity",wj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ct=Te("arrow-left",Nj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Ij=Te("arrow-up",Cj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],y1=Te("award",kj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],Mj=Te("bell-off",Rj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Pj=Te("bell",Dj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],LE=Te("book-open",Lj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],hh=Te("book",Uj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Vs=Te("brain",Vj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],x1=Te("briefcase",jj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Gj=Te("building-2",Oj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Hj=Te("calculator",Bj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],v1=Te("calendar",zj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],qj=Te("camera",Fj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],zc=Te("chart-no-axes-column",Kj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Qa=Te("chevron-right",$j);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zs=Te("circle-check-big",Yj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],b1=Te("circle-play",Jj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],fu=Te("circle-x",Qj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ua=Te("clock",Wj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],UE=Te("cloud-upload",Xj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],kf=Te("copy",Zj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],_1=Te("download",eO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],T1=Te("eye",tO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],sO=Te("file-search",nO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],nr=Te("file-text",iO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],aO=Te("folder-open",rO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],lO=Te("funnel",oO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],uO=Te("git-merge",cO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],fO=Te("globe",dO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Mg=Te("graduation-cap",hO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],lr=Te("grid-3x3",mO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Rf=Te("hash",pO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],mh=Te("heart",gO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Dg=Te("history",yO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],vO=Te("info",xO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],_O=Te("landmark",bO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],EO=Te("layout-grid",TO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],E1=Te("lightbulb",SO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Kn=Te("loader-circle",AO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],NO=Te("lock",wO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],IO=Te("log-out",CO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Mf=Te("map",kO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],MO=Te("message-circle",RO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],ph=Te("message-square",DO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],S1=Te("moon",PO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],UO=Te("music",LO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],jO=Te("package",VO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],A1=Te("palette",OO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Zc=Te("pause",GO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],VE=Te("pen-tool",BO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],zO=Te("pen",HO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],gh=Te("play",FO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],KO=Te("plus",qO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],YO=Te("refresh-cw",$O);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],QO=Te("repeat",JO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],XO=Te("rocket",WO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],_0=Te("rotate-ccw",ZO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],yh=Te("save",e9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],tf=Te("search",t9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],w1=Te("settings",n9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],i9=Te("shapes",s9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],a9=Te("share-2",r9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],l9=Te("shield-check",o9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],N1=Te("sun",c9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],io=Te("target",u9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],T0=Te("timer",d9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_l=Te("trash-2",f9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],m9=Te("trending-up",h9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],E0=Te("triangle-alert",p9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],C1=Te("trophy",g9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Df=Te("type",y9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Pg=Te("upload",x9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],I1=Te("user",v9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_9=Te("users",b9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],E9=Te("volume-2",T9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],A9=Te("volume-x",S9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],k1=Te("x",w9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],da=Te("zap",N9),C9=()=>{const[n,e]=F.useState(!1),[t,s]=F.useState(1500),[r,o]=F.useState(!1),[c,f]=F.useState("focus");F.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),F.useEffect(()=>{let A=null;return r&&t>0?A=setInterval(()=>{s(t-1)},1e3):t===0&&(o(!1),p()),()=>clearInterval(A)},[r,t]);const p=()=>{new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play().catch(C=>console.log("Audio play failed",C)),"Notification"in window&&Notification.permission==="granted"&&new Notification(c==="focus"?"Fokus Selesai!":"Istirahat Selesai!",{body:c==="focus"?"Waktunya istirahat sejenak.":"Kembali fokus belajar!",icon:"/favicon.ico"})},m=()=>o(!r),v=()=>{o(!1),s(c==="focus"?1500:300)},_=()=>{const A=c==="focus"?"break":"focus";f(A),s(A==="focus"?1500:300),o(!1)},T=A=>{const C=Math.floor(A/60),D=A%60;return`${C.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`};return n?u.jsxs("div",{className:"fixed bottom-6 right-6 w-80 bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 z-50 overflow-hidden animate-fade-in-up",children:[u.jsxs("div",{className:`p-4 ${c==="focus"?"bg-indigo-600":"bg-emerald-500"} text-white flex justify-between items-center`,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(T0,{size:20}),u.jsx("span",{className:"font-bold",children:c==="focus"?"Fokus":"Istirahat"})]}),u.jsx("button",{onClick:()=>e(!1),className:"hover:bg-white/20 p-1 rounded",children:u.jsx(k1,{size:18})})]}),u.jsxs("div",{className:"p-6 flex flex-col items-center",children:[u.jsx("div",{className:"text-5xl font-mono font-bold text-slate-800 dark:text-slate-100 mb-6 tracking-wider",children:T(t)}),u.jsxs("div",{className:"flex gap-4 mb-6",children:[u.jsx("button",{onClick:m,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:r?u.jsx(Zc,{size:24}):u.jsx(gh,{size:24})}),u.jsx("button",{onClick:v,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:u.jsx(_0,{size:24})})]}),u.jsxs("button",{onClick:_,className:"text-sm text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 underline",children:["Ganti ke Mode ",c==="focus"?"Istirahat":"Fokus"]})]})]}):u.jsxs("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-full shadow-xl z-50 flex items-center gap-2 transition-all",children:[u.jsx(T0,{size:24}),u.jsx("span",{className:"font-semibold hidden sm:inline",children:"Pomodoro"})]})},I9=({data:n,onNext:e})=>{const[t,s]=F.useState(!1);return u.jsxs("div",{className:"w-full max-w-xl mx-auto perspective-1000",children:[u.jsxs("div",{className:`relative w-full h-80 transition-transform duration-700 transform-style-3d cursor-pointer ${t?"rotate-y-180":""}`,onClick:()=>s(!t),children:[u.jsx("div",{className:"absolute w-full h-full bg-white rounded-2xl shadow-xl border-2 border-indigo-100 flex items-center justify-center p-8 backface-hidden",children:u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:"inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-bold mb-4",children:"QUESTION"}),u.jsx("p",{className:"text-2xl font-medium text-slate-800 leading-relaxed",children:n.front}),u.jsx("p",{className:"mt-8 text-slate-400 text-sm animate-pulse",children:"Tap to flip"})]})}),u.jsx("div",{className:"absolute w-full h-full bg-indigo-600 rounded-2xl shadow-xl flex items-center justify-center p-8 backface-hidden rotate-y-180",children:u.jsxs("div",{className:"text-center text-white",children:[u.jsx("span",{className:"inline-block px-3 py-1 bg-white/20 text-white rounded-full text-xs font-bold mb-4",children:"ANSWER"}),u.jsx("p",{className:"text-xl leading-relaxed",children:n.back})]})})]}),t&&u.jsxs("div",{className:"mt-8 flex justify-center gap-3",children:[u.jsx("button",{onClick:()=>{s(!1),e("hard")},className:"px-6 py-2 bg-rose-100 text-rose-700 rounded-lg hover:bg-rose-200 font-medium transition",children:"Sulit (1m)"}),u.jsx("button",{onClick:()=>{s(!1),e("medium")},className:"px-6 py-2 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 font-medium transition",children:"Sedang (10m)"}),u.jsx("button",{onClick:()=>{s(!1),e("easy")},className:"px-6 py-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 font-medium transition",children:"Mudah (4d)"})]})]})},R1=({node:n,depth:e=0})=>u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("div",{className:`
        border-2 px-4 py-2 rounded-xl text-center font-medium shadow-sm transition-all hover:scale-105
        ${e===0?"bg-indigo-600 text-white border-indigo-600 mb-4 text-lg":""}
        ${e===1?"bg-white text-indigo-700 border-indigo-200 mb-4 text-base":""}
        ${e>1?"bg-slate-50 text-slate-600 border-slate-200 text-sm":""}
      `,children:n.label}),n.children&&n.children.length>0&&u.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:gap-8 relative pt-4",children:[u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-px h-4 bg-slate-300"}),u.jsx("div",{className:"absolute top-0 left-4 right-4 h-px bg-slate-300"}),n.children.map((t,s)=>u.jsxs("div",{className:"flex flex-col items-center relative",children:[u.jsx("div",{className:"w-px h-4 bg-slate-300 mb-1"}),u.jsx(R1,{node:t,depth:e+1})]},s))]})]}),k9=({data:n})=>{const e=n.root||n;return u.jsx("div",{className:"p-8 bg-slate-50 rounded-3xl overflow-x-auto border border-slate-200 min-h-[400px] flex justify-center",children:u.jsx(R1,{node:e})})},$a=({className:n="",height:e="h-4",width:t="w-full"})=>u.jsx("div",{className:`animate-pulse bg-slate-200 dark:bg-slate-700 rounded-md ${e} ${t} ${n}`}),R9=()=>u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[u.jsx($a,{height:"h-12",width:"w-12",className:"rounded-full"}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsx($a,{height:"h-4",width:"w-1/3"}),u.jsx($a,{height:"h-3",width:"w-1/2"})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx($a,{height:"h-4"}),u.jsx($a,{height:"h-4"}),u.jsx($a,{height:"h-4",width:"w-2/3"})]})]}),M9=({onComplete:n})=>{const e=()=>{oe.play("click"),n()};return u.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-center p-6 text-center animate-fade-in cursor-pointer",onClick:e,children:[u.jsxs("div",{className:"relative mb-8 group",children:[u.jsx("div",{className:"absolute -inset-4 bg-indigo-500 rounded-full opacity-20 group-hover:opacity-40 blur-xl transition-opacity duration-1000 animate-pulse"}),u.jsx("img",{src:sf,alt:"Fajmuls Learning",className:"w-48 h-48 md:w-64 md:h-64 object-contain relative z-10 drop-shadow-2xl animate-bounce-slow"})]}),u.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-2 tracking-tight",children:["Fajmuls ",u.jsx("span",{className:"text-indigo-400",children:"Learning"})]}),u.jsx("p",{className:"text-slate-400 text-lg mb-10 max-w-md",children:"Platform Belajar Cerdas Terintegrasi AI"}),u.jsxs("button",{onClick:t=>{t.stopPropagation(),e()},className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] transition-all flex items-center gap-2",children:[u.jsx(XO,{size:24,className:"text-indigo-600"})," Mulai Belajar"]})]})},D9=({isOpen:n,onClose:e,settings:t,onUpdate:s,userProfile:r,onUpdateProfile:o})=>{var $,W;const[c,f]=F.useState(!1),[p,m]=F.useState(""),[v,_]=F.useState(null),[T,A]=F.useState(!1),C=F.useRef(null);if(!n)return null;const D=se=>{oe.play("tap"),s({...t,[se]:!t[se]})},N=se=>{s({...t,volume:parseFloat(se.target.value)})},L=se=>{var M;const R=(M=se.target.files)==null?void 0:M[0];if(R){if(R.size>2*1024*1024){alert("Ukuran file maksimal 2MB");return}const k=new FileReader;k.onload=V=>{var G;const U=new Image;U.onload=()=>{const j=document.createElement("canvas"),me=j.getContext("2d");if(!me)return;const Ae=200;let Y=U.width,ue=U.height;Y>ue?Y>Ae&&(ue*=Ae/Y,Y=Ae):ue>Ae&&(Y*=Ae/ue,ue=Ae),j.width=Y,j.height=ue,me.drawImage(U,0,0,Y,ue);const xe=j.toDataURL("image/jpeg",.8);_(xe),f(!0),r&&!p&&m(r.username)},U.src=(G=V.target)==null?void 0:G.result},k.readAsDataURL(R)}},O=async()=>{A(!0);try{const se={};p&&p!==(r==null?void 0:r.username)&&(se.username=p),v&&(se.photoURL=v),Object.keys(se).length>0&&await o(se),f(!1),_(null)}catch(se){console.error(se),alert("Gagal menyimpan profil.")}finally{A(!1)}},B=()=>{m((r==null?void 0:r.username)||""),f(!0)};return u.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700 max-h-[85vh] overflow-y-auto scrollbar-hide",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-white dark:bg-slate-800 z-10 py-2 border-b border-slate-100 dark:border-slate-700",children:[u.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(w1,{size:24,className:"text-slate-400"})," Pengaturan"]}),u.jsx("button",{onClick:()=>{oe.play("back"),e()},children:u.jsx(fu,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),u.jsxs("div",{className:"space-y-4",children:[r&&u.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-xl mb-4 border border-indigo-100 dark:border-indigo-800",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Akun"}),r.isGuest?u.jsx("span",{className:"text-xs bg-slate-200 dark:bg-slate-700 px-2 py-1 rounded text-slate-600 dark:text-slate-300 font-bold",children:"TAMU"}):u.jsx("span",{className:"text-xs bg-emerald-100 dark:bg-emerald-900 px-2 py-1 rounded text-emerald-600 dark:text-emerald-300 font-bold",children:"ONLINE"})]}),u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[u.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var se;return(se=C.current)==null?void 0:se.click()},children:[v||r.photoURL?u.jsx("img",{src:v||r.photoURL||"",alt:"Profile",className:"w-16 h-16 rounded-full object-cover border-2 border-white dark:border-slate-600 shadow-md",onError:se=>{var R;se.currentTarget.style.display="none",(R=se.currentTarget.nextElementSibling)==null||R.classList.remove("hidden")}}):null,u.jsx("div",{className:`w-16 h-16 rounded-full bg-indigo-200 dark:bg-indigo-800 flex items-center justify-center text-indigo-700 dark:text-indigo-200 font-bold text-2xl border-2 border-white dark:border-slate-600 shadow-md ${v||r.photoURL?"hidden":""}`,children:(W=($=r.username)==null?void 0:$[0])==null?void 0:W.toUpperCase()}),u.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx(qj,{size:20,className:"text-white"})})]}),u.jsx("input",{type:"file",ref:C,className:"hidden",accept:"image/*",onChange:L}),u.jsx("div",{className:"flex-1 min-w-0",children:c?u.jsx("input",{type:"text",value:p,onChange:se=>m(se.target.value.toLowerCase().replace(/\s/g,"")),className:"w-full p-2 border border-indigo-300 rounded-lg text-sm dark:bg-slate-800 dark:border-slate-600 dark:text-white",placeholder:"Username"}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"font-bold text-lg text-slate-800 dark:text-white truncate",children:r.username}),u.jsx("div",{className:"text-xs text-slate-500 truncate",children:r.email||"Mode Offline"})]})}),!c&&u.jsx("button",{onClick:B,className:"p-2 bg-white dark:bg-slate-700 rounded-lg text-indigo-600 dark:text-indigo-400 hover:shadow-md transition",children:u.jsx(zO,{size:16})})]}),c&&u.jsxs("div",{className:"flex gap-2 animate-fade-in",children:[u.jsxs("button",{onClick:O,disabled:T||!p,className:"flex-1 bg-indigo-600 text-white py-2 rounded-lg text-xs font-bold flex items-center justify-center gap-1 disabled:opacity-50 hover:bg-indigo-700 transition",children:[T?u.jsx(Kn,{size:14,className:"animate-spin"}):u.jsx(yh,{size:14})," Simpan Perubahan"]}),u.jsx("button",{onClick:()=>{f(!1),_(null)},className:"flex-1 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 py-2 rounded-lg text-xs font-bold hover:bg-slate-300 dark:hover:bg-slate-600 transition",children:"Batal"})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.darkMode?"bg-indigo-600 text-white":"bg-slate-200 text-slate-500"}`,children:t.darkMode?u.jsx(S1,{size:20}):u.jsx(N1,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Tema Gelap"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Tampilan malam hari."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.darkMode,onChange:()=>D("darkMode")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.soundEnabled?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:t.soundEnabled?u.jsx(E9,{size:20}):u.jsx(A9,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Efek Suara"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Bunyi klik & interaksi."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.soundEnabled,onChange:()=>D("soundEnabled")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.musicEnabled?"bg-pink-100 text-pink-600":"bg-slate-200 text-slate-500"}`,children:u.jsx(UO,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Musik Latar"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Musik santai saat belajar."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.musicEnabled,onChange:()=>D("musicEnabled")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex justify-between mb-2",children:[u.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Volume Utama"}),u.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[Math.round(t.volume*100),"%"]})]}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.volume,onChange:N,className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-600 accent-indigo-600"})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.funnyNotifications?"bg-amber-100 text-amber-600":"bg-slate-200 text-slate-500"}`,children:t.funnyNotifications?u.jsx(Pj,{size:20}):u.jsx(Mj,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Notifikasi Lucu"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Pesan penyemangat unik."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.funnyNotifications,onChange:()=>D("funnyNotifications")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.confirmActions?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:u.jsx(zs,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Konfirmasi Aksi"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Cegah salah pencet."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.confirmActions,onChange:()=>D("confirmActions")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]})]})]})})},P9="Fajmuls22",L9=({category:n,skdStream:e,availablePackages:t,history:s,onSelectPackage:r,onGenerateNew:o,onImportPackage:c,onDeletePackage:f,onBack:p,showToast:m,confirmEnabled:v,onRefresh:_,isLoading:T})=>{F.useEffect(()=>{_()},[]);const[A,C]=F.useState(""),[D,N]=F.useState(!1),[L,O]=F.useState(null),[B,$]=F.useState(!1),W=F.useRef(null),se=me=>{const Ae=s.filter(ue=>ue.packageId===me);if(Ae.length===0)return{attempts:0,highScore:0,avgScore:0};const Y=Ae.map(ue=>ue.score);return{attempts:Ae.length,highScore:Math.max(...Y),avgScore:Math.round(Y.reduce((ue,xe)=>ue+xe,0)/Y.length),lastAttemptDate:Ae[0].date}},R=(me,Ae)=>{oe.play("click"),O({type:me,payload:Ae}),C(""),N(!0)},M=()=>{var me;if(!A){m("Masukkan token akses!","error");return}A===P9?(N(!1),oe.play("success"),(L==null?void 0:L.type)==="GENERATE"?k():(L==null?void 0:L.type)==="IMPORT"?(me=W.current)==null||me.click():(L==null?void 0:L.type)==="DELETE"&&V(L.payload)):(oe.play("error"),m("Token salah! Akses ditolak.","error"))},k=async()=>{$(!0);try{await o("verified_client")}catch(me){console.error(me)}finally{$(!1)}},V=me=>{f(me)},U=(me,Ae)=>{me.stopPropagation();const Y=JSON.stringify(Ae,null,2),ue=new Blob([Y],{type:"application/json"}),xe=URL.createObjectURL(ue),Le=document.createElement("a");Le.href=xe,Le.download=`${Ae.title.replace(/\s+/g,"_")}.json`,document.body.appendChild(Le),Le.click(),document.body.removeChild(Le),URL.revokeObjectURL(xe),m("Paket Soal berhasil didownload","success")},G=()=>{oe.play("click"),_()},j=t.filter(me=>me.category===n&&(!e||me.skdStream===e)).sort((me,Ae)=>me.title.localeCompare(Ae.title,void 0,{numeric:!0,sensitivity:"base"}));return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center relative",children:[D&&u.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"flex flex-col items-center mb-6",children:[u.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mb-4",children:u.jsx(l9,{size:32})}),u.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Verifikasi Admin"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center mt-1",children:"Fitur ini dilindungi. Masukkan token untuk melanjutkan."})]}),u.jsx("input",{type:"password",placeholder:"Token Akses...",value:A,onChange:me=>C(me.target.value),className:"w-full p-4 border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:border-indigo-600 focus:ring-0 outline-none text-center font-bold tracking-widest",autoFocus:!0,onKeyDown:me=>me.key==="Enter"&&M()}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>N(!1),className:"flex-1 py-3 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Batal"}),u.jsx("button",{onClick:M,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Verifikasi"})]})]})}),u.jsxs("div",{className:"max-w-4xl w-full",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("button",{onClick:p,className:"flex items-center gap-2 text-slate-500 hover:text-indigo-600",children:[u.jsx(Ct,{size:20})," Kembali"]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white hidden sm:block",children:["Pilih Paket Soal ",n]}),u.jsx("button",{onClick:G,disabled:T,className:"p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:shadow-sm transition disabled:opacity-50",title:"Refresh Paket Soal",children:u.jsx(YO,{size:20,className:T?"animate-spin":""})})]})]}),u.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6 sm:hidden",children:["Pilih Paket Soal ",n]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-8",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[u.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[u.jsx(NO,{size:18,className:"text-slate-400"})," Admin Zone"]}),u.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[u.jsxs("button",{onClick:()=>R("GENERATE"),disabled:B,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-indigo-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition shadow-sm",children:[B?u.jsx(Kn,{className:"animate-spin",size:18}):u.jsx(KO,{size:18}),u.jsx("span",{children:"Buat Paket AI"})]}),u.jsxs("button",{onClick:()=>R("IMPORT"),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-white dark:bg-slate-700 text-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 px-5 py-2.5 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition shadow-sm",children:[u.jsx(Pg,{size:18}),u.jsx("span",{children:"Import"})]})]})]}),u.jsx("input",{type:"file",ref:W,className:"hidden",accept:".json",multiple:!0,onChange:me=>{me.target.files&&me.target.files.length>0&&c(me.target.files),W.current&&(W.current.value="")}})]}),T&&j.length===0?u.jsxs("div",{className:"py-20 text-center text-slate-500",children:[u.jsx(Kn,{className:"animate-spin mx-auto mb-2"}),u.jsx("p",{children:"Memuat paket soal terbaru..."})]}):u.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:j.map(me=>{const Ae=se(me.id);return u.jsxs("button",{onClick:()=>r(me),className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 transition text-left group relative overflow-hidden w-full shadow-sm hover:shadow-md",children:[me.isAiGenerated&&u.jsx("div",{className:"absolute top-0 right-0 bg-indigo-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg",children:"AI Generated"}),u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2 group-hover:text-indigo-600 transition-colors pr-8 line-clamp-2",children:me.title}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{onClick:Y=>U(Y,me),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Download JSON Soal",children:u.jsx(_1,{size:18})}),u.jsx("div",{onClick:Y=>{Y.stopPropagation(),R("DELETE",me.id)},className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Hapus Paket (Butuh Token)",children:u.jsx(_l,{size:18})})]})]}),u.jsxs("div",{className:"flex gap-4 text-xs text-slate-500 dark:text-slate-400 mb-4 items-center",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(ua,{size:12})," ",me.durationMinutes," Menit"]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(nr,{size:12})," ",me.questions.length," Soal"]}),me.version==="v2"&&u.jsx("span",{className:"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300 font-bold px-2 py-0.5 rounded-full text-[10px] border border-purple-200 dark:border-purple-800",children:"v2"})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-xl p-3 grid grid-cols-3 gap-2 text-center",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Percobaan"}),u.jsxs("div",{className:"text-lg font-bold text-slate-800 dark:text-white",children:[Ae.attempts,"x"]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Tertinggi"}),u.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:Ae.highScore})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Rata-rata"}),u.jsx("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:Ae.avgScore})]})]})]},me.id)})})]})]})},U9=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-sm font-sans"})},V9=({answers:n,questions:e,onHome:t,onRetry:s,category:r,details:o})=>{const c=n.filter(D=>D.isCorrect).length;let f=(o==null?void 0:o.total)||(o==null?void 0:o.average)||(o==null?void 0:o.iqScore)||Math.round(c/e.length*100);if(r==="GENERAL"&&!o){const D=n.reduce((N,L)=>N+(L.scoreEarned||0),0);f=Math.round(D/(e.length||1))}const[p,m]=F.useState(""),[v,_]=F.useState(!1),T=n.filter(D=>!D.isCorrect),A=Array.from(new Set(T.map(D=>{var L,O;const N=e.find(B=>B.id===D.questionId);return((L=N==null?void 0:N.metadata)==null?void 0:L.subtest)||((O=N==null?void 0:N.metadata)==null?void 0:O.topic)||"General"}))),C=async()=>{_(!0);try{const D=await $D(A);m(D)}catch{alert("Gagal memuat saran AI.")}finally{_(!1)}};return u.jsx("div",{className:"min-h-screen bg-white dark:bg-slate-900 p-6 md:p-12 flex flex-col items-center transition-colors",children:u.jsxs("div",{className:"max-w-2xl w-full text-center",children:[u.jsx("div",{className:"inline-block p-4 rounded-full bg-slate-50 dark:bg-slate-800 mb-6",children:f>=(r==="UTBK"?600:70)?u.jsx(y1,{size:48,className:"text-emerald-500"}):u.jsx(Bs,{size:48,className:"text-amber-500"})}),u.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Sesi Selesai!"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut adalah analisis hasil belajar Anda."}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[u.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:"Skor Akhir"}),u.jsx("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:f})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[u.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:r==="GENERAL"?"Poin":"Akurasi"}),u.jsx("div",{className:"text-4xl font-black text-indigo-600 dark:text-indigo-400",children:r==="GENERAL"?f:`${Math.round(c/e.length*100)}%`})]})]}),r==="UTBK"&&o&&u.jsxs("div",{className:"mb-8 w-full bg-slate-50 dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-4",children:[u.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 text-left border-b border-slate-200 dark:border-slate-700 pb-2",children:"Rincian Subtes (IRT)"}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Penalaran Umum:"})," ",u.jsx("b",{children:o.pu})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"PPU:"})," ",u.jsx("b",{children:o.ppu})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"PBM:"})," ",u.jsx("b",{children:o.pbm})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Kuantitatif:"})," ",u.jsx("b",{children:o.pk})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Lit. B.Indo:"})," ",u.jsx("b",{children:o.lbi})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Lit. B.Inggris:"})," ",u.jsx("b",{children:o.lbe})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Penalaran Math:"})," ",u.jsx("b",{children:o.pm})]})]})]}),A.length>0&&u.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/10 border border-rose-100 dark:border-rose-900 p-6 rounded-2xl mb-8 text-left w-full",children:[u.jsxs("h3",{className:"font-bold text-rose-800 dark:text-rose-400 flex items-center gap-2",children:[u.jsx(io,{size:20})," Topik Perlu Perbaikan"]}),u.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:A.slice(0,5).map(D=>u.jsx("span",{className:"bg-white dark:bg-rose-900/40 text-rose-600 dark:text-rose-200 px-3 py-1 rounded-full text-xs font-bold border border-rose-200 dark:border-rose-800",children:D},D))}),p?u.jsxs("div",{className:"mt-4 pt-4 border-t border-rose-200 dark:border-rose-800",children:[u.jsx("h4",{className:"font-bold text-sm text-rose-800 dark:text-rose-400 mb-2",children:"Saran AI:"}),u.jsx("div",{className:"prose prose-sm prose-rose max-w-none text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 p-4 rounded-xl border border-rose-100 dark:border-rose-800",children:u.jsx(U9,{text:p})})]}):u.jsxs("button",{onClick:C,disabled:v,className:"text-sm font-bold text-rose-700 dark:text-rose-400 underline flex items-center gap-1 hover:text-rose-900 dark:hover:text-rose-300",children:[v?u.jsx(Kn,{className:"animate-spin",size:14}):u.jsx(E1,{size:14}),"Minta Saran Perbaikan AI"]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden text-left mb-8 w-full",children:[u.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 border-b border-slate-100 dark:border-slate-600 font-bold text-slate-700 dark:text-slate-200",children:"Detail Jawaban"}),u.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.map((D,N)=>{const L=n.find(B=>B.questionId===D.id),O=L==null?void 0:L.isCorrect;return u.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-750 transition",children:[u.jsxs("div",{className:"flex justify-between items-start mb-1",children:[u.jsxs("span",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:["Soal ",N+1]}),O?u.jsx(zs,{size:16,className:"text-emerald-500"}):u.jsx(fu,{size:16,className:"text-rose-500"})]}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2",children:D.content})]},N)})})]}),u.jsxs("div",{className:"flex gap-4 w-full",children:[u.jsx("button",{onClick:t,className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ke Menu Utama"}),u.jsx("button",{onClick:s,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Coba Lagi"})]})]})})},jE=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},Pf=n=>n.category==="PSIKOTEST"&&n.details&&"speedPerMinute"in n.details,M1=n=>n.category==="KECERMATAN"&&n.details&&"averageSpeed"in n.details,nf=n=>n.category==="PSIKOTEST"&&n.details&&"iqScore"in n.details,j9=n=>{switch(n){case"UTBK":return{icon:Mg,color:"text-rose-600",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800"};case"SKD":return{icon:x1,color:"text-amber-600",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800"};case"PSIKOTEST":return{icon:Vs,color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800"};case"TPA":return{icon:da,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800"};case"KECERMATAN":return{icon:T1,color:"text-emerald-600",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800"};case"INTERVIEW":return{icon:ph,color:"text-cyan-600",bg:"bg-cyan-100 dark:bg-cyan-900/30",border:"border-cyan-200 dark:border-cyan-800"};case"BUTAWRNA":return{icon:A1,color:"text-pink-600",bg:"bg-pink-100 dark:bg-pink-900/30",border:"border-pink-200 dark:border-pink-800"};case"SKRIPSI":return{icon:hh,color:"text-indigo-600",bg:"bg-indigo-100 dark:bg-indigo-900/30",border:"border-indigo-200 dark:border-indigo-800"};default:return{icon:nr,color:"text-slate-600",bg:"bg-slate-100 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"}}},er=(n,e="PERCENT")=>{let t="",s="";return e==="IQ"?n>=130?(t="Sempurna (Genius)",s="text-cyan-500 dark:text-cyan-400"):n>=120?(t="Istimewa (Superior)",s="text-teal-500 dark:text-teal-400"):n>=110?(t="Sangat Baik (High Avg)",s="text-emerald-500 dark:text-emerald-400"):n>=90?(t="Baik (Average)",s="text-indigo-500 dark:text-indigo-400"):n>=80?(t="Cukup (Low Avg)",s="text-amber-500 dark:text-amber-400"):n>=70?(t="Buruk (Borderline)",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"):n===100?(t="Sempurna",s="text-cyan-500 dark:text-cyan-400"):n>=95?(t="Istimewa",s="text-teal-500 dark:text-teal-400"):n>=85?(t="Sangat Baik",s="text-emerald-500 dark:text-emerald-400"):n>=70?(t="Baik",s="text-lime-600 dark:text-lime-500"):n>=55?(t="Cukup",s="text-amber-500 dark:text-amber-400"):n>=40?(t="Buruk",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"),{text:t,color:s}},OE=(n,e)=>{const t=e>0?n/e*100:0;return er(t,"PERCENT").color},GE=n=>{if(n<60)return`${Math.round(n)}s`;const e=Math.floor(n/60),t=Math.round(n%60);return`${e}m ${t}s`},D1=n=>n==="SIMBOL"||n==="SAMA_BEDA"?"SAMA BEDA SIMBOL":n==="SIMBOL_HILANG"?"SIMBOL HILANG":n==="ANGKA"?"ANGKA HILANG":n==="HURUF"?"HURUF HILANG":n,O9=({history:n,onBack:e,onReview:t,username:s,onExport:r,onImport:o,onDelete:c})=>{const[f,p]=F.useState("ALL"),[m,v]=F.useState(null),_=F.useRef(null),T=n.filter(O=>f==="ALL"||O.category===f),A=T.length,C=A>0?Math.round(T.reduce((O,B)=>O+B.score,0)/A):0,D=A>0?Math.max(...T.map(O=>O.score)):0,N=(O,B)=>{O.stopPropagation(),oe.play("click"),v(B)},L=()=>{m&&(c(m),v(null))};return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 md:p-6 transition-colors",children:[m&&u.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-400",children:u.jsx(_l,{size:24})}),u.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Hapus Riwayat?"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Data hasil tes ini akan dihapus secara permanen dan tidak dapat dikembalikan."}),u.jsxs("div",{className:"flex gap-3 w-full",children:[u.jsx("button",{onClick:()=>v(null),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Batal"}),u.jsx("button",{onClick:L,className:"flex-1 py-3 bg-rose-600 text-white rounded-xl font-bold hover:bg-rose-700 transition",children:"Hapus"})]})]})})}),u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:u.jsx(Ct,{size:20})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Riwayat Belajar"}),u.jsxs("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[u.jsx(I1,{size:12})," ",s]})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold text-xs hover:bg-slate-50 dark:hover:bg-slate-700 transition shadow-sm",children:[u.jsx(_1,{size:14})," Backup"]}),u.jsxs("button",{onClick:()=>{var O;return(O=_.current)==null?void 0:O.click()},className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-800 rounded-xl font-bold text-xs hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition shadow-sm",children:[u.jsx(Pg,{size:14})," Restore"]}),u.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:O=>{var B;(B=O.target.files)!=null&&B[0]&&o(O.target.files[0]),_.current&&(_.current.value="")}})]})]}),u.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-4 scrollbar-hide",children:[u.jsx("button",{onClick:()=>p("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${f==="ALL"?"bg-slate-900 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Semua"}),Pp.map(O=>u.jsx("button",{onClick:()=>p(O.id),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${f===O.id?"bg-indigo-600 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:O.name},O.id))]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[u.jsx(lO,{size:14})," Total Tes"]}),u.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:A})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[u.jsx(m9,{size:14})," Avg Skor"]}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:C})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[u.jsx(y1,{size:14})," Tertinggi"]}),u.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-500",children:D})]})]}),u.jsx("div",{className:"space-y-4",children:T.length===0?u.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700 text-slate-400",children:[u.jsx(Dg,{size:48,className:"mx-auto mb-4 opacity-20"}),u.jsx("p",{children:"Tidak ada riwayat untuk kategori ini."})]}):T.map(O=>{const B=j9(O.category),$=B.icon,W=O.questions?O.questions.length:0,se=O.answers?O.answers.length:0,R=O.answers?O.answers.filter(te=>te.isCorrect).length:0,M=se-R,k=O.answers?O.answers.reduce((te,ge)=>te+(ge.timeTakenSeconds||0),0):0,V=GE(k),U=Pf(O),G=M1(O),j=nf(O);let me=O.category;O.category==="TPA"?me="TPA & Bahasa Inggris":O.category==="PSIKOTEST"&&Pf(O)?me="Tes Koran / Pauli":O.category==="PSIKOTEST"&&nf(O)?me="Psikotes (IQ & Logika)":O.category==="KECERMATAN"&&(me="Tes Kecermatan"),O.packageTitle&&(me=O.packageTitle);let Ae=O.score.toString(),Y="SKOR",ue={text:"-",color:"text-slate-500"};if(G){const te=O.details;Ae=te.accuracy+"%",Y="AKURASI",ue=er(te.accuracy,"PERCENT")}else if(U){const te=O.details;Ae=te.accuracy+"%",Y="AKURASI",ue=er(te.accuracy,"PERCENT")}else if(j){const te=O.details.iqScore||O.score;Ae=te.toString(),Y="IQ SCORE",ue=er(te,"IQ")}else{const te=O.maxScore>0?O.score/O.maxScore*100:0;ue=er(te,"PERCENT")}const xe=ue.color;let Le=R,ye=M,H=0,re=0,pe={val:0,index:0},ie=[];if(G){const te=O.details;Le=te.totalCorrect,ye=te.totalWrong,H=te.averageSpeed,re=te.stability,ie=te.sectionData.map(ge=>ge.correct)}else if(U){const te=O.details;Le=te.totalCorrect,ye=te.totalWrong,H=te.speedPerMinute,re=te.consistencyScore,ie=te.intervalData}if(ie&&ie.length>0){const te=Math.max(...ie),ge=ie.indexOf(te);pe={val:te,index:ge+1}}return u.jsxs("div",{onClick:()=>t(O),className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 hover:shadow-lg hover:border-indigo-300 dark:hover:border-indigo-500 transition group relative overflow-hidden cursor-pointer",children:[u.jsxs("div",{className:"absolute top-0 right-0 z-10 flex",children:[O.isAborted&&u.jsx("span",{className:"bg-amber-500 text-white text-[10px] px-2 py-1 font-bold rounded-bl-lg",children:"TIDAK SELESAI"}),O.details&&O.details.passed!==void 0&&u.jsx("span",{className:`text-[10px] px-2 py-1 font-bold rounded-bl-lg text-white ${O.details.passed?"bg-emerald-500":"bg-rose-500"}`,children:O.details.passed?"LULUS":"TIDAK LULUS"})]}),u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${B.bg} ${B.color} border ${B.border}`,children:u.jsx($,{size:24})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2 pr-12",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white truncate text-base pr-2",children:me}),O.packageTitle&&O.packageTitle!==me&&u.jsxs("p",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-medium truncate flex items-center gap-1 mb-1",children:[u.jsx(jO,{size:10})," ",O.packageTitle]}),u.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-xs mt-1 flex-wrap",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(v1,{size:12})," ",new Date(O.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]}),O.skdStream&&u.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-600 dark:text-slate-300 uppercase",children:O.skdStream}),G&&O.details.mode&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"bg-emerald-100 dark:bg-emerald-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-emerald-700 dark:text-emerald-400 uppercase",children:D1(O.details.mode)}),u.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[u.jsx(ua,{size:10})," ",V]})]}),U&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"bg-purple-100 dark:bg-purple-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-purple-700 dark:text-purple-400 uppercase",children:"PAULI"}),u.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[u.jsx(ua,{size:10})," ",V]})]}),nf(O)&&u.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-indigo-700 dark:text-indigo-400 uppercase",children:"IQ LOGIKA"})]})]}),u.jsxs("div",{className:"text-right shrink-0",children:[u.jsx("div",{className:`text-2xl font-black ${xe}`,children:Ae}),u.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:Y})]})]}),u.jsxs("div",{className:"mt-3",children:[G||U?u.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600 last:border-0 sm:last:border-0",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Total Dijawab"}),u.jsx("span",{className:"font-black text-indigo-600 dark:text-indigo-400",children:Le+ye})]}),u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Benar/Salah"}),u.jsxs("span",{className:"font-bold",children:[u.jsx("span",{className:"text-emerald-500",children:Le})," / ",u.jsx("span",{className:"text-rose-500",children:ye})]})]}),u.jsxs("div",{className:"flex flex-col text-center border-r-0 sm:border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Speed Avg"}),u.jsx("span",{className:"font-black text-slate-700 dark:text-slate-200",children:H})]}),u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Stabil"}),u.jsx("span",{className:"font-black text-amber-500",children:re})]}),u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Peak"}),u.jsxs("span",{className:"font-black text-emerald-500",title:`Highest: ${pe.val} at Interval ${pe.index}`,children:[pe.val,u.jsxs("span",{className:"text-[8px] text-slate-400 font-normal ml-0.5",children:["@",pe.index]})]})]}),u.jsxs("div",{className:"flex flex-col text-center",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Kesimpulan"}),u.jsx("span",{className:`font-black text-[10px] leading-tight ${ue.color}`,children:ue.text})]})]}):u.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Dijawab"}),u.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:[se," ",u.jsxs("span",{className:"text-slate-400",children:["/ ",W]})]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Benar / Salah"}),u.jsxs("span",{className:"font-bold text-emerald-600",children:[R," ",u.jsx("span",{className:"text-slate-400",children:"/"})," ",u.jsx("span",{className:"text-rose-500",children:M})]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Waktu"}),u.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:GE(k)})]}),O.category==="SKD"&&O.details&&u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rincian"}),u.jsxs("div",{className:"flex gap-1 text-[8px] font-mono",children:[u.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-400 px-1 rounded",children:["TWK:",O.details.twk]}),u.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-400 px-1 rounded",children:["TIU:",O.details.tiu]}),u.jsxs("span",{className:"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-400 px-1 rounded",children:["TKP:",O.details.tkp]})]})]}),O.category==="UTBK"&&O.details&&u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rata-rata Subtes"}),u.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:O.details.average})]})]}),(U||G)&&ie.length>0&&u.jsx("div",{className:"mt-2 h-8 flex items-end gap-0.5 opacity-50 hover:opacity-100 transition-opacity",children:ie.map((te,ge)=>{const _e=Math.max(...ie,1),Ie=te/_e*100;return u.jsx("div",{className:`flex-1 rounded-t-sm ${ge+1===pe.index?"bg-emerald-500":"bg-slate-300 dark:bg-slate-600"}`,style:{height:`${Ie}%`}},ge)})})]})]})]}),u.jsxs("div",{className:"absolute bottom-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:te=>N(te,O.id),className:"p-2 bg-rose-50 dark:bg-rose-900/30 text-rose-600 rounded-full hover:bg-rose-100 dark:hover:bg-rose-900/50 transition z-20",title:"Hapus",children:u.jsx(_l,{size:14})}),u.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 rounded-full",children:u.jsx(Qa,{size:14})})]})]},O.id)})})]})]})},G9=({item:n,onBack:e})=>{if(Pf(n)||M1(n)){const t=Pf(n),s=n.details;let r=[],o=0,c=0,f=0,p=0,m=0,v="",_={text:"-",color:"text-slate-500"};if(t){const C=s;r=C.intervalData||[],o=C.totalCorrect,c=C.totalWrong,f=C.speedPerMinute,p=C.accuracy,m=C.consistencyScore,v="PAULI / KORAN",_=er(C.accuracy,"PERCENT")}else{const C=s;r=C.sectionData.map(D=>D.correct),o=C.totalCorrect,c=C.totalWrong,f=C.averageSpeed,p=C.accuracy,m=C.stability,v=D1(C.mode),_=er(C.accuracy,"PERCENT")}let T=0,A=0;return r.length>0&&(T=Math.max(...r),A=r.indexOf(T)+1),u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[u.jsx(Ct,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&u.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 p-8",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[u.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl text-indigo-600 dark:text-indigo-400",children:u.jsx(Bs,{size:32})}),u.jsxs("div",{children:[u.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Analisis ",v]}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Kesimpulan: ",u.jsx("span",{className:`font-bold ${_.color}`,children:_.text})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Volume Total"}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:o}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Error / Salah"}),u.jsx("div",{className:"text-3xl font-black text-rose-500",children:c}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban salah"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Kecepatan (Avg)"}),u.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:f}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"per menit/bagian"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Akurasi"}),u.jsxs("div",{className:`text-3xl font-black ${er(p,"PERCENT").color}`,children:[p,"%"]}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"ketelitian kerja"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Stabilitas"}),u.jsx("div",{className:"text-3xl font-black text-amber-500",children:m}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Peak Performance"}),u.jsx("div",{className:"text-3xl font-black text-emerald-500",children:T}),u.jsxs("div",{className:"text-[10px] text-slate-500",children:["tertinggi pada menit ke-",A]})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Grafik Ritme Kerja (Per Menit/Bagian)"}),u.jsx("div",{className:"h-64 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative overflow-x-auto",children:r.map((C,D)=>{const N=Math.max(...r,10),L=C/N*100,O=C===T;return u.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full min-w-[20px]",children:[u.jsx("div",{className:`w-full rounded-t-sm transition-all hover:opacity-80 ${O?"bg-emerald-500":"bg-indigo-600"}`,style:{height:`${L}%`}}),u.jsx("div",{className:"mt-2 text-[10px] font-bold text-slate-400",children:D+1}),u.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-black text-white text-xs p-2 rounded z-10 whitespace-nowrap shadow-xl",children:["Menit ",D+1,": ",C]})]},D)})}),u.jsxs("p",{className:"text-xs text-slate-400 mt-2 text-center",children:["Grafik menunjukkan jumlah jawaban benar per interval. Grafik yang stabil atau naik menandakan ketahanan kerja yang baik.",u.jsx("br",{}),"Peak Performance ditandai dengan warna hijau."]})]})]})]})})}return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[u.jsx(Ct,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&u.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),n.category==="SKD"&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TWK"}),u.jsx("div",{className:`text-2xl font-black ${n.details.twk>=65?"text-emerald-600":"text-rose-500"}`,children:n.details.twk}),u.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 65"})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TIU"}),u.jsx("div",{className:`text-2xl font-black ${n.details.tiu>=80?"text-emerald-600":"text-rose-500"}`,children:n.details.tiu}),u.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 80"})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TKP"}),u.jsx("div",{className:`text-2xl font-black ${n.details.tkp>=166?"text-emerald-600":"text-rose-500"}`,children:n.details.tkp}),u.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 166"})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full bg-slate-50 dark:bg-slate-700/50 p-2 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-300 uppercase tracking-widest mb-1",children:"Total"}),u.jsx("div",{className:`text-3xl font-black ${OE(n.score,550)}`,children:n.score})]})]}),n.category==="TPA"&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TPA SCORE"}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:n.details.tpaScore})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TPA BENAR"}),u.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:n.details.tpaCorrect})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TBI SCORE"}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:n.details.tbiScore})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TBI BENAR"}),u.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:n.details.tbiCorrect})]})]}),n.category==="UTBK"&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-200 dark:border-slate-700 pb-2",children:[u.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 text-sm uppercase",children:"Rincian Skor Subtes"}),u.jsxs("div",{className:`text-xl font-black ${OE(n.details.average,1e3)}`,children:["Avg: ",n.details.average]})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:Object.entries(n.details).filter(([t])=>t!=="average").map(([t,s])=>u.jsxs("div",{className:"p-2 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1",children:t.toUpperCase()}),u.jsx("div",{className:"text-xl font-bold text-slate-800 dark:text-white",children:s})]},t))})]}),nf(n)&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-sm border-2 border-purple-100 dark:border-purple-900 mb-6 text-center relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-purple-50 dark:bg-purple-900/20 rounded-bl-full -mr-4 -mt-4"}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("div",{className:"text-sm font-bold text-purple-400 uppercase tracking-widest mb-2",children:"ESTIMASI IQ ANDA"}),u.jsx("div",{className:`text-6xl font-black mb-4 tracking-tighter ${er(n.details.iqScore,"IQ").color}`,children:n.details.iqScore}),u.jsx("div",{className:"inline-block px-6 py-2 bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-200 rounded-full font-bold text-lg border border-purple-200 dark:border-purple-700",children:n.details.classification}),u.jsx("p",{className:"text-slate-400 text-xs mt-4 max-w-md mx-auto",children:"*Hasil ini adalah estimasi berdasarkan simulasi tes dan mungkin berbeda dengan tes psikologi profesional."})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[u.jsxs("h2",{className:"text-xl font-bold mb-6 text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(da,{size:20,className:"text-amber-500"})," Pembahasan Soal"]}),u.jsx("div",{className:"space-y-6",children:n.questions.map((t,s)=>{var p;const r=n.answers.find(m=>m.questionId===t.id),o=r==null?void 0:r.isCorrect,c=(r==null?void 0:r.scoreEarned)||0;let f="bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300";return c>0?t.tkpPoints?c===5?f="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":f="bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":f="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":f="bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400",u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/30 transition",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:["No. ",s+1]}),u.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide hidden sm:inline",children:(p=t.metadata)==null?void 0:p.subtest})]}),u.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 ${f}`,children:[c>0?u.jsx(zs,{size:12}):u.jsx(fu,{size:12}),c," Poin"]})]}),u.jsx("div",{className:"mb-4 text-slate-800 dark:text-slate-200 font-medium text-base leading-relaxed",children:u.jsx(jE,{text:t.content})}),u.jsxs("div",{className:"grid gap-2 text-sm mb-4",children:[u.jsxs("div",{className:`p-3 rounded-lg border ${o?"bg-emerald-50 border-emerald-200 dark:bg-emerald-900/10 dark:border-emerald-800 text-emerald-800 dark:text-emerald-300":"bg-rose-50 border-rose-200 dark:bg-rose-900/10 dark:border-rose-800 text-rose-800 dark:text-rose-300"}`,children:[u.jsx("span",{className:"font-bold block mb-1",children:"Jawaban Anda:"}),(r==null?void 0:r.selectedAnswer)||"Tidak dijawab"]}),!o&&!t.tkpPoints&&u.jsxs("div",{className:"p-3 rounded-lg border bg-indigo-50 border-indigo-200 dark:bg-indigo-900/10 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[u.jsx("span",{className:"font-bold block mb-1",children:"Kunci Jawaban:"}),t.correctAnswer]}),t.tkpPoints&&u.jsxs("div",{className:"p-3 rounded-lg border bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-slate-600 dark:text-slate-400",children:[u.jsx("span",{className:"font-bold block mb-1",children:"Poin Opsi TKP:"}),u.jsx("ul",{className:"list-disc pl-4 space-y-1",children:t.tkpPoints.sort((m,v)=>v.points-m.points).map((m,v)=>u.jsxs("li",{className:m.option===(r==null?void 0:r.selectedAnswer)?"font-bold text-indigo-600 dark:text-indigo-400":"",children:[m.points," Poin: ",m.option]},v))})]})]}),u.jsxs("div",{className:"mt-3 text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-100 dark:border-slate-700 italic",children:[u.jsx("span",{className:"font-bold not-italic text-slate-700 dark:text-slate-300 block mb-1",children:"Pembahasan:"}),u.jsx(jE,{text:t.explanation})]})]},s)})})]})]})})},Rp=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-800 dark:text-slate-200 leading-relaxed"})},B9=({timeLeft:n,onFinish:e})=>(F.useEffect(()=>{n<=0&&e()},[n,e]),u.jsxs("div",{className:"fixed inset-0 z-[60] bg-indigo-600 flex flex-col items-center justify-center text-white px-6",children:[u.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-8 animate-pulse",children:u.jsx(T0,{size:48,className:"text-white"})}),u.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Istirahat Antar Subtes"}),u.jsxs("div",{className:"text-6xl font-mono font-bold mb-8",children:[n,"s"]}),u.jsx("p",{className:"text-xl text-center max-w-md italic opacity-90",children:'"Tarik nafas, persiapkan fokus untuk subtes berikutnya."'}),u.jsx("button",{onClick:e,className:"mt-8 px-6 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-bold",children:"Lewati Istirahat"})]})),H9=({mode:n,questions:e,drillContent:t,onComplete:s,isSkdSimulation:r,isUtbkSimulation:o,category:c,showToast:f,initialState:p,userId:m,skdStream:v,packageTitle:_,onSaveAndExit:T})=>{var He,ze,pt;const[A,C]=F.useState((p==null?void 0:p.utbkSubtestIndex)||0),[D,N]=F.useState(!1),[L,O]=F.useState(0),[B,$]=F.useState((p==null?void 0:p.currentIndex)||0),[W,se]=F.useState((p==null?void 0:p.answerMap)||{}),[R,M]=F.useState(!1),[k,V]=F.useState(!1),[U,G]=F.useState(!1),j=F.useRef(Date.now()),me=()=>p!=null&&p.timeLeft?p.timeLeft:o&&$r[0]?$r[0].duration*60:r?6e3:n===Ye.SIMULATION?c==="PSIKOTEST"?2400:c==="TPA"?6e3:3600:0,[Ae,Y]=F.useState(me);F.useEffect(()=>{if(!m)return;const Ce={uid:m,mode:n,category:c,questions:e,answerMap:W,timeLeft:Ae,currentIndex:B,utbkSubtestIndex:A,drillContent:t,skdStream:v,packageTitle:_,timestamp:Date.now()};try{localStorage.setItem("fajmuls_active_session",JSON.stringify(Ce))}catch(Ee){console.warn("Failed to save session state (quota?)",Ee)}},[Ae,W,B,A,m]);const ue=()=>{localStorage.removeItem("fajmuls_active_session")},xe=F.useMemo(()=>{if(o){const Ce=$r[A].name;return e.filter(Ee=>{var Ge,it;return(it=(Ge=Ee.metadata)==null?void 0:Ge.subtest)==null?void 0:it.includes(Ce)})}return e},[e,o,A]);F.useEffect(()=>{let Ce=null;return D&&L>0?Ce=setInterval(()=>O(Ee=>Ee-1),1e3):D&&L===0?N(!1):Ae>0&&!R&&n===Ye.SIMULATION?Ce=setInterval(()=>{Y(Ee=>(Ee<=11&&Ee>1&&oe.play("tick"),Ee-1))},1e3):Ae===0&&n===Ye.SIMULATION&&(o?Le():ye()),()=>clearInterval(Ce)},[Ae,R,D,L,n]);const Le=()=>{if(o)if(A<$r.length-1){oe.play("success");const Ce=A+1;C(Ce);const Ee=$r[Ce].duration;Y(Ee*60),$(0),O(30),N(!0)}else ye();else ye()},ye=async()=>{if(m&&!m.startsWith("guest-"))try{await hj(m)}catch{}ue(),oe.play("finish"),s(Object.values(W))},H=()=>{s(Object.values(W),void 0,!0)},re=async()=>{if(!m||m.startsWith("guest-")){f("Fitur simpan ke cloud hanya untuk pengguna login.","error");return}G(!0);const Ce={uid:m,mode:n,category:c,questions:e,answerMap:W,timeLeft:Ae,currentIndex:B,utbkSubtestIndex:A,drillContent:t,skdStream:v,packageTitle:_,timestamp:Date.now()};try{await dj(m,Ce),localStorage.removeItem("fajmuls_active_session"),f("Progres tersimpan di cloud! Anda bisa melanjutkannya nanti.","success"),T?T():s(Object.values(W),void 0,!0)}catch(Ee){console.error(Ee),f("Gagal menyimpan ke cloud. Cek koneksi internet.","error")}finally{G(!1)}},pe=async Ce=>{var Ut;const Ee=xe[B];if(!Ee)return;oe.play("click");let Ge=0,it=!1;if(c==="SKD")if(Ee.tkpPoints&&Ee.tkpPoints.length>0){const jt=Ee.tkpPoints.find(fr=>fr.option===Ce);Ge=jt?jt.points:0,it=Ge===5}else it=Ce===Ee.correctAnswer,Ge=it?5:0;else if(c==="UTBK"){it=Ce===Ee.correctAnswer;const jt=((Ut=Ee.metadata)==null?void 0:Ut.difficulty)||"Medium";Ge=it?jt==="HOTS"||jt==="Hard"?3:jt==="Medium"?2:1:0}else it=Ce===Ee.correctAnswer,Ge=it?10:0;let mt="";if(Ee.type!=="multiple_choice"&&c==="GENERAL")try{const jt=await KD(Ee.content,Ee.correctAnswer,Ce);Ge=jt.score,it=jt.isCorrect,mt=jt.feedback}catch{console.error("Grading failed")}const tt=W[Ee.id],$t=(Date.now()-j.current)/1e3,St={questionId:Ee.id,selectedAnswer:Ce,isCorrect:it,scoreEarned:Ge,timeTakenSeconds:((tt==null?void 0:tt.timeTakenSeconds)||0)+$t,isOverthinking:!1,isGuessing:$t<5,aiEvaluation:mt,isDoubtful:(tt==null?void 0:tt.isDoubtful)||!1};se(jt=>({...jt,[Ee.id]:St})),j.current=Date.now()},ie=()=>{const Ce=xe[B];se(Ee=>{const Ge=Ee[Ce.id];return Ge?{...Ee,[Ce.id]:{...Ge,isDoubtful:!Ge.isDoubtful}}:{...Ee,[Ce.id]:{questionId:Ce.id,selectedAnswer:"",isCorrect:!1,scoreEarned:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,isDoubtful:!0}}})},te=Ce=>{const Ee=Math.floor(Ce/3600),Ge=Math.floor(Ce%3600/60),it=Math.floor(Ce%60);return`${Ee>0?Ee+":":""}${Ge.toString().padStart(2,"0")}:${it.toString().padStart(2,"0")}`},ge=(Ce,Ee)=>Ce.length===0?null:u.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 border-b border-slate-100 dark:border-slate-700 pb-1",children:Ee}),u.jsx("div",{className:"grid grid-cols-5 gap-2",children:Ce.map((Ge,it)=>{const mt=xe.findIndex(St=>St.id===Ge.id),tt=W[Ge.id];let $t="bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300";return tt!=null&&tt.selectedAnswer&&($t="bg-emerald-500 border-emerald-500 text-white"),tt!=null&&tt.isDoubtful&&($t="bg-amber-400 border-amber-400 text-white"),mt===B&&($t+=" ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-slate-800"),u.jsx("button",{onClick:()=>{$(mt),V(!1)},className:`aspect-square rounded-lg border flex items-center justify-center font-bold text-sm transition-all ${$t}`,children:mt+1},Ge.id)})})]});if(D)return u.jsx(B9,{timeLeft:L,onFinish:()=>{N(!1)}});if(xe.length===0)return u.jsxs("div",{className:"p-10 text-center",children:[u.jsx(Kn,{className:"animate-spin mx-auto"})," Menyiapkan soal subtes..."]});const _e=xe[B],Ie=W[_e.id];return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row h-screen overflow-hidden transition-colors relative",children:[R&&u.jsx("div",{className:"absolute inset-0 z-50 bg-white/80 dark:bg-slate-900/90 backdrop-blur-md flex flex-col items-center justify-center animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl text-center border border-slate-200 dark:border-slate-700 max-w-sm w-full",children:[u.jsx(Zc,{size:48,className:"mx-auto mb-4 text-indigo-600"}),u.jsx("h2",{className:"text-2xl font-bold mb-4 dark:text-white",children:"Ujian Dijeda"}),u.jsxs("div",{className:"flex flex-col gap-3 justify-center",children:[u.jsxs("button",{onClick:()=>M(!1),className:"w-full px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 flex items-center justify-center gap-2",children:[u.jsx(gh,{size:20})," Lanjutkan"]}),!(m!=null&&m.startsWith("guest-"))&&u.jsxs("button",{onClick:re,disabled:U,className:"w-full px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 flex items-center justify-center gap-2 disabled:opacity-50",children:[U?u.jsx(Kn,{className:"animate-spin"}):u.jsx(UE,{size:20}),"Simpan & Lanjut Nanti"]}),u.jsx("button",{onClick:H,className:"w-full px-6 py-3 border-2 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700",children:"Keluar (Simpan Lokal)"})]})]})}),u.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative order-1",children:[u.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20",children:[u.jsxs("div",{className:"font-bold text-slate-700 dark:text-white text-sm",children:["No. ",B+1]}),u.jsxs("div",{className:"flex items-center gap-2",children:[n===Ye.SIMULATION&&u.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs font-mono font-bold dark:text-white",children:te(Ae)}),u.jsx("button",{onClick:()=>V(!k),className:"p-2 bg-indigo-50 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 rounded",children:u.jsx(lr,{size:20})})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:u.jsxs("div",{className:"max-w-3xl mx-auto pb-24",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 md:p-8 mb-6",children:[n===Ye.DRILL&&t&&u.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-100 dark:border-indigo-800 text-sm text-slate-700 dark:text-slate-300",children:[u.jsxs("h4",{className:"font-bold text-indigo-700 dark:text-indigo-300 mb-2 flex items-center gap-2",children:[u.jsx(da,{size:16})," ",t.topic]}),u.jsx("p",{children:t.summary})]}),u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("span",{className:"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:o?$r[A].name:((He=_e.metadata)==null?void 0:He.subtest)||"General"}),((ze=_e.metadata)==null?void 0:ze.difficulty)==="HOTS"&&u.jsxs("span",{className:"flex items-center gap-1 text-rose-600 dark:text-rose-400 font-bold text-xs bg-rose-50 dark:bg-rose-900/20 px-2 py-1 rounded-full",children:[u.jsx(da,{size:12})," HOTS"]})]}),u.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-8 text-slate-800 dark:text-slate-100",children:u.jsx(Rp,{text:_e.content})}),_e.type==="multiple_choice"?u.jsx("div",{className:"space-y-3",children:(pt=_e.options)==null?void 0:pt.map((Ce,Ee)=>{var $t;const Ge=String.fromCharCode(65+Ee),it=(Ie==null?void 0:Ie.selectedAnswer)===Ce;let mt="border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-750",tt="bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 group-hover:bg-slate-200 dark:group-hover:bg-slate-600";return it&&(mt="border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 dark:border-indigo-500",tt="bg-indigo-600 text-white"),n!==Ye.SIMULATION&&Ie&&((_e.tkpPoints?(($t=_e.tkpPoints.find(Ut=>Ut.option===Ce))==null?void 0:$t.points)===5:Ce===_e.correctAnswer)?(mt="border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20",tt="bg-emerald-500 text-white"):it&&(mt="border-rose-500 bg-rose-50 dark:bg-rose-900/20",tt="bg-rose-500 text-white")),u.jsxs("button",{onClick:()=>pe(Ce),className:`w-full flex items-start p-4 rounded-xl border-2 transition-all group text-left ${mt}`,children:[u.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm mr-4 transition-colors ${tt}`,children:Ge}),u.jsx("div",{className:"flex-1 pt-1 text-slate-700 dark:text-slate-200 text-base",children:u.jsx(Rp,{text:Ce})})]},Ee)})}):u.jsxs("div",{children:[" ",u.jsx("textarea",{className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-indigo-500 dark:bg-slate-900 dark:text-white",placeholder:"Ketik jawaban Anda...",rows:4,value:(Ie==null?void 0:Ie.selectedAnswer)||"",onChange:Ce=>pe(Ce.target.value)})," "]})]}),n!==Ye.SIMULATION&&Ie&&u.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800 rounded-2xl p-6 animate-fade-in-up",children:[u.jsxs("h4",{className:"font-bold text-emerald-800 dark:text-emerald-300 mb-3 flex items-center gap-2",children:[u.jsx(E1,{size:20})," Pembahasan"]}),u.jsx("div",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:u.jsx(Rp,{text:_e.explanation})})]})]})}),u.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 z-10",children:u.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[u.jsxs("button",{onClick:()=>{$(Ce=>Math.max(0,Ce-1))},disabled:B===0,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",children:[u.jsx(Ct,{size:20})," ",u.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),u.jsxs("div",{className:"flex gap-2 items-center",children:[p&&u.jsxs("div",{className:"hidden sm:flex items-center gap-1 text-xs text-emerald-600 dark:text-emerald-400 font-bold bg-emerald-50 dark:bg-emerald-900/30 px-2 py-1 rounded",children:[u.jsx(yh,{size:12})," Disimpan Otomatis"]}),u.jsxs("button",{onClick:ie,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-bold border transition ${Ie!=null&&Ie.isDoubtful?"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-400 border-amber-300 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 border-slate-200 dark:border-slate-600"}`,children:[u.jsx("input",{type:"checkbox",checked:(Ie==null?void 0:Ie.isDoubtful)||!1,readOnly:!0,className:"w-4 h-4 accent-amber-500 cursor-pointer"}),u.jsx("span",{children:"Ragu-ragu"})]})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),B<xe.length-1?$(Ce=>Ce+1):o?Le():ye()},className:"flex items-center gap-2 px-6 py-2 rounded-lg font-bold bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg",children:[u.jsx("span",{className:"hidden sm:inline",children:B===xe.length-1?o&&A<$r.length-1?"Lanjut Subtes":"Selesai":"Berikutnya"}),u.jsx(Qa,{size:20})]})]})})]}),u.jsxs("div",{className:`fixed inset-y-0 right-0 w-80 bg-white dark:bg-slate-800 border-l border-slate-200 dark:border-slate-700 transform transition-transform duration-300 z-40 flex flex-col order-2 ${k?"translate-x-0":"translate-x-full"} md:translate-x-0 md:relative md:w-80`,children:[u.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex flex-col gap-3 bg-slate-50 dark:bg-slate-800",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300",children:"Navigasi Soal"}),u.jsx("button",{onClick:()=>V(!1),className:"md:hidden text-slate-500",children:u.jsx(fu,{size:24})})]}),!(m!=null&&m.startsWith("guest-"))&&u.jsxs("button",{onClick:re,disabled:U,className:"w-full flex items-center justify-center gap-2 py-2 bg-emerald-600 text-white rounded-lg font-bold text-xs hover:bg-emerald-700 disabled:opacity-50 transition",children:[U?u.jsx(Kn,{size:14,className:"animate-spin"}):u.jsx(UE,{size:14}),"Kerjakan Lagi Nanti (Cloud)"]}),u.jsxs("button",{onClick:H,className:"w-full flex items-center justify-center gap-2 py-2 border border-rose-200 dark:border-rose-900 text-rose-600 dark:text-rose-400 rounded-lg font-bold text-xs hover:bg-rose-50 dark:hover:bg-rose-900/20 transition",children:[u.jsx(Ct,{size:14})," Keluar (Simpan Lokal)"]})]}),n===Ye.SIMULATION&&Ae>0&&u.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 hidden md:block",children:[u.jsxs("div",{className:"flex justify-between items-center mb-3",children:[u.jsx("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Sisa Waktu"}),u.jsxs("button",{onClick:()=>M(!0),className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded font-bold hover:bg-amber-200 flex items-center gap-1",children:[u.jsx(Zc,{size:12})," Jeda"]})]}),u.jsx("div",{className:"text-3xl font-mono font-bold text-slate-800 dark:text-white text-center",children:te(Ae)})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:r?u.jsxs(u.Fragment,{children:[ge(xe.filter(Ce=>{var Ee,Ge;return(Ge=(Ee=Ce.metadata)==null?void 0:Ee.subtest)==null?void 0:Ge.includes("TWK")}),"Tes Wawasan Kebangsaan (TWK)"),ge(xe.filter(Ce=>{var Ee,Ge;return(Ge=(Ee=Ce.metadata)==null?void 0:Ee.subtest)==null?void 0:Ge.includes("TIU")}),"Tes Intelegensia Umum (TIU)"),ge(xe.filter(Ce=>{var Ee,Ge;return(Ge=(Ee=Ce.metadata)==null?void 0:Ee.subtest)==null?void 0:Ge.includes("TKP")}),"Tes Karakteristik Pribadi (TKP)")]}):ge(xe,o?$r[A].name:c)}),u.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 md:hidden",children:u.jsx("button",{onClick:ye,className:"w-full py-3 bg-rose-600 text-white rounded-xl font-bold",children:"Hentikan Ujian"})})]}),k&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>V(!1)})]})},Hd=10,Mp=60,z9=500,BE=50,F9=(n,e)=>Array.from({length:n},()=>Array.from({length:e},()=>Math.floor(Math.random()*10))),q9=(n,e,t,s,r)=>{let o=0;return n>=400?o+=40:n>=300?o+=30:n>=200?o+=20:o+=10,t>=99?o+=20:t>=97?o+=15:t>=95?o+=10:o+=5,s<3?o+=20:s<6?o+=15:s<9?o+=10:o+=5,r==="NAIK"?o+=20:r==="STABIL"?o+=15:o+=5,o>=90?"Sangat Disarankan (Konsisten & Tinggi)":o>=75?"Disarankan (Baik)":o>=60?"Cukup (Perlu Latihan)":r==="TURUN"&&s>8?"Indikasi Kelelahan / Emosi Tidak Stabil":"Kurang Disarankan"},K9=n=>{if(n.length<2)return"STABIL";const e=Math.floor(n.length/2),t=n.slice(0,e),s=n.slice(e),r=t.reduce((f,p)=>f+p,0)/(t.length||1),c=(s.reduce((f,p)=>f+p,0)/(s.length||1)-r)/r*100;return c>5?"NAIK":c<-10?"TURUN":"STABIL"},$9=({onBack:n,onComplete:e})=>{const[t,s]=F.useState("SETUP"),[r,o]=F.useState([]),[c,f]=F.useState(0),[p,m]=F.useState(0),[v,_]=F.useState(0),[T,A]=F.useState(0),[C,D]=F.useState([]),[N,L]=F.useState(0),[O,B]=F.useState(!1),[$,W]=F.useState(Hd*60),[se,R]=F.useState(Mp),M=()=>{const ye=F9(z9,BE);o(ye),f(0),m(0),_(0),A(0),D([]),L(0),W(Hd*60),R(Mp),s("PLAYING"),oe.play("click")},k=F.useCallback(ye=>{if(t!=="PLAYING")return;const H=r[c][p],re=r[c][p+1];if(re===void 0){f(ge=>ge+1),m(0);return}const ie=(H+re)%10;ye===ie?(_(ge=>ge+1),L(ge=>ge+1)):(A(ge=>ge+1),oe.play("error")),p<BE-2?m(ge=>ge+1):(f(ge=>ge+1),m(0))},[r,c,p,t]);F.useEffect(()=>{const ye=H=>{t==="PLAYING"&&H.key>="0"&&H.key<="9"&&k(parseInt(H.key))};return window.addEventListener("keydown",ye),()=>window.removeEventListener("keydown",ye)},[t,k]),F.useEffect(()=>{if(t!=="PLAYING")return;const ye=setInterval(()=>{W(H=>H<=1?(G(),0):H-1),R(H=>(H<=6&&H>1&&oe.play("tick"),H<=1?(oe.play("success"),U(),Mp):H-1))},1e3);return()=>clearInterval(ye)},[t,N]);const V=F.useRef(0);F.useEffect(()=>{V.current=N},[N]);const U=()=>{const ye=V.current;D(H=>[...H,ye]),L(0),B(!0),setTimeout(()=>B(!1),2e3)},G=(ye=!1)=>{const H=V.current;H>0&&D(re=>[...re,H]),s("FINISHED"),ye||oe.play("finish")},j=()=>{const ye=v+T,H=(Hd*60-$)/60,re=H<.1?.1:H,pe=re>0?Math.round(v/re):0,ie=ye>0?v/ye*100:0;let te=0;if(C.length>0){const Ie=C.reduce((ze,pt)=>ze+pt,0)/C.length,He=C.reduce((ze,pt)=>ze+Math.pow(pt-Ie,2),0)/C.length;te=Math.sqrt(He)}const ge=K9(C),_e=q9(v,pe,ie,te,ge);return{totalCorrect:v,totalWrong:T,totalAttempts:ye,totalColumns:c,speedPerMinute:pe,consistencyScore:parseFloat(te.toFixed(2)),accuracy:Math.round(ie),intervalData:C,interpretation:{verdict:_e,speedDesc:pe>50?"Sangat Cepat":pe>35?"Cepat":"Sedang",accDesc:ie>98?"Sangat Teliti":ie>92?"Teliti":"Kurang Teliti",stabDesc:ge==="TURUN"?"Menurun (Lelah)":te<4?"Stabil":"Fluktuatif",trend:ge}}},me=ye=>{const H=Math.floor(ye/60),re=ye%60;return`${H}:${re.toString().padStart(2,"0")}`},Ae=()=>{const ye=j(),H={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:ye.totalCorrect,maxScore:0,details:ye,questions:[],answers:[],isAborted:!0};e(H)};if(t==="SETUP")return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-700 animate-fade-in-up",children:[u.jsxs("div",{className:"p-8 bg-indigo-600 text-white text-center relative overflow-hidden",children:[u.jsx(Bs,{size:64,className:"mx-auto mb-4 relative z-10"}),u.jsx("h1",{className:"text-3xl font-black relative z-10",children:"Tes Pauli Digital"}),u.jsx("p",{className:"opacity-90 relative z-10 text-sm mt-2",children:"Uji Ketahanan & Stabilitas Kerja"})]}),u.jsxs("div",{className:"p-8 space-y-6",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl text-sm text-slate-600 dark:text-slate-300 space-y-3",children:[u.jsxs("p",{className:"flex items-center gap-3",children:[u.jsx(ua,{size:18,className:"text-indigo-500 shrink-0"})," ",u.jsxs("span",{children:[u.jsx("strong",{children:"Durasi:"})," ",Hd," Menit"]})]}),u.jsxs("p",{className:"flex items-center gap-3",children:[u.jsx(Bs,{size:18,className:"text-emerald-500 shrink-0"})," ",u.jsxs("span",{children:[u.jsx("strong",{children:"Instruksi:"})," Jumlahkan dua angka yang berdekatan. Masukkan digit satuan saja (misal: 12  2)."]})]}),u.jsxs("p",{className:"flex items-center gap-3",children:[u.jsx(zc,{size:18,className:"text-amber-500 shrink-0"})," ",u.jsxs("span",{children:[u.jsx("strong",{children:"Garis:"})," Setiap 1 menit, muncul tanda 'Garis'. Tetap lanjutkan menghitung."]})]})]}),u.jsxs("button",{onClick:M,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2 hover:scale-105 transform duration-200",children:[u.jsx(gh,{size:24,fill:"currentColor"})," Mulai Tes"]}),u.jsx("button",{onClick:n,className:"w-full py-3 text-slate-500 hover:text-indigo-600 font-bold text-sm transition",children:"Kembali"})]})]})});if(t==="FINISHED"){const ye=j(),H={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:ye.totalCorrect,maxScore:0,details:ye,questions:[],answers:[]};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 flex items-center justify-center animate-fade-in",children:u.jsxs("div",{className:"max-w-4xl w-full bg-white dark:bg-slate-800 rounded-3xl shadow-xl p-8 border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white",children:"Analisis Profil Kerja"}),u.jsx("div",{className:"mt-4 inline-block px-6 py-2 bg-indigo-600 text-white text-xl font-bold rounded-full shadow-lg",children:ye.interpretation.verdict})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(Bs,{size:14})," Prestasi (Total)"]}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:ye.totalCorrect}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(ua,{size:14})," Tempo"]}),u.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:ye.speedPerMinute}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"rata-rata/menit"})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(zs,{size:14})," Ketelitian"]}),u.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-400",children:ye.totalWrong}),u.jsxs("div",{className:"text-[10px] text-slate-500",children:["kesalahan (",ye.interpretation.accDesc,")"]})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(zc,{size:14})," Stabilitas"]}),u.jsx("div",{className:"text-3xl font-black text-amber-500",children:ye.consistencyScore}),u.jsxs("div",{className:"text-[10px] text-slate-500",children:["deviasi (",ye.interpretation.trend,")"]})]})]}),u.jsxs("div",{className:"mb-8",children:[u.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 flex items-center gap-2",children:[u.jsx(zc,{size:18})," Grafik Ritme Kerja (Per 1 Menit)"]}),u.jsx("div",{className:"h-48 flex items-end gap-1 p-2 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-x-auto",children:ye.intervalData.map((re,pe)=>{const ie=Math.max(...ye.intervalData,1),te=re/ie*100;return u.jsxs("div",{className:"flex-1 min-w-[20px] bg-indigo-500/80 hover:bg-indigo-500 transition-all rounded-t relative group",style:{height:`${te}%`},children:[u.jsx("div",{className:"absolute bottom-0 w-full text-center text-[8px] text-white/50",children:pe+1}),u.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg",children:re})]},pe)})}),u.jsx("p",{className:"text-xs text-slate-400 mt-2 text-center",children:"Grafik yang menurun drastis menunjukkan indikasi kelelahan."})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>{s("SETUP")},className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ulangi Tes"}),u.jsxs("button",{onClick:()=>e(H),className:"flex-1 py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[u.jsx(yh,{size:20})," Simpan & Keluar"]})]})]})})}const Y=r[c]||[],ue=Y[p],xe=Y[p+1],Le=[1,2,3,4,5,6,7,8,9,0];return u.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"px-6 py-3 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Waktu"}),u.jsx("div",{className:"text-xl font-mono font-bold text-slate-800 dark:text-white",children:me($)})]}),u.jsxs("div",{className:"text-center pl-4 border-l border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Prestasi"}),u.jsx("div",{className:"text-xl font-bold text-emerald-600",children:v})]})]}),u.jsx("button",{onClick:()=>s("PAUSED"),className:"p-3 bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:u.jsx(Zc,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),O&&u.jsx("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-50 bg-amber-500 text-white px-6 py-2 rounded-full font-bold shadow-lg animate-pulse border-2 border-white",children:"GARIS!  LANJUT HITUNG"}),u.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative p-4",children:u.jsxs("div",{className:"flex flex-col items-center gap-2 transform scale-110",children:[u.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:p>0?Y[p-1]:"-"}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-xl border-4 border-indigo-100 dark:border-slate-700 flex flex-col items-center gap-2 w-64 animate-fade-in-up",children:[u.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:ue}),u.jsx("div",{className:"w-16 h-1 bg-slate-200 dark:bg-slate-600 rounded-full my-1"}),u.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:xe!==void 0?xe:"-"})]}),u.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:Y[p+2]!==void 0?Y[p+2]:"-"})]})}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 pb-8 border-t border-slate-200 dark:border-slate-700 shrink-0 z-30",children:[u.jsx("div",{className:"max-w-md mx-auto grid grid-cols-5 gap-3",children:Le.map(ye=>u.jsx("button",{onClick:()=>k(ye),className:"h-16 rounded-2xl bg-slate-100 dark:bg-slate-700 text-2xl font-bold text-slate-700 dark:text-white shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 transition-all hover:bg-indigo-50 dark:hover:bg-slate-600 active:bg-indigo-100 dark:active:bg-slate-500",children:ye},ye))}),u.jsx("div",{className:"text-center mt-4 text-xs text-slate-400",children:"Gunakan tombol di atas atau keyboard angka"})]}),t==="PAUSED"&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),u.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, lalu lanjutkan."}),u.jsx("button",{onClick:()=>s("PLAYING"),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),u.jsx("button",{onClick:Ae,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},Dp=10,HE=60,zE=["A","B","C","D","E"],qn=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],FE=(n,e,t)=>{let s=0;return n===100?s+=50:n>=95?s+=45:n>=90?s+=40:n>=80?s+=30:n>=70?s+=20:s+=10,e>=50?s+=30:e>=40?s+=25:e>=30?s+=20:e>=20?s+=10:s+=5,t<2?s+=20:t<4?s+=15:t<6?s+=10:t<8&&(s+=5),s>=95?"Sempurna":s>=85?"Sangat Baik":s>=70?"Baik":s>=55?"Cukup":s>=40?"Kurang":"Buruk"},qE=n=>{let e=[];n==="ANGKA"?e=[...["0","1","2","3","4","5","6","7","8","9"]].sort(()=>.5-Math.random()).slice(0,5):n==="HURUF"?e=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")].sort(()=>.5-Math.random()).slice(0,5):n==="SIMBOL_HILANG"&&(e=[...qn].sort(()=>.5-Math.random()).slice(0,5));const t=Math.floor(Math.random()*5),s=e.filter((r,o)=>o!==t).sort(()=>.5-Math.random());return{reference:e,question:s,answer:t}},KE=()=>{const n=3+Math.floor(Math.random()*2),e=Array.from({length:n},()=>qn[Math.floor(Math.random()*qn.length)]),t=Math.random()>.5;let s=[...e];if(!t)if(Math.random()>.5){const r=Math.floor(Math.random()*n);let o=qn[Math.floor(Math.random()*qn.length)];for(;o===e[r];)o=qn[Math.floor(Math.random()*qn.length)];s[r]=o}else n>=2&&([s[0],s[1]]=[s[1],s[0]],s[0]===s[1]&&(s[0]=qn.find(c=>c!==s[0])||"X"));return{left:e,right:s,isSame:t}},$E=()=>{const e=[...qn].sort(()=>.5-Math.random()).slice(0,5),t=Math.floor(Math.random()*5),s=e[t];return{map:e,target:s,answer:t}},YE=()=>{const n=qn[Math.floor(Math.random()*qn.length)],e=Array.from({length:20},()=>{if(Math.random()<.3)return n;let s=qn[Math.floor(Math.random()*qn.length)];for(;s===n;)s=qn[Math.floor(Math.random()*qn.length)];return s}),t=e.filter(s=>s===n).length;return{target:n,grid:e,totalCorrect:t}},Y9=({initialMode:n,onBack:e,onComplete:t})=>{var pe;const[s,r]=F.useState(n||"ANGKA"),[o,c]=F.useState(1),[f,p]=F.useState(HE),[m,v]=F.useState(!1),[_,T]=F.useState("PLAYING"),[A,C]=F.useState(null),[D,N]=F.useState(null),[L,O]=F.useState(null),[B,$]=F.useState(null),[W,se]=F.useState([]),[R,M]=F.useState([]),[k,V]=F.useState(0),[U,G]=F.useState(0),[j,me]=F.useState(null),Ae=F.useCallback(()=>{if(s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG")if(A){const ie=Math.floor(Math.random()*5),te=A.reference.filter((ge,_e)=>_e!==ie).sort(()=>.5-Math.random());C({...A,question:te,answer:ie})}else{const ie=qE(s);C(ie)}else if(s==="SAMA_BEDA")N(KE());else if(s==="MATCHING")if(!L)O($E());else{const ie=Math.floor(Math.random()*5);O({...L,target:L.map[ie],answer:ie})}else s==="GROUPING"&&($(YE()),se([]))},[s,A,L]),Y=F.useCallback(()=>{C(null),O(null),N(null),$(null),s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?C(qE(s)):s==="SAMA_BEDA"?N(KE()):s==="MATCHING"?O($E()):s==="GROUPING"&&($(YE()),se([])),p(HE),V(0),G(0)},[s]);F.useEffect(()=>{_==="PLAYING"&&Y()},[o,s,_]);const ue=ie=>{if(m)return;let te=!1;s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?te=ie===(A==null?void 0:A.answer):s==="SAMA_BEDA"?te=ie===(D==null?void 0:D.isSame):s==="MATCHING"&&(te=ie===(L==null?void 0:L.answer)),te?(V(ge=>ge+1),me("CORRECT")):(G(ge=>ge+1),me("WRONG"),oe.play("error")),setTimeout(()=>me(null),150),Ae()},xe=()=>{if(!B)return;let ie=0,te=0;W.forEach(_e=>{B.grid[_e]===B.target?ie++:te++});const ge=B.totalCorrect-ie;V(_e=>_e+ie),G(_e=>_e+te+ge),te===0&&ge===0?(me("CORRECT"),oe.play("success")):(me("WRONG"),oe.play("error")),setTimeout(()=>me(null),200),Ae()},Le=ie=>{oe.play("click"),se(te=>te.includes(ie)?te.filter(ge=>ge!==ie):[...te,ie])};F.useEffect(()=>{if(m||_==="FINISHED")return;const ie=setInterval(()=>{p(te=>(te<=6&&te>1&&oe.play("tick"),te<=1?(ye(),0):te-1))},1e3);return()=>clearInterval(ie)},[m,o,_,k,U]);const ye=()=>{M(ie=>{if(ie.find(_e=>_e.section===o))return ie;const te={section:o,correct:k,wrong:U},ge=[...ie,te];return o>=Dp?setTimeout(()=>T("FINISHED"),0):setTimeout(()=>{c(_e=>_e+1),oe.play("success")},0),ge})},H=()=>{const ie=R.length,te=R.reduce((mt,tt)=>mt+tt.correct,0),ge=R.reduce((mt,tt)=>mt+tt.wrong,0),_e=ie>0?te/ie:0,Ie=te+ge,He=Ie>0?te/Ie*100:0,ze=_e,pt=R.reduce((mt,tt)=>mt+Math.pow(tt.correct-ze,2),0)/(ie||1),Ce=Math.sqrt(pt),Ee=FE(He,_e,Ce),Ge={mode:s,totalCorrect:te,totalWrong:ge,averageSpeed:parseFloat(_e.toFixed(1)),accuracy:parseFloat(He.toFixed(1)),sectionData:R,stability:parseFloat(Ce.toFixed(2)),verdict:Ee},it={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(He),maxScore:100,details:Ge,questions:[],answers:[]};oe.play("finish"),t(it)},re=()=>{const ie={section:o,correct:k,wrong:U},te=[...R];te.find(it=>it.section===o)||te.push(ie);const ge=te.reduce((it,mt)=>it+mt.correct,0),_e=te.reduce((it,mt)=>it+mt.wrong,0),Ie=ge/(te.length||1),He=ge+_e,ze=He>0?ge/He*100:0,Ee={mode:s,totalCorrect:ge,totalWrong:_e,averageSpeed:parseFloat(Ie.toFixed(1)),accuracy:parseFloat(ze.toFixed(1)),sectionData:te,stability:parseFloat(0 .toFixed(2)),verdict:"Belum Selesai"},Ge={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(ze),maxScore:100,details:Ee,questions:[],answers:[],isAborted:!0};t(Ge)};if(_==="FINISHED"){const ie=R.reduce((Ce,Ee)=>Ce+Ee.correct,0),te=R.reduce((Ce,Ee)=>Ce+Ee.wrong,0),ge=ie/R.length,_e=ie/(ie+te)*100,Ie=ge,He=R.reduce((Ce,Ee)=>Ce+Math.pow(Ee.correct-Ie,2),0)/R.length,ze=Math.sqrt(He),pt=FE(_e,ge,ze);return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center animate-fade-in",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[u.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:"Tes Selesai!"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut hasil performa kecermatan Anda."}),u.jsx("div",{className:"flex justify-center mb-8",children:u.jsx("div",{className:"px-6 py-2 bg-indigo-600 text-white rounded-full font-bold text-xl shadow-lg shadow-indigo-200 dark:shadow-none animate-bounce-slow",children:pt})}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Kecepatan"}),u.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:ge.toFixed(1)}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"poin/menit"})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Akurasi"}),u.jsxs("div",{className:"text-2xl font-black text-emerald-500",children:[_e.toFixed(1),"%"]})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Stabilitas"}),u.jsx("div",{className:"text-2xl font-black text-amber-500",children:ze.toFixed(2)}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]})]}),u.jsxs("div",{className:"mb-8",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-3 text-left",children:"Grafik Performa Per Menit"}),u.jsx("div",{className:"h-40 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative",children:Array.from({length:Dp}).map((Ce,Ee)=>{const Ge=R.find($t=>$t.section===Ee+1),it=Ge?Ge.correct:0,mt=Math.max(...R.map($t=>$t.correct),10),tt=it/mt*100;return u.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full",children:[u.jsx("div",{className:"w-full bg-indigo-500/80 hover:bg-indigo-600 transition-all rounded-t-sm relative",style:{height:`${tt}%`},children:u.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg whitespace-nowrap",children:["Menit ",Ee+1,": ",it]})}),u.jsx("div",{className:"mt-1 text-[9px] font-bold text-slate-400",children:Ee+1})]},Ee)})})]}),u.jsxs("button",{onClick:H,className:"w-full py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition flex items-center justify-center gap-2",children:[u.jsx(yh,{size:20})," Simpan Hasil"]})]})})}return u.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm shrink-0 z-20",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Bagian"}),u.jsxs("span",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400",children:[o,"/",Dp]})]}),u.jsx("div",{className:"w-px h-8 bg-slate-200 dark:bg-slate-700"}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu"}),u.jsxs("span",{className:`text-lg font-mono font-black ${f<=5?"text-rose-500 animate-pulse":"text-slate-800 dark:text-white"}`,children:[f,"s"]})]}),u.jsxs("div",{className:"hidden sm:flex flex-col border-l pl-4 border-slate-200 dark:border-slate-700",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Benar"}),u.jsx("span",{className:"text-lg font-black text-emerald-600",children:k})]})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:u.jsx(Zc,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),u.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:[j&&u.jsx("div",{className:`absolute inset-0 z-10 flex items-center justify-center pointer-events-none transition-opacity duration-150 ${j==="CORRECT"?"bg-emerald-500/10":"bg-rose-500/10"}`,children:u.jsx("div",{className:`p-4 rounded-full ${j==="CORRECT"?"bg-emerald-500 text-white":"bg-rose-500 text-white"} shadow-xl transform scale-125`,children:j==="CORRECT"?u.jsx(zs,{size:64}):u.jsx(_0,{size:64})})}),u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-2 w-full max-w-4xl mx-auto h-full min-h-0",children:[(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&u.jsxs("div",{className:"w-full h-full flex flex-col justify-center gap-4 sm:gap-6",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-2 shrink-0",children:[u.jsx("div",{className:"grid grid-cols-5 gap-1",children:(pe=s==="MATCHING"?L==null?void 0:L.map:A==null?void 0:A.reference)==null?void 0:pe.map((ie,te)=>u.jsx("div",{className:`aspect-square flex flex-col items-center justify-center bg-slate-100 dark:bg-slate-700 rounded-lg ${s==="MATCHING"?"py-1":""}`,children:u.jsx("span",{className:`${s==="MATCHING"||s==="SIMBOL_HILANG"?"text-3xl sm:text-5xl":"text-2xl sm:text-4xl"} font-black text-slate-800 dark:text-white`,children:ie})},te))}),u.jsx("div",{className:"grid grid-cols-5 gap-1 text-center border-t border-slate-100 dark:border-slate-600 pt-1 mt-1",children:zE.map((ie,te)=>u.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:ie},te))})]}),u.jsxs("div",{className:"text-center py-2 flex-1 flex flex-col justify-center",children:[u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:s==="MATCHING"?"Cari Pasangan:":"Mana yang hilang?"}),s==="MATCHING"?u.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 mx-auto flex items-center justify-center bg-indigo-600 rounded-3xl shadow-xl transform transition-all duration-300",children:u.jsx("span",{className:"text-6xl sm:text-7xl font-black text-white",children:L==null?void 0:L.target})}):u.jsx("div",{className:"flex justify-center gap-2 sm:gap-4 flex-wrap",children:A==null?void 0:A.question.map((ie,te)=>u.jsx("div",{className:"w-12 h-12 sm:w-20 sm:h-20 flex items-center justify-center bg-white dark:bg-slate-800 rounded-xl border-2 border-slate-200 dark:border-slate-600 shadow-sm text-slate-800 dark:text-white font-bold text-xl sm:text-3xl",children:ie},te))})]})]}),s==="SAMA_BEDA"&&D&&u.jsxs("div",{className:"w-full max-w-md h-full flex flex-col justify-center gap-4 text-center min-h-0",children:[u.jsxs("div",{className:"flex flex-col gap-2 sm:gap-4 flex-1 justify-center min-h-0",children:[u.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:u.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:D.left.map((ie,te)=>u.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:ie},te))})}),u.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:u.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:D.right.map((ie,te)=>u.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:ie},te))})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 shrink-0",children:[u.jsxs("button",{onClick:()=>ue(!0),className:"h-16 sm:h-24 bg-emerald-500 hover:bg-emerald-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[u.jsx(zs,{size:24,className:"mb-1 hidden sm:block"})," SAMA"]}),u.jsxs("button",{onClick:()=>ue(!1),className:"h-16 sm:h-24 bg-rose-500 hover:bg-rose-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[u.jsx(_0,{size:24,className:"mb-1 hidden sm:block"})," BEDA"]})]}),u.jsx("p",{className:"text-xs text-slate-400 pb-1",children:"Bandingkan kedua kotak. Sama atau Beda?"})]}),s==="GROUPING"&&B&&u.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden min-h-0",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 shrink-0",children:[u.jsxs("div",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 flex items-center gap-2",children:["Pilih: ",u.jsx("span",{className:"text-2xl bg-white dark:bg-slate-800 px-3 py-1 rounded-lg border inline-block shadow-sm text-indigo-600",children:B.target})]}),u.jsx("button",{onClick:xe,className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 shadow-md active:scale-95 transition",children:"Lanjut"})]}),u.jsx("div",{className:"flex-1 grid grid-cols-5 grid-rows-4 gap-1 sm:gap-2 p-1 content-center justify-items-center h-full min-h-0",children:B.grid.map((ie,te)=>{const ge=W.includes(te);return u.jsx("button",{onClick:()=>Le(te),className:`w-full h-full rounded-xl flex items-center justify-center text-xl sm:text-3xl transition-all duration-75 ${ge?"bg-indigo-600 text-white shadow-inner scale-95 border-2 border-indigo-700":"bg-white dark:bg-slate-800 text-slate-800 dark:text-white border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-300"}`,children:ie},te)})})]})]})]}),(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&u.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-2 sm:p-4 pb-6 shrink-0 z-30",children:u.jsx("div",{className:"max-w-3xl mx-auto",children:u.jsx("div",{className:"grid grid-cols-5 gap-2 md:gap-4",children:zE.map((ie,te)=>u.jsx("button",{onClick:()=>ue(te),className:"h-14 sm:h-20 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-indigo-600 dark:hover:bg-indigo-600 hover:text-white active:scale-95 transition-all shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 flex flex-col items-center justify-center gap-1 group text-slate-700 dark:text-slate-200",children:u.jsx("span",{className:"text-xl sm:text-2xl font-black",children:ie})},te))})})}),m&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),u.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, fokus kembali."}),u.jsx("button",{onClick:()=>v(!1),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),u.jsx("button",{onClick:re,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},J9=({targetNumber:n,refreshTrigger:e})=>{const t=F.useRef(null);return F.useEffect(()=>{const s=t.current;if(!s)return;const r=s.getContext("2d");if(!r)return;r.clearRect(0,0,s.width,s.height);const o=document.createElement("canvas");o.width=s.width,o.height=s.height;const c=o.getContext("2d");if(!c)return;c.fillStyle="#000000",c.fillRect(0,0,s.width,s.height),c.fillStyle="#FFFFFF",c.font='bold 160px "Arial Rounded MT Bold", "Helvetica Rounded", Arial, sans-serif',c.textAlign="center",c.textBaseline="middle";const f=(Math.random()-.5)*.2;c.save(),c.translate(s.width/2,s.height/2),c.rotate(f),c.fillText(n.toString(),0,0),c.restore();const m=c.getImageData(0,0,s.width,s.height).data,v=["#E74C3C","#E67E22","#D35400","#C0392B","#F1948A","#E59866","#CD6155"],_=["#27AE60","#2ECC71","#1ABC9C","#16A085","#7DCEA0","#73C6B6","#A9DFBF","#52BE80"],T=s.width/2,A=s.height/2,C=s.width/2-5,D=3500;for(let N=0;N<D;N++){let L=Math.random()*s.width,O=Math.random()*s.height;if(Math.sqrt(Math.pow(L-T,2)+Math.pow(O-A,2))>C)continue;const $=Math.random()*4+1.5,W=(Math.floor(O)*s.width+Math.floor(L))*4,R=m[W]>128?v:_;let M=R[Math.floor(Math.random()*R.length)];Math.random()<.05&&(M="#95A5A6"),r.beginPath(),r.arc(L,O,$,0,Math.PI*2),r.fillStyle=M,r.fill()}},[n,e]),u.jsxs("div",{className:"relative",children:[u.jsx("canvas",{ref:t,width:320,height:320,className:"rounded-full shadow-lg bg-slate-50 dark:bg-slate-800 mx-auto border-4 border-slate-200 dark:border-slate-700"}),u.jsx("div",{className:"absolute inset-0 rounded-full shadow-inner pointer-events-none opacity-20 bg-gradient-to-br from-white to-black"})]})},Q9=({onBack:n,onComplete:e})=>{const[t,s]=F.useState([]),[r,o]=F.useState(0),[c,f]=F.useState([]),[p,m]=F.useState(""),[v,_]=F.useState(!1);F.useEffect(()=>{const C=Array.from({length:10},()=>({number:Math.floor(Math.random()*90)+10}));s(C)},[]);const T=()=>{oe.play("click");const C=[...c,p];f(C),m(""),r<t.length-1?o(r+1):(oe.play("finish"),_(!0))};if(t.length===0)return u.jsx("div",{className:"p-10 text-center dark:text-white flex items-center justify-center min-h-[50vh]",children:"Menyiapkan Tes..."});if(v){const C=t.filter((B,$)=>{var W;return B.number.toString().trim()===((W=c[$])==null?void 0:W.trim())}).length,D=C>=8,N=t.map((B,$)=>({id:`cb-q-${$}`,type:"short_answer",content:`Ishihara Plate #${$+1}`,correctAnswer:B.number.toString(),explanation:`Plate displayed number ${B.number}`,metadata:{difficulty:"Medium",idealTimeSeconds:10,topic:"Buta Warna",subtest:"Ishihara"}})),L=c.map((B,$)=>({questionId:`cb-q-${$}`,selectedAnswer:B,isCorrect:B.trim()===t[$].number.toString().trim(),scoreEarned:B.trim()===t[$].number.toString().trim()?10:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1})),O={id:`cb-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:C*10,maxScore:100,details:{type:"Ishihara Simulation",passed:D},questions:N,answers:L};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center transition-colors",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl max-w-lg w-full text-center max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 ${D?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"}`,children:D?u.jsx(zs,{size:40}):u.jsx(E0,{size:40})}),u.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:D?"Mata Normal":"Indikasi Buta Warna"}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Skor Anda: ",C," dari ",t.length]}),u.jsx("div",{className:"mb-6 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden text-left",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-300 font-bold",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3",children:"Plate"}),u.jsx("th",{className:"p-3 text-center",children:"Angka"}),u.jsx("th",{className:"p-3 text-center",children:"Jawab"}),u.jsx("th",{className:"p-3 text-center",children:"Status"})]})}),u.jsx("tbody",{children:t.map((B,$)=>{const W=c[$],se=B.number.toString().trim()===W.trim();return u.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700 text-slate-700 dark:text-slate-300",children:[u.jsxs("td",{className:"p-3 font-medium",children:["#",$+1]}),u.jsx("td",{className:"p-3 font-mono text-center",children:B.number}),u.jsx("td",{className:"p-3 font-mono text-center text-slate-600 dark:text-slate-400",children:W||"-"}),u.jsx("td",{className:"p-3 text-center",children:se?u.jsx(zs,{size:16,className:"text-emerald-500 inline"}):u.jsx(E0,{size:16,className:"text-rose-500 inline"})})]},$)})})]})}),u.jsx("button",{onClick:()=>e(O),className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Simpan & Keluar"}),u.jsx("p",{className:"mt-4 text-[10px] text-slate-400",children:"Hasil ini adalah simulasi. Untuk diagnosis medis, hubungi dokter mata."})]})})}const A=t[r];return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center transition-colors",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600",children:[u.jsx(Ct,{size:18,className:"mr-2"})," Kembali"]}),u.jsxs("span",{className:"text-sm font-bold text-slate-400 bg-slate-200 dark:bg-slate-700 px-3 py-1 rounded-full",children:[r+1," / ",t.length]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-lg border border-slate-100 dark:border-slate-700 text-center",children:[u.jsx("div",{className:"mb-8 flex justify-center py-4",children:u.jsx(J9,{targetNumber:A.number,refreshTrigger:r})}),u.jsx("p",{className:"mb-4 text-slate-600 dark:text-slate-300 font-medium",children:"Angka berapa yang Anda lihat?"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"number",className:"flex-1 p-4 text-center text-2xl font-bold border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none",placeholder:"?",value:p,onChange:C=>m(C.target.value),autoFocus:!0,onKeyDown:C=>C.key==="Enter"&&p&&T()}),u.jsx("button",{onClick:T,disabled:!p,className:"px-6 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none disabled:opacity-50 hover:bg-indigo-700 transition",children:"OK"})]}),u.jsx("div",{className:"mt-6 flex justify-center",children:u.jsx("button",{onClick:()=>m("0"),className:"text-xs text-slate-400 hover:text-indigo-500 underline",children:"Saya tidak melihat angka"})})]})]})})},Lg=(n,e)=>{if(e===null)return 0;if(n==="REACTION")return e<=150?99:e>=450?1:Math.max(1,Math.min(99,Math.round(100-(e-150)/300*100)));if(n==="AIM")return e<=250?99:e>=800?1:Math.max(1,Math.min(99,Math.round(100-(e-250)/550*100)));if(n==="TYPING")return e>=120?99.9:e<=10?1:Math.max(1,Math.min(99,Math.round((e-10)/110*100)));{let t=50;return n==="SEQUENCE"&&(t=30),n==="CHIMP"&&(t=40),n==="VISUAL"&&(t=30),n==="NUMBER"&&(t=20),n==="VERBAL"&&(t=100),n==="BRIDGE"&&(t=30),n==="MATCH"&&(t=30),Math.max(1,Math.min(99,Math.round(e/t*100)))}},W9=n=>n>=90?"Top Class (Sangat Luar Biasa)":n>=75?"Superior (Di Atas Rata-rata)":n>=50?"Average (Rata-rata)":n>=25?"Below Average (Perlu Latihan)":"Novice (Pemula)",S0=n=>{switch(n){case"REACTION":return"text-amber-500 bg-amber-50 dark:bg-amber-900/20";case"SEQUENCE":return"text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20";case"AIM":return"text-orange-500 bg-orange-50 dark:bg-orange-900/20";case"CHIMP":return"text-teal-500 bg-teal-50 dark:bg-teal-900/20";case"VISUAL":return"text-sky-500 bg-sky-50 dark:bg-sky-900/20";case"NUMBER":return"text-blue-600 bg-blue-50 dark:bg-blue-900/20";case"VERBAL":return"text-purple-500 bg-purple-50 dark:bg-purple-900/20";case"TYPING":return"text-slate-500 bg-slate-50 dark:bg-slate-700/50";case"BRIDGE":return"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20";case"MATCH":return"text-pink-500 bg-pink-50 dark:bg-pink-900/20";default:return"text-slate-500 bg-slate-100"}},P1=n=>{switch(n){case"REACTION":return u.jsx(da,{size:20});case"SEQUENCE":return u.jsx(lr,{size:20});case"AIM":return u.jsx(io,{size:20});case"CHIMP":return u.jsx(Vs,{size:20});case"VISUAL":return u.jsx(lr,{size:20});case"NUMBER":return u.jsx(Rf,{size:20});case"VERBAL":return u.jsx(Df,{size:20});case"TYPING":return u.jsx(nr,{size:20});case"BRIDGE":return u.jsx(Mf,{size:20});case"MATCH":return u.jsx(kf,{size:20});default:return u.jsx(Bs,{size:20})}},L1=n=>{switch(n){case"REACTION":return"Reaction Time";case"SEQUENCE":return"Sequence Memory";case"AIM":return"Aim Trainer";case"CHIMP":return"Chimp Test";case"VISUAL":return"Visual Memory";case"NUMBER":return"Number Memory";case"VERBAL":return"Verbal Memory";case"TYPING":return"Typing Test";case"BRIDGE":return"Bridge Memory";case"MATCH":return"Match Memory";default:return n}},X9=()=>u.jsx("div",{className:"text-amber-500 mb-4 mx-auto w-fit",children:u.jsx(Bs,{size:64})}),Z9=({percentile:n,score:e,unit:t,game:s})=>{const c=n/100*300;return u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsxs("div",{className:"relative w-full max-w-[300px] h-[120px]",children:[u.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 300 100",className:"overflow-visible",children:[u.jsx("path",{d:"M0,100 C60,100 100,10 150,10 S240,100 300,100 Z",fill:"url(#grad1)",stroke:"none",className:"opacity-80"}),u.jsx("defs",{children:u.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[u.jsx("stop",{offset:"0%",style:{stopColor:"#3b82f6",stopOpacity:.2}}),u.jsx("stop",{offset:"50%",style:{stopColor:"#3b82f6",stopOpacity:.8}}),u.jsx("stop",{offset:"100%",style:{stopColor:"#3b82f6",stopOpacity:.2}})]})}),u.jsx("line",{x1:c,y1:"10",x2:c,y2:"100",stroke:"#ef4444",strokeWidth:"2",strokeDasharray:"4"}),u.jsx("circle",{cx:c,cy:"10",r:"4",fill:"#ef4444"})]}),u.jsxs("div",{className:"absolute top-0 transform -translate-x-1/2 -translate-y-6 bg-slate-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap",style:{left:`${n}%`},children:["You: ",e," ",t]})]}),u.jsxs("div",{className:"w-full flex justify-between text-[10px] text-slate-400 mt-1 max-w-[300px]",children:[u.jsx("span",{children:"Bottom 1%"}),u.jsx("span",{children:"Average"}),u.jsx("span",{children:"Top 1%"})]})]})},e8=({isOpen:n,onClose:e,game:t,bestScore:s})=>{if(!n)return null;const r=Lg(t,s),o=W9(r);let c="pts";return(t==="REACTION"||t==="AIM")&&(c="ms"),t==="TYPING"&&(c="wpm"),(t==="SEQUENCE"||t==="NUMBER"||t==="CHIMP"||t==="VISUAL"||t==="BRIDGE"||t==="MATCH")&&(c="lvl"),u.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:e,children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700",onClick:f=>f.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(zc,{className:"text-indigo-500"})," Statistik Anda"]}),u.jsx("button",{onClick:()=>{oe.play("back"),e()},children:u.jsx(k1,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),s!==null?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-sm text-slate-500 uppercase font-bold mb-1",children:"Skor Terbaik"}),u.jsxs("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:[s," ",u.jsx("span",{className:"text-lg font-medium text-slate-400",children:c})]}),u.jsxs("div",{className:"inline-block mt-2 px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-full text-xs font-bold",children:["Lebih baik dari ",r,"% orang"]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-600",children:[u.jsx(Z9,{percentile:r,score:s,unit:c,game:t}),u.jsx("p",{className:"text-center text-xs text-slate-500 mt-4 font-medium",children:o})]})]}):u.jsx("div",{className:"text-center py-8 text-slate-500",children:"Belum ada data. Mainkan game ini untuk melihat statistik Anda."})]})})},t8=({onFinish:n,onExit:e})=>{const[t,s]=F.useState("WAITING"),[r,o]=F.useState(0),[c,f]=F.useState([]),[p,m]=F.useState(0),v=F.useRef(null);F.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const _=()=>{s("READY");const N=Math.floor(Math.random()*3e3)+2e3;v.current=window.setTimeout(()=>{o(Date.now()),s("GO")},N)},T=()=>{if(t==="WAITING")_();else if(t==="READY")v.current&&clearTimeout(v.current),s("TOO_SOON");else if(t==="GO"){const N=Date.now()-r;m(N);const L=[...c,N];f(L),L.length>=5?(s("FINAL_SCORE"),oe.play("finish")):(s("RESULT"),oe.play("success"))}else(t==="RESULT"||t==="TOO_SOON")&&s("WAITING")},A=c.length>0?Math.round(c.reduce((N,L)=>N+L,0)/c.length):0;let C,D="bg-slate-900";return t==="WAITING"?(C=u.jsxs(u.Fragment,{children:[u.jsx(da,{size:80,className:"mx-auto mb-6 text-amber-400"}),u.jsx("h2",{className:"text-4xl font-bold text-white mb-2",children:"Reaction Time"}),u.jsxs("h3",{className:"text-xl text-white/60 mb-8",children:["Percobaan ",c.length+1," dari 5"]}),u.jsx("p",{className:"text-white/80",children:"Klik untuk mulai."})]}),D="bg-slate-800"):t==="READY"?(C=u.jsx("h2",{className:"text-5xl font-bold text-white tracking-widest",children:"..."}),D="bg-rose-600"):t==="GO"?(C=u.jsx("h2",{className:"text-6xl font-black text-white",children:"KLIK!"}),D="bg-emerald-500"):t==="RESULT"?(C=u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"text-2xl text-white/80 mb-2",children:[p," ms"]}),u.jsx("p",{className:"text-white/60",children:"Klik untuk lanjut."})]}),D="bg-indigo-600"):t==="FINAL_SCORE"?(C=u.jsxs(u.Fragment,{children:[u.jsx(Bs,{size:64,className:"mx-auto mb-4 text-emerald-400"}),u.jsx("div",{className:"text-xl text-white/80 mb-2",children:"Rata-rata"}),u.jsxs("h2",{className:"text-7xl font-black text-white mb-8",children:[A," ms"]}),u.jsxs("div",{className:"flex flex-col gap-3 w-64 mx-auto",children:[u.jsx("button",{className:"px-6 py-3 bg-white text-slate-900 rounded-xl font-bold",onClick:()=>n(A),children:"Simpan Skor"}),u.jsx("button",{className:"px-6 py-3 border-2 border-white/30 text-white rounded-xl font-bold",onClick:()=>{f([]),s("WAITING")},children:"Coba Lagi"})]})]}),D="bg-slate-800"):t==="TOO_SOON"&&(C=u.jsxs(u.Fragment,{children:[u.jsx(X9,{}),u.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Terlalu Cepat!"}),u.jsx("p",{className:"text-white/80",children:"Klik untuk ulang."})]}),D="bg-slate-800"),u.jsxs("div",{className:`fixed inset-0 z-50 flex flex-col items-center justify-center cursor-pointer select-none ${D}`,onMouseDown:t!=="FINAL_SCORE"?T:void 0,children:[u.jsx("button",{onClick:N=>{N.stopPropagation(),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Ct,{size:24})}),C]})},n8=({onFinish:n,onExit:e})=>{const[t,s]=F.useState([]),[r,o]=F.useState([]),[c,f]=F.useState(1),[p,m]=F.useState("START"),[v,_]=F.useState(null),T=async(C,D)=>{m("WATCHING"),o([]);const N=Math.floor(Math.random()*9),L=[...D,N];s(L),await new Promise(O=>setTimeout(O,800));for(let O=0;O<L.length;O++)_(L[O]),oe.play("click"),await new Promise(B=>setTimeout(B,600)),_(null),await new Promise(B=>setTimeout(B,200));m("PLAYING")},A=async C=>{if(p!=="PLAYING")return;_(C),oe.play("tap"),setTimeout(()=>_(null),200);const D=[...r,C];if(o(D),D[D.length-1]!==t[D.length-1]){m("GAMEOVER"),oe.play("error");return}D.length===t.length&&(m("WATCHING"),oe.play("success"),await new Promise(N=>setTimeout(N,800)),f(N=>N+1),T(c+1,t))};return p==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Ct,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(lr,{size:80,className:"mx-auto mb-6 text-indigo-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Sequence Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Ingat urutan kotak yang menyala. Pola akan bertambah satu langkah setiap level."}),u.jsx("button",{onClick:()=>T(1,[]),className:"px-8 py-3 bg-indigo-500 text-white rounded-xl font-bold text-lg hover:bg-indigo-600 transition",children:"Mulai"})]})]}):p==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(lr,{size:64,className:"mx-auto mb-6 text-rose-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:c})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{f(1),T(1,[])},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(Math.max(1,c-1)),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Ct,{size:24})}),u.jsxs("div",{className:"text-center mb-8",children:[u.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["Level ",c]}),u.jsx("p",{className:"text-slate-400 text-sm animate-pulse h-6",children:p==="WATCHING"?"Lihat polanya...":"Giliranmu!"})]}),u.jsx("div",{className:"grid grid-cols-3 gap-3 p-4",children:Array.from({length:9}).map((C,D)=>u.jsx("div",{onClick:()=>A(D),className:`w-20 h-20 sm:w-28 sm:h-28 rounded-xl transition-all duration-100 cursor-pointer border-4 border-slate-800 ${v===D?"bg-white shadow-[0_0_30px_rgba(255,255,255,0.8)] scale-95 border-white":"bg-slate-700 hover:bg-slate-600"}`},D))})]})},s8=({onFinish:n,onExit:e})=>{const[t,s]=F.useState("IDLE"),[r,o]=F.useState(30),[c,f]=F.useState({top:"50%",left:"50%"}),[p,m]=F.useState([]),v=F.useRef(null),[_,T]=F.useState(0),[A,C]=F.useState(0),[D,N]=F.useState(0),[L,O]=F.useState(null),B=()=>{if(!v.current)return;const k=v.current.getBoundingClientRect(),V=96,U=50,G=k.width-V-U,j=k.height-V-U,me=Math.max(U,Math.random()*G),Ae=Math.max(U,Math.random()*j);f({top:`${Ae}px`,left:`${me}px`})},$=()=>{s("PLAYING"),o(30),m([]),T(0),C(0),B()};F.useEffect(()=>{if(t==="PLAYING"&&A>0){const k=setInterval(()=>{T(Date.now()-A)},50);return O(k),()=>clearInterval(k)}},[t,A]);const W=k=>{if(k.stopPropagation(),t!=="PLAYING")return;const V=Date.now();if(A===0){C(V),N(V),o(G=>G-1),B(),oe.play("click");return}const U=V-D;m(G=>[...G,U]),N(V),oe.play("click"),r<=1?(clearInterval(L),s("FINISHED"),oe.play("finish")):(o(G=>G-1),B())},se=()=>{t==="PLAYING"&&A>0&&oe.play("error")},R=p.length>0?Math.round(p.reduce((k,V)=>k+V,0)/p.length):0,M=p.length>0?Math.round(p.reduce((k,V)=>k+V,0)/p.length):0;return u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",onMouseDown:se,children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Ct,{size:24})}),t==="IDLE"&&u.jsxs("div",{className:"text-center text-white cursor-default",onClick:k=>k.stopPropagation(),children:[u.jsx(io,{size:80,className:"mx-auto mb-6 text-orange-500"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Aim Trainer"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Klik 30 target secepat mungkin. Waktu dimulai saat target pertama diklik."}),u.jsx("button",{onClick:$,className:"px-8 py-3 bg-orange-500 text-white rounded-xl font-bold text-lg hover:bg-orange-600 transition",children:"Mulai"})]}),t==="PLAYING"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"absolute top-8 flex gap-8 items-center pointer-events-none z-10 select-none",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Remaining"}),u.jsx("div",{className:"text-white font-mono text-3xl font-bold",children:r})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Time"}),u.jsxs("div",{className:"text-white font-mono text-3xl font-bold",children:[(_/1e3).toFixed(1),"s"]})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Avg"}),u.jsxs("div",{className:"text-orange-400 font-mono text-3xl font-bold",children:[M," ms"]})]})]}),u.jsx("div",{ref:v,className:"w-full h-full relative max-w-5xl max-h-[80vh] cursor-crosshair",children:u.jsxs("div",{onMouseDown:W,className:"absolute w-24 h-24 rounded-full bg-orange-500 border-4 border-white shadow-[0_0_15px_rgba(249,115,22,0.6)] cursor-pointer flex items-center justify-center hover:scale-95 transition-transform duration-75",style:{top:c.top,left:c.left},children:[u.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),u.jsx("div",{className:"absolute w-12 h-12 border-2 border-white/50 rounded-full"}),u.jsx("div",{className:"absolute w-20 h-20 border border-white/20 rounded-full"})]})})]}),t==="FINISHED"&&u.jsxs("div",{className:"text-center text-white cursor-default",onClick:k=>k.stopPropagation(),children:[u.jsx(io,{size:64,className:"mx-auto mb-4 text-orange-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Selesai!"}),u.jsx("p",{className:"text-white/60 mb-6",children:"Rata-rata waktu per target"}),u.jsxs("h1",{className:"text-7xl font-black mb-8",children:[R," ms"]}),u.jsxs("div",{className:"text-white/40 mb-8 font-mono",children:["Total Waktu: ",(_/1e3).toFixed(2),"s"]}),u.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[u.jsx("button",{onClick:()=>n(R),className:"w-full py-3 bg-white text-slate-900 rounded-xl font-bold",children:"Simpan Skor"}),u.jsx("button",{onClick:$,className:"w-full py-3 border border-white/20 rounded-xl font-bold",children:"Coba Lagi"})]})]})]})},i8=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(4),[r,o]=F.useState([]),[c,f]=F.useState("IDLE"),[p,m]=F.useState(1),[v,_]=F.useState(!1),T=C=>{const N=Array.from({length:40},(O,B)=>B).sort(()=>.5-Math.random()),L=Array.from({length:C},(O,B)=>({id:B+1,pos:N[B],visible:!0}));o(L),m(1),_(!1),f("PLAYING")},A=C=>{c==="PLAYING"&&(C===p?(oe.play("click"),C===1&&_(!0),o(D=>D.map(N=>N.id===C?{...N,visible:!1}:N)),C===r.length?(oe.play("success"),setTimeout(()=>{s(D=>D+1),T(t+1)},500)):m(D=>D+1)):(oe.play("error"),f("GAMEOVER")))};return u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Ct,{size:24})}),c==="IDLE"&&u.jsxs("div",{className:"text-center text-white max-w-md p-6",children:[u.jsx(Vs,{size:80,className:"mx-auto mb-6 text-teal-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Chimp Test"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Klik angka secara berurutan. Setelah klik angka 1, sisanya akan tertutup. Uji ingatan visualmu!"}),u.jsx("button",{onClick:()=>T(4),className:"px-8 py-3 bg-teal-500 text-white rounded-xl font-bold text-lg hover:bg-teal-600 transition",children:"Mulai Tes"})]}),c==="PLAYING"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"text-white mb-4 font-bold text-lg",children:["Level ",t-3]}),u.jsx("div",{className:"grid grid-cols-8 gap-2 md:gap-4 p-4 max-w-3xl",children:Array.from({length:40}).map((C,D)=>{const N=r.find(L=>L.pos===D);return!N||!N.visible?u.jsx("div",{className:"w-10 h-10 md:w-16 md:h-16"},D):u.jsx("button",{onMouseDown:()=>A(N.id),className:`w-10 h-10 md:w-16 md:h-16 rounded-lg border-2 font-bold flex items-center justify-center transition-transform active:scale-95 text-xl md:text-3xl ${v&&N.id>1?"bg-indigo-100 border-indigo-200 text-transparent hover:bg-indigo-200":"bg-indigo-500 border-indigo-400 text-white hover:bg-indigo-400 shadow-lg"}`,children:v&&N.id>1?"":N.id},D)})})]}),c==="GAMEOVER"&&u.jsxs("div",{className:"text-center text-white",children:[u.jsx(Vs,{size:64,className:"mx-auto mb-4 text-rose-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-white/60 mb-6",children:["Skor: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t-1})]}),u.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[u.jsx("button",{onClick:()=>{T(4),s(4)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold hover:bg-indigo-700",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(Math.max(0,t-1)),className:"w-full py-3 border border-white/20 rounded-xl font-bold hover:bg-white/10",children:"Simpan Skor"})]})]})]})},r8=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[r,o]=F.useState(3),[c,f]=F.useState(3),[p,m]=F.useState([]),[v,_]=F.useState([]),[T,A]=F.useState([]),[C,D]=F.useState("START"),N=O=>{let B=3;O>2&&(B=4),O>5&&(B=5),O>10&&(B=6),O>20&&(B=7),f(B);const $=Math.min(Math.floor(B*B/2),O+2),W=[];for(;W.length<$;){const se=Math.floor(Math.random()*(B*B));W.includes(se)||W.push(se)}m(W),_([]),A([]),D("SHOWING"),setTimeout(()=>D("PLAYING"),1e3+O*100)},L=O=>{if(C==="PLAYING"&&!(v.includes(O)||T.includes(O)))if(p.includes(O)){oe.play("tap");const B=[...v,O];_(B),B.length===p.length&&(oe.play("success"),setTimeout(()=>{s($=>$+1),N(t+1)},500))}else{oe.play("error");const B=r-1;o(B),A($=>[...$,O]),B<=0&&setTimeout(()=>D("GAMEOVER"),500)}};return C==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Ct,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(lr,{size:80,className:"mx-auto mb-6 text-sky-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Visual Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!"}),u.jsx("button",{onClick:()=>{s(1),o(3),N(1)},className:"px-8 py-3 bg-sky-500 text-white rounded-xl font-bold text-lg hover:bg-sky-600 transition",children:"Mulai"})]})]}):C==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full border border-slate-700",children:[u.jsx(lr,{size:64,className:"mx-auto mb-6 text-sky-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{s(1),o(3),N(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Ct,{size:24})}),u.jsxs("div",{className:"text-center mb-8 flex flex-col items-center gap-2",children:[u.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((O,B)=>u.jsx(mh,{size:24,className:B<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},B))})]}),u.jsx("div",{className:"grid gap-2 bg-slate-800 p-4 rounded-xl shadow-2xl transition-all duration-300",style:{gridTemplateColumns:`repeat(${c}, 1fr)`,width:"min(90vw, 400px)",aspectRatio:"1/1"},children:Array.from({length:c*c}).map((O,B)=>{const $=p.includes(B),W=v.includes(B),se=T.includes(B);let R="bg-slate-700 hover:bg-slate-600";return C==="SHOWING"&&$&&(R="bg-white shadow-[0_0_15px_white] scale-95"),C==="PLAYING"&&W&&(R="bg-white"),C==="PLAYING"&&se&&(R="bg-slate-900 border-2 border-rose-900"),u.jsx("div",{onMouseDown:()=>L(B),className:`rounded-lg transition-all duration-200 cursor-pointer ${R}`},B)})})]})},a8=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[r,o]=F.useState(""),[c,f]=F.useState(""),[p,m]=F.useState("START"),[v,_]=F.useState(0),[T,A]=F.useState(100),C=O=>{let B="";for(let $=0;$<O;$++)B+=Math.floor(Math.random()*10);return B},D=()=>{s(1),N(1)},N=O=>{const B=C(O);o(B),m("SHOWING"),A(100);const $=1e3+O*500;_($),setTimeout(()=>{A(0)},50),setTimeout(()=>{m("INPUT")},$)},L=O=>{O==null||O.preventDefault(),c===r?(oe.play("success"),m("RESULT"),setTimeout(()=>{s(B=>B+1),f(""),N(t+1)},1e3)):(oe.play("error"),m("GAMEOVER"))};return p==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Ct,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(Rf,{size:80,className:"mx-auto mb-6 text-blue-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Number Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Ingat angka yang muncul, lalu ketik ulang. Angka akan bertambah panjang setiap level."}),u.jsx("button",{onClick:D,className:"px-8 py-3 bg-blue-500 text-white rounded-xl font-bold text-lg hover:bg-blue-600 transition",children:"Mulai"})]})]}):p==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Rf,{size:64,className:"mx-auto mb-6 text-blue-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Salah!"}),u.jsxs("div",{className:"text-left bg-slate-900 p-4 rounded-xl mb-6 font-mono text-sm break-all",children:[u.jsx("div",{className:"text-slate-400 mb-1",children:"Angka:"}),u.jsx("div",{className:"text-white font-bold mb-2 tracking-widest",children:r}),u.jsx("div",{className:"text-slate-400 mb-1",children:"Jawab:"}),u.jsx("div",{className:"text-rose-500 line-through tracking-widest",children:c})]}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:D,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Ct,{size:24})}),p==="SHOWING"&&u.jsxs("div",{className:"text-center animate-fade-in-up w-full px-8",children:[u.jsx("h2",{className:"text-6xl md:text-8xl font-black text-white font-mono tracking-widest",children:r}),u.jsx("div",{className:"w-full max-w-md h-2 bg-slate-800 rounded-full mt-8 mx-auto overflow-hidden",children:u.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${T}%`,transitionDuration:`${v}ms`,opacity:T>0?1:.2}})})]}),p==="INPUT"&&u.jsxs("div",{className:"text-center w-full max-w-md px-4",children:[u.jsx("h3",{className:"text-xl text-white mb-4",children:"Apa angkanya?"}),u.jsxs("form",{onSubmit:L,children:[u.jsx("input",{type:"number",autoFocus:!0,value:c,onChange:O=>f(O.target.value),className:"w-full bg-slate-800 text-white text-3xl font-mono text-center py-4 rounded-xl border-2 border-slate-700 focus:border-blue-500 focus:outline-none mb-4"}),u.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition",children:"Submit"})]})]}),p==="RESULT"&&u.jsxs("div",{className:"text-center",children:[u.jsx(zs,{size:80,className:"text-emerald-500 mx-auto mb-4 animate-bounce-slow"}),u.jsx("h2",{className:"text-2xl text-white font-bold",children:"Benar!"})]})]})},o8=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(0),[r,o]=F.useState(3),[c,f]=F.useState(""),[p,m]=F.useState(new Set),[v,_]=F.useState("START"),T=["RUMAH","POHON","MEJA","BUKU","JALAN","AIR","API","LANGIT","BUMI","LAUT","GUNUNG","KOTA","DESA","MOBIL","SEPEDA","KAPAL","IKAN","BURUNG","KUCING","ANJING","MERAH","BIRU","HIJAU","KUNING","PUTIH","HITAM","BESAR","KECIL","PANJANG","PENDEK","KERJA","MAIN","TIDUR","MAKAN","MINUM","LARI","DUDUK","BERDIRI","CINTA","BENCI","SENANG","SEDIH","MARAH","TAKUT","BERANI","KUAT","LEMAH","PINTAR","BODOH","CEPAT","AWAN","BINTANG","BULAN","CAHAYA","GELAP","TERANG","PAGI","SIANG","SORE","MALAM","WAKTU","JAM","MENIT","DETIK","TAHUN","BULAN","MINGGU","HARI"],A=()=>{const N=p.size>0&&Math.random()<.4;let L="";if(N){const O=Array.from(p);L=O[Math.floor(Math.random()*O.length)]}else{let O=0;do L=T[Math.floor(Math.random()*T.length)],O++;while(p.has(L)&&O<100)}f(L)},C=N=>{const L=p.has(c);if(N==="SEEN"&&L||N==="NEW"&&!L)s(B=>B+1),N==="NEW"&&m(B=>new Set(B).add(c)),oe.play("click"),A();else{const B=r-1;o(B),oe.play("error"),N==="NEW"&&m($=>new Set($).add(c)),B<=0?_("GAMEOVER"):A()}},D=()=>{s(0),o(3),m(new Set),_("PLAYING"),A()};return v==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Ct,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(Df,{size:80,className:"mx-auto mb-6 text-purple-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Verbal Memory"}),u.jsxs("p",{className:"text-white/60 mb-8",children:["Anda akan melihat kata-kata satu per satu. Jika kata tersebut belum pernah muncul, klik ",u.jsx("strong",{children:"BARU"}),". Jika sudah, klik ",u.jsx("strong",{children:"SUDAH"}),"."]}),u.jsx("button",{onClick:D,className:"px-8 py-3 bg-purple-500 text-white rounded-xl font-bold text-lg hover:bg-purple-600 transition",children:"Mulai"})]})]}):v==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Df,{size:64,className:"mx-auto mb-6 text-purple-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Verbal Memory"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Skor: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})," kata"]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:D,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Ct,{size:24})}),u.jsxs("div",{className:"flex gap-8 mb-12 text-lg font-bold text-white items-center",children:[u.jsxs("div",{children:["Skor: ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((N,L)=>u.jsx(mh,{size:24,className:L<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},L))})]}),u.jsx("div",{className:"text-5xl md:text-7xl font-black text-white mb-12 animate-fade-in-up transition-all",children:c}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>C("SEEN"),className:"px-8 py-4 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-bold text-xl transition w-40",children:"SUDAH"}),u.jsx("button",{onClick:()=>C("NEW"),className:"px-8 py-4 bg-purple-500 hover:bg-purple-600 text-white rounded-xl font-bold text-xl transition w-40",children:"BARU"})]})]})},l8=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(""),[r,o]=F.useState(""),[c,f]=F.useState(null),[p,m]=F.useState(0),[v,_]=F.useState(0),[T,A]=F.useState("START");F.useEffect(()=>{const N=hb,L=(N.length>0?N[Math.floor(Math.random()*N.length)]:"")||"";s(L)},[]),F.useEffect(()=>{let N;return T==="PLAYING"&&c&&(N=setInterval(()=>{const O=(Date.now()-c)/1e3;_(Math.floor(O));const B=r.length,$=O/60;$>0&&m(Math.round(B/5/$))},1e3)),()=>clearInterval(N)},[T,c,r]);const C=N=>{const L=N.target.value;if(T==="START"&&(f(Date.now()),A("PLAYING")),o(L),L===t){const O=(Date.now()-(c||Date.now()))/6e4,B=Math.round(t.length/5/O);m(B),A("FINISHED"),oe.play("finish")}else L.length%5===0&&oe.play("tap")},D=()=>{const N=hb,L=(N.length>0?N[Math.floor(Math.random()*N.length)]:"")||"";s(L),o(""),f(null),m(0),_(0),A("START")};return T==="FINISHED"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(nr,{size:64,className:"mx-auto mb-6 text-slate-400"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Typing Speed"}),u.jsxs("h1",{className:"text-6xl font-black text-emerald-400 mb-6",children:[p," ",u.jsx("span",{className:"text-xl text-white/50",children:"WPM"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:D,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(p),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center p-6",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Ct,{size:24})}),u.jsxs("div",{className:"flex gap-12 mb-8 text-white font-mono text-xl",children:[u.jsxs("div",{children:["WPM: ",u.jsx("span",{className:"font-bold text-emerald-400",children:p})]}),u.jsxs("div",{children:["Time: ",u.jsxs("span",{className:"font-bold text-emerald-400",children:[v,"s"]})]})]}),u.jsxs("div",{className:"w-full max-w-2xl bg-slate-800 p-6 rounded-2xl shadow-xl",children:[u.jsx("div",{className:"mb-6 text-lg text-slate-400 leading-relaxed select-none",children:t.split("").map((N,L)=>{let O="text-slate-500";return L<r.length&&(O=r[L]===N?"text-white":"text-rose-500 bg-rose-500/20"),u.jsx("span",{className:O,children:N},L)})}),u.jsx("textarea",{value:r,onChange:C,className:"w-full bg-slate-900 text-white p-4 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none h-32 resize-none font-mono",placeholder:"Mulai ketik di sini...",autoFocus:!0})]})]})},c8=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[r,o]=F.useState(3),[c,f]=F.useState(5),[p,m]=F.useState(4),[v,_]=F.useState([]),[T,A]=F.useState("START"),[C,D]=F.useState(0),[N,L]=F.useState(100),[O,B]=F.useState(1500),$=R=>{const k=4+Math.floor(R/2);f(5),m(k);const V=[];let U=k-1,G=Math.floor(5/2);for(V.push({row:U,col:G});U>0;){U--;const j=[G];G>0&&j.push(G-1),G<4&&j.push(G+1),G=j[Math.floor(Math.random()*j.length)],V.push({row:U,col:G})}_(V)},W=R=>{$(R),A("SHOWING"),L(100);const M=1500;B(M),setTimeout(()=>L(0),50),setTimeout(()=>{A("PLAYING"),D(0)},M)},se=(R,M)=>{if(T!=="PLAYING")return;const k=v[C];if(R===k.row&&M===k.col){oe.play("click");const V=C+1;D(V),V===v.length&&(oe.play("success"),setTimeout(()=>{s(U=>U+1),W(t+1)},500))}else oe.play("error"),o(V=>V-1),r<=1?A("GAMEOVER"):(A("SHOWING"),L(100),setTimeout(()=>L(0),50),setTimeout(()=>{A("PLAYING"),D(0)},O))};return T==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Ct,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(Mf,{size:80,className:"mx-auto mb-6 text-emerald-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Bridge Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang."}),u.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(3),W(1)},className:"px-8 py-3 bg-emerald-500 text-white rounded-xl font-bold text-lg hover:bg-emerald-600 transition",children:"Mulai"})]})]}):T==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Mf,{size:64,className:"mx-auto mb-6 text-emerald-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(3),W(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>{oe.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center overflow-hidden",children:[u.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Ct,{size:24})}),u.jsxs("div",{className:"text-center mb-4 flex flex-col items-center gap-2",children:[u.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((R,M)=>u.jsx(mh,{size:24,className:M<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},M))})]}),u.jsx("div",{className:`w-full max-w-xs h-2 bg-slate-800 rounded-full mb-6 overflow-hidden transition-opacity duration-300 ${T==="SHOWING"?"opacity-100":"opacity-0"}`,children:u.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${N}%`,transitionDuration:`${O}ms`}})}),u.jsx("div",{className:"flex-1 w-full max-w-md flex items-center justify-center p-4",children:u.jsx("div",{className:"grid gap-1.5 w-full h-full max-h-[70vh]",style:{gridTemplateColumns:`repeat(${c}, 1fr)`,gridTemplateRows:`repeat(${p}, 1fr)`},children:Array.from({length:p}).map((R,M)=>Array.from({length:c}).map((k,V)=>{const U=v.findIndex(Ae=>Ae.row===M&&Ae.col===V),G=U!==-1,j=G&&U<C;let me="bg-slate-700";return T==="SHOWING"&&G?me="bg-emerald-400":T==="PLAYING"&&(j?me="bg-emerald-600":G&&U===C&&(me="bg-slate-700 active:bg-emerald-400")),u.jsx("div",{onMouseDown:()=>se(M,V),className:`w-full h-full rounded-md transition-colors duration-200 cursor-pointer ${me} hover:opacity-90`},`${M}-${V}`)}))})}),u.jsxs("div",{className:"mt-2 text-emerald-400 animate-bounce flex flex-col items-center",children:[u.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-500 mb-1",children:"Start Here"}),u.jsx(Ij,{size:32})]})]})},u8=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[r,o]=F.useState(5),[c,f]=F.useState([]),[p,m]=F.useState([]),[v,_]=F.useState("START"),[T,A]=F.useState(!1),[C,D]=F.useState(3),N=["","","","","","","","","","","","","","","",""],L=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-cyan-500","bg-lime-500","bg-rose-500","bg-emerald-500","bg-fuchsia-500","bg-violet-500","bg-sky-500"],O=W=>{const se=W+2,R=se*2,M=Math.ceil(Math.sqrt(R));D(M);const k=[...N].sort(()=>Math.random()-.5).slice(0,se);let V=[];for(let U=0;U<se;U++){const G=k[U],j=L[U%L.length];V.push({id:U*2,icon:G,flipped:!0,matched:!1,color:j}),V.push({id:U*2+1,icon:G,flipped:!0,matched:!1,color:j})}V=V.sort(()=>Math.random()-.5).map((U,G)=>({...U,id:G})),f(V),_("PREVIEW")},B=()=>{oe.play("click"),f(W=>W.map(se=>({...se,flipped:!1}))),_("PLAYING")},$=W=>{if(v!=="PLAYING"||T)return;const se=c.find(k=>k.id===W);if(!se||se.flipped||se.matched)return;oe.play("click");const R=c.map(k=>k.id===W?{...k,flipped:!0}:k);f(R);const M=[...p,W];if(m(M),M.length===2){A(!0);const k=R.find(U=>U.id===M[0]),V=R.find(U=>U.id===M[1]);k&&V&&k.icon===V.icon?(oe.play("success"),setTimeout(()=>{f(U=>U.map(G=>M.includes(G.id)?{...G,matched:!0}:G)),m([]),A(!1),R.filter(U=>!U.matched&&!M.includes(U.id)).length===0&&setTimeout(()=>{s(U=>U+1),O(t+1)},500)},500)):setTimeout(()=>{oe.play("error"),f(U=>U.map(G=>M.includes(G.id)?{...G,flipped:!1}:G)),m([]),A(!1),o(U=>{const G=U-1;return G<=0&&_("GAMEOVER"),G})},1e3)}};return v==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Ct,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(kf,{size:80,className:"mx-auto mb-6 text-pink-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Match Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan posisi pasangan simbol sebelum kartu ditutup. Cocokkan semua pasangan!"}),u.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(5),O(1)},className:"px-8 py-3 bg-pink-500 text-white rounded-xl font-bold text-lg hover:bg-pink-600 transition",children:"Mulai"})]})]}):v==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(kf,{size:64,className:"mx-auto mb-6 text-pink-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(5),O(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>{oe.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[u.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Ct,{size:24})}),u.jsxs("div",{className:"text-center mb-6 flex flex-col items-center gap-2",children:[u.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((W,se)=>u.jsx(mh,{size:24,className:se<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},se))}),v==="PREVIEW"&&u.jsx("button",{onClick:B,className:"mt-4 px-8 py-2 bg-emerald-500 text-white font-bold rounded-full hover:bg-emerald-600 transition shadow-lg animate-pulse",children:"SAYA SIAP!"})]}),u.jsx("div",{className:"grid gap-3 justify-center max-w-2xl p-4",style:{gridTemplateColumns:`repeat(${C}, minmax(0, 1fr))`},children:c.map(W=>u.jsx("div",{onClick:()=>$(W.id),className:`w-16 h-16 sm:w-20 sm:h-20 rounded-xl flex items-center justify-center text-3xl font-bold cursor-pointer transition-all duration-300 transform ${W.flipped||W.matched?`${W.color} text-white rotate-y-180`:"bg-slate-700 hover:bg-slate-600"}`,children:W.flipped||W.matched?W.icon:""},W.id))})]})},d8=({username:n,history:e})=>{const[t,s]=F.useState({}),[r,o]=F.useState(!0),[c,f]=F.useState(!0),p=["REACTION","SEQUENCE","AIM","CHIMP","VISUAL","NUMBER","VERBAL","TYPING","BRIDGE","MATCH"];F.useEffect(()=>{(async()=>{if(!c)return;o(!0);const _={};await Promise.all(p.map(async T=>{try{const A=await yj(T);_[T]=A}catch{console.error("Failed to load leaderboard for",T),_[T]=[]}})),s(_),o(!1)})()},[c]);const m=v=>{const _=e.filter(T=>T.category!=="BENCHMARK"||!T.details?!1:T.details.game===v);return v==="REACTION"||v==="AIM"?_.sort((T,A)=>T.score-A.score):_.sort((T,A)=>A.score-T.score),_.slice(0,5).map(T=>{const A=T.details;return{name:n,score:T.score,unit:(A==null?void 0:A.unit)||""}})};return u.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(C1,{className:"text-amber-500"})," Leaderboard"]}),u.jsxs("div",{className:"bg-slate-200 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:[u.jsxs("button",{onClick:()=>f(!0),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:[u.jsx(fO,{size:14,className:"inline mr-1"})," Global"]}),u.jsxs("button",{onClick:()=>f(!1),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,children:[u.jsx(_9,{size:14,className:"inline mr-1"})," Personal"]})]})]}),r&&c?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[u.jsx(Kn,{size:40,className:"animate-spin mb-4 text-indigo-500"}),u.jsx("p",{children:"Memuat Data Global Rank..."})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:p.map(v=>{let _=[];c?_=t[v]||[]:_=m(v);const T=S0(v);return u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[u.jsxs("div",{className:`p-4 ${T} bg-opacity-20 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3`,children:[u.jsx("div",{className:"p-2 rounded-lg bg-white/50 text-slate-800",children:P1(v)}),u.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:L1(v)})]}),u.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:_.length>0?_.map((A,C)=>u.jsxs("div",{className:`p-3 flex justify-between items-center text-sm ${C===0?"bg-indigo-50 dark:bg-indigo-900/20":""}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:`font-bold w-4 text-center ${C===0?"text-amber-500":C===1?"text-slate-400":C===2?"text-orange-700":"text-slate-500"}`,children:C+1}),u.jsxs("span",{className:`font-medium truncate max-w-[120px] ${A.username===n||A.name===n?"text-indigo-600 dark:text-indigo-400 font-bold":"text-slate-700 dark:text-slate-300"}`,children:[A.name||A.username," ",A.username===n||A.name===n?"(You)":""]})]}),u.jsxs("span",{className:"font-mono font-bold text-slate-800 dark:text-white",children:[A.score,u.jsx("span",{className:"text-xs text-slate-400 ml-1",children:A.unit})]})]},C)):u.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"Belum ada data"})})]},v)})})]})},f8=({history:n})=>{const e=n.filter(t=>t.category==="BENCHMARK").sort((t,s)=>new Date(s.date).getTime()-new Date(t.date).getTime()).slice(0,20);return e.length===0?u.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 rounded-3xl p-8 text-center border border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:"inline-block p-4 bg-slate-100 dark:bg-slate-700 rounded-full mb-4",children:u.jsx(Dg,{size:32,className:"text-slate-400"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Belum ada aktivitas"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Mainkan tes untuk melihat riwayat Anda di sini."})]}):u.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[u.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[u.jsx(Bs,{className:"text-indigo-500"})," Recent Activity"]}),u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{className:"bg-white dark:bg-slate-800 border-b border-slate-100 dark:border-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Test"}),u.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Date"}),u.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider text-right",children:"Score"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:e.map(t=>{const s=t.details;if(!s)return null;const r=s.game,o=t.score,c=s.unit||"",f=Lg(r,o);return u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors group",children:[u.jsx("td",{className:"p-5",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`p-2 rounded-xl ${S0(r)}`,children:P1(r)}),u.jsx("span",{className:`font-bold text-base ${S0(r).split(" ")[0]}`,children:L1(r)})]})}),u.jsx("td",{className:"p-5",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),u.jsx("span",{className:"text-xs text-slate-400",children:new Date(t.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})}),u.jsx("td",{className:"p-5 text-right",children:u.jsxs("div",{className:"flex flex-col items-end",children:[u.jsxs("span",{className:"text-xl font-black text-slate-800 dark:text-white font-mono",children:[o,c]}),u.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${f>=50?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400"}`,children:["Top ",f,"%"]})]})})]},t.id)})})]})})})]})},h8=({onBack:n,username:e,history:t,onComplete:s,isGuest:r,initialMode:o})=>{const[c,f]=F.useState("MENU"),[p,m]=F.useState("DASHBOARD");F.useEffect(()=>{o&&f(o)},[o]);const[v,_]=F.useState(!1),[T,A]=F.useState("REACTION"),C=async(L,O)=>{let B="pts";(O==="REACTION"||O==="AIM")&&(B="ms"),(O==="SEQUENCE"||O==="NUMBER"||O==="CHIMP"||O==="VISUAL"||O==="BRIDGE"||O==="MATCH")&&(B="lvl"),O==="TYPING"&&(B="wpm"),r||gj(O,L,e,B).catch(W=>console.error("Cloud save failed",W));const $={id:`bench-${Date.now()}`,date:new Date().toISOString(),category:"BENCHMARK",score:L,maxScore:0,details:{game:O,unit:B},questions:[],answers:[]};s($),f("MENU")},D=L=>{const O=t.filter(W=>W.category!=="BENCHMARK"||!W.details?!1:W.details.game===L).map(W=>{const se=W.details;return{id:W.id,game:se.game,score:W.score,unit:se.unit,date:W.date}});if(O.length===0)return{best:null,percentile:0};let B;L==="REACTION"||L==="AIM"?B=Math.min(...O.map(W=>W.score)):B=Math.max(...O.map(W=>W.score));const $=Lg(L,B);return{best:B,percentile:$}};if(c!=="MENU")switch(c){case"REACTION":return u.jsx(t8,{onFinish:L=>C(L,"REACTION"),onExit:()=>f("MENU")});case"SEQUENCE":return u.jsx(n8,{onFinish:L=>C(L,"SEQUENCE"),onExit:()=>f("MENU")});case"AIM":return u.jsx(s8,{onFinish:L=>C(L,"AIM"),onExit:()=>f("MENU")});case"CHIMP":return u.jsx(i8,{onFinish:L=>C(L,"CHIMP"),onExit:()=>f("MENU")});case"VISUAL":return u.jsx(r8,{onFinish:L=>C(L,"VISUAL"),onExit:()=>f("MENU")});case"NUMBER":return u.jsx(a8,{onFinish:L=>C(L,"NUMBER"),onExit:()=>f("MENU")});case"VERBAL":return u.jsx(o8,{onFinish:L=>C(L,"VERBAL"),onExit:()=>f("MENU")});case"TYPING":return u.jsx(l8,{onFinish:L=>C(L,"TYPING"),onExit:()=>f("MENU")});case"BRIDGE":return u.jsx(c8,{onFinish:L=>C(L,"BRIDGE"),onExit:()=>f("MENU")});case"MATCH":return u.jsx(u8,{onFinish:L=>C(L,"MATCH"),onExit:()=>f("MENU")});default:return f("MENU"),null}const N=({game:L,title:O,desc:B,icon:$,colorClass:W,btnColorClass:se})=>{const{best:R,percentile:M}=D(L);let k="pts";return(L==="REACTION"||L==="AIM")&&(k="ms"),L==="TYPING"&&(k="wpm"),(L==="SEQUENCE"||L==="NUMBER"||L==="CHIMP"||L==="VISUAL"||L==="BRIDGE"||L==="MATCH")&&(k="lvl"),u.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all group h-full",children:[u.jsx("div",{className:`absolute top-0 bottom-0 left-0 w-1.5 ${W}`}),u.jsxs("div",{className:"p-5 flex flex-col sm:flex-row items-center gap-5 h-full",children:[u.jsx("div",{className:`p-4 rounded-2xl ${W} bg-opacity-10 text-opacity-100 shrink-0`,children:u.jsx("div",{className:`${W.replace("bg-","text-")}`,children:$})}),u.jsxs("div",{className:"flex-1 text-center sm:text-left min-w-0 w-full",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1 truncate",children:O}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs mb-3 line-clamp-2 min-h-[2.5em]",children:B}),u.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2 mb-2 overflow-hidden",children:u.jsx("div",{className:`h-full rounded-full ${W}`,style:{width:`${M}%`}})}),u.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[u.jsxs("span",{children:["Best: ",R!==null?`${R} ${k}`:"-"]}),u.jsx("span",{children:M>0?`Top ${M}%`:"-"})]})]}),u.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 w-full sm:w-auto shrink-0",children:[u.jsxs("button",{onClick:V=>{V.stopPropagation(),oe.play("click"),f(L)},className:`flex-1 sm:flex-none px-6 py-2.5 ${se} text-white rounded-xl font-bold text-sm shadow-md hover:shadow-lg hover:scale-105 transition flex items-center justify-center gap-2`,children:[u.jsx(gh,{size:16,fill:"currentColor"})," MAIN"]}),u.jsxs("button",{onClick:V=>{V.stopPropagation(),oe.play("click"),A(L),_(!0)},className:"flex-1 sm:flex-none px-4 py-2.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-500 dark:text-slate-300 rounded-xl font-bold text-xs transition flex items-center justify-center gap-1",children:[u.jsx(zc,{size:14})," Stats"]})]})]})]})};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col font-sans transition-colors",children:u.jsxs("div",{className:"max-w-6xl mx-auto w-full",children:[u.jsx(e8,{isOpen:v,onClose:()=>_(!1),game:T,bestScore:D(T).best}),u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4",children:u.jsxs("button",{onClick:()=>{oe.play("back"),n()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium transition self-start",children:[u.jsx(Ct,{size:20,className:"mr-2"})," Menu Utama"]})}),u.jsxs("div",{className:"mb-10 text-center sm:text-left",children:[u.jsxs("h1",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 flex items-center justify-center sm:justify-start gap-3",children:[u.jsx(Bs,{className:"text-rose-500",size:40})," Human Benchmark"]}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:["Halo ",u.jsx("span",{className:"font-bold text-indigo-500",children:e}),"! Uji batas kemampuan kognitifmu."]}),r&&u.jsx("div",{className:"mt-2 text-xs bg-amber-100 text-amber-700 inline-block px-3 py-1 rounded-full font-bold",children:"Mode Tamu: Skor tidak disimpan ke Global Leaderboard"})]}),u.jsxs("div",{className:"flex justify-center sm:justify-start gap-4 mb-8 border-b border-slate-200 dark:border-slate-700",children:[u.jsx("button",{onClick:()=>m("DASHBOARD"),className:`pb-3 px-4 font-bold transition-all ${p==="DASHBOARD"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Game Dashboard"}),u.jsx("button",{onClick:()=>m("RANKING"),className:`pb-3 px-4 font-bold transition-all ${p==="RANKING"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Leaderboard"})]}),p==="DASHBOARD"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-6 mb-10",children:[u.jsx(N,{game:"REACTION",title:"Reaction Time",desc:"Uji seberapa cepat refleks visual Anda merespons perubahan warna.",icon:u.jsx(da,{size:32}),colorClass:"bg-amber-500",btnColorClass:"bg-amber-500 hover:bg-amber-600"}),u.jsx(N,{game:"SEQUENCE",title:"Sequence Memory",desc:"Ingat pola urutan kotak yang menyala semakin panjang.",icon:u.jsx(lr,{size:32}),colorClass:"bg-indigo-500",btnColorClass:"bg-indigo-600 hover:bg-indigo-700"}),u.jsx(N,{game:"AIM",title:"Aim Trainer",desc:"Seberapa cepat Anda bisa mengenai semua target yang muncul?",icon:u.jsx(io,{size:32}),colorClass:"bg-orange-500",btnColorClass:"bg-orange-500 hover:bg-orange-600"}),u.jsx(N,{game:"CHIMP",title:"Chimp Test",desc:"Apakah Anda lebih pintar dari simpanse? Uji memori kerja spasial.",icon:u.jsx(Vs,{size:32}),colorClass:"bg-teal-500",btnColorClass:"bg-teal-500 hover:bg-teal-600"}),u.jsx(N,{game:"VISUAL",title:"Visual Memory",desc:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!",icon:u.jsx(lr,{size:32}),colorClass:"bg-sky-500",btnColorClass:"bg-sky-500 hover:bg-sky-600"}),u.jsx(N,{game:"NUMBER",title:"Number Memory",desc:"Ingat angka terpanjang yang bisa Anda hafal.",icon:u.jsx(Rf,{size:32}),colorClass:"bg-blue-600",btnColorClass:"bg-blue-600 hover:bg-blue-700"}),u.jsx(N,{game:"VERBAL",title:"Verbal Memory",desc:"Ingat kata mana yang baru muncul dan mana yang sudah pernah.",icon:u.jsx(Df,{size:32}),colorClass:"bg-purple-500",btnColorClass:"bg-purple-500 hover:bg-purple-600"}),u.jsx(N,{game:"TYPING",title:"Typing Test",desc:"Berapa banyak kata yang bisa Anda ketik per menit?",icon:u.jsx(nr,{size:32}),colorClass:"bg-slate-500",btnColorClass:"bg-slate-600 hover:bg-slate-700"}),u.jsx(N,{game:"BRIDGE",title:"Bridge Memory",desc:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang.",icon:u.jsx(Mf,{size:32}),colorClass:"bg-emerald-500",btnColorClass:"bg-emerald-600 hover:bg-emerald-700"}),u.jsx(N,{game:"MATCH",title:"Match Memory",desc:"Cari pasangan simbol yang sama di balik kartu.",icon:u.jsx(kf,{size:32}),colorClass:"bg-pink-500",btnColorClass:"bg-pink-600 hover:bg-pink-700"})]}),u.jsx(f8,{history:t})]}):u.jsx(d8,{username:e,history:t})]})})},m8=({user:n})=>{var s,r;const[e,t]=F.useState(!1);return F.useEffect(()=>{t(!1)},[n==null?void 0:n.photoURL]),n!=null&&n.photoURL&&!e?u.jsx("img",{src:n.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full border border-slate-200 dark:border-slate-700 object-cover",onError:()=>t(!0)}):u.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-300 font-bold text-sm",children:((r=(s=n==null?void 0:n.username)==null?void 0:s[0])==null?void 0:r.toUpperCase())||"T"})},U1=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},p8=({message:n,type:e,onClose:t})=>{const s=e==="success"?"bg-emerald-500":e==="error"?"bg-rose-500":"bg-indigo-600",r=e==="success"?u.jsx(zs,{size:20}):e==="error"?u.jsx(E0,{size:20}):u.jsx(vO,{size:20});return F.useEffect(()=>{const o=setTimeout(t,3e3);return()=>clearTimeout(o)},[t]),u.jsxs("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl text-white ${s} animate-fade-in-down transition-all`,children:[r,u.jsx("span",{className:"font-bold text-sm",children:n}),u.jsx("button",{onClick:t,className:"ml-4 hover:bg-white/20 p-1 rounded-full",children:u.jsx(fu,{size:18})})]})},g8=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",children:[u.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),u.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),u.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),u.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),y8=({onGoogleLogin:n,onGuestLogin:e,isLoading:t})=>u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6 transition-colors duration-300",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700 text-center relative overflow-hidden",children:[t&&u.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-slate-900/80 z-20 flex flex-col items-center justify-center",children:[u.jsx(Kn,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"}),u.jsx("p",{className:"font-bold text-slate-600 dark:text-slate-300",children:"Menghubungkan..."})]}),u.jsx("div",{className:"mb-8 flex justify-center",children:u.jsx("img",{src:sf,alt:"Logo",className:"w-24 h-24 object-contain animate-bounce-slow"})}),u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Fajmuls Learning"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Platform Belajar Cerdas Terintegrasi AI"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{onClick:n,className:"w-full py-3 bg-white hover:bg-slate-50 text-slate-700 font-medium rounded-full border border-slate-300 shadow-sm hover:shadow-md transition-all flex items-center justify-center gap-3 relative",children:[u.jsx("div",{className:"absolute left-4",children:u.jsx(g8,{})}),u.jsx("span",{className:"text-base font-roboto font-bold",children:"Masuk dengan Google"})]}),u.jsxs("div",{className:"relative flex py-2 items-center",children:[u.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"}),u.jsx("span",{className:"flex-shrink-0 mx-4 text-slate-400 text-xs",children:"ATAU"}),u.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})]}),u.jsxs("button",{onClick:e,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:["Masuk sebagai Tamu ",u.jsx(Qa,{size:20})]}),u.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"*Mode Tamu: Riwayat hanya tersimpan di perangkat ini & tidak masuk Leaderboard."})]})]})}),x8=({onSubmit:n,isLoading:e})=>{const[t,s]=F.useState(""),[r,o]=F.useState(""),c=f=>{if(f.preventDefault(),t.length<3){o("Username minimal 3 karakter.");return}if(!/^[a-zA-Z0-9_]+$/.test(t)){o("Hanya huruf, angka, dan underscore (_).");return}n(t)};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Buat Username"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Pilih nama unik untuk identitas belajarmu."}),u.jsxs("form",{onSubmit:c,children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Username"}),u.jsx("input",{type:"text",className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none font-bold",placeholder:"username_unik",value:t,onChange:f=>{s(f.target.value.toLowerCase().replace(/\s/g,"")),o("")},autoFocus:!0}),r&&u.jsx("p",{className:"text-rose-500 text-xs mt-2 font-bold",children:r})]}),u.jsxs("button",{type:"submit",disabled:e||!t,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition flex items-center justify-center gap-2",children:[e?u.jsx(Kn,{className:"animate-spin"}):u.jsx(zs,{size:20})," Simpan & Lanjut"]})]})]})})},v8=({result:n,feature:e,onBack:t})=>u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center",children:u.jsxs("div",{className:"max-w-3xl w-full",children:[u.jsxs("button",{onClick:t,className:"mb-4 text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[u.jsx(Ct,{size:18})," Kembali"]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[u.jsxs("h2",{className:"text-2xl font-bold mb-6 text-slate-800 dark:text-white flex items-center gap-2",children:[u.jsx(hh,{size:28,className:"text-indigo-600"})," Hasil ",e]}),u.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:u.jsx(U1,{text:n})})]})]})}),b8=({questions:n,onComplete:e})=>{const[t,s]=F.useState(0),[r,o]=F.useState(""),[c,f]=F.useState(null),[p,m]=F.useState(!1),[v,_]=F.useState([]),T=n[t],A=async()=>{if(r.trim()){m(!0);try{const D=await YD(T.content,r);f(D)}catch{alert("Gagal evaluasi.")}finally{m(!1)}}},C=()=>{const D={questionId:T.id,selectedAnswer:r,isCorrect:!0,scoreEarned:(c==null?void 0:c.score)||0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,interviewFeedback:c||void 0},N=[...v,D];_(N),o(""),f(null),t<n.length-1?s(t+1):e(N)};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"mb-4 text-sm font-bold text-slate-400",children:["Pertanyaan ",t+1," dari ",n.length]}),u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6",children:T.content}),c?u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:["Skor: ",c.score,"/100"]}),u.jsx("span",{className:"text-sm bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 px-2 py-1 rounded",children:c.toneAnalysis})]}),u.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:[u.jsx("b",{children:"Feedback:"})," ",c.feedback]}),u.jsxs("div",{className:"text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300 p-3 rounded-lg border border-emerald-100 dark:border-emerald-800",children:[u.jsx("b",{children:"Saran Jawaban:"})," ",c.improvedAnswer]})]}),u.jsx("button",{onClick:C,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90",children:"Lanjut"})]}):u.jsxs(u.Fragment,{children:[u.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-40 focus:ring-2 focus:ring-indigo-500",placeholder:"Jawab seolah sedang interview...",value:r,onChange:D=>o(D.target.value)}),u.jsxs("button",{onClick:A,disabled:p||!r,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[p?u.jsx(Kn,{className:"animate-spin"}):u.jsx(ph,{size:18})," Submit Jawaban"]})]})]})})},_8=({flashcards:n,onFinish:e})=>{const[t,s]=F.useState(0),r=o=>{t<n.length-1?s(t+1):e()};return n.length===0?u.jsx("div",{children:"No Flashcards"}):u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:[u.jsxs("div",{className:"w-full max-w-xl mb-6 flex justify-between items-center",children:[u.jsx("button",{onClick:e,className:"text-slate-500 hover:text-indigo-600",children:u.jsx(Ct,{size:20})}),u.jsxs("span",{className:"font-bold text-slate-400",children:[t+1," / ",n.length]})]}),u.jsx(I9,{data:n[t],onNext:r})]})},T8=({topic:n,onFinish:e})=>{const[t,s]=F.useState(""),[r,o]=F.useState(null),[c,f]=F.useState(!1),p=async()=>{f(!0);try{const m=await JD(n,t);o(m)}catch{alert("Error")}finally{f(!1)}};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Feynman Technique"}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Jelaskan topik ",u.jsxs("b",{children:['"',n,'"']})," seolah-olah Anda sedang mengajari anak kecil (5 tahun)."]}),r?u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsx("div",{className:"flex items-center gap-2 mb-4",children:u.jsxs("div",{className:`text-2xl font-bold ${r.understandingScore>70?"text-emerald-500":"text-amber-500"}`,children:[r.understandingScore,"/100"]})}),u.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[u.jsxs("p",{children:[u.jsx("b",{children:"Kualitas Penyederhanaan:"})," ",r.simplificationQuality]}),u.jsxs("p",{children:[u.jsx("b",{children:"Konsep yang Terlewat:"})," ",r.missingConcepts.join(", ")||"Tidak ada"]}),u.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg border border-indigo-100 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[u.jsx("b",{children:"Koreksi / Saran:"})," ",r.correction]})]})]}),u.jsx("button",{onClick:e,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold",children:"Selesai Belajar"})]}):u.jsxs(u.Fragment,{children:[u.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-48 focus:ring-2 focus:ring-indigo-500",placeholder:"Mulai jelaskan di sini...",value:t,onChange:m=>s(m.target.value)}),u.jsx("button",{onClick:p,disabled:c||!t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50",children:c?"Menganalisis...":"Cek Pemahaman Saya"})]})]})})},E8=({topic:n,onFinish:e})=>{const t=["Survey","Question","Read","Recite","Review"],[s,r]=F.useState(0);return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[u.jsx("div",{className:"flex justify-center mb-8",children:t.map((o,c)=>u.jsxs("div",{className:`flex items-center ${c<t.length-1?"w-full":""}`,children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${c<=s?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:o[0]}),c<t.length-1&&u.jsx("div",{className:`h-1 flex-1 ${c<s?"bg-indigo-600":"bg-slate-100 dark:bg-slate-700"}`})]},o))}),u.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-4",children:t[s]}),u.jsxs("p",{className:"text-lg text-slate-600 dark:text-slate-300 mb-8",children:["Lakukan tahap ",t[s],' untuk materi "',n,'".']}),u.jsx("button",{onClick:()=>{s<4?r(s+1):e()},className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:s<4?"Lanjut Tahap Berikutnya":"Selesai SQ3R"})]})})},S8=n=>{const{category:e,onBack:t,onStartSession:s,onOpenTOSelection:r,onStartTesKoran:o,onStartTesKecermatan:c,onGeneralInputSubmit:f,generalInput:p,setGeneralInput:m,isReadingMaterial:v,onResetMaterial:_,onSubtestSelect:T,selectedSubtest:A,weakTopicsCount:C,loading:D,skdStream:N,onSkdStreamSelect:L,onHistory:O,onStartGeneralSession:B,onStartSkripsiSession:$,username:W,isDarkMode:se,onToggleDarkMode:R}=n,[M,k]=F.useState(""),[V,U]=F.useState(null),[G,j]=F.useState("MEDIUM"),[me,Ae]=F.useState("MEDIUM"),[Y,ue]=F.useState(!1),xe=F.useRef(null),[Le,ye]=F.useState(""),[H,re]=F.useState(5),[pe,ie]=F.useState("Medium"),te=Ie=>{var ze;const He=(ze=Ie.target.files)==null?void 0:ze[0];if(He){if(He.type!=="application/pdf"){alert("Hanya file PDF yang diperbolehkan.");return}U(He.name),k(""),ue(!0);const pt=new FileReader;pt.onload=Ce=>{var Ge;const Ee=((Ge=Ce.target)==null?void 0:Ge.result).split(",")[1];setTimeout(()=>{m&&m({type:"pdf",content:Ee,title:He.name,lengthPreference:G,difficultyPreference:me}),ue(!1)},800)},pt.readAsDataURL(He)}},ge=()=>{(p==null?void 0:p.type)==="pdf"?f({...p,lengthPreference:G,difficultyPreference:me}):M?f({type:"text",content:M,title:"Input Manual",lengthPreference:G,difficultyPreference:me}):alert("Mohon masukkan teks atau upload PDF.")},_e=Ie=>{const He=Ie.filter(ze=>ze.toLowerCase().includes(Le.toLowerCase()));return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6 animate-fade-in-up",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Pilih Topik / Subtes:"}),u.jsxs("div",{className:"mb-4 relative",children:[u.jsx(tf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),u.jsx("input",{type:"text",placeholder:"Cari topik...",value:Le,onChange:ze=>ye(ze.target.value),className:"w-full pl-10 p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:He.length>0?He.map(ze=>u.jsx("button",{onClick:()=>{oe.play("tap"),T(ze)},className:`px-4 py-2 rounded-full text-sm font-medium transition ${A===ze?"bg-indigo-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:ze},ze)):u.jsx("div",{className:"text-sm text-slate-500 italic p-2",children:"Tidak ada topik yang cocok."})}),A&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&u.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-6 animate-fade-in-up",children:u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[u.jsxs("div",{className:"flex-1 w-full",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Jumlah Soal"}),u.jsxs("select",{value:H,onChange:ze=>re(Number(ze.target.value)),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[u.jsx("option",{value:"5",children:"5 Soal"}),u.jsx("option",{value:"10",children:"10 Soal"}),u.jsx("option",{value:"15",children:"15 Soal"}),u.jsx("option",{value:"20",children:"20 Soal"})]})]}),u.jsxs("div",{className:"flex-1 w-full",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Tingkat Kesulitan"}),u.jsxs("select",{value:pe,onChange:ze=>ie(ze.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[u.jsx("option",{value:"Easy",children:"Mudah"}),u.jsx("option",{value:"Medium",children:"Sedang"}),u.jsx("option",{value:"Hard",children:"Sulit"}),u.jsx("option",{value:"HOTS",children:"HOTS (Analisis Tinggi)"})]})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),s(Ye.PRACTICE,pe,H)},className:"w-full sm:w-auto px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[u.jsx(VE,{size:18})," Mulai Latihan"]})]})}),e==="INTERVIEW"&&A&&u.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-4 animate-fade-in-up",children:u.jsxs("button",{onClick:()=>{oe.play("click"),s(Ye.DRILL)},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[u.jsx(ph,{size:20})," Mulai Sesi Wawancara"]})})]})};return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors duration-300",children:[u.jsx(C9,{}),u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("button",{onClick:()=>{oe.play("back"),t()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium",children:[u.jsx(Ct,{size:18,className:"mr-2"})," Kembali"]}),u.jsxs("div",{className:"flex items-center gap-3",children:[R&&u.jsx("button",{onClick:()=>{R()},className:"p-2 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 transition",children:se?u.jsx(N1,{size:16}):u.jsx(S1,{size:16})}),u.jsxs("span",{className:"text-xs font-bold text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full flex items-center gap-1",children:[u.jsx(I1,{size:12})," ",W]})]})]}),u.jsx("div",{className:"flex justify-between items-end mb-8",children:u.jsxs("div",{children:[u.jsxs("span",{className:"text-sm font-bold tracking-wider text-indigo-600 uppercase mb-1 block",children:[e," Dashboard"]}),u.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Pusat Kendali Belajar"})]})}),D?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[u.jsx(Kn,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"}),u.jsx("p",{className:"text-slate-500 font-medium",children:"AI sedang memproses materi..."}),u.jsx("div",{className:"max-w-md w-full mt-8 space-y-4",children:u.jsx(R9,{})})]}):u.jsxs(u.Fragment,{children:[e==="KECERMATAN"&&u.jsx("div",{className:"animate-fade-in-up",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),c("ANGKA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg text-indigo-600 dark:text-indigo-400",children:u.jsx(Bs,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Angka Hilang"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Standar tes kedinasan/Polri. Temukan angka yang hilang dari kolom."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),c("HURUF")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg text-emerald-600 dark:text-emerald-400",children:u.jsx(nr,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Huruf Hilang"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Variasi huruf. Melatih ketelitian visual terhadap karakter mirip."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),c("SIMBOL_HILANG")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-purple-50 dark:hover:bg-purple-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-purple-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg text-purple-600 dark:text-purple-400",children:u.jsx(i9,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Simbol Hilang"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Temukan simbol yang hilang. Melatih ketelitian visual bentuk abstrak."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),c("SAMA_BEDA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-amber-50 dark:hover:bg-amber-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-amber-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg text-amber-600 dark:text-amber-400",children:u.jsx(uO,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Sama Beda Simbol"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Bandingkan dua baris simbol. Tentukan SAMA atau BEDA secepat mungkin."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),c("MATCHING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-rose-50 dark:hover:bg-rose-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-rose-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-rose-100 dark:bg-rose-900/40 rounded-lg text-rose-600 dark:text-rose-400",children:u.jsx(io,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Matching (Pencocokan)"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cocokkan simbol dengan kode kuncinya. Melatih memori kerja jangka pendek."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),c("GROUPING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-cyan-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-cyan-100 dark:bg-cyan-900/40 rounded-lg text-cyan-600 dark:text-cyan-400",children:u.jsx(EO,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Grouping (Pengelompokan)"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Pilih semua simbol yang diminta dari grid acak. Melatih fokus selektif."})]})]})}),e==="SKRIPSI"&&u.jsx("div",{className:"animate-fade-in-up max-w-2xl mx-auto",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[u.jsx(hh,{size:24,className:"text-indigo-600"})," Skripsi Assistant"]}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Masukkan topik atau judul skripsi Anda untuk mendapatkan bantuan AI."}),u.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:ring-2 focus:ring-indigo-500 h-32",placeholder:"Contoh: Pengaruh Kecerdasan Buatan terhadap Minat Belajar Mahasiswa Teknik Informatika...",value:M,onChange:Ie=>k(Ie.target.value)}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),$&&$("TITLE_IDEAS",M)},className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 rounded-xl font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/40 flex flex-col items-center gap-2 border border-indigo-100 dark:border-indigo-800",children:[u.jsx(Vs,{size:24})," Ide Judul"]}),u.jsxs("button",{onClick:()=>{oe.play("click"),$&&$("OUTLINE",M)},className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/40 flex flex-col items-center gap-2 border border-emerald-100 dark:border-emerald-800",children:[u.jsx(nr,{size:24})," Buat Outline"]}),u.jsxs("button",{onClick:()=>{oe.play("click"),$&&$("METHODOLOGY",M)},className:"p-4 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-xl font-bold hover:bg-amber-100 dark:hover:bg-amber-900/40 flex flex-col items-center gap-2 border border-amber-100 dark:border-amber-800",children:[u.jsx(tf,{size:24})," Cek Metodologi"]}),u.jsxs("button",{onClick:()=>{oe.play("click"),$&&$("PARAPHRASE",M)},className:"p-4 bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-300 rounded-xl font-bold hover:bg-rose-100 dark:hover:bg-rose-900/40 flex flex-col items-center gap-2 border border-rose-100 dark:border-rose-800",children:[u.jsx(sO,{size:24})," Parafrase Teks"]})]})]})}),e==="GENERAL"&&u.jsx("div",{className:"space-y-8 animate-fade-in-up",children:v?u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-slate-100 dark:border-slate-700",children:[u.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[u.jsx(LE,{size:20})," Materi Belajar"]}),u.jsx("button",{onClick:_,className:"text-sm text-rose-500 hover:underline",children:"Ganti Materi"})]}),(p==null?void 0:p.type)==="pdf"&&p.content&&u.jsx("div",{className:"mb-6",children:u.jsx("embed",{src:`data:application/pdf;base64,${p.content}`,className:"w-full h-[500px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})}),u.jsx("div",{className:"prose prose-sm max-w-none text-slate-700 dark:text-slate-300 leading-relaxed max-h-[400px] overflow-y-auto p-2 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-700",children:u.jsx(U1,{text:(p==null?void 0:p.extractedText)||(p==null?void 0:p.content)||""})})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Sudah selesai membaca? Pilih Metode Belajar:"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:wC.map(Ie=>{const ze={Brain:Vs,Repeat:QO,MessageCircle:MO,Share2:a9,Search:tf,GraduationCap:Mg,BookOpen:LE,PenTool:VE}[Ie.icon]||Vs;return u.jsxs("button",{onClick:()=>{oe.play("click"),B(Ie.id)},className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:shadow-md transition text-left flex flex-col h-full",children:[u.jsx("div",{className:"mb-3 text-indigo-600 dark:text-indigo-400",children:u.jsx(ze,{size:24})}),u.jsx("h4",{className:"font-bold text-sm mb-1 text-slate-900 dark:text-white",children:Ie.name}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:Ie.desc})]},Ie.id)})})]})]}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[u.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[u.jsx(Pg,{size:20})," Input Materi"]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Masukkan topik, teks materi, atau upload PDF yang ingin dipelajari."}),u.jsxs("div",{className:"flex gap-2 mb-4",children:[u.jsx("input",{type:"text",className:"flex-1 p-3 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl",placeholder:V?`PDF Terpilih: ${V}`:"Contoh: Perang Dunia II, Hukum Newton, atau paste teks...",value:M,disabled:!!V,onChange:Ie=>{k(Ie.target.value)}}),u.jsx("input",{type:"file",ref:xe,accept:"application/pdf",className:"hidden",onChange:te}),u.jsxs("button",{className:`p-3 rounded-xl transition flex items-center gap-2 ${V?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200"}`,title:"Upload PDF",onClick:()=>{var Ie;return(Ie=xe.current)==null?void 0:Ie.click()},children:[u.jsx(nr,{size:20}),u.jsx("span",{className:"hidden sm:inline font-bold text-sm",children:"Upload PDF"})]})]}),V&&u.jsxs("div",{className:"mb-4 text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 px-4 py-2 rounded-lg flex items-center justify-between animate-fade-in-up border border-emerald-100 dark:border-emerald-800",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(zs,{size:16})," ",u.jsxs("span",{children:["File siap: ",u.jsx("b",{children:V})]})]}),u.jsx("button",{onClick:()=>{U(null),m&&m(null),xe.current&&(xe.current.value="")},className:"text-slate-400 hover:text-rose-500",title:"Hapus PDF",children:u.jsx(_l,{size:16})})]}),Y?u.jsxs("div",{className:"mb-6 space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-2",children:[u.jsx(Kn,{size:14,className:"animate-spin"})," Memuat Preview PDF..."]}),u.jsx($a,{height:"h-[300px]",className:"rounded-xl"})]}):(p==null?void 0:p.type)==="pdf"&&p.content&&u.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 mb-2 block",children:"Preview PDF:"}),u.jsx("embed",{src:`data:application/pdf;base64,${p.content}`,className:"w-full h-[300px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Panjang Materi (Ringkasan)"}),u.jsxs("select",{value:G,onChange:Ie=>j(Ie.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[u.jsx("option",{value:"SHORT",children:"Ringkas / Poin Penting"}),u.jsx("option",{value:"MEDIUM",children:"Standar (Rekomedasi)"}),u.jsx("option",{value:"LONG",children:"Mendalam / Detail"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Tingkat Kesulitan Soal"}),u.jsxs("select",{value:me,onChange:Ie=>Ae(Ie.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[u.jsx("option",{value:"EASY",children:"Mudah (Recall)"}),u.jsx("option",{value:"MEDIUM",children:"Sedang (Konseptual)"}),u.jsx("option",{value:"HARD",children:"Sulit / HOTS"})]})]})]}),u.jsx("button",{onClick:()=>{oe.play("click"),ge()},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Proses & Baca Materi"})]})}),e==="UTBK"&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>{oe.play("click"),r()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group shadow-lg shadow-indigo-200 dark:shadow-none",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[u.jsx(ua,{size:24,className:"text-rose-400"})," Simulasi UTBK SNBT Full"]}),u.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"160 Soal. Durasi 195 Menit. Format Resmi 2025."})]}),u.jsx(Qa,{className:"group-hover:translate-x-2 transition-transform"})]}),_e(NC)]}),e==="TPA"&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>{oe.play("click"),r()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[u.jsx(Vs,{size:24,className:"text-indigo-400"})," Simulasi TPA Full"]}),u.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"65 Soal (TPA & TBI). Durasi 60-100 Menit."})]}),u.jsx(Qa,{className:"group-hover:translate-x-2 transition-transform"})]}),_e(IC)]}),e==="PSIKOTEST"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),o()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[u.jsx(Hj,{size:48,className:"mx-auto mb-4 text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Tes Koran (Pauli/Kraepelin)"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Uji kecepatan, ketelitian, dan stabilitas emosi dengan menjumlahkan angka."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),r()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[u.jsx(Vs,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Psikotes Logika & IQ"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Analogi, Deret Angka, dan Penalaran Logis (HOTS)."})]})]}),u.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Latihan Per Subtes"}),_e(kC)]})]}),e==="INTERVIEW"&&_e(RC),e==="SKD"&&(N?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-600 dark:text-slate-300",children:[u.jsx("button",{onClick:()=>L(null),className:"underline",children:"Ubah Jalur"})," ",u.jsx(Qa,{size:14})," ",u.jsx("b",{children:N})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),r()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center shadow-lg shadow-indigo-200 dark:shadow-none",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[u.jsx(ua,{size:24,className:"text-rose-400"})," Simulasi SKD CAT (110 Soal)"]}),u.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"TWK, TIU, TKP. Durasi 100 Menit. Scoring Resmi."})]}),u.jsx(Qa,{className:"group-hover:translate-x-2 transition-transform"})]}),_e(CC)]}):u.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),L("KEDINASAN")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[u.jsx(_O,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Sekolah Kedinasan"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"STAN, STIS, IPDN, dll"})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),L("CPNS")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[u.jsx(Gj,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"CPNS Umum"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Kementerian & Lembaga"})]})]})),e!=="GENERAL"&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&e!=="PSIKOTEST"&&e!=="KECERMATAN"&&e!=="BENCHMARK"&&u.jsxs("div",{className:"mt-8 animate-fade-in-up delay-100",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Mode Belajar Lainnya"}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),s(Ye.DRILL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[u.jsx(da,{className:"text-amber-500 mb-2"}),u.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Learn & Drill"}),u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Materi + 1 Soal"})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),s(Ye.ACTIVE_RECALL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[u.jsx(Vs,{className:"text-emerald-500 mb-2"}),u.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Active Recall"}),u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Isian Singkat"})]}),C>0&&u.jsxs("button",{onClick:()=>{oe.play("click"),s(Ye.WEAKNESS)},className:"p-4 bg-white dark:bg-slate-800 border border-rose-200 dark:border-rose-900 rounded-xl hover:border-rose-500 hover:shadow-md transition text-left",children:[u.jsx(io,{className:"text-rose-500 mb-2"}),u.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Weakness Attack"}),u.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[C," Topik Lemah"]})]})]})]})]})]})]})},A8=({sessions:n,onBack:e,onResume:t,onDelete:s,loading:r})=>{const[o,c]=F.useState(null),f=p=>{const m=Math.floor(p/60),v=p%60;return`${m}m ${v}s`};return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:[o&&u.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mb-4 mx-auto text-rose-600 dark:text-rose-400",children:u.jsx(_l,{size:24})}),u.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Hapus Sesi Tersimpan?"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Progres tes ini akan hilang permanen."}),u.jsxs("div",{className:"flex gap-3 w-full",children:[u.jsx("button",{onClick:()=>c(null),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Batal"}),u.jsx("button",{onClick:()=>{s(o),c(null)},className:"flex-1 py-3 bg-rose-600 text-white rounded-xl font-bold hover:bg-rose-700 transition",children:"Hapus"})]})]})})}),u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[u.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:u.jsx(Ct,{size:20})}),u.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Lanjutkan Sesi Belajar"})]}),r?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-500",children:[u.jsx(Kn,{className:"animate-spin text-indigo-600 mb-4",size:40}),u.jsx("p",{children:"Memuat sesi tersimpan..."})]}):n.length===0?u.jsxs("div",{className:"text-center py-16 bg-white dark:bg-slate-800 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700 text-slate-400",children:[u.jsx(aO,{size:48,className:"mx-auto mb-4 opacity-30"}),u.jsx("p",{className:"text-lg font-medium",children:"Tidak ada sesi yang tersimpan."}),u.jsx("p",{className:"text-sm mt-2 opacity-70",children:'Gunakan tombol "Simpan & Lanjut Nanti" saat mengerjakan tes.'})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(p=>{const m=Object.keys(p.answerMap).length,v=p.questions.length,_=Math.round(m/v*100);let T=p.packageTitle||p.category;return p.category==="SKD"&&p.skdStream&&(T+=` (${p.skdStream})`),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-lg transition group relative",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider ${p.category==="UTBK"?"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-300":p.category==="SKD"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300":"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300"}`,children:p.category}),u.jsx("button",{onClick:A=>{A.stopPropagation(),c(p.id||String(p.timestamp))},className:"text-slate-400 hover:text-rose-500 p-1 rounded-md transition",children:u.jsx(_l,{size:16})})]}),u.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-2 truncate",title:T,children:T}),u.jsxs("div",{className:"space-y-2 mb-6",children:[u.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[u.jsx(v1,{size:12}),new Date(p.timestamp).toLocaleDateString()]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[u.jsx(ua,{size:12}),"Sisa Waktu: ",f(p.timeLeft)]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:"flex justify-between text-xs font-bold mb-1 text-slate-600 dark:text-slate-300",children:[u.jsx("span",{children:"Progres"}),u.jsxs("span",{children:[m," / ",v," Soal"]})]}),u.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 h-2 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-indigo-600 rounded-full",style:{width:`${_}%`}})})]}),u.jsxs("button",{onClick:()=>t(p),className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold flex items-center justify-center gap-2 transition",children:[u.jsx(b1,{size:18})," Lanjutkan"]})]},p.id||p.timestamp)})})]})]})};function w8(){var ba;const[n,e]=F.useState("SPLASH"),[t,s]=F.useState(null),[r,o]=F.useState(!1),[c,f]=F.useState(!0),[p,m]=F.useState(""),[v,_]=F.useState([]),[T,A]=F.useState(!1),[C,D]=F.useState({soundEnabled:!0,musicEnabled:!0,volume:.5,funnyNotifications:!0,confirmActions:!0,darkMode:!1}),[N,L]=F.useState(null),[O,B]=F.useState(!1),[$,W]=F.useState(null),[se,R]=F.useState(!1),[M,k]=F.useState(""),[V,U]=F.useState(null),[G,j]=F.useState(null),[me,Ae]=F.useState(new Set),[Y,ue]=F.useState("ANGKA"),[xe,Le]=F.useState(null),[ye,H]=F.useState(null),[re,pe]=F.useState([]),[ie,te]=F.useState(null),[ge,_e]=F.useState(null),[Ie,He]=F.useState(""),[ze,pt]=F.useState([]),[Ce,Ee]=F.useState(null),[Ge,it]=F.useState([]),[mt,tt]=F.useState(!1),[$t,St]=F.useState(void 0),[Ut,jt]=F.useState([]),[fr,pa]=F.useState(!1),[yn,ls]=F.useState(void 0),[ga,hr]=F.useState(!1),[mn,cs]=F.useState([]),[uo,fo]=F.useState(null),[mr,Jn]=F.useState(null),qe=(J,ve)=>Jn({msg:J,type:ve}),[Vn,Dt]=F.useState([...mb,...pb,...gb,...vb,..._b,...yb,...xb,...bb]),ho=async(J,ve)=>{{const Ue=localStorage.getItem("fajmuls_active_session");if(Ue){const Pe=JSON.parse(Ue);if(Pe.uid===J&&Date.now()-Pe.timestamp<1440*60*1e3){if(window.confirm("Ditemukan sesi tes terakhir (Tamu). Lanjutkan?"))return Ii(Pe),!0;localStorage.removeItem("fajmuls_active_session")}}}return!1},Ii=J=>{s(J.category),U(J.mode),pt(J.questions),Ee(J.drillContent),J.skdStream&&j(J.skdStream),J.packageTitle&&ls(J.packageTitle),St(J),e("SESSION")},mo=async()=>{if(oe.play("click"),!(N!=null&&N.uid)||N.isGuest){qe("Fitur ini hanya untuk pengguna login.","info");return}pa(!0),e("RESUME_LIST");try{const J=await fj(N.uid);jt(J)}catch{qe("Gagal memuat sesi tersimpan.","error")}finally{pa(!1)}},Ts=async J=>{oe.play("click"),Ii(J),J.id&&(N!=null&&N.uid)&&await RE(N.uid,J.id)},ki=async J=>{oe.play("click"),N!=null&&N.uid&&(await RE(N.uid,J),jt(ve=>ve.filter(Ue=>Ue.id!==J&&String(Ue.timestamp)!==J)),qe("Sesi dihapus.","success"))};F.useEffect(()=>{const J=localStorage.getItem("fajmuls_settings");J?D(JSON.parse(J)):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&D(Ue=>({...Ue,darkMode:!0}));const ve=rj(async Ue=>{if(f(!0),Ue)try{const Pe=await kE(Ue.uid);if(Pe){L({uid:Ue.uid,username:Pe.username,email:Ue.email,photoURL:Pe.photoURL||Ue.photoURL});const Me=await mj(Ue.uid);cs(Me),(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else L({uid:Ue.uid,username:"",email:Ue.email,photoURL:Ue.photoURL}),e("USERNAME_SETUP")}catch(Pe){console.error("Profile fetch error",Pe)}else if(localStorage.getItem("fajmuls_guest_mode")==="true"){const Me=localStorage.getItem("fajmuls_guest_username"),st="guest-"+(Me||"user");L({uid:st,username:Me||"Tamu",email:null,isGuest:!0});const Be=localStorage.getItem("fajmuls_guest_history");if(Be)try{cs(JSON.parse(Be))}catch{}!await ho(st)&&(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else n!=="SPLASH"&&e("LOGIN");f(!1),B(!1)});return()=>ve()},[]),F.useEffect(()=>{if(p.trim().length===0){_([]),A(!1);return}const J=p.toLowerCase(),ve=[];Pp.forEach(Pe=>{(Pe.name.toLowerCase().includes(J)||Pe.desc.toLowerCase().includes(J))&&ve.push({id:Pe.id,label:Pe.name,type:"CATEGORY"})}),[{id:"TES_KORAN",label:"Tes Koran / Pauli"},{id:"REACTION",label:"Reaction Time (Benchmark)"},{id:"AIM",label:"Aim Trainer (Benchmark)"},{id:"SEQUENCE",label:"Sequence Memory (Benchmark)"},{id:"CHIMP",label:"Chimp Test (Benchmark)"},{id:"VISUAL",label:"Visual Memory (Benchmark)"},{id:"NUMBER",label:"Number Memory (Benchmark)"},{id:"VERBAL",label:"Verbal Memory (Benchmark)"},{id:"TYPING",label:"Typing Test (Benchmark)"},{id:"BRIDGE",label:"Bridge Memory (Benchmark)"},{id:"MATCH",label:"Match Memory (Benchmark)"},{id:"KECERMATAN_ANGKA",label:"Kecermatan Angka"},{id:"KECERMATAN_HURUF",label:"Kecermatan Huruf"},{id:"KECERMATAN_SIMBOL",label:"Kecermatan Simbol"}].forEach(Pe=>{Pe.label.toLowerCase().includes(J)&&ve.push({id:Pe.id,label:Pe.label,type:"FEATURE"})}),_(ve),A(ve.length>0)},[p]);const Yt=J=>{if(oe.play("click"),m(""),A(!1),J.type==="CATEGORY")va(J.id);else if(J.id==="TES_KORAN")s("PSIKOTEST"),e("TES_KORAN");else if(J.id.startsWith("KECERMATAN_")){s("KECERMATAN");const ve=J.id.replace("KECERMATAN_","");Qn(ve)}else s("BENCHMARK"),Le(J.id),e("BENCHMARK")},Es=async()=>{hr(!0);const J=[...mb,...pb,...gb,...vb,..._b,...yb,...xb,...bb];try{const ve=await xj(),Ue=new Set(J.map(Me=>Me.id)),Pe=ve.filter(Me=>!Ue.has(Me.id));Dt([...J,...Pe])}catch(ve){console.error("Failed to load cloud packages",ve),Dt(J),qe("Gagal memuat paket online. Menggunakan data offline.","error")}finally{hr(!1)}};F.useEffect(()=>{localStorage.setItem("fajmuls_settings",JSON.stringify(C)),C.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),oe.syncSettings(C)},[C]);const Ss=async()=>{B(!0);try{const J=await aj();await kE(J.uid)||(L({uid:J.uid,username:"",email:J.email,photoURL:J.photoURL}),e("USERNAME_SETUP"))}catch{qe("Gagal login dengan Google.","error"),B(!1)}},us=()=>{oe.play("click"),localStorage.setItem("fajmuls_guest_mode","true"),localStorage.setItem("fajmuls_guest_username","Tamu"),L({uid:"guest-"+Date.now(),username:"Tamu",email:null,isGuest:!0});const J=localStorage.getItem("fajmuls_guest_history");if(J)try{cs(JSON.parse(J))}catch{}else cs([]);e("HOME")},Pl=async J=>{if(N!=null&&N.uid){B(!0);try{if(!await lj(J)){qe("Username sudah dipakai. Pilih yang lain.","error"),B(!1);return}await cj(N.uid,{username:J,email:N.email||"",photoURL:N.photoURL||""}),L(Ue=>Ue?{...Ue,username:J}:null),cs([]),oe.play("success"),e("HOME")}catch{qe("Gagal membuat profil.","error")}finally{B(!1)}}},po=async()=>{oe.play("click"),localStorage.removeItem("fajmuls_guest_mode"),localStorage.removeItem("fajmuls_guest_username"),localStorage.removeItem("fajmuls_active_session"),N!=null&&N.isGuest||await oj(),L(null),cs([]),e("LOGIN")},ds=async J=>{const ve=[J,...mn];cs(ve),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(ve)):N!=null&&N.uid&&await ME(N.uid,J)},Ri=async J=>{const ve=mn.filter(Ue=>Ue.id!==J);cs(ve),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(ve)):N!=null&&N.uid&&await pj(N.uid,J),qe("Riwayat berhasil dihapus.","success"),oe.play("click")},Ll=async J=>{if(N!=null&&N.isGuest){J.username&&(L(ve=>ve?{...ve,username:J.username}:null),localStorage.setItem("fajmuls_guest_username",J.username),qe("Nama Tamu diubah.","success"));return}if(N!=null&&N.uid)try{await uj(N.uid,J),L(ve=>ve?{...ve,...J}:null),qe("Profil berhasil diperbarui!","success")}catch(ve){qe(ve.message||"Gagal memperbarui profil.","error")}},Mi=async J=>{tt(!0);try{const ve=await QD(J);W({...J,extractedText:ve}),R(!0)}catch{qe("Gagal memproses materi. Coba lagi.","error")}finally{tt(!1)}},ya=async(J,ve)=>{if(!ve.trim()){qe("Mohon isi judul atau topik.","error");return}tt(!0),_e(J);try{const Ue=await WD(ve,J);He(Ue),e("SESSION")}catch{qe("Gagal generate konten skripsi.","error")}finally{tt(!1)}},xa=async J=>{if(!$){qe("Materi hilang. Silakan input ulang.","error");return}tt(!0),H(J),U(Ye.DRILL);try{if(J==="ACTIVE_RECALL"||J==="PBL"||J==="PRACTICE"||J==="TEACHING"){const ve=await Fn(Ye.DRILL,"GENERAL",$,5,[],void 0,J);pt(ve)}else if(J==="SPACED_REPETITION"){const ve=await XD($);pe(ve)}else if(J==="MIND_MAP"){const ve=await ZD($);te(ve)}e("SESSION")}catch{qe("Gagal memuat materi AI.","error")}finally{tt(!1)}},ai=async(J,ve,Ue)=>{if(t){if(ls(void 0),St(void 0),["UTBK","SKD","TPA","PSIKOTEST","INTERVIEW"].includes(t)&&!M&&J!==Ye.SIMULATION&&J!==Ye.WEAKNESS){qe(`Harap pilih topik/subtes untuk ${t}.`,"error");return}if(t==="SKD"&&!G){qe("Harap pilih jalur (CPNS / Kedinasan).","error");return}tt(!0),U(J),it([]),pt([]),Ee(null);try{const Pe=M;if(J===Ye.DRILL){const Me=await eP(t,Pe,G||void 0);Ee(Me),Me&&Me.question&&pt([Me.question])}else if(J===Ye.SIMULATION&&t==="SKD"&&G){const Me=await tT(G);pt(Me||[])}else if(J===Ye.SIMULATION&&t==="UTBK"){const Me=await nT();pt(Me||[])}else if(J===Ye.SIMULATION&&t==="TPA"){const Me=await tP();pt(Me||[])}else if(J===Ye.SIMULATION&&t==="PSIKOTEST"){const Me=await nP();pt(Me||[])}else{let Me=Ue||5;t==="PSIKOTEST"&&J===Ye.SIMULATION&&(Me=40),t==="INTERVIEW"&&(Me=3);const st=await Fn(J,t,Pe,Me,Array.from(me),G||void 0,void 0,ve);pt(st||[])}e("SESSION")}catch(Pe){console.error(Pe),qe("Gagal memuat soal. Kemungkinan traffic AI sedang tinggi. Coba lagi.","error")}finally{tt(!1)}}},kn=(J,ve,Ue=!1)=>{if(ve){const Be={...ve,isAborted:Ue};ds(Be),(ve.category!=="BENCHMARK"||Ue)&&e("HOME");return}it(J);let Pe=0,Me=0,st;if(t==="SKD"&&V===Ye.SIMULATION){let Be=0,Ve=0,vt=0;J.forEach(bt=>{var Xt,jn,On,Wn,hs,Gn;const Ot=ze.find(an=>an.id===bt.questionId);Ot&&((jn=(Xt=Ot.metadata)==null?void 0:Xt.subtest)!=null&&jn.includes("TWK")&&(Be+=bt.scoreEarned),(Wn=(On=Ot.metadata)==null?void 0:On.subtest)!=null&&Wn.includes("TIU")&&(Ve+=bt.scoreEarned),(Gn=(hs=Ot.metadata)==null?void 0:hs.subtest)!=null&&Gn.includes("TKP")&&(vt+=bt.scoreEarned))}),Pe=Be+Ve+vt,Me=550,st={twk:Be,tiu:Ve,tkp:vt,total:Pe,passed:Be>=65&&Ve>=80&&vt>=166}}else if(t==="UTBK"&&V===Ye.SIMULATION){const Be=hs=>{const Gn=ze.filter(Pt=>{var zt,Xn;return(Xn=(zt=Pt.metadata)==null?void 0:zt.subtest)==null?void 0:Xn.includes(hs)});if(!Gn.length)return 0;const an=J.filter(Pt=>{var zt,Xn,gr;return Pt.isCorrect&&((gr=(Xn=(zt=ze.find(_t=>_t.id===Pt.questionId))==null?void 0:zt.metadata)==null?void 0:Xn.subtest)==null?void 0:gr.includes(hs))}).length;return Math.round(200+an/Gn.length*600)},Ve=Be("Penalaran Umum"),vt=Be("PPU"),bt=Be("PBM"),Ot=Be("Kuantitatif"),Xt=Be("Literasi B.Indo"),jn=Be("Literasi B.Inggris"),On=Be("Penalaran Matematika"),Wn=Math.round((Ve+vt+bt+Ot+Xt+jn+On)/7);Pe=Wn,Me=1e3,st={pu:Ve,ppu:vt,pbm:bt,pk:Ot,lbi:Xt,lbe:jn,pm:On,average:Wn}}else if(t==="TPA"&&V===Ye.SIMULATION){let Be=0,Ve=0,vt=0,bt=0;J.forEach(jn=>{var Wn,hs,Gn,an;const On=ze.find(Pt=>Pt.id===jn.questionId);On&&((hs=(Wn=On.metadata)==null?void 0:Wn.subtest)!=null&&hs.includes("TBI")||(an=(Gn=On.metadata)==null?void 0:Gn.subtest)!=null&&an.includes("Inggris")?(bt++,jn.isCorrect&&Ve++):(vt++,jn.isCorrect&&Be++))});const Ot=Math.round(200+Be/(vt||1)*600),Xt=Math.round(Ve/(bt||1)*100);Pe=Ot+Xt,Me=900,st={tpaScore:Ot,tbiScore:Xt,tpaCorrect:Be,tbiCorrect:Ve}}else if(t==="INTERVIEW"){const Be=J.map(Ve=>{var vt;return((vt=Ve.interviewFeedback)==null?void 0:vt.score)||0});Pe=Math.round(Be.reduce((Ve,vt)=>Ve+vt,0)/(Be.length||1)),Me=100}else if(t==="PSIKOTEST"&&V===Ye.SIMULATION){const Be=J.filter(Xt=>Xt.isCorrect).length,Ve=ze.length,vt=Be/Ve,bt=Math.round(70+vt*75);let Ot=bt>=130?"Very Superior":bt>=120?"Superior":bt>=110?"High Average":bt>=90?"Average":"Low Average";Pe=bt,Me=160,st={iqScore:bt,classification:Ot}}else if(t==="GENERAL"){const Be=J.reduce((Ve,vt)=>Ve+(vt.scoreEarned||0),0);Pe=Math.round(Be/(J.length||1)),Me=100}else{const Be=J.filter(Ve=>Ve.isCorrect).length;Pe=Math.round(Be/ze.length*100),Me=100}ds({id:`h-${Date.now()}`,date:new Date().toISOString(),category:t,skdStream:G||void 0,score:Pe,maxScore:Me,details:st,questions:ze,answers:J,isAborted:Ue,packageTitle:yn}),ls(void 0),e("RESULTS")},va=J=>{oe.play("click"),s(J),ls(void 0),St(void 0),J==="BUTAWRNA"?e("COLORBLIND"):J==="BENCHMARK"?(Le(null),e("BENCHMARK")):(e("DASHBOARD"),W(null),R(!1),k(""),j(null),H(null),_e(null),He(""))},Qn=J=>{ue(J),e("TES_KECERMATAN")},fs=()=>{if(mn.length===0){qe("Belum ada riwayat untuk disimpan.","info");return}const J=JSON.stringify(mn,null,2),ve=new Blob([J],{type:"application/json"}),Ue=URL.createObjectURL(ve),Pe=document.createElement("a");Pe.href=Ue,Pe.download=`Fajmuls_History_${(N==null?void 0:N.username)||"user"}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),URL.revokeObjectURL(Ue),qe("Export berhasil!","success")},Jt=J=>{const ve=new FileReader;ve.onload=Ue=>{var Pe;try{const Me=(Pe=Ue.target)==null?void 0:Pe.result,st=JSON.parse(Me);if(!Array.isArray(st))throw new Error("Format salah");const Be=new Set(mn.map(bt=>bt.id)),Ve=st.filter(bt=>!Be.has(bt.id)),vt=[...mn,...Ve].sort((bt,Ot)=>new Date(Ot.date).getTime()-new Date(bt.date).getTime());cs(vt),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(vt)):N!=null&&N.uid&&Ve.forEach(bt=>{ME(N.uid,bt)}),qe(`Berhasil memuat ${Ve.length} riwayat baru.`,"success")}catch{qe("Gagal membaca file JSON.","error")}},ve.readAsText(J)},rn=J=>{pt(J.questions),U(Ye.SIMULATION),ls(J.title),St(void 0),e("SESSION")},As=async J=>{if(t)try{let ve=[],Ue=60;t==="SKD"?(ve=await tT(G||"CPNS"),Ue=100):t==="UTBK"?(ve=await nT(),Ue=195):ve=await Fn(Ye.SIMULATION,t,"SIMULATION",20,[],G||void 0,void 0,"HOTS");const Me=Vn.filter(Ve=>Ve.category===t&&(t==="SKD"?Ve.skdStream===G:!0)).length+1;let st="";t==="SKD"?G==="CPNS"?st=`TO SKD CPNS ${Me}`:G==="KEDINASAN"?st=`TO SKD Kedinasan ${Me}`:st=`TO SKD ${Me}`:t==="UTBK"?st=`TO UTBK ${Me}`:t==="TPA"?st=`TO TPA TBI ${Me}`:t==="PSIKOTEST"?st=`TO Psikotest ${Me}`:st=`TO ${t} ${Me}`;const Be={id:`gen-${Date.now()}`,title:st,category:t,skdStream:G||void 0,questions:ve,durationMinutes:Ue,isAiGenerated:!0,version:"v2",createdAt:new Date().toISOString()};await DE(Be),Dt(Ve=>[Be,...Ve]),qe(`Paket baru "${st}" berhasil dibuat dan disimpan ke database!`,"success")}catch(ve){console.error(ve),qe("Gagal membuat paket soal. Coba lagi.","error")}},pr=async J=>{if(Dt(ve=>ve.filter(Ue=>Ue.id!==J)),J.startsWith("gen-")||J.startsWith("pkg-"))try{await vj(J),qe("Paket dihapus dari database.","success")}catch(ve){console.error(ve)}else qe("Paket dihapus dari tampilan lokal.","success")},Ul=J=>{Array.from(J).forEach(ve=>{const Ue=new FileReader;Ue.onload=async Pe=>{var Me;try{const st=(Me=Pe.target)==null?void 0:Me.result,Be=JSON.parse(st);Be.id&&Be.questions&&(await DE(Be),Dt(Ve=>Ve.find(vt=>vt.id===Be.id)?Ve:[Be,...Ve]),qe(`Paket "${Be.title}" diimpor dan disimpan.`,"success"))}catch{qe("File tidak valid.","error")}},Ue.readAsText(ve)})};return n==="SPLASH"?u.jsx(M9,{onComplete:()=>e(N?"HOME":"LOGIN")}):c?u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:u.jsx(Kn,{className:"animate-spin text-indigo-600 w-10 h-10"})}):n==="LOGIN"?u.jsx(y8,{onGoogleLogin:Ss,onGuestLogin:us,isLoading:O}):n==="USERNAME_SETUP"?u.jsx(x8,{onSubmit:Pl,isLoading:O}):u.jsxs(u.Fragment,{children:[mr&&u.jsx(p8,{message:mr.msg,type:mr.type,onClose:()=>Jn(null)}),u.jsx(D9,{isOpen:r,onClose:()=>o(!1),settings:C,onUpdate:D,userProfile:N,onUpdateProfile:Ll}),n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&u.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md z-40 border-b border-slate-200 dark:border-slate-700 px-4 sm:px-6 py-3 flex justify-between items-center animate-fade-in-down",children:[u.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{oe.play("click"),e("HOME")},children:[u.jsx("img",{src:sf,alt:"Logo",className:"w-8 h-8 object-contain"}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white hidden md:block",children:"Fajmuls Learning"})]}),u.jsxs("div",{className:"flex-1 max-w-md mx-4 relative",children:[u.jsxs("div",{className:"relative",children:[u.jsx(tf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),u.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-slate-800 border-none rounded-full text-sm text-slate-800 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Cari fitur (UTBK, Pauli, dll)...",value:p,onChange:J=>m(J.target.value)})]}),T&&v.length>0&&u.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden z-50 animate-fade-in-up max-h-80 overflow-y-auto scrollbar-hide",children:v.map(J=>u.jsxs("button",{onClick:()=>Yt(J),className:"w-full text-left px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-700 flex items-center justify-between group transition-colors",children:[u.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:J.label}),u.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-bold uppercase ${J.type==="CATEGORY"?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900 dark:text-indigo-300":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900 dark:text-emerald-300"}`,children:J.type})]},J.id))})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[u.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:(N==null?void 0:N.username)||"Tamu"}),u.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:N!=null&&N.isGuest?"Mode Tamu":"Online"})]}),u.jsx(m8,{user:N}),u.jsx("button",{onClick:()=>{oe.play("click"),o(!0)},className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition",children:u.jsx(w1,{size:20,className:"text-slate-600 dark:text-slate-300"})})]})]}),u.jsxs("div",{className:`${n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"?"pt-20":""}`,children:[n==="HOME"&&u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center relative transition-colors duration-300",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("img",{src:sf,alt:"Logo",className:"w-32 h-32 object-contain mx-auto mb-6 animate-float"}),u.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Pilih Jalur Belajarmu"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Sistem belajar adaptif untuk persiapan ujian."})]}),u.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl",children:Pp.map(J=>u.jsxs("button",{onClick:()=>va(J.id),className:`p-8 rounded-2xl border-2 transition-all group text-left flex flex-col items-start relative overflow-hidden hover:-translate-y-1 hover:shadow-xl ${J.id==="BENCHMARK"?"bg-white dark:bg-slate-800 border-red-200 dark:border-red-900 hover:border-red-500":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500"}`,children:[J.id==="BENCHMARK"?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-50 dark:bg-red-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),u.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/40 rounded-lg flex items-center justify-center mb-6 group-hover:bg-red-600 transition-colors relative z-10 text-red-600 dark:text-red-400 group-hover:text-white",children:u.jsx(Bs,{size:24})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-50 dark:bg-indigo-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),u.jsx("div",{className:"w-12 h-12 bg-indigo-50 dark:bg-slate-700 rounded-lg flex items-center justify-center mb-6 group-hover:bg-indigo-600 transition-colors relative z-10",children:J.id==="GENERAL"?u.jsx(nr,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):J.id==="SKD"?u.jsx(x1,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):J.id==="INTERVIEW"?u.jsx(ph,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):J.id==="BUTAWRNA"?u.jsx(A1,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):J.id==="PSIKOTEST"?u.jsx(Vs,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):J.id==="SKRIPSI"?u.jsx(hh,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):J.id==="KECERMATAN"?u.jsx(T1,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):u.jsx(Mg,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"})})]}),u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2 relative z-10",children:J.name}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm leading-relaxed relative z-10",children:J.desc})]},J.id))}),u.jsxs("div",{className:"mt-12 flex gap-4 flex-wrap justify-center",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),e("HISTORY")},className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[u.jsx(Dg,{size:18})," Riwayat Belajar"]}),u.jsxs("button",{onClick:mo,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 dark:shadow-none border border-indigo-600 font-bold hover:bg-indigo-700 transition",children:[u.jsx(b1,{size:18})," Lanjutkan TO"]}),u.jsxs("button",{onClick:()=>{oe.play("click"),s("BENCHMARK"),Le(null),e("BENCHMARK")},className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[u.jsx(C1,{size:18,className:"text-amber-500"})," Global Ranking"]}),u.jsxs("button",{onClick:po,className:"flex items-center gap-2 px-6 py-3 bg-rose-50 dark:bg-rose-900/20 rounded-xl shadow-sm border border-rose-100 dark:border-rose-900 font-bold text-rose-700 dark:text-rose-400 hover:bg-rose-100 dark:hover:bg-rose-900/40 transition",children:[u.jsx(IO,{size:18})," Keluar"]})]})]}),n==="DASHBOARD"&&u.jsx(S8,{category:t,onBack:()=>{oe.play("back"),e("HOME")},onStartSession:ai,onOpenTOSelection:()=>{oe.play("click"),e("TO_SELECTION")},onStartTesKoran:()=>{oe.play("click"),e("TES_KORAN")},onStartTesKecermatan:Qn,onGeneralInputSubmit:Mi,generalInput:$,setGeneralInput:W,isReadingMaterial:se,onResetMaterial:()=>{R(!1),W(null)},onSubtestSelect:k,selectedSubtest:M,weakTopicsCount:me.size,loading:mt,skdStream:G,onSkdStreamSelect:j,onHistory:()=>{oe.play("click"),e("HISTORY")},onStartGeneralSession:xa,onStartSkripsiSession:ya,username:(N==null?void 0:N.username)||"Guest",isDarkMode:C.darkMode,onToggleDarkMode:()=>{D(J=>({...J,darkMode:!J.darkMode}))}}),n==="TO_SELECTION"&&u.jsx(L9,{category:t,skdStream:G||void 0,availablePackages:Vn,history:mn,onSelectPackage:rn,onGenerateNew:As,onDeletePackage:pr,onImportPackage:Ul,onBack:()=>{oe.play("back"),e("DASHBOARD")},showToast:qe,confirmEnabled:C.confirmActions,onRefresh:Es,isLoading:ga}),n==="RESUME_LIST"&&u.jsx(A8,{sessions:Ut,onBack:()=>{oe.play("back"),e("HOME")},onResume:Ts,onDelete:ki,loading:fr}),n==="SESSION"&&(t==="SKRIPSI"?u.jsx(v8,{result:Ie,feature:ge,onBack:()=>{oe.play("back"),e("DASHBOARD")}}):t==="INTERVIEW"?u.jsx(b8,{questions:ze,onComplete:J=>kn(J)}):t==="GENERAL"&&ye==="SPACED_REPETITION"?u.jsx(_8,{flashcards:re,onFinish:()=>{oe.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&ye==="MIND_MAP"?u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col transition-colors duration-300",children:[" ",u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[" ",u.jsxs("button",{onClick:()=>{oe.play("back"),e("DASHBOARD")},className:"flex items-center text-slate-500 dark:text-slate-400",children:[u.jsx(Ct,{size:18})," Kembali"]})," ",u.jsx("h2",{className:"font-bold text-slate-800 dark:text-white",children:"Mind Mapping"})," "]})," ",u.jsx(k9,{data:ie})," "]}):t==="GENERAL"&&ye==="FEYNMAN"?u.jsx(T8,{topic:($==null?void 0:$.content)||"",onFinish:()=>{oe.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&ye==="SQ3R"?u.jsx(E8,{topic:($==null?void 0:$.content)||"",onFinish:()=>{oe.play("back"),e("DASHBOARD")}}):u.jsx(H9,{mode:V,questions:ze,drillContent:Ce,onComplete:(J,ve,Ue)=>kn(J,ve,Ue),isSkdSimulation:V===Ye.SIMULATION&&t==="SKD",isUtbkSimulation:V===Ye.SIMULATION&&t==="UTBK",category:t,showToast:qe,initialState:$t,userId:N==null?void 0:N.uid,skdStream:G,packageTitle:yn,onSaveAndExit:()=>e("HOME")})),n==="TES_KORAN"&&u.jsx($9,{onBack:()=>e("DASHBOARD"),onComplete:J=>kn([],J)}),n==="TES_KECERMATAN"&&u.jsx(Y9,{initialMode:Y,onBack:()=>e("DASHBOARD"),onComplete:J=>kn([],J)}),n==="BENCHMARK"&&u.jsx(h8,{onBack:()=>e("HOME"),onComplete:J=>kn([],J),username:(N==null?void 0:N.username)||"Guest",history:mn,isGuest:N==null?void 0:N.isGuest,initialMode:xe||void 0}),n==="RESULTS"&&u.jsx(V9,{answers:Ge,questions:ze,onHome:()=>{oe.play("back"),e("HOME")},onRetry:()=>{oe.play("click"),ai(V)},category:t,details:(ba=mn[0])==null?void 0:ba.details}),n==="HISTORY"&&u.jsx(O9,{history:mn,onBack:()=>{oe.play("back"),e("HOME")},onReview:J=>{oe.play("click"),fo(J),e("REVIEW")},username:(N==null?void 0:N.username)||"Guest",onExport:fs,onImport:Jt,isDarkMode:C.darkMode,onDelete:Ri}),n==="REVIEW"&&u.jsx(G9,{item:uo,onBack:()=>{oe.play("back"),e("HISTORY")}}),n==="COLORBLIND"&&u.jsx(Q9,{onBack:()=>{oe.play("back"),e("HOME")},onComplete:J=>kn([],J)})]})]})}const V1=document.getElementById("root");if(!V1)throw new Error("Could not find root element to mount to");const N8=AC.createRoot(V1);N8.render(u.jsx(yC.StrictMode,{children:u.jsx(w8,{})}));
