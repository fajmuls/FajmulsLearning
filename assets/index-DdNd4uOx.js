(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();function jE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rp={exports:{}},Tc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function nC(){if(Zv)return Tc;Zv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var f in a)f!=="key"&&(o[f]=a[f])}else o=a;return a=o.ref,{$$typeof:n,type:s,key:c,ref:a!==void 0?a:null,props:o}}return Tc.Fragment=e,Tc.jsx=t,Tc.jsxs=t,Tc}var eb;function sC(){return eb||(eb=1,rp.exports=nC()),rp.exports}var u=sC(),ap={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tb;function iC(){if(tb)return Ge;tb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function A(H){return H===null||typeof H!="object"?null:(H=T&&H[T]||H["@@iterator"],typeof H=="function"?H:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,I={};function j(H,ne,Z){this.props=H,this.context=ne,this.refs=I,this.updater=Z||N}j.prototype.isReactComponent={},j.prototype.setState=function(H,ne){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ne,"setState")},j.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function L(){}L.prototype=j.prototype;function G(H,ne,Z){this.props=H,this.context=ne,this.refs=I,this.updater=Z||N}var ee=G.prototype=new L;ee.constructor=G,C(ee,j.prototype),ee.isPureReactComponent=!0;var re=Array.isArray;function oe(){}var M={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function R(H,ne,Z){var K=Z.ref;return{$$typeof:n,type:H,key:ne,ref:K!==void 0?K:null,props:Z}}function O(H,ne){return R(H.type,ne,H.props)}function V(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function B(H){var ne={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Z){return ne[Z]})}var U=/\/+/g;function pe(H,ne){return typeof H=="object"&&H!==null&&H.key!=null?B(""+H.key):ne.toString(36)}function Re(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(oe,oe):(H.status="pending",H.then(function(ne){H.status==="pending"&&(H.status="fulfilled",H.value=ne)},function(ne){H.status==="pending"&&(H.status="rejected",H.reason=ne)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function J(H,ne,Z,K,$){var ce=typeof H;(ce==="undefined"||ce==="boolean")&&(H=null);var ye=!1;if(H===null)ye=!0;else switch(ce){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(H.$$typeof){case n:case e:ye=!0;break;case v:return ye=H._init,J(ye(H._payload),ne,Z,K,$)}}if(ye)return $=$(H),ye=K===""?"."+pe(H,0):K,re($)?(Z="",ye!=null&&(Z=ye.replace(U,"$&/")+"/"),J($,ne,Z,"",function(dt){return dt})):$!=null&&(V($)&&($=O($,Z+($.key==null||H&&H.key===$.key?"":(""+$.key).replace(U,"$&/")+"/")+ye)),ne.push($)),1;ye=0;var Ce=K===""?".":K+":";if(re(H))for(var _e=0;_e<H.length;_e++)K=H[_e],ce=Ce+pe(K,_e),ye+=J(K,ne,Z,ce,$);else if(_e=A(H),typeof _e=="function")for(H=_e.call(H),_e=0;!(K=H.next()).done;)K=K.value,ce=Ce+pe(K,_e++),ye+=J(K,ne,Z,ce,$);else if(ce==="object"){if(typeof H.then=="function")return J(Re(H),ne,Z,K,$);throw ne=String(H),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ye}function he(H,ne,Z){if(H==null)return H;var K=[],$=0;return J(H,K,"","",function(ce){return ne.call(Z,ce,$++)}),K}function be(H){if(H._status===-1){var ne=H._result;ne=ne(),ne.then(function(Z){(H._status===0||H._status===-1)&&(H._status=1,H._result=Z)},function(Z){(H._status===0||H._status===-1)&&(H._status=2,H._result=Z)}),H._status===-1&&(H._status=0,H._result=ne)}if(H._status===1)return H._result.default;throw H._result}var Ae=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},xe={map:he,forEach:function(H,ne,Z){he(H,function(){ne.apply(this,arguments)},Z)},count:function(H){var ne=0;return he(H,function(){ne++}),ne},toArray:function(H){return he(H,function(ne){return ne})||[]},only:function(H){if(!V(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Ge.Activity=_,Ge.Children=xe,Ge.Component=j,Ge.Fragment=t,Ge.Profiler=a,Ge.PureComponent=G,Ge.StrictMode=s,Ge.Suspense=p,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(H){return M.H.useMemoCache(H)}},Ge.cache=function(H){return function(){return H.apply(null,arguments)}},Ge.cacheSignal=function(){return null},Ge.cloneElement=function(H,ne,Z){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var K=C({},H.props),$=H.key;if(ne!=null)for(ce in ne.key!==void 0&&($=""+ne.key),ne)!D.call(ne,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&ne.ref===void 0||(K[ce]=ne[ce]);var ce=arguments.length-2;if(ce===1)K.children=Z;else if(1<ce){for(var ye=Array(ce),Ce=0;Ce<ce;Ce++)ye[Ce]=arguments[Ce+2];K.children=ye}return R(H.type,$,K)},Ge.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:o,_context:H},H},Ge.createElement=function(H,ne,Z){var K,$={},ce=null;if(ne!=null)for(K in ne.key!==void 0&&(ce=""+ne.key),ne)D.call(ne,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&($[K]=ne[K]);var ye=arguments.length-2;if(ye===1)$.children=Z;else if(1<ye){for(var Ce=Array(ye),_e=0;_e<ye;_e++)Ce[_e]=arguments[_e+2];$.children=Ce}if(H&&H.defaultProps)for(K in ye=H.defaultProps,ye)$[K]===void 0&&($[K]=ye[K]);return R(H,ce,$)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(H){return{$$typeof:f,render:H}},Ge.isValidElement=V,Ge.lazy=function(H){return{$$typeof:v,_payload:{_status:-1,_result:H},_init:be}},Ge.memo=function(H,ne){return{$$typeof:m,type:H,compare:ne===void 0?null:ne}},Ge.startTransition=function(H){var ne=M.T,Z={};M.T=Z;try{var K=H(),$=M.S;$!==null&&$(Z,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(oe,Ae)}catch(ce){Ae(ce)}finally{ne!==null&&Z.types!==null&&(ne.types=Z.types),M.T=ne}},Ge.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ge.use=function(H){return M.H.use(H)},Ge.useActionState=function(H,ne,Z){return M.H.useActionState(H,ne,Z)},Ge.useCallback=function(H,ne){return M.H.useCallback(H,ne)},Ge.useContext=function(H){return M.H.useContext(H)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(H,ne){return M.H.useDeferredValue(H,ne)},Ge.useEffect=function(H,ne){return M.H.useEffect(H,ne)},Ge.useEffectEvent=function(H){return M.H.useEffectEvent(H)},Ge.useId=function(){return M.H.useId()},Ge.useImperativeHandle=function(H,ne,Z){return M.H.useImperativeHandle(H,ne,Z)},Ge.useInsertionEffect=function(H,ne){return M.H.useInsertionEffect(H,ne)},Ge.useLayoutEffect=function(H,ne){return M.H.useLayoutEffect(H,ne)},Ge.useMemo=function(H,ne){return M.H.useMemo(H,ne)},Ge.useOptimistic=function(H,ne){return M.H.useOptimistic(H,ne)},Ge.useReducer=function(H,ne,Z){return M.H.useReducer(H,ne,Z)},Ge.useRef=function(H){return M.H.useRef(H)},Ge.useState=function(H){return M.H.useState(H)},Ge.useSyncExternalStore=function(H,ne,Z){return M.H.useSyncExternalStore(H,ne,Z)},Ge.useTransition=function(){return M.H.useTransition()},Ge.version="19.2.3",Ge}var nb;function vg(){return nb||(nb=1,ap.exports=iC()),ap.exports}var F=vg();const rC=jE(F);var op={exports:{}},Ec={},lp={exports:{}},cp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sb;function aC(){return sb||(sb=1,(function(n){function e(J,he){var be=J.length;J.push(he);e:for(;0<be;){var Ae=be-1>>>1,xe=J[Ae];if(0<a(xe,he))J[Ae]=he,J[be]=xe,be=Ae;else break e}}function t(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var he=J[0],be=J.pop();if(be!==he){J[0]=be;e:for(var Ae=0,xe=J.length,H=xe>>>1;Ae<H;){var ne=2*(Ae+1)-1,Z=J[ne],K=ne+1,$=J[K];if(0>a(Z,be))K<xe&&0>a($,Z)?(J[Ae]=$,J[K]=be,Ae=K):(J[Ae]=Z,J[ne]=be,Ae=ne);else if(K<xe&&0>a($,be))J[Ae]=$,J[K]=be,Ae=K;else break e}}return he}function a(J,he){var be=J.sortIndex-he.sortIndex;return be!==0?be:J.id-he.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var p=[],m=[],v=1,_=null,T=3,A=!1,N=!1,C=!1,I=!1,j=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function ee(J){for(var he=t(m);he!==null;){if(he.callback===null)s(m);else if(he.startTime<=J)s(m),he.sortIndex=he.expirationTime,e(p,he);else break;he=t(m)}}function re(J){if(C=!1,ee(J),!N)if(t(p)!==null)N=!0,oe||(oe=!0,B());else{var he=t(m);he!==null&&Re(re,he.startTime-J)}}var oe=!1,M=-1,D=5,R=-1;function O(){return I?!0:!(n.unstable_now()-R<D)}function V(){if(I=!1,oe){var J=n.unstable_now();R=J;var he=!0;try{e:{N=!1,C&&(C=!1,L(M),M=-1),A=!0;var be=T;try{t:{for(ee(J),_=t(p);_!==null&&!(_.expirationTime>J&&O());){var Ae=_.callback;if(typeof Ae=="function"){_.callback=null,T=_.priorityLevel;var xe=Ae(_.expirationTime<=J);if(J=n.unstable_now(),typeof xe=="function"){_.callback=xe,ee(J),he=!0;break t}_===t(p)&&s(p),ee(J)}else s(p);_=t(p)}if(_!==null)he=!0;else{var H=t(m);H!==null&&Re(re,H.startTime-J),he=!1}}break e}finally{_=null,T=be,A=!1}he=void 0}}finally{he?B():oe=!1}}}var B;if(typeof G=="function")B=function(){G(V)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,pe=U.port2;U.port1.onmessage=V,B=function(){pe.postMessage(null)}}else B=function(){j(V,0)};function Re(J,he){M=j(function(){J(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(J){switch(T){case 1:case 2:case 3:var he=3;break;default:he=T}var be=T;T=he;try{return J()}finally{T=be}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(J,he){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var be=T;T=J;try{return he()}finally{T=be}},n.unstable_scheduleCallback=function(J,he,be){var Ae=n.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Ae+be:Ae):be=Ae,J){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=be+xe,J={id:v++,callback:he,priorityLevel:J,startTime:be,expirationTime:xe,sortIndex:-1},be>Ae?(J.sortIndex=be,e(m,J),t(p)===null&&J===t(m)&&(C?(L(M),M=-1):C=!0,Re(re,be-Ae))):(J.sortIndex=xe,e(p,J),N||A||(N=!0,oe||(oe=!0,B()))),J},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(J){var he=T;return function(){var be=T;T=he;try{return J.apply(this,arguments)}finally{T=be}}}})(cp)),cp}var ib;function oC(){return ib||(ib=1,lp.exports=aC()),lp.exports}var up={exports:{}},xn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb;function lC(){if(rb)return xn;rb=1;var n=vg();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(p,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:p,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,xn.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(p,m,null,v)},xn.flushSync=function(p){var m=c.T,v=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=m,s.p=v,s.d.f()}},xn.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},xn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},xn.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,_=f(v,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:A}):v==="script"&&s.d.X(p,{crossOrigin:_,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},xn.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=f(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},xn.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=f(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},xn.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=f(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},xn.requestFormReset=function(p){s.d.r(p)},xn.unstable_batchedUpdates=function(p,m){return p(m)},xn.useFormState=function(p,m,v){return c.H.useFormState(p,m,v)},xn.useFormStatus=function(){return c.H.useHostTransitionStatus()},xn.version="19.2.3",xn}var ab;function cC(){if(ab)return up.exports;ab=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),up.exports=lC(),up.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob;function uC(){if(ob)return Ec;ob=1;var n=oC(),e=vg(),t=cC();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function f(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(o(i)!==i)throw Error(s(188))}function m(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(s(188));return r!==i?null:i}for(var l=i,d=r;;){var x=l.return;if(x===null)break;var b=x.alternate;if(b===null){if(d=x.return,d!==null){l=d;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===l)return p(x),i;if(b===d)return p(x),r;b=b.sibling}throw Error(s(188))}if(l.return!==d.return)l=x,d=b;else{for(var S=!1,k=x.child;k;){if(k===l){S=!0,l=x,d=b;break}if(k===d){S=!0,d=x,l=b;break}k=k.sibling}if(!S){for(k=b.child;k;){if(k===l){S=!0,l=b,d=x;break}if(k===d){S=!0,d=b,l=x;break}k=k.sibling}if(!S)throw Error(s(189))}}if(l.alternate!==d)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?i:r}function v(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=v(i),r!==null)return r;i=i.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),G=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var U=Symbol.for("react.client.reference");function pe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===U?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case C:return"Fragment";case j:return"Profiler";case I:return"StrictMode";case re:return"Suspense";case oe:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case N:return"Portal";case G:return i.displayName||"Context";case L:return(i._context.displayName||"Context")+".Consumer";case ee:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return r=i.displayName||null,r!==null?r:pe(i.type)||"Memo";case D:r=i._payload,i=i._init;try{return pe(i(r))}catch{}}return null}var Re=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Ae=[],xe=-1;function H(i){return{current:i}}function ne(i){0>xe||(i.current=Ae[xe],Ae[xe]=null,xe--)}function Z(i,r){xe++,Ae[xe]=i.current,i.current=r}var K=H(null),$=H(null),ce=H(null),ye=H(null);function Ce(i,r){switch(Z(ce,r),Z($,i),Z(K,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?Tv(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=Tv(r),i=Ev(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ne(K),Z(K,i)}function _e(){ne(K),ne($),ne(ce)}function dt(i){i.memoizedState!==null&&Z(ye,i);var r=K.current,l=Ev(r,i.type);r!==l&&(Z($,i),Z(K,l))}function bt(i){$.current===i&&(ne(K),ne($)),ye.current===i&&(ne(ye),xc._currentValue=be)}var et,ct;function Nt(i){if(et===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);et=r&&r[1]||"",ct=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+et+i+ct}var Ut=!1;function Vt(i,r){if(!i||Ut)return"";Ut=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ie){var te=ie}Reflect.construct(i,[],fe)}else{try{fe.call()}catch(ie){te=ie}i.call(fe.prototype)}}else{try{throw Error()}catch(ie){te=ie}(fe=i())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),S=b[0],k=b[1];if(S&&k){var z=S.split(`
`),X=k.split(`
`);for(x=d=0;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;for(;x<X.length&&!X[x].includes("DetermineComponentFrameRoot");)x++;if(d===z.length||x===X.length)for(d=z.length-1,x=X.length-1;1<=d&&0<=x&&z[d]!==X[x];)x--;for(;1<=d&&0<=x;d--,x--)if(z[d]!==X[x]){if(d!==1||x!==1)do if(d--,x--,0>x||z[d]!==X[x]){var ae=`
`+z[d].replace(" at new "," at ");return i.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",i.displayName)),ae}while(1<=d&&0<=x);break}}}finally{Ut=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Nt(l):""}function Sn(i,r){switch(i.tag){case 26:case 27:case 5:return Nt(i.type);case 16:return Nt("Lazy");case 13:return i.child!==r&&r!==null?Nt("Suspense Fallback"):Nt("Suspense");case 19:return Nt("SuspenseList");case 0:case 15:return Vt(i.type,!1);case 11:return Vt(i.type.render,!1);case 1:return Vt(i.type,!0);case 31:return Nt("Activity");default:return""}}function Bn(i){try{var r="",l=null;do r+=Sn(i,l),l=i,i=i.return;while(i);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Rt=Object.prototype.hasOwnProperty,tt=n.unstable_scheduleCallback,zs=n.unstable_cancelCallback,Qi=n.unstable_shouldYield,Ja=n.unstable_requestPaint,ln=n.unstable_now,gi=n.unstable_getCurrentPriorityLevel,ea=n.unstable_ImmediatePriority,ta=n.unstable_UserBlockingPriority,vs=n.unstable_NormalPriority,Tl=n.unstable_LowPriority,Qa=n.unstable_IdlePriority,na=n.log,bs=n.unstable_setDisableYieldValue,Hn=null,Zt=null;function Rn(i){if(typeof na=="function"&&bs(i),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(Hn,i)}catch{}}var Mt=Math.clz32?Math.clz32:Xa,Wa=Math.log,Wi=Math.LN2;function Xa(i){return i>>>=0,i===0?32:31-(Wa(i)/Wi|0)|0}var Zn=256,Fs=262144,ge=4194304;function Pe(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ke(i,r,l){var d=i.pendingLanes;if(d===0)return 0;var x=0,b=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var k=d&134217727;return k!==0?(d=k&~b,d!==0?x=Pe(d):(S&=k,S!==0?x=Pe(S):l||(l=k&~i,l!==0&&(x=Pe(l))))):(k=d&~b,k!==0?x=Pe(k):S!==0?x=Pe(S):l||(l=d&~i,l!==0&&(x=Pe(l)))),x===0?0:r!==0&&r!==x&&(r&b)===0&&(b=x&-x,l=r&-r,b>=l||b===32&&(l&4194048)!==0)?r:x}function Et(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Ct(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xi(){var i=ge;return ge<<=1,(ge&62914560)===0&&(ge=4194304),i}function es(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function _s(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function uh(i,r,l,d,x,b){var S=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var k=i.entanglements,z=i.expirationTimes,X=i.hiddenUpdates;for(l=S&~l;0<l;){var ae=31-Mt(l),fe=1<<ae;k[ae]=0,z[ae]=-1;var te=X[ae];if(te!==null)for(X[ae]=null,ae=0;ae<te.length;ae++){var ie=te[ae];ie!==null&&(ie.lane&=-536870913)}l&=~fe}d!==0&&sa(i,d,0),b!==0&&x===0&&i.tag!==0&&(i.suspendedLanes|=b&~(S&~r))}function sa(i,r,l){i.pendingLanes|=r,i.suspendedLanes&=~r;var d=31-Mt(r);i.entangledLanes|=r,i.entanglements[d]=i.entanglements[d]|1073741824|l&261930}function El(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var d=31-Mt(l),x=1<<d;x&r|i[d]&r&&(i[d]|=r),l&=~x}}function Sl(i,r){var l=r&-r;return l=(l&42)!==0?1:ia(l),(l&(i.suspendedLanes|r))!==0?0:l}function ia(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function yi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ru(){var i=he.p;return i!==0?i:(i=window.event,i===void 0?32:Kv(i.type))}function Ts(i,r){var l=he.p;try{return he.p=i,r()}finally{he.p=l}}var Es=Math.random().toString(36).slice(2),zt="__reactFiber$"+Es,nn="__reactProps$"+Es,qs="__reactContainer$"+Es,Za="__reactEvents$"+Es,dh="__reactListeners$"+Es,au="__reactHandles$"+Es,ou="__reactResources$"+Es,Ks="__reactMarker$"+Es;function eo(i){delete i[zt],delete i[nn],delete i[Za],delete i[dh],delete i[au]}function $s(i){var r=i[zt];if(r)return r;for(var l=i.parentNode;l;){if(r=l[qs]||l[zt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=kv(i);i!==null;){if(l=i[zt])return l;i=kv(i)}return r}i=l,l=i.parentNode}return null}function ts(i){if(i=i[zt]||i[qs]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function zn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Ys(i){var r=i[ou];return r||(r=i[ou]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ft(i){i[Ks]=!0}var Al=new Set,wl={};function Js(i,r){Qs(i,r),Qs(i+"Capture",r)}function Qs(i,r){for(wl[i]=r,i=0;i<r.length;i++)Al.add(r[i])}var Nl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cl={},Il={};function lu(i){return Rt.call(Il,i)?!0:Rt.call(Cl,i)?!1:Nl.test(i)?Il[i]=!0:(Cl[i]=!0,!1)}function to(i,r,l){if(lu(r))if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+l)}}function Fn(i,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+l)}}function qt(i,r,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(r,l,""+d)}}function sn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Zi(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function kl(i,r,l){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,b=d.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return x.call(this)},set:function(S){l=""+S,b.call(this,S)}}),Object.defineProperty(i,r,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function ft(i){if(!i._valueTracker){var r=Zi(i)?"checked":"value";i._valueTracker=kl(i,r,""+i[r])}}function ra(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),d="";return i&&(d=Zi(i)?i.checked?"true":"false":i.value),i=d,i!==l?(r.setValue(i),!0):!1}function Ws(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var aa=/[\n"\\]/g;function Mn(i){return i.replace(aa,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function no(i,r,l,d,x,b,S,k){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),r!=null?S==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+sn(r)):i.value!==""+sn(r)&&(i.value=""+sn(r)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),r!=null?Rl(i,S,sn(r)):l!=null?Rl(i,S,sn(l)):d!=null&&i.removeAttribute("value"),x==null&&b!=null&&(i.defaultChecked=!!b),x!=null&&(i.checked=x&&typeof x!="function"&&typeof x!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.name=""+sn(k):i.removeAttribute("name")}function cu(i,r,l,d,x,b,S,k){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),r!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||r!=null)){ft(i);return}l=l!=null?""+sn(l):"",r=r!=null?""+sn(r):l,k||r===i.value||(i.value=r),i.defaultValue=r}d=d??x,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=k?i.checked:!!d,i.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),ft(i)}function Rl(i,r,l){r==="number"&&Ws(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function er(i,r,l,d){if(i=i.options,r){r={};for(var x=0;x<l.length;x++)r["$"+l[x]]=!0;for(l=0;l<i.length;l++)x=r.hasOwnProperty("$"+i[l].value),i[l].selected!==x&&(i[l].selected=x),x&&d&&(i[l].defaultSelected=!0)}else{for(l=""+sn(l),r=null,x=0;x<i.length;x++){if(i[x].value===l){i[x].selected=!0,d&&(i[x].defaultSelected=!0);return}r!==null||i[x].disabled||(r=i[x])}r!==null&&(r.selected=!0)}}function uu(i,r,l){if(r!=null&&(r=""+sn(r),r!==i.value&&(i.value=r),l==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=l!=null?""+sn(l):""}function tr(i,r,l,d){if(r==null){if(d!=null){if(l!=null)throw Error(s(92));if(Re(d)){if(1<d.length)throw Error(s(93));d=d[0]}l=d}l==null&&(l=""),r=l}l=sn(r),i.defaultValue=l,d=i.textContent,d===l&&d!==""&&d!==null&&(i.value=d),ft(i)}function Dn(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var du=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ml(i,r,l){var d=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":d?i.setProperty(r,l):typeof l!="number"||l===0||du.has(r)?r==="float"?i.cssFloat=l:i[r]=(""+l).trim():i[r]=l+"px"}function Dl(i,r,l){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var x in r)d=r[x],r.hasOwnProperty(x)&&l[x]!==d&&Ml(i,x,d)}else for(var b in r)r.hasOwnProperty(b)&&Ml(i,b,r[b])}function so(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function io(i){return nr.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ss(){}var Pl=null;function ns(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var sr=null,Xs=null;function oa(i){var r=ts(i);if(r&&(i=r.stateNode)){var l=i[nn]||null;e:switch(i=r.stateNode,r.type){case"input":if(no(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Mn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var d=l[r];if(d!==i&&d.form===i.form){var x=d[nn]||null;if(!x)throw Error(s(90));no(d,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(r=0;r<l.length;r++)d=l[r],d.form===i.form&&ra(d)}break e;case"textarea":uu(i,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&er(i,!!l.multiple,r,!1)}}}var ro=!1;function ir(i,r,l){if(ro)return i(r,l);ro=!0;try{var d=i(r);return d}finally{if(ro=!1,(sr!==null||Xs!==null)&&(rd(),sr&&(r=sr,i=Xs,Xs=sr=null,oa(r),i)))for(r=0;r<i.length;r++)oa(i[r])}}function As(i,r){var l=i.stateNode;if(l===null)return null;var d=l[nn]||null;if(d===null)return null;l=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(s(231,r,typeof l));return l}var ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),la=!1;if(ss)try{var pt={};Object.defineProperty(pt,"passive",{get:function(){la=!0}}),window.addEventListener("test",pt,pt),window.removeEventListener("test",pt,pt)}catch{la=!1}var Zs=null,Ll=null,ca=null;function Ul(){if(ca)return ca;var i,r=Ll,l=r.length,d,x="value"in Zs?Zs.value:Zs.textContent,b=x.length;for(i=0;i<l&&r[i]===x[i];i++);var S=l-i;for(d=1;d<=S&&r[l-d]===x[b-d];d++);return ca=x.slice(i,1<d?1-d:void 0)}function ua(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function xi(){return!0}function ws(){return!1}function cn(i){function r(l,d,x,b,S){this._reactName=l,this._targetInst=x,this.type=d,this.nativeEvent=b,this.target=S,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(l=i[k],this[k]=l?l(b):b[k]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?xi:ws,this.isPropagationStopped=ws,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=xi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=xi)},persist:function(){},isPersistent:xi}),r}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ei=cn(vi),rr=_({},vi,{view:0,detail:0}),Vl=cn(rr),ar,ao,ti,oo=_({},rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:or,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ti&&(ti&&i.type==="mousemove"?(ar=i.screenX-ti.screenX,ao=i.screenY-ti.screenY):ao=ar=0,ti=i),ar)},movementY:function(i){return"movementY"in i?i.movementY:ao}}),Ol=cn(oo),da=_({},oo,{dataTransfer:0}),hu=cn(da),mu=_({},rr,{relatedTarget:0}),fa=cn(mu),jl=_({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),pu=cn(jl),lo=_({},vi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),gu=cn(lo),yu=_({},vi,{data:0}),ni=cn(yu),xu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _u(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=bu[i])?!!r[i]:!1}function or(){return _u}var An=_({},rr,{key:function(i){if(i.key){var r=xu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=ua(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:or,charCode:function(i){return i.type==="keypress"?ua(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ua(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Tu=cn(An),Eu=_({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bi=cn(Eu),y=_({},rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:or}),E=cn(y),w=_({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),P=cn(w),Q=_({},oo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),se=cn(Q),ve=_({},vi,{newState:0,oldState:0}),He=cn(ve),Ot=[9,13,27,32],ot=ss&&"CompositionEvent"in window,It=null;ss&&"documentMode"in document&&(It=document.documentMode);var is=ss&&"TextEvent"in window&&!It,si=ss&&(!ot||It&&8<It&&11>=It),Ns=" ",Cs=!1;function ha(i,r){switch(i){case"keyup":return Ot.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function co(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var uo=!1;function wN(i,r){switch(i){case"compositionend":return co(r);case"keypress":return r.which!==32?null:(Cs=!0,Ns);case"textInput":return i=r.data,i===Ns&&Cs?null:i;default:return null}}function NN(i,r){if(uo)return i==="compositionend"||!ot&&ha(i,r)?(i=Ul(),ca=Ll=Zs=null,uo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return si&&r.locale!=="ko"?null:r.data;default:return null}}var CN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D0(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!CN[i.type]:r==="textarea"}function P0(i,r,l,d){sr?Xs?Xs.push(d):Xs=[d]:sr=d,r=fd(r,"onChange"),0<r.length&&(l=new ei("onChange","change",null,l,d),i.push({event:l,listeners:r}))}var Gl=null,Bl=null;function IN(i){gv(i,0)}function Su(i){var r=zn(i);if(ra(r))return i}function L0(i,r){if(i==="change")return r}var U0=!1;if(ss){var fh;if(ss){var hh="oninput"in document;if(!hh){var V0=document.createElement("div");V0.setAttribute("oninput","return;"),hh=typeof V0.oninput=="function"}fh=hh}else fh=!1;U0=fh&&(!document.documentMode||9<document.documentMode)}function O0(){Gl&&(Gl.detachEvent("onpropertychange",j0),Bl=Gl=null)}function j0(i){if(i.propertyName==="value"&&Su(Bl)){var r=[];P0(r,Bl,i,ns(i)),ir(IN,r)}}function kN(i,r,l){i==="focusin"?(O0(),Gl=r,Bl=l,Gl.attachEvent("onpropertychange",j0)):i==="focusout"&&O0()}function RN(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Su(Bl)}function MN(i,r){if(i==="click")return Su(r)}function DN(i,r){if(i==="input"||i==="change")return Su(r)}function PN(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var qn=typeof Object.is=="function"?Object.is:PN;function Hl(i,r){if(qn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),d=Object.keys(r);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var x=l[d];if(!Rt.call(r,x)||!qn(i[x],r[x]))return!1}return!0}function G0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function B0(i,r){var l=G0(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=r&&d>=r)return{node:l,offset:r-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=G0(l)}}function H0(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?H0(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function z0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Ws(i.document);r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=Ws(i.document)}return r}function mh(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var LN=ss&&"documentMode"in document&&11>=document.documentMode,fo=null,ph=null,zl=null,gh=!1;function F0(i,r,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;gh||fo==null||fo!==Ws(d)||(d=fo,"selectionStart"in d&&mh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),zl&&Hl(zl,d)||(zl=d,d=fd(ph,"onSelect"),0<d.length&&(r=new ei("onSelect","select",null,r,l),i.push({event:r,listeners:d}),r.target=fo)))}function ma(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var ho={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionrun:ma("Transition","TransitionRun"),transitionstart:ma("Transition","TransitionStart"),transitioncancel:ma("Transition","TransitionCancel"),transitionend:ma("Transition","TransitionEnd")},yh={},q0={};ss&&(q0=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function pa(i){if(yh[i])return yh[i];if(!ho[i])return i;var r=ho[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in q0)return yh[i]=r[l];return i}var K0=pa("animationend"),$0=pa("animationiteration"),Y0=pa("animationstart"),UN=pa("transitionrun"),VN=pa("transitionstart"),ON=pa("transitioncancel"),J0=pa("transitionend"),Q0=new Map,xh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xh.push("scrollEnd");function Is(i,r){Q0.set(i,r),Js(r,[i])}var Au=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},rs=[],mo=0,vh=0;function wu(){for(var i=mo,r=vh=mo=0;r<i;){var l=rs[r];rs[r++]=null;var d=rs[r];rs[r++]=null;var x=rs[r];rs[r++]=null;var b=rs[r];if(rs[r++]=null,d!==null&&x!==null){var S=d.pending;S===null?x.next=x:(x.next=S.next,S.next=x),d.pending=x}b!==0&&W0(l,x,b)}}function Nu(i,r,l,d){rs[mo++]=i,rs[mo++]=r,rs[mo++]=l,rs[mo++]=d,vh|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function bh(i,r,l,d){return Nu(i,r,l,d),Cu(i)}function ga(i,r){return Nu(i,null,null,r),Cu(i)}function W0(i,r,l){i.lanes|=l;var d=i.alternate;d!==null&&(d.lanes|=l);for(var x=!1,b=i.return;b!==null;)b.childLanes|=l,d=b.alternate,d!==null&&(d.childLanes|=l),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(x=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,x&&r!==null&&(x=31-Mt(l),i=b.hiddenUpdates,d=i[x],d===null?i[x]=[r]:d.push(r),r.lane=l|536870912),b):null}function Cu(i){if(50<dc)throw dc=0,Im=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var po={};function jN(i,r,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(i,r,l,d){return new jN(i,r,l,d)}function _h(i){return i=i.prototype,!(!i||!i.isReactComponent)}function _i(i,r){var l=i.alternate;return l===null?(l=Kn(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function X0(i,r){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,r=l.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Iu(i,r,l,d,x,b){var S=0;if(d=i,typeof i=="function")_h(i)&&(S=1);else if(typeof i=="string")S=F1(i,l,K.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=Kn(31,l,r,x),i.elementType=R,i.lanes=b,i;case C:return ya(l.children,x,b,r);case I:S=8,x|=24;break;case j:return i=Kn(12,l,r,x|2),i.elementType=j,i.lanes=b,i;case re:return i=Kn(13,l,r,x),i.elementType=re,i.lanes=b,i;case oe:return i=Kn(19,l,r,x),i.elementType=oe,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case G:S=10;break e;case L:S=9;break e;case ee:S=11;break e;case M:S=14;break e;case D:S=16,d=null;break e}S=29,l=Error(s(130,i===null?"null":typeof i,"")),d=null}return r=Kn(S,l,r,x),r.elementType=i,r.type=d,r.lanes=b,r}function ya(i,r,l,d){return i=Kn(7,i,d,r),i.lanes=l,i}function Th(i,r,l){return i=Kn(6,i,null,r),i.lanes=l,i}function Z0(i){var r=Kn(18,null,null,0);return r.stateNode=i,r}function Eh(i,r,l){return r=Kn(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var ey=new WeakMap;function as(i,r){if(typeof i=="object"&&i!==null){var l=ey.get(i);return l!==void 0?l:(r={value:i,source:r,stack:Bn(r)},ey.set(i,r),r)}return{value:i,source:r,stack:Bn(r)}}var go=[],yo=0,ku=null,Fl=0,os=[],ls=0,lr=null,ii=1,ri="";function Ti(i,r){go[yo++]=Fl,go[yo++]=ku,ku=i,Fl=r}function ty(i,r,l){os[ls++]=ii,os[ls++]=ri,os[ls++]=lr,lr=i;var d=ii;i=ri;var x=32-Mt(d)-1;d&=~(1<<x),l+=1;var b=32-Mt(r)+x;if(30<b){var S=x-x%5;b=(d&(1<<S)-1).toString(32),d>>=S,x-=S,ii=1<<32-Mt(r)+x|l<<x|d,ri=b+i}else ii=1<<b|l<<x|d,ri=i}function Sh(i){i.return!==null&&(Ti(i,1),ty(i,1,0))}function Ah(i){for(;i===ku;)ku=go[--yo],go[yo]=null,Fl=go[--yo],go[yo]=null;for(;i===lr;)lr=os[--ls],os[ls]=null,ri=os[--ls],os[ls]=null,ii=os[--ls],os[ls]=null}function ny(i,r){os[ls++]=ii,os[ls++]=ri,os[ls++]=lr,ii=r.id,ri=r.overflow,lr=i}var un=null,St=null,nt=!1,cr=null,cs=!1,wh=Error(s(519));function ur(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ql(as(r,i)),wh}function sy(i){var r=i.stateNode,l=i.type,d=i.memoizedProps;switch(r[zt]=i,r[nn]=d,l){case"dialog":Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":case"embed":Ye("load",r);break;case"video":case"audio":for(l=0;l<hc.length;l++)Ye(hc[l],r);break;case"source":Ye("error",r);break;case"img":case"image":case"link":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"input":Ye("invalid",r),cu(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Ye("invalid",r);break;case"textarea":Ye("invalid",r),tr(r,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||d.suppressHydrationWarning===!0||bv(r.textContent,l)?(d.popover!=null&&(Ye("beforetoggle",r),Ye("toggle",r)),d.onScroll!=null&&Ye("scroll",r),d.onScrollEnd!=null&&Ye("scrollend",r),d.onClick!=null&&(r.onclick=Ss),r=!0):r=!1,r||ur(i,!0)}function iy(i){for(un=i.return;un;)switch(un.tag){case 5:case 31:case 13:cs=!1;return;case 27:case 3:cs=!0;return;default:un=un.return}}function xo(i){if(i!==un)return!1;if(!nt)return iy(i),nt=!0,!1;var r=i.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Fm(i.type,i.memoizedProps)),l=!l),l&&St&&ur(i),iy(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));St=Iv(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));St=Iv(i)}else r===27?(r=St,Sr(i.type)?(i=Jm,Jm=null,St=i):St=r):St=un?ds(i.stateNode.nextSibling):null;return!0}function xa(){St=un=null,nt=!1}function Nh(){var i=cr;return i!==null&&(Vn===null?Vn=i:Vn.push.apply(Vn,i),cr=null),i}function ql(i){cr===null?cr=[i]:cr.push(i)}var Ch=H(null),va=null,Ei=null;function dr(i,r,l){Z(Ch,r._currentValue),r._currentValue=l}function Si(i){i._currentValue=Ch.current,ne(Ch)}function Ih(i,r,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),i===l)break;i=i.return}}function kh(i,r,l,d){var x=i.child;for(x!==null&&(x.return=i);x!==null;){var b=x.dependencies;if(b!==null){var S=x.child;b=b.firstContext;e:for(;b!==null;){var k=b;b=x;for(var z=0;z<r.length;z++)if(k.context===r[z]){b.lanes|=l,k=b.alternate,k!==null&&(k.lanes|=l),Ih(b.return,l,i),d||(S=null);break e}b=k.next}}else if(x.tag===18){if(S=x.return,S===null)throw Error(s(341));S.lanes|=l,b=S.alternate,b!==null&&(b.lanes|=l),Ih(S,l,i),S=null}else S=x.child;if(S!==null)S.return=x;else for(S=x;S!==null;){if(S===i){S=null;break}if(x=S.sibling,x!==null){x.return=S.return,S=x;break}S=S.return}x=S}}function vo(i,r,l,d){i=null;for(var x=r,b=!1;x!==null;){if(!b){if((x.flags&524288)!==0)b=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var S=x.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var k=x.type;qn(x.pendingProps.value,S.value)||(i!==null?i.push(k):i=[k])}}else if(x===ye.current){if(S=x.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(i!==null?i.push(xc):i=[xc])}x=x.return}i!==null&&kh(r,i,l,d),r.flags|=262144}function Ru(i){for(i=i.firstContext;i!==null;){if(!qn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ba(i){va=i,Ei=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function dn(i){return ry(va,i)}function Mu(i,r){return va===null&&ba(i),ry(i,r)}function ry(i,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Ei===null){if(i===null)throw Error(s(308));Ei=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Ei=Ei.next=r;return l}var GN=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(l,d){i.push(d)}};this.abort=function(){r.aborted=!0,i.forEach(function(l){return l()})}},BN=n.unstable_scheduleCallback,HN=n.unstable_NormalPriority,Kt={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rh(){return{controller:new GN,data:new Map,refCount:0}}function Kl(i){i.refCount--,i.refCount===0&&BN(HN,function(){i.controller.abort()})}var $l=null,Mh=0,bo=0,_o=null;function zN(i,r){if($l===null){var l=$l=[];Mh=0,bo=Lm(),_o={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Mh++,r.then(ay,ay),r}function ay(){if(--Mh===0&&$l!==null){_o!==null&&(_o.status="fulfilled");var i=$l;$l=null,bo=0,_o=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function FN(i,r){var l=[],d={status:"pending",value:null,reason:null,then:function(x){l.push(x)}};return i.then(function(){d.status="fulfilled",d.value=r;for(var x=0;x<l.length;x++)(0,l[x])(r)},function(x){for(d.status="rejected",d.reason=x,x=0;x<l.length;x++)(0,l[x])(void 0)}),d}var oy=J.S;J.S=function(i,r){Fx=ln(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&zN(i,r),oy!==null&&oy(i,r)};var _a=H(null);function Dh(){var i=_a.current;return i!==null?i:_t.pooledCache}function Du(i,r){r===null?Z(_a,_a.current):Z(_a,r.pool)}function ly(){var i=Dh();return i===null?null:{parent:Kt._currentValue,pool:i}}var To=Error(s(460)),Ph=Error(s(474)),Pu=Error(s(542)),Lu={then:function(){}};function cy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function uy(i,r,l){switch(l=i[l],l===void 0?i.push(r):l!==r&&(r.then(Ss,Ss),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,fy(i),i;default:if(typeof r.status=="string")r.then(Ss,Ss);else{if(i=_t,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(d){if(r.status==="pending"){var x=r;x.status="fulfilled",x.value=d}},function(d){if(r.status==="pending"){var x=r;x.status="rejected",x.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,fy(i),i}throw Ea=r,To}}function Ta(i){try{var r=i._init;return r(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ea=l,To):l}}var Ea=null;function dy(){if(Ea===null)throw Error(s(459));var i=Ea;return Ea=null,i}function fy(i){if(i===To||i===Pu)throw Error(s(483))}var Eo=null,Yl=0;function Uu(i){var r=Yl;return Yl+=1,Eo===null&&(Eo=[]),uy(Eo,i,r)}function Jl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Vu(i,r){throw r.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function hy(i){function r(Y,q){if(i){var W=Y.deletions;W===null?(Y.deletions=[q],Y.flags|=16):W.push(q)}}function l(Y,q){if(!i)return null;for(;q!==null;)r(Y,q),q=q.sibling;return null}function d(Y){for(var q=new Map;Y!==null;)Y.key!==null?q.set(Y.key,Y):q.set(Y.index,Y),Y=Y.sibling;return q}function x(Y,q){return Y=_i(Y,q),Y.index=0,Y.sibling=null,Y}function b(Y,q,W){return Y.index=W,i?(W=Y.alternate,W!==null?(W=W.index,W<q?(Y.flags|=67108866,q):W):(Y.flags|=67108866,q)):(Y.flags|=1048576,q)}function S(Y){return i&&Y.alternate===null&&(Y.flags|=67108866),Y}function k(Y,q,W,ue){return q===null||q.tag!==6?(q=Th(W,Y.mode,ue),q.return=Y,q):(q=x(q,W),q.return=Y,q)}function z(Y,q,W,ue){var Me=W.type;return Me===C?ae(Y,q,W.props.children,ue,W.key):q!==null&&(q.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===D&&Ta(Me)===q.type)?(q=x(q,W.props),Jl(q,W),q.return=Y,q):(q=Iu(W.type,W.key,W.props,null,Y.mode,ue),Jl(q,W),q.return=Y,q)}function X(Y,q,W,ue){return q===null||q.tag!==4||q.stateNode.containerInfo!==W.containerInfo||q.stateNode.implementation!==W.implementation?(q=Eh(W,Y.mode,ue),q.return=Y,q):(q=x(q,W.children||[]),q.return=Y,q)}function ae(Y,q,W,ue,Me){return q===null||q.tag!==7?(q=ya(W,Y.mode,ue,Me),q.return=Y,q):(q=x(q,W),q.return=Y,q)}function fe(Y,q,W){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Th(""+q,Y.mode,W),q.return=Y,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return W=Iu(q.type,q.key,q.props,null,Y.mode,W),Jl(W,q),W.return=Y,W;case N:return q=Eh(q,Y.mode,W),q.return=Y,q;case D:return q=Ta(q),fe(Y,q,W)}if(Re(q)||B(q))return q=ya(q,Y.mode,W,null),q.return=Y,q;if(typeof q.then=="function")return fe(Y,Uu(q),W);if(q.$$typeof===G)return fe(Y,Mu(Y,q),W);Vu(Y,q)}return null}function te(Y,q,W,ue){var Me=q!==null?q.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Me!==null?null:k(Y,q,""+W,ue);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case A:return W.key===Me?z(Y,q,W,ue):null;case N:return W.key===Me?X(Y,q,W,ue):null;case D:return W=Ta(W),te(Y,q,W,ue)}if(Re(W)||B(W))return Me!==null?null:ae(Y,q,W,ue,null);if(typeof W.then=="function")return te(Y,q,Uu(W),ue);if(W.$$typeof===G)return te(Y,q,Mu(Y,W),ue);Vu(Y,W)}return null}function ie(Y,q,W,ue,Me){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Y=Y.get(W)||null,k(q,Y,""+ue,Me);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case A:return Y=Y.get(ue.key===null?W:ue.key)||null,z(q,Y,ue,Me);case N:return Y=Y.get(ue.key===null?W:ue.key)||null,X(q,Y,ue,Me);case D:return ue=Ta(ue),ie(Y,q,W,ue,Me)}if(Re(ue)||B(ue))return Y=Y.get(W)||null,ae(q,Y,ue,Me,null);if(typeof ue.then=="function")return ie(Y,q,W,Uu(ue),Me);if(ue.$$typeof===G)return ie(Y,q,W,Mu(q,ue),Me);Vu(q,ue)}return null}function Ne(Y,q,W,ue){for(var Me=null,it=null,Ie=q,Fe=q=0,Qe=null;Ie!==null&&Fe<W.length;Fe++){Ie.index>Fe?(Qe=Ie,Ie=null):Qe=Ie.sibling;var rt=te(Y,Ie,W[Fe],ue);if(rt===null){Ie===null&&(Ie=Qe);break}i&&Ie&&rt.alternate===null&&r(Y,Ie),q=b(rt,q,Fe),it===null?Me=rt:it.sibling=rt,it=rt,Ie=Qe}if(Fe===W.length)return l(Y,Ie),nt&&Ti(Y,Fe),Me;if(Ie===null){for(;Fe<W.length;Fe++)Ie=fe(Y,W[Fe],ue),Ie!==null&&(q=b(Ie,q,Fe),it===null?Me=Ie:it.sibling=Ie,it=Ie);return nt&&Ti(Y,Fe),Me}for(Ie=d(Ie);Fe<W.length;Fe++)Qe=ie(Ie,Y,Fe,W[Fe],ue),Qe!==null&&(i&&Qe.alternate!==null&&Ie.delete(Qe.key===null?Fe:Qe.key),q=b(Qe,q,Fe),it===null?Me=Qe:it.sibling=Qe,it=Qe);return i&&Ie.forEach(function(Ir){return r(Y,Ir)}),nt&&Ti(Y,Fe),Me}function Le(Y,q,W,ue){if(W==null)throw Error(s(151));for(var Me=null,it=null,Ie=q,Fe=q=0,Qe=null,rt=W.next();Ie!==null&&!rt.done;Fe++,rt=W.next()){Ie.index>Fe?(Qe=Ie,Ie=null):Qe=Ie.sibling;var Ir=te(Y,Ie,rt.value,ue);if(Ir===null){Ie===null&&(Ie=Qe);break}i&&Ie&&Ir.alternate===null&&r(Y,Ie),q=b(Ir,q,Fe),it===null?Me=Ir:it.sibling=Ir,it=Ir,Ie=Qe}if(rt.done)return l(Y,Ie),nt&&Ti(Y,Fe),Me;if(Ie===null){for(;!rt.done;Fe++,rt=W.next())rt=fe(Y,rt.value,ue),rt!==null&&(q=b(rt,q,Fe),it===null?Me=rt:it.sibling=rt,it=rt);return nt&&Ti(Y,Fe),Me}for(Ie=d(Ie);!rt.done;Fe++,rt=W.next())rt=ie(Ie,Y,Fe,rt.value,ue),rt!==null&&(i&&rt.alternate!==null&&Ie.delete(rt.key===null?Fe:rt.key),q=b(rt,q,Fe),it===null?Me=rt:it.sibling=rt,it=rt);return i&&Ie.forEach(function(tC){return r(Y,tC)}),nt&&Ti(Y,Fe),Me}function xt(Y,q,W,ue){if(typeof W=="object"&&W!==null&&W.type===C&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case A:e:{for(var Me=W.key;q!==null;){if(q.key===Me){if(Me=W.type,Me===C){if(q.tag===7){l(Y,q.sibling),ue=x(q,W.props.children),ue.return=Y,Y=ue;break e}}else if(q.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===D&&Ta(Me)===q.type){l(Y,q.sibling),ue=x(q,W.props),Jl(ue,W),ue.return=Y,Y=ue;break e}l(Y,q);break}else r(Y,q);q=q.sibling}W.type===C?(ue=ya(W.props.children,Y.mode,ue,W.key),ue.return=Y,Y=ue):(ue=Iu(W.type,W.key,W.props,null,Y.mode,ue),Jl(ue,W),ue.return=Y,Y=ue)}return S(Y);case N:e:{for(Me=W.key;q!==null;){if(q.key===Me)if(q.tag===4&&q.stateNode.containerInfo===W.containerInfo&&q.stateNode.implementation===W.implementation){l(Y,q.sibling),ue=x(q,W.children||[]),ue.return=Y,Y=ue;break e}else{l(Y,q);break}else r(Y,q);q=q.sibling}ue=Eh(W,Y.mode,ue),ue.return=Y,Y=ue}return S(Y);case D:return W=Ta(W),xt(Y,q,W,ue)}if(Re(W))return Ne(Y,q,W,ue);if(B(W)){if(Me=B(W),typeof Me!="function")throw Error(s(150));return W=Me.call(W),Le(Y,q,W,ue)}if(typeof W.then=="function")return xt(Y,q,Uu(W),ue);if(W.$$typeof===G)return xt(Y,q,Mu(Y,W),ue);Vu(Y,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,q!==null&&q.tag===6?(l(Y,q.sibling),ue=x(q,W),ue.return=Y,Y=ue):(l(Y,q),ue=Th(W,Y.mode,ue),ue.return=Y,Y=ue),S(Y)):l(Y,q)}return function(Y,q,W,ue){try{Yl=0;var Me=xt(Y,q,W,ue);return Eo=null,Me}catch(Ie){if(Ie===To||Ie===Pu)throw Ie;var it=Kn(29,Ie,null,Y.mode);return it.lanes=ue,it.return=Y,it}finally{}}}var Sa=hy(!0),my=hy(!1),fr=!1;function Lh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uh(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function hr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function mr(i,r,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(lt&2)!==0){var x=d.pending;return x===null?r.next=r:(r.next=x.next,x.next=r),d.pending=r,r=Cu(i),W0(i,null,l),r}return Nu(i,d,r,l),Cu(i)}function Ql(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var d=r.lanes;d&=i.pendingLanes,l|=d,r.lanes=l,El(i,l)}}function Vh(i,r){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var x=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?x=b=S:b=b.next=S,l=l.next}while(l!==null);b===null?x=b=r:b=b.next=r}else x=b=r;l={baseState:d.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}var Oh=!1;function Wl(){if(Oh){var i=_o;if(i!==null)throw i}}function Xl(i,r,l,d){Oh=!1;var x=i.updateQueue;fr=!1;var b=x.firstBaseUpdate,S=x.lastBaseUpdate,k=x.shared.pending;if(k!==null){x.shared.pending=null;var z=k,X=z.next;z.next=null,S===null?b=X:S.next=X,S=z;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,k=ae.lastBaseUpdate,k!==S&&(k===null?ae.firstBaseUpdate=X:k.next=X,ae.lastBaseUpdate=z))}if(b!==null){var fe=x.baseState;S=0,ae=X=z=null,k=b;do{var te=k.lane&-536870913,ie=te!==k.lane;if(ie?(Je&te)===te:(d&te)===te){te!==0&&te===bo&&(Oh=!0),ae!==null&&(ae=ae.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ne=i,Le=k;te=r;var xt=l;switch(Le.tag){case 1:if(Ne=Le.payload,typeof Ne=="function"){fe=Ne.call(xt,fe,te);break e}fe=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Le.payload,te=typeof Ne=="function"?Ne.call(xt,fe,te):Ne,te==null)break e;fe=_({},fe,te);break e;case 2:fr=!0}}te=k.callback,te!==null&&(i.flags|=64,ie&&(i.flags|=8192),ie=x.callbacks,ie===null?x.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ae===null?(X=ae=ie,z=fe):ae=ae.next=ie,S|=te;if(k=k.next,k===null){if(k=x.shared.pending,k===null)break;ie=k,k=ie.next,ie.next=null,x.lastBaseUpdate=ie,x.shared.pending=null}}while(!0);ae===null&&(z=fe),x.baseState=z,x.firstBaseUpdate=X,x.lastBaseUpdate=ae,b===null&&(x.shared.lanes=0),vr|=S,i.lanes=S,i.memoizedState=fe}}function py(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function gy(i,r){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)py(l[i],r)}var So=H(null),Ou=H(0);function yy(i,r){i=Di,Z(Ou,i),Z(So,r),Di=i|r.baseLanes}function jh(){Z(Ou,Di),Z(So,So.current)}function Gh(){Di=Ou.current,ne(So),ne(Ou)}var $n=H(null),us=null;function pr(i){var r=i.alternate;Z(jt,jt.current&1),Z($n,i),us===null&&(r===null||So.current!==null||r.memoizedState!==null)&&(us=i)}function Bh(i){Z(jt,jt.current),Z($n,i),us===null&&(us=i)}function xy(i){i.tag===22?(Z(jt,jt.current),Z($n,i),us===null&&(us=i)):gr()}function gr(){Z(jt,jt.current),Z($n,$n.current)}function Yn(i){ne($n),us===i&&(us=null),ne(jt)}var jt=H(0);function ju(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||$m(l)||Ym(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ai=0,ze=null,gt=null,$t=null,Gu=!1,Ao=!1,Aa=!1,Bu=0,Zl=0,wo=null,qN=0;function Pt(){throw Error(s(321))}function Hh(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!qn(i[l],r[l]))return!1;return!0}function zh(i,r,l,d,x,b){return Ai=b,ze=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=i===null||i.memoizedState===null?tx:im,Aa=!1,b=l(d,x),Aa=!1,Ao&&(b=by(r,l,d,x)),vy(i),b}function vy(i){J.H=nc;var r=gt!==null&&gt.next!==null;if(Ai=0,$t=gt=ze=null,Gu=!1,Zl=0,wo=null,r)throw Error(s(300));i===null||Yt||(i=i.dependencies,i!==null&&Ru(i)&&(Yt=!0))}function by(i,r,l,d){ze=i;var x=0;do{if(Ao&&(wo=null),Zl=0,Ao=!1,25<=x)throw Error(s(301));if(x+=1,$t=gt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}J.H=nx,b=r(l,d)}while(Ao);return b}function KN(){var i=J.H,r=i.useState()[0];return r=typeof r.then=="function"?ec(r):r,i=i.useState()[0],(gt!==null?gt.memoizedState:null)!==i&&(ze.flags|=1024),r}function Fh(){var i=Bu!==0;return Bu=0,i}function qh(i,r,l){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~l}function Kh(i){if(Gu){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Gu=!1}Ai=0,$t=gt=ze=null,Ao=!1,Zl=Bu=0,wo=null}function wn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?ze.memoizedState=$t=i:$t=$t.next=i,$t}function Gt(){if(gt===null){var i=ze.alternate;i=i!==null?i.memoizedState:null}else i=gt.next;var r=$t===null?ze.memoizedState:$t.next;if(r!==null)$t=r,gt=i;else{if(i===null)throw ze.alternate===null?Error(s(467)):Error(s(310));gt=i,i={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},$t===null?ze.memoizedState=$t=i:$t=$t.next=i}return $t}function Hu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ec(i){var r=Zl;return Zl+=1,wo===null&&(wo=[]),i=uy(wo,i,r),r=ze,($t===null?r.memoizedState:$t.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?tx:im),i}function zu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ec(i);if(i.$$typeof===G)return dn(i)}throw Error(s(438,String(i)))}function $h(i){var r=null,l=ze.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var d=ze.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(x){return x.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Hu(),ze.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(i),d=0;d<i;d++)l[d]=O;return r.index++,l}function wi(i,r){return typeof r=="function"?r(i):r}function Fu(i){var r=Gt();return Yh(r,gt,i)}function Yh(i,r,l){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=l;var x=i.baseQueue,b=d.pending;if(b!==null){if(x!==null){var S=x.next;x.next=b.next,b.next=S}r.baseQueue=x=b,d.pending=null}if(b=i.baseState,x===null)i.memoizedState=b;else{r=x.next;var k=S=null,z=null,X=r,ae=!1;do{var fe=X.lane&-536870913;if(fe!==X.lane?(Je&fe)===fe:(Ai&fe)===fe){var te=X.revertLane;if(te===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),fe===bo&&(ae=!0);else if((Ai&te)===te){X=X.next,te===bo&&(ae=!0);continue}else fe={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},z===null?(k=z=fe,S=b):z=z.next=fe,ze.lanes|=te,vr|=te;fe=X.action,Aa&&l(b,fe),b=X.hasEagerState?X.eagerState:l(b,fe)}else te={lane:fe,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},z===null?(k=z=te,S=b):z=z.next=te,ze.lanes|=fe,vr|=fe;X=X.next}while(X!==null&&X!==r);if(z===null?S=b:z.next=k,!qn(b,i.memoizedState)&&(Yt=!0,ae&&(l=_o,l!==null)))throw l;i.memoizedState=b,i.baseState=S,i.baseQueue=z,d.lastRenderedState=b}return x===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Jh(i){var r=Gt(),l=r.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var d=l.dispatch,x=l.pending,b=r.memoizedState;if(x!==null){l.pending=null;var S=x=x.next;do b=i(b,S.action),S=S.next;while(S!==x);qn(b,r.memoizedState)||(Yt=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),l.lastRenderedState=b}return[b,d]}function _y(i,r,l){var d=ze,x=Gt(),b=nt;if(b){if(l===void 0)throw Error(s(407));l=l()}else l=r();var S=!qn((gt||x).memoizedState,l);if(S&&(x.memoizedState=l,Yt=!0),x=x.queue,Xh(Sy.bind(null,d,x,i),[i]),x.getSnapshot!==r||S||$t!==null&&$t.memoizedState.tag&1){if(d.flags|=2048,No(9,{destroy:void 0},Ey.bind(null,d,x,l,r),null),_t===null)throw Error(s(349));b||(Ai&127)!==0||Ty(d,r,l)}return l}function Ty(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=ze.updateQueue,r===null?(r=Hu(),ze.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function Ey(i,r,l,d){r.value=l,r.getSnapshot=d,Ay(r)&&wy(i)}function Sy(i,r,l){return l(function(){Ay(r)&&wy(i)})}function Ay(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!qn(i,l)}catch{return!0}}function wy(i){var r=ga(i,2);r!==null&&On(r,i,2)}function Qh(i){var r=wn();if(typeof i=="function"){var l=i;if(i=l(),Aa){Rn(!0);try{l()}finally{Rn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:i},r}function Ny(i,r,l,d){return i.baseState=l,Yh(i,gt,typeof d=="function"?d:wi)}function $N(i,r,l,d,x){if($u(i))throw Error(s(485));if(i=r.action,i!==null){var b={payload:x,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){b.listeners.push(S)}};J.T!==null?l(!0):b.isTransition=!1,d(b),l=r.pending,l===null?(b.next=r.pending=b,Cy(r,b)):(b.next=l.next,r.pending=l.next=b)}}function Cy(i,r){var l=r.action,d=r.payload,x=i.state;if(r.isTransition){var b=J.T,S={};J.T=S;try{var k=l(x,d),z=J.S;z!==null&&z(S,k),Iy(i,r,k)}catch(X){Wh(i,r,X)}finally{b!==null&&S.types!==null&&(b.types=S.types),J.T=b}}else try{b=l(x,d),Iy(i,r,b)}catch(X){Wh(i,r,X)}}function Iy(i,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){ky(i,r,d)},function(d){return Wh(i,r,d)}):ky(i,r,l)}function ky(i,r,l){r.status="fulfilled",r.value=l,Ry(r),i.state=l,r=i.pending,r!==null&&(l=r.next,l===r?i.pending=null:(l=l.next,r.next=l,Cy(i,l)))}function Wh(i,r,l){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=l,Ry(r),r=r.next;while(r!==d)}i.action=null}function Ry(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function My(i,r){return r}function Dy(i,r){if(nt){var l=_t.formState;if(l!==null){e:{var d=ze;if(nt){if(St){t:{for(var x=St,b=cs;x.nodeType!==8;){if(!b){x=null;break t}if(x=ds(x.nextSibling),x===null){x=null;break t}}b=x.data,x=b==="F!"||b==="F"?x:null}if(x){St=ds(x.nextSibling),d=x.data==="F!";break e}}ur(d)}d=!1}d&&(r=l[0])}}return l=wn(),l.memoizedState=l.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:My,lastRenderedState:r},l.queue=d,l=Xy.bind(null,ze,d),d.dispatch=l,d=Qh(!1),b=sm.bind(null,ze,!1,d.queue),d=wn(),x={state:r,dispatch:null,action:i,pending:null},d.queue=x,l=$N.bind(null,ze,x,b,l),x.dispatch=l,d.memoizedState=i,[r,l,!1]}function Py(i){var r=Gt();return Ly(r,gt,i)}function Ly(i,r,l){if(r=Yh(i,r,My)[0],i=Fu(wi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=ec(r)}catch(S){throw S===To?Pu:S}else d=r;r=Gt();var x=r.queue,b=x.dispatch;return l!==r.memoizedState&&(ze.flags|=2048,No(9,{destroy:void 0},YN.bind(null,x,l),null)),[d,b,i]}function YN(i,r){i.action=r}function Uy(i){var r=Gt(),l=gt;if(l!==null)return Ly(r,l,i);Gt(),r=r.memoizedState,l=Gt();var d=l.queue.dispatch;return l.memoizedState=i,[r,d,!1]}function No(i,r,l,d){return i={tag:i,create:l,deps:d,inst:r,next:null},r=ze.updateQueue,r===null&&(r=Hu(),ze.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,r.lastEffect=i),i}function Vy(){return Gt().memoizedState}function qu(i,r,l,d){var x=wn();ze.flags|=i,x.memoizedState=No(1|r,{destroy:void 0},l,d===void 0?null:d)}function Ku(i,r,l,d){var x=Gt();d=d===void 0?null:d;var b=x.memoizedState.inst;gt!==null&&d!==null&&Hh(d,gt.memoizedState.deps)?x.memoizedState=No(r,b,l,d):(ze.flags|=i,x.memoizedState=No(1|r,b,l,d))}function Oy(i,r){qu(8390656,8,i,r)}function Xh(i,r){Ku(2048,8,i,r)}function JN(i){ze.flags|=4;var r=ze.updateQueue;if(r===null)r=Hu(),ze.updateQueue=r,r.events=[i];else{var l=r.events;l===null?r.events=[i]:l.push(i)}}function jy(i){var r=Gt().memoizedState;return JN({ref:r,nextImpl:i}),function(){if((lt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Gy(i,r){return Ku(4,2,i,r)}function By(i,r){return Ku(4,4,i,r)}function Hy(i,r){if(typeof r=="function"){i=i();var l=r(i);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function zy(i,r,l){l=l!=null?l.concat([i]):null,Ku(4,4,Hy.bind(null,r,i),l)}function Zh(){}function Fy(i,r){var l=Gt();r=r===void 0?null:r;var d=l.memoizedState;return r!==null&&Hh(r,d[1])?d[0]:(l.memoizedState=[i,r],i)}function qy(i,r){var l=Gt();r=r===void 0?null:r;var d=l.memoizedState;if(r!==null&&Hh(r,d[1]))return d[0];if(d=i(),Aa){Rn(!0);try{i()}finally{Rn(!1)}}return l.memoizedState=[d,r],d}function em(i,r,l){return l===void 0||(Ai&1073741824)!==0&&(Je&261930)===0?i.memoizedState=r:(i.memoizedState=l,i=Kx(),ze.lanes|=i,vr|=i,l)}function Ky(i,r,l,d){return qn(l,r)?l:So.current!==null?(i=em(i,l,d),qn(i,r)||(Yt=!0),i):(Ai&42)===0||(Ai&1073741824)!==0&&(Je&261930)===0?(Yt=!0,i.memoizedState=l):(i=Kx(),ze.lanes|=i,vr|=i,r)}function $y(i,r,l,d,x){var b=he.p;he.p=b!==0&&8>b?b:8;var S=J.T,k={};J.T=k,sm(i,!1,r,l);try{var z=x(),X=J.S;if(X!==null&&X(k,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ae=FN(z,d);tc(i,r,ae,Wn(i))}else tc(i,r,d,Wn(i))}catch(fe){tc(i,r,{then:function(){},status:"rejected",reason:fe},Wn())}finally{he.p=b,S!==null&&k.types!==null&&(S.types=k.types),J.T=S}}function QN(){}function tm(i,r,l,d){if(i.tag!==5)throw Error(s(476));var x=Yy(i).queue;$y(i,x,r,be,l===null?QN:function(){return Jy(i),l(d)})}function Yy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:be},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:l},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Jy(i){var r=Yy(i);r.next===null&&(r=i.alternate.memoizedState),tc(i,r.next.queue,{},Wn())}function nm(){return dn(xc)}function Qy(){return Gt().memoizedState}function Wy(){return Gt().memoizedState}function WN(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var l=Wn();i=hr(l);var d=mr(r,i,l);d!==null&&(On(d,r,l),Ql(d,r,l)),r={cache:Rh()},i.payload=r;return}r=r.return}}function XN(i,r,l){var d=Wn();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},$u(i)?Zy(r,l):(l=bh(i,r,l,d),l!==null&&(On(l,i,d),ex(l,r,d)))}function Xy(i,r,l){var d=Wn();tc(i,r,l,d)}function tc(i,r,l,d){var x={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if($u(i))Zy(r,x);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var S=r.lastRenderedState,k=b(S,l);if(x.hasEagerState=!0,x.eagerState=k,qn(k,S))return Nu(i,r,x,0),_t===null&&wu(),!1}catch{}finally{}if(l=bh(i,r,x,d),l!==null)return On(l,i,d),ex(l,r,d),!0}return!1}function sm(i,r,l,d){if(d={lane:2,revertLane:Lm(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},$u(i)){if(r)throw Error(s(479))}else r=bh(i,l,d,2),r!==null&&On(r,i,2)}function $u(i){var r=i.alternate;return i===ze||r!==null&&r===ze}function Zy(i,r){Ao=Gu=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function ex(i,r,l){if((l&4194048)!==0){var d=r.lanes;d&=i.pendingLanes,l|=d,r.lanes=l,El(i,l)}}var nc={readContext:dn,use:zu,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt};nc.useEffectEvent=Pt;var tx={readContext:dn,use:zu,useCallback:function(i,r){return wn().memoizedState=[i,r===void 0?null:r],i},useContext:dn,useEffect:Oy,useImperativeHandle:function(i,r,l){l=l!=null?l.concat([i]):null,qu(4194308,4,Hy.bind(null,r,i),l)},useLayoutEffect:function(i,r){return qu(4194308,4,i,r)},useInsertionEffect:function(i,r){qu(4,2,i,r)},useMemo:function(i,r){var l=wn();r=r===void 0?null:r;var d=i();if(Aa){Rn(!0);try{i()}finally{Rn(!1)}}return l.memoizedState=[d,r],d},useReducer:function(i,r,l){var d=wn();if(l!==void 0){var x=l(r);if(Aa){Rn(!0);try{l(r)}finally{Rn(!1)}}}else x=r;return d.memoizedState=d.baseState=x,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:x},d.queue=i,i=i.dispatch=XN.bind(null,ze,i),[d.memoizedState,i]},useRef:function(i){var r=wn();return i={current:i},r.memoizedState=i},useState:function(i){i=Qh(i);var r=i.queue,l=Xy.bind(null,ze,r);return r.dispatch=l,[i.memoizedState,l]},useDebugValue:Zh,useDeferredValue:function(i,r){var l=wn();return em(l,i,r)},useTransition:function(){var i=Qh(!1);return i=$y.bind(null,ze,i.queue,!0,!1),wn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,l){var d=ze,x=wn();if(nt){if(l===void 0)throw Error(s(407));l=l()}else{if(l=r(),_t===null)throw Error(s(349));(Je&127)!==0||Ty(d,r,l)}x.memoizedState=l;var b={value:l,getSnapshot:r};return x.queue=b,Oy(Sy.bind(null,d,b,i),[i]),d.flags|=2048,No(9,{destroy:void 0},Ey.bind(null,d,b,l,r),null),l},useId:function(){var i=wn(),r=_t.identifierPrefix;if(nt){var l=ri,d=ii;l=(d&~(1<<32-Mt(d)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Bu++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=qN++,r="_"+r+"r_"+l.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:nm,useFormState:Dy,useActionState:Dy,useOptimistic:function(i){var r=wn();r.memoizedState=r.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=sm.bind(null,ze,!0,l),l.dispatch=r,[i,r]},useMemoCache:$h,useCacheRefresh:function(){return wn().memoizedState=WN.bind(null,ze)},useEffectEvent:function(i){var r=wn(),l={impl:i};return r.memoizedState=l,function(){if((lt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},im={readContext:dn,use:zu,useCallback:Fy,useContext:dn,useEffect:Xh,useImperativeHandle:zy,useInsertionEffect:Gy,useLayoutEffect:By,useMemo:qy,useReducer:Fu,useRef:Vy,useState:function(){return Fu(wi)},useDebugValue:Zh,useDeferredValue:function(i,r){var l=Gt();return Ky(l,gt.memoizedState,i,r)},useTransition:function(){var i=Fu(wi)[0],r=Gt().memoizedState;return[typeof i=="boolean"?i:ec(i),r]},useSyncExternalStore:_y,useId:Qy,useHostTransitionStatus:nm,useFormState:Py,useActionState:Py,useOptimistic:function(i,r){var l=Gt();return Ny(l,gt,i,r)},useMemoCache:$h,useCacheRefresh:Wy};im.useEffectEvent=jy;var nx={readContext:dn,use:zu,useCallback:Fy,useContext:dn,useEffect:Xh,useImperativeHandle:zy,useInsertionEffect:Gy,useLayoutEffect:By,useMemo:qy,useReducer:Jh,useRef:Vy,useState:function(){return Jh(wi)},useDebugValue:Zh,useDeferredValue:function(i,r){var l=Gt();return gt===null?em(l,i,r):Ky(l,gt.memoizedState,i,r)},useTransition:function(){var i=Jh(wi)[0],r=Gt().memoizedState;return[typeof i=="boolean"?i:ec(i),r]},useSyncExternalStore:_y,useId:Qy,useHostTransitionStatus:nm,useFormState:Uy,useActionState:Uy,useOptimistic:function(i,r){var l=Gt();return gt!==null?Ny(l,gt,i,r):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:$h,useCacheRefresh:Wy};nx.useEffectEvent=jy;function rm(i,r,l,d){r=i.memoizedState,l=l(d,r),l=l==null?r:_({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var am={enqueueSetState:function(i,r,l){i=i._reactInternals;var d=Wn(),x=hr(d);x.payload=r,l!=null&&(x.callback=l),r=mr(i,x,d),r!==null&&(On(r,i,d),Ql(r,i,d))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var d=Wn(),x=hr(d);x.tag=1,x.payload=r,l!=null&&(x.callback=l),r=mr(i,x,d),r!==null&&(On(r,i,d),Ql(r,i,d))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=Wn(),d=hr(l);d.tag=2,r!=null&&(d.callback=r),r=mr(i,d,l),r!==null&&(On(r,i,l),Ql(r,i,l))}};function sx(i,r,l,d,x,b,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,b,S):r.prototype&&r.prototype.isPureReactComponent?!Hl(l,d)||!Hl(x,b):!0}function ix(i,r,l,d){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,d),r.state!==i&&am.enqueueReplaceState(r,r.state,null)}function wa(i,r){var l=r;if("ref"in r){l={};for(var d in r)d!=="ref"&&(l[d]=r[d])}if(i=i.defaultProps){l===r&&(l=_({},l));for(var x in i)l[x]===void 0&&(l[x]=i[x])}return l}function rx(i){Au(i)}function ax(i){console.error(i)}function ox(i){Au(i)}function Yu(i,r){try{var l=i.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function lx(i,r,l){try{var d=i.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function om(i,r,l){return l=hr(l),l.tag=3,l.payload={element:null},l.callback=function(){Yu(i,r)},l}function cx(i){return i=hr(i),i.tag=3,i}function ux(i,r,l,d){var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var b=d.value;i.payload=function(){return x(b)},i.callback=function(){lx(r,l,d)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){lx(r,l,d),typeof x!="function"&&(br===null?br=new Set([this]):br.add(this));var k=d.stack;this.componentDidCatch(d.value,{componentStack:k!==null?k:""})})}function ZN(i,r,l,d,x){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=l.alternate,r!==null&&vo(r,l,x,!0),l=$n.current,l!==null){switch(l.tag){case 31:case 13:return us===null?ad():l.alternate===null&&Lt===0&&(Lt=3),l.flags&=-257,l.flags|=65536,l.lanes=x,d===Lu?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([d]):r.add(d),Mm(i,d,x)),!1;case 22:return l.flags|=65536,d===Lu?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([d]):l.add(d)),Mm(i,d,x)),!1}throw Error(s(435,l.tag))}return Mm(i,d,x),ad(),!1}if(nt)return r=$n.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=x,d!==wh&&(i=Error(s(422),{cause:d}),ql(as(i,l)))):(d!==wh&&(r=Error(s(423),{cause:d}),ql(as(r,l))),i=i.current.alternate,i.flags|=65536,x&=-x,i.lanes|=x,d=as(d,l),x=om(i.stateNode,d,x),Vh(i,x),Lt!==4&&(Lt=2)),!1;var b=Error(s(520),{cause:d});if(b=as(b,l),uc===null?uc=[b]:uc.push(b),Lt!==4&&(Lt=2),r===null)return!0;d=as(d,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,i=x&-x,l.lanes|=i,i=om(l.stateNode,d,i),Vh(l,i),!1;case 1:if(r=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(br===null||!br.has(b))))return l.flags|=65536,x&=-x,l.lanes|=x,x=cx(x),ux(x,i,l,d),Vh(l,x),!1}l=l.return}while(l!==null);return!1}var lm=Error(s(461)),Yt=!1;function fn(i,r,l,d){r.child=i===null?my(r,null,l,d):Sa(r,i.child,l,d)}function dx(i,r,l,d,x){l=l.render;var b=r.ref;if("ref"in d){var S={};for(var k in d)k!=="ref"&&(S[k]=d[k])}else S=d;return ba(r),d=zh(i,r,l,S,b,x),k=Fh(),i!==null&&!Yt?(qh(i,r,x),Ni(i,r,x)):(nt&&k&&Sh(r),r.flags|=1,fn(i,r,d,x),r.child)}function fx(i,r,l,d,x){if(i===null){var b=l.type;return typeof b=="function"&&!_h(b)&&b.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=b,hx(i,r,b,d,x)):(i=Iu(l.type,null,d,r,r.mode,x),i.ref=r.ref,i.return=r,r.child=i)}if(b=i.child,!gm(i,x)){var S=b.memoizedProps;if(l=l.compare,l=l!==null?l:Hl,l(S,d)&&i.ref===r.ref)return Ni(i,r,x)}return r.flags|=1,i=_i(b,d),i.ref=r.ref,i.return=r,r.child=i}function hx(i,r,l,d,x){if(i!==null){var b=i.memoizedProps;if(Hl(b,d)&&i.ref===r.ref)if(Yt=!1,r.pendingProps=d=b,gm(i,x))(i.flags&131072)!==0&&(Yt=!0);else return r.lanes=i.lanes,Ni(i,r,x)}return cm(i,r,l,d,x)}function mx(i,r,l,d){var x=d.children,b=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,i!==null){for(d=r.child=i.child,x=0;d!==null;)x=x|d.lanes|d.childLanes,d=d.sibling;d=x&~b}else d=0,r.child=null;return px(i,r,b,l,d)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Du(r,b!==null?b.cachePool:null),b!==null?yy(r,b):jh(),xy(r);else return d=r.lanes=536870912,px(i,r,b!==null?b.baseLanes|l:l,l,d)}else b!==null?(Du(r,b.cachePool),yy(r,b),gr(),r.memoizedState=null):(i!==null&&Du(r,null),jh(),gr());return fn(i,r,x,l),r.child}function sc(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function px(i,r,l,d,x){var b=Dh();return b=b===null?null:{parent:Kt._currentValue,pool:b},r.memoizedState={baseLanes:l,cachePool:b},i!==null&&Du(r,null),jh(),xy(r),i!==null&&vo(i,r,d,!0),r.childLanes=x,null}function Ju(i,r){return r=Wu({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function gx(i,r,l){return Sa(r,i.child,null,l),i=Ju(r,r.pendingProps),i.flags|=2,Yn(r),r.memoizedState=null,i}function e1(i,r,l){var d=r.pendingProps,x=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(nt){if(d.mode==="hidden")return i=Ju(r,d),r.lanes=536870912,sc(null,i);if(Bh(r),(i=St)?(i=Cv(i,cs),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:lr!==null?{id:ii,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},l=Z0(i),l.return=r,r.child=l,un=r,St=null)):i=null,i===null)throw ur(r);return r.lanes=536870912,null}return Ju(r,d)}var b=i.memoizedState;if(b!==null){var S=b.dehydrated;if(Bh(r),x)if(r.flags&256)r.flags&=-257,r=gx(i,r,l);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Yt||vo(i,r,l,!1),x=(l&i.childLanes)!==0,Yt||x){if(d=_t,d!==null&&(S=Sl(d,l),S!==0&&S!==b.retryLane))throw b.retryLane=S,ga(i,S),On(d,i,S),lm;ad(),r=gx(i,r,l)}else i=b.treeContext,St=ds(S.nextSibling),un=r,nt=!0,cr=null,cs=!1,i!==null&&ny(r,i),r=Ju(r,d),r.flags|=4096;return r}return i=_i(i.child,{mode:d.mode,children:d.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Qu(i,r){var l=r.ref;if(l===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(i===null||i.ref!==l)&&(r.flags|=4194816)}}function cm(i,r,l,d,x){return ba(r),l=zh(i,r,l,d,void 0,x),d=Fh(),i!==null&&!Yt?(qh(i,r,x),Ni(i,r,x)):(nt&&d&&Sh(r),r.flags|=1,fn(i,r,l,x),r.child)}function yx(i,r,l,d,x,b){return ba(r),r.updateQueue=null,l=by(r,d,l,x),vy(i),d=Fh(),i!==null&&!Yt?(qh(i,r,b),Ni(i,r,b)):(nt&&d&&Sh(r),r.flags|=1,fn(i,r,l,b),r.child)}function xx(i,r,l,d,x){if(ba(r),r.stateNode===null){var b=po,S=l.contextType;typeof S=="object"&&S!==null&&(b=dn(S)),b=new l(d,b),r.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=am,r.stateNode=b,b._reactInternals=r,b=r.stateNode,b.props=d,b.state=r.memoizedState,b.refs={},Lh(r),S=l.contextType,b.context=typeof S=="object"&&S!==null?dn(S):po,b.state=r.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(rm(r,l,S,d),b.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(S=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),S!==b.state&&am.enqueueReplaceState(b,b.state,null),Xl(r,d,b,x),Wl(),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(i===null){b=r.stateNode;var k=r.memoizedProps,z=wa(l,k);b.props=z;var X=b.context,ae=l.contextType;S=po,typeof ae=="object"&&ae!==null&&(S=dn(ae));var fe=l.getDerivedStateFromProps;ae=typeof fe=="function"||typeof b.getSnapshotBeforeUpdate=="function",k=r.pendingProps!==k,ae||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k||X!==S)&&ix(r,b,d,S),fr=!1;var te=r.memoizedState;b.state=te,Xl(r,d,b,x),Wl(),X=r.memoizedState,k||te!==X||fr?(typeof fe=="function"&&(rm(r,l,fe,d),X=r.memoizedState),(z=fr||sx(r,l,z,d,te,X,S))?(ae||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=X),b.props=d,b.state=X,b.context=S,d=z):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{b=r.stateNode,Uh(i,r),S=r.memoizedProps,ae=wa(l,S),b.props=ae,fe=r.pendingProps,te=b.context,X=l.contextType,z=po,typeof X=="object"&&X!==null&&(z=dn(X)),k=l.getDerivedStateFromProps,(X=typeof k=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(S!==fe||te!==z)&&ix(r,b,d,z),fr=!1,te=r.memoizedState,b.state=te,Xl(r,d,b,x),Wl();var ie=r.memoizedState;S!==fe||te!==ie||fr||i!==null&&i.dependencies!==null&&Ru(i.dependencies)?(typeof k=="function"&&(rm(r,l,k,d),ie=r.memoizedState),(ae=fr||sx(r,l,ae,d,te,ie,z)||i!==null&&i.dependencies!==null&&Ru(i.dependencies))?(X||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,ie,z),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,ie,z)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=ie),b.props=d,b.state=ie,b.context=z,d=ae):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(r.flags|=1024),d=!1)}return b=d,Qu(i,r),d=(r.flags&128)!==0,b||d?(b=r.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:b.render(),r.flags|=1,i!==null&&d?(r.child=Sa(r,i.child,null,x),r.child=Sa(r,null,l,x)):fn(i,r,l,x),r.memoizedState=b.state,i=r.child):i=Ni(i,r,x),i}function vx(i,r,l,d){return xa(),r.flags|=256,fn(i,r,l,d),r.child}var um={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dm(i){return{baseLanes:i,cachePool:ly()}}function fm(i,r,l){return i=i!==null?i.childLanes&~l:0,r&&(i|=Qn),i}function bx(i,r,l){var d=r.pendingProps,x=!1,b=(r.flags&128)!==0,S;if((S=b)||(S=i!==null&&i.memoizedState===null?!1:(jt.current&2)!==0),S&&(x=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,i===null){if(nt){if(x?pr(r):gr(),(i=St)?(i=Cv(i,cs),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:lr!==null?{id:ii,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},l=Z0(i),l.return=r,r.child=l,un=r,St=null)):i=null,i===null)throw ur(r);return Ym(i)?r.lanes=32:r.lanes=536870912,null}var k=d.children;return d=d.fallback,x?(gr(),x=r.mode,k=Wu({mode:"hidden",children:k},x),d=ya(d,x,l,null),k.return=r,d.return=r,k.sibling=d,r.child=k,d=r.child,d.memoizedState=dm(l),d.childLanes=fm(i,S,l),r.memoizedState=um,sc(null,d)):(pr(r),hm(r,k))}var z=i.memoizedState;if(z!==null&&(k=z.dehydrated,k!==null)){if(b)r.flags&256?(pr(r),r.flags&=-257,r=mm(i,r,l)):r.memoizedState!==null?(gr(),r.child=i.child,r.flags|=128,r=null):(gr(),k=d.fallback,x=r.mode,d=Wu({mode:"visible",children:d.children},x),k=ya(k,x,l,null),k.flags|=2,d.return=r,k.return=r,d.sibling=k,r.child=d,Sa(r,i.child,null,l),d=r.child,d.memoizedState=dm(l),d.childLanes=fm(i,S,l),r.memoizedState=um,r=sc(null,d));else if(pr(r),Ym(k)){if(S=k.nextSibling&&k.nextSibling.dataset,S)var X=S.dgst;S=X,d=Error(s(419)),d.stack="",d.digest=S,ql({value:d,source:null,stack:null}),r=mm(i,r,l)}else if(Yt||vo(i,r,l,!1),S=(l&i.childLanes)!==0,Yt||S){if(S=_t,S!==null&&(d=Sl(S,l),d!==0&&d!==z.retryLane))throw z.retryLane=d,ga(i,d),On(S,i,d),lm;$m(k)||ad(),r=mm(i,r,l)}else $m(k)?(r.flags|=192,r.child=i.child,r=null):(i=z.treeContext,St=ds(k.nextSibling),un=r,nt=!0,cr=null,cs=!1,i!==null&&ny(r,i),r=hm(r,d.children),r.flags|=4096);return r}return x?(gr(),k=d.fallback,x=r.mode,z=i.child,X=z.sibling,d=_i(z,{mode:"hidden",children:d.children}),d.subtreeFlags=z.subtreeFlags&65011712,X!==null?k=_i(X,k):(k=ya(k,x,l,null),k.flags|=2),k.return=r,d.return=r,d.sibling=k,r.child=d,sc(null,d),d=r.child,k=i.child.memoizedState,k===null?k=dm(l):(x=k.cachePool,x!==null?(z=Kt._currentValue,x=x.parent!==z?{parent:z,pool:z}:x):x=ly(),k={baseLanes:k.baseLanes|l,cachePool:x}),d.memoizedState=k,d.childLanes=fm(i,S,l),r.memoizedState=um,sc(i.child,d)):(pr(r),l=i.child,i=l.sibling,l=_i(l,{mode:"visible",children:d.children}),l.return=r,l.sibling=null,i!==null&&(S=r.deletions,S===null?(r.deletions=[i],r.flags|=16):S.push(i)),r.child=l,r.memoizedState=null,l)}function hm(i,r){return r=Wu({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Wu(i,r){return i=Kn(22,i,null,r),i.lanes=0,i}function mm(i,r,l){return Sa(r,i.child,null,l),i=hm(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function _x(i,r,l){i.lanes|=r;var d=i.alternate;d!==null&&(d.lanes|=r),Ih(i.return,r,l)}function pm(i,r,l,d,x,b){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:x,treeForkCount:b}:(S.isBackwards=r,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=l,S.tailMode=x,S.treeForkCount=b)}function Tx(i,r,l){var d=r.pendingProps,x=d.revealOrder,b=d.tail;d=d.children;var S=jt.current,k=(S&2)!==0;if(k?(S=S&1|2,r.flags|=128):S&=1,Z(jt,S),fn(i,r,d,l),d=nt?Fl:0,!k&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&_x(i,l,r);else if(i.tag===19)_x(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(x){case"forwards":for(l=r.child,x=null;l!==null;)i=l.alternate,i!==null&&ju(i)===null&&(x=l),l=l.sibling;l=x,l===null?(x=r.child,r.child=null):(x=l.sibling,l.sibling=null),pm(r,!1,x,l,b,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,x=r.child,r.child=null;x!==null;){if(i=x.alternate,i!==null&&ju(i)===null){r.child=x;break}i=x.sibling,x.sibling=l,l=x,x=i}pm(r,!0,l,null,b,d);break;case"together":pm(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function Ni(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),vr|=r.lanes,(l&r.childLanes)===0)if(i!==null){if(vo(i,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,l=_i(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=_i(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function gm(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Ru(i)))}function t1(i,r,l){switch(r.tag){case 3:Ce(r,r.stateNode.containerInfo),dr(r,Kt,i.memoizedState.cache),xa();break;case 27:case 5:dt(r);break;case 4:Ce(r,r.stateNode.containerInfo);break;case 10:dr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Bh(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(pr(r),r.flags|=128,null):(l&r.child.childLanes)!==0?bx(i,r,l):(pr(r),i=Ni(i,r,l),i!==null?i.sibling:null);pr(r);break;case 19:var x=(i.flags&128)!==0;if(d=(l&r.childLanes)!==0,d||(vo(i,r,l,!1),d=(l&r.childLanes)!==0),x){if(d)return Tx(i,r,l);r.flags|=128}if(x=r.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Z(jt,jt.current),d)break;return null;case 22:return r.lanes=0,mx(i,r,l,r.pendingProps);case 24:dr(r,Kt,i.memoizedState.cache)}return Ni(i,r,l)}function Ex(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps)Yt=!0;else{if(!gm(i,l)&&(r.flags&128)===0)return Yt=!1,t1(i,r,l);Yt=(i.flags&131072)!==0}else Yt=!1,nt&&(r.flags&1048576)!==0&&ty(r,Fl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(i=Ta(r.elementType),r.type=i,typeof i=="function")_h(i)?(d=wa(i,d),r.tag=1,r=xx(null,r,i,d,l)):(r.tag=0,r=cm(null,r,i,d,l));else{if(i!=null){var x=i.$$typeof;if(x===ee){r.tag=11,r=dx(null,r,i,d,l);break e}else if(x===M){r.tag=14,r=fx(null,r,i,d,l);break e}}throw r=pe(i)||i,Error(s(306,r,""))}}return r;case 0:return cm(i,r,r.type,r.pendingProps,l);case 1:return d=r.type,x=wa(d,r.pendingProps),xx(i,r,d,x,l);case 3:e:{if(Ce(r,r.stateNode.containerInfo),i===null)throw Error(s(387));d=r.pendingProps;var b=r.memoizedState;x=b.element,Uh(i,r),Xl(r,d,null,l);var S=r.memoizedState;if(d=S.cache,dr(r,Kt,d),d!==b.cache&&kh(r,[Kt],l,!0),Wl(),d=S.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=vx(i,r,d,l);break e}else if(d!==x){x=as(Error(s(424)),r),ql(x),r=vx(i,r,d,l);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(St=ds(i.firstChild),un=r,nt=!0,cr=null,cs=!0,l=my(r,null,d,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(xa(),d===x){r=Ni(i,r,l);break e}fn(i,r,d,l)}r=r.child}return r;case 26:return Qu(i,r),i===null?(l=Pv(r.type,null,r.pendingProps,null))?r.memoizedState=l:nt||(l=r.type,i=r.pendingProps,d=hd(ce.current).createElement(l),d[zt]=r,d[nn]=i,hn(d,l,i),Ft(d),r.stateNode=d):r.memoizedState=Pv(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return dt(r),i===null&&nt&&(d=r.stateNode=Rv(r.type,r.pendingProps,ce.current),un=r,cs=!0,x=St,Sr(r.type)?(Jm=x,St=ds(d.firstChild)):St=x),fn(i,r,r.pendingProps.children,l),Qu(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&nt&&((x=d=St)&&(d=R1(d,r.type,r.pendingProps,cs),d!==null?(r.stateNode=d,un=r,St=ds(d.firstChild),cs=!1,x=!0):x=!1),x||ur(r)),dt(r),x=r.type,b=r.pendingProps,S=i!==null?i.memoizedProps:null,d=b.children,Fm(x,b)?d=null:S!==null&&Fm(x,S)&&(r.flags|=32),r.memoizedState!==null&&(x=zh(i,r,KN,null,null,l),xc._currentValue=x),Qu(i,r),fn(i,r,d,l),r.child;case 6:return i===null&&nt&&((i=l=St)&&(l=M1(l,r.pendingProps,cs),l!==null?(r.stateNode=l,un=r,St=null,i=!0):i=!1),i||ur(r)),null;case 13:return bx(i,r,l);case 4:return Ce(r,r.stateNode.containerInfo),d=r.pendingProps,i===null?r.child=Sa(r,null,d,l):fn(i,r,d,l),r.child;case 11:return dx(i,r,r.type,r.pendingProps,l);case 7:return fn(i,r,r.pendingProps,l),r.child;case 8:return fn(i,r,r.pendingProps.children,l),r.child;case 12:return fn(i,r,r.pendingProps.children,l),r.child;case 10:return d=r.pendingProps,dr(r,r.type,d.value),fn(i,r,d.children,l),r.child;case 9:return x=r.type._context,d=r.pendingProps.children,ba(r),x=dn(x),d=d(x),r.flags|=1,fn(i,r,d,l),r.child;case 14:return fx(i,r,r.type,r.pendingProps,l);case 15:return hx(i,r,r.type,r.pendingProps,l);case 19:return Tx(i,r,l);case 31:return e1(i,r,l);case 22:return mx(i,r,l,r.pendingProps);case 24:return ba(r),d=dn(Kt),i===null?(x=Dh(),x===null&&(x=_t,b=Rh(),x.pooledCache=b,b.refCount++,b!==null&&(x.pooledCacheLanes|=l),x=b),r.memoizedState={parent:d,cache:x},Lh(r),dr(r,Kt,x)):((i.lanes&l)!==0&&(Uh(i,r),Xl(r,null,null,l),Wl()),x=i.memoizedState,b=r.memoizedState,x.parent!==d?(x={parent:d,cache:d},r.memoizedState=x,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=x),dr(r,Kt,d)):(d=b.cache,dr(r,Kt,d),d!==x.cache&&kh(r,[Kt],l,!0))),fn(i,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Ci(i){i.flags|=4}function ym(i,r,l,d,x){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(x&335544128)===x)if(i.stateNode.complete)i.flags|=8192;else if(Qx())i.flags|=8192;else throw Ea=Lu,Ph}else i.flags&=-16777217}function Sx(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!jv(r))if(Qx())i.flags|=8192;else throw Ea=Lu,Ph}function Xu(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Xi():536870912,i.lanes|=r,Ro|=r)}function ic(i,r){if(!nt)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function At(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(r)for(var x=i.child;x!==null;)l|=x.lanes|x.childLanes,d|=x.subtreeFlags&65011712,d|=x.flags&65011712,x.return=i,x=x.sibling;else for(x=i.child;x!==null;)l|=x.lanes|x.childLanes,d|=x.subtreeFlags,d|=x.flags,x.return=i,x=x.sibling;return i.subtreeFlags|=d,i.childLanes=l,r}function n1(i,r,l){var d=r.pendingProps;switch(Ah(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(r),null;case 1:return At(r),null;case 3:return l=r.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),Si(Kt),_e(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(xo(r)?Ci(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Nh())),At(r),null;case 26:var x=r.type,b=r.memoizedState;return i===null?(Ci(r),b!==null?(At(r),Sx(r,b)):(At(r),ym(r,x,null,d,l))):b?b!==i.memoizedState?(Ci(r),At(r),Sx(r,b)):(At(r),r.flags&=-16777217):(i=i.memoizedProps,i!==d&&Ci(r),At(r),ym(r,x,i,d,l)),null;case 27:if(bt(r),l=ce.current,x=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&Ci(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return At(r),null}i=K.current,xo(r)?sy(r):(i=Rv(x,d,l),r.stateNode=i,Ci(r))}return At(r),null;case 5:if(bt(r),x=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&Ci(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return At(r),null}if(b=K.current,xo(r))sy(r);else{var S=hd(ce.current);switch(b){case 1:b=S.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:b=S.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":b=S.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":b=S.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":b=S.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?S.createElement("select",{is:d.is}):S.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?S.createElement(x,{is:d.is}):S.createElement(x)}}b[zt]=r,b[nn]=d;e:for(S=r.child;S!==null;){if(S.tag===5||S.tag===6)b.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===r)break e;for(;S.sibling===null;){if(S.return===null||S.return===r)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}r.stateNode=b;e:switch(hn(b,x,d),x){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Ci(r)}}return At(r),ym(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,l),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==d&&Ci(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(s(166));if(i=ce.current,xo(r)){if(i=r.stateNode,l=r.memoizedProps,d=null,x=un,x!==null)switch(x.tag){case 27:case 5:d=x.memoizedProps}i[zt]=r,i=!!(i.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||bv(i.nodeValue,l)),i||ur(r,!0)}else i=hd(i).createTextNode(d),i[zt]=r,r.stateNode=i}return At(r),null;case 31:if(l=r.memoizedState,i===null||i.memoizedState!==null){if(d=xo(r),l!==null){if(i===null){if(!d)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[zt]=r}else xa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;At(r),i=!1}else l=Nh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return r.flags&256?(Yn(r),r):(Yn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return At(r),null;case 13:if(d=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(x=xo(r),d!==null&&d.dehydrated!==null){if(i===null){if(!x)throw Error(s(318));if(x=r.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(s(317));x[zt]=r}else xa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;At(r),x=!1}else x=Nh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=x),x=!0;if(!x)return r.flags&256?(Yn(r),r):(Yn(r),null)}return Yn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=d!==null,i=i!==null&&i.memoizedState!==null,l&&(d=r.child,x=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(x=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==x&&(d.flags|=2048)),l!==i&&l&&(r.child.flags|=8192),Xu(r,r.updateQueue),At(r),null);case 4:return _e(),i===null&&jm(r.stateNode.containerInfo),At(r),null;case 10:return Si(r.type),At(r),null;case 19:if(ne(jt),d=r.memoizedState,d===null)return At(r),null;if(x=(r.flags&128)!==0,b=d.rendering,b===null)if(x)ic(d,!1);else{if(Lt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(b=ju(i),b!==null){for(r.flags|=128,ic(d,!1),i=b.updateQueue,r.updateQueue=i,Xu(r,i),r.subtreeFlags=0,i=l,l=r.child;l!==null;)X0(l,i),l=l.sibling;return Z(jt,jt.current&1|2),nt&&Ti(r,d.treeForkCount),r.child}i=i.sibling}d.tail!==null&&ln()>sd&&(r.flags|=128,x=!0,ic(d,!1),r.lanes=4194304)}else{if(!x)if(i=ju(b),i!==null){if(r.flags|=128,x=!0,i=i.updateQueue,r.updateQueue=i,Xu(r,i),ic(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!nt)return At(r),null}else 2*ln()-d.renderingStartTime>sd&&l!==536870912&&(r.flags|=128,x=!0,ic(d,!1),r.lanes=4194304);d.isBackwards?(b.sibling=r.child,r.child=b):(i=d.last,i!==null?i.sibling=b:r.child=b,d.last=b)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=ln(),i.sibling=null,l=jt.current,Z(jt,x?l&1|2:l&1),nt&&Ti(r,d.treeForkCount),i):(At(r),null);case 22:case 23:return Yn(r),Gh(),d=r.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(l&536870912)!==0&&(r.flags&128)===0&&(At(r),r.subtreeFlags&6&&(r.flags|=8192)):At(r),l=r.updateQueue,l!==null&&Xu(r,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==l&&(r.flags|=2048),i!==null&&ne(_a),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Si(Kt),At(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function s1(i,r){switch(Ah(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Si(Kt),_e(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return bt(r),null;case 31:if(r.memoizedState!==null){if(Yn(r),r.alternate===null)throw Error(s(340));xa()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Yn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));xa()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ne(jt),null;case 4:return _e(),null;case 10:return Si(r.type),null;case 22:case 23:return Yn(r),Gh(),i!==null&&ne(_a),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Si(Kt),null;case 25:return null;default:return null}}function Ax(i,r){switch(Ah(r),r.tag){case 3:Si(Kt),_e();break;case 26:case 27:case 5:bt(r);break;case 4:_e();break;case 31:r.memoizedState!==null&&Yn(r);break;case 13:Yn(r);break;case 19:ne(jt);break;case 10:Si(r.type);break;case 22:case 23:Yn(r),Gh(),i!==null&&ne(_a);break;case 24:Si(Kt)}}function rc(i,r){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var x=d.next;l=x;do{if((l.tag&i)===i){d=void 0;var b=l.create,S=l.inst;d=b(),S.destroy=d}l=l.next}while(l!==x)}}catch(k){mt(r,r.return,k)}}function yr(i,r,l){try{var d=r.updateQueue,x=d!==null?d.lastEffect:null;if(x!==null){var b=x.next;d=b;do{if((d.tag&i)===i){var S=d.inst,k=S.destroy;if(k!==void 0){S.destroy=void 0,x=r;var z=l,X=k;try{X()}catch(ae){mt(x,z,ae)}}}d=d.next}while(d!==b)}}catch(ae){mt(r,r.return,ae)}}function wx(i){var r=i.updateQueue;if(r!==null){var l=i.stateNode;try{gy(r,l)}catch(d){mt(i,i.return,d)}}}function Nx(i,r,l){l.props=wa(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(d){mt(i,r,d)}}function ac(i,r){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof l=="function"?i.refCleanup=l(d):l.current=d}}catch(x){mt(i,r,x)}}function ai(i,r){var l=i.ref,d=i.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(x){mt(i,r,x)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(x){mt(i,r,x)}else l.current=null}function Cx(i){var r=i.type,l=i.memoizedProps,d=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(x){mt(i,i.return,x)}}function xm(i,r,l){try{var d=i.stateNode;A1(d,i.type,l,r),d[nn]=r}catch(x){mt(i,i.return,x)}}function Ix(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Sr(i.type)||i.tag===4}function vm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Ix(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Sr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bm(i,r,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(i),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Ss));else if(d!==4&&(d===27&&Sr(i.type)&&(l=i.stateNode,r=null),i=i.child,i!==null))for(bm(i,r,l),i=i.sibling;i!==null;)bm(i,r,l),i=i.sibling}function Zu(i,r,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(d!==4&&(d===27&&Sr(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Zu(i,r,l),i=i.sibling;i!==null;)Zu(i,r,l),i=i.sibling}function kx(i){var r=i.stateNode,l=i.memoizedProps;try{for(var d=i.type,x=r.attributes;x.length;)r.removeAttributeNode(x[0]);hn(r,d,l),r[zt]=i,r[nn]=l}catch(b){mt(i,i.return,b)}}var Ii=!1,Jt=!1,_m=!1,Rx=typeof WeakSet=="function"?WeakSet:Set,rn=null;function i1(i,r){if(i=i.containerInfo,Hm=bd,i=z0(i),mh(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var x=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var S=0,k=-1,z=-1,X=0,ae=0,fe=i,te=null;t:for(;;){for(var ie;fe!==l||x!==0&&fe.nodeType!==3||(k=S+x),fe!==b||d!==0&&fe.nodeType!==3||(z=S+d),fe.nodeType===3&&(S+=fe.nodeValue.length),(ie=fe.firstChild)!==null;)te=fe,fe=ie;for(;;){if(fe===i)break t;if(te===l&&++X===x&&(k=S),te===b&&++ae===d&&(z=S),(ie=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=ie}l=k===-1||z===-1?null:{start:k,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(zm={focusedElem:i,selectionRange:l},bd=!1,rn=r;rn!==null;)if(r=rn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,rn=i;else for(;rn!==null;){switch(r=rn,b=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)x=i[l],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,l=r,x=b.memoizedProps,b=b.memoizedState,d=l.stateNode;try{var Ne=wa(l.type,x);i=d.getSnapshotBeforeUpdate(Ne,b),d.__reactInternalSnapshotBeforeUpdate=i}catch(Le){mt(l,l.return,Le)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,l=i.nodeType,l===9)Km(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Km(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,rn=i;break}rn=r.return}}function Mx(i,r,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:Ri(i,l),d&4&&rc(5,l);break;case 1:if(Ri(i,l),d&4)if(i=l.stateNode,r===null)try{i.componentDidMount()}catch(S){mt(l,l.return,S)}else{var x=wa(l.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(x,r,i.__reactInternalSnapshotBeforeUpdate)}catch(S){mt(l,l.return,S)}}d&64&&wx(l),d&512&&ac(l,l.return);break;case 3:if(Ri(i,l),d&64&&(i=l.updateQueue,i!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{gy(i,r)}catch(S){mt(l,l.return,S)}}break;case 27:r===null&&d&4&&kx(l);case 26:case 5:Ri(i,l),r===null&&d&4&&Cx(l),d&512&&ac(l,l.return);break;case 12:Ri(i,l);break;case 31:Ri(i,l),d&4&&Lx(i,l);break;case 13:Ri(i,l),d&4&&Ux(i,l),d&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=h1.bind(null,l),D1(i,l))));break;case 22:if(d=l.memoizedState!==null||Ii,!d){r=r!==null&&r.memoizedState!==null||Jt,x=Ii;var b=Jt;Ii=d,(Jt=r)&&!b?Mi(i,l,(l.subtreeFlags&8772)!==0):Ri(i,l),Ii=x,Jt=b}break;case 30:break;default:Ri(i,l)}}function Dx(i){var r=i.alternate;r!==null&&(i.alternate=null,Dx(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&eo(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var kt=null,Pn=!1;function ki(i,r,l){for(l=l.child;l!==null;)Px(i,r,l),l=l.sibling}function Px(i,r,l){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Hn,l)}catch{}switch(l.tag){case 26:Jt||ai(l,r),ki(i,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Jt||ai(l,r);var d=kt,x=Pn;Sr(l.type)&&(kt=l.stateNode,Pn=!1),ki(i,r,l),pc(l.stateNode),kt=d,Pn=x;break;case 5:Jt||ai(l,r);case 6:if(d=kt,x=Pn,kt=null,ki(i,r,l),kt=d,Pn=x,kt!==null)if(Pn)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(l.stateNode)}catch(b){mt(l,r,b)}else try{kt.removeChild(l.stateNode)}catch(b){mt(l,r,b)}break;case 18:kt!==null&&(Pn?(i=kt,wv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),jo(i)):wv(kt,l.stateNode));break;case 4:d=kt,x=Pn,kt=l.stateNode.containerInfo,Pn=!0,ki(i,r,l),kt=d,Pn=x;break;case 0:case 11:case 14:case 15:yr(2,l,r),Jt||yr(4,l,r),ki(i,r,l);break;case 1:Jt||(ai(l,r),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Nx(l,r,d)),ki(i,r,l);break;case 21:ki(i,r,l);break;case 22:Jt=(d=Jt)||l.memoizedState!==null,ki(i,r,l),Jt=d;break;default:ki(i,r,l)}}function Lx(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{jo(i)}catch(l){mt(r,r.return,l)}}}function Ux(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{jo(i)}catch(l){mt(r,r.return,l)}}function r1(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Rx),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Rx),r;default:throw Error(s(435,i.tag))}}function ed(i,r){var l=r1(i);r.forEach(function(d){if(!l.has(d)){l.add(d);var x=m1.bind(null,i,d);d.then(x,x)}})}function Ln(i,r){var l=r.deletions;if(l!==null)for(var d=0;d<l.length;d++){var x=l[d],b=i,S=r,k=S;e:for(;k!==null;){switch(k.tag){case 27:if(Sr(k.type)){kt=k.stateNode,Pn=!1;break e}break;case 5:kt=k.stateNode,Pn=!1;break e;case 3:case 4:kt=k.stateNode.containerInfo,Pn=!0;break e}k=k.return}if(kt===null)throw Error(s(160));Px(b,S,x),kt=null,Pn=!1,b=x.alternate,b!==null&&(b.return=null),x.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Vx(r,i),r=r.sibling}var ks=null;function Vx(i,r){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ln(r,i),Un(i),d&4&&(yr(3,i,i.return),rc(3,i),yr(5,i,i.return));break;case 1:Ln(r,i),Un(i),d&512&&(Jt||l===null||ai(l,l.return)),d&64&&Ii&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var x=ks;if(Ln(r,i),Un(i),d&512&&(Jt||l===null||ai(l,l.return)),d&4){var b=l!==null?l.memoizedState:null;if(d=i.memoizedState,l===null)if(d===null)if(i.stateNode===null){e:{d=i.type,l=i.memoizedProps,x=x.ownerDocument||x;t:switch(d){case"title":b=x.getElementsByTagName("title")[0],(!b||b[Ks]||b[zt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=x.createElement(d),x.head.insertBefore(b,x.querySelector("head > title"))),hn(b,d,l),b[zt]=i,Ft(b),d=b;break e;case"link":var S=Vv("link","href",x).get(d+(l.href||""));if(S){for(var k=0;k<S.length;k++)if(b=S[k],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(k,1);break t}}b=x.createElement(d),hn(b,d,l),x.head.appendChild(b);break;case"meta":if(S=Vv("meta","content",x).get(d+(l.content||""))){for(k=0;k<S.length;k++)if(b=S[k],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(k,1);break t}}b=x.createElement(d),hn(b,d,l),x.head.appendChild(b);break;default:throw Error(s(468,d))}b[zt]=i,Ft(b),d=b}i.stateNode=d}else Ov(x,i.type,i.stateNode);else i.stateNode=Uv(x,d,i.memoizedProps);else b!==d?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,d===null?Ov(x,i.type,i.stateNode):Uv(x,d,i.memoizedProps)):d===null&&i.stateNode!==null&&xm(i,i.memoizedProps,l.memoizedProps)}break;case 27:Ln(r,i),Un(i),d&512&&(Jt||l===null||ai(l,l.return)),l!==null&&d&4&&xm(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Ln(r,i),Un(i),d&512&&(Jt||l===null||ai(l,l.return)),i.flags&32){x=i.stateNode;try{Dn(x,"")}catch(Ne){mt(i,i.return,Ne)}}d&4&&i.stateNode!=null&&(x=i.memoizedProps,xm(i,x,l!==null?l.memoizedProps:x)),d&1024&&(_m=!0);break;case 6:if(Ln(r,i),Un(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,l=i.stateNode;try{l.nodeValue=d}catch(Ne){mt(i,i.return,Ne)}}break;case 3:if(gd=null,x=ks,ks=md(r.containerInfo),Ln(r,i),ks=x,Un(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{jo(r.containerInfo)}catch(Ne){mt(i,i.return,Ne)}_m&&(_m=!1,Ox(i));break;case 4:d=ks,ks=md(i.stateNode.containerInfo),Ln(r,i),Un(i),ks=d;break;case 12:Ln(r,i),Un(i);break;case 31:Ln(r,i),Un(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,ed(i,d)));break;case 13:Ln(r,i),Un(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(nd=ln()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,ed(i,d)));break;case 22:x=i.memoizedState!==null;var z=l!==null&&l.memoizedState!==null,X=Ii,ae=Jt;if(Ii=X||x,Jt=ae||z,Ln(r,i),Jt=ae,Ii=X,Un(i),d&8192)e:for(r=i.stateNode,r._visibility=x?r._visibility&-2:r._visibility|1,x&&(l===null||z||Ii||Jt||Na(i)),l=null,r=i;;){if(r.tag===5||r.tag===26){if(l===null){z=l=r;try{if(b=z.stateNode,x)S=b.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{k=z.stateNode;var fe=z.memoizedProps.style,te=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;k.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ne){mt(z,z.return,Ne)}}}else if(r.tag===6){if(l===null){z=r;try{z.stateNode.nodeValue=x?"":z.memoizedProps}catch(Ne){mt(z,z.return,Ne)}}}else if(r.tag===18){if(l===null){z=r;try{var ie=z.stateNode;x?Nv(ie,!0):Nv(z.stateNode,!1)}catch(Ne){mt(z,z.return,Ne)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=i.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,ed(i,l))));break;case 19:Ln(r,i),Un(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,ed(i,d)));break;case 30:break;case 21:break;default:Ln(r,i),Un(i)}}function Un(i){var r=i.flags;if(r&2){try{for(var l,d=i.return;d!==null;){if(Ix(d)){l=d;break}d=d.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var x=l.stateNode,b=vm(i);Zu(i,b,x);break;case 5:var S=l.stateNode;l.flags&32&&(Dn(S,""),l.flags&=-33);var k=vm(i);Zu(i,k,S);break;case 3:case 4:var z=l.stateNode.containerInfo,X=vm(i);bm(i,X,z);break;default:throw Error(s(161))}}catch(ae){mt(i,i.return,ae)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Ox(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;Ox(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Ri(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Mx(i,r.alternate,r),r=r.sibling}function Na(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:yr(4,r,r.return),Na(r);break;case 1:ai(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Nx(r,r.return,l),Na(r);break;case 27:pc(r.stateNode);case 26:case 5:ai(r,r.return),Na(r);break;case 22:r.memoizedState===null&&Na(r);break;case 30:Na(r);break;default:Na(r)}i=i.sibling}}function Mi(i,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,x=i,b=r,S=b.flags;switch(b.tag){case 0:case 11:case 15:Mi(x,b,l),rc(4,b);break;case 1:if(Mi(x,b,l),d=b,x=d.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(X){mt(d,d.return,X)}if(d=b,x=d.updateQueue,x!==null){var k=d.stateNode;try{var z=x.shared.hiddenCallbacks;if(z!==null)for(x.shared.hiddenCallbacks=null,x=0;x<z.length;x++)py(z[x],k)}catch(X){mt(d,d.return,X)}}l&&S&64&&wx(b),ac(b,b.return);break;case 27:kx(b);case 26:case 5:Mi(x,b,l),l&&d===null&&S&4&&Cx(b),ac(b,b.return);break;case 12:Mi(x,b,l);break;case 31:Mi(x,b,l),l&&S&4&&Lx(x,b);break;case 13:Mi(x,b,l),l&&S&4&&Ux(x,b);break;case 22:b.memoizedState===null&&Mi(x,b,l),ac(b,b.return);break;case 30:break;default:Mi(x,b,l)}r=r.sibling}}function Tm(i,r){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Kl(l))}function Em(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Kl(i))}function Rs(i,r,l,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)jx(i,r,l,d),r=r.sibling}function jx(i,r,l,d){var x=r.flags;switch(r.tag){case 0:case 11:case 15:Rs(i,r,l,d),x&2048&&rc(9,r);break;case 1:Rs(i,r,l,d);break;case 3:Rs(i,r,l,d),x&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Kl(i)));break;case 12:if(x&2048){Rs(i,r,l,d),i=r.stateNode;try{var b=r.memoizedProps,S=b.id,k=b.onPostCommit;typeof k=="function"&&k(S,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(z){mt(r,r.return,z)}}else Rs(i,r,l,d);break;case 31:Rs(i,r,l,d);break;case 13:Rs(i,r,l,d);break;case 23:break;case 22:b=r.stateNode,S=r.alternate,r.memoizedState!==null?b._visibility&2?Rs(i,r,l,d):oc(i,r):b._visibility&2?Rs(i,r,l,d):(b._visibility|=2,Co(i,r,l,d,(r.subtreeFlags&10256)!==0||!1)),x&2048&&Tm(S,r);break;case 24:Rs(i,r,l,d),x&2048&&Em(r.alternate,r);break;default:Rs(i,r,l,d)}}function Co(i,r,l,d,x){for(x=x&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var b=i,S=r,k=l,z=d,X=S.flags;switch(S.tag){case 0:case 11:case 15:Co(b,S,k,z,x),rc(8,S);break;case 23:break;case 22:var ae=S.stateNode;S.memoizedState!==null?ae._visibility&2?Co(b,S,k,z,x):oc(b,S):(ae._visibility|=2,Co(b,S,k,z,x)),x&&X&2048&&Tm(S.alternate,S);break;case 24:Co(b,S,k,z,x),x&&X&2048&&Em(S.alternate,S);break;default:Co(b,S,k,z,x)}r=r.sibling}}function oc(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=i,d=r,x=d.flags;switch(d.tag){case 22:oc(l,d),x&2048&&Tm(d.alternate,d);break;case 24:oc(l,d),x&2048&&Em(d.alternate,d);break;default:oc(l,d)}r=r.sibling}}var lc=8192;function Io(i,r,l){if(i.subtreeFlags&lc)for(i=i.child;i!==null;)Gx(i,r,l),i=i.sibling}function Gx(i,r,l){switch(i.tag){case 26:Io(i,r,l),i.flags&lc&&i.memoizedState!==null&&q1(l,ks,i.memoizedState,i.memoizedProps);break;case 5:Io(i,r,l);break;case 3:case 4:var d=ks;ks=md(i.stateNode.containerInfo),Io(i,r,l),ks=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=lc,lc=16777216,Io(i,r,l),lc=d):Io(i,r,l));break;default:Io(i,r,l)}}function Bx(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function cc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];rn=d,zx(d,i)}Bx(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Hx(i),i=i.sibling}function Hx(i){switch(i.tag){case 0:case 11:case 15:cc(i),i.flags&2048&&yr(9,i,i.return);break;case 3:cc(i);break;case 12:cc(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,td(i)):cc(i);break;default:cc(i)}}function td(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];rn=d,zx(d,i)}Bx(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:yr(8,r,r.return),td(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,td(r));break;default:td(r)}i=i.sibling}}function zx(i,r){for(;rn!==null;){var l=rn;switch(l.tag){case 0:case 11:case 15:yr(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Kl(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,rn=d;else e:for(l=i;rn!==null;){d=rn;var x=d.sibling,b=d.return;if(Dx(d),d===l){rn=null;break e}if(x!==null){x.return=b,rn=x;break e}rn=b}}}var a1={getCacheForType:function(i){var r=dn(Kt),l=r.data.get(i);return l===void 0&&(l=i(),r.data.set(i,l)),l},cacheSignal:function(){return dn(Kt).controller.signal}},o1=typeof WeakMap=="function"?WeakMap:Map,lt=0,_t=null,$e=null,Je=0,ht=0,Jn=null,xr=!1,ko=!1,Sm=!1,Di=0,Lt=0,vr=0,Ca=0,Am=0,Qn=0,Ro=0,uc=null,Vn=null,wm=!1,nd=0,Fx=0,sd=1/0,id=null,br=null,en=0,_r=null,Mo=null,Pi=0,Nm=0,Cm=null,qx=null,dc=0,Im=null;function Wn(){return(lt&2)!==0&&Je!==0?Je&-Je:J.T!==null?Lm():ru()}function Kx(){if(Qn===0)if((Je&536870912)===0||nt){var i=Fs;Fs<<=1,(Fs&3932160)===0&&(Fs=262144),Qn=i}else Qn=536870912;return i=$n.current,i!==null&&(i.flags|=32),Qn}function On(i,r,l){(i===_t&&(ht===2||ht===9)||i.cancelPendingCommit!==null)&&(Do(i,0),Tr(i,Je,Qn,!1)),_s(i,l),((lt&2)===0||i!==_t)&&(i===_t&&((lt&2)===0&&(Ca|=l),Lt===4&&Tr(i,Je,Qn,!1)),oi(i))}function $x(i,r,l){if((lt&6)!==0)throw Error(s(327));var d=!l&&(r&127)===0&&(r&i.expiredLanes)===0||Et(i,r),x=d?u1(i,r):Rm(i,r,!0),b=d;do{if(x===0){ko&&!d&&Tr(i,r,0,!1);break}else{if(l=i.current.alternate,b&&!l1(l)){x=Rm(i,r,!1),b=!1;continue}if(x===2){if(b=r,i.errorRecoveryDisabledLanes&b)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var k=i;x=uc;var z=k.current.memoizedState.isDehydrated;if(z&&(Do(k,S).flags|=256),S=Rm(k,S,!1),S!==2){if(Sm&&!z){k.errorRecoveryDisabledLanes|=b,Ca|=b,x=4;break e}b=Vn,Vn=x,b!==null&&(Vn===null?Vn=b:Vn.push.apply(Vn,b))}x=S}if(b=!1,x!==2)continue}}if(x===1){Do(i,0),Tr(i,r,0,!0);break}e:{switch(d=i,b=x,b){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Tr(d,r,Qn,!xr);break e;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(x=nd+300-ln(),10<x)){if(Tr(d,r,Qn,!xr),Ke(d,0,!0)!==0)break e;Pi=r,d.timeoutHandle=Sv(Yx.bind(null,d,l,Vn,id,wm,r,Qn,Ca,Ro,xr,b,"Throttled",-0,0),x);break e}Yx(d,l,Vn,id,wm,r,Qn,Ca,Ro,xr,b,null,-0,0)}}break}while(!0);oi(i)}function Yx(i,r,l,d,x,b,S,k,z,X,ae,fe,te,ie){if(i.timeoutHandle=-1,fe=r.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ss},Gx(r,b,fe);var Ne=(b&62914560)===b?nd-ln():(b&4194048)===b?Fx-ln():0;if(Ne=K1(fe,Ne),Ne!==null){Pi=b,i.cancelPendingCommit=Ne(nv.bind(null,i,r,b,l,d,x,S,k,z,ae,fe,null,te,ie)),Tr(i,b,S,!X);return}}nv(i,r,b,l,d,x,S,k,z)}function l1(i){for(var r=i;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var x=l[d],b=x.getSnapshot;x=x.value;try{if(!qn(b(),x))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Tr(i,r,l,d){r&=~Am,r&=~Ca,i.suspendedLanes|=r,i.pingedLanes&=~r,d&&(i.warmLanes|=r),d=i.expirationTimes;for(var x=r;0<x;){var b=31-Mt(x),S=1<<b;d[b]=-1,x&=~S}l!==0&&sa(i,l,r)}function rd(){return(lt&6)===0?(fc(0),!1):!0}function km(){if($e!==null){if(ht===0)var i=$e.return;else i=$e,Ei=va=null,Kh(i),Eo=null,Yl=0,i=$e;for(;i!==null;)Ax(i.alternate,i),i=i.return;$e=null}}function Do(i,r){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,C1(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Pi=0,km(),_t=i,$e=l=_i(i.current,null),Je=r,ht=0,Jn=null,xr=!1,ko=Et(i,r),Sm=!1,Ro=Qn=Am=Ca=vr=Lt=0,Vn=uc=null,wm=!1,(r&8)!==0&&(r|=r&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=r;0<d;){var x=31-Mt(d),b=1<<x;r|=i[x],d&=~b}return Di=r,wu(),l}function Jx(i,r){ze=null,J.H=nc,r===To||r===Pu?(r=dy(),ht=3):r===Ph?(r=dy(),ht=4):ht=r===lm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Jn=r,$e===null&&(Lt=1,Yu(i,as(r,i.current)))}function Qx(){var i=$n.current;return i===null?!0:(Je&4194048)===Je?us===null:(Je&62914560)===Je||(Je&536870912)!==0?i===us:!1}function Wx(){var i=J.H;return J.H=nc,i===null?nc:i}function Xx(){var i=J.A;return J.A=a1,i}function ad(){Lt=4,xr||(Je&4194048)!==Je&&$n.current!==null||(ko=!0),(vr&134217727)===0&&(Ca&134217727)===0||_t===null||Tr(_t,Je,Qn,!1)}function Rm(i,r,l){var d=lt;lt|=2;var x=Wx(),b=Xx();(_t!==i||Je!==r)&&(id=null,Do(i,r)),r=!1;var S=Lt;e:do try{if(ht!==0&&$e!==null){var k=$e,z=Jn;switch(ht){case 8:km(),S=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(r=!0);var X=ht;if(ht=0,Jn=null,Po(i,k,z,X),l&&ko){S=0;break e}break;default:X=ht,ht=0,Jn=null,Po(i,k,z,X)}}c1(),S=Lt;break}catch(ae){Jx(i,ae)}while(!0);return r&&i.shellSuspendCounter++,Ei=va=null,lt=d,J.H=x,J.A=b,$e===null&&(_t=null,Je=0,wu()),S}function c1(){for(;$e!==null;)Zx($e)}function u1(i,r){var l=lt;lt|=2;var d=Wx(),x=Xx();_t!==i||Je!==r?(id=null,sd=ln()+500,Do(i,r)):ko=Et(i,r);e:do try{if(ht!==0&&$e!==null){r=$e;var b=Jn;t:switch(ht){case 1:ht=0,Jn=null,Po(i,r,b,1);break;case 2:case 9:if(cy(b)){ht=0,Jn=null,ev(r);break}r=function(){ht!==2&&ht!==9||_t!==i||(ht=7),oi(i)},b.then(r,r);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:cy(b)?(ht=0,Jn=null,ev(r)):(ht=0,Jn=null,Po(i,r,b,7));break;case 5:var S=null;switch($e.tag){case 26:S=$e.memoizedState;case 5:case 27:var k=$e;if(S?jv(S):k.stateNode.complete){ht=0,Jn=null;var z=k.sibling;if(z!==null)$e=z;else{var X=k.return;X!==null?($e=X,od(X)):$e=null}break t}}ht=0,Jn=null,Po(i,r,b,5);break;case 6:ht=0,Jn=null,Po(i,r,b,6);break;case 8:km(),Lt=6;break e;default:throw Error(s(462))}}d1();break}catch(ae){Jx(i,ae)}while(!0);return Ei=va=null,J.H=d,J.A=x,lt=l,$e!==null?0:(_t=null,Je=0,wu(),Lt)}function d1(){for(;$e!==null&&!Qi();)Zx($e)}function Zx(i){var r=Ex(i.alternate,i,Di);i.memoizedProps=i.pendingProps,r===null?od(i):$e=r}function ev(i){var r=i,l=r.alternate;switch(r.tag){case 15:case 0:r=yx(l,r,r.pendingProps,r.type,void 0,Je);break;case 11:r=yx(l,r,r.pendingProps,r.type.render,r.ref,Je);break;case 5:Kh(r);default:Ax(l,r),r=$e=X0(r,Di),r=Ex(l,r,Di)}i.memoizedProps=i.pendingProps,r===null?od(i):$e=r}function Po(i,r,l,d){Ei=va=null,Kh(r),Eo=null,Yl=0;var x=r.return;try{if(ZN(i,x,r,l,Je)){Lt=1,Yu(i,as(l,i.current)),$e=null;return}}catch(b){if(x!==null)throw $e=x,b;Lt=1,Yu(i,as(l,i.current)),$e=null;return}r.flags&32768?(nt||d===1?i=!0:ko||(Je&536870912)!==0?i=!1:(xr=i=!0,(d===2||d===9||d===3||d===6)&&(d=$n.current,d!==null&&d.tag===13&&(d.flags|=16384))),tv(r,i)):od(r)}function od(i){var r=i;do{if((r.flags&32768)!==0){tv(r,xr);return}i=r.return;var l=n1(r.alternate,r,Di);if(l!==null){$e=l;return}if(r=r.sibling,r!==null){$e=r;return}$e=r=i}while(r!==null);Lt===0&&(Lt=5)}function tv(i,r){do{var l=s1(i.alternate,i);if(l!==null){l.flags&=32767,$e=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(i=i.sibling,i!==null)){$e=i;return}$e=i=l}while(i!==null);Lt=6,$e=null}function nv(i,r,l,d,x,b,S,k,z){i.cancelPendingCommit=null;do ld();while(en!==0);if((lt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(b=r.lanes|r.childLanes,b|=vh,uh(i,l,b,S,k,z),i===_t&&($e=_t=null,Je=0),Mo=r,_r=i,Pi=l,Nm=b,Cm=x,qx=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,p1(vs,function(){return ov(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=J.T,J.T=null,x=he.p,he.p=2,S=lt,lt|=4;try{i1(i,r,l)}finally{lt=S,he.p=x,J.T=d}}en=1,sv(),iv(),rv()}}function sv(){if(en===1){en=0;var i=_r,r=Mo,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=J.T,J.T=null;var d=he.p;he.p=2;var x=lt;lt|=4;try{Vx(r,i);var b=zm,S=z0(i.containerInfo),k=b.focusedElem,z=b.selectionRange;if(S!==k&&k&&k.ownerDocument&&H0(k.ownerDocument.documentElement,k)){if(z!==null&&mh(k)){var X=z.start,ae=z.end;if(ae===void 0&&(ae=X),"selectionStart"in k)k.selectionStart=X,k.selectionEnd=Math.min(ae,k.value.length);else{var fe=k.ownerDocument||document,te=fe&&fe.defaultView||window;if(te.getSelection){var ie=te.getSelection(),Ne=k.textContent.length,Le=Math.min(z.start,Ne),xt=z.end===void 0?Le:Math.min(z.end,Ne);!ie.extend&&Le>xt&&(S=xt,xt=Le,Le=S);var Y=B0(k,Le),q=B0(k,xt);if(Y&&q&&(ie.rangeCount!==1||ie.anchorNode!==Y.node||ie.anchorOffset!==Y.offset||ie.focusNode!==q.node||ie.focusOffset!==q.offset)){var W=fe.createRange();W.setStart(Y.node,Y.offset),ie.removeAllRanges(),Le>xt?(ie.addRange(W),ie.extend(q.node,q.offset)):(W.setEnd(q.node,q.offset),ie.addRange(W))}}}}for(fe=[],ie=k;ie=ie.parentNode;)ie.nodeType===1&&fe.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<fe.length;k++){var ue=fe[k];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}bd=!!Hm,zm=Hm=null}finally{lt=x,he.p=d,J.T=l}}i.current=r,en=2}}function iv(){if(en===2){en=0;var i=_r,r=Mo,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=J.T,J.T=null;var d=he.p;he.p=2;var x=lt;lt|=4;try{Mx(i,r.alternate,r)}finally{lt=x,he.p=d,J.T=l}}en=3}}function rv(){if(en===4||en===3){en=0,Ja();var i=_r,r=Mo,l=Pi,d=qx;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?en=5:(en=0,Mo=_r=null,av(i,i.pendingLanes));var x=i.pendingLanes;if(x===0&&(br=null),yi(l),r=r.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Hn,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=J.T,x=he.p,he.p=2,J.T=null;try{for(var b=i.onRecoverableError,S=0;S<d.length;S++){var k=d[S];b(k.value,{componentStack:k.stack})}}finally{J.T=r,he.p=x}}(Pi&3)!==0&&ld(),oi(i),x=i.pendingLanes,(l&261930)!==0&&(x&42)!==0?i===Im?dc++:(dc=0,Im=i):dc=0,fc(0)}}function av(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Kl(r)))}function ld(){return sv(),iv(),rv(),ov()}function ov(){if(en!==5)return!1;var i=_r,r=Nm;Nm=0;var l=yi(Pi),d=J.T,x=he.p;try{he.p=32>l?32:l,J.T=null,l=Cm,Cm=null;var b=_r,S=Pi;if(en=0,Mo=_r=null,Pi=0,(lt&6)!==0)throw Error(s(331));var k=lt;if(lt|=4,Hx(b.current),jx(b,b.current,S,l),lt=k,fc(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Hn,b)}catch{}return!0}finally{he.p=x,J.T=d,av(i,r)}}function lv(i,r,l){r=as(l,r),r=om(i.stateNode,r,2),i=mr(i,r,2),i!==null&&(_s(i,2),oi(i))}function mt(i,r,l){if(i.tag===3)lv(i,i,l);else for(;r!==null;){if(r.tag===3){lv(r,i,l);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(br===null||!br.has(d))){i=as(l,i),l=cx(2),d=mr(r,l,2),d!==null&&(ux(l,d,r,i),_s(d,2),oi(d));break}}r=r.return}}function Mm(i,r,l){var d=i.pingCache;if(d===null){d=i.pingCache=new o1;var x=new Set;d.set(r,x)}else x=d.get(r),x===void 0&&(x=new Set,d.set(r,x));x.has(l)||(Sm=!0,x.add(l),i=f1.bind(null,i,r,l),r.then(i,i))}function f1(i,r,l){var d=i.pingCache;d!==null&&d.delete(r),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,_t===i&&(Je&l)===l&&(Lt===4||Lt===3&&(Je&62914560)===Je&&300>ln()-nd?(lt&2)===0&&Do(i,0):Am|=l,Ro===Je&&(Ro=0)),oi(i)}function cv(i,r){r===0&&(r=Xi()),i=ga(i,r),i!==null&&(_s(i,r),oi(i))}function h1(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),cv(i,l)}function m1(i,r){var l=0;switch(i.tag){case 31:case 13:var d=i.stateNode,x=i.memoizedState;x!==null&&(l=x.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(r),cv(i,l)}function p1(i,r){return tt(i,r)}var cd=null,Lo=null,Dm=!1,ud=!1,Pm=!1,Er=0;function oi(i){i!==Lo&&i.next===null&&(Lo===null?cd=Lo=i:Lo=Lo.next=i),ud=!0,Dm||(Dm=!0,y1())}function fc(i,r){if(!Pm&&ud){Pm=!0;do for(var l=!1,d=cd;d!==null;){if(i!==0){var x=d.pendingLanes;if(x===0)var b=0;else{var S=d.suspendedLanes,k=d.pingedLanes;b=(1<<31-Mt(42|i)+1)-1,b&=x&~(S&~k),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,hv(d,b))}else b=Je,b=Ke(d,d===_t?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||Et(d,b)||(l=!0,hv(d,b));d=d.next}while(l);Pm=!1}}function g1(){uv()}function uv(){ud=Dm=!1;var i=0;Er!==0&&N1()&&(i=Er);for(var r=ln(),l=null,d=cd;d!==null;){var x=d.next,b=dv(d,r);b===0?(d.next=null,l===null?cd=x:l.next=x,x===null&&(Lo=l)):(l=d,(i!==0||(b&3)!==0)&&(ud=!0)),d=x}en!==0&&en!==5||fc(i),Er!==0&&(Er=0)}function dv(i,r){for(var l=i.suspendedLanes,d=i.pingedLanes,x=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var S=31-Mt(b),k=1<<S,z=x[S];z===-1?((k&l)===0||(k&d)!==0)&&(x[S]=Ct(k,r)):z<=r&&(i.expiredLanes|=k),b&=~k}if(r=_t,l=Je,l=Ke(i,i===r?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,l===0||i===r&&(ht===2||ht===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&zs(d),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Et(i,l)){if(r=l&-l,r===i.callbackPriority)return r;switch(d!==null&&zs(d),yi(l)){case 2:case 8:l=ta;break;case 32:l=vs;break;case 268435456:l=Qa;break;default:l=vs}return d=fv.bind(null,i),l=tt(l,d),i.callbackPriority=r,i.callbackNode=l,r}return d!==null&&d!==null&&zs(d),i.callbackPriority=2,i.callbackNode=null,2}function fv(i,r){if(en!==0&&en!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(ld()&&i.callbackNode!==l)return null;var d=Je;return d=Ke(i,i===_t?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:($x(i,d,r),dv(i,ln()),i.callbackNode!=null&&i.callbackNode===l?fv.bind(null,i):null)}function hv(i,r){if(ld())return null;$x(i,r,!0)}function y1(){I1(function(){(lt&6)!==0?tt(ea,g1):uv()})}function Lm(){if(Er===0){var i=bo;i===0&&(i=Zn,Zn<<=1,(Zn&261888)===0&&(Zn=256)),Er=i}return Er}function mv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:io(""+i)}function pv(i,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,i.id&&l.setAttribute("form",i.id),r.parentNode.insertBefore(l,r),i=new FormData(i),l.parentNode.removeChild(l),i}function x1(i,r,l,d,x){if(r==="submit"&&l&&l.stateNode===x){var b=mv((x[nn]||null).action),S=d.submitter;S&&(r=(r=S[nn]||null)?mv(r.formAction):S.getAttribute("formAction"),r!==null&&(b=r,S=null));var k=new ei("action","action",null,d,x);i.push({event:k,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Er!==0){var z=S?pv(x,S):new FormData(x);tm(l,{pending:!0,data:z,method:x.method,action:b},null,z)}}else typeof b=="function"&&(k.preventDefault(),z=S?pv(x,S):new FormData(x),tm(l,{pending:!0,data:z,method:x.method,action:b},b,z))},currentTarget:x}]})}}for(var Um=0;Um<xh.length;Um++){var Vm=xh[Um],v1=Vm.toLowerCase(),b1=Vm[0].toUpperCase()+Vm.slice(1);Is(v1,"on"+b1)}Is(K0,"onAnimationEnd"),Is($0,"onAnimationIteration"),Is(Y0,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(UN,"onTransitionRun"),Is(VN,"onTransitionStart"),Is(ON,"onTransitionCancel"),Is(J0,"onTransitionEnd"),Qs("onMouseEnter",["mouseout","mouseover"]),Qs("onMouseLeave",["mouseout","mouseover"]),Qs("onPointerEnter",["pointerout","pointerover"]),Qs("onPointerLeave",["pointerout","pointerover"]),Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Js("onBeforeInput",["compositionend","keypress","textInput","paste"]),Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hc));function gv(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],x=d.event;d=d.listeners;e:{var b=void 0;if(r)for(var S=d.length-1;0<=S;S--){var k=d[S],z=k.instance,X=k.currentTarget;if(k=k.listener,z!==b&&x.isPropagationStopped())break e;b=k,x.currentTarget=X;try{b(x)}catch(ae){Au(ae)}x.currentTarget=null,b=z}else for(S=0;S<d.length;S++){if(k=d[S],z=k.instance,X=k.currentTarget,k=k.listener,z!==b&&x.isPropagationStopped())break e;b=k,x.currentTarget=X;try{b(x)}catch(ae){Au(ae)}x.currentTarget=null,b=z}}}}function Ye(i,r){var l=r[Za];l===void 0&&(l=r[Za]=new Set);var d=i+"__bubble";l.has(d)||(yv(r,i,2,!1),l.add(d))}function Om(i,r,l){var d=0;r&&(d|=4),yv(l,i,d,r)}var dd="_reactListening"+Math.random().toString(36).slice(2);function jm(i){if(!i[dd]){i[dd]=!0,Al.forEach(function(l){l!=="selectionchange"&&(_1.has(l)||Om(l,!1,i),Om(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[dd]||(r[dd]=!0,Om("selectionchange",!1,r))}}function yv(i,r,l,d){switch(Kv(r)){case 2:var x=J1;break;case 8:x=Q1;break;default:x=ep}l=x.bind(null,r,l,i),x=void 0,!la||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(x=!0),d?x!==void 0?i.addEventListener(r,l,{capture:!0,passive:x}):i.addEventListener(r,l,!0):x!==void 0?i.addEventListener(r,l,{passive:x}):i.addEventListener(r,l,!1)}function Gm(i,r,l,d,x){var b=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var k=d.stateNode.containerInfo;if(k===x)break;if(S===4)for(S=d.return;S!==null;){var z=S.tag;if((z===3||z===4)&&S.stateNode.containerInfo===x)return;S=S.return}for(;k!==null;){if(S=$s(k),S===null)return;if(z=S.tag,z===5||z===6||z===26||z===27){d=b=S;continue e}k=k.parentNode}}d=d.return}ir(function(){var X=b,ae=ns(l),fe=[];e:{var te=Q0.get(i);if(te!==void 0){var ie=ei,Ne=i;switch(i){case"keypress":if(ua(l)===0)break e;case"keydown":case"keyup":ie=Tu;break;case"focusin":Ne="focus",ie=fa;break;case"focusout":Ne="blur",ie=fa;break;case"beforeblur":case"afterblur":ie=fa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=E;break;case K0:case $0:case Y0:ie=pu;break;case J0:ie=P;break;case"scroll":case"scrollend":ie=Vl;break;case"wheel":ie=se;break;case"copy":case"cut":case"paste":ie=gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=bi;break;case"toggle":case"beforetoggle":ie=He}var Le=(r&4)!==0,xt=!Le&&(i==="scroll"||i==="scrollend"),Y=Le?te!==null?te+"Capture":null:te;Le=[];for(var q=X,W;q!==null;){var ue=q;if(W=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||W===null||Y===null||(ue=As(q,Y),ue!=null&&Le.push(mc(q,ue,W))),xt)break;q=q.return}0<Le.length&&(te=new ie(te,Ne,null,l,ae),fe.push({event:te,listeners:Le}))}}if((r&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ie=i==="mouseout"||i==="pointerout",te&&l!==Pl&&(Ne=l.relatedTarget||l.fromElement)&&($s(Ne)||Ne[qs]))break e;if((ie||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(Ne=l.relatedTarget||l.toElement,ie=X,Ne=Ne?$s(Ne):null,Ne!==null&&(xt=o(Ne),Le=Ne.tag,Ne!==xt||Le!==5&&Le!==27&&Le!==6)&&(Ne=null)):(ie=null,Ne=X),ie!==Ne)){if(Le=Ol,ue="onMouseLeave",Y="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Le=bi,ue="onPointerLeave",Y="onPointerEnter",q="pointer"),xt=ie==null?te:zn(ie),W=Ne==null?te:zn(Ne),te=new Le(ue,q+"leave",ie,l,ae),te.target=xt,te.relatedTarget=W,ue=null,$s(ae)===X&&(Le=new Le(Y,q+"enter",Ne,l,ae),Le.target=W,Le.relatedTarget=xt,ue=Le),xt=ue,ie&&Ne)t:{for(Le=T1,Y=ie,q=Ne,W=0,ue=Y;ue;ue=Le(ue))W++;ue=0;for(var Me=q;Me;Me=Le(Me))ue++;for(;0<W-ue;)Y=Le(Y),W--;for(;0<ue-W;)q=Le(q),ue--;for(;W--;){if(Y===q||q!==null&&Y===q.alternate){Le=Y;break t}Y=Le(Y),q=Le(q)}Le=null}else Le=null;ie!==null&&xv(fe,te,ie,Le,!1),Ne!==null&&xt!==null&&xv(fe,xt,Ne,Le,!0)}}e:{if(te=X?zn(X):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var it=L0;else if(D0(te))if(U0)it=DN;else{it=RN;var Ie=kN}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?X&&so(X.elementType)&&(it=L0):it=MN;if(it&&(it=it(i,X))){P0(fe,it,l,ae);break e}Ie&&Ie(i,te,X),i==="focusout"&&X&&te.type==="number"&&X.memoizedProps.value!=null&&Rl(te,"number",te.value)}switch(Ie=X?zn(X):window,i){case"focusin":(D0(Ie)||Ie.contentEditable==="true")&&(fo=Ie,ph=X,zl=null);break;case"focusout":zl=ph=fo=null;break;case"mousedown":gh=!0;break;case"contextmenu":case"mouseup":case"dragend":gh=!1,F0(fe,l,ae);break;case"selectionchange":if(LN)break;case"keydown":case"keyup":F0(fe,l,ae)}var Fe;if(ot)e:{switch(i){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else uo?ha(i,l)&&(Qe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Qe="onCompositionStart");Qe&&(si&&l.locale!=="ko"&&(uo||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&uo&&(Fe=Ul()):(Zs=ae,Ll="value"in Zs?Zs.value:Zs.textContent,uo=!0)),Ie=fd(X,Qe),0<Ie.length&&(Qe=new ni(Qe,i,null,l,ae),fe.push({event:Qe,listeners:Ie}),Fe?Qe.data=Fe:(Fe=co(l),Fe!==null&&(Qe.data=Fe)))),(Fe=is?wN(i,l):NN(i,l))&&(Qe=fd(X,"onBeforeInput"),0<Qe.length&&(Ie=new ni("onBeforeInput","beforeinput",null,l,ae),fe.push({event:Ie,listeners:Qe}),Ie.data=Fe)),x1(fe,i,X,l,ae)}gv(fe,r)})}function mc(i,r,l){return{instance:i,listener:r,currentTarget:l}}function fd(i,r){for(var l=r+"Capture",d=[];i!==null;){var x=i,b=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||b===null||(x=As(i,l),x!=null&&d.unshift(mc(i,x,b)),x=As(i,r),x!=null&&d.push(mc(i,x,b))),i.tag===3)return d;i=i.return}return[]}function T1(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function xv(i,r,l,d,x){for(var b=r._reactName,S=[];l!==null&&l!==d;){var k=l,z=k.alternate,X=k.stateNode;if(k=k.tag,z!==null&&z===d)break;k!==5&&k!==26&&k!==27||X===null||(z=X,x?(X=As(l,b),X!=null&&S.unshift(mc(l,X,z))):x||(X=As(l,b),X!=null&&S.push(mc(l,X,z)))),l=l.return}S.length!==0&&i.push({event:r,listeners:S})}var E1=/\r\n?/g,S1=/\u0000|\uFFFD/g;function vv(i){return(typeof i=="string"?i:""+i).replace(E1,`
`).replace(S1,"")}function bv(i,r){return r=vv(r),vv(i)===r}function yt(i,r,l,d,x,b){switch(l){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||Dn(i,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&Dn(i,""+d);break;case"className":Fn(i,"class",d);break;case"tabIndex":Fn(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Fn(i,l,d);break;case"style":Dl(i,d,b);break;case"data":if(r!=="object"){Fn(i,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||l!=="href")){i.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=io(""+d),i.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(r!=="input"&&yt(i,r,"name",x.name,x,null),yt(i,r,"formEncType",x.formEncType,x,null),yt(i,r,"formMethod",x.formMethod,x,null),yt(i,r,"formTarget",x.formTarget,x,null)):(yt(i,r,"encType",x.encType,x,null),yt(i,r,"method",x.method,x,null),yt(i,r,"target",x.target,x,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=io(""+d),i.setAttribute(l,d);break;case"onClick":d!=null&&(i.onclick=Ss);break;case"onScroll":d!=null&&Ye("scroll",i);break;case"onScrollEnd":d!=null&&Ye("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(x.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}l=io(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""+d):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":d===!0?i.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,d):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(l,d):i.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(l):i.setAttribute(l,d);break;case"popover":Ye("beforetoggle",i),Ye("toggle",i),to(i,"popover",d);break;case"xlinkActuate":qt(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":qt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":qt(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":qt(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":qt(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":qt(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":qt(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":qt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":qt(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":to(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=fu.get(l)||l,to(i,l,d))}}function Bm(i,r,l,d,x,b){switch(l){case"style":Dl(i,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(x.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"children":typeof d=="string"?Dn(i,d):(typeof d=="number"||typeof d=="bigint")&&Dn(i,""+d);break;case"onScroll":d!=null&&Ye("scroll",i);break;case"onScrollEnd":d!=null&&Ye("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Ss);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(x=l.endsWith("Capture"),r=l.slice(2,x?l.length-7:void 0),b=i[nn]||null,b=b!=null?b[l]:null,typeof b=="function"&&i.removeEventListener(r,b,x),typeof d=="function")){typeof b!="function"&&b!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(r,d,x);break e}l in i?i[l]=d:d===!0?i.setAttribute(l,""):to(i,l,d)}}}function hn(i,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",i),Ye("load",i);var d=!1,x=!1,b;for(b in l)if(l.hasOwnProperty(b)){var S=l[b];if(S!=null)switch(b){case"src":d=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:yt(i,r,b,S,l,null)}}x&&yt(i,r,"srcSet",l.srcSet,l,null),d&&yt(i,r,"src",l.src,l,null);return;case"input":Ye("invalid",i);var k=b=S=x=null,z=null,X=null;for(d in l)if(l.hasOwnProperty(d)){var ae=l[d];if(ae!=null)switch(d){case"name":x=ae;break;case"type":S=ae;break;case"checked":z=ae;break;case"defaultChecked":X=ae;break;case"value":b=ae;break;case"defaultValue":k=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,r));break;default:yt(i,r,d,ae,l,null)}}cu(i,b,k,z,X,S,x,!1);return;case"select":Ye("invalid",i),d=S=b=null;for(x in l)if(l.hasOwnProperty(x)&&(k=l[x],k!=null))switch(x){case"value":b=k;break;case"defaultValue":S=k;break;case"multiple":d=k;default:yt(i,r,x,k,l,null)}r=b,l=S,i.multiple=!!d,r!=null?er(i,!!d,r,!1):l!=null&&er(i,!!d,l,!0);return;case"textarea":Ye("invalid",i),b=x=d=null;for(S in l)if(l.hasOwnProperty(S)&&(k=l[S],k!=null))switch(S){case"value":d=k;break;case"defaultValue":x=k;break;case"children":b=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:yt(i,r,S,k,l,null)}tr(i,d,x,b);return;case"option":for(z in l)if(l.hasOwnProperty(z)&&(d=l[z],d!=null))switch(z){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:yt(i,r,z,d,l,null)}return;case"dialog":Ye("beforetoggle",i),Ye("toggle",i),Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":Ye("load",i);break;case"video":case"audio":for(d=0;d<hc.length;d++)Ye(hc[d],i);break;case"image":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"embed":case"source":case"link":Ye("error",i),Ye("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in l)if(l.hasOwnProperty(X)&&(d=l[X],d!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:yt(i,r,X,d,l,null)}return;default:if(so(r)){for(ae in l)l.hasOwnProperty(ae)&&(d=l[ae],d!==void 0&&Bm(i,r,ae,d,l,void 0));return}}for(k in l)l.hasOwnProperty(k)&&(d=l[k],d!=null&&yt(i,r,k,d,l,null))}function A1(i,r,l,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,b=null,S=null,k=null,z=null,X=null,ae=null;for(ie in l){var fe=l[ie];if(l.hasOwnProperty(ie)&&fe!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":z=fe;default:d.hasOwnProperty(ie)||yt(i,r,ie,null,d,fe)}}for(var te in d){var ie=d[te];if(fe=l[te],d.hasOwnProperty(te)&&(ie!=null||fe!=null))switch(te){case"type":b=ie;break;case"name":x=ie;break;case"checked":X=ie;break;case"defaultChecked":ae=ie;break;case"value":S=ie;break;case"defaultValue":k=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,r));break;default:ie!==fe&&yt(i,r,te,ie,d,fe)}}no(i,S,k,z,X,ae,b,x);return;case"select":ie=S=k=te=null;for(b in l)if(z=l[b],l.hasOwnProperty(b)&&z!=null)switch(b){case"value":break;case"multiple":ie=z;default:d.hasOwnProperty(b)||yt(i,r,b,null,d,z)}for(x in d)if(b=d[x],z=l[x],d.hasOwnProperty(x)&&(b!=null||z!=null))switch(x){case"value":te=b;break;case"defaultValue":k=b;break;case"multiple":S=b;default:b!==z&&yt(i,r,x,b,d,z)}r=k,l=S,d=ie,te!=null?er(i,!!l,te,!1):!!d!=!!l&&(r!=null?er(i,!!l,r,!0):er(i,!!l,l?[]:"",!1));return;case"textarea":ie=te=null;for(k in l)if(x=l[k],l.hasOwnProperty(k)&&x!=null&&!d.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:yt(i,r,k,null,d,x)}for(S in d)if(x=d[S],b=l[S],d.hasOwnProperty(S)&&(x!=null||b!=null))switch(S){case"value":te=x;break;case"defaultValue":ie=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:x!==b&&yt(i,r,S,x,d,b)}uu(i,te,ie);return;case"option":for(var Ne in l)if(te=l[Ne],l.hasOwnProperty(Ne)&&te!=null&&!d.hasOwnProperty(Ne))switch(Ne){case"selected":i.selected=!1;break;default:yt(i,r,Ne,null,d,te)}for(z in d)if(te=d[z],ie=l[z],d.hasOwnProperty(z)&&te!==ie&&(te!=null||ie!=null))switch(z){case"selected":i.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:yt(i,r,z,te,d,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in l)te=l[Le],l.hasOwnProperty(Le)&&te!=null&&!d.hasOwnProperty(Le)&&yt(i,r,Le,null,d,te);for(X in d)if(te=d[X],ie=l[X],d.hasOwnProperty(X)&&te!==ie&&(te!=null||ie!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,r));break;default:yt(i,r,X,te,d,ie)}return;default:if(so(r)){for(var xt in l)te=l[xt],l.hasOwnProperty(xt)&&te!==void 0&&!d.hasOwnProperty(xt)&&Bm(i,r,xt,void 0,d,te);for(ae in d)te=d[ae],ie=l[ae],!d.hasOwnProperty(ae)||te===ie||te===void 0&&ie===void 0||Bm(i,r,ae,te,d,ie);return}}for(var Y in l)te=l[Y],l.hasOwnProperty(Y)&&te!=null&&!d.hasOwnProperty(Y)&&yt(i,r,Y,null,d,te);for(fe in d)te=d[fe],ie=l[fe],!d.hasOwnProperty(fe)||te===ie||te==null&&ie==null||yt(i,r,fe,te,d,ie)}function _v(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function w1(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var x=l[d],b=x.transferSize,S=x.initiatorType,k=x.duration;if(b&&k&&_v(S)){for(S=0,k=x.responseEnd,d+=1;d<l.length;d++){var z=l[d],X=z.startTime;if(X>k)break;var ae=z.transferSize,fe=z.initiatorType;ae&&_v(fe)&&(z=z.responseEnd,S+=ae*(z<k?1:(k-X)/(z-X)))}if(--d,r+=8*(b+S)/(x.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Hm=null,zm=null;function hd(i){return i.nodeType===9?i:i.ownerDocument}function Tv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ev(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Fm(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var qm=null;function N1(){var i=window.event;return i&&i.type==="popstate"?i===qm?!1:(qm=i,!0):(qm=null,!1)}var Sv=typeof setTimeout=="function"?setTimeout:void 0,C1=typeof clearTimeout=="function"?clearTimeout:void 0,Av=typeof Promise=="function"?Promise:void 0,I1=typeof queueMicrotask=="function"?queueMicrotask:typeof Av<"u"?function(i){return Av.resolve(null).then(i).catch(k1)}:Sv;function k1(i){setTimeout(function(){throw i})}function Sr(i){return i==="head"}function wv(i,r){var l=r,d=0;do{var x=l.nextSibling;if(i.removeChild(l),x&&x.nodeType===8)if(l=x.data,l==="/$"||l==="/&"){if(d===0){i.removeChild(x),jo(r);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")pc(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,pc(l);for(var b=l.firstChild;b;){var S=b.nextSibling,k=b.nodeName;b[Ks]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=S}}else l==="body"&&pc(i.ownerDocument.body);l=x}while(l);jo(r)}function Nv(i,r){var l=i;i=0;do{var d=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=d}while(l)}function Km(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Km(l),eo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function R1(i,r,l,d){for(;i.nodeType===1;){var x=l;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Ks])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==x.rel||i.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||i.getAttribute("title")!==(x.title==null?null:x.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(x.src==null?null:x.src)||i.getAttribute("type")!==(x.type==null?null:x.type)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var b=x.name==null?null:""+x.name;if(x.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=ds(i.nextSibling),i===null)break}return null}function M1(i,r,l){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=ds(i.nextSibling),i===null))return null;return i}function Cv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=ds(i.nextSibling),i===null))return null;return i}function $m(i){return i.data==="$?"||i.data==="$~"}function Ym(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function D1(i,r){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||l.readyState!=="loading")r();else{var d=function(){r(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function ds(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Jm=null;function Iv(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(r===0)return ds(i.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}i=i.nextSibling}return null}function kv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return i;r--}else l!=="/$"&&l!=="/&"||r++}i=i.previousSibling}return null}function Rv(i,r,l){switch(r=hd(l),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function pc(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);eo(i)}var fs=new Map,Mv=new Set;function md(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Li=he.d;he.d={f:P1,r:L1,D:U1,C:V1,L:O1,m:j1,X:B1,S:G1,M:H1};function P1(){var i=Li.f(),r=rd();return i||r}function L1(i){var r=ts(i);r!==null&&r.tag===5&&r.type==="form"?Jy(r):Li.r(i)}var Uo=typeof document>"u"?null:document;function Dv(i,r,l){var d=Uo;if(d&&typeof r=="string"&&r){var x=Mn(r);x='link[rel="'+i+'"][href="'+x+'"]',typeof l=="string"&&(x+='[crossorigin="'+l+'"]'),Mv.has(x)||(Mv.add(x),i={rel:i,crossOrigin:l,href:r},d.querySelector(x)===null&&(r=d.createElement("link"),hn(r,"link",i),Ft(r),d.head.appendChild(r)))}}function U1(i){Li.D(i),Dv("dns-prefetch",i,null)}function V1(i,r){Li.C(i,r),Dv("preconnect",i,r)}function O1(i,r,l){Li.L(i,r,l);var d=Uo;if(d&&i&&r){var x='link[rel="preload"][as="'+Mn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(x+='[imagesrcset="'+Mn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(x+='[imagesizes="'+Mn(l.imageSizes)+'"]')):x+='[href="'+Mn(i)+'"]';var b=x;switch(r){case"style":b=Vo(i);break;case"script":b=Oo(i)}fs.has(b)||(i=_({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:i,as:r},l),fs.set(b,i),d.querySelector(x)!==null||r==="style"&&d.querySelector(gc(b))||r==="script"&&d.querySelector(yc(b))||(r=d.createElement("link"),hn(r,"link",i),Ft(r),d.head.appendChild(r)))}}function j1(i,r){Li.m(i,r);var l=Uo;if(l&&i){var d=r&&typeof r.as=="string"?r.as:"script",x='link[rel="modulepreload"][as="'+Mn(d)+'"][href="'+Mn(i)+'"]',b=x;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Oo(i)}if(!fs.has(b)&&(i=_({rel:"modulepreload",href:i},r),fs.set(b,i),l.querySelector(x)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(yc(b)))return}d=l.createElement("link"),hn(d,"link",i),Ft(d),l.head.appendChild(d)}}}function G1(i,r,l){Li.S(i,r,l);var d=Uo;if(d&&i){var x=Ys(d).hoistableStyles,b=Vo(i);r=r||"default";var S=x.get(b);if(!S){var k={loading:0,preload:null};if(S=d.querySelector(gc(b)))k.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":r},l),(l=fs.get(b))&&Qm(i,l);var z=S=d.createElement("link");Ft(z),hn(z,"link",i),z._p=new Promise(function(X,ae){z.onload=X,z.onerror=ae}),z.addEventListener("load",function(){k.loading|=1}),z.addEventListener("error",function(){k.loading|=2}),k.loading|=4,pd(S,r,d)}S={type:"stylesheet",instance:S,count:1,state:k},x.set(b,S)}}}function B1(i,r){Li.X(i,r);var l=Uo;if(l&&i){var d=Ys(l).hoistableScripts,x=Oo(i),b=d.get(x);b||(b=l.querySelector(yc(x)),b||(i=_({src:i,async:!0},r),(r=fs.get(x))&&Wm(i,r),b=l.createElement("script"),Ft(b),hn(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(x,b))}}function H1(i,r){Li.M(i,r);var l=Uo;if(l&&i){var d=Ys(l).hoistableScripts,x=Oo(i),b=d.get(x);b||(b=l.querySelector(yc(x)),b||(i=_({src:i,async:!0,type:"module"},r),(r=fs.get(x))&&Wm(i,r),b=l.createElement("script"),Ft(b),hn(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(x,b))}}function Pv(i,r,l,d){var x=(x=ce.current)?md(x):null;if(!x)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Vo(l.href),l=Ys(x).hoistableStyles,d=l.get(r),d||(d={type:"style",instance:null,count:0,state:null},l.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Vo(l.href);var b=Ys(x).hoistableStyles,S=b.get(i);if(S||(x=x.ownerDocument||x,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,S),(b=x.querySelector(gc(i)))&&!b._p&&(S.instance=b,S.state.loading=5),fs.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},fs.set(i,l),b||z1(x,i,l,S.state))),r&&d===null)throw Error(s(528,""));return S}if(r&&d!==null)throw Error(s(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Oo(l),l=Ys(x).hoistableScripts,d=l.get(r),d||(d={type:"script",instance:null,count:0,state:null},l.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Vo(i){return'href="'+Mn(i)+'"'}function gc(i){return'link[rel="stylesheet"]['+i+"]"}function Lv(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function z1(i,r,l,d){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=i.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),hn(r,"link",l),Ft(r),i.head.appendChild(r))}function Oo(i){return'[src="'+Mn(i)+'"]'}function yc(i){return"script[async]"+i}function Uv(i,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var d=i.querySelector('style[data-href~="'+Mn(l.href)+'"]');if(d)return r.instance=d,Ft(d),d;var x=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Ft(d),hn(d,"style",x),pd(d,l.precedence,i),r.instance=d;case"stylesheet":x=Vo(l.href);var b=i.querySelector(gc(x));if(b)return r.state.loading|=4,r.instance=b,Ft(b),b;d=Lv(l),(x=fs.get(x))&&Qm(d,x),b=(i.ownerDocument||i).createElement("link"),Ft(b);var S=b;return S._p=new Promise(function(k,z){S.onload=k,S.onerror=z}),hn(b,"link",d),r.state.loading|=4,pd(b,l.precedence,i),r.instance=b;case"script":return b=Oo(l.src),(x=i.querySelector(yc(b)))?(r.instance=x,Ft(x),x):(d=l,(x=fs.get(b))&&(d=_({},l),Wm(d,x)),i=i.ownerDocument||i,x=i.createElement("script"),Ft(x),hn(x,"link",d),i.head.appendChild(x),r.instance=x);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,pd(d,l.precedence,i));return r.instance}function pd(i,r,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=d.length?d[d.length-1]:null,b=x,S=0;S<d.length;S++){var k=d[S];if(k.dataset.precedence===r)b=k;else if(b!==x)break}b?b.parentNode.insertBefore(i,b.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(i,r.firstChild))}function Qm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Wm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var gd=null;function Vv(i,r,l){if(gd===null){var d=new Map,x=gd=new Map;x.set(l,d)}else x=gd,d=x.get(l),d||(d=new Map,x.set(l,d));if(d.has(i))return d;for(d.set(i,null),l=l.getElementsByTagName(i),x=0;x<l.length;x++){var b=l[x];if(!(b[Ks]||b[zt]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var S=b.getAttribute(r)||"";S=i+S;var k=d.get(S);k?k.push(b):d.set(S,[b])}}return d}function Ov(i,r,l){i=i.ownerDocument||i,i.head.insertBefore(l,r==="title"?i.querySelector("head > title"):null)}function F1(i,r,l){if(l===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function jv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function q1(i,r,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var x=Vo(d.href),b=r.querySelector(gc(x));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=yd.bind(i),r.then(i,i)),l.state.loading|=4,l.instance=b,Ft(b);return}b=r.ownerDocument||r,d=Lv(d),(x=fs.get(x))&&Qm(d,x),b=b.createElement("link"),Ft(b);var S=b;S._p=new Promise(function(k,z){S.onload=k,S.onerror=z}),hn(b,"link",d),l.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=yd.bind(i),r.addEventListener("load",l),r.addEventListener("error",l))}}var Xm=0;function K1(i,r){return i.stylesheets&&i.count===0&&vd(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var d=setTimeout(function(){if(i.stylesheets&&vd(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+r);0<i.imgBytes&&Xm===0&&(Xm=62500*w1());var x=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&vd(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>Xm?50:800)+r);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(x)}}:null}function yd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var xd=null;function vd(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,xd=new Map,r.forEach($1,i),xd=null,yd.call(i))}function $1(i,r){if(!(r.state.loading&4)){var l=xd.get(i);if(l)var d=l.get(null);else{l=new Map,xd.set(i,l);for(var x=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<x.length;b++){var S=x[b];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),d=S)}d&&l.set(null,d)}x=r.instance,S=x.getAttribute("data-precedence"),b=l.get(S)||d,b===d&&l.set(null,x),l.set(S,x),this.count++,d=yd.bind(this),x.addEventListener("load",d),x.addEventListener("error",d),b?b.parentNode.insertBefore(x,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(x,i.firstChild)),r.state.loading|=4}}var xc={$$typeof:G,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function Y1(i,r,l,d,x,b,S,k,z){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=es(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=es(0),this.hiddenUpdates=es(null),this.identifierPrefix=d,this.onUncaughtError=x,this.onCaughtError=b,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Gv(i,r,l,d,x,b,S,k,z,X,ae,fe){return i=new Y1(i,r,l,S,z,X,ae,fe,k),r=1,b===!0&&(r|=24),b=Kn(3,null,null,r),i.current=b,b.stateNode=i,r=Rh(),r.refCount++,i.pooledCache=r,r.refCount++,b.memoizedState={element:d,isDehydrated:l,cache:r},Lh(b),i}function Bv(i){return i?(i=po,i):po}function Hv(i,r,l,d,x,b){x=Bv(x),d.context===null?d.context=x:d.pendingContext=x,d=hr(r),d.payload={element:l},b=b===void 0?null:b,b!==null&&(d.callback=b),l=mr(i,d,r),l!==null&&(On(l,i,r),Ql(l,i,r))}function zv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function Zm(i,r){zv(i,r),(i=i.alternate)&&zv(i,r)}function Fv(i){if(i.tag===13||i.tag===31){var r=ga(i,67108864);r!==null&&On(r,i,67108864),Zm(i,67108864)}}function qv(i){if(i.tag===13||i.tag===31){var r=Wn();r=ia(r);var l=ga(i,r);l!==null&&On(l,i,r),Zm(i,r)}}var bd=!0;function J1(i,r,l,d){var x=J.T;J.T=null;var b=he.p;try{he.p=2,ep(i,r,l,d)}finally{he.p=b,J.T=x}}function Q1(i,r,l,d){var x=J.T;J.T=null;var b=he.p;try{he.p=8,ep(i,r,l,d)}finally{he.p=b,J.T=x}}function ep(i,r,l,d){if(bd){var x=tp(d);if(x===null)Gm(i,r,d,_d,l),$v(i,d);else if(X1(x,i,r,l,d))d.stopPropagation();else if($v(i,d),r&4&&-1<W1.indexOf(i)){for(;x!==null;){var b=ts(x);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var S=Pe(b.pendingLanes);if(S!==0){var k=b;for(k.pendingLanes|=2,k.entangledLanes|=2;S;){var z=1<<31-Mt(S);k.entanglements[1]|=z,S&=~z}oi(b),(lt&6)===0&&(sd=ln()+500,fc(0))}}break;case 31:case 13:k=ga(b,2),k!==null&&On(k,b,2),rd(),Zm(b,2)}if(b=tp(d),b===null&&Gm(i,r,d,_d,l),b===x)break;x=b}x!==null&&d.stopPropagation()}else Gm(i,r,d,null,l)}}function tp(i){return i=ns(i),np(i)}var _d=null;function np(i){if(_d=null,i=$s(i),i!==null){var r=o(i);if(r===null)i=null;else{var l=r.tag;if(l===13){if(i=c(r),i!==null)return i;i=null}else if(l===31){if(i=f(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return _d=i,null}function Kv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gi()){case ea:return 2;case ta:return 8;case vs:case Tl:return 32;case Qa:return 268435456;default:return 32}default:return 32}}var sp=!1,Ar=null,wr=null,Nr=null,vc=new Map,bc=new Map,Cr=[],W1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $v(i,r){switch(i){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":vc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":bc.delete(r.pointerId)}}function _c(i,r,l,d,x,b){return i===null||i.nativeEvent!==b?(i={blockedOn:r,domEventName:l,eventSystemFlags:d,nativeEvent:b,targetContainers:[x]},r!==null&&(r=ts(r),r!==null&&Fv(r)),i):(i.eventSystemFlags|=d,r=i.targetContainers,x!==null&&r.indexOf(x)===-1&&r.push(x),i)}function X1(i,r,l,d,x){switch(r){case"focusin":return Ar=_c(Ar,i,r,l,d,x),!0;case"dragenter":return wr=_c(wr,i,r,l,d,x),!0;case"mouseover":return Nr=_c(Nr,i,r,l,d,x),!0;case"pointerover":var b=x.pointerId;return vc.set(b,_c(vc.get(b)||null,i,r,l,d,x)),!0;case"gotpointercapture":return b=x.pointerId,bc.set(b,_c(bc.get(b)||null,i,r,l,d,x)),!0}return!1}function Yv(i){var r=$s(i.target);if(r!==null){var l=o(r);if(l!==null){if(r=l.tag,r===13){if(r=c(l),r!==null){i.blockedOn=r,Ts(i.priority,function(){qv(l)});return}}else if(r===31){if(r=f(l),r!==null){i.blockedOn=r,Ts(i.priority,function(){qv(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Td(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=tp(i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);Pl=d,l.target.dispatchEvent(d),Pl=null}else return r=ts(l),r!==null&&Fv(r),i.blockedOn=l,!1;r.shift()}return!0}function Jv(i,r,l){Td(i)&&l.delete(r)}function Z1(){sp=!1,Ar!==null&&Td(Ar)&&(Ar=null),wr!==null&&Td(wr)&&(wr=null),Nr!==null&&Td(Nr)&&(Nr=null),vc.forEach(Jv),bc.forEach(Jv)}function Ed(i,r){i.blockedOn===r&&(i.blockedOn=null,sp||(sp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Z1)))}var Sd=null;function Qv(i){Sd!==i&&(Sd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Sd===i&&(Sd=null);for(var r=0;r<i.length;r+=3){var l=i[r],d=i[r+1],x=i[r+2];if(typeof d!="function"){if(np(d||l)===null)continue;break}var b=ts(l);b!==null&&(i.splice(r,3),r-=3,tm(b,{pending:!0,data:x,method:l.method,action:d},d,x))}}))}function jo(i){function r(z){return Ed(z,i)}Ar!==null&&Ed(Ar,i),wr!==null&&Ed(wr,i),Nr!==null&&Ed(Nr,i),vc.forEach(r),bc.forEach(r);for(var l=0;l<Cr.length;l++){var d=Cr[l];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Cr.length&&(l=Cr[0],l.blockedOn===null);)Yv(l),l.blockedOn===null&&Cr.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var x=l[d],b=l[d+1],S=x[nn]||null;if(typeof b=="function")S||Qv(l);else if(S){var k=null;if(b&&b.hasAttribute("formAction")){if(x=b,S=b[nn]||null)k=S.formAction;else if(np(x)!==null)continue}else k=S.action;typeof k=="function"?l[d+1]=k:(l.splice(d,3),d-=3),Qv(l)}}}function Wv(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(S){return x=S})},focusReset:"manual",scroll:"manual"})}function r(){x!==null&&(x(),x=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,x=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),x!==null&&(x(),x=null)}}}function ip(i){this._internalRoot=i}Ad.prototype.render=ip.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var l=r.current,d=Wn();Hv(l,d,i,r,null,null)},Ad.prototype.unmount=ip.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Hv(i.current,2,null,i,null,null),rd(),r[qs]=null}};function Ad(i){this._internalRoot=i}Ad.prototype.unstable_scheduleHydration=function(i){if(i){var r=ru();i={blockedOn:null,target:i,priority:r};for(var l=0;l<Cr.length&&r!==0&&r<Cr[l].priority;l++);Cr.splice(l,0,i),l===0&&Yv(i)}};var Xv=e.version;if(Xv!=="19.2.3")throw Error(s(527,Xv,"19.2.3"));he.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(r),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var eC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{Hn=wd.inject(eC),Zt=wd}catch{}}return Ec.createRoot=function(i,r){if(!a(i))throw Error(s(299));var l=!1,d="",x=rx,b=ax,S=ox;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(x=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError)),r=Gv(i,1,!1,null,null,l,d,null,x,b,S,Wv),i[qs]=r.current,jm(i),new ip(r)},Ec.hydrateRoot=function(i,r,l){if(!a(i))throw Error(s(299));var d=!1,x="",b=rx,S=ax,k=ox,z=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(k=l.onRecoverableError),l.formState!==void 0&&(z=l.formState)),r=Gv(i,1,!0,r,l??null,d,x,z,b,S,k,Wv),r.context=Bv(null),l=r.current,d=Wn(),d=ia(d),x=hr(d),x.callback=null,mr(l,x,d),l=d,r.current.lanes=l,_s(r,l),oi(r),i[qs]=r.current,jm(i),new Ad(r)},Ec.version="19.2.3",Ec}var lb;function dC(){if(lb)return op.exports;lb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),op.exports=uC(),op.exports}var fC=dC();const hC=jE(fC);var qe=(n=>(n.DRILL="Learn & Drill",n.ACTIVE_RECALL="Active Recall",n.SIMULATION="Test Simulation",n.WEAKNESS="Weakness Attack",n.EXAMPLE="Contoh Soal",n.PRACTICE="Latihan Kustom",n))(qe||{});const Xd="https://files.catbox.moe/02xqjo.png",cb={click:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",tap:"",back:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/arrow.mp3",success:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/gem-collect.mp3",error:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/loss.mp3",tick:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",intro:"",finish:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/frozen_missile.mp3"},ub=["Pendidikan adalah senjata paling mematikan di dunia, karena dengan pendidikan, Anda dapat mengubah dunia. Nelson Mandela pernah berkata demikian untuk menekankan pentingnya ilmu pengetahuan.","Kecerdasan buatan bukanlah pengganti kecerdasan manusia, melainkan alat untuk memperkuat kemampuan kita. Kuncinya adalah bagaimana kita berkolaborasi dengan teknologi.","Keberhasilan bukanlah akhir, kegagalan bukanlah hal yang fatal: keberanian untuk melanjutkanlah yang terpenting. Jangan takut untuk memulai hal baru setiap harinya.","Hutan hujan tropis Indonesia adalah salah satu paru-paru dunia. Menjaganya bukan hanya tanggung jawab pemerintah, tetapi tugas kita bersama demi masa depan bumi.","The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet. It is commonly used to test typewriters and computer keyboards.","Dalam dunia yang berubah sangat cepat, satu-satunya strategi yang dijamin gagal adalah tidak mengambil risiko. Mark Zuckerberg mengingatkan kita untuk berani berinovasi.","Sabar itu ilmu tingkat tinggi. Belajarnya setiap hari, latihannya setiap saat, ujiannya sering mendadak, sekolahnya seumur hidup.","Technology is a useful servant but a dangerous master. We must ensure that we control technology, rather than letting it control our lives and decisions.","Bhinneka Tunggal Ika berbeda-beda tetapi tetap satu jua. Semboyan ini menggambarkan persatuan dan kesatuan Bangsa dan Negara Kesatuan Republik Indonesia.","Membaca adalah jendela dunia. Dengan membaca, kita bisa menjelajahi tempat-tempat yang belum pernah kita kunjungi dan memahami pemikiran orang-orang hebat."],GE=[{id:"BENCHMARK",name:"Human Benchmark",desc:"Tes Kognitif: Reaction Time & Sequence Memory"},{id:"SKRIPSI",name:"Skripsi Helper",desc:"Bantuan Judul, Outline, & Metodologi"},{id:"UTBK",name:"UTBK SNBT",desc:"Tes Potensi Skolastik & Literasi (2025)"},{id:"SKD",name:"SKD CPNS/Kedinasan",desc:"TWK, TIU, TKP"},{id:"TPA",name:"TPA & TBI",desc:"Tes Potensi Akademik & B.Inggris (Seleksi Lanjutan)"},{id:"PSIKOTEST",name:"Psikotes Lengkap",desc:"IQ, Koran/Pauli, Gambar, & Kepribadian"},{id:"KECERMATAN",name:"Tes Kecermatan",desc:"Angka/Huruf Hilang (Khas Polri/Kedinasan)"},{id:"INTERVIEW",name:"Wawancara Tulis",desc:"Simulasi Jawab Interview & Review AI"},{id:"BUTAWRNA",name:"Tes Buta Warna",desc:"Simulasi Ishihara & Warna"},{id:"GENERAL",name:"Materi Umum",desc:"Belajar Apapun: PDF, Topik, Hafalan"}],mC=[{id:"ACTIVE_RECALL",name:"Active Recall",desc:"Paksa otak mengingat tanpa melihat catatan.",icon:"Brain"},{id:"PRACTICE",name:"Latihan Soal",desc:"Drill soal pilihan ganda dari materi.",icon:"PenTool"},{id:"SPACED_REPETITION",name:"Spaced Repetition",desc:"Flashcards untuk hafalan jangka panjang.",icon:"Repeat"},{id:"FEYNMAN",name:"Feynman Technique",desc:"Jelaskan materi seolah ke anak kecil.",icon:"MessageCircle"},{id:"MIND_MAP",name:"Mind Mapping",desc:"Visualisasikan hubungan antar konsep.",icon:"Share2"},{id:"PBL",name:"Problem-Based",desc:"Belajar lewat studi kasus nyata.",icon:"Search"},{id:"TEACHING",name:"Teaching Method",desc:"Simulasi mengajar murid (AI).",icon:"GraduationCap"},{id:"SQ3R",name:"SQ3R Method",desc:"Survey, Question, Read, Recite, Review.",icon:"BookOpen"}],pC=["Penalaran Umum","Pengetahuan & Pemahaman Umum","Pemahaman Bacaan & Menulis","Pengetahuan Kuantitatif","Literasi Bahasa Indonesia","Literasi Bahasa Inggris","Penalaran Matematika"],gC=["Tes Wawasan Kebangsaan (TWK)","Tes Intelegensia Umum (TIU)","Tes Karakteristik Pribadi (TKP)"],yC=["Verbal (Analogi, Silogisme)","Numerik (Deret, Aritmatika)","Penalaran Logis & Analitis","Spasial (Gambar)","Tes Bahasa Inggris (TBI)"],xC=["Kognitif & Logika (Verbal, Analitik)","Tes Koran/Pauli (Hitungan Cepat)","Tes Spasial (Analogi Gambar)","Tes Kepribadian (EPPS/DISC)"],vC=["Pertanyaan Personal (Kelebihan/Kekurangan)","Motivasi & Komitmen","Studi Kasus & Problem Solving","Wawasan Kebangsaan & Integritas"],db=[],fb=[],hb=[],mb=[],pb=[],gb=[],yb=[],xb=[],kr=[{name:"Penalaran Umum",duration:30,count:30},{name:"Pengetahuan dan Pemahaman Umum",duration:15,count:20},{name:"Pemahaman Bacaan dan Menulis",duration:25,count:20},{name:"Pengetahuan Kuantitatif",duration:20,count:20},{name:"Literasi Bahasa Indonesia",duration:37.5,count:25},{name:"Literasi Bahasa Inggris",duration:37.5,count:25},{name:"Penalaran Matematika",duration:30,count:20}];var bC={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _C,TC;function EC(){return{geminiUrl:_C,vertexUrl:TC}}function SC(n,e,t,s){var a,o;if(!(n!=null&&n.baseUrl)){const c=EC();return e?(a=c.vertexUrl)!==null&&a!==void 0?a:t:(o=c.geminiUrl)!==null&&o!==void 0?o:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $i{}function Te(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const o=e[a];return o!=null?String(o):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function g(n,e,t){for(let o=0;o<e.length-1;o++){const c=e[o];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[f])){const p=n[f];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(o+1),t[m])}else for(const m of p)g(m,e.slice(o+1),t)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in n||(n[f]=[{}]);const p=n[f];g(p[0],e.slice(o+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],a=n[s];if(a!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===a)return;if(typeof a=="object"&&typeof t=="object"&&a!==null&&t!==null)Object.assign(a,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function h(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const a=e[s];if(a.endsWith("[]")){const o=a.slice(0,-2);if(o in n){const c=n[o];return Array.isArray(c)?c.map(f=>h(f,e.slice(s+1),t)):t}else return t}else n=n[a]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function AC(n,e){for(const[t,s]of Object.entries(e)){const a=t.split("."),o=s.split("."),c=new Set;let f=-1;for(let p=0;p<a.length;p++)if(a[p]==="*"){f=p;break}if(f!==-1&&o.length>f)for(let p=f;p<o.length;p++){const m=o[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}Ip(n,a,o,0,c)}}function Ip(n,e,t,s,a){if(s>=e.length||typeof n!="object"||n===null)return;const o=e[s];if(o.endsWith("[]")){const c=o.slice(0,-2),f=n;if(c in f&&Array.isArray(f[c]))for(const p of f[c])Ip(p,e,t,s+1,a)}else if(o==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,f=Object.keys(c).filter(m=>!m.startsWith("_")&&!a.has(m)),p={};for(const m of f)p[m]=c[m];for(const[m,v]of Object.entries(p)){const _=[];for(const T of t.slice(s))T==="*"?_.push(m):_.push(T);g(c,_,v)}for(const m of f)delete c[m]}}else{const c=n;o in c&&Ip(c[o],e,t,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wC(n){const e={},t=h(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=h(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function NC(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],IC(c)),e}function CC(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response"]);return c!=null&&g(e,["response"],kC(c)),e}function IC(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(c=>RC(c))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=h(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function kC(n){const e={},t=h(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(c=>MC(c))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=h(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function RC(n){const e={},t=h(n,["video"]);return t!=null&&g(e,["video"],OC(t)),e}function MC(n){const e={},t=h(n,["_self"]);return t!=null&&g(e,["video"],jC(t)),e}function DC(n){const e={},t=h(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function PC(n){const e={},t=h(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function LC(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response"]);return c!=null&&g(e,["response"],UC(c)),e}function UC(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["parent"]);s!=null&&g(e,["parent"],s);const a=h(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function BE(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response"]);return c!=null&&g(e,["response"],VC(c)),e}function VC(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["parent"]);s!=null&&g(e,["parent"],s);const a=h(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function OC(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["uri"],t);const s=h(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],bg(s));const a=h(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function jC(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],bg(s));const a=h(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vb;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(vb||(vb={}));var bb;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(bb||(bb={}));var _b;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(_b||(_b={}));var ke;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ke||(ke={}));var Tb;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Tb||(Tb={}));var Eb;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Eb||(Eb={}));var Sb;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Sb||(Sb={}));var Ab;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Ab||(Ab={}));var wb;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(wb||(wb={}));var Nb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Nb||(Nb={}));var Cb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Cb||(Cb={}));var Ib;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(Ib||(Ib={}));var kb;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(kb||(kb={}));var Rb;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Rb||(Rb={}));var Mb;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Mb||(Mb={}));var Db;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Db||(Db={}));var Pb;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Pb||(Pb={}));var Lb;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Lb||(Lb={}));var Ub;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ub||(Ub={}));var Vb;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Vb||(Vb={}));var Ob;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ob||(Ob={}));var Zd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Zd||(Zd={}));var jb;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(jb||(jb={}));var Gb;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Gb||(Gb={}));var Bb;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Bb||(Bb={}));var kp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(kp||(kp={}));var Hb;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Hb||(Hb={}));var zb;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(zb||(zb={}));var Fb;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Fb||(Fb={}));var qb;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(qb||(qb={}));var Kb;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Kb||(Kb={}));var $b;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})($b||($b={}));var Yb;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Yb||(Yb={}));var Jb;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Jb||(Jb={}));var Qb;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Qb||(Qb={}));var Wb;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Wb||(Wb={}));var Xb;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Xb||(Xb={}));var Zb;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Zb||(Zb={}));var e_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(e_||(e_={}));var t_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(t_||(t_={}));var n_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(n_||(n_={}));var s_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(s_||(s_={}));var i_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(i_||(i_={}));var r_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(r_||(r_={}));var a_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(a_||(a_={}));var o_;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(o_||(o_={}));var l_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(l_||(l_={}));var c_;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(c_||(c_={}));var u_;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(u_||(u_={}));var d_;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(d_||(d_={}));var f_;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(f_||(f_={}));var h_;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(h_||(h_={}));var m_;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(m_||(m_={}));var p_;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(p_||(p_={}));var qo;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(qo||(qo={}));class Rp{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Sc{get text(){var e,t,s,a,o,c,f,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const T of(p=(f=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[A,N]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(N!==null||N!==void 0)&&_.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;v=!0,m+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,s,a,o,c,f,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(p=(f=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[T,A]of Object.entries(_))T!=="inlineData"&&(A!==null||A!==void 0)&&v.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,a,o,c,f,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(f=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,a,o,c,f,p,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(f=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,a,o,c,f,p,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(f=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class g_{}class y_{}class GC{}class BC{}class HC{}class zC{}class x_{}class v_{}class b_{}class FC{}class ef{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new ef;let a;const o=e;return t?a=CC(o):a=NC(o),Object.assign(s,a),s}}class __{}class T_{}class E_{}class S_{}class qC{}class KC{}class $C{}class _g{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new _g,o=LC(e);return Object.assign(s,o),s}}class YC{}class JC{}class QC{}class A_{}class WC{get text(){var e,t,s;let a="",o=!1;const c=[];for(const f of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,m]of Object.entries(f))p!=="text"&&p!=="thought"&&m!==null&&c.push(p);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;o=!0,a+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?a:void 0}get data(){var e,t,s;let a="";const o=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[f,p]of Object.entries(c))f!=="inlineData"&&p!==null&&o.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(a+=atob(c.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class XC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Tg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Tg,o=BE(e);return Object.assign(s,o),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function at(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function HE(n,e){const t=at(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function zE(n){return Array.isArray(n)?n.map(e=>tf(e)):[tf(n)]}function tf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function FE(n){const e=tf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qE(n){const e=tf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function w_(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function KE(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>w_(e)):[w_(n)]}function Mp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function N_(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function C_(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Tn(n){if(n==null)throw new Error("ContentUnion is required");return Mp(n)?n:{role:"user",parts:KE(n)}}function Eg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=Tn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=Tn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Tn(t)):[Tn(e)]}function ms(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(N_(n)||C_(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Tn(n)]}const e=[],t=[],s=Mp(n[0]);for(const a of n){const o=Mp(a);if(o!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(a);else{if(N_(a)||C_(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(a)}}return s||e.push({role:"user",parts:KE(t)}),e}function ZC(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(ke).includes(t[0].toUpperCase())?t[0].toUpperCase():ke.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(ke).includes(s.toUpperCase())?s.toUpperCase():ke.TYPE_UNSPECIFIED})}}function Yo(n){const e={},t=["items"],s=["anyOf"],a=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=n.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,n=o[1]):o[1].type==="null"&&(e.nullable=!0,n=o[0])),n.type instanceof Array&&ZC(n.type,e);for(const[c,f]of Object.entries(n))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(ke).includes(f.toUpperCase())?f.toUpperCase():ke.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Yo(f);else if(s.includes(c)){const p=[];for(const m of f){if(m.type=="null"){e.nullable=!0;continue}p.push(Yo(m))}e[c]=p}else if(a.includes(c)){const p={};for(const[m,v]of Object.entries(f))p[m]=Yo(v);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=f}return e}function Sg(n){return Yo(n)}function Ag(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function wg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ul(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Yo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Yo(e.response));return n}function dl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function eI(n,e,t,s=1){const a=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:a?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:a?`${t}/${e}`:e}function Yi(n,e){if(typeof e!="string")throw new Error("name must be a string");return eI(n,e,"cachedContents")}function $E(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Jr(n){return bg(n)}function tI(n){return n!=null&&typeof n=="object"&&"name"in n}function nI(n){return n!=null&&typeof n=="object"&&"video"in n}function sI(n){return n!=null&&typeof n=="object"&&"uri"in n}function YE(n){var e;let t;if(tI(n)&&(t=n.name),!(sI(n)&&(t=n.uri,t===void 0))&&!(nI(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const a=t.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${t}`);t=a[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function JE(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function QE(n){for(const e of["models","tunedModels","publisherModels"])if(iI(n,e))return n[e];return[]}function iI(n,e){return n!==null&&typeof n=="object"&&e in n}function rI(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function aI(n,e={}){const t=[],s=new Set;for(const a of n){const o=a.name;if(s.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);s.add(o);const c=rI(a,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function WE(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,a=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function oI(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function XE(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const a=t.inlinedResponses;if(!Array.isArray(a)||a.length===0)return n;let o=!1;for(const c of a){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function fl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function ZE(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lI(n){const e={},t=h(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=h(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>HI(c))),g(e,["inlinedResponses"],o)}const a=h(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["inlinedEmbedContentResponses"],o)}return e}function cI(n){const e={},t=h(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=h(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const a=h(n,["bigqueryDestination","outputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function uI(n){const e={},t=h(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=h(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const a=h(n,["bigqueryUri"]);if(a!=null&&g(e,["bigqueryDestination","outputUri"],a),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function jd(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const a=h(n,["metadata","state"]);a!=null&&g(e,["state"],ZE(a));const o=h(n,["metadata","createTime"]);o!=null&&g(e,["createTime"],o);const c=h(n,["metadata","endTime"]);c!=null&&g(e,["endTime"],c);const f=h(n,["metadata","updateTime"]);f!=null&&g(e,["updateTime"],f);const p=h(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=h(n,["metadata","output"]);return m!=null&&g(e,["dest"],lI(XE(m))),e}function Dp(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=h(n,["state"]);a!=null&&g(e,["state"],ZE(a));const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["createTime"]);c!=null&&g(e,["createTime"],c);const f=h(n,["startTime"]);f!=null&&g(e,["startTime"],f);const p=h(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=h(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=h(n,["model"]);v!=null&&g(e,["model"],v);const _=h(n,["inputConfig"]);_!=null&&g(e,["src"],dI(_));const T=h(n,["outputConfig"]);T!=null&&g(e,["dest"],cI(XE(T)));const A=h(n,["completionStats"]);return A!=null&&g(e,["completionStats"],A),e}function dI(n){const e={},t=h(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=h(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const a=h(n,["bigquerySource","inputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function fI(n,e){const t={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=h(e,["fileName"]);s!=null&&g(t,["fileName"],s);const a=h(e,["inlinedRequests"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>BI(n,c))),g(t,["requests","requests"],o)}return t}function hI(n){const e={},t=h(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=h(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const a=h(n,["bigqueryUri"]);if(a!=null&&g(e,["bigquerySource","inputUri"],a),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function mI(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function pI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],fl(n,s)),t}function gI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],fl(n,s)),t}function yI(n){const e={},t=h(n,["content"]);t!=null&&g(e,["content"],t);const s=h(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],xI(s));const a=h(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const o=h(n,["finishReason"]);o!=null&&g(e,["finishReason"],o);const c=h(n,["avgLogprobs"]);c!=null&&g(e,["avgLogprobs"],c);const f=h(n,["groundingMetadata"]);f!=null&&g(e,["groundingMetadata"],f);const p=h(n,["index"]);p!=null&&g(e,["index"],p);const m=h(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=h(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(A=>A)),g(e,["safetyRatings"],T)}const _=h(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function xI(n){const e={},t=h(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function eS(n){const e={},t=h(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(o=>JI(o))),g(e,["parts"],a)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function vI(n,e){const t={},s=h(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),h(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function bI(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=h(n,["dest"]);return e!==void 0&&a!=null&&g(e,["outputConfig"],uI(oI(a))),t}function I_(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["src"]);a!=null&&g(t,["batch","inputConfig"],fI(n,WE(n,a)));const o=h(e,["config"]);return o!=null&&vI(o,t),t}function _I(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["model"],at(n,s));const a=h(e,["src"]);a!=null&&g(t,["inputConfig"],hI(WE(n,a)));const o=h(e,["config"]);return o!=null&&bI(o,t),t}function TI(n,e){const t={},s=h(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function EI(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["src"]);a!=null&&g(t,["batch","inputConfig"],kI(n,a));const o=h(e,["config"]);return o!=null&&TI(o,t),t}function SI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],fl(n,s)),t}function AI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],fl(n,s)),t}function wI(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);return o!=null&&g(e,["error"],o),e}function NI(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);return o!=null&&g(e,["error"],o),e}function CI(n,e){const t={},s=h(e,["contents"]);if(s!=null){let o=Eg(n,s);Array.isArray(o)&&(o=o.map(c=>c)),g(t,["requests[]","request","content"],o)}const a=h(e,["config"]);return a!=null&&(g(t,["_self"],II(a,t)),AC(t,{"requests[].*":"requests[].request.*"})),t}function II(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=h(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const o=h(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&g(e,["requests[]","outputDimensionality"],o),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function kI(n,e){const t={},s=h(e,["fileName"]);s!=null&&g(t,["file_name"],s);const a=h(e,["inlinedRequests"]);return a!=null&&g(t,["requests"],CI(n,a)),t}function RI(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function MI(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const a=h(n,["name"]);if(a!=null&&g(e,["name"],a),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function DI(n){const e={},t=h(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=h(n,["mode"]);if(s!=null&&g(e,["mode"],s),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function PI(n,e,t){const s={},a=h(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],eS(Tn(a)));const o=h(e,["temperature"]);o!=null&&g(s,["temperature"],o);const c=h(e,["topP"]);c!=null&&g(s,["topP"],c);const f=h(e,["topK"]);f!=null&&g(s,["topK"],f);const p=h(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=h(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=h(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=h(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=h(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const A=h(e,["presencePenalty"]);A!=null&&g(s,["presencePenalty"],A);const N=h(e,["frequencyPenalty"]);N!=null&&g(s,["frequencyPenalty"],N);const C=h(e,["seed"]);C!=null&&g(s,["seed"],C);const I=h(e,["responseMimeType"]);I!=null&&g(s,["responseMimeType"],I);const j=h(e,["responseSchema"]);j!=null&&g(s,["responseSchema"],Sg(j));const L=h(e,["responseJsonSchema"]);if(L!=null&&g(s,["responseJsonSchema"],L),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=h(e,["safetySettings"]);if(t!==void 0&&G!=null){let U=G;Array.isArray(U)&&(U=U.map(pe=>QI(pe))),g(t,["safetySettings"],U)}const ee=h(e,["tools"]);if(t!==void 0&&ee!=null){let U=dl(ee);Array.isArray(U)&&(U=U.map(pe=>XI(ul(pe)))),g(t,["tools"],U)}const re=h(e,["toolConfig"]);if(t!==void 0&&re!=null&&g(t,["toolConfig"],WI(re)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const oe=h(e,["cachedContent"]);t!==void 0&&oe!=null&&g(t,["cachedContent"],Yi(n,oe));const M=h(e,["responseModalities"]);M!=null&&g(s,["responseModalities"],M);const D=h(e,["mediaResolution"]);D!=null&&g(s,["mediaResolution"],D);const R=h(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],Ag(R)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=h(e,["thinkingConfig"]);O!=null&&g(s,["thinkingConfig"],O);const V=h(e,["imageConfig"]);V!=null&&g(s,["imageConfig"],GI(V));const B=h(e,["enableEnhancedCivicAnswers"]);return B!=null&&g(s,["enableEnhancedCivicAnswers"],B),s}function LI(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>yI(m))),g(e,["candidates"],p)}const a=h(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const o=h(n,["promptFeedback"]);o!=null&&g(e,["promptFeedback"],o);const c=h(n,["responseId"]);c!=null&&g(e,["responseId"],c);const f=h(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function UI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],fl(n,s)),t}function VI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],fl(n,s)),t}function OI(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function jI(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function GI(n){const e={},t=h(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=h(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),h(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(h(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function BI(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["request","model"],at(n,s));const a=h(e,["contents"]);if(a!=null){let f=ms(a);Array.isArray(f)&&(f=f.map(p=>eS(p))),g(t,["request","contents"],f)}const o=h(e,["metadata"]);o!=null&&g(t,["metadata"],o);const c=h(e,["config"]);return c!=null&&g(t,["request","generationConfig"],PI(n,c,h(t,["request"],{}))),t}function HI(n){const e={},t=h(n,["response"]);t!=null&&g(e,["response"],LI(t));const s=h(n,["error"]);return s!=null&&g(e,["error"],s),e}function zI(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);if(e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),h(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function FI(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const o=h(n,["filter"]);return e!==void 0&&o!=null&&g(e,["_query","filter"],o),t}function qI(n){const e={},t=h(n,["config"]);return t!=null&&zI(t,e),e}function KI(n){const e={},t=h(n,["config"]);return t!=null&&FI(t,e),e}function $I(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["operations"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>jd(c))),g(e,["batchJobs"],o)}return e}function YI(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["batchPredictionJobs"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>Dp(c))),g(e,["batchJobs"],o)}return e}function JI(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=h(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],RI(o));const c=h(n,["functionCall"]);c!=null&&g(e,["functionCall"],MI(c));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const p=h(n,["inlineData"]);p!=null&&g(e,["inlineData"],mI(p));const m=h(n,["text"]);m!=null&&g(e,["text"],m);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function QI(n){const e={},t=h(n,["category"]);if(t!=null&&g(e,["category"],t),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function WI(n){const e={},t=h(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=h(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],DI(s)),e}function XI(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=h(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const c=h(n,["googleMaps"]);c!=null&&g(e,["googleMaps"],OI(c));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],jI(f));const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=h(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Bi;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Bi||(Bi={}));class za{constructor(e,t,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,a)}init(e,t,s){var a,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(o=(a=c.config)===null||a===void 0?void 0:a.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZI extends $i{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new za(Bi.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=I_(this.apiClient,e),s=t._url,a=Te("{model}:batchGenerateContent",s),f=t.batch.inputConfig.requests,p=f.requests,m=[];for(const v of p){const _=Object.assign({},v);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const A=_.request;A.systemInstruction=T,_.request=A}m.push(_)}return f.requests=m,delete t.config,delete t._url,delete t._query,{path:a,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const o=this.getGcsUri(e),c=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?s.dest=`${o.slice(0,-6)}/dest`:s.dest=`${o}_dest_${a}`;else if(c)s.dest=`${c}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=_I(this.apiClient,e);return f=Te("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Dp(v))}else{const m=I_(this.apiClient,e);return f=Te("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>jd(v))}}async createEmbeddingsInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=EI(this.apiClient,e);return o=Te("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>jd(p))}}async get(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=VI(this.apiClient,e);return f=Te("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Dp(v))}else{const m=UI(this.apiClient,e);return f=Te("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>jd(v))}}async cancel(e){var t,s,a,o;let c="",f={};if(this.apiClient.isVertexAI()){const p=gI(this.apiClient,e);c=Te("batchPredictionJobs/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=pI(this.apiClient,e);c=Te("batches/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=KI(e);return f=Te("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=YI(v),T=new A_;return Object.assign(T,_),T})}else{const m=qI(e);return f=Te("batches",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=$I(v),T=new A_;return Object.assign(T,_),T})}}async delete(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=AI(this.apiClient,e);return f=Te("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>NI(v))}else{const m=SI(this.apiClient,e);return f=Te("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>wI(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ek(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function k_(n){const e={},t=h(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(o=>Ek(o))),g(e,["parts"],a)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function tk(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=h(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const o=h(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const c=h(n,["contents"]);if(e!==void 0&&c!=null){let v=ms(c);Array.isArray(v)&&(v=v.map(_=>k_(_))),g(e,["contents"],v)}const f=h(n,["systemInstruction"]);e!==void 0&&f!=null&&g(e,["systemInstruction"],k_(Tn(f)));const p=h(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(_=>Ak(_))),g(e,["tools"],v)}const m=h(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],Sk(m)),h(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function nk(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=h(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const o=h(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const c=h(n,["contents"]);if(e!==void 0&&c!=null){let _=ms(c);Array.isArray(_)&&(_=_.map(T=>T)),g(e,["contents"],_)}const f=h(n,["systemInstruction"]);e!==void 0&&f!=null&&g(e,["systemInstruction"],Tn(f));const p=h(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>wk(T))),g(e,["tools"],_)}const m=h(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=h(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function sk(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["model"],HE(n,s));const a=h(e,["config"]);return a!=null&&tk(a,t),t}function ik(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["model"],HE(n,s));const a=h(e,["config"]);return a!=null&&nk(a,t),t}function rk(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Yi(n,s)),t}function ak(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Yi(n,s)),t}function ok(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function lk(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function ck(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function uk(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const a=h(n,["name"]);if(a!=null&&g(e,["name"],a),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dk(n){const e={},t=h(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=h(n,["mode"]);if(s!=null&&g(e,["mode"],s),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function fk(n){const e={},t=h(n,["description"]);t!=null&&g(e,["description"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const a=h(n,["parameters"]);a!=null&&g(e,["parameters"],a);const o=h(n,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const c=h(n,["response"]);c!=null&&g(e,["response"],c);const f=h(n,["responseJsonSchema"]);if(f!=null&&g(e,["responseJsonSchema"],f),h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function hk(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Yi(n,s)),t}function mk(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Yi(n,s)),t}function pk(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function gk(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function yk(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function xk(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function vk(n){const e={},t=h(n,["config"]);return t!=null&&yk(t,e),e}function bk(n){const e={},t=h(n,["config"]);return t!=null&&xk(t,e),e}function _k(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["cachedContents"],o)}return e}function Tk(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["cachedContents"],o)}return e}function Ek(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=h(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],ck(o));const c=h(n,["functionCall"]);c!=null&&g(e,["functionCall"],uk(c));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const p=h(n,["inlineData"]);p!=null&&g(e,["inlineData"],ek(p));const m=h(n,["text"]);m!=null&&g(e,["text"],m);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function Sk(n){const e={},t=h(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=h(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],dk(s)),e}function Ak(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=h(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const c=h(n,["googleMaps"]);c!=null&&g(e,["googleMaps"],pk(c));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],gk(f));const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=h(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function wk(n){const e={},t=h(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=h(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=h(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const o=h(n,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const c=h(n,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>fk(T))),g(e,["functionDeclarations"],_)}const f=h(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const p=h(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const m=h(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const v=h(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function Nk(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=h(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function Ck(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=h(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function Ik(n,e){const t={},s=h(e,["name"]);s!=null&&g(t,["_url","name"],Yi(n,s));const a=h(e,["config"]);return a!=null&&Nk(a,t),t}function kk(n,e){const t={},s=h(e,["name"]);s!=null&&g(t,["_url","name"],Yi(n,s));const a=h(e,["config"]);return a!=null&&Ck(a,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rk extends $i{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new za(Bi.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=ik(this.apiClient,e);return f=Te("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=sk(this.apiClient,e);return f=Te("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=mk(this.apiClient,e);return f=Te("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=hk(this.apiClient,e);return f=Te("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=ak(this.apiClient,e);return f=Te("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=lk(v),T=new E_;return Object.assign(T,_),T})}else{const m=rk(this.apiClient,e);return f=Te("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=ok(v),T=new E_;return Object.assign(T,_),T})}}async update(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=kk(this.apiClient,e);return f=Te("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Ik(this.apiClient,e);return f=Te("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=bk(e);return f=Te("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Tk(v),T=new S_;return Object.assign(T,_),T})}else{const m=vk(e);return f=Te("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=_k(v),T=new S_;return Object.assign(T,_),T})}}}function nf(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function R_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oe(n){return this instanceof Oe?(this.v=n,this):new Oe(n)}function Ls(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(A){return function(N){return Promise.resolve(N).then(A,_)}}function f(A,N){s[A]&&(a[A]=function(C){return new Promise(function(I,j){o.push([A,C,I,j])>1||p(A,C)})},N&&(a[A]=N(a[A])))}function p(A,N){try{m(s[A](N))}catch(C){T(o[0][3],C)}}function m(A){A.value instanceof Oe?Promise.resolve(A.value.v).then(v,_):T(o[0][2],A)}function v(A){p("next",A)}function _(A){p("throw",A)}function T(A,N){A(N),o.shift(),o.length&&p(o[0][0],o[0][1])}}function Us(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof R_=="function"?R_(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(o){t[o]=n[o]&&function(c){return new Promise(function(f,p){c=n[o](c),a(f,p,c.done,c.value)})}}function a(o,c,f,p){Promise.resolve(p).then(function(m){o({value:m,done:f})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mk(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:tS(t)}function tS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Dk(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function M_(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const a=[];let o=!0;for(;s<t&&n[s].role==="model";)a.push(n[s]),o&&!tS(n[s])&&(o=!1),s++;o?e.push(...a):e.pop()}return e}class Pk{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Lk(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Lk{constructor(e,t,s,a={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=a,this.history=o,this.sendPromise=Promise.resolve(),Dk(o)}async sendMessage(e){var t;await this.sendPromise;const s=Tn(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,c,f;const p=await a,m=(c=(o=p.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content,v=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];v!=null&&(T=(f=v.slice(_))!==null&&f!==void 0?f:[]);const A=m?[m]:[];this.recordHistory(s,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var t;await this.sendPromise;const s=Tn(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const o=await a;return this.processStreamResponse(o,s)}getHistory(e=!1){const t=e?M_(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Ls(this,arguments,function*(){var a,o,c,f,p,m;const v=[];try{for(var _=!0,T=Us(e),A;A=yield Oe(T.next()),a=A.done,!a;_=!0){f=A.value,_=!1;const N=f;if(Mk(N)){const C=(m=(p=N.candidates)===null||p===void 0?void 0:p[0])===null||m===void 0?void 0:m.content;C!==void 0&&v.push(C)}yield yield Oe(N)}}catch(N){o={error:N}}finally{try{!_&&!a&&(c=T.return)&&(yield Oe(c.call(T)))}finally{if(o)throw o.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let a=[];t.length>0&&t.every(o=>o.role!==void 0)?a=t:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...M_(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Rf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uk(n){const e={},t=h(n,["file"]);return t!=null&&g(e,["file"],t),e}function Vk(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Ok(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","file"],YE(t)),e}function jk(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Gk(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","file"],YE(t)),e}function Bk(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function Hk(n){const e={},t=h(n,["config"]);return t!=null&&Bk(t,e),e}function zk(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["files"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fk extends $i{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new za(Bi.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Hk(e);return o=Te("files",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=zk(p),v=new YC;return Object.assign(v,m),v})}}async createInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Uk(e);return o=Te("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=Vk(p),v=new JC;return Object.assign(v,m),v})}}async get(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Gk(e);return o=Te("files/{file}",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Ok(e);return o=Te("files/{file}",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=jk(p),v=new QC;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gd(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function qk(n){const e={},t=h(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(o=>oR(o))),g(e,["parts"],a)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function Kk(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function $k(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const a=h(n,["name"]);if(a!=null&&g(e,["name"],a),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Yk(n){const e={},t=h(n,["description"]);t!=null&&g(e,["description"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const a=h(n,["parameters"]);a!=null&&g(e,["parameters"],a);const o=h(n,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const c=h(n,["response"]);c!=null&&g(e,["response"],c);const f=h(n,["responseJsonSchema"]);if(f!=null&&g(e,["responseJsonSchema"],f),h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Jk(n){const e={},t=h(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=h(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=h(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const o=h(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const c=h(n,["enableAffectiveDialog"]);c!=null&&g(e,["enableAffectiveDialog"],c);const f=h(n,["frequencyPenalty"]);f!=null&&g(e,["frequencyPenalty"],f);const p=h(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=h(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=h(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=h(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=h(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const A=h(n,["responseMimeType"]);A!=null&&g(e,["responseMimeType"],A);const N=h(n,["responseModalities"]);N!=null&&g(e,["responseModalities"],N);const C=h(n,["responseSchema"]);C!=null&&g(e,["responseSchema"],C);const I=h(n,["routingConfig"]);I!=null&&g(e,["routingConfig"],I);const j=h(n,["seed"]);j!=null&&g(e,["seed"],j);const L=h(n,["speechConfig"]);L!=null&&g(e,["speechConfig"],L);const G=h(n,["stopSequences"]);G!=null&&g(e,["stopSequences"],G);const ee=h(n,["temperature"]);ee!=null&&g(e,["temperature"],ee);const re=h(n,["thinkingConfig"]);re!=null&&g(e,["thinkingConfig"],re);const oe=h(n,["topK"]);oe!=null&&g(e,["topK"],oe);const M=h(n,["topP"]);if(M!=null&&g(e,["topP"],M),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Qk(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Wk(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function Xk(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=h(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const o=h(n,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const c=h(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const f=h(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const p=h(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=h(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=h(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=h(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],wg(_));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const A=h(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],A);const N=h(n,["systemInstruction"]);e!==void 0&&N!=null&&g(e,["setup","systemInstruction"],qk(Tn(N)));const C=h(n,["tools"]);if(e!==void 0&&C!=null){let oe=dl(C);Array.isArray(oe)&&(oe=oe.map(M=>cR(ul(M)))),g(e,["setup","tools"],oe)}const I=h(n,["sessionResumption"]);e!==void 0&&I!=null&&g(e,["setup","sessionResumption"],lR(I));const j=h(n,["inputAudioTranscription"]);e!==void 0&&j!=null&&g(e,["setup","inputAudioTranscription"],j);const L=h(n,["outputAudioTranscription"]);e!==void 0&&L!=null&&g(e,["setup","outputAudioTranscription"],L);const G=h(n,["realtimeInputConfig"]);e!==void 0&&G!=null&&g(e,["setup","realtimeInputConfig"],G);const ee=h(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&g(e,["setup","contextWindowCompression"],ee);const re=h(n,["proactivity"]);if(e!==void 0&&re!=null&&g(e,["setup","proactivity"],re),h(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function Zk(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],Jk(s));const a=h(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const o=h(n,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const c=h(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const f=h(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const p=h(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=h(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=h(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=h(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],wg(_));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const A=h(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],A);const N=h(n,["systemInstruction"]);e!==void 0&&N!=null&&g(e,["setup","systemInstruction"],Tn(N));const C=h(n,["tools"]);if(e!==void 0&&C!=null){let M=dl(C);Array.isArray(M)&&(M=M.map(D=>uR(ul(D)))),g(e,["setup","tools"],M)}const I=h(n,["sessionResumption"]);e!==void 0&&I!=null&&g(e,["setup","sessionResumption"],I);const j=h(n,["inputAudioTranscription"]);e!==void 0&&j!=null&&g(e,["setup","inputAudioTranscription"],j);const L=h(n,["outputAudioTranscription"]);e!==void 0&&L!=null&&g(e,["setup","outputAudioTranscription"],L);const G=h(n,["realtimeInputConfig"]);e!==void 0&&G!=null&&g(e,["setup","realtimeInputConfig"],G);const ee=h(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&g(e,["setup","contextWindowCompression"],ee);const re=h(n,["proactivity"]);e!==void 0&&re!=null&&g(e,["setup","proactivity"],re);const oe=h(n,["explicitVadSignal"]);return e!==void 0&&oe!=null&&g(e,["setup","explicitVadSignal"],oe),t}function eR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["setup","model"],at(n,s));const a=h(e,["config"]);return a!=null&&g(t,["config"],Xk(a,t)),t}function tR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["setup","model"],at(n,s));const a=h(e,["config"]);return a!=null&&g(t,["config"],Zk(a,t)),t}function nR(n){const e={},t=h(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function sR(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["weightedPrompts"],s)}return e}function iR(n){const e={},t=h(n,["media"]);if(t!=null){let m=zE(t);Array.isArray(m)&&(m=m.map(v=>Gd(v))),g(e,["mediaChunks"],m)}const s=h(n,["audio"]);s!=null&&g(e,["audio"],Gd(qE(s)));const a=h(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const o=h(n,["video"]);o!=null&&g(e,["video"],Gd(FE(o)));const c=h(n,["text"]);c!=null&&g(e,["text"],c);const f=h(n,["activityStart"]);f!=null&&g(e,["activityStart"],f);const p=h(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function rR(n){const e={},t=h(n,["media"]);if(t!=null){let m=zE(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const s=h(n,["audio"]);s!=null&&g(e,["audio"],qE(s));const a=h(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const o=h(n,["video"]);o!=null&&g(e,["video"],FE(o));const c=h(n,["text"]);c!=null&&g(e,["text"],c);const f=h(n,["activityStart"]);f!=null&&g(e,["activityStart"],f);const p=h(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function aR(n){const e={},t=h(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=h(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const a=h(n,["toolCall"]);a!=null&&g(e,["toolCall"],a);const o=h(n,["toolCallCancellation"]);o!=null&&g(e,["toolCallCancellation"],o);const c=h(n,["usageMetadata"]);c!=null&&g(e,["usageMetadata"],dR(c));const f=h(n,["goAway"]);f!=null&&g(e,["goAway"],f);const p=h(n,["sessionResumptionUpdate"]);p!=null&&g(e,["sessionResumptionUpdate"],p);const m=h(n,["voiceActivityDetectionSignal"]);return m!=null&&g(e,["voiceActivityDetectionSignal"],m),e}function oR(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=h(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],Kk(o));const c=h(n,["functionCall"]);c!=null&&g(e,["functionCall"],$k(c));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const p=h(n,["inlineData"]);p!=null&&g(e,["inlineData"],Gd(p));const m=h(n,["text"]);m!=null&&g(e,["text"],m);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function lR(n){const e={},t=h(n,["handle"]);if(t!=null&&g(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function cR(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=h(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const c=h(n,["googleMaps"]);c!=null&&g(e,["googleMaps"],Qk(c));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],Wk(f));const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=h(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function uR(n){const e={},t=h(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=h(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=h(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const o=h(n,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const c=h(n,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>Yk(T))),g(e,["functionDeclarations"],_)}const f=h(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const p=h(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const m=h(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const v=h(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function dR(n){const e={},t=h(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=h(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const a=h(n,["candidatesTokenCount"]);a!=null&&g(e,["responseTokenCount"],a);const o=h(n,["toolUsePromptTokenCount"]);o!=null&&g(e,["toolUsePromptTokenCount"],o);const c=h(n,["thoughtsTokenCount"]);c!=null&&g(e,["thoughtsTokenCount"],c);const f=h(n,["totalTokenCount"]);f!=null&&g(e,["totalTokenCount"],f);const p=h(n,["promptTokensDetails"]);if(p!=null){let A=p;Array.isArray(A)&&(A=A.map(N=>N)),g(e,["promptTokensDetails"],A)}const m=h(n,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(N=>N)),g(e,["cacheTokensDetails"],A)}const v=h(n,["candidatesTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(N=>N)),g(e,["responseTokensDetails"],A)}const _=h(n,["toolUsePromptTokensDetails"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(N=>N)),g(e,["toolUsePromptTokensDetails"],A)}const T=h(n,["trafficType"]);return T!=null&&g(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fR(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function hR(n){const e={},t=h(n,["content"]);t!=null&&g(e,["content"],t);const s=h(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],mR(s));const a=h(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const o=h(n,["finishReason"]);o!=null&&g(e,["finishReason"],o);const c=h(n,["avgLogprobs"]);c!=null&&g(e,["avgLogprobs"],c);const f=h(n,["groundingMetadata"]);f!=null&&g(e,["groundingMetadata"],f);const p=h(n,["index"]);p!=null&&g(e,["index"],p);const m=h(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=h(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(A=>A)),g(e,["safetyRatings"],T)}const _=h(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function mR(n){const e={},t=h(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function pR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["contents"]);if(a!=null){let o=ms(a);Array.isArray(o)&&(o=o.map(c=>c)),g(t,["contents"],o)}return t}function gR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),g(e,["tokensInfo"],a)}return e}function yR(n){const e={},t=h(n,["values"]);t!=null&&g(e,["values"],t);const s=h(n,["statistics"]);return s!=null&&g(e,["statistics"],xR(s)),e}function xR(n){const e={},t=h(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=h(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function Mf(n){const e={},t=h(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(o=>N2(o))),g(e,["parts"],a)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function vR(n){const e={},t=h(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=h(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function bR(n){const e={};if(h(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function _R(n,e){const t={},s=h(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],Tn(s));const a=h(n,["tools"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(f=>rS(f))),g(e,["tools"],c)}const o=h(n,["generationConfig"]);return e!==void 0&&o!=null&&g(e,["generationConfig"],f2(o)),t}function TR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["contents"]);if(a!=null){let c=ms(a);Array.isArray(c)&&(c=c.map(f=>Mf(f))),g(t,["contents"],c)}const o=h(e,["config"]);return o!=null&&bR(o),t}function ER(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["contents"]);if(a!=null){let c=ms(a);Array.isArray(c)&&(c=c.map(f=>f)),g(t,["contents"],c)}const o=h(e,["config"]);return o!=null&&_R(o,t),t}function SR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const a=h(n,["cachedContentTokenCount"]);return a!=null&&g(e,["cachedContentTokenCount"],a),e}function AR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function wR(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],at(n,s)),t}function NR(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],at(n,s)),t}function CR(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function IR(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function kR(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=h(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const o=h(n,["numberOfImages"]);e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o);const c=h(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const f=h(n,["guidanceScale"]);e!==void 0&&f!=null&&g(e,["parameters","guidanceScale"],f);const p=h(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=h(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=h(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=h(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=h(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const A=h(n,["language"]);e!==void 0&&A!=null&&g(e,["parameters","language"],A);const N=h(n,["outputMimeType"]);e!==void 0&&N!=null&&g(e,["parameters","outputOptions","mimeType"],N);const C=h(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&g(e,["parameters","outputOptions","compressionQuality"],C);const I=h(n,["addWatermark"]);e!==void 0&&I!=null&&g(e,["parameters","addWatermark"],I);const j=h(n,["labels"]);e!==void 0&&j!=null&&g(e,["labels"],j);const L=h(n,["editMode"]);e!==void 0&&L!=null&&g(e,["parameters","editMode"],L);const G=h(n,["baseSteps"]);return e!==void 0&&G!=null&&g(e,["parameters","editConfig","baseSteps"],G),t}function RR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const o=h(e,["referenceImages"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>D2(p))),g(t,["instances[0]","referenceImages"],f)}const c=h(e,["config"]);return c!=null&&kR(c,t),t}function MR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>Df(o))),g(e,["generatedImages"],a)}return e}function DR(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=h(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const o=h(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&g(e,["requests[]","outputDimensionality"],o),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function PR(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const a=h(n,["title"]);e!==void 0&&a!=null&&g(e,["instances[]","title"],a);const o=h(n,["outputDimensionality"]);e!==void 0&&o!=null&&g(e,["parameters","outputDimensionality"],o);const c=h(n,["mimeType"]);e!==void 0&&c!=null&&g(e,["instances[]","mimeType"],c);const f=h(n,["autoTruncate"]);return e!==void 0&&f!=null&&g(e,["parameters","autoTruncate"],f),t}function LR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["contents"]);if(a!=null){let f=Eg(n,a);Array.isArray(f)&&(f=f.map(p=>p)),g(t,["requests[]","content"],f)}const o=h(e,["config"]);o!=null&&DR(o,t);const c=h(e,["model"]);return c!==void 0&&g(t,["requests[]","model"],at(n,c)),t}function UR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["contents"]);if(a!=null){let c=Eg(n,a);Array.isArray(c)&&(c=c.map(f=>f)),g(t,["instances[]","content"],c)}const o=h(e,["config"]);return o!=null&&PR(o,t),t}function VR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["embeddings"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["embeddings"],o)}const a=h(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function OR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions[]","embeddings"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>yR(c))),g(e,["embeddings"],o)}const a=h(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function jR(n){const e={},t=h(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=h(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function GR(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function BR(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const a=h(n,["name"]);if(a!=null&&g(e,["name"],a),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function HR(n){const e={},t=h(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=h(n,["mode"]);if(s!=null&&g(e,["mode"],s),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zR(n){const e={},t=h(n,["description"]);t!=null&&g(e,["description"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const a=h(n,["parameters"]);a!=null&&g(e,["parameters"],a);const o=h(n,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const c=h(n,["response"]);c!=null&&g(e,["response"],c);const f=h(n,["responseJsonSchema"]);if(f!=null&&g(e,["responseJsonSchema"],f),h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function FR(n,e,t){const s={},a=h(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],Mf(Tn(a)));const o=h(e,["temperature"]);o!=null&&g(s,["temperature"],o);const c=h(e,["topP"]);c!=null&&g(s,["topP"],c);const f=h(e,["topK"]);f!=null&&g(s,["topK"],f);const p=h(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=h(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=h(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=h(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=h(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const A=h(e,["presencePenalty"]);A!=null&&g(s,["presencePenalty"],A);const N=h(e,["frequencyPenalty"]);N!=null&&g(s,["frequencyPenalty"],N);const C=h(e,["seed"]);C!=null&&g(s,["seed"],C);const I=h(e,["responseMimeType"]);I!=null&&g(s,["responseMimeType"],I);const j=h(e,["responseSchema"]);j!=null&&g(s,["responseSchema"],Sg(j));const L=h(e,["responseJsonSchema"]);if(L!=null&&g(s,["responseJsonSchema"],L),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=h(e,["safetySettings"]);if(t!==void 0&&G!=null){let U=G;Array.isArray(U)&&(U=U.map(pe=>P2(pe))),g(t,["safetySettings"],U)}const ee=h(e,["tools"]);if(t!==void 0&&ee!=null){let U=dl(ee);Array.isArray(U)&&(U=U.map(pe=>B2(ul(pe)))),g(t,["tools"],U)}const re=h(e,["toolConfig"]);if(t!==void 0&&re!=null&&g(t,["toolConfig"],G2(re)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const oe=h(e,["cachedContent"]);t!==void 0&&oe!=null&&g(t,["cachedContent"],Yi(n,oe));const M=h(e,["responseModalities"]);M!=null&&g(s,["responseModalities"],M);const D=h(e,["mediaResolution"]);D!=null&&g(s,["mediaResolution"],D);const R=h(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],Ag(R)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=h(e,["thinkingConfig"]);O!=null&&g(s,["thinkingConfig"],O);const V=h(e,["imageConfig"]);V!=null&&g(s,["imageConfig"],y2(V));const B=h(e,["enableEnhancedCivicAnswers"]);return B!=null&&g(s,["enableEnhancedCivicAnswers"],B),s}function qR(n,e,t){const s={},a=h(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],Tn(a));const o=h(e,["temperature"]);o!=null&&g(s,["temperature"],o);const c=h(e,["topP"]);c!=null&&g(s,["topP"],c);const f=h(e,["topK"]);f!=null&&g(s,["topK"],f);const p=h(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=h(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=h(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=h(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=h(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const A=h(e,["presencePenalty"]);A!=null&&g(s,["presencePenalty"],A);const N=h(e,["frequencyPenalty"]);N!=null&&g(s,["frequencyPenalty"],N);const C=h(e,["seed"]);C!=null&&g(s,["seed"],C);const I=h(e,["responseMimeType"]);I!=null&&g(s,["responseMimeType"],I);const j=h(e,["responseSchema"]);j!=null&&g(s,["responseSchema"],Sg(j));const L=h(e,["responseJsonSchema"]);L!=null&&g(s,["responseJsonSchema"],L);const G=h(e,["routingConfig"]);G!=null&&g(s,["routingConfig"],G);const ee=h(e,["modelSelectionConfig"]);ee!=null&&g(s,["modelConfig"],ee);const re=h(e,["safetySettings"]);if(t!==void 0&&re!=null){let J=re;Array.isArray(J)&&(J=J.map(he=>he)),g(t,["safetySettings"],J)}const oe=h(e,["tools"]);if(t!==void 0&&oe!=null){let J=dl(oe);Array.isArray(J)&&(J=J.map(he=>rS(ul(he)))),g(t,["tools"],J)}const M=h(e,["toolConfig"]);t!==void 0&&M!=null&&g(t,["toolConfig"],M);const D=h(e,["labels"]);t!==void 0&&D!=null&&g(t,["labels"],D);const R=h(e,["cachedContent"]);t!==void 0&&R!=null&&g(t,["cachedContent"],Yi(n,R));const O=h(e,["responseModalities"]);O!=null&&g(s,["responseModalities"],O);const V=h(e,["mediaResolution"]);V!=null&&g(s,["mediaResolution"],V);const B=h(e,["speechConfig"]);B!=null&&g(s,["speechConfig"],Ag(B));const U=h(e,["audioTimestamp"]);U!=null&&g(s,["audioTimestamp"],U);const pe=h(e,["thinkingConfig"]);pe!=null&&g(s,["thinkingConfig"],pe);const Re=h(e,["imageConfig"]);if(Re!=null&&g(s,["imageConfig"],x2(Re)),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function D_(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["contents"]);if(a!=null){let c=ms(a);Array.isArray(c)&&(c=c.map(f=>Mf(f))),g(t,["contents"],c)}const o=h(e,["config"]);return o!=null&&g(t,["generationConfig"],FR(n,o,t)),t}function P_(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["contents"]);if(a!=null){let c=ms(a);Array.isArray(c)&&(c=c.map(f=>f)),g(t,["contents"],c)}const o=h(e,["config"]);return o!=null&&g(t,["generationConfig"],qR(n,o,t)),t}function L_(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>hR(m))),g(e,["candidates"],p)}const a=h(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const o=h(n,["promptFeedback"]);o!=null&&g(e,["promptFeedback"],o);const c=h(n,["responseId"]);c!=null&&g(e,["responseId"],c);const f=h(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function U_(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const a=h(n,["createTime"]);a!=null&&g(e,["createTime"],a);const o=h(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const c=h(n,["promptFeedback"]);c!=null&&g(e,["promptFeedback"],c);const f=h(n,["responseId"]);f!=null&&g(e,["responseId"],f);const p=h(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function KR(n,e){const t={};if(h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=h(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=h(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const o=h(n,["guidanceScale"]);if(e!==void 0&&o!=null&&g(e,["parameters","guidanceScale"],o),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=h(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const f=h(n,["personGeneration"]);e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f);const p=h(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=h(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=h(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const _=h(n,["outputMimeType"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","mimeType"],_);const T=h(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T),h(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=h(n,["imageSize"]);if(e!==void 0&&A!=null&&g(e,["parameters","sampleImageSize"],A),h(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function $R(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=h(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const o=h(n,["numberOfImages"]);e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o);const c=h(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const f=h(n,["guidanceScale"]);e!==void 0&&f!=null&&g(e,["parameters","guidanceScale"],f);const p=h(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=h(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=h(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=h(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=h(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const A=h(n,["language"]);e!==void 0&&A!=null&&g(e,["parameters","language"],A);const N=h(n,["outputMimeType"]);e!==void 0&&N!=null&&g(e,["parameters","outputOptions","mimeType"],N);const C=h(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&g(e,["parameters","outputOptions","compressionQuality"],C);const I=h(n,["addWatermark"]);e!==void 0&&I!=null&&g(e,["parameters","addWatermark"],I);const j=h(n,["labels"]);e!==void 0&&j!=null&&g(e,["labels"],j);const L=h(n,["imageSize"]);e!==void 0&&L!=null&&g(e,["parameters","sampleImageSize"],L);const G=h(n,["enhancePrompt"]);return e!==void 0&&G!=null&&g(e,["parameters","enhancePrompt"],G),t}function YR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const o=h(e,["config"]);return o!=null&&KR(o,t),t}function JR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const o=h(e,["config"]);return o!=null&&$R(o,t),t}function QR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>l2(c))),g(e,["generatedImages"],o)}const a=h(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],sS(a)),e}function WR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>Df(c))),g(e,["generatedImages"],o)}const a=h(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],iS(a)),e}function XR(n,e){const t={},s=h(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=h(n,["durationSeconds"]);if(e!==void 0&&a!=null&&g(e,["parameters","durationSeconds"],a),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const c=h(n,["resolution"]);e!==void 0&&c!=null&&g(e,["parameters","resolution"],c);const f=h(n,["personGeneration"]);if(e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f),h(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=h(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=h(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),h(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=h(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],Pf(v));const _=h(n,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(A=>eM(A))),g(e,["instances[0]","referenceImages"],T)}if(h(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function ZR(n,e){const t={},s=h(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=h(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const o=h(n,["fps"]);e!==void 0&&o!=null&&g(e,["parameters","fps"],o);const c=h(n,["durationSeconds"]);e!==void 0&&c!=null&&g(e,["parameters","durationSeconds"],c);const f=h(n,["seed"]);e!==void 0&&f!=null&&g(e,["parameters","seed"],f);const p=h(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=h(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=h(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=h(n,["pubsubTopic"]);e!==void 0&&_!=null&&g(e,["parameters","pubsubTopic"],_);const T=h(n,["negativePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","negativePrompt"],T);const A=h(n,["enhancePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","enhancePrompt"],A);const N=h(n,["generateAudio"]);e!==void 0&&N!=null&&g(e,["parameters","generateAudio"],N);const C=h(n,["lastFrame"]);e!==void 0&&C!=null&&g(e,["instances[0]","lastFrame"],Hs(C));const I=h(n,["referenceImages"]);if(e!==void 0&&I!=null){let G=I;Array.isArray(G)&&(G=G.map(ee=>tM(ee))),g(e,["instances[0]","referenceImages"],G)}const j=h(n,["mask"]);e!==void 0&&j!=null&&g(e,["instances[0]","mask"],Z2(j));const L=h(n,["compressionQuality"]);return e!==void 0&&L!=null&&g(e,["parameters","compressionQuality"],L),t}function e2(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],i2(c)),e}function t2(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response"]);return c!=null&&g(e,["response"],r2(c)),e}function n2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const o=h(e,["image"]);o!=null&&g(t,["instances[0]","image"],Pf(o));const c=h(e,["video"]);c!=null&&g(t,["instances[0]","video"],aS(c));const f=h(e,["source"]);f!=null&&a2(f,t);const p=h(e,["config"]);return p!=null&&XR(p,t),t}function s2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const o=h(e,["image"]);o!=null&&g(t,["instances[0]","image"],Hs(o));const c=h(e,["video"]);c!=null&&g(t,["instances[0]","video"],oS(c));const f=h(e,["source"]);f!=null&&o2(f,t);const p=h(e,["config"]);return p!=null&&ZR(p,t),t}function i2(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(c=>u2(c))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=h(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function r2(n){const e={},t=h(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(c=>d2(c))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=h(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function a2(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=h(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Pf(a));const o=h(n,["video"]);return e!==void 0&&o!=null&&g(e,["instances[0]","video"],aS(o)),t}function o2(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=h(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Hs(a));const o=h(n,["video"]);return e!==void 0&&o!=null&&g(e,["instances[0]","video"],oS(o)),t}function l2(n){const e={},t=h(n,["_self"]);t!=null&&g(e,["image"],v2(t));const s=h(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=h(n,["_self"]);return a!=null&&g(e,["safetyAttributes"],sS(a)),e}function Df(n){const e={},t=h(n,["_self"]);t!=null&&g(e,["image"],nS(t));const s=h(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=h(n,["_self"]);a!=null&&g(e,["safetyAttributes"],iS(a));const o=h(n,["prompt"]);return o!=null&&g(e,["enhancedPrompt"],o),e}function c2(n){const e={},t=h(n,["_self"]);t!=null&&g(e,["mask"],nS(t));const s=h(n,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),g(e,["labels"],a)}return e}function u2(n){const e={},t=h(n,["video"]);return t!=null&&g(e,["video"],W2(t)),e}function d2(n){const e={},t=h(n,["_self"]);return t!=null&&g(e,["video"],X2(t)),e}function f2(n){const e={},t=h(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=h(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=h(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const o=h(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const c=h(n,["enableAffectiveDialog"]);c!=null&&g(e,["enableAffectiveDialog"],c);const f=h(n,["frequencyPenalty"]);f!=null&&g(e,["frequencyPenalty"],f);const p=h(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=h(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=h(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=h(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=h(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const A=h(n,["responseMimeType"]);A!=null&&g(e,["responseMimeType"],A);const N=h(n,["responseModalities"]);N!=null&&g(e,["responseModalities"],N);const C=h(n,["responseSchema"]);C!=null&&g(e,["responseSchema"],C);const I=h(n,["routingConfig"]);I!=null&&g(e,["routingConfig"],I);const j=h(n,["seed"]);j!=null&&g(e,["seed"],j);const L=h(n,["speechConfig"]);L!=null&&g(e,["speechConfig"],L);const G=h(n,["stopSequences"]);G!=null&&g(e,["stopSequences"],G);const ee=h(n,["temperature"]);ee!=null&&g(e,["temperature"],ee);const re=h(n,["thinkingConfig"]);re!=null&&g(e,["thinkingConfig"],re);const oe=h(n,["topK"]);oe!=null&&g(e,["topK"],oe);const M=h(n,["topP"]);if(M!=null&&g(e,["topP"],M),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function h2(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],at(n,s)),t}function m2(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],at(n,s)),t}function p2(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function g2(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function y2(n){const e={},t=h(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=h(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),h(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(h(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function x2(n){const e={},t=h(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=h(n,["imageSize"]);s!=null&&g(e,["imageSize"],s);const a=h(n,["personGeneration"]);a!=null&&g(e,["personGeneration"],a);const o=h(n,["outputMimeType"]);o!=null&&g(e,["imageOutputOptions","mimeType"],o);const c=h(n,["outputCompressionQuality"]);return c!=null&&g(e,["imageOutputOptions","compressionQuality"],c),e}function v2(n){const e={},t=h(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],Jr(t));const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function nS(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],Jr(s));const a=h(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function Pf(n){const e={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=h(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],Jr(t));const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Hs(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=h(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Jr(s));const a=h(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function b2(n,e,t){const s={},a=h(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const o=h(e,["pageToken"]);t!==void 0&&o!=null&&g(t,["_query","pageToken"],o);const c=h(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const f=h(e,["queryBase"]);return t!==void 0&&f!=null&&g(t,["_url","models_url"],JE(n,f)),s}function _2(n,e,t){const s={},a=h(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const o=h(e,["pageToken"]);t!==void 0&&o!=null&&g(t,["_query","pageToken"],o);const c=h(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const f=h(e,["queryBase"]);return t!==void 0&&f!=null&&g(t,["_url","models_url"],JE(n,f)),s}function T2(n,e){const t={},s=h(e,["config"]);return s!=null&&b2(n,s,t),t}function E2(n,e){const t={},s=h(e,["config"]);return s!=null&&_2(n,s,t),t}function S2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["_self"]);if(a!=null){let o=QE(a);Array.isArray(o)&&(o=o.map(c=>Pp(c))),g(e,["models"],o)}return e}function A2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["_self"]);if(a!=null){let o=QE(a);Array.isArray(o)&&(o=o.map(c=>Lp(c))),g(e,["models"],o)}return e}function w2(n){const e={},t=h(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=h(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const a=h(n,["maskDilation"]);return a!=null&&g(e,["dilation"],a),e}function Pp(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=h(n,["description"]);a!=null&&g(e,["description"],a);const o=h(n,["version"]);o!=null&&g(e,["version"],o);const c=h(n,["_self"]);c!=null&&g(e,["tunedModelInfo"],H2(c));const f=h(n,["inputTokenLimit"]);f!=null&&g(e,["inputTokenLimit"],f);const p=h(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=h(n,["supportedGenerationMethods"]);m!=null&&g(e,["supportedActions"],m);const v=h(n,["temperature"]);v!=null&&g(e,["temperature"],v);const _=h(n,["maxTemperature"]);_!=null&&g(e,["maxTemperature"],_);const T=h(n,["topP"]);T!=null&&g(e,["topP"],T);const A=h(n,["topK"]);A!=null&&g(e,["topK"],A);const N=h(n,["thinking"]);return N!=null&&g(e,["thinking"],N),e}function Lp(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=h(n,["description"]);a!=null&&g(e,["description"],a);const o=h(n,["versionId"]);o!=null&&g(e,["version"],o);const c=h(n,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>jR(T))),g(e,["endpoints"],_)}const f=h(n,["labels"]);f!=null&&g(e,["labels"],f);const p=h(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],z2(p));const m=h(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=h(n,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(T=>T)),g(e,["checkpoints"],_)}return e}function N2(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=h(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],GR(o));const c=h(n,["functionCall"]);c!=null&&g(e,["functionCall"],BR(c));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const p=h(n,["inlineData"]);p!=null&&g(e,["inlineData"],fR(p));const m=h(n,["text"]);m!=null&&g(e,["text"],m);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function C2(n){const e={},t=h(n,["productImage"]);return t!=null&&g(e,["image"],Hs(t)),e}function I2(n,e){const t={},s=h(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=h(n,["baseSteps"]);e!==void 0&&a!=null&&g(e,["parameters","baseSteps"],a);const o=h(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const c=h(n,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const f=h(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const p=h(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=h(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=h(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const _=h(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","compressionQuality"],_);const T=h(n,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const A=h(n,["labels"]);return e!==void 0&&A!=null&&g(e,["labels"],A),t}function k2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["source"]);a!=null&&M2(a,t);const o=h(e,["config"]);return o!=null&&I2(o,t),t}function R2(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>Df(a))),g(e,["generatedImages"],s)}return e}function M2(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=h(n,["personImage"]);e!==void 0&&a!=null&&g(e,["instances[0]","personImage","image"],Hs(a));const o=h(n,["productImages"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>C2(f))),g(e,["instances[0]","productImages"],c)}return t}function D2(n){const e={},t=h(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],Hs(t));const s=h(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const a=h(n,["referenceType"]);a!=null&&g(e,["referenceType"],a);const o=h(n,["maskImageConfig"]);o!=null&&g(e,["maskImageConfig"],w2(o));const c=h(n,["controlImageConfig"]);c!=null&&g(e,["controlImageConfig"],vR(c));const f=h(n,["styleImageConfig"]);f!=null&&g(e,["styleImageConfig"],f);const p=h(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function sS(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=h(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=h(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function iS(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=h(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=h(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function P2(n){const e={},t=h(n,["category"]);if(t!=null&&g(e,["category"],t),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function L2(n){const e={},t=h(n,["image"]);return t!=null&&g(e,["image"],Hs(t)),e}function U2(n,e){const t={},s=h(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const a=h(n,["maxPredictions"]);e!==void 0&&a!=null&&g(e,["parameters","maxPredictions"],a);const o=h(n,["confidenceThreshold"]);e!==void 0&&o!=null&&g(e,["parameters","confidenceThreshold"],o);const c=h(n,["maskDilation"]);e!==void 0&&c!=null&&g(e,["parameters","maskDilation"],c);const f=h(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&g(e,["parameters","binaryColorThreshold"],f);const p=h(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function V2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["source"]);a!=null&&j2(a,t);const o=h(e,["config"]);return o!=null&&U2(o,t),t}function O2(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>c2(a))),g(e,["generatedMasks"],s)}return e}function j2(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=h(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Hs(a));const o=h(n,["scribbleImage"]);return e!==void 0&&o!=null&&g(e,["instances[0]","scribble"],L2(o)),t}function G2(n){const e={},t=h(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=h(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],HR(s)),e}function B2(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=h(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const c=h(n,["googleMaps"]);c!=null&&g(e,["googleMaps"],p2(c));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],g2(f));const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=h(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function rS(n){const e={},t=h(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=h(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=h(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const o=h(n,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const c=h(n,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>zR(T))),g(e,["functionDeclarations"],_)}const f=h(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const p=h(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const m=h(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const v=h(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function H2(n){const e={},t=h(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=h(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=h(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function z2(n){const e={},t=h(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=h(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=h(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function F2(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=h(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const o=h(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&g(e,["defaultCheckpointId"],o),t}function q2(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=h(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const o=h(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&g(e,["defaultCheckpointId"],o),t}function K2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","name"],at(n,s));const a=h(e,["config"]);return a!=null&&F2(a,t),t}function $2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["config"]);return a!=null&&q2(a,t),t}function Y2(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=h(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&g(e,["parameters","safetySetting"],a);const o=h(n,["personGeneration"]);e!==void 0&&o!=null&&g(e,["parameters","personGeneration"],o);const c=h(n,["includeRaiReason"]);e!==void 0&&c!=null&&g(e,["parameters","includeRaiReason"],c);const f=h(n,["outputMimeType"]);e!==void 0&&f!=null&&g(e,["parameters","outputOptions","mimeType"],f);const p=h(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const m=h(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=h(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=h(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=h(n,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const A=h(n,["mode"]);return e!==void 0&&A!=null&&g(e,["parameters","mode"],A),t}function J2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],at(n,s));const a=h(e,["image"]);a!=null&&g(t,["instances[0]","image"],Hs(a));const o=h(e,["upscaleFactor"]);o!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],o);const c=h(e,["config"]);return c!=null&&Y2(c,t),t}function Q2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>Df(o))),g(e,["generatedImages"],a)}return e}function W2(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["uri"],t);const s=h(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],Jr(s));const a=h(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function X2(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Jr(s));const a=h(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function Z2(n){const e={},t=h(n,["image"]);t!=null&&g(e,["_self"],Hs(t));const s=h(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function eM(n){const e={},t=h(n,["image"]);t!=null&&g(e,["image"],Pf(t));const s=h(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function tM(n){const e={},t=h(n,["image"]);t!=null&&g(e,["image"],Hs(t));const s=h(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function aS(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["uri"],t);const s=h(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],Jr(s));const a=h(n,["mimeType"]);return a!=null&&g(e,["encoding"],a),e}function oS(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=h(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Jr(s));const a=h(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nM(n,e){const t={},s=h(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["displayName"],s),t}function sM(n){const e={},t=h(n,["config"]);return t!=null&&nM(t,e),e}function iM(n,e){const t={},s=h(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function rM(n){const e={},t=h(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=h(n,["config"]);return s!=null&&iM(s,e),e}function aM(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function oM(n,e){const t={},s=h(n,["customMetadata"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["customMetadata"],o)}const a=h(n,["chunkingConfig"]);return e!==void 0&&a!=null&&g(e,["chunkingConfig"],a),t}function lM(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response"]);return c!=null&&g(e,["response"],uM(c)),e}function cM(n){const e={},t=h(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=h(n,["fileName"]);s!=null&&g(e,["fileName"],s);const a=h(n,["config"]);return a!=null&&oM(a,e),e}function uM(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["parent"]);s!=null&&g(e,["parent"],s);const a=h(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function dM(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function fM(n){const e={},t=h(n,["config"]);return t!=null&&dM(t,e),e}function hM(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["fileSearchStores"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["fileSearchStores"],o)}return e}function lS(n,e){const t={},s=h(n,["mimeType"]);e!==void 0&&s!=null&&g(e,["mimeType"],s);const a=h(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const o=h(n,["customMetadata"]);if(e!==void 0&&o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),g(e,["customMetadata"],f)}const c=h(n,["chunkingConfig"]);return e!==void 0&&c!=null&&g(e,["chunkingConfig"],c),t}function mM(n){const e={},t=h(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=h(n,["config"]);return s!=null&&lS(s,e),e}function pM(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gM="Content-Type",yM="X-Server-Timeout",xM="User-Agent",Up="x-goog-api-client",vM="1.35.0",bM=`google-genai-sdk/${vM}`,_M="v1beta1",TM="v1beta";class EM{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:_M,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:TM,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const a=[this.getRequestUrlInternal(t)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))a.searchParams.append(c,String(f));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,a.toString(),e.abortSignal),this.unaryApiCall(a,o,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[a,o]of Object.entries(t))typeof o=="object"?s[a]=Object.assign(Object.assign({},s[a]),o):o!==void 0&&(s[a]=o);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,a.toString(),e.abortSignal),this.streamApiCall(a,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,a){if(t&&t.timeout||a){const o=new AbortController,c=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>o.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}a&&a.addEventListener("abort",()=>{o.abort()}),e.signal=c}return t&&t.extraBody!==null&&SM(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await V_(a),new Rp(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await V_(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return Ls(this,arguments,function*(){var s;const a=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),o=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let c="";const f="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield Oe(a.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=o.decode(v,{stream:!0});try{const N=JSON.parse(_);if("error"in N){const C=JSON.parse(JSON.stringify(N.error)),I=C.status,j=C.code,L=`got status: ${I}. ${JSON.stringify(N)}`;if(j>=400&&j<600)throw new Rf({message:L,status:j})}}catch(N){if(N.name==="ApiError")throw N}c+=_;let T=-1,A=0;for(;;){T=-1,A=0;for(const I of p){const j=c.indexOf(I);j!==-1&&(T===-1||j<T)&&(T=j,A=I.length)}if(T===-1)break;const N=c.substring(0,T);c=c.substring(T+A);const C=N.trim();if(C.startsWith(f)){const I=C.substring(f.length).trim();try{const j=new Response(I,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Oe(new Rp(j))}catch(j){throw new Error(`exception parsing stream chunk ${I}. ${j}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=bM+" "+this.clientOptions.userAgentExtra;return e[xM]=t,e[Up]=t,e[gM]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[a,o]of Object.entries(e.headers))s.append(a,o);e.timeout&&e.timeout>0&&s.append(yM,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const a={};t!=null&&(a.mimeType=t.mimeType,a.name=t.name,a.displayName=t.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const o=this.clientOptions.uploader,c=await o.stat(e);a.sizeBytes=String(c.size);const f=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=f;const p={file:a},m=this.getFileName(e),v=Te("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,m,p,t==null?void 0:t.httpOptions);return o.upload(e,_,this)}async uploadFileToFileSearchStore(e,t,s){var a;const o=this.clientOptions.uploader,c=await o.stat(t),f=String(c.size),p=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),_={};s!=null&&lS(s,_);const T=await this.fetchUploadUrl(m,f,p,v,_,s==null?void 0:s.httpOptions);return o.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,a,o,c){var f;let p={};c?p=c:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const m=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:p});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(f=m==null?void 0:m.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function V_(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const a=JSON.stringify(s);throw t>=400&&t<600?new Rf({message:a,status:t}):new Error(a)}}function SM(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const o=JSON.parse(n.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))t=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(o,c){const f=Object.assign({},o);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const m=c[p],v=f[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?f[p]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),f[p]=m)}return f}const a=s(t,e);n.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AM="mcp_used/unknown";let wM=!1;function cS(n){for(const e of n)if(NM(e)||typeof e=="object"&&"inputSchema"in e)return!0;return wM}function uS(n){var e;const t=(e=n[Up])!==null&&e!==void 0?e:"";n[Up]=(t+` ${AM}`).trimStart()}function NM(n){return n!==null&&typeof n=="object"&&n instanceof Ng}function CM(n){return Ls(this,arguments,function*(t,s=100){let a,o=0;for(;o<s;){const c=yield Oe(t.listTools({cursor:a}));for(const f of c.tools)yield yield Oe(f),o++;if(!c.nextCursor)break;a=c.nextCursor}})}class Ng{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Ng(e,t)}async initialize(){var e,t,s,a;if(this.mcpTools.length>0)return;const o={},c=[];for(const v of this.mcpClients)try{for(var f=!0,p=(t=void 0,Us(CM(v))),m;m=await p.next(),e=m.done,!e;f=!0){a=m.value,f=!1;const _=a;c.push(_);const T=_.name;if(o[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);o[T]=v}}catch(_){t={error:_}}finally{try{!f&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),aI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const c=await a.callTool({name:s.name,arguments:s.args},void 0,o);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function IM(n,e,t){const s=new XC;let a;t.data instanceof Blob?a=JSON.parse(await t.data.text()):a=JSON.parse(t.data),Object.assign(s,a),e(s)}class kM{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),c=DM(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),p=`${a}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${f}`;let m=()=>{};const v=new Promise(G=>{m=G}),_=e.callbacks,T=function(){m({})},A=this.apiClient,N={onopen:T,onmessage:G=>{IM(A,_.onmessage,G)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(G){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(G){}},C=this.webSocketFactory.create(p,MM(c),N);C.connect(),await v;const L={setup:{model:at(this.apiClient,e.model)}};return C.send(JSON.stringify(L)),new RM(C,this.apiClient)}}class RM{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=sR(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=nR(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(qo.PLAY)}pause(){this.sendPlaybackControl(qo.PAUSE)}stop(){this.sendPlaybackControl(qo.STOP)}resetContext(){this.sendPlaybackControl(qo.RESET_CONTEXT)}close(){this.conn.close()}}function MM(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function DM(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function LM(n,e,t){const s=new WC;let a;t.data instanceof Blob?a=await t.data.text():t.data instanceof ArrayBuffer?a=new TextDecoder().decode(t.data):a=t.data;const o=JSON.parse(a);if(n.isVertexAI()){const c=aR(o);Object.assign(s,c)}else Object.assign(s,o);e(s)}class UM{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new kM(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,a,o,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&cS(e.config.tools)&&uS(_);const T=GM(_);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,v);else{const R=this.apiClient.getApiKey();let O="BidiGenerateContent",V="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",V="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${O}?${V}=${R}`}let A=()=>{};const N=new Promise(R=>{A=R}),C=e.callbacks,I=function(){var R;(R=C==null?void 0:C.onopen)===null||R===void 0||R.call(C),A({})},j=this.apiClient,L={onopen:I,onmessage:R=>{LM(j,C.onmessage,R)},onerror:(t=C==null?void 0:C.onerror)!==null&&t!==void 0?t:function(R){},onclose:(s=C==null?void 0:C.onclose)!==null&&s!==void 0?s:function(R){}},G=this.webSocketFactory.create(v,jM(T),L);G.connect(),await N;let ee=at(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ee.startsWith("publishers/")){const R=this.apiClient.getProject(),O=this.apiClient.getLocation();ee=`projects/${R}/locations/${O}/`+ee}let re={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Zd.AUDIO]}:e.config.responseModalities=[Zd.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const oe=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],M=[];for(const R of oe)if(this.isCallableTool(R)){const O=R;M.push(await O.tool())}else M.push(R);M.length>0&&(e.config.tools=M);const D={model:ee,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?re=tR(this.apiClient,D):re=eR(this.apiClient,D),delete re.config,G.send(JSON.stringify(re)),new OM(G,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const VM={turnComplete:!0};class OM{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=ms(t.turns),e.isVertexAI()||(s=s.map(a=>Mf(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const o of s){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(PM)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},VM),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:rR(e)}:t={realtimeInput:iR(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function jM(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function GM(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O_=10;function j_(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Jo(c)){a=!0;break}if(!a)return!0;const o=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Jo(n){return"callTool"in n&&typeof n.callTool=="function"}function BM(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(a=>Jo(a)))!==null&&s!==void 0?s:!1}function G_(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,a)=>{if(Jo(s))return;const o=s;o.functionDeclarations&&o.functionDeclarations.length>0&&t.push(a)}),t}function B_(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HM extends $i{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,a,o,c,f;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!BM(t)||j_(t.config))return await this.generateContentInternal(p);const m=G_(t);if(m.length>0){const C=m.map(I=>`tools[${I}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let v,_;const T=ms(p.contents),A=(o=(a=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&o!==void 0?o:O_;let N=0;for(;N<A&&(v=await this.generateContentInternal(p),!(!v.functionCalls||v.functionCalls.length===0));){const C=v.candidates[0].content,I=[];for(const j of(f=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(Jo(j)){const G=await j.callTool(v.functionCalls);I.push(...G)}N++,_={role:"user",parts:I},p.contents=ms(p.contents),p.contents.push(C),p.contents.push(_),B_(p.config)&&(T.push(C),T.push(_))}return B_(p.config)&&(v.automaticFunctionCallingHistory=T),v},this.generateContentStream=async t=>{var s,a,o,c,f;if(this.maybeMoveToResponseJsonSchem(t),j_(t.config)){const _=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(_)}const p=G_(t);if(p.length>0){const _=p.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(o=(a=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,v=(f=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var a;let o;const c=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((a=p==null?void 0:p.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?o=p==null?void 0:p.safetyAttributes:c.push(p);let f;return o?f={generatedImages:c,positivePromptSafetyAttributes:o,sdkHttpResponse:s.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},f}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new za(Bi.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const a={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async t=>{var s,a,o,c,f,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((a=t.video)===null||a===void 0)&&a.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(o=t.source)===null||o===void 0?void 0:o.video)===null||c===void 0)&&c.uri&&(!((p=(f=t.source)===null||f===void 0?void 0:f.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,a;const o=(t=e.config)===null||t===void 0?void 0:t.tools;if(!o)return e;const c=await Promise.all(o.map(async p=>Jo(p)?await p.tool():p)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&cS(e.config.tools)){const p=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),uS(m),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return f}async initAfcToolsMap(e){var t,s,a;const o=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Jo(c)){const f=c,p=await f.tool();for(const m of(a=p.functionDeclarations)!==null&&a!==void 0?a:[]){if(!m.name)throw new Error("Function declaration name is required.");if(o.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);o.set(m.name,f)}}return o}async processAfcStream(e){var t,s,a;const o=(a=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:O_;let c=!1,f=0;const p=await this.initAfcToolsMap(e);return(function(m,v,_){return Ls(this,arguments,function*(){for(var T,A,N,C,I,j;f<o;){c&&(f++,c=!1);const re=yield Oe(m.processParamsMaybeAddMcpUsage(_)),oe=yield Oe(m.generateContentStreamInternal(re)),M=[],D=[];try{for(var L=!0,G=(A=void 0,Us(oe)),ee;ee=yield Oe(G.next()),T=ee.done,!T;L=!0){C=ee.value,L=!1;const R=C;if(yield yield Oe(R),R.candidates&&(!((I=R.candidates[0])===null||I===void 0)&&I.content)){D.push(R.candidates[0].content);for(const O of(j=R.candidates[0].content.parts)!==null&&j!==void 0?j:[])if(f<o&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(O.functionCall.name)){const V=yield Oe(v.get(O.functionCall.name).callTool([O.functionCall]));M.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(R){A={error:R}}finally{try{!L&&!T&&(N=G.return)&&(yield Oe(N.call(G)))}finally{if(A)throw A.error}}if(M.length>0){c=!0;const R=new Sc;R.candidates=[{content:{role:"user",parts:M}}],yield yield Oe(R);const O=[];O.push(...D),O.push({role:"user",parts:M});const V=ms(_.contents).concat(O);_.contents=V}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=P_(this.apiClient,e);return f=Te("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=U_(v),T=new Sc;return Object.assign(T,_),T})}else{const m=D_(this.apiClient,e);return f=Te("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=L_(v),T=new Sc;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=P_(this.apiClient,e);return f=Te("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(_){return Ls(this,arguments,function*(){var T,A,N,C;try{for(var I=!0,j=Us(_),L;L=yield Oe(j.next()),T=L.done,!T;I=!0){C=L.value,I=!1;const G=C,ee=U_(yield Oe(G.json()));ee.sdkHttpResponse={headers:G.headers};const re=new Sc;Object.assign(re,ee),yield yield Oe(re)}}catch(G){A={error:G}}finally{try{!I&&!T&&(N=j.return)&&(yield Oe(N.call(j)))}finally{if(A)throw A.error}}})})}else{const m=D_(this.apiClient,e);return f=Te("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(_){return Ls(this,arguments,function*(){var T,A,N,C;try{for(var I=!0,j=Us(_),L;L=yield Oe(j.next()),T=L.done,!T;I=!0){C=L.value,I=!1;const G=C,ee=L_(yield Oe(G.json()));ee.sdkHttpResponse={headers:G.headers};const re=new Sc;Object.assign(re,ee),yield yield Oe(re)}}catch(G){A={error:G}}finally{try{!I&&!T&&(N=j.return)&&(yield Oe(N.call(j)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=UR(this.apiClient,e);return f=Te("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=OR(v),T=new g_;return Object.assign(T,_),T})}else{const m=LR(this.apiClient,e);return f=Te("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=VR(v),T=new g_;return Object.assign(T,_),T})}}async generateImagesInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=JR(this.apiClient,e);return f=Te("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=WR(v),T=new y_;return Object.assign(T,_),T})}else{const m=YR(this.apiClient,e);return f=Te("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=QR(v),T=new y_;return Object.assign(T,_),T})}}async editImageInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI()){const f=RR(this.apiClient,e);return o=Te("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=MR(p),v=new GC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI()){const f=J2(this.apiClient,e);return o=Te("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=Q2(p),v=new BC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI()){const f=k2(this.apiClient,e);return o=Te("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=R2(p),v=new HC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI()){const f=V2(this.apiClient,e);return o=Te("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=O2(p),v=new zC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=m2(this.apiClient,e);return f=Te("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Lp(v))}else{const m=h2(this.apiClient,e);return f=Te("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Pp(v))}}async listInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=E2(this.apiClient,e);return f=Te("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=A2(v),T=new x_;return Object.assign(T,_),T})}else{const m=T2(this.apiClient,e);return f=Te("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=S2(v),T=new x_;return Object.assign(T,_),T})}}async update(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=$2(this.apiClient,e);return f=Te("{model}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Lp(v))}else{const m=K2(this.apiClient,e);return f=Te("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Pp(v))}}async delete(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=NR(this.apiClient,e);return f=Te("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=IR(v),T=new v_;return Object.assign(T,_),T})}else{const m=wR(this.apiClient,e);return f=Te("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=CR(v),T=new v_;return Object.assign(T,_),T})}}async countTokens(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=ER(this.apiClient,e);return f=Te("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=AR(v),T=new b_;return Object.assign(T,_),T})}else{const m=TR(this.apiClient,e);return f=Te("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=SR(v),T=new b_;return Object.assign(T,_),T})}}async computeTokens(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI()){const f=pR(this.apiClient,e);return o=Te("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=gR(p),v=new FC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=s2(this.apiClient,e);return f=Te("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const _=t2(v),T=new ef;return Object.assign(T,_),T})}else{const m=n2(this.apiClient,e);return f=Te("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>{const _=e2(v),T=new ef;return Object.assign(T,_),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zM extends $i{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let o;s&&"httpOptions"in s&&(o=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let o;s&&"httpOptions"in s&&(o=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=PC(e);return f=Te("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const m=DC(e);return f=Te("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI()){const f=wC(e);return o=Te("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FM(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function qM(n){const e={},t=h(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(o=>eD(o))),g(e,["parts"],a)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function KM(n,e,t){const s={},a=h(e,["expireTime"]);t!==void 0&&a!=null&&g(t,["expireTime"],a);const o=h(e,["newSessionExpireTime"]);t!==void 0&&o!=null&&g(t,["newSessionExpireTime"],o);const c=h(e,["uses"]);t!==void 0&&c!=null&&g(t,["uses"],c);const f=h(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&g(t,["bidiGenerateContentSetup"],ZM(n,f));const p=h(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function $M(n,e){const t={},s=h(e,["config"]);return s!=null&&g(t,["config"],KM(n,s,t)),t}function YM(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function JM(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const a=h(n,["name"]);if(a!=null&&g(e,["name"],a),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function QM(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function WM(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function XM(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=h(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const o=h(n,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const c=h(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const f=h(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const p=h(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=h(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=h(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=h(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],wg(_));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const A=h(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],A);const N=h(n,["systemInstruction"]);e!==void 0&&N!=null&&g(e,["setup","systemInstruction"],qM(Tn(N)));const C=h(n,["tools"]);if(e!==void 0&&C!=null){let oe=dl(C);Array.isArray(oe)&&(oe=oe.map(M=>nD(ul(M)))),g(e,["setup","tools"],oe)}const I=h(n,["sessionResumption"]);e!==void 0&&I!=null&&g(e,["setup","sessionResumption"],tD(I));const j=h(n,["inputAudioTranscription"]);e!==void 0&&j!=null&&g(e,["setup","inputAudioTranscription"],j);const L=h(n,["outputAudioTranscription"]);e!==void 0&&L!=null&&g(e,["setup","outputAudioTranscription"],L);const G=h(n,["realtimeInputConfig"]);e!==void 0&&G!=null&&g(e,["setup","realtimeInputConfig"],G);const ee=h(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&g(e,["setup","contextWindowCompression"],ee);const re=h(n,["proactivity"]);if(e!==void 0&&re!=null&&g(e,["setup","proactivity"],re),h(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function ZM(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["setup","model"],at(n,s));const a=h(e,["config"]);return a!=null&&g(t,["config"],XM(a,t)),t}function eD(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=h(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],YM(o));const c=h(n,["functionCall"]);c!=null&&g(e,["functionCall"],JM(c));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const p=h(n,["inlineData"]);p!=null&&g(e,["inlineData"],FM(p));const m=h(n,["text"]);m!=null&&g(e,["text"],m);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function tD(n){const e={},t=h(n,["handle"]);if(t!=null&&g(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function nD(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=h(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const c=h(n,["googleMaps"]);c!=null&&g(e,["googleMaps"],QM(c));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],WM(f));const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=h(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sD(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(o=>`${t}.${o}`);e.push(...a)}else e.push(t)}return e.join(",")}function iD(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const o=s.setup;typeof o=="object"&&o!==null?(n.bidiGenerateContentSetup=o,t=o):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const a=n.fieldMask;if(t){const o=sD(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?n.fieldMask=o:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];a.length>0&&(f=a.map(m=>c.includes(m)?`generationConfig.${m}`:m));const p=[];o&&p.push(o),f.length>0&&p.push(...f),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?n.fieldMask=a.join(","):delete n.fieldMask;return n}class rD extends $i{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=$M(this.apiClient,e);o=Te("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const p=iD(f,e.config);return a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aD(n,e){const t={},s=h(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function oD(n){const e={},t=h(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=h(n,["config"]);return s!=null&&aD(s,e),e}function lD(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function cD(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function uD(n){const e={},t=h(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const s=h(n,["config"]);return s!=null&&cD(s,e),e}function dD(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["documents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fD extends $i{constructor(e){super(),this.apiClient=e,this.list=async t=>new za(Bi.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=lD(e);return o=Te("{name}",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=oD(e);a=Te("{name}",c._url),o=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=uD(e);return o=Te("{parent}/documents",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=dD(p),v=new qC;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hD extends $i{constructor(e,t=new fD(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new za(Bi.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=sM(e);return o=Te("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async get(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=aM(e);return o=Te("{name}",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=rM(e);a=Te("{name}",c._url),o=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=fM(e);return o=Te("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=hM(p),v=new KC;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=mM(e);return o=Te("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=pM(p),v=new $C;return Object.assign(v,m),v})}}async importFile(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=cM(e);return o=Te("{file_search_store_name}:importFile",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=lM(p),v=new _g;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let dS=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return dS=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const mD=()=>dS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Op=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gs extends Error{}class kn extends gs{constructor(e,t,s,a){super(`${kn.makeMessage(e,t,s)}`),this.status=e,this.headers=a,this.error=t}static makeMessage(e,t,s){const a=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,t,s,a){if(!e||!a)return new Lf({message:s,cause:Op(t)});const o=t;return e===400?new hS(e,o,s,a):e===401?new mS(e,o,s,a):e===403?new pS(e,o,s,a):e===404?new gS(e,o,s,a):e===409?new yS(e,o,s,a):e===422?new xS(e,o,s,a):e===429?new vS(e,o,s,a):e>=500?new bS(e,o,s,a):new kn(e,o,s,a)}}class jp extends kn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Lf extends kn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class fS extends Lf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class hS extends kn{}class mS extends kn{}class pS extends kn{}class gS extends kn{}class yS extends kn{}class xS extends kn{}class vS extends kn{}class bS extends kn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pD=/^[a-z][a-z0-9+.-]*:/i,gD=n=>pD.test(n);let Gp=n=>(Gp=Array.isArray,Gp(n));const yD=Gp;let xD=yD;const H_=xD;function vD(n){if(!n)return!0;for(const e in n)return!1;return!0}function bD(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const _D=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new gs(`${n} must be an integer`);if(e<0)throw new gs(`${n} must be a positive integer`);return e},TD=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ED=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Go="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SD(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const AD=()=>{var n,e,t,s,a;const o=SD();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Go,"X-Stainless-OS":F_(Deno.build.os),"X-Stainless-Arch":z_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Go,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Go,"X-Stainless-OS":F_((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":z_((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const c=wD();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Go,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Go,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function wD(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const a=s[1]||0,o=s[2]||0,c=s[3]||0;return{browser:e,version:`${a}.${o}.${c}`}}}return null}const z_=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",F_=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Nd;const ND=()=>Nd??(Nd=AD());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CD(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function _S(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function ID(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return _S({start(){},async pull(t){const{done:s,value:a}=await e.next();s?t.close():t.enqueue(a)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function TS(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function kD(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),a=s.cancel();s.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RD=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ES=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function dp(n,e,t){return ES(),new File(n,e??"unknown_file",t)}function MD(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const DD=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SS=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",PD=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&SS(n),LD=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function UD(n,e,t){if(ES(),n=await n,PD(n))return n instanceof File?n:dp([await n.arrayBuffer()],n.name);if(LD(n)){const a=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),dp(await Bp(a),e,t)}const s=await Bp(n);if(e||(e=MD(n)),!(t!=null&&t.type)){const a=s.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof a=="string"&&(t=Object.assign(Object.assign({},t),{type:a}))}return dp(s,e,t)}async function Bp(n){var e,t,s,a,o;let c=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)c.push(n);else if(SS(n))c.push(n instanceof Blob?n:await n.arrayBuffer());else if(DD(n))try{for(var f=!0,p=Us(n),m;m=await p.next(),e=m.done,!e;f=!0){a=m.value,f=!1;const v=a;c.push(...await Bp(v))}}catch(v){t={error:v}}finally{try{!f&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}else{const v=(o=n==null?void 0:n.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${VD(n)}`)}return c}function VD(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AS{constructor(e){this._client=e}}AS._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wS(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const q_=Object.freeze(Object.create(null)),OD=(n=wS)=>(function(t,...s){if(t.length===1)return t[0];let a=!1;const o=[],c=t.reduce((v,_,T)=>{var A,N,C;/[?#]/.test(_)&&(a=!0);const I=s[T];let j=(a?encodeURIComponent:n)(""+I);return T!==s.length&&(I==null||typeof I=="object"&&I.toString===((C=Object.getPrototypeOf((N=Object.getPrototypeOf((A=I.hasOwnProperty)!==null&&A!==void 0?A:q_))!==null&&N!==void 0?N:q_))===null||C===void 0?void 0:C.toString))&&(j=I+"",o.push({start:v.length+_.length,length:j.length,error:`Value of type ${Object.prototype.toString.call(I).slice(8,-1)} is not a valid path parameter`})),v+_+(T===s.length?"":j)},""),f=c.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=p.exec(f))!==null;)o.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(o.sort((v,_)=>v.start-_.start),o.length>0){let v=0;const _=o.reduce((T,A)=>{const N=" ".repeat(A.start-v),C="^".repeat(A.length);return v=A.start+A.length,T+N+C},"");throw new gs(`Path parameters result in path with invalid segments:
${o.map(T=>T.error).join(`
`)}
${c}
${_}`)}return c}),Cd=OD(wS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NS extends AS{create(e,t){var s;const{api_version:a=this._client.apiVersion}=e,o=nf(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new gs("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new gs("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Cd`/${a}/interactions`,Object.assign(Object.assign({body:o},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:a=this._client.apiVersion}=t??{};return this._client.delete(Cd`/${a}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:a=this._client.apiVersion}=t??{};return this._client.post(Cd`/${a}/interactions/${e}/cancel`,s)}get(e,t={},s){var a;const o=t??{},{api_version:c=this._client.apiVersion}=o,f=nf(o,["api_version"]);return this._client.get(Cd`/${c}/interactions/${e}`,Object.assign(Object.assign({query:f},s),{stream:(a=t==null?void 0:t.stream)!==null&&a!==void 0?a:!1}))}}NS._key=Object.freeze(["interactions"]);class CS extends NS{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jD(n){let e=0;for(const a of n)e+=a.length;const t=new Uint8Array(e);let s=0;for(const a of n)t.set(a,s),s+=a.length;return t}let Id;function Cg(n){let e;return(Id??(e=new globalThis.TextEncoder,Id=e.encode.bind(e)))(n)}let kd;function K_(n){let e;return(kd??(e=new globalThis.TextDecoder,kd=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Cg(e):e;this.buffer=jD([this.buffer,t]);const s=[];let a;for(;(a=GD(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){s.push(K_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,c=K_(this.buffer.subarray(0,o));s.push(c),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Uf.NEWLINE_CHARS=new Set([`
`,"\r"]);Uf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function GD(n,e){for(let a=e??0;a<n.length;a++){if(n[a]===10)return{preceding:a,index:a+1,carriage:!1};if(n[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function BD(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sf={off:0,error:200,warn:300,info:400,debug:500},$_=(n,e,t)=>{if(n){if(bD(sf,n))return n;Nn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(sf))}`)}};function wc(){}function Rd(n,e,t){return!e||sf[n]>sf[t]?wc:e[n].bind(e)}const HD={error:wc,warn:wc,info:wc,debug:wc};let Y_=new WeakMap;function Nn(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return HD;const a=Y_.get(t);if(a&&a[0]===s)return a[1];const o={error:Rd("error",t,s),warn:Rd("warn",t,s),info:Rd("info",t,s),debug:Rd("debug",t,s)};return Y_.set(t,[s,o]),o}const Ia=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ko{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let a=!1;const o=s?Nn(s):console;function c(){return Ls(this,arguments,function*(){var p,m,v,_;if(a)throw new gs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var A=!0,N=Us(zD(e,t)),C;C=yield Oe(N.next()),p=C.done,!p;A=!0){_=C.value,A=!1;const I=_;if(!T)if(I.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Oe(JSON.parse(I.data))}catch(j){throw o.error("Could not parse message into JSON:",I.data),o.error("From chunk:",I.raw),j}}}catch(I){m={error:I}}finally{try{!A&&!p&&(v=N.return)&&(yield Oe(v.call(N)))}finally{if(m)throw m.error}}T=!0}catch(I){if(Vp(I))return yield Oe(void 0);throw I}finally{T||t.abort()}})}return new Ko(c,t,s)}static fromReadableStream(e,t,s){let a=!1;function o(){return Ls(this,arguments,function*(){var p,m,v,_;const T=new Uf,A=TS(e);try{for(var N=!0,C=Us(A),I;I=yield Oe(C.next()),p=I.done,!p;N=!0){_=I.value,N=!1;const j=_;for(const L of T.decode(j))yield yield Oe(L)}}catch(j){m={error:j}}finally{try{!N&&!p&&(v=C.return)&&(yield Oe(v.call(C)))}finally{if(m)throw m.error}}for(const j of T.flush())yield yield Oe(j)})}function c(){return Ls(this,arguments,function*(){var p,m,v,_;if(a)throw new gs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var A=!0,N=Us(o()),C;C=yield Oe(N.next()),p=C.done,!p;A=!0){_=C.value,A=!1;const I=_;T||I&&(yield yield Oe(JSON.parse(I)))}}catch(I){m={error:I}}finally{try{!A&&!p&&(v=N.return)&&(yield Oe(v.call(N)))}finally{if(m)throw m.error}}T=!0}catch(I){if(Vp(I))return yield Oe(void 0);throw I}finally{T||t.abort()}})}return new Ko(c,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),a=o=>({next:()=>{if(o.length===0){const c=s.next();e.push(c),t.push(c)}return o.shift()}});return[new Ko(()=>a(e),this.controller,this.client),new Ko(()=>a(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return _S({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:o}=await t.next();if(o)return s.close();const c=Cg(JSON.stringify(a)+`
`);s.enqueue(c)}catch(a){s.error(a)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function zD(n,e){return Ls(this,arguments,function*(){var s,a,o,c;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new gs("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new gs("Attempted to iterate over a response with no body");const f=new qD,p=new Uf,m=TS(n.body);try{for(var v=!0,_=Us(FD(m)),T;T=yield Oe(_.next()),s=T.done,!s;v=!0){c=T.value,v=!1;const A=c;for(const N of p.decode(A)){const C=f.decode(N);C&&(yield yield Oe(C))}}}catch(A){a={error:A}}finally{try{!v&&!s&&(o=_.return)&&(yield Oe(o.call(_)))}finally{if(a)throw a.error}}for(const A of p.flush()){const N=f.decode(A);N&&(yield yield Oe(N))}})}function FD(n){return Ls(this,arguments,function*(){var t,s,a,o;let c=new Uint8Array;try{for(var f=!0,p=Us(n),m;m=yield Oe(p.next()),t=m.done,!t;f=!0){o=m.value,f=!1;const v=o;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Cg(v):v;let T=new Uint8Array(c.length+_.length);T.set(c),T.set(_,c.length),c=T;let A;for(;(A=BD(c))!==-1;)yield yield Oe(c.slice(0,A)),c=c.slice(A)}}catch(v){s={error:v}}finally{try{!f&&!t&&(a=p.return)&&(yield Oe(a.call(p)))}finally{if(s)throw s.error}}c.length>0&&(yield yield Oe(c))})}class qD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,a]=KD(e,":");return a.startsWith(" ")&&(a=a.substring(1)),t==="event"?this.event=a:t==="data"&&this.data.push(a),null}}function KD(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function $D(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:a,startTime:o}=e,c=await(async()=>{var f;if(e.options.stream)return Nn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Ko.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const p=t.headers.get("content-type"),m=(f=p==null?void 0:p.split(";")[0])===null||f===void 0?void 0:f.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await t.json():await t.text()})();return Nn(n).debug(`[${s}] response parsed`,Ia({retryOfRequestLogID:a,url:t.url,status:t.status,body:c,durationMs:Date.now()-o})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ig extends Promise{constructor(e,t,s=$D){super(a=>{a(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Ig(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IS=Symbol("brand.privateNullableHeaders");function*YD(n){if(!n)return;if(IS in n){const{values:s,nulls:a}=n;yield*s.entries();for(const o of a)yield[o,null];return}let e=!1,t;n instanceof Headers?t=n.entries():H_(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const o=H_(s[1])?s[1]:[s[1]];let c=!1;for(const f of o)f!==void 0&&(e&&!c&&(c=!0,yield[a,null]),yield[a,f])}}const Ac=n=>{const e=new Headers,t=new Set;for(const s of n){const a=new Set;for(const[o,c]of YD(s)){const f=o.toLowerCase();a.has(f)||(e.delete(o),a.add(f)),c===null?(e.delete(o),t.add(f)):(e.append(o,c),t.delete(f))}}return{[IS]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fp=n=>{var e,t,s,a,o,c;if(typeof globalThis.process<"u")return(s=(t=(e=bC)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(c=(o=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||o===void 0?void 0:o.call(a,n))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var kS;class Vf{constructor(e){var t,s,a,o,c,f,p,{baseURL:m=fp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=fp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:_="v1beta"}=e,T=nf(e,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:v,apiVersion:_},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(s=A.timeout)!==null&&s!==void 0?s:Vf.DEFAULT_TIMEOUT,this.logger=(a=A.logger)!==null&&a!==void 0?a:console;const N="warn";this.logLevel=N,this.logLevel=(c=(o=$_(A.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:$_(fp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:N,this.fetchOptions=A.fetchOptions,this.maxRetries=(f=A.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(p=A.fetch)!==null&&p!==void 0?p:CD(),this.encoder=RD,this._options=A,this.apiKey=v,this.apiVersion=_,this.clientAdapter=A.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Ac([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Ac([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ac([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new gs(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Go}`}defaultIdempotencyKey(){return`stainless-node-retry-${mD()}`}makeStatusError(e,t,s,a){return kn.generate(e,t,s,a)}buildURL(e,t,s){const a=!this.baseURLOverridden()&&s||this.baseURL,o=gD(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return vD(c)||(t=Object.assign(Object.assign({},c),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(a=>Object.assign({method:e,path:t},a)))}request(e,t=null){return new Ig(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var a,o,c;const f=await e,p=(a=f.maxRetries)!==null&&a!==void 0?a:this.maxRetries;t==null&&(t=p),await this.prepareOptions(f);const{req:m,url:v,timeout:_}=await this.buildRequest(f,{retryCount:p-t});await this.prepareRequest(m,{url:v,options:f});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=s===void 0?"":`, retryOf: ${s}`,N=Date.now();if(Nn(this).debug(`[${T}] sending request`,Ia({retryOfRequestLogID:s,method:f.method,url:v,options:f,headers:m.headers})),!((o=f.signal)===null||o===void 0)&&o.aborted)throw new jp;const C=new AbortController,I=await this.fetchWithTimeout(v,m,_,C).catch(Op),j=Date.now();if(I instanceof globalThis.Error){const G=`retrying, ${t} attempts remaining`;if(!((c=f.signal)===null||c===void 0)&&c.aborted)throw new jp;const ee=Vp(I)||/timed? ?out/i.test(String(I)+("cause"in I?String(I.cause):""));if(t)return Nn(this).info(`[${T}] connection ${ee?"timed out":"failed"} - ${G}`),Nn(this).debug(`[${T}] connection ${ee?"timed out":"failed"} (${G})`,Ia({retryOfRequestLogID:s,url:v,durationMs:j-N,message:I.message})),this.retryRequest(f,t,s??T);throw Nn(this).info(`[${T}] connection ${ee?"timed out":"failed"} - error; no more retries left`),Nn(this).debug(`[${T}] connection ${ee?"timed out":"failed"} (error; no more retries left)`,Ia({retryOfRequestLogID:s,url:v,durationMs:j-N,message:I.message})),ee?new fS:new Lf({cause:I})}const L=`[${T}${A}] ${m.method} ${v} ${I.ok?"succeeded":"failed"} with status ${I.status} in ${j-N}ms`;if(!I.ok){const G=await this.shouldRetry(I);if(t&&G){const R=`retrying, ${t} attempts remaining`;return await kD(I.body),Nn(this).info(`${L} - ${R}`),Nn(this).debug(`[${T}] response error (${R})`,Ia({retryOfRequestLogID:s,url:I.url,status:I.status,headers:I.headers,durationMs:j-N})),this.retryRequest(f,t,s??T,I.headers)}const ee=G?"error; no more retries left":"error; not retryable";Nn(this).info(`${L} - ${ee}`);const re=await I.text().catch(R=>Op(R).message),oe=TD(re),M=oe?void 0:re;throw Nn(this).debug(`[${T}] response error (${ee})`,Ia({retryOfRequestLogID:s,url:I.url,status:I.status,headers:I.headers,message:M,durationMs:Date.now()-N})),this.makeStatusError(I.status,oe,M,I.headers)}return Nn(this).info(L),Nn(this).debug(`[${T}] response start`,Ia({retryOfRequestLogID:s,url:I.url,status:I.status,headers:I.headers,durationMs:j-N})),{response:I,options:f,controller:C,requestLogID:T,retryOfRequestLogID:s,startTime:N}}async fetchWithTimeout(e,t,s,a){const o=t||{},{signal:c,method:f}=o,p=nf(o,["signal","method"]);c&&c.addEventListener("abort",()=>a.abort());const m=setTimeout(()=>a.abort(),s),v=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,_=Object.assign(Object.assign(Object.assign({signal:a.signal},v?{duplex:"half"}:{}),{method:"GET"}),p);f&&(_.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(m)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,a){var o;let c;const f=a==null?void 0:a.get("retry-after-ms");if(f){const m=parseFloat(f);Number.isNaN(m)||(c=m)}const p=a==null?void 0:a.get("retry-after");if(p&&!c){const m=parseFloat(p);Number.isNaN(m)?c=Date.parse(p)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(t,m)}return await ED(c),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const o=t-e,c=Math.min(.5*Math.pow(2,o),8),f=1-Math.random()*.25;return c*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,a,o;const c=Object.assign({},e),{method:f,path:p,query:m,defaultBaseURL:v}=c,_=this.buildURL(p,m,v);"timeout"in c&&_D("timeout",c.timeout),c.timeout=(s=c.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:c}),N=await this.buildHeaders({options:e,method:f,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:N},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(o=c.fetchOptions)!==null&&o!==void 0?o:{}),url:_,timeout:c.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:a}){let o={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let f=Ac([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),ND()),this._options.defaultHeaders,s,e.headers,c]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Ac([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:ID(e)}:this.encoder({body:e,headers:s})}}Vf.DEFAULT_TIMEOUT=6e4;class on extends Vf{constructor(){super(...arguments),this.interactions=new CS(this)}}kS=on;on.GeminiNextGenAPIClient=kS;on.GeminiNextGenAPIClientError=gs;on.APIError=kn;on.APIConnectionError=Lf;on.APIConnectionTimeoutError=fS;on.APIUserAbortError=jp;on.NotFoundError=gS;on.ConflictError=yS;on.RateLimitError=vS;on.BadRequestError=hS;on.AuthenticationError=mS;on.InternalServerError=bS;on.PermissionDeniedError=pS;on.UnprocessableEntityError=xS;on.toFile=UD;on.Interactions=CS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JD(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function QD(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function WD(n,e){const t={},s=h(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function XD(n,e){const t={},s=h(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function ZD(n,e,t){const s={};if(h(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=h(n,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&g(e,["displayName"],a),h(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=h(n,["epochCount"]);e!==void 0&&o!=null&&g(e,["tuningTask","hyperparameters","epochCount"],o);const c=h(n,["learningRateMultiplier"]);if(c!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),h(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=h(n,["batchSize"]);e!==void 0&&f!=null&&g(e,["tuningTask","hyperparameters","batchSize"],f);const p=h(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function e4(n,e,t){const s={};let a=h(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const A=h(n,["validationDataset"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec"],J_(A))}else if(a==="PREFERENCE_TUNING"){const A=h(n,["validationDataset"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec"],J_(A))}const o=h(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&g(e,["tunedModelDisplayName"],o);const c=h(n,["description"]);e!==void 0&&c!=null&&g(e,["description"],c);let f=h(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const A=h(n,["epochCount"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(f==="PREFERENCE_TUNING"){const A=h(n,["epochCount"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let p=h(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const A=h(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(p==="PREFERENCE_TUNING"){const A=h(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let m=h(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=h(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(m==="PREFERENCE_TUNING"){const A=h(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let v=h(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=h(n,["adapterSize"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(v==="PREFERENCE_TUNING"){const A=h(n,["adapterSize"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(h(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=h(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=h(n,["beta"]);return e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function t4(n,e){const t={},s=h(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=h(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const o=h(n,["trainingDataset"]);o!=null&&f4(o);const c=h(n,["config"]);return c!=null&&ZD(c,t),t}function n4(n,e){const t={},s=h(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=h(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const o=h(n,["trainingDataset"]);o!=null&&h4(o,t,e);const c=h(n,["config"]);return c!=null&&e4(c,t,e),t}function s4(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function i4(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function r4(n,e,t){const s={},a=h(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const o=h(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const c=h(n,["filter"]);return e!==void 0&&c!=null&&g(e,["_query","filter"],c),s}function a4(n,e,t){const s={},a=h(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const o=h(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const c=h(n,["filter"]);return e!==void 0&&c!=null&&g(e,["_query","filter"],c),s}function o4(n,e){const t={},s=h(n,["config"]);return s!=null&&r4(s,t),t}function l4(n,e){const t={},s=h(n,["config"]);return s!=null&&a4(s,t),t}function c4(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=h(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const o=h(n,["tunedModels"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>RS(f))),g(t,["tuningJobs"],c)}return t}function u4(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=h(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const o=h(n,["tuningJobs"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>Hp(f))),g(t,["tuningJobs"],c)}return t}function d4(n,e){const t={},s=h(n,["name"]);s!=null&&g(t,["model"],s);const a=h(n,["name"]);return a!=null&&g(t,["endpoint"],a),t}function f4(n,e){const t={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=h(n,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),g(t,["examples","examples"],a)}return t}function h4(n,e,t){const s={};let a=h(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=h(n,["gcsUri"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=h(n,["gcsUri"]);e!==void 0&&c!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let o=h(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const c=h(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(o==="PREFERENCE_TUNING"){const c=h(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(h(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function RS(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=h(n,["name"]);a!=null&&g(t,["name"],a);const o=h(n,["state"]);o!=null&&g(t,["state"],$E(o));const c=h(n,["createTime"]);c!=null&&g(t,["createTime"],c);const f=h(n,["tuningTask","startTime"]);f!=null&&g(t,["startTime"],f);const p=h(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const m=h(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=h(n,["description"]);v!=null&&g(t,["description"],v);const _=h(n,["baseModel"]);_!=null&&g(t,["baseModel"],_);const T=h(n,["_self"]);return T!=null&&g(t,["tunedModel"],d4(T)),t}function Hp(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=h(n,["name"]);a!=null&&g(t,["name"],a);const o=h(n,["state"]);o!=null&&g(t,["state"],$E(o));const c=h(n,["createTime"]);c!=null&&g(t,["createTime"],c);const f=h(n,["startTime"]);f!=null&&g(t,["startTime"],f);const p=h(n,["endTime"]);p!=null&&g(t,["endTime"],p);const m=h(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=h(n,["error"]);v!=null&&g(t,["error"],v);const _=h(n,["description"]);_!=null&&g(t,["description"],_);const T=h(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const A=h(n,["tunedModel"]);A!=null&&g(t,["tunedModel"],A);const N=h(n,["preTunedModel"]);N!=null&&g(t,["preTunedModel"],N);const C=h(n,["supervisedTuningSpec"]);C!=null&&g(t,["supervisedTuningSpec"],C);const I=h(n,["preferenceOptimizationSpec"]);I!=null&&g(t,["preferenceOptimizationSpec"],I);const j=h(n,["tuningDataStats"]);j!=null&&g(t,["tuningDataStats"],j);const L=h(n,["encryptionSpec"]);L!=null&&g(t,["encryptionSpec"],L);const G=h(n,["partnerModelTuningSpec"]);G!=null&&g(t,["partnerModelTuningSpec"],G);const ee=h(n,["customBaseModel"]);ee!=null&&g(t,["customBaseModel"],ee);const re=h(n,["experiment"]);re!=null&&g(t,["experiment"],re);const oe=h(n,["labels"]);oe!=null&&g(t,["labels"],oe);const M=h(n,["outputUri"]);M!=null&&g(t,["outputUri"],M);const D=h(n,["pipelineJob"]);D!=null&&g(t,["pipelineJob"],D);const R=h(n,["serviceAccount"]);R!=null&&g(t,["serviceAccount"],R);const O=h(n,["tunedModelDisplayName"]);O!=null&&g(t,["tunedModelDisplayName"],O);const V=h(n,["veoTuningSpec"]);return V!=null&&g(t,["veoTuningSpec"],V),t}function m4(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=h(n,["name"]);a!=null&&g(t,["name"],a);const o=h(n,["metadata"]);o!=null&&g(t,["metadata"],o);const c=h(n,["done"]);c!=null&&g(t,["done"],c);const f=h(n,["error"]);return f!=null&&g(t,["error"],f),t}function J_(n,e){const t={},s=h(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const a=h(n,["vertexDatasetResource"]);return a!=null&&g(t,["validationDatasetUri"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p4 extends $i{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new za(Bi.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const a={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=t.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},t),{preTunedModel:a});return o.baseModel=void 0,await this.tuneInternal(o)}else{const a=Object.assign({},t);return await this.tuneInternal(a)}else{const a=Object.assign({},t),o=await this.tuneMldevInternal(a);let c="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?c=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(c=o.name.split("/operations/")[0]),{name:c,state:kp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=i4(e);return f=Te("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>Hp(v))}else{const m=s4(e);return f=Te("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>RS(v))}}async listInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=l4(e);return f=Te("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=u4(v),T=new __;return Object.assign(T,_),T})}else{const m=o4(e);return f=Te("tunedModels",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=c4(v),T=new __;return Object.assign(T,_),T})}}async cancel(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=QD(e);return f=Te("{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=XD(v),T=new T_;return Object.assign(T,_),T})}else{const m=JD(e);return f=Te("{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=WD(v),T=new T_;return Object.assign(T,_),T})}}async tuneInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI()){const f=n4(e,e);return o=Te("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>Hp(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=t4(e);return o=Te("tunedModels",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>m4(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g4{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const y4=1024*1024*8,x4=3,v4=1e3,b4=2,rf="x-goog-upload-status";async function _4(n,e,t){var s;const a=await MS(n,e,t),o=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[rf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function T4(n,e,t){var s;const a=await MS(n,e,t),o=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[rf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=BE(o),f=new Tg;return Object.assign(f,c),f}async function MS(n,e,t){var s,a;let o=0,c=0,f=new Rp(new Response),p="upload";for(o=n.size;c<o;){const m=Math.min(y4,o-c),v=n.slice(c,c+m);c+m>=o&&(p+=", finalize");let _=0,T=v4;for(;_<x4&&(f=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((s=f==null?void 0:f.headers)===null||s===void 0)&&s[rf]));)_++,await S4(T),T=T*b4;if(c+=m,((a=f==null?void 0:f.headers)===null||a===void 0?void 0:a[rf])!=="active")break;if(o<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function E4(n){return{size:n.size,type:n.type}}function S4(n){return new Promise(e=>setTimeout(e,n))}class A4{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _4(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await T4(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await E4(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w4{create(e,t,s){return new N4(e,t,s)}}class N4{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Q_="x-goog-api-key";class C4{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(Q_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Q_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I4="gl-node/";class k4{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new on({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=SC(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new C4(this.apiKey);this.apiClient=new EM({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:I4+"web",uploader:new A4,downloader:new g4}),this.models=new HM(this.apiClient),this.live=new UM(this.apiClient,a,new w4),this.batches=new ZI(this.apiClient),this.chats=new Pk(this.models,this.apiClient),this.caches=new Rk(this.apiClient),this.files=new Fk(this.apiClient),this.operations=new zM(this.apiClient),this.authTokens=new rD(this.apiClient),this.tunings=new p4(this.apiClient),this.fileSearchStores=new hD(this.apiClient)}}const R4=new k4({apiKey:"PLACEHOLDER_API_KEY"});function W_(n){const e=[...n];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}const DS={type:ke.OBJECT,properties:{id:{type:ke.STRING},type:{type:ke.STRING,enum:["multiple_choice","short_answer","long_text"]},content:{type:ke.STRING},options:{type:ke.ARRAY,items:{type:ke.STRING}},correctAnswer:{type:ke.STRING},tkpPoints:{type:ke.ARRAY,items:{type:ke.OBJECT,properties:{option:{type:ke.STRING},points:{type:ke.INTEGER}}}},explanation:{type:ke.STRING},shortcut:{type:ke.STRING},metadata:{type:ke.OBJECT,properties:{difficulty:{type:ke.STRING,enum:["Easy","Medium","Hard","HOTS"]},idealTimeSeconds:{type:ke.INTEGER},topic:{type:ke.STRING},subtest:{type:ke.STRING},trapPattern:{type:ke.STRING}}}},required:["id","type","content","correctAnswer","explanation","metadata"]},M4={type:ke.OBJECT,properties:{questions:{type:ke.ARRAY,items:DS}},required:["questions"]};async function Qr(n,e,t){const s="gemini-3-flash-preview",a={temperature:.85,topP:.95,topK:40};e&&(a.responseMimeType="application/json",a.responseSchema=e);const o=[];t&&o.push({inlineData:{mimeType:"application/pdf",data:t}}),o.push({text:n});try{const f=(await R4.models.generateContent({model:s,contents:{role:"user",parts:o},config:a})).text;if(!f)throw new Error("Empty response from AI");if(e)try{let p=f.trim();return p.startsWith("```json")?p=p.replace(/^```json\n?/,"").replace(/\n?```$/,""):p.startsWith("```")&&(p=p.replace(/^```\n?/,"").replace(/\n?```$/,"")),JSON.parse(p)}catch(p){console.error("JSON Parse Error",p);const m=f.match(/\{[\s\S]*\}|\[[\s\S]*\]/);return m?JSON.parse(m[0]):f}return f}catch(c){throw console.error("Gemini API Error:",c),c}}function D4(n){return n.id||(n.id=`q-${Math.random().toString(36).substr(2,9)}`),n.type==="multiple_choice"&&((!n.options||n.options.length===0)&&(n.options=["Option A","Option B","Option C","Option D","Option E"]),n.tkpPoints&&n.tkpPoints.length>0,n.options=W_(n.options)),n}const Cn=async(n,e,t,s=5,a=[],o,c,f)=>{let p="",m;const v="CRITICAL: DETECT the language of the input material/context. The generated questions/answers MUST BE in the SAME LANGUAGE as the input (Bahasa Indonesia mostly).";let _=M4;if(e==="GENERAL"&&c){const N=t,C=N.type==="topic"?`Topic: ${N.content}`:"Material Content";N.type==="pdf"&&(m=N.content);const I=N.difficultyPreference||"MEDIUM",j=`DIFFICULTY LEVEL: ${I}. ${I==="HARD"?"Use complex analysis/HOTS.":I==="EASY"?"Use straightforward recall.":""}`;c==="ACTIVE_RECALL"?p=`Create ${s} Active Recall questions (Short Answer format) based on this: ${C}. 
          ${v} ${j}
          Questions must be specific and require recall of key facts/concepts.`:c==="PBL"?p=`Create ${s} Problem-Based Learning scenarios (Case Study).
          ${v} ${j}
          Format: 'long_text' or 'multiple_choice'.
          Based on: ${C}. 
          Each question should be a realistic scenario requiring application of the concept.`:p=`Create ${s} practice questions based on: ${C}. ${v} ${j}`,N.type==="text"&&(p+=`

CONTENT: ${N.content}`)}else{let N="";if(f?(N=`CONTEXT: ${e} - ${o||""}. DIFFICULTY: ${f}.`,f==="HOTS"&&(N+=" QUESTIONS MUST BE ADVANCED AND DIFFICULT (High Order Thinking Skills). Distractors/options must be plausible and tricky. Avoid easy questions. Questions must require analysis, evaluation, or creation.")):e==="SKD"&&o?N=`CONTEXT: SKD ${o}. DIFFICULTY: STANDARD TO HOTS.`:e==="UTBK"?N="CONTEXT: UTBK SNBT 2025. DIFFICULTY: ADAPTIVE (HOTS).":e==="TPA"?N="CONTEXT: TPA (Tes Potensi Akademik) & TBI. High Logic Requirement.":e==="PSIKOTEST"?N=`
          CONTEXT: PROFESSIONAL PSYCHOMETRIC TEST (High IQ & Logical Reasoning).
          Generate ${s} questions distributed among these 4 subtest types:

          1. **Number Series (Deret Angka)**: 
             - Create complex sequences (e.g., Fibonacci, multi-level differences, alternating patterns).
             - Example: 2, 5, 10, 17, ... (n^2 + 1).

          2. **Verbal Analogy (Analogi Verbal)**:
             - Create 'Word A : Word B = Word C : ?' questions.
             - Relationships should be subtle (e.g., degree, cause-effect, antonyms).
             - Example: "Api : Panas = Es : Dingin" (Cause-Effect/Property).
          
          3. **Formal Logic (Silogisme)**:
             - Create syllogisms with 2 or 3 premises.
             - Use 'All', 'Some', 'None' quantifiers.
             - Ensure options have logical distractors.
             - Example: "Semua A adalah B. Sebagian B adalah C. Maka..."
          
          4. **Figural/Spatial (Tes Spasial)**:
             - Since this is text-based, describe the pattern in text format.
             - E.g., "Image A rotates 90 degrees clockwise. Image B is mirror of A. Image C is..."
          
          Instruction: "Options must be tricky. Explanation must be clear step-by-step logic."
          `:e==="INTERVIEW"?(N="CONTEXT: JOB/SCHOOL ADMISSION INTERVIEW.",_={type:ke.OBJECT,properties:{questions:{type:ke.ARRAY,items:{type:ke.OBJECT,properties:{id:{type:ke.STRING},type:{type:ke.STRING,enum:["long_text"]},content:{type:ke.STRING},explanation:{type:ke.STRING},metadata:{type:ke.OBJECT,properties:{topic:{type:ke.STRING}}}},required:["content","type"]}}}}):N="Standard difficulty.",e==="INTERVIEW")p=`Roleplay Task: Act as a professional HR Interviewer.
        Context: ${t}.
        Generate ${s} distinct interview questions. 
        Style: Conversational, direct, and engaging.
        Questions should range from introduction to behavioral/situational.
        Metadata subtest: "Interview".`;else{const C=`
            Generate ${s} questions.
            ${N}
            MANDATORY: Provide a DETAILED 'explanation' for the answer.
            MANDATORY METADATA:
            - idealTimeSeconds: Realistic time (e.g. 60s for Logic, 30s for Verbal).
            - subtest: Use specific names like "Deret Angka", "Analogi Verbal", "Silogisme", "Tes Spasial".
        `,I=typeof t=="string"&&t.toUpperCase().includes("TKP")||e==="SKD"&&f==="TKP";let j="";I&&(j=`
           CRITICAL RULES FOR TKP (Tes Karakteristik Pribadi):
           1. **AMBIGUITY & CONFUSION**: The distinction between the 5-point and 4-point answers MUST be very subtle.
           2. **SCORING LOGIC**:
              - 5 Points: Best answer (professional, proactive, leadership).
              - 4 Points: Good answer (standard procedure).
              - 3 Points: Neutral.
              - 1-2 Points: Negative.
           5. **FORMAT**: Provide 'tkpPoints' list mapping EACH option to a score 1-5.
           `),n===qe.WEAKNESS?p=`WEAKNESS ATTACK MODE. User weak in: ${a.join(", ")}. ${N} ${j}`:n===qe.ACTIVE_RECALL?p=`ACTIVE RECALL. Type: "short_answer". ${N}`:p=`TRY OUT / PRACTICE.
            Context: ${e} - ${JSON.stringify(t)}.
            ${C}
            ${j}`}}return((await Qr(p,_,m)).questions||[]).filter(N=>!!N).map(N=>{const C=D4(N);return e==="INTERVIEW"&&(C.type="long_text",C.options=[]),C})},P4=async(n,e,t)=>{const s={type:ke.OBJECT,properties:{score:{type:ke.INTEGER,description:"Score from 0 to 100"},isCorrect:{type:ke.BOOLEAN,description:"True if score > 70"},feedback:{type:ke.STRING,description:"Constructive feedback"}},required:["score","isCorrect","feedback"]},a=`Evaluate this answer. 
  Question: ${n}
  Correct Answer / Key Concept: ${e}
  User Answer: ${t}
  
  Provide a score (0-100), boolean correctness, and feedback.`;return Qr(a,s)},L4=async n=>{const e=`The user is weak in these topics: ${n.join(", ")}. Provide a concise, actionable study plan (3 paragraphs max) to improve.`;return Qr(e)},U4=async(n,e)=>{const t={type:ke.OBJECT,properties:{score:{type:ke.INTEGER},feedback:{type:ke.STRING},improvedAnswer:{type:ke.STRING},keyPointsCovered:{type:ke.ARRAY,items:{type:ke.STRING}},toneAnalysis:{type:ke.STRING}},required:["score","feedback","improvedAnswer","toneAnalysis"]},s=`Evaluate this job interview answer given by a candidate.
  Question: ${n}
  Candidate Answer: ${e}
  
  Act as a senior HR manager. Critique the tone, content, and structure.
  `;return Qr(s,t)},V4=async(n,e)=>{const t={type:ke.OBJECT,properties:{understandingScore:{type:ke.INTEGER},simplificationQuality:{type:ke.STRING},missingConcepts:{type:ke.ARRAY,items:{type:ke.STRING}},correction:{type:ke.STRING}},required:["understandingScore","simplificationQuality","correction"]},s=`Evaluate this Feynman Technique explanation. The user is trying to explain "${n}" to a 5-year old.
  Explanation: ${e}`;return Qr(s,t)},O4=async n=>n.type==="pdf"&&n.content?await Qr("Extract and summarize the main text content from this PDF for study purposes. Ignore headers/footers.",void 0,n.content):n.content,j4=async(n,e)=>{const t=`Context: University Thesis (Skripsi). Topic: ${n}. Task: ${e}. Provide detailed output.`;return Qr(t)},G4=async(n,e,t)=>{const s={type:ke.OBJECT,properties:{topic:{type:ke.STRING},summary:{type:ke.STRING},keyPoints:{type:ke.ARRAY,items:{type:ke.STRING}},question:DS},required:["topic","summary","keyPoints","question"]},a=`Create a Drill Card (Mini Lesson + 1 Question) for ${n} - ${e} ${t?"("+t+")":""}.`;return Qr(a,s)},B4=async n=>{const e=Cn(qe.SIMULATION,"SKD","Tes Wawasan Kebangsaan (TWK)",30,[],n,void 0,"HOTS"),t=Cn(qe.SIMULATION,"SKD","Tes Intelegensia Umum (TIU)",35,[],n,void 0,"HOTS"),s=Cn(qe.SIMULATION,"SKD","Tes Karakteristik Pribadi (TKP)",45,[],n,void 0,"TKP"),[a,o,c]=await Promise.all([e,t,s]);return a.forEach(f=>f.metadata.subtest="Tes Wawasan Kebangsaan (TWK)"),o.forEach(f=>f.metadata.subtest="Tes Intelegensia Umum (TIU)"),c.forEach(f=>f.metadata.subtest="Tes Karakteristik Pribadi (TKP)"),[...a,...o,...c]},H4=async()=>{const n=Cn(qe.SIMULATION,"UTBK","Penalaran Umum (Induktif, Deduktif, Kuantitatif)",30,[],void 0,void 0,"HOTS"),e=Cn(qe.SIMULATION,"UTBK","Pengetahuan dan Pemahaman Umum",20,[],void 0,void 0,"HOTS"),t=Cn(qe.SIMULATION,"UTBK","Pemahaman Bacaan dan Menulis",20,[],void 0,void 0,"HOTS"),s=Cn(qe.SIMULATION,"UTBK","Pengetahuan Kuantitatif",20,[],void 0,void 0,"HOTS"),a=Cn(qe.SIMULATION,"UTBK","Literasi Bahasa Indonesia",25,[],void 0,void 0,"HOTS"),o=Cn(qe.SIMULATION,"UTBK","Literasi Bahasa Inggris",25,[],void 0,void 0,"HOTS"),c=Cn(qe.SIMULATION,"UTBK","Penalaran Matematika",20,[],void 0,void 0,"HOTS"),[f,p,m,v,_,T,A]=await Promise.all([n,e,t,s,a,o,c]);return f.forEach(N=>N.metadata.subtest="Penalaran Umum"),p.forEach(N=>N.metadata.subtest="Pengetahuan dan Pemahaman Umum"),m.forEach(N=>N.metadata.subtest="Pemahaman Bacaan dan Menulis"),v.forEach(N=>N.metadata.subtest="Pengetahuan Kuantitatif"),_.forEach(N=>N.metadata.subtest="Literasi Bahasa Indonesia"),T.forEach(N=>N.metadata.subtest="Literasi Bahasa Inggris"),A.forEach(N=>N.metadata.subtest="Penalaran Matematika"),[...f,...p,...m,...v,..._,...T,...A]},z4=async()=>Cn(qe.SIMULATION,"TPA","SIMULATION",65,[],void 0,void 0,"HOTS"),F4=async()=>Cn(qe.SIMULATION,"PSIKOTEST","SIMULATION",40,[],void 0,void 0,"HOTS"),q4=()=>{};var X_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},K4=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[t++];e[s++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[t++],c=n[t++],f=n[t++],p=((a&7)<<18|(o&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const o=n[t++],c=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return e.join("")},LS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const o=n[a],c=a+1<n.length,f=c?n[a+1]:0,p=a+2<n.length,m=p?n[a+2]:0,v=o>>2,_=(o&3)<<4|f>>4;let T=(f&15)<<2|m>>6,A=m&63;p||(A=64,c||(T=64)),s.push(t[v],t[_],t[T],t[A])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(PS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):K4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const o=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const m=a<n.length?t[n.charAt(a)]:64;++a;const _=a<n.length?t[n.charAt(a)]:64;if(++a,o==null||f==null||m==null||_==null)throw new $4;const T=o<<2|f>>4;if(s.push(T),m!==64){const A=f<<4&240|m>>2;if(s.push(A),_!==64){const N=m<<6&192|_;s.push(N)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class $4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Y4=function(n){const e=PS(n);return LS.encodeByteArray(e,!0)},af=function(n){return Y4(n).replace(/\./g,"")},US=function(n){try{return LS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=()=>J4().__FIREBASE_DEFAULTS__,W4=()=>{if(typeof process>"u"||typeof X_>"u")return;const n=X_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},X4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&US(n[1]);return e&&JSON.parse(e)},Of=()=>{try{return q4()||Q4()||W4()||X4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},VS=n=>{var e,t;return(t=(e=Of())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Z4=n=>{const e=VS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},OS=()=>{var n;return(n=Of())==null?void 0:n.config},jS=n=>{var e;return(e=Of())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function GS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[af(JSON.stringify(t)),af(JSON.stringify(c)),""].join(".")}const Rc={};function nP(){const n={prod:[],emulator:[]};for(const e of Object.keys(Rc))Rc[e]?n.emulator.push(e):n.prod.push(e);return n}function sP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Z_=!1;function BS(n,e){if(typeof window>"u"||typeof document>"u"||!hl(window.location.host)||Rc[n]===e||Rc[n]||Z_)return;Rc[n]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",o=nP().prod.length>0;function c(){const T=document.getElementById(s);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,A){T.setAttribute("width","24"),T.setAttribute("id",A),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Z_=!0,c()},T}function v(T,A){T.setAttribute("id",A),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=sP(s),A=t("text"),N=document.getElementById(A)||document.createElement("span"),C=t("learnmore"),I=document.getElementById(C)||document.createElement("a"),j=t("preprendIcon"),L=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;f(G),v(I,C);const ee=m();p(L,j),G.append(L,N,I,ee),document.body.appendChild(G)}o?(N.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function rP(){var e;const n=(e=Of())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function lP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cP(){const n=En();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uP(){return!rP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dP(){try{return typeof indexedDB=="object"}catch{return!1}}function fP(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var o;e(((o=a.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP="FirebaseError";class Ji extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=hP,Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yc.prototype.create)}}class Yc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],c=o?mP(o,s):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Ji(a,f,s)}}function mP(n,e){return n.replace(pP,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const pP=/\{\$([^}]+)}/g;function gP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ua(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const o=n[a],c=e[a];if(eT(o)&&eT(c)){if(!Ua(o,c))return!1}else if(o!==c)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function eT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function yP(n,e){const t=new xP(n,e);return t.subscribe.bind(t)}class xP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");vP(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=hp),a.error===void 0&&(a.error=hp),a.complete===void 0&&(a.complete=hp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function hp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(n){return n&&n._delegate?n._delegate:n}class Va{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new eP;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TP(e))try{this.getOrInitializeService({instanceIdentifier:ka})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:a});s.resolve(o)}catch{}}}}clearInstance(e=ka){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ka){return this.instances.has(e)}getOptions(e=ka){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[o,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(o);s===f&&c.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:_P(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ka){return this.component?this.component.multipleInstances?e:ka:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _P(n){return n===ka?void 0:n}function TP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(We||(We={}));const SP={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},AP=We.INFO,wP={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},NP=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=wP[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kg{constructor(e){this.name=e,this._logLevel=AP,this._logHandler=NP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const CP=(n,e)=>e.some(t=>n instanceof t);let tT,nT;function IP(){return tT||(tT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kP(){return nT||(nT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HS=new WeakMap,zp=new WeakMap,zS=new WeakMap,mp=new WeakMap,Rg=new WeakMap;function RP(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Ur(n.result)),a()},c=()=>{s(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&HS.set(t,n)}).catch(()=>{}),Rg.set(e,n),e}function MP(n){if(zp.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),a()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});zp.set(n,e)}let Fp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return zp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||zS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ur(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DP(n){Fp=n(Fp)}function PP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(pp(this),e,...t);return zS.set(s,e.sort?e.sort():[e]),Ur(s)}:kP().includes(n)?function(...e){return n.apply(pp(this),e),Ur(HS.get(this))}:function(...e){return Ur(n.apply(pp(this),e))}}function LP(n){return typeof n=="function"?PP(n):(n instanceof IDBTransaction&&MP(n),CP(n,IP())?new Proxy(n,Fp):n)}function Ur(n){if(n instanceof IDBRequest)return RP(n);if(mp.has(n))return mp.get(n);const e=LP(n);return e!==n&&(mp.set(n,e),Rg.set(e,n)),e}const pp=n=>Rg.get(n);function UP(n,e,{blocked:t,upgrade:s,blocking:a,terminated:o}={}){const c=indexedDB.open(n,e),f=Ur(c);return s&&c.addEventListener("upgradeneeded",p=>{s(Ur(c.result),p.oldVersion,p.newVersion,Ur(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{o&&p.addEventListener("close",()=>o()),a&&p.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const VP=["get","getKey","getAll","getAllKeys","count"],OP=["put","add","delete","clear"],gp=new Map;function sT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(gp.get(e))return gp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=OP.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||VP.includes(t)))return;const o=async function(c,...f){const p=this.transaction(c,a?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(f.shift())),(await Promise.all([m[t](...f),a&&p.done]))[0]};return gp.set(e,o),o}DP(n=>({...n,get:(e,t,s)=>sT(e,t)||n.get(e,t,s),has:(e,t)=>!!sT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(GP(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function GP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qp="@firebase/app",iT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new kg("@firebase/app"),BP="@firebase/app-compat",HP="@firebase/analytics-compat",zP="@firebase/analytics",FP="@firebase/app-check-compat",qP="@firebase/app-check",KP="@firebase/auth",$P="@firebase/auth-compat",YP="@firebase/database",JP="@firebase/data-connect",QP="@firebase/database-compat",WP="@firebase/functions",XP="@firebase/functions-compat",ZP="@firebase/installations",e6="@firebase/installations-compat",t6="@firebase/messaging",n6="@firebase/messaging-compat",s6="@firebase/performance",i6="@firebase/performance-compat",r6="@firebase/remote-config",a6="@firebase/remote-config-compat",o6="@firebase/storage",l6="@firebase/storage-compat",c6="@firebase/firestore",u6="@firebase/ai",d6="@firebase/firestore-compat",f6="firebase",h6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="[DEFAULT]",m6={[qp]:"fire-core",[BP]:"fire-core-compat",[zP]:"fire-analytics",[HP]:"fire-analytics-compat",[qP]:"fire-app-check",[FP]:"fire-app-check-compat",[KP]:"fire-auth",[$P]:"fire-auth-compat",[YP]:"fire-rtdb",[JP]:"fire-data-connect",[QP]:"fire-rtdb-compat",[WP]:"fire-fn",[XP]:"fire-fn-compat",[ZP]:"fire-iid",[e6]:"fire-iid-compat",[t6]:"fire-fcm",[n6]:"fire-fcm-compat",[s6]:"fire-perf",[i6]:"fire-perf-compat",[r6]:"fire-rc",[a6]:"fire-rc-compat",[o6]:"fire-gcs",[l6]:"fire-gcs-compat",[c6]:"fire-fst",[d6]:"fire-fst-compat",[u6]:"fire-vertex","fire-js":"fire-js",[f6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=new Map,p6=new Map,$p=new Map;function rT(n,e){try{n.container.addComponent(e)}catch(t){Hi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function tl(n){const e=n.name;if($p.has(e))return Hi.debug(`There were multiple attempts to register component ${e}.`),!1;$p.set(e,n);for(const t of of.values())rT(t,n);for(const t of p6.values())rT(t,n);return!0}function Mg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ds(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vr=new Yc("app","Firebase",g6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=h6;function FS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Kp,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Vr.create("bad-app-name",{appName:String(a)});if(t||(t=OS()),!t)throw Vr.create("no-options");const o=of.get(a);if(o){if(Ua(t,o.options)&&Ua(s,o.config))return o;throw Vr.create("duplicate-app",{appName:a})}const c=new EP(a);for(const p of $p.values())c.addComponent(p);const f=new y6(t,s,c);return of.set(a,f),f}function qS(n=Kp){const e=of.get(n);if(!e&&n===Kp&&OS())return FS();if(!e)throw Vr.create("no-app",{appName:n});return e}function Or(n,e,t){let s=m6[n]??n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hi.warn(c.join(" "));return}tl(new Va(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6="firebase-heartbeat-database",v6=1,Oc="firebase-heartbeat-store";let yp=null;function KS(){return yp||(yp=UP(x6,v6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Oc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Vr.create("idb-open",{originalErrorMessage:n.message})})),yp}async function b6(n){try{const t=(await KS()).transaction(Oc),s=await t.objectStore(Oc).get($S(n));return await t.done,s}catch(e){if(e instanceof Ji)Hi.warn(e.message);else{const t=Vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hi.warn(t.message)}}}async function aT(n,e){try{const s=(await KS()).transaction(Oc,"readwrite");await s.objectStore(Oc).put(e,$S(n)),await s.done}catch(t){if(t instanceof Ji)Hi.warn(t.message);else{const s=Vr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Hi.warn(s.message)}}}function $S(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=1024,T6=30;class E6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new A6(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=oT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats.length>T6){const c=w6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Hi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=oT(),{heartbeatsToSend:s,unsentEntries:a}=S6(this._heartbeatsCache.heartbeats),o=af(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Hi.warn(t),""}}}function oT(){return new Date().toISOString().substring(0,10)}function S6(n,e=_6){const t=[];let s=n.slice();for(const a of n){const o=t.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),lT(t)>e){o.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),lT(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class A6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dP()?fP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await b6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return aT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return aT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function lT(n){return af(JSON.stringify({version:2,heartbeats:n})).length}function w6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(n){tl(new Va("platform-logger",e=>new jP(e),"PRIVATE")),tl(new Va("heartbeat",e=>new E6(e),"PRIVATE")),Or(qp,iT,n),Or(qp,iT,"esm2020"),Or("fire-js","")}N6("");var C6="firebase",I6="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Or(C6,I6,"app");function YS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const k6=YS,JS=new Yc("auth","Firebase",YS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=new kg("@firebase/auth");function R6(n,...e){lf.logLevel<=We.WARN&&lf.warn(`Auth (${ml}): ${n}`,...e)}function Bd(n,...e){lf.logLevel<=We.ERROR&&lf.error(`Auth (${ml}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(n,...e){throw Pg(n,...e)}function Vs(n,...e){return Pg(n,...e)}function Dg(n,e,t){const s={...k6(),[e]:t};return new Yc("auth","Firebase",s).create(e,{appName:n.name})}function Pa(n){return Dg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function M6(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&mi(n,"argument-error"),Dg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pg(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return JS.create(n,...e)}function Ve(n,e,...t){if(!n)throw Pg(e,...t)}function Vi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Bd(e),new Error(e)}function zi(n,e){n||Vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function D6(){return cT()==="http:"||cT()==="https:"}function cT(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(D6()||oP()||"connection"in navigator)?navigator.onLine:!0}function L6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t){this.shortDelay=e,this.longDelay=t,zi(t>e,"Short delay should be less than long delay!"),this.isMobile=iP()||lP()}get(){return P6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(n,e){zi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],O6=new Qc(3e4,6e4);function Ug(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function pl(n,e,t,s,a={}){return WS(n,a,async()=>{let o={},c={};s&&(e==="GET"?c=s:o={body:JSON.stringify(s)});const f=Jc({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:p,...o};return aP()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&hl(n.emulatorConfig.host)&&(m.credentials="include"),QS.fetch()(await XS(n,n.config.apiHost,t,f),m)})}async function WS(n,e,t){n._canInitEmulator=!1;const s={...U6,...e};try{const a=new G6(n),o=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Md(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const f=o.ok?c.errorMessage:c.error.message,[p,m]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Md(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Md(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Md(n,"user-disabled",c);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Dg(n,v,m);mi(n,v)}}catch(a){if(a instanceof Ji)throw a;mi(n,"network-request-failed",{message:String(a)})}}async function j6(n,e,t,s,a={}){const o=await pl(n,e,t,s,a);return"mfaPendingCredential"in o&&mi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function XS(n,e,t,s){const a=`${e}${t}?${s}`,o=n,c=o.config.emulator?Lg(n.config,a):`${n.config.apiScheme}://${a}`;return V6.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}class G6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Vs(this.auth,"network-request-failed")),O6.get())})}}function Md(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Vs(n,e,s);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B6(n,e){return pl(n,"POST","/v1/accounts:delete",e)}async function cf(n,e){return pl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function H6(n,e=!1){const t=gn(n),s=await t.getIdToken(e),a=Vg(s);Ve(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:a,token:s,authTime:Mc(xp(a.auth_time)),issuedAtTime:Mc(xp(a.iat)),expirationTime:Mc(xp(a.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function xp(n){return Number(n)*1e3}function Vg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Bd("JWT malformed, contained fewer than 3 sections"),null;try{const a=US(t);return a?JSON.parse(a):(Bd("Failed to decode base64 JWT payload"),null)}catch(a){return Bd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function uT(n){const e=Vg(n);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ji&&z6(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function z6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mc(this.lastLoginAt),this.creationTime=Mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uf(n){var _;const e=n.auth,t=await n.getIdToken(),s=await jc(n,cf(e,{idToken:t}));Ve(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const o=(_=a.providerUserInfo)!=null&&_.length?ZS(a.providerUserInfo):[],c=K6(n.providerData,o),f=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(c!=null&&c.length),m=f?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Jp(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function q6(n){const e=gn(n);await uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function K6(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function ZS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $6(n,e){const t=await WS(n,{},async()=>{const s=Jc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,c=await XS(n,a,"/v1/token",`key=${o}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:s};return n.emulatorConfig&&hl(n.emulatorConfig.host)&&(p.credentials="include"),QS.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Y6(n,e){return pl(n,"POST","/v2/accounts:revokeToken",Ug(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=uT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:o}=await $6(e,t);this.updateTokensAndExpiration(s,a,Number(o))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:o}=t,c=new Qo;return s&&(Ve(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),a&&(Ve(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),o&&(Ve(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qo,this.toJSON())}_performRefresh(){return Vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(n,e){Ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ps{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new F6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Jp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await jc(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return H6(this,e)}reload(){return q6(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ps({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await uf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ds(this.auth.app))return Promise.reject(Pa(this.auth));const e=await this.getIdToken();return await jc(this,B6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,m=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:A,providerData:N,stsTokenManager:C}=t;Ve(_&&C,e,"internal-error");const I=Qo.fromJSON(this.name,C);Ve(typeof _=="string",e,"internal-error"),Rr(s,e.name),Rr(a,e.name),Ve(typeof T=="boolean",e,"internal-error"),Ve(typeof A=="boolean",e,"internal-error"),Rr(o,e.name),Rr(c,e.name),Rr(f,e.name),Rr(p,e.name),Rr(m,e.name),Rr(v,e.name);const j=new Ps({uid:_,auth:e,email:a,emailVerified:T,displayName:s,isAnonymous:A,photoURL:c,phoneNumber:o,tenantId:f,stsTokenManager:I,createdAt:m,lastLoginAt:v});return N&&Array.isArray(N)&&(j.providerData=N.map(L=>({...L}))),p&&(j._redirectEventId=p),j}static async _fromIdTokenResponse(e,t,s=!1){const a=new Qo;a.updateFromServerResponse(t);const o=new Ps({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await uf(o),o}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Ve(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?ZS(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(o!=null&&o.length),f=new Qo;f.updateFromIdToken(s);const p=new Ps({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Jp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(o!=null&&o.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=new Map;function Oi(n){zi(n instanceof Function,"Expected a class definition");let e=dT.get(n);return e?(zi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,dT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}eA.type="NONE";const fT=eA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(n,e,t){return`firebase:${n}:${e}:${t}`}class Wo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:o}=this.auth;this.fullUserKey=Hd(this.userKey,a.apiKey,o),this.fullPersistenceKey=Hd("persistence",a.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cf(this.auth,{idToken:e}).catch(()=>{});return t?Ps._fromGetAccountInfoResponse(this.auth,t,e):null}return Ps._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Wo(Oi(fT),e,s);const a=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=a[0]||Oi(fT);const c=Hd(s,e.config.apiKey,e.name);let f=null;for(const m of t)try{const v=await m._get(c);if(v){let _;if(typeof v=="string"){const T=await cf(e,{idToken:v}).catch(()=>{});if(!T)break;_=await Ps._fromGetAccountInfoResponse(e,T,v)}else _=Ps._fromJSON(e,v);m!==o&&(f=_),o=m;break}}catch{}const p=a.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!p.length?new Wo(o,e,s):(o=p[0],f&&await o._set(c,f.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(c)}catch{}})),new Wo(o,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aA(e))return"Blackberry";if(oA(e))return"Webos";if(nA(e))return"Safari";if((e.includes("chrome/")||sA(e))&&!e.includes("edge/"))return"Chrome";if(rA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function tA(n=En()){return/firefox\//i.test(n)}function nA(n=En()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sA(n=En()){return/crios\//i.test(n)}function iA(n=En()){return/iemobile/i.test(n)}function rA(n=En()){return/android/i.test(n)}function aA(n=En()){return/blackberry/i.test(n)}function oA(n=En()){return/webos/i.test(n)}function Og(n=En()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function J6(n=En()){var e;return Og(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Q6(){return cP()&&document.documentMode===10}function lA(n=En()){return Og(n)||rA(n)||oA(n)||aA(n)||/windows phone/i.test(n)||iA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(n,e=[]){let t;switch(n){case"Browser":t=hT(En());break;case"Worker":t=`${hT(En())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ml}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=o=>new Promise((c,f)=>{try{const p=e(o);c(p)}catch(p){f(p)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X6(n,e={}){return pl(n,"GET","/v2/passwordPolicy",Ug(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=6;class e5{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Z6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mT(this),this.idTokenSubscription=new mT(this),this.beforeStateQueue=new W6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Oi(t)),this._initializationPromise=this.queue(async()=>{var s,a,o;if(!this._deleted&&(this.persistenceManager=await Wo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cf(this,{idToken:e}),s=await Ps._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Ds(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,f=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&(p!=null&&p.user)&&(s=p.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=L6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ds(this.app))return Promise.reject(Pa(this));const t=e?gn(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ds(this.app)?Promise.reject(Pa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ds(this.app)?Promise.reject(Pa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Oi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await X6(this),t=new e5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Y6(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Oi(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await Wo.create(this,[Oi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(f,this,"internal-error"),f.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Ds(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&R6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function jf(n){return gn(n)}class mT{constructor(e){this.auth=e,this.observer=null,this.addObserver=yP(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function n5(n){jg=n}function s5(n){return jg.loadJS(n)}function i5(){return jg.gapiScript}function r5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(n,e){const t=Mg(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),o=t.getOptions();if(Ua(o,e??{}))return a;mi(a,"already-initialized")}return t.initialize({options:e})}function o5(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Oi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function l5(n,e,t){const s=jf(n);Ve(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,o=uA(e),{host:c,port:f}=c5(e),p=f===null?"":`:${f}`,m={url:`${o}//${c}${p}/`},v=Object.freeze({host:c,port:f,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Ve(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ve(Ua(m,s.config.emulator)&&Ua(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,hl(c)?(GS(`${o}//${c}${p}`),BS("Auth",!0)):u5()}function uA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function c5(n){const e=uA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const o=a[1];return{host:o,port:pT(s.substr(o.length+1))}}else{const[o,c]=s.split(":");return{host:o,port:pT(c)}}}function pT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function u5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vi("not implemented")}_getIdTokenResponse(e){return Vi("not implemented")}_linkToIdToken(e,t){return Vi("not implemented")}_getReauthenticationResolver(e){return Vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(n,e){return j6(n,"POST","/v1/accounts:signInWithIdp",Ug(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5="http://localhost";class Oa extends dA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...o}=t;if(!s||!a)return null;const c=new Oa(s,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Xo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Xo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xo(e,t)}buildRequest(){const e={requestUri:d5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends Gg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Wc{constructor(){super("facebook.com")}static credential(e){return Oa._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oa._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ui.credential(t,s)}catch{return null}}}Ui.GOOGLE_SIGN_IN_METHOD="google.com";Ui.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Wc{constructor(){super("github.com")}static credential(e){return Oa._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.GITHUB_SIGN_IN_METHOD="github.com";Dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Wc{constructor(){super("twitter.com")}static credential(e,t){return Oa._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Pr.credential(t,s)}catch{return null}}}Pr.TWITTER_SIGN_IN_METHOD="twitter.com";Pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const o=await Ps._fromIdTokenResponse(e,s,a),c=gT(s);return new nl({user:o,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=gT(s);return new nl({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function gT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends Ji{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,df.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new df(e,t,s,a)}}function fA(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?df._fromErrorAndOperation(n,o,e,s):o})}async function f5(n,e,t=!1){const s=await jc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return nl._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h5(n,e,t=!1){const{auth:s}=n;if(Ds(s.app))return Promise.reject(Pa(s));const a="reauthenticate";try{const o=await jc(n,fA(s,a,e,n),t);Ve(o.idToken,s,"internal-error");const c=Vg(o.idToken);Ve(c,s,"internal-error");const{sub:f}=c;return Ve(n.uid===f,s,"user-mismatch"),nl._forOperation(n,a,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&mi(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m5(n,e,t=!1){if(Ds(n.app))return Promise.reject(Pa(n));const s="signIn",a=await fA(n,s,e),o=await nl._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(o.user),o}function p5(n,e,t,s){return gn(n).onIdTokenChanged(e,t,s)}function g5(n,e,t){return gn(n).beforeAuthStateChanged(e,t)}function y5(n,e,t,s){return gn(n).onAuthStateChanged(e,t,s)}function x5(n){return gn(n).signOut()}const ff="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ff,"1"),this.storage.removeItem(ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5=1e3,b5=10;class mA extends hA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},o=this.storage.getItem(s);Q6()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,b5):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},v5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}mA.type="LOCAL";const _5=mA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA extends hA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pA.type="SESSION";const gA=pA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Gf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:o}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const f=Array.from(c).map(async m=>m(t.origin,o)),p=await T5(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((f,p)=>{const m=Bg("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(_){const T=_;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),f(T.data.response);break;default:clearTimeout(v),clearTimeout(o),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return window}function S5(n){ci().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}async function A5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w5(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function N5(){return yA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="firebaseLocalStorageDb",C5=1,hf="firebaseLocalStorage",vA="fbase_key";class Xc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bf(n,e){return n.transaction([hf],e?"readwrite":"readonly").objectStore(hf)}function I5(){const n=indexedDB.deleteDatabase(xA);return new Xc(n).toPromise()}function Qp(){const n=indexedDB.open(xA,C5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(hf,{keyPath:vA})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(hf)?e(s):(s.close(),await I5(),e(await Qp()))})})}async function yT(n,e,t){const s=Bf(n,!0).put({[vA]:e,value:t});return new Xc(s).toPromise()}async function k5(n,e){const t=Bf(n,!1).get(e),s=await new Xc(t).toPromise();return s===void 0?null:s.value}function xT(n,e){const t=Bf(n,!0).delete(e);return new Xc(t).toPromise()}const R5=800,M5=3;class bA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>M5)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gf._getInstance(N5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await A5(),!this.activeServiceWorker)return;this.sender=new E5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qp();return await yT(e,ff,"1"),await xT(e,ff),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>yT(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>k5(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=Bf(a,!1).getAll();return new Xc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),R5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bA.type="LOCAL";const D5=bA;new Qc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(n,e){return e?Oi(e):(Ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg extends dA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function P5(n){return m5(n.auth,new Hg(n),n.bypassAuthState)}function L5(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),h5(t,new Hg(n),n.bypassAuthState)}async function U5(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),f5(t,new Hg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t,s,a,o=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:o,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P5;case"linkViaPopup":case"linkViaRedirect":return U5;case"reauthViaPopup":case"reauthViaRedirect":return L5;default:mi(this.auth,"internal-error")}}resolve(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=new Qc(2e3,1e4);async function O5(n,e,t){if(Ds(n.app))return Promise.reject(Vs(n,"operation-not-supported-in-this-environment"));const s=jf(n);M6(n,e,Gg);const a=_A(s,t);return new Ma(s,"signInViaPopup",e,a).executeNotNull()}class Ma extends TA{constructor(e,t,s,a,o){super(e,t,a,o),this.provider=s,this.authWindow=null,this.pollId=null,Ma.currentPopupAction&&Ma.currentPopupAction.cancel(),Ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){zi(this.filter.length===1,"Popup operations only handle one event");const e=Bg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,V5.get())};e()}}Ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="pendingRedirect",zd=new Map;class G5 extends TA{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=zd.get(this.auth._key());if(!e){try{const s=await B5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}zd.set(this.auth._key(),e)}return this.bypassAuthState||zd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function B5(n,e){const t=F5(e),s=z5(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function H5(n,e){zd.set(n._key(),e)}function z5(n){return Oi(n._redirectPersistence)}function F5(n){return Hd(j5,n.config.apiKey,n.name)}async function q5(n,e,t=!1){if(Ds(n.app))return Promise.reject(Pa(n));const s=jf(n),a=_A(s,e),c=await new G5(s,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=600*1e3;class $5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Y5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!EA(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Vs(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=K5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vT(e))}saveEventToCache(e){this.cachedEventUids.add(vT(e)),this.lastProcessedEventTime=Date.now()}}function vT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function EA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Y5(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J5(n,e={}){return pl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W5=/^https?/;async function X5(n){if(n.config.emulator)return;const{authorizedDomains:e}=await J5(n);for(const t of e)try{if(Z5(t))return}catch{}mi(n,"unauthorized-domain")}function Z5(n){const e=Yp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!W5.test(t))return!1;if(Q5.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=new Qc(3e4,6e4);function bT(){const n=ci().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function tL(n){return new Promise((e,t)=>{var a,o,c;function s(){bT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bT(),t(Vs(n,"network-request-failed"))},timeout:eL.get()})}if((o=(a=ci().gapi)==null?void 0:a.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((c=ci().gapi)!=null&&c.load)s();else{const f=r5("iframefcb");return ci()[f]=()=>{gapi.load?s():t(Vs(n,"network-request-failed"))},s5(`${i5()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw Fd=null,e})}let Fd=null;function nL(n){return Fd=Fd||tL(n),Fd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=new Qc(5e3,15e3),iL="__/auth/iframe",rL="emulator/auth/iframe",aL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lL(n){const e=n.config;Ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Lg(e,rL):`https://${n.config.authDomain}/${iL}`,s={apiKey:e.apiKey,appName:n.name,v:ml},a=oL.get(n.config.apiHost);a&&(s.eid=a);const o=n._getFrameworks();return o.length&&(s.fw=o.join(",")),`${t}?${Jc(s).slice(1)}`}async function cL(n){const e=await nL(n),t=ci().gapi;return Ve(t,n,"internal-error"),e.open({where:document.body,url:lL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aL,dontclear:!0},s=>new Promise(async(a,o)=>{await s.restyle({setHideOnLeave:!1});const c=Vs(n,"network-request-failed"),f=ci().setTimeout(()=>{o(c)},sL.get());function p(){ci().clearTimeout(f),a(s)}s.ping(p).then(p,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dL=500,fL=600,hL="_blank",mL="http://localhost";class _T{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pL(n,e,t,s=dL,a=fL){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p={...uL,width:s.toString(),height:a.toString(),top:o,left:c},m=En().toLowerCase();t&&(f=sA(m)?hL:t),tA(m)&&(e=e||mL,p.scrollbars="yes");const v=Object.entries(p).reduce((T,[A,N])=>`${T}${A}=${N},`,"");if(J6(m)&&f!=="_self")return gL(e||"",f),new _T(null);const _=window.open(e||"",f,v);Ve(_,n,"popup-blocked");try{_.focus()}catch{}return new _T(_)}function gL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL="__/auth/handler",xL="emulator/auth/handler",vL=encodeURIComponent("fac");async function TT(n,e,t,s,a,o){Ve(n.config.authDomain,n,"auth-domain-config-required"),Ve(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:ml,eventId:a};if(e instanceof Gg){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",gP(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))c[v]=_}if(e instanceof Wc){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const p=await n._getAppCheckToken(),m=p?`#${vL}=${encodeURIComponent(p)}`:"";return`${bL(n)}?${Jc(f).slice(1)}${m}`}function bL({config:n}){return n.emulator?Lg(n,xL):`https://${n.authDomain}/${yL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="webStorageSupport";class _L{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gA,this._completeRedirectFn=q5,this._overrideRedirectResult=H5}async _openPopup(e,t,s,a){var c;zi((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await TT(e,t,s,Yp(),a);return pL(e,o,Bg())}async _openRedirect(e,t,s,a){await this._originValidation(e);const o=await TT(e,t,s,Yp(),a);return S5(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:o}=this.eventManagers[t];return a?Promise.resolve(a):(zi(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await cL(e),s=new $5(e);return t.register("authEvent",a=>(Ve(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vp,{type:vp},a=>{var c;const o=(c=a==null?void 0:a[0])==null?void 0:c[vp];o!==void 0&&t(!!o),mi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=X5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lA()||nA()||Og()}}const TL=_L;var ET="@firebase/auth",ST="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AL(n){tl(new Va("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;Ve(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cA(n)},m=new t5(s,a,o,p);return o5(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),tl(new Va("auth-internal",e=>{const t=jf(e.getProvider("auth").getImmediate());return(s=>new EL(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Or(ET,ST,SL(n)),Or(ET,ST,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=300,NL=jS("authIdTokenMaxAge")||wL;let AT=null;const CL=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>NL)return;const a=t==null?void 0:t.token;AT!==a&&(AT=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function IL(n=qS()){const e=Mg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=a5(n,{popupRedirectResolver:TL,persistence:[D5,_5,gA]}),s=jS("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const c=CL(o.toString());g5(t,c,()=>c(t.currentUser)),p5(t,f=>c(f))}}const a=VS("auth");return a&&l5(t,`http://${a}`),t}function kL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}n5({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const o=Vs("internal-error");o.customData=a,t(o)},s.type="text/javascript",s.charset="UTF-8",kL().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AL("Browser");var wT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,SA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,D){function R(){}R.prototype=D.prototype,M.F=D.prototype,M.prototype=new R,M.prototype.constructor=M,M.D=function(O,V,B){for(var U=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)U[pe-2]=arguments[pe];return D.prototype[V].apply(O,U)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(M,D,R){R||(R=0);const O=Array(16);if(typeof D=="string")for(var V=0;V<16;++V)O[V]=D.charCodeAt(R++)|D.charCodeAt(R++)<<8|D.charCodeAt(R++)<<16|D.charCodeAt(R++)<<24;else for(V=0;V<16;++V)O[V]=D[R++]|D[R++]<<8|D[R++]<<16|D[R++]<<24;D=M.g[0],R=M.g[1],V=M.g[2];let B=M.g[3],U;U=D+(B^R&(V^B))+O[0]+3614090360&4294967295,D=R+(U<<7&4294967295|U>>>25),U=B+(V^D&(R^V))+O[1]+3905402710&4294967295,B=D+(U<<12&4294967295|U>>>20),U=V+(R^B&(D^R))+O[2]+606105819&4294967295,V=B+(U<<17&4294967295|U>>>15),U=R+(D^V&(B^D))+O[3]+3250441966&4294967295,R=V+(U<<22&4294967295|U>>>10),U=D+(B^R&(V^B))+O[4]+4118548399&4294967295,D=R+(U<<7&4294967295|U>>>25),U=B+(V^D&(R^V))+O[5]+1200080426&4294967295,B=D+(U<<12&4294967295|U>>>20),U=V+(R^B&(D^R))+O[6]+2821735955&4294967295,V=B+(U<<17&4294967295|U>>>15),U=R+(D^V&(B^D))+O[7]+4249261313&4294967295,R=V+(U<<22&4294967295|U>>>10),U=D+(B^R&(V^B))+O[8]+1770035416&4294967295,D=R+(U<<7&4294967295|U>>>25),U=B+(V^D&(R^V))+O[9]+2336552879&4294967295,B=D+(U<<12&4294967295|U>>>20),U=V+(R^B&(D^R))+O[10]+4294925233&4294967295,V=B+(U<<17&4294967295|U>>>15),U=R+(D^V&(B^D))+O[11]+2304563134&4294967295,R=V+(U<<22&4294967295|U>>>10),U=D+(B^R&(V^B))+O[12]+1804603682&4294967295,D=R+(U<<7&4294967295|U>>>25),U=B+(V^D&(R^V))+O[13]+4254626195&4294967295,B=D+(U<<12&4294967295|U>>>20),U=V+(R^B&(D^R))+O[14]+2792965006&4294967295,V=B+(U<<17&4294967295|U>>>15),U=R+(D^V&(B^D))+O[15]+1236535329&4294967295,R=V+(U<<22&4294967295|U>>>10),U=D+(V^B&(R^V))+O[1]+4129170786&4294967295,D=R+(U<<5&4294967295|U>>>27),U=B+(R^V&(D^R))+O[6]+3225465664&4294967295,B=D+(U<<9&4294967295|U>>>23),U=V+(D^R&(B^D))+O[11]+643717713&4294967295,V=B+(U<<14&4294967295|U>>>18),U=R+(B^D&(V^B))+O[0]+3921069994&4294967295,R=V+(U<<20&4294967295|U>>>12),U=D+(V^B&(R^V))+O[5]+3593408605&4294967295,D=R+(U<<5&4294967295|U>>>27),U=B+(R^V&(D^R))+O[10]+38016083&4294967295,B=D+(U<<9&4294967295|U>>>23),U=V+(D^R&(B^D))+O[15]+3634488961&4294967295,V=B+(U<<14&4294967295|U>>>18),U=R+(B^D&(V^B))+O[4]+3889429448&4294967295,R=V+(U<<20&4294967295|U>>>12),U=D+(V^B&(R^V))+O[9]+568446438&4294967295,D=R+(U<<5&4294967295|U>>>27),U=B+(R^V&(D^R))+O[14]+3275163606&4294967295,B=D+(U<<9&4294967295|U>>>23),U=V+(D^R&(B^D))+O[3]+4107603335&4294967295,V=B+(U<<14&4294967295|U>>>18),U=R+(B^D&(V^B))+O[8]+1163531501&4294967295,R=V+(U<<20&4294967295|U>>>12),U=D+(V^B&(R^V))+O[13]+2850285829&4294967295,D=R+(U<<5&4294967295|U>>>27),U=B+(R^V&(D^R))+O[2]+4243563512&4294967295,B=D+(U<<9&4294967295|U>>>23),U=V+(D^R&(B^D))+O[7]+1735328473&4294967295,V=B+(U<<14&4294967295|U>>>18),U=R+(B^D&(V^B))+O[12]+2368359562&4294967295,R=V+(U<<20&4294967295|U>>>12),U=D+(R^V^B)+O[5]+4294588738&4294967295,D=R+(U<<4&4294967295|U>>>28),U=B+(D^R^V)+O[8]+2272392833&4294967295,B=D+(U<<11&4294967295|U>>>21),U=V+(B^D^R)+O[11]+1839030562&4294967295,V=B+(U<<16&4294967295|U>>>16),U=R+(V^B^D)+O[14]+4259657740&4294967295,R=V+(U<<23&4294967295|U>>>9),U=D+(R^V^B)+O[1]+2763975236&4294967295,D=R+(U<<4&4294967295|U>>>28),U=B+(D^R^V)+O[4]+1272893353&4294967295,B=D+(U<<11&4294967295|U>>>21),U=V+(B^D^R)+O[7]+4139469664&4294967295,V=B+(U<<16&4294967295|U>>>16),U=R+(V^B^D)+O[10]+3200236656&4294967295,R=V+(U<<23&4294967295|U>>>9),U=D+(R^V^B)+O[13]+681279174&4294967295,D=R+(U<<4&4294967295|U>>>28),U=B+(D^R^V)+O[0]+3936430074&4294967295,B=D+(U<<11&4294967295|U>>>21),U=V+(B^D^R)+O[3]+3572445317&4294967295,V=B+(U<<16&4294967295|U>>>16),U=R+(V^B^D)+O[6]+76029189&4294967295,R=V+(U<<23&4294967295|U>>>9),U=D+(R^V^B)+O[9]+3654602809&4294967295,D=R+(U<<4&4294967295|U>>>28),U=B+(D^R^V)+O[12]+3873151461&4294967295,B=D+(U<<11&4294967295|U>>>21),U=V+(B^D^R)+O[15]+530742520&4294967295,V=B+(U<<16&4294967295|U>>>16),U=R+(V^B^D)+O[2]+3299628645&4294967295,R=V+(U<<23&4294967295|U>>>9),U=D+(V^(R|~B))+O[0]+4096336452&4294967295,D=R+(U<<6&4294967295|U>>>26),U=B+(R^(D|~V))+O[7]+1126891415&4294967295,B=D+(U<<10&4294967295|U>>>22),U=V+(D^(B|~R))+O[14]+2878612391&4294967295,V=B+(U<<15&4294967295|U>>>17),U=R+(B^(V|~D))+O[5]+4237533241&4294967295,R=V+(U<<21&4294967295|U>>>11),U=D+(V^(R|~B))+O[12]+1700485571&4294967295,D=R+(U<<6&4294967295|U>>>26),U=B+(R^(D|~V))+O[3]+2399980690&4294967295,B=D+(U<<10&4294967295|U>>>22),U=V+(D^(B|~R))+O[10]+4293915773&4294967295,V=B+(U<<15&4294967295|U>>>17),U=R+(B^(V|~D))+O[1]+2240044497&4294967295,R=V+(U<<21&4294967295|U>>>11),U=D+(V^(R|~B))+O[8]+1873313359&4294967295,D=R+(U<<6&4294967295|U>>>26),U=B+(R^(D|~V))+O[15]+4264355552&4294967295,B=D+(U<<10&4294967295|U>>>22),U=V+(D^(B|~R))+O[6]+2734768916&4294967295,V=B+(U<<15&4294967295|U>>>17),U=R+(B^(V|~D))+O[13]+1309151649&4294967295,R=V+(U<<21&4294967295|U>>>11),U=D+(V^(R|~B))+O[4]+4149444226&4294967295,D=R+(U<<6&4294967295|U>>>26),U=B+(R^(D|~V))+O[11]+3174756917&4294967295,B=D+(U<<10&4294967295|U>>>22),U=V+(D^(B|~R))+O[2]+718787259&4294967295,V=B+(U<<15&4294967295|U>>>17),U=R+(B^(V|~D))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+D&4294967295,M.g[1]=M.g[1]+(V+(U<<21&4294967295|U>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+B&4294967295}s.prototype.v=function(M,D){D===void 0&&(D=M.length);const R=D-this.blockSize,O=this.C;let V=this.h,B=0;for(;B<D;){if(V==0)for(;B<=R;)a(this,M,B),B+=this.blockSize;if(typeof M=="string"){for(;B<D;)if(O[V++]=M.charCodeAt(B++),V==this.blockSize){a(this,O),V=0;break}}else for(;B<D;)if(O[V++]=M[B++],V==this.blockSize){a(this,O),V=0;break}}this.h=V,this.o+=D},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var D=1;D<M.length-8;++D)M[D]=0;D=this.o*8;for(var R=M.length-8;R<M.length;++R)M[R]=D&255,D/=256;for(this.v(M),M=Array(16),D=0,R=0;R<4;++R)for(let O=0;O<32;O+=8)M[D++]=this.g[R]>>>O&255;return M};function o(M,D){var R=f;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=D(M)}function c(M,D){this.h=D;const R=[];let O=!0;for(let V=M.length-1;V>=0;V--){const B=M[V]|0;O&&B==D||(R[V]=B,O=!1)}this.g=R}var f={};function p(M){return-128<=M&&M<128?o(M,function(D){return new c([D|0],D<0?-1:0)}):new c([M|0],M<0?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return _;if(M<0)return I(m(-M));const D=[];let R=1;for(let O=0;M>=R;O++)D[O]=M/R|0,R*=4294967296;return new c(D,0)}function v(M,D){if(M.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(M.charAt(0)=="-")return I(v(M.substring(1),D));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=m(Math.pow(D,8));let O=_;for(let B=0;B<M.length;B+=8){var V=Math.min(8,M.length-B);const U=parseInt(M.substring(B,B+V),D);V<8?(V=m(Math.pow(D,V)),O=O.j(V).add(m(U))):(O=O.j(R),O=O.add(m(U)))}return O}var _=p(0),T=p(1),A=p(16777216);n=c.prototype,n.m=function(){if(C(this))return-I(this).m();let M=0,D=1;for(let R=0;R<this.g.length;R++){const O=this.i(R);M+=(O>=0?O:4294967296+O)*D,D*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(N(this))return"0";if(C(this))return"-"+I(this).toString(M);const D=m(Math.pow(M,6));var R=this;let O="";for(;;){const V=ee(R,D).g;R=j(R,V.j(D));let B=((R.g.length>0?R.g[0]:R.h)>>>0).toString(M);if(R=V,N(R))return B+O;for(;B.length<6;)B="0"+B;O=B+O}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function N(M){if(M.h!=0)return!1;for(let D=0;D<M.g.length;D++)if(M.g[D]!=0)return!1;return!0}function C(M){return M.h==-1}n.l=function(M){return M=j(this,M),C(M)?-1:N(M)?0:1};function I(M){const D=M.g.length,R=[];for(let O=0;O<D;O++)R[O]=~M.g[O];return new c(R,~M.h).add(T)}n.abs=function(){return C(this)?I(this):this},n.add=function(M){const D=Math.max(this.g.length,M.g.length),R=[];let O=0;for(let V=0;V<=D;V++){let B=O+(this.i(V)&65535)+(M.i(V)&65535),U=(B>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);O=U>>>16,B&=65535,U&=65535,R[V]=U<<16|B}return new c(R,R[R.length-1]&-2147483648?-1:0)};function j(M,D){return M.add(I(D))}n.j=function(M){if(N(this)||N(M))return _;if(C(this))return C(M)?I(this).j(I(M)):I(I(this).j(M));if(C(M))return I(this.j(I(M)));if(this.l(A)<0&&M.l(A)<0)return m(this.m()*M.m());const D=this.g.length+M.g.length,R=[];for(var O=0;O<2*D;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(let V=0;V<M.g.length;V++){const B=this.i(O)>>>16,U=this.i(O)&65535,pe=M.i(V)>>>16,Re=M.i(V)&65535;R[2*O+2*V]+=U*Re,L(R,2*O+2*V),R[2*O+2*V+1]+=B*Re,L(R,2*O+2*V+1),R[2*O+2*V+1]+=U*pe,L(R,2*O+2*V+1),R[2*O+2*V+2]+=B*pe,L(R,2*O+2*V+2)}for(M=0;M<D;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=D;M<2*D;M++)R[M]=0;return new c(R,0)};function L(M,D){for(;(M[D]&65535)!=M[D];)M[D+1]+=M[D]>>>16,M[D]&=65535,D++}function G(M,D){this.g=M,this.h=D}function ee(M,D){if(N(D))throw Error("division by zero");if(N(M))return new G(_,_);if(C(M))return D=ee(I(M),D),new G(I(D.g),I(D.h));if(C(D))return D=ee(M,I(D)),new G(I(D.g),D.h);if(M.g.length>30){if(C(M)||C(D))throw Error("slowDivide_ only works with positive integers.");for(var R=T,O=D;O.l(M)<=0;)R=re(R),O=re(O);var V=oe(R,1),B=oe(O,1);for(O=oe(O,2),R=oe(R,2);!N(O);){var U=B.add(O);U.l(M)<=0&&(V=V.add(R),B=U),O=oe(O,1),R=oe(R,1)}return D=j(M,V.j(D)),new G(V,D)}for(V=_;M.l(D)>=0;){for(R=Math.max(1,Math.floor(M.m()/D.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),B=m(R),U=B.j(D);C(U)||U.l(M)>0;)R-=O,B=m(R),U=B.j(D);N(B)&&(B=T),V=V.add(B),M=j(M,U)}return new G(V,M)}n.B=function(M){return ee(this,M).h},n.and=function(M){const D=Math.max(this.g.length,M.g.length),R=[];for(let O=0;O<D;O++)R[O]=this.i(O)&M.i(O);return new c(R,this.h&M.h)},n.or=function(M){const D=Math.max(this.g.length,M.g.length),R=[];for(let O=0;O<D;O++)R[O]=this.i(O)|M.i(O);return new c(R,this.h|M.h)},n.xor=function(M){const D=Math.max(this.g.length,M.g.length),R=[];for(let O=0;O<D;O++)R[O]=this.i(O)^M.i(O);return new c(R,this.h^M.h)};function re(M){const D=M.g.length+1,R=[];for(let O=0;O<D;O++)R[O]=M.i(O)<<1|M.i(O-1)>>>31;return new c(R,M.h)}function oe(M,D){const R=D>>5;D%=32;const O=M.g.length-R,V=[];for(let B=0;B<O;B++)V[B]=D>0?M.i(B+R)>>>D|M.i(B+R+1)<<32-D:M.i(B+R);return new c(V,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,SA=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,jr=c}).apply(typeof wT<"u"?wT:typeof self<"u"?self:typeof window<"u"?window:{});var Dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AA,Nc,wA,qd,Wp,NA,CA,IA;(function(){var n,e=Object.defineProperty;function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dd=="object"&&Dd];for(var E=0;E<y.length;++E){var w=y[E];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function a(y,E){if(E)e:{var w=s;y=y.split(".");for(var P=0;P<y.length-1;P++){var Q=y[P];if(!(Q in w))break e;w=w[Q]}y=y[y.length-1],P=w[y],E=E(P),E!=P&&E!=null&&e(w,y,{configurable:!0,writable:!0,value:E})}}a("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(y){return y||function(E){var w=[],P;for(P in E)Object.prototype.hasOwnProperty.call(E,P)&&w.push([P,E[P]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function f(y){var E=typeof y;return E=="object"&&y!=null||E=="function"}function p(y,E,w){return y.call.apply(y.bind,arguments)}function m(y,E,w){return m=p,m.apply(null,arguments)}function v(y,E){var w=Array.prototype.slice.call(arguments,1);return function(){var P=w.slice();return P.push.apply(P,arguments),y.apply(this,P)}}function _(y,E){function w(){}w.prototype=E.prototype,y.Z=E.prototype,y.prototype=new w,y.prototype.constructor=y,y.Ob=function(P,Q,se){for(var ve=Array(arguments.length-2),He=2;He<arguments.length;He++)ve[He-2]=arguments[He];return E.prototype[Q].apply(P,ve)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function A(y){const E=y.length;if(E>0){const w=Array(E);for(let P=0;P<E;P++)w[P]=y[P];return w}return[]}function N(y,E){for(let P=1;P<arguments.length;P++){const Q=arguments[P];var w=typeof Q;if(w=w!="object"?w:Q?Array.isArray(Q)?"array":w:"null",w=="array"||w=="object"&&typeof Q.length=="number"){w=y.length||0;const se=Q.length||0;y.length=w+se;for(let ve=0;ve<se;ve++)y[w+ve]=Q[ve]}else y.push(Q)}}class C{constructor(E,w){this.i=E,this.j=w,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function I(y){c.setTimeout(()=>{throw y},0)}function j(){var y=M;let E=null;return y.g&&(E=y.g,y.g=y.g.next,y.g||(y.h=null),E.next=null),E}class L{constructor(){this.h=this.g=null}add(E,w){const P=G.get();P.set(E,w),this.h?this.h.next=P:this.g=P,this.h=P}}var G=new C(()=>new ee,y=>y.reset());class ee{constructor(){this.next=this.g=this.h=null}set(E,w){this.h=E,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let re,oe=!1,M=new L,D=()=>{const y=Promise.resolve(void 0);re=()=>{y.then(R)}};function R(){for(var y;y=j();){try{y.h.call(y.g)}catch(w){I(w)}var E=G;E.j(y),E.h<100&&(E.h++,y.next=E.g,E.g=y)}oe=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(y,E){this.type=y,this.g=this.target=E,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var y=!1,E=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const w=()=>{};c.addEventListener("test",w,E),c.removeEventListener("test",w,E)}catch{}return y})();function U(y){return/^[\s\xa0]*$/.test(y)}function pe(y,E){V.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,E)}_(pe,V),pe.prototype.init=function(y,E){const w=this.type=y.type,P=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=E,E=y.relatedTarget,E||(w=="mouseover"?E=y.fromElement:w=="mouseout"&&(E=y.toElement)),this.relatedTarget=E,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Re="closure_listenable_"+(Math.random()*1e6|0),J=0;function he(y,E,w,P,Q){this.listener=y,this.proxy=null,this.src=E,this.type=w,this.capture=!!P,this.ha=Q,this.key=++J,this.da=this.fa=!1}function be(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Ae(y,E,w){for(const P in y)E.call(w,y[P],P,y)}function xe(y,E){for(const w in y)E.call(void 0,y[w],w,y)}function H(y){const E={};for(const w in y)E[w]=y[w];return E}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z(y,E){let w,P;for(let Q=1;Q<arguments.length;Q++){P=arguments[Q];for(w in P)y[w]=P[w];for(let se=0;se<ne.length;se++)w=ne[se],Object.prototype.hasOwnProperty.call(P,w)&&(y[w]=P[w])}}function K(y){this.src=y,this.g={},this.h=0}K.prototype.add=function(y,E,w,P,Q){const se=y.toString();y=this.g[se],y||(y=this.g[se]=[],this.h++);const ve=ce(y,E,P,Q);return ve>-1?(E=y[ve],w||(E.fa=!1)):(E=new he(E,this.src,se,!!P,Q),E.fa=w,y.push(E)),E};function $(y,E){const w=E.type;if(w in y.g){var P=y.g[w],Q=Array.prototype.indexOf.call(P,E,void 0),se;(se=Q>=0)&&Array.prototype.splice.call(P,Q,1),se&&(be(E),y.g[w].length==0&&(delete y.g[w],y.h--))}}function ce(y,E,w,P){for(let Q=0;Q<y.length;++Q){const se=y[Q];if(!se.da&&se.listener==E&&se.capture==!!w&&se.ha==P)return Q}return-1}var ye="closure_lm_"+(Math.random()*1e6|0),Ce={};function _e(y,E,w,P,Q){if(Array.isArray(E)){for(let se=0;se<E.length;se++)_e(y,E[se],w,P,Q);return null}return w=Bn(w),y&&y[Re]?y.J(E,w,f(P)?!!P.capture:!1,Q):dt(y,E,w,!1,P,Q)}function dt(y,E,w,P,Q,se){if(!E)throw Error("Invalid event type");const ve=f(Q)?!!Q.capture:!!Q;let He=Vt(y);if(He||(y[ye]=He=new K(y)),w=He.add(E,w,P,ve,se),w.proxy)return w;if(P=bt(),w.proxy=P,P.src=y,P.listener=w,y.addEventListener)B||(Q=ve),Q===void 0&&(Q=!1),y.addEventListener(E.toString(),P,Q);else if(y.attachEvent)y.attachEvent(Nt(E.toString()),P);else if(y.addListener&&y.removeListener)y.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return w}function bt(){function y(w){return E.call(y.src,y.listener,w)}const E=Ut;return y}function et(y,E,w,P,Q){if(Array.isArray(E))for(var se=0;se<E.length;se++)et(y,E[se],w,P,Q);else P=f(P)?!!P.capture:!!P,w=Bn(w),y&&y[Re]?(y=y.i,se=String(E).toString(),se in y.g&&(E=y.g[se],w=ce(E,w,P,Q),w>-1&&(be(E[w]),Array.prototype.splice.call(E,w,1),E.length==0&&(delete y.g[se],y.h--)))):y&&(y=Vt(y))&&(E=y.g[E.toString()],y=-1,E&&(y=ce(E,w,P,Q)),(w=y>-1?E[y]:null)&&ct(w))}function ct(y){if(typeof y!="number"&&y&&!y.da){var E=y.src;if(E&&E[Re])$(E.i,y);else{var w=y.type,P=y.proxy;E.removeEventListener?E.removeEventListener(w,P,y.capture):E.detachEvent?E.detachEvent(Nt(w),P):E.addListener&&E.removeListener&&E.removeListener(P),(w=Vt(E))?($(w,y),w.h==0&&(w.src=null,E[ye]=null)):be(y)}}}function Nt(y){return y in Ce?Ce[y]:Ce[y]="on"+y}function Ut(y,E){if(y.da)y=!0;else{E=new pe(E,this);const w=y.listener,P=y.ha||y.src;y.fa&&ct(y),y=w.call(P,E)}return y}function Vt(y){return y=y[ye],y instanceof K?y:null}var Sn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Bn(y){return typeof y=="function"?y:(y[Sn]||(y[Sn]=function(E){return y.handleEvent(E)}),y[Sn])}function Rt(){O.call(this),this.i=new K(this),this.M=this,this.G=null}_(Rt,O),Rt.prototype[Re]=!0,Rt.prototype.removeEventListener=function(y,E,w,P){et(this,y,E,w,P)};function tt(y,E){var w,P=y.G;if(P)for(w=[];P;P=P.G)w.push(P);if(y=y.M,P=E.type||E,typeof E=="string")E=new V(E,y);else if(E instanceof V)E.target=E.target||y;else{var Q=E;E=new V(P,y),Z(E,Q)}Q=!0;let se,ve;if(w)for(ve=w.length-1;ve>=0;ve--)se=E.g=w[ve],Q=zs(se,P,!0,E)&&Q;if(se=E.g=y,Q=zs(se,P,!0,E)&&Q,Q=zs(se,P,!1,E)&&Q,w)for(ve=0;ve<w.length;ve++)se=E.g=w[ve],Q=zs(se,P,!1,E)&&Q}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var y=this.i;for(const E in y.g){const w=y.g[E];for(let P=0;P<w.length;P++)be(w[P]);delete y.g[E],y.h--}}this.G=null},Rt.prototype.J=function(y,E,w,P){return this.i.add(String(y),E,!1,w,P)},Rt.prototype.K=function(y,E,w,P){return this.i.add(String(y),E,!0,w,P)};function zs(y,E,w,P){if(E=y.i.g[String(E)],!E)return!0;E=E.concat();let Q=!0;for(let se=0;se<E.length;++se){const ve=E[se];if(ve&&!ve.da&&ve.capture==w){const He=ve.listener,Ot=ve.ha||ve.src;ve.fa&&$(y.i,ve),Q=He.call(Ot,P)!==!1&&Q}}return Q&&!P.defaultPrevented}function Qi(y,E){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(y,E||0)}function Ja(y){y.g=Qi(()=>{y.g=null,y.i&&(y.i=!1,Ja(y))},y.l);const E=y.h;y.h=null,y.m.apply(null,E)}class ln extends O{constructor(E,w){super(),this.m=E,this.l=w,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Ja(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gi(y){O.call(this),this.h=y,this.g={}}_(gi,O);var ea=[];function ta(y){Ae(y.g,function(E,w){this.g.hasOwnProperty(w)&&ct(E)},y),y.g={}}gi.prototype.N=function(){gi.Z.N.call(this),ta(this)},gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vs=c.JSON.stringify,Tl=c.JSON.parse,Qa=class{stringify(y){return c.JSON.stringify(y,void 0)}parse(y){return c.JSON.parse(y,void 0)}};function na(){}function bs(){}var Hn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){V.call(this,"d")}_(Zt,V);function Rn(){V.call(this,"c")}_(Rn,V);var Mt={},Wa=null;function Wi(){return Wa=Wa||new Rt}Mt.Ia="serverreachability";function Xa(y){V.call(this,Mt.Ia,y)}_(Xa,V);function Zn(y){const E=Wi();tt(E,new Xa(E))}Mt.STAT_EVENT="statevent";function Fs(y,E){V.call(this,Mt.STAT_EVENT,y),this.stat=E}_(Fs,V);function ge(y){const E=Wi();tt(E,new Fs(E,y))}Mt.Ja="timingevent";function Pe(y,E){V.call(this,Mt.Ja,y),this.size=E}_(Pe,V);function Ke(y,E){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){y()},E)}function Et(){this.g=!0}Et.prototype.ua=function(){this.g=!1};function Ct(y,E,w,P,Q,se){y.info(function(){if(y.g)if(se){var ve="",He=se.split("&");for(let ot=0;ot<He.length;ot++){var Ot=He[ot].split("=");if(Ot.length>1){const It=Ot[0];Ot=Ot[1];const is=It.split("_");ve=is.length>=2&&is[1]=="type"?ve+(It+"="+Ot+"&"):ve+(It+"=redacted&")}}}else ve=null;else ve=se;return"XMLHTTP REQ ("+P+") [attempt "+Q+"]: "+E+`
`+w+`
`+ve})}function Xi(y,E,w,P,Q,se,ve){y.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+Q+"]: "+E+`
`+w+`
`+se+" "+ve})}function es(y,E,w,P){y.info(function(){return"XMLHTTP TEXT ("+E+"): "+uh(y,w)+(P?" "+P:"")})}function _s(y,E){y.info(function(){return"TIMEOUT: "+E})}Et.prototype.info=function(){};function uh(y,E){if(!y.g)return E;if(!E)return null;try{const se=JSON.parse(E);if(se){for(y=0;y<se.length;y++)if(Array.isArray(se[y])){var w=se[y];if(!(w.length<2)){var P=w[1];if(Array.isArray(P)&&!(P.length<1)){var Q=P[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let ve=1;ve<P.length;ve++)P[ve]=""}}}}return vs(se)}catch{return E}}var sa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},El={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sl;function ia(){}_(ia,na),ia.prototype.g=function(){return new XMLHttpRequest},Sl=new ia;function yi(y){return encodeURIComponent(String(y))}function ru(y){var E=1;y=y.split(":");const w=[];for(;E>0&&y.length;)w.push(y.shift()),E--;return y.length&&w.push(y.join(":")),w}function Ts(y,E,w,P){this.j=y,this.i=E,this.l=w,this.S=P||1,this.V=new gi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Es}function Es(){this.i=null,this.g="",this.h=!1}var zt={},nn={};function qs(y,E,w){y.M=1,y.A=ra(qt(E)),y.u=w,y.R=!0,Za(y,null)}function Za(y,E){y.F=Date.now(),Ks(y),y.B=qt(y.A);var w=y.B,P=y.S;Array.isArray(P)||(P=[String(P)]),so(w.i,"t",P),y.C=0,w=y.j.L,y.h=new Es,y.g=bu(y.j,w?E:null,!y.u),y.P>0&&(y.O=new ln(m(y.Y,y,y.g),y.P)),E=y.V,w=y.g,P=y.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(ea[0]=Q.toString()),Q=ea);for(let se=0;se<Q.length;se++){const ve=_e(w,Q[se],P||E.handleEvent,!1,E.h||E);if(!ve)break;E.g[ve.key]=ve}E=y.J?H(y.J):{},y.u?(y.v||(y.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,E)):(y.v="GET",y.g.ea(y.B,y.v,null,E)),Zn(),Ct(y.i,y.v,y.B,y.l,y.S,y.u)}Ts.prototype.ba=function(y){y=y.target;const E=this.O;E&&ws(y)==3?E.j():this.Y(y)},Ts.prototype.Y=function(y){try{if(y==this.g)e:{const He=ws(this.g),Ot=this.g.ya(),ot=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||cn(this.g)))){this.K||He!=4||Ot==7||(Ot==8||ot<=0?Zn(3):Zn(2)),$s(this);var E=this.g.ca();this.X=E;var w=dh(this);if(this.o=E==200,Xi(this.i,this.v,this.B,this.l,this.S,He,E),this.o){if(this.U&&!this.L){t:{if(this.g){var P,Q=this.g;if((P=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(P)){var se=P;break t}}se=null}if(y=se)es(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ys(this,y);else{this.o=!1,this.m=3,ge(12),zn(this),ts(this);break e}}if(this.R){y=!0;let It;for(;!this.K&&this.C<w.length;)if(It=ou(this,w),It==nn){He==4&&(this.m=4,ge(14),y=!1),es(this.i,this.l,null,"[Incomplete Response]");break}else if(It==zt){this.m=4,ge(15),es(this.i,this.l,w,"[Invalid Chunk]"),y=!1;break}else es(this.i,this.l,It,null),Ys(this,It);if(au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||w.length!=0||this.h.h||(this.m=1,ge(16),y=!1),this.o=this.o&&y,!y)es(this.i,this.l,w,"[Invalid Chunked Response]"),zn(this),ts(this);else if(w.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),jl(ve),ve.P=!0,ge(11))}}else es(this.i,this.l,w,null),Ys(this,w);He==4&&zn(this),this.o&&!this.K&&(He==4?gu(this.j,this):(this.o=!1,Ks(this)))}else vi(this.g),E==400&&w.indexOf("Unknown SID")>0?(this.m=3,ge(12)):(this.m=0,ge(13)),zn(this),ts(this)}}}catch{}finally{}};function dh(y){if(!au(y))return y.g.la();const E=cn(y.g);if(E==="")return"";let w="";const P=E.length,Q=ws(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return zn(y),ts(y),"";y.h.i=new c.TextDecoder}for(let se=0;se<P;se++)y.h.h=!0,w+=y.h.i.decode(E[se],{stream:!(Q&&se==P-1)});return E.length=0,y.h.g+=w,y.C=0,y.h.g}function au(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function ou(y,E){var w=y.C,P=E.indexOf(`
`,w);return P==-1?nn:(w=Number(E.substring(w,P)),isNaN(w)?zt:(P+=1,P+w>E.length?nn:(E=E.slice(P,P+w),y.C=P+w,E)))}Ts.prototype.cancel=function(){this.K=!0,zn(this)};function Ks(y){y.T=Date.now()+y.H,eo(y,y.H)}function eo(y,E){if(y.D!=null)throw Error("WatchDog timer not null");y.D=Ke(m(y.aa,y),E)}function $s(y){y.D&&(c.clearTimeout(y.D),y.D=null)}Ts.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(_s(this.i,this.B),this.M!=2&&(Zn(),ge(17)),zn(this),this.m=2,ts(this)):eo(this,this.T-y)};function ts(y){y.j.I==0||y.K||gu(y.j,y)}function zn(y){$s(y);var E=y.O;E&&typeof E.dispose=="function"&&E.dispose(),y.O=null,ta(y.V),y.g&&(E=y.g,y.g=null,E.abort(),E.dispose())}function Ys(y,E){try{var w=y.j;if(w.I!=0&&(w.g==y||Qs(w.h,y))){if(!y.L&&Qs(w.h,y)&&w.I==3){try{var P=w.Ba.g.parse(E)}catch{P=null}if(Array.isArray(P)&&P.length==3){var Q=P;if(Q[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<y.F)lo(w),ar(w);else break e;fa(w),ge(18)}}else w.xa=Q[1],0<w.xa-w.K&&Q[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Ke(m(w.Va,w),6e3));Js(w.h)<=1&&w.ta&&(w.ta=void 0)}else ni(w,11)}else if((y.L||w.g==y)&&lo(w),!U(E))for(Q=w.Ba.g.parse(E),E=0;E<Q.length;E++){let ot=Q[E];const It=ot[0];if(!(It<=w.K))if(w.K=It,ot=ot[1],w.I==2)if(ot[0]=="c"){w.M=ot[1],w.ba=ot[2];const is=ot[3];is!=null&&(w.ka=is,w.j.info("VER="+w.ka));const si=ot[4];si!=null&&(w.za=si,w.j.info("SVER="+w.za));const Ns=ot[5];Ns!=null&&typeof Ns=="number"&&Ns>0&&(P=1.5*Ns,w.O=P,w.j.info("backChannelRequestTimeoutMs_="+P)),P=w;const Cs=y.g;if(Cs){const ha=Cs.g?Cs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ha){var se=P.h;se.g||ha.indexOf("spdy")==-1&&ha.indexOf("quic")==-1&&ha.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(Nl(se,se.h),se.h=null))}if(P.G){const co=Cs.g?Cs.g.getResponseHeader("X-HTTP-Session-Id"):null;co&&(P.wa=co,ft(P.J,P.G,co))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-y.F,w.j.info("Handshake RTT: "+w.T+"ms")),P=w;var ve=y;if(P.na=vu(P,P.L?P.ba:null,P.W),ve.L){Cl(P.h,ve);var He=ve,Ot=P.O;Ot&&(He.H=Ot),He.D&&($s(He),Ks(He)),P.g=ve}else mu(P);w.i.length>0&&ti(w)}else ot[0]!="stop"&&ot[0]!="close"||ni(w,7);else w.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?ni(w,7):Vl(w):ot[0]!="noop"&&w.l&&w.l.qa(ot),w.A=0)}}Zn(4)}catch{}}var Ft=class{constructor(y,E){this.g=y,this.map=E}};function Al(y){this.l=y||10,c.PerformanceNavigationTiming?(y=c.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wl(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Js(y){return y.h?1:y.g?y.g.size:0}function Qs(y,E){return y.h?y.h==E:y.g?y.g.has(E):!1}function Nl(y,E){y.g?y.g.add(E):y.h=E}function Cl(y,E){y.h&&y.h==E?y.h=null:y.g&&y.g.has(E)&&y.g.delete(E)}Al.prototype.cancel=function(){if(this.i=Il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Il(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let E=y.i;for(const w of y.g.values())E=E.concat(w.G);return E}return A(y.i)}var lu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function to(y,E){if(y){y=y.split("&");for(let w=0;w<y.length;w++){const P=y[w].indexOf("=");let Q,se=null;P>=0?(Q=y[w].substring(0,P),se=y[w].substring(P+1)):Q=y[w],E(Q,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function Fn(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;y instanceof Fn?(this.l=y.l,sn(this,y.j),this.o=y.o,this.g=y.g,Zi(this,y.u),this.h=y.h,kl(this,fu(y.i)),this.m=y.m):y&&(E=String(y).match(lu))?(this.l=!1,sn(this,E[1]||"",!0),this.o=Ws(E[2]||""),this.g=Ws(E[3]||"",!0),Zi(this,E[4]),this.h=Ws(E[5]||"",!0),kl(this,E[6]||"",!0),this.m=Ws(E[7]||"")):(this.l=!1,this.i=new tr(null,this.l))}Fn.prototype.toString=function(){const y=[];var E=this.j;E&&y.push(aa(E,no,!0),":");var w=this.g;return(w||E=="file")&&(y.push("//"),(E=this.o)&&y.push(aa(E,no,!0),"@"),y.push(yi(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&y.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&y.push("/"),y.push(aa(w,w.charAt(0)=="/"?Rl:cu,!0))),(w=this.i.toString())&&y.push("?",w),(w=this.m)&&y.push("#",aa(w,uu)),y.join("")},Fn.prototype.resolve=function(y){const E=qt(this);let w=!!y.j;w?sn(E,y.j):w=!!y.o,w?E.o=y.o:w=!!y.g,w?E.g=y.g:w=y.u!=null;var P=y.h;if(w)Zi(E,y.u);else if(w=!!y.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var Q=E.h.lastIndexOf("/");Q!=-1&&(P=E.h.slice(0,Q+1)+P)}if(Q=P,Q==".."||Q==".")P="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){P=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const se=[];for(let ve=0;ve<Q.length;){const He=Q[ve++];He=="."?P&&ve==Q.length&&se.push(""):He==".."?((se.length>1||se.length==1&&se[0]!="")&&se.pop(),P&&ve==Q.length&&se.push("")):(se.push(He),P=!0)}P=se.join("/")}else P=Q}return w?E.h=P:w=y.i.toString()!=="",w?kl(E,fu(y.i)):w=!!y.m,w&&(E.m=y.m),E};function qt(y){return new Fn(y)}function sn(y,E,w){y.j=w?Ws(E,!0):E,y.j&&(y.j=y.j.replace(/:$/,""))}function Zi(y,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);y.u=E}else y.u=null}function kl(y,E,w){E instanceof tr?(y.i=E,io(y.i,y.l)):(w||(E=aa(E,er)),y.i=new tr(E,y.l))}function ft(y,E,w){y.i.set(E,w)}function ra(y){return ft(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function Ws(y,E){return y?E?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function aa(y,E,w){return typeof y=="string"?(y=encodeURI(y).replace(E,Mn),w&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function Mn(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var no=/[#\/\?@]/g,cu=/[#\?:]/g,Rl=/[#\?]/g,er=/[#\?@]/g,uu=/#/g;function tr(y,E){this.h=this.g=null,this.i=y||null,this.j=!!E}function Dn(y){y.g||(y.g=new Map,y.h=0,y.i&&to(y.i,function(E,w){y.add(decodeURIComponent(E.replace(/\+/g," ")),w)}))}n=tr.prototype,n.add=function(y,E){Dn(this),this.i=null,y=nr(this,y);let w=this.g.get(y);return w||this.g.set(y,w=[]),w.push(E),this.h+=1,this};function du(y,E){Dn(y),E=nr(y,E),y.g.has(E)&&(y.i=null,y.h-=y.g.get(E).length,y.g.delete(E))}function Ml(y,E){return Dn(y),E=nr(y,E),y.g.has(E)}n.forEach=function(y,E){Dn(this),this.g.forEach(function(w,P){w.forEach(function(Q){y.call(E,Q,P,this)},this)},this)};function Dl(y,E){Dn(y);let w=[];if(typeof E=="string")Ml(y,E)&&(w=w.concat(y.g.get(nr(y,E))));else for(y=Array.from(y.g.values()),E=0;E<y.length;E++)w=w.concat(y[E]);return w}n.set=function(y,E){return Dn(this),this.i=null,y=nr(this,y),Ml(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[E]),this.h+=1,this},n.get=function(y,E){return y?(y=Dl(this,y),y.length>0?String(y[0]):E):E};function so(y,E,w){du(y,E),w.length>0&&(y.i=null,y.g.set(nr(y,E),A(w)),y.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],E=Array.from(this.g.keys());for(let P=0;P<E.length;P++){var w=E[P];const Q=yi(w);w=Dl(this,w);for(let se=0;se<w.length;se++){let ve=Q;w[se]!==""&&(ve+="="+yi(w[se])),y.push(ve)}}return this.i=y.join("&")};function fu(y){const E=new tr;return E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),E}function nr(y,E){return E=String(E),y.j&&(E=E.toLowerCase()),E}function io(y,E){E&&!y.j&&(Dn(y),y.i=null,y.g.forEach(function(w,P){const Q=P.toLowerCase();P!=Q&&(du(this,P),so(this,Q,w))},y)),y.j=E}function Ss(y,E){const w=new Et;if(c.Image){const P=new Image;P.onload=v(ns,w,"TestLoadImage: loaded",!0,E,P),P.onerror=v(ns,w,"TestLoadImage: error",!1,E,P),P.onabort=v(ns,w,"TestLoadImage: abort",!1,E,P),P.ontimeout=v(ns,w,"TestLoadImage: timeout",!1,E,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=y}else E(!1)}function Pl(y,E){const w=new Et,P=new AbortController,Q=setTimeout(()=>{P.abort(),ns(w,"TestPingServer: timeout",!1,E)},1e4);fetch(y,{signal:P.signal}).then(se=>{clearTimeout(Q),se.ok?ns(w,"TestPingServer: ok",!0,E):ns(w,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Q),ns(w,"TestPingServer: error",!1,E)})}function ns(y,E,w,P,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),P(w)}catch{}}function sr(){this.g=new Qa}function Xs(y){this.i=y.Sb||null,this.h=y.ab||!1}_(Xs,na),Xs.prototype.g=function(){return new oa(this.i,this.h)};function oa(y,E){Rt.call(this),this.H=y,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(oa,Rt),n=oa.prototype,n.open=function(y,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=E,this.readyState=1,As(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(E.body=y),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ir(this)),this.readyState=0},n.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,As(this)),this.g&&(this.readyState=3,As(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ro(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function ro(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}n.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var E=y.value?y.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!y.done}))&&(this.response=this.responseText+=E)}y.done?ir(this):As(this),this.readyState==3&&ro(this)}},n.Oa=function(y){this.g&&(this.response=this.responseText=y,ir(this))},n.Na=function(y){this.g&&(this.response=y,ir(this))},n.ga=function(){this.g&&ir(this)};function ir(y){y.readyState=4,y.l=null,y.j=null,y.B=null,As(y)}n.setRequestHeader=function(y,E){this.A.append(y,E)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],E=this.h.entries();for(var w=E.next();!w.done;)w=w.value,y.push(w[0]+": "+w[1]),w=E.next();return y.join(`\r
`)};function As(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function ss(y){let E="";return Ae(y,function(w,P){E+=P,E+=":",E+=w,E+=`\r
`}),E}function la(y,E,w){e:{for(P in w){var P=!1;break e}P=!0}P||(w=ss(w),typeof y=="string"?w!=null&&yi(w):ft(y,E,w))}function pt(y){Rt.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(pt,Rt);var Zs=/^https?$/i,Ll=["POST","PUT"];n=pt.prototype,n.Fa=function(y){this.H=y},n.ea=function(y,E,w,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);E=E?E.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sl.g(),this.g.onreadystatechange=T(m(this.Ca,this));try{this.B=!0,this.g.open(E,String(y),!0),this.B=!1}catch(se){ca(this,se);return}if(y=w||"",w=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var Q in P)w.set(Q,P[Q]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const se of P.keys())w.set(se,P.get(se));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(w.keys()).find(se=>se.toLowerCase()=="content-type"),Q=c.FormData&&y instanceof c.FormData,!(Array.prototype.indexOf.call(Ll,E,void 0)>=0)||P||Q||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,ve]of w)this.g.setRequestHeader(se,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(se){ca(this,se)}};function ca(y,E){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=E,y.o=5,Ul(y),xi(y)}function Ul(y){y.A||(y.A=!0,tt(y,"complete"),tt(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,tt(this,"complete"),tt(this,"abort"),xi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xi(this,!0)),pt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ua(this):this.Xa())},n.Xa=function(){ua(this)};function ua(y){if(y.h&&typeof o<"u"){if(y.v&&ws(y)==4)setTimeout(y.Ca.bind(y),0);else if(tt(y,"readystatechange"),ws(y)==4){y.h=!1;try{const se=y.ca();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var w;if(!(w=E)){var P;if(P=se===0){let ve=String(y.D).match(lu)[1]||null;!ve&&c.self&&c.self.location&&(ve=c.self.location.protocol.slice(0,-1)),P=!Zs.test(ve?ve.toLowerCase():"")}w=P}if(w)tt(y,"complete"),tt(y,"success");else{y.o=6;try{var Q=ws(y)>2?y.g.statusText:""}catch{Q=""}y.l=Q+" ["+y.ca()+"]",Ul(y)}}finally{xi(y)}}}}function xi(y,E){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const w=y.g;y.g=null,E||tt(y,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ws(y){return y.g?y.g.readyState:0}n.ca=function(){try{return ws(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(y){if(this.g){var E=this.g.responseText;return y&&E.indexOf(y)==0&&(E=E.substring(y.length)),Tl(E)}};function cn(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function vi(y){const E={};y=(y.g&&ws(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<y.length;P++){if(U(y[P]))continue;var w=ru(y[P]);const Q=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const se=E[Q]||[];E[Q]=se,se.push(w)}xe(E,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ei(y,E,w){return w&&w.internalChannelParams&&w.internalChannelParams[y]||E}function rr(y){this.za=0,this.i=[],this.j=new Et,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ei("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ei("baseRetryDelayMs",5e3,y),this.Za=ei("retryDelaySeedMs",1e4,y),this.Ta=ei("forwardChannelMaxRetries",2,y),this.va=ei("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new Al(y&&y.concurrentRequestLimit),this.Ba=new sr,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=rr.prototype,n.ka=8,n.I=1,n.connect=function(y,E,w,P){ge(0),this.W=y,this.H=E||{},w&&P!==void 0&&(this.H.OSID=w,this.H.OAID=P),this.F=this.X,this.J=vu(this,null,this.W),ti(this)};function Vl(y){if(ao(y),y.I==3){var E=y.V++,w=qt(y.J);if(ft(w,"SID",y.M),ft(w,"RID",E),ft(w,"TYPE","terminate"),da(y,w),E=new Ts(y,y.j,E),E.M=2,E.A=ra(qt(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=E.A,w=!0),w||(E.g=bu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Ks(E)}xu(y)}function ar(y){y.g&&(jl(y),y.g.cancel(),y.g=null)}function ao(y){ar(y),y.v&&(c.clearTimeout(y.v),y.v=null),lo(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&c.clearTimeout(y.m),y.m=null)}function ti(y){if(!wl(y.h)&&!y.m){y.m=!0;var E=y.Ea;re||D(),oe||(re(),oe=!0),M.add(E,y),y.D=0}}function oo(y,E){return Js(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=E.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=Ke(m(y.Ea,y,E),yu(y,y.D)),y.D++,!0)}n.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const Q=new Ts(this,this.j,y);let se=this.o;if(this.U&&(se?(se=H(se),Z(se,this.U)):se=this.U),this.u!==null||this.R||(Q.J=se,se=null),this.S)e:{for(var E=0,w=0;w<this.i.length;w++){t:{var P=this.i[w];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(E+=P,E>4096){E=w;break e}if(E===4096||w===this.i.length-1){E=w+1;break e}}E=1e3}else E=1e3;E=hu(this,Q,E),w=qt(this.J),ft(w,"RID",y),ft(w,"CVER",22),this.G&&ft(w,"X-HTTP-Session-Id",this.G),da(this,w),se&&(this.R?E="headers="+yi(ss(se))+"&"+E:this.u&&la(w,this.u,se)),Nl(this.h,Q),this.Ra&&ft(w,"TYPE","init"),this.S?(ft(w,"$req",E),ft(w,"SID","null"),Q.U=!0,qs(Q,w,null)):qs(Q,w,E),this.I=2}}else this.I==3&&(y?Ol(this,y):this.i.length==0||wl(this.h)||Ol(this))};function Ol(y,E){var w;E?w=E.l:w=y.V++;const P=qt(y.J);ft(P,"SID",y.M),ft(P,"RID",w),ft(P,"AID",y.K),da(y,P),y.u&&y.o&&la(P,y.u,y.o),w=new Ts(y,y.j,w,y.D+1),y.u===null&&(w.J=y.o),E&&(y.i=E.G.concat(y.i)),E=hu(y,w,1e3),w.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),Nl(y.h,w),qs(w,P,E)}function da(y,E){y.H&&Ae(y.H,function(w,P){ft(E,P,w)}),y.l&&Ae({},function(w,P){ft(E,P,w)})}function hu(y,E,w){w=Math.min(y.i.length,w);const P=y.l?m(y.l.Ka,y.l,y):null;e:{var Q=y.i;let He=-1;for(;;){const Ot=["count="+w];He==-1?w>0?(He=Q[0].g,Ot.push("ofs="+He)):He=0:Ot.push("ofs="+He);let ot=!0;for(let It=0;It<w;It++){var se=Q[It].g;const is=Q[It].map;if(se-=He,se<0)He=Math.max(0,Q[It].g-100),ot=!1;else try{se="req"+se+"_"||"";try{var ve=is instanceof Map?is:Object.entries(is);for(const[si,Ns]of ve){let Cs=Ns;f(Ns)&&(Cs=vs(Ns)),Ot.push(se+si+"="+encodeURIComponent(Cs))}}catch(si){throw Ot.push(se+"type="+encodeURIComponent("_badmap")),si}}catch{P&&P(is)}}if(ot){ve=Ot.join("&");break e}}ve=void 0}return y=y.i.splice(0,w),E.G=y,ve}function mu(y){if(!y.g&&!y.v){y.Y=1;var E=y.Da;re||D(),oe||(re(),oe=!0),M.add(E,y),y.A=0}}function fa(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=Ke(m(y.Da,y),yu(y,y.A)),y.A++,!0)}n.Da=function(){if(this.v=null,pu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=Ke(m(this.Wa,this),y)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ge(10),ar(this),pu(this))};function jl(y){y.B!=null&&(c.clearTimeout(y.B),y.B=null)}function pu(y){y.g=new Ts(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var E=qt(y.na);ft(E,"RID","rpc"),ft(E,"SID",y.M),ft(E,"AID",y.K),ft(E,"CI",y.F?"0":"1"),!y.F&&y.ia&&ft(E,"TO",y.ia),ft(E,"TYPE","xmlhttp"),da(y,E),y.u&&y.o&&la(E,y.u,y.o),y.O&&(y.g.H=y.O);var w=y.g;y=y.ba,w.M=1,w.A=ra(qt(E)),w.u=null,w.R=!0,Za(w,y)}n.Va=function(){this.C!=null&&(this.C=null,ar(this),fa(this),ge(19))};function lo(y){y.C!=null&&(c.clearTimeout(y.C),y.C=null)}function gu(y,E){var w=null;if(y.g==E){lo(y),jl(y),y.g=null;var P=2}else if(Qs(y.h,E))w=E.G,Cl(y.h,E),P=1;else return;if(y.I!=0){if(E.o)if(P==1){w=E.u?E.u.length:0,E=Date.now()-E.F;var Q=y.D;P=Wi(),tt(P,new Pe(P,w)),ti(y)}else mu(y);else if(Q=E.m,Q==3||Q==0&&E.X>0||!(P==1&&oo(y,E)||P==2&&fa(y)))switch(w&&w.length>0&&(E=y.h,E.i=E.i.concat(w)),Q){case 1:ni(y,5);break;case 4:ni(y,10);break;case 3:ni(y,6);break;default:ni(y,2)}}}function yu(y,E){let w=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(w*=2),w*E}function ni(y,E){if(y.j.info("Error code "+E),E==2){var w=m(y.bb,y),P=y.Ua;const Q=!P;P=new Fn(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||sn(P,"https"),ra(P),Q?Ss(P.toString(),w):Pl(P.toString(),w)}else ge(2);y.I=0,y.l&&y.l.pa(E),xu(y),ao(y)}n.bb=function(y){y?(this.j.info("Successfully pinged google.com"),ge(2)):(this.j.info("Failed to ping google.com"),ge(1))};function xu(y){if(y.I=0,y.ja=[],y.l){const E=Il(y.h);(E.length!=0||y.i.length!=0)&&(N(y.ja,E),N(y.ja,y.i),y.h.i.length=0,A(y.i),y.i.length=0),y.l.oa()}}function vu(y,E,w){var P=w instanceof Fn?qt(w):new Fn(w);if(P.g!="")E&&(P.g=E+"."+P.g),Zi(P,P.u);else{var Q=c.location;P=Q.protocol,E=E?E+"."+Q.hostname:Q.hostname,Q=+Q.port;const se=new Fn(null);P&&sn(se,P),E&&(se.g=E),Q&&Zi(se,Q),w&&(se.h=w),P=se}return w=y.G,E=y.wa,w&&E&&ft(P,w,E),ft(P,"VER",y.ka),da(y,P),P}function bu(y,E,w){if(E&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=y.Aa&&!y.ma?new pt(new Xs({ab:w})):new pt(y.ma),E.Fa(y.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _u(){}n=_u.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function or(){}or.prototype.g=function(y,E){return new An(y,E)};function An(y,E){Rt.call(this),this.g=new rr(E),this.l=y,this.h=E&&E.messageUrlParams||null,y=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(y?y["X-WebChannel-Content-Type"]=E.messageContentType:y={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(y?y["X-WebChannel-Client-Profile"]=E.sa:y={"X-WebChannel-Client-Profile":E.sa}),this.g.U=y,(y=E&&E.Qb)&&!U(y)&&(this.g.u=y),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!U(E)&&(this.g.G=E,y=this.h,y!==null&&E in y&&(y=this.h,E in y&&delete y[E])),this.j=new bi(this)}_(An,Rt),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){Vl(this.g)},An.prototype.o=function(y){var E=this.g;if(typeof y=="string"){var w={};w.__data__=y,y=w}else this.v&&(w={},w.__data__=vs(y),y=w);E.i.push(new Ft(E.Ya++,y)),E.I==3&&ti(E)},An.prototype.N=function(){this.g.l=null,delete this.j,Vl(this.g),delete this.g,An.Z.N.call(this)};function Tu(y){Zt.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var E=y.__sm__;if(E){e:{for(const w in E){y=w;break e}y=void 0}(this.i=y)&&(y=this.i,E=E!==null&&y in E?E[y]:void 0),this.data=E}else this.data=y}_(Tu,Zt);function Eu(){Rn.call(this),this.status=1}_(Eu,Rn);function bi(y){this.g=y}_(bi,_u),bi.prototype.ra=function(){tt(this.g,"a")},bi.prototype.qa=function(y){tt(this.g,new Tu(y))},bi.prototype.pa=function(y){tt(this.g,new Eu)},bi.prototype.oa=function(){tt(this.g,"b")},or.prototype.createWebChannel=or.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,IA=function(){return new or},CA=function(){return Wi()},NA=Mt,Wp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},sa.NO_ERROR=0,sa.TIMEOUT=8,sa.HTTP_ERROR=6,qd=sa,El.COMPLETE="complete",wA=El,bs.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,Nc=bs,pt.prototype.listenOnce=pt.prototype.K,pt.prototype.getLastError=pt.prototype.Ha,pt.prototype.getLastErrorCode=pt.prototype.ya,pt.prototype.getStatus=pt.prototype.ca,pt.prototype.getResponseJson=pt.prototype.La,pt.prototype.getResponseText=pt.prototype.la,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Fa,AA=pt}).apply(typeof Dd<"u"?Dd:typeof self<"u"?self:typeof window<"u"?window:{});const NT="@firebase/firestore",CT="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=new kg("@firebase/firestore");function Bo(){return ja.logLevel}function we(n,...e){if(ja.logLevel<=We.DEBUG){const t=e.map(zg);ja.debug(`Firestore (${gl}): ${n}`,...t)}}function Fi(n,...e){if(ja.logLevel<=We.ERROR){const t=e.map(zg);ja.error(`Firestore (${gl}): ${n}`,...t)}}function sl(n,...e){if(ja.logLevel<=We.WARN){const t=e.map(zg);ja.warn(`Firestore (${gl}): ${n}`,...t)}}function zg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,kA(n,s,t)}function kA(n,e,t){let s=`FIRESTORE (${gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Fi(s),new Error(s)}function ut(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||kA(e,a,s)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Ji{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(bn.UNAUTHENTICATED)))}shutdown(){}}class ML{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class DL{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ut(this.o===void 0,42304);let s=this.i;const a=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let o=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Gi,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=o;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},f=p=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Gi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ut(typeof s.accessToken=="string",31837,{l:s}),new RA(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new bn(e)}}class PL{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LL{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new PL(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class IT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UL{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ds(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ut(this.o===void 0,3512);const s=o=>{o.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,we("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>s(o)))};const a=o=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>a(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new IT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ut(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new IT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=VL(40);for(let o=0;o<a.length;++o)s.length<20&&a[o]<t&&(s+=e.charAt(a[o]%62))}return s}}function Xe(n,e){return n<e?-1:n>e?1:0}function Xp(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const a=n.charAt(s),o=e.charAt(s);if(a!==o)return bp(a)===bp(o)?Xe(a,o):bp(a)?1:-1}return Xe(n.length,e.length)}const OL=55296,jL=57343;function bp(n){const e=n.charCodeAt(0);return e>=OL&&e<=jL}function il(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="__name__";class li{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ue(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ue(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return li.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof li?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const o=li.compareSegments(e.get(a),t.get(a));if(o!==0)return o}return Xe(e.length,t.length)}static compareSegments(e,t){const s=li.isNumericId(e),a=li.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?li.extractNumericId(e).compare(li.extractNumericId(t)):Xp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jr.fromString(e.substring(4,e.length-2))}}class Tt extends li{construct(e,t,s){return new Tt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ee(de.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new Tt(t)}static emptyPath(){return new Tt([])}}const GL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends li{construct(e,t,s){return new pn(e,t,s)}static isValidIdentifier(e){return GL.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kT}static keyField(){return new pn([kT])}static fromServerFormat(e){const t=[];let s="",a=0;const o=()=>{if(s.length===0)throw new Ee(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new Ee(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ee(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(s+=f,a++):(o(),a++)}if(o(),c)throw new Ee(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(t)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.path=e}static fromPath(e){return new De(Tt.fromString(e))}static fromName(e){return new De(Tt.fromString(e).popFirst(5))}static empty(){return new De(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(n,e,t){if(!t)throw new Ee(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function BL(n,e,t,s){if(e===!0&&s===!0)throw new Ee(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function RT(n){if(!De.isDocumentKey(n))throw new Ee(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function MT(n){if(De.isDocumentKey(n))throw new Ee(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function DA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Hf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ue(12329,{type:typeof n})}function js(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hf(n);throw new Ee(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Zc(n,e){if(!DA(n))throw new Ee(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,o="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(a&&typeof c!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${s}' field to equal '${o.value}'`;break}}if(t)throw new Ee(de.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=-62135596800,PT=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*PT);return new wt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<DT)throw new Ee(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/PT}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zc(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-DT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:Xt("string",wt._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new wt(0,0))}static max(){return new je(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=-1;function HL(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=je.fromTimestamp(s===1e9?new wt(t+1,0):new wt(t,s));return new Hr(a,De.empty(),e)}function zL(n){return new Hr(n.readTime,n.key,Gc)}class Hr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Hr(je.min(),De.empty(),Gc)}static max(){return new Hr(je.max(),De.empty(),Gc)}}function FL(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=De.comparator(n.documentKey,e.documentKey),t!==0?t:Xe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==qL)throw n;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me(((s,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,a)},this.catchCallback=o=>{this.wrapFailure(t,o).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):me.reject(t)}static resolve(e){return new me(((t,s)=>{t(e)}))}static reject(e){return new me(((t,s)=>{s(e)}))}static waitFor(e){return new me(((t,s)=>{let a=0,o=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++o,c&&o===a&&t()}),(p=>s(p)))})),c=!0,o===a&&t()}))}static or(e){let t=me.resolve(!1);for(const s of e)t=t.next((a=>a?me.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,o)=>{s.push(t.call(this,a,o))})),this.waitFor(s)}static mapArray(e,t){return new me(((s,a)=>{const o=e.length,c=new Array(o);let f=0;for(let p=0;p<o;p++){const m=p;t(e[m]).next((v=>{c[m]=v,++f,f===o&&s(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new me(((s,a)=>{const o=()=>{e()===!0?t().next((()=>{o()}),a):s()};o()}))}}function $L(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg=-1;function Ff(n){return n==null}function mf(n){return n===0&&1/n==-1/0}function YL(n){return typeof n=="number"&&Number.isInteger(n)&&!mf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="";function JL(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=LT(e)),e=QL(n.get(t),e);return LT(e)}function QL(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const o=n.charAt(a);switch(o){case"\0":t+="";break;case PA:t+="";break;default:t+=o}}return t}function LT(n){return n+PA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function LA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new Dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pd(this.root,e,this.comparator,!0)}}class Pd{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?s(e.key,t):1,t&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,s,a,o){this.key=e,this.value=t,this.color=s??mn.RED,this.left=a??mn.EMPTY,this.right=o??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,o){return new mn(e??this.key,t??this.value,s??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const o=s(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,t,s),null):o===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return mn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,t,s,a,o){return this}insert(e,t,s){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new VT(this.data.getIterator())}getIteratorFrom(e){return new VT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=s.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new tn(this.comparator);return t.data=e,t}}class VT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new Xn([])}unionWith(e){let t=new tn(pn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Xn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return il(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new UA("Invalid base64 string: "+o):o}})(e);return new yn(t)}static fromUint8Array(e){const t=(function(a){let o="";for(let c=0;c<a.length;++c)o+=String.fromCharCode(a[c]);return o})(e);return new yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const WL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(n){if(ut(!!n,39018),typeof n=="string"){let e=0;const t=WL.exec(n);if(ut(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Bt(n.seconds),nanos:Bt(n.nanos)}}function Bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fr(n){return typeof n=="string"?yn.fromBase64String(n):yn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="server_timestamp",OA="__type__",jA="__previous_value__",GA="__local_write_time__";function Kg(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[OA])==null?void 0:s.stringValue)===VA}function qf(n){const e=n.mapValue.fields[jA];return Kg(e)?qf(e):e}function Bc(n){const e=zr(n.mapValue.fields[GA].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,t,s,a,o,c,f,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const pf="(default)";class Hc{constructor(e,t){this.projectId=e,this.database=t||pf}static empty(){return new Hc("","")}get isDefaultDatabase(){return this.database===pf}isEqual(e){return e instanceof Hc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="__type__",ZL="__max__",Ld={mapValue:{}},HA="__vector__",gf="value";function qr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Kg(n)?4:tU(n)?9007199254740991:eU(n)?10:11:Ue(28295,{value:n})}function pi(n,e){if(n===e)return!0;const t=qr(n);if(t!==qr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bc(n).isEqual(Bc(e));case 3:return(function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const c=zr(a.timestampValue),f=zr(o.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,o){return Fr(a.bytesValue).isEqual(Fr(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,o){return Bt(a.geoPointValue.latitude)===Bt(o.geoPointValue.latitude)&&Bt(a.geoPointValue.longitude)===Bt(o.geoPointValue.longitude)})(n,e);case 2:return(function(a,o){if("integerValue"in a&&"integerValue"in o)return Bt(a.integerValue)===Bt(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const c=Bt(a.doubleValue),f=Bt(o.doubleValue);return c===f?mf(c)===mf(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return il(n.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:case 11:return(function(a,o){const c=a.mapValue.fields||{},f=o.mapValue.fields||{};if(UT(c)!==UT(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!pi(c[p],f[p])))return!1;return!0})(n,e);default:return Ue(52216,{left:n})}}function zc(n,e){return(n.values||[]).find((t=>pi(t,e)))!==void 0}function rl(n,e){if(n===e)return 0;const t=qr(n),s=qr(e);if(t!==s)return Xe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xe(n.booleanValue,e.booleanValue);case 2:return(function(o,c){const f=Bt(o.integerValue||o.doubleValue),p=Bt(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(n,e);case 3:return OT(n.timestampValue,e.timestampValue);case 4:return OT(Bc(n),Bc(e));case 5:return Xp(n.stringValue,e.stringValue);case 6:return(function(o,c){const f=Fr(o),p=Fr(c);return f.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(o,c){const f=o.split("/"),p=c.split("/");for(let m=0;m<f.length&&m<p.length;m++){const v=Xe(f[m],p[m]);if(v!==0)return v}return Xe(f.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,c){const f=Xe(Bt(o.latitude),Bt(c.latitude));return f!==0?f:Xe(Bt(o.longitude),Bt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return jT(n.arrayValue,e.arrayValue);case 10:return(function(o,c){var T,A,N,C;const f=o.fields||{},p=c.fields||{},m=(T=f[gf])==null?void 0:T.arrayValue,v=(A=p[gf])==null?void 0:A.arrayValue,_=Xe(((N=m==null?void 0:m.values)==null?void 0:N.length)||0,((C=v==null?void 0:v.values)==null?void 0:C.length)||0);return _!==0?_:jT(m,v)})(n.mapValue,e.mapValue);case 11:return(function(o,c){if(o===Ld.mapValue&&c===Ld.mapValue)return 0;if(o===Ld.mapValue)return 1;if(c===Ld.mapValue)return-1;const f=o.fields||{},p=Object.keys(f),m=c.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let _=0;_<p.length&&_<v.length;++_){const T=Xp(p[_],v[_]);if(T!==0)return T;const A=rl(f[p[_]],m[v[_]]);if(A!==0)return A}return Xe(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Ue(23264,{he:t})}}function OT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Xe(n,e);const t=zr(n),s=zr(e),a=Xe(t.seconds,s.seconds);return a!==0?a:Xe(t.nanos,s.nanos)}function jT(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const o=rl(t[a],s[a]);if(o)return o}return Xe(t.length,s.length)}function al(n){return Zp(n)}function Zp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=zr(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Fr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return De.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const o of t.values||[])a?a=!1:s+=",",s+=Zp(o);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",o=!0;for(const c of s)o?o=!1:a+=",",a+=`${c}:${Zp(t.fields[c])}`;return a+"}"})(n.mapValue):Ue(61005,{value:n})}function Kd(n){switch(qr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qf(n);return e?16+Kd(e):16;case 5:return 2*n.stringValue.length;case 6:return Fr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,o)=>a+Kd(o)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return Wr(s.fields,((o,c)=>{a+=o.length+Kd(c)})),a})(n.mapValue);default:throw Ue(13486,{value:n})}}function GT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function eg(n){return!!n&&"integerValue"in n}function $g(n){return!!n&&"arrayValue"in n}function BT(n){return!!n&&"nullValue"in n}function HT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $d(n){return!!n&&"mapValue"in n}function eU(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[BA])==null?void 0:s.stringValue)===HA}function Dc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Wr(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Dc(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dc(n.arrayValue.values[t]);return e}return{...n}}function tU(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ZL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.value=e}static empty(){return new Gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!$d(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dc(t)}setAll(e){let t=pn.emptyPath(),s={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,s,a),s={},a=[],t=f.popLast()}c?s[f.lastSegment()]=Dc(c):a.push(f.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,s,a)}delete(e){const t=this.field(e.popLast());$d(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];$d(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Wr(t,((a,o)=>e[a]=o));for(const a of s)delete e[a]}clone(){return new Gn(Dc(this.value))}}function zA(n){const e=[];return Wr(n.fields,((t,s)=>{const a=new pn([t]);if($d(s)){const o=zA(s.mapValue).fields;if(o.length===0)e.push(a);else for(const c of o)e.push(a.child(c))}else e.push(a)})),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t,s,a,o,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=o,this.data=c,this.documentState=f}static newInvalidDocument(e){return new _n(e,0,je.min(),je.min(),je.min(),Gn.empty(),0)}static newFoundDocument(e,t,s,a){return new _n(e,1,t,je.min(),s,a,0)}static newNoDocument(e,t){return new _n(e,2,t,je.min(),je.min(),Gn.empty(),0)}static newUnknownDocument(e,t){return new _n(e,3,t,je.min(),je.min(),Gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t){this.position=e,this.inclusive=t}}function zT(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const o=e[a],c=n.position[a];if(o.field.isKeyField()?s=De.comparator(De.fromName(c.referenceValue),t.key):s=rl(c,t.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function FT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t="asc"){this.field=e,this.dir=t}}function nU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{}class Wt extends FA{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new iU(e,t,s):t==="array-contains"?new oU(e,s):t==="in"?new lU(e,s):t==="not-in"?new cU(e,s):t==="array-contains-any"?new uU(e,s):new Wt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new rU(e,s):new aU(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(rl(t,this.value)):t!==null&&qr(this.value)===qr(t)&&this.matchesComparison(rl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gs extends FA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Gs(e,t)}matches(e){return qA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qA(n){return n.op==="and"}function KA(n){return sU(n)&&qA(n)}function sU(n){for(const e of n.filters)if(e instanceof Gs)return!1;return!0}function tg(n){if(n instanceof Wt)return n.field.canonicalString()+n.op.toString()+al(n.value);if(KA(n))return n.filters.map((e=>tg(e))).join(",");{const e=n.filters.map((t=>tg(t))).join(",");return`${n.op}(${e})`}}function $A(n,e){return n instanceof Wt?(function(s,a){return a instanceof Wt&&s.op===a.op&&s.field.isEqual(a.field)&&pi(s.value,a.value)})(n,e):n instanceof Gs?(function(s,a){return a instanceof Gs&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((o,c,f)=>o&&$A(c,a.filters[f])),!0):!1})(n,e):void Ue(19439)}function YA(n){return n instanceof Wt?(function(t){return`${t.field.canonicalString()} ${t.op} ${al(t.value)}`})(n):n instanceof Gs?(function(t){return t.op.toString()+" {"+t.getFilters().map(YA).join(" ,")+"}"})(n):"Filter"}class iU extends Wt{constructor(e,t,s){super(e,t,s),this.key=De.fromName(s.referenceValue)}matches(e){const t=De.comparator(e.key,this.key);return this.matchesComparison(t)}}class rU extends Wt{constructor(e,t){super(e,"in",t),this.keys=JA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class aU extends Wt{constructor(e,t){super(e,"not-in",t),this.keys=JA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function JA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>De.fromName(s.referenceValue)))}class oU extends Wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $g(t)&&zc(t.arrayValue,this.value)}}class lU extends Wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&zc(this.value.arrayValue,t)}}class cU extends Wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!zc(this.value.arrayValue,t)}}class uU extends Wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$g(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>zc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,t=null,s=[],a=[],o=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=o,this.startAt=c,this.endAt=f,this.Te=null}}function qT(n,e=null,t=[],s=[],a=null,o=null,c=null){return new dU(n,e,t,s,a,o,c)}function Yg(n){const e=Be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>tg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(o){return o.field.canonicalString()+o.dir})(s))).join(","),Ff(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>al(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>al(s))).join(",")),e.Te=t}return e.Te}function Jg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$A(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!FT(n.startAt,e.startAt)&&FT(n.endAt,e.endAt)}function ng(n){return De.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,t=null,s=[],a=[],o=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=o,this.limitType=c,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function fU(n,e,t,s,a,o,c,f){return new vl(n,e,t,s,a,o,c,f)}function Qg(n){return new vl(n)}function KT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function QA(n){return n.collectionGroup!==null}function Pc(n){const e=Be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new tn(pn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(f=f.add(m.field))}))})),f})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Fc(o,s))})),t.has(pn.keyField().canonicalString())||e.Ie.push(new Fc(pn.keyField(),s))}return e.Ie}function ui(n){const e=Be(n);return e.Ee||(e.Ee=hU(e,Pc(n))),e.Ee}function hU(n,e){if(n.limitType==="F")return qT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const o=a.dir==="desc"?"asc":"desc";return new Fc(a.field,o)}));const t=n.endAt?new yf(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new yf(n.startAt.position,n.startAt.inclusive):null;return qT(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function sg(n,e){const t=n.filters.concat([e]);return new vl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ig(n,e,t){return new vl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kf(n,e){return Jg(ui(n),ui(e))&&n.limitType===e.limitType}function WA(n){return`${Yg(ui(n))}|lt:${n.limitType}`}function Ho(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>YA(a))).join(", ")}]`),Ff(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>al(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>al(a))).join(",")),`Target(${s})`})(ui(n))}; limitType=${n.limitType})`}function $f(n,e){return e.isFoundDocument()&&(function(s,a){const o=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):De.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)})(n,e)&&(function(s,a){for(const o of Pc(s))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const o of s.filters)if(!o.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(c,f,p){const m=zT(c,f,p);return c.inclusive?m<=0:m<0})(s.startAt,Pc(s),a)||s.endAt&&!(function(c,f,p){const m=zT(c,f,p);return c.inclusive?m>=0:m>0})(s.endAt,Pc(s),a))})(n,e)}function mU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function XA(n){return(e,t)=>{let s=!1;for(const a of Pc(n)){const o=pU(a,e,t);if(o!==0)return o;s=s||a.field.isKeyField()}return 0}}function pU(n,e,t){const s=n.field.isKeyField()?De.comparator(e.key,t.key):(function(o,c,f){const p=c.data.field(o),m=f.data.field(o);return p!==null&&m!==null?rl(p,m):Ue(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ue(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,o]of s)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Wr(this.inner,((t,s)=>{for(const[a,o]of s)e(a,o)}))}isEmpty(){return LA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU=new Dt(De.comparator);function qi(){return gU}const ZA=new Dt(De.comparator);function Cc(...n){let e=ZA;for(const t of n)e=e.insert(t.key,t);return e}function ew(n){let e=ZA;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Da(){return Lc()}function tw(){return Lc()}function Lc(){return new Fa((n=>n.toString()),((n,e)=>n.isEqual(e)))}const yU=new Dt(De.comparator),xU=new tn(De.comparator);function Ze(...n){let e=xU;for(const t of n)e=e.add(t);return e}const vU=new tn(Xe);function bU(){return vU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mf(e)?"-0":e}}function nw(n){return{integerValue:""+n}}function _U(n,e){return YL(e)?nw(e):Wg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this._=void 0}}function TU(n,e,t){return n instanceof xf?(function(a,o){const c={fields:{[OA]:{stringValue:VA},[GA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&Kg(o)&&(o=qf(o)),o&&(c.fields[jA]=o),{mapValue:c}})(t,e):n instanceof qc?iw(n,e):n instanceof Kc?rw(n,e):(function(a,o){const c=sw(a,o),f=$T(c)+$T(a.Ae);return eg(c)&&eg(a.Ae)?nw(f):Wg(a.serializer,f)})(n,e)}function EU(n,e,t){return n instanceof qc?iw(n,e):n instanceof Kc?rw(n,e):t}function sw(n,e){return n instanceof vf?(function(s){return eg(s)||(function(o){return!!o&&"doubleValue"in o})(s)})(e)?e:{integerValue:0}:null}class xf extends Yf{}class qc extends Yf{constructor(e){super(),this.elements=e}}function iw(n,e){const t=aw(e);for(const s of n.elements)t.some((a=>pi(a,s)))||t.push(s);return{arrayValue:{values:t}}}class Kc extends Yf{constructor(e){super(),this.elements=e}}function rw(n,e){let t=aw(e);for(const s of n.elements)t=t.filter((a=>!pi(a,s)));return{arrayValue:{values:t}}}class vf extends Yf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function $T(n){return Bt(n.integerValue||n.doubleValue)}function aw(n){return $g(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function SU(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof qc&&a instanceof qc||s instanceof Kc&&a instanceof Kc?il(s.elements,a.elements,pi):s instanceof vf&&a instanceof vf?pi(s.Ae,a.Ae):s instanceof xf&&a instanceof xf})(n.transform,e.transform)}class AU{constructor(e,t){this.version=e,this.transformResults=t}}class ps{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ps}static exists(e){return new ps(void 0,e)}static updateTime(e){return new ps(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Jf{}function ow(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Xg(n.key,ps.none()):new eu(n.key,n.data,ps.none());{const t=n.data,s=Gn.empty();let a=new tn(pn.comparator);for(let o of e.fields)if(!a.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?s.delete(o):s.set(o,c),a=a.add(o)}return new Xr(n.key,s,new Xn(a.toArray()),ps.none())}}function wU(n,e,t){n instanceof eu?(function(a,o,c){const f=a.value.clone(),p=JT(a.fieldTransforms,o,c.transformResults);f.setAll(p),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Xr?(function(a,o,c){if(!Yd(a.precondition,o))return void o.convertToUnknownDocument(c.version);const f=JT(a.fieldTransforms,o,c.transformResults),p=o.data;p.setAll(lw(a)),p.setAll(f),o.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(a,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Uc(n,e,t,s){return n instanceof eu?(function(o,c,f,p){if(!Yd(o.precondition,c))return f;const m=o.value.clone(),v=QT(o.fieldTransforms,p,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof Xr?(function(o,c,f,p){if(!Yd(o.precondition,c))return f;const m=QT(o.fieldTransforms,p,c),v=c.data;return v.setAll(lw(o)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),f===null?null:f.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(n,e,t,s):(function(o,c,f){return Yd(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function NU(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),o=sw(s.transform,a||null);o!=null&&(t===null&&(t=Gn.empty()),t.set(s.field,o))}return t||null}function YT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&il(s,a,((o,c)=>SU(o,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class eu extends Jf{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Xr extends Jf{constructor(e,t,s,a,o=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function lw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function JT(n,e,t){const s=new Map;ut(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const o=n[a],c=o.transform,f=e.data.field(o.field);s.set(o.field,EU(c,f,t[a]))}return s}function QT(n,e,t){const s=new Map;for(const a of n){const o=a.transform,c=t.data.field(a.field);s.set(a.field,TU(o,c,e))}return s}class Xg extends Jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CU extends Jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&wU(o,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Uc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Uc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=tw();return this.mutations.forEach((a=>{const o=e.get(a.key),c=o.overlayedDocument;let f=this.applyToLocalView(c,o.mutatedFields);f=t.has(a.key)?null:f;const p=ow(c,f);p!==null&&s.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(je.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&il(this.mutations,e.mutations,((t,s)=>YT(t,s)))&&il(this.baseMutations,e.baseMutations,((t,s)=>YT(t,s)))}}class Zg{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){ut(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return yU})();const o=e.mutations;for(let c=0;c<o.length;c++)a=a.insert(o[c].key,s[c].version);return new Zg(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,st;function MU(n){switch(n){case de.OK:return Ue(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Ue(15467,{code:n})}}function cw(n){if(n===void 0)return Fi("GRPC error has no .code"),de.UNKNOWN;switch(n){case Qt.OK:return de.OK;case Qt.CANCELLED:return de.CANCELLED;case Qt.UNKNOWN:return de.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return de.INTERNAL;case Qt.UNAVAILABLE:return de.UNAVAILABLE;case Qt.UNAUTHENTICATED:return de.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case Qt.NOT_FOUND:return de.NOT_FOUND;case Qt.ALREADY_EXISTS:return de.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return de.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case Qt.ABORTED:return de.ABORTED;case Qt.OUT_OF_RANGE:return de.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return de.UNIMPLEMENTED;case Qt.DATA_LOSS:return de.DATA_LOSS;default:return Ue(39323,{code:n})}}(st=Qt||(Qt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=new jr([4294967295,4294967295],0);function WT(n){const e=DU().encode(n),t=new SA;return t.update(e),new Uint8Array(t.digest())}function XT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new jr([t,s],0),new jr([a,o],0)]}class e0{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ic(`Invalid padding: ${t}`);if(s<0)throw new Ic(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ic(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ic(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=jr.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(jr.fromNumber(s)));return a.compare(PU)===1&&(a=new jr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=WT(e),[s,a]=XT(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(s,a,o);if(!this.we(c))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new e0(o,a,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=WT(e),[s,a]=XT(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(s,a,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t,s,a,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,tu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Qf(je.min(),a,new Dt(Xe),qi(),Ze())}}class tu{constructor(e,t,s,a,o){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new tu(s,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class uw{constructor(e,t){this.targetId=e,this.Ce=t}}class dw{constructor(e,t,s=yn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class ZT{constructor(){this.ve=0,this.Fe=eE(),this.Me=yn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),s=Ze();return this.Fe.forEach(((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ue(38017,{changeType:o})}})),new tu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=eE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ut(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LU{constructor(e){this.Ge=e,this.ze=new Map,this.je=qi(),this.Je=Ud(),this.He=Ud(),this.Ye=new Dt(Xe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ue(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const o=a.target;if(ng(o))if(s===0){const c=new De(o.path);this.et(t,c,_n.newNoDocument(c,je.min()))}else ut(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const f=this.ut(e),p=f?this.ct(f,e,c):1;if(p!==0){this.it(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:o=0}=t;let c,f;try{c=Fr(s).toUint8Array()}catch(p){if(p instanceof UA)return sl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new e0(c,a,o)}catch(p){return sl(p instanceof Ic?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((o=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(f)||(this.et(t,o,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const f=this.ot(c);if(f){if(o.current&&ng(f.target)){const p=new De(f.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,_n.newNoDocument(p,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let s=Ze();this.He.forEach(((o,c)=>{let f=!0;c.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const a=new Qf(e,t,this.Ye,this.je,s);return this.je=qi(),this.Je=Ud(),this.He=Ud(),this.Ye=new Dt(Xe),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ZT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new tn(Xe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new tn(Xe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||we("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ZT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ud(){return new Dt(De.comparator)}function eE(){return new Dt(De.comparator)}const UU={asc:"ASCENDING",desc:"DESCENDING"},VU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OU={and:"AND",or:"OR"};class jU{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rg(n,e){return n.useProto3Json||Ff(e)?e:{value:e}}function bf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function GU(n,e){return bf(n,e.toTimestamp())}function di(n){return ut(!!n,49232),je.fromTimestamp((function(t){const s=zr(t);return new wt(s.seconds,s.nanos)})(n))}function t0(n,e){return ag(n,e).canonicalString()}function ag(n,e){const t=(function(a){return new Tt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function hw(n){const e=Tt.fromString(n);return ut(xw(e),10190,{key:e.toString()}),e}function og(n,e){return t0(n.databaseId,e.path)}function _p(n,e){const t=hw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new De(pw(t))}function mw(n,e){return t0(n.databaseId,e)}function BU(n){const e=hw(n);return e.length===4?Tt.emptyPath():pw(e)}function lg(n){return new Tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pw(n){return ut(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function tE(n,e,t){return{name:og(n,e),fields:t.value.mapValue.fields}}function HU(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ue(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=(function(m,v){return m.useProto3Json?(ut(v===void 0||typeof v=="string",58123),yn.fromBase64String(v||"")):(ut(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),yn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(m){const v=m.code===void 0?de.UNKNOWN:cw(m.code);return new Ee(v,m.message||"")})(c);t=new dw(s,a,o,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=_p(n,s.document.name),o=di(s.document.updateTime),c=s.document.createTime?di(s.document.createTime):je.min(),f=new Gn({mapValue:{fields:s.document.fields}}),p=_n.newFoundDocument(a,o,c,f),m=s.targetIds||[],v=s.removedTargetIds||[];t=new Jd(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=_p(n,s.document),o=s.readTime?di(s.readTime):je.min(),c=_n.newNoDocument(a,o),f=s.removedTargetIds||[];t=new Jd([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=_p(n,s.document),o=s.removedTargetIds||[];t=new Jd([],o,a,null)}else{if(!("filter"in e))return Ue(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:o}=s,c=new RU(a,o),f=s.targetId;t=new uw(f,c)}}return t}function zU(n,e){let t;if(e instanceof eu)t={update:tE(n,e.key,e.value)};else if(e instanceof Xg)t={delete:og(n,e.key)};else if(e instanceof Xr)t={update:tE(n,e.key,e.data),updateMask:XU(e.fieldMask)};else{if(!(e instanceof CU))return Ue(16599,{Vt:e.type});t={verify:og(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(o,c){const f=c.transform;if(f instanceof xf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof qc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Kc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof vf)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Ue(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,o){return o.updateTime!==void 0?{updateTime:GU(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ue(27497)})(n,e.precondition)),t}function FU(n,e){return n&&n.length>0?(ut(e!==void 0,14353),n.map((t=>(function(a,o){let c=a.updateTime?di(a.updateTime):di(o);return c.isEqual(je.min())&&(c=di(o)),new AU(c,a.transformResults||[])})(t,e)))):[]}function qU(n,e){return{documents:[mw(n,e.path)]}}function KU(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=mw(n,a);const o=(function(m){if(m.length!==0)return yw(Gs.create(m,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(m){if(m.length!==0)return m.map((v=>(function(T){return{field:zo(T.field),direction:JU(T.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=rg(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:a}}function $U(n){let e=BU(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){ut(s===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let o=[];t.where&&(o=(function(_){const T=gw(_);return T instanceof Gs&&KA(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(_){return _.map((T=>(function(N){return new Fc(Fo(N.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(T)))})(t.orderBy));let f=null;t.limit&&(f=(function(_){let T;return T=typeof _=="object"?_.value:_,Ff(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(_){const T=!!_.before,A=_.values||[];return new yf(A,T)})(t.startAt));let m=null;return t.endAt&&(m=(function(_){const T=!_.before,A=_.values||[];return new yf(A,T)})(t.endAt)),fU(e,a,c,o,f,"F",p,m)}function YU(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function gw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Fo(t.unaryFilter.field);return Wt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Fo(t.unaryFilter.field);return Wt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Fo(t.unaryFilter.field);return Wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Fo(t.unaryFilter.field);return Wt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Wt.create(Fo(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Gs.create(t.compositeFilter.filters.map((s=>gw(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}})(t.compositeFilter.op))})(n):Ue(30097,{filter:n})}function JU(n){return UU[n]}function QU(n){return VU[n]}function WU(n){return OU[n]}function zo(n){return{fieldPath:n.canonicalString()}}function Fo(n){return pn.fromServerFormat(n.fieldPath)}function yw(n){return n instanceof Wt?(function(t){if(t.op==="=="){if(HT(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NAN"}};if(BT(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(HT(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NAN"}};if(BT(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(t.field),op:QU(t.op),value:t.value}}})(n):n instanceof Gs?(function(t){const s=t.getFilters().map((a=>yw(a)));return s.length===1?s[0]:{compositeFilter:{op:WU(t.op),filters:s}}})(n):Ue(54877,{filter:n})}function XU(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,t,s,a,o=je.min(),c=je.min(),f=yn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e){this.yt=e}}function e3(n){const e=$U({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ig(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(){this.Cn=new n3}addToCollectionParentIndex(e,t){return this.Cn.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(Hr.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(Hr.min())}updateCollectionGroup(e,t,s){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class n3{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new tn(Tt.comparator),o=!a.has(s);return this.index[t]=a.add(s),o}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new tn(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vw=41943040;class jn{static withCacheSize(e){return new jn(e,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(vw,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ol(0)}static cr(){return new ol(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="LruGarbageCollector",s3=1048576;function iE([n,e],[t,s]){const a=Xe(n,t);return a===0?Xe(e,s):a}class i3{constructor(e){this.Ir=e,this.buffer=new tn(iE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();iE(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class r3{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){we(sE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xl(t)?we(sE,"Ignoring IndexedDB error during garbage collection: ",t):await yl(t)}await this.Vr(3e5)}))}}class a3{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return me.resolve(zf.ce);const s=new i3(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(nE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,o,c,f,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,c=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(s=_,f=Date.now(),this.removeTargets(e,s,t)))).next((_=>(o=_,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(m=Date.now(),Bo()<=We.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${o} targets in `+(p-f)+`ms
	Removed ${_} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:_}))))}}function o3(n,e){return new a3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(){this.changes=new Fa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?me.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&Uc(s.mutation,a,Xn.empty(),wt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ze()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ze()){const a=Da();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((o=>{let c=Cc();return o.forEach(((f,p)=>{c=c.insert(f,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Da();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ze())))}populateOverlays(e,t,s){const a=[];return s.forEach((o=>{t.has(o)||a.push(o)})),this.documentOverlayCache.getOverlays(e,a).next((o=>{o.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,a){let o=qi();const c=Lc(),f=(function(){return Lc()})();return t.forEach(((p,m)=>{const v=s.get(m.key);a.has(m.key)&&(v===void 0||v.mutation instanceof Xr)?o=o.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),Uc(v.mutation,m,v.mutation.getFieldMask(),wt.now())):c.set(m.key,Xn.empty())})),this.recalculateAndSaveOverlays(e,o).next((p=>(p.forEach(((m,v)=>c.set(m,v))),t.forEach(((m,v)=>f.set(m,new c3(v,c.get(m)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Lc();let a=new Dt(((c,f)=>c-f)),o=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=s.get(p)||Xn.empty();v=f.applyToLocalView(m,v),s.set(p,v);const _=(a.get(f.batchId)||Ze()).add(p);a=a.insert(f.batchId,_)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),m=p.key,v=p.value,_=tw();v.forEach((T=>{if(!o.has(T)){const A=ow(t.get(T),s.get(T));A!==null&&_.set(T,A),o=o.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,_))}return me.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(c){return De.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):QA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((o=>{const c=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-o.size):me.resolve(Da());let f=Gc,p=o;return c.next((m=>me.forEach(m,((v,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),o.get(v)?me.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{p=p.insert(v,T)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,p,m,Ze()))).next((v=>({batchId:f,changes:ew(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new De(t)).next((s=>{let a=Cc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const o=t.collectionGroup;let c=Cc();return this.indexManager.getCollectionParents(e,o).next((f=>me.forEach(f,(p=>{const m=(function(_,T){return new vl(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,p.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,s,a).next((v=>{v.forEach(((_,T)=>{c=c.insert(_,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,o,a)))).next((c=>{o.forEach(((p,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,_n.newInvalidDocument(v)))}));let f=Cc();return c.forEach(((p,m)=>{const v=o.get(p);v!==void 0&&Uc(v.mutation,m,Xn.empty(),wt.now()),$f(t,m)&&(f=f.insert(p,m))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return me.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:di(a.createTime)}})(t)),me.resolve()}getNamedQuery(e,t){return me.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:e3(a.bundledQuery),readTime:di(a.readTime)}})(t)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(){this.overlays=new Dt(De.comparator),this.qr=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Da();return me.forEach(t,(a=>this.getOverlay(e,a).next((o=>{o!==null&&s.set(a,o)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,o)=>{this.St(e,t,o)})),me.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(s)),me.resolve()}getOverlaysForCollection(e,t,s){const a=Da(),o=t.length+1,c=new De(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&p.largestBatchId>s&&a.set(p.getKey(),p)}return me.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let o=new Dt(((m,v)=>m-v));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=o.get(m.largestBatchId);v===null&&(v=Da(),o=o.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const f=Da(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>f.set(m,v))),!(f.size()>=a)););return me.resolve(f)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new kU(t,s));let o=this.qr.get(t);o===void 0&&(o=Ze(),this.qr.set(t,o)),this.qr.set(t,o.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(){this.Qr=new tn(an.$r),this.Ur=new tn(an.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new an(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new an(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new De(new Tt([])),s=new an(t,e),a=new an(t,e+1),o=[];return this.Ur.forEachInRange([s,a],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new De(new Tt([])),s=new an(t,e),a=new an(t,e+1);let o=Ze();return this.Ur.forEachInRange([s,a],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new an(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class an{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return De.comparator(e.key,t.key)||Xe(e.Yr,t.Yr)}static Kr(e,t){return Xe(e.Yr,t.Yr)||De.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new tn(an.$r)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new IU(o,t,s,a);this.mutationQueue.push(c);for(const f of a)this.Zr=this.Zr.add(new an(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return me.resolve(c)}lookupMutationBatch(e,t){return me.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),o=a<0?0:a;return me.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?qg:this.tr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new an(t,0),a=new an(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([s,a],(c=>{const f=this.Xr(c.Yr);o.push(f)})),me.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new tn(Xe);return t.forEach((a=>{const o=new an(a,0),c=new an(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(f=>{s=s.add(f.Yr)}))})),me.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let o=s;De.isDocumentKey(o)||(o=o.child(""));const c=new an(new De(o),0);let f=new tn(Xe);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===a&&(f=f.add(p.Yr)),!0)}),c),me.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){ut(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return me.forEach(t.mutations,(a=>{const o=new an(a.key,t.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new an(t,0),a=this.Zr.firstAfterOrEqual(s);return me.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.ri=e,this.docs=(function(){return new Dt(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),o=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return me.resolve(s?s.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let s=qi();return t.forEach((a=>{const o=this.docs.get(a);s=s.insert(a,o?o.document.mutableCopy():_n.newInvalidDocument(a))})),me.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let o=qi();const c=t.path,f=new De(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||FL(zL(v),s)<=0||(a.has(v.key)||$f(t,v))&&(o=o.insert(v.key,v.mutableCopy()))}return me.resolve(o)}getAllFromCollectionGroup(e,t,s,a){Ue(9500)}ii(e,t){return me.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new g3(this)}getSize(e){return me.resolve(this.size)}}class g3 extends l3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),me.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e){this.persistence=e,this.si=new Fa((t=>Yg(t)),Jg),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.oi=0,this._i=new n0,this.targetCount=0,this.ai=ol.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),me.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ol(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Pr(t),me.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,s){let a=0;const o=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),me.waitFor(o).next((()=>a))}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return me.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),me.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,o=[];return a&&t.forEach((c=>{o.push(a.markPotentiallyOrphaned(e,c))})),me.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),me.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return me.resolve(s)}containsKey(e,t){return me.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,t){this.ui={},this.overlays={},this.ci=new zf(0),this.li=!1,this.li=!0,this.hi=new h3,this.referenceDelegate=e(this),this.Pi=new y3(this),this.indexManager=new t3,this.remoteDocumentCache=(function(a){return new p3(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new ZU(t),this.Ii=new d3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new f3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new m3(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){we("MemoryPersistence","Starting transaction:",e);const a=new x3(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((o=>this.referenceDelegate.di(a).next((()=>o)))).toPromise().then((o=>(a.raiseOnCommittedEvent(),o)))}Ai(e,t){return me.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class x3 extends KL{constructor(e){super(),this.currentSequenceNumber=e}}class s0{constructor(e){this.persistence=e,this.Ri=new n0,this.Vi=null}static mi(e){return new s0(e)}get fi(){if(this.Vi)return this.Vi;throw Ue(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),me.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((o=>this.fi.add(o.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.fi,(s=>{const a=De.fromPath(s);return this.gi(e,a).next((o=>{o||t.removeEntry(a,je.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return me.or([()=>me.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class _f{constructor(e,t){this.persistence=e,this.pi=new Fa((s=>JL(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=o3(this,t)}static mi(e,t){return new _f(e,t)}Ei(){}di(e){return me.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return me.forEach(this.pi,((s,a)=>this.br(e,s,a).next((o=>o?me.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((f=>{f||(s++,o.removeEntry(c,je.min()))})))).next((()=>o.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),me.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),me.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),me.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kd(e.data.value)),t}br(e,t,s){return me.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return me.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=Ze(),a=Ze();for(const o of t.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new i0(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return uP()?8:$L(En())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,a,s).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new v3;return this.Ss(e,t,c).next((f=>{if(o.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>o.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(Bo()<=We.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Ho(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),me.resolve()):(Bo()<=We.DEBUG&&we("QueryEngine","Query:",Ho(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Bo()<=We.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Ho(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(t))):me.resolve())}ys(e,t){if(KT(t))return me.resolve(null);let s=ui(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=ig(t,null,"F"),s=ui(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((o=>{const c=Ze(...o);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.Ds(t,f);return this.Cs(t,m,c,p.readTime)?this.ys(e,ig(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ws(e,t,s,a){return KT(t)||a.isEqual(je.min())?me.resolve(null):this.ps.getDocuments(e,s).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,s,a)?me.resolve(null):(Bo()<=We.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ho(t)),this.vs(e,c,t,HL(a,Gc)).next((f=>f)))}))}Ds(e,t){let s=new tn(XA(e));return t.forEach(((a,o)=>{$f(e,o)&&(s=s.add(o))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}Ss(e,t,s){return Bo()<=We.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Ho(t)),this.ps.getDocumentsMatchingQuery(e,t,Hr.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="LocalStore",_3=3e8;class T3{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Dt(Xe),this.xs=new Fa((o=>Yg(o)),Jg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function E3(n,e,t,s){return new T3(n,e,t,s)}async function _w(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((o=>(a=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((o=>{const c=[],f=[];let p=Ze();for(const m of a){c.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of o){f.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:f})))}))}))}function S3(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,p,m,v){const _=m.batch,T=_.keys();let A=me.resolve();return T.forEach((N=>{A=A.next((()=>v.getEntry(p,N))).next((C=>{const I=m.docVersions.get(N);ut(I!==null,48541),C.version.compareTo(I)<0&&(_.applyToRemoteDocument(C,m),C.isValidDocument()&&(C.setReadTime(m.commitVersion),v.addEntry(C)))}))})),A.next((()=>f.mutationQueue.removeMutationBatch(p,_)))})(t,s,e,o).next((()=>o.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let p=Ze();for(let m=0;m<f.mutationResults.length;++m)f.mutationResults[m].transformResults.length>0&&(p=p.add(f.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function Tw(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function A3(n,e){const t=Be(n),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const f=[];e.targetChanges.forEach(((v,_)=>{const T=a.get(_);if(!T)return;f.push(t.Pi.removeMatchingKeys(o,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(o,v.addedDocuments,_))));let A=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?A=A.withResumeToken(yn.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,s)),a=a.insert(_,A),(function(C,I,j){return C.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=_3?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(T,A,v)&&f.push(t.Pi.updateTargetData(o,A))}));let p=qi(),m=Ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(o,v))})),f.push(w3(o,c,e.documentUpdates).next((v=>{p=v.ks,m=v.qs}))),!s.isEqual(je.min())){const v=t.Pi.getLastRemoteSnapshotVersion(o).next((_=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,s)));f.push(v)}return me.waitFor(f).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,p,m))).next((()=>p))})).then((o=>(t.Ms=a,o)))}function w3(n,e,t){let s=Ze(),a=Ze();return t.forEach((o=>s=s.add(o))),e.getEntries(n,s).next((o=>{let c=qi();return t.forEach(((f,p)=>{const m=o.get(f);p.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(f)),p.isNoDocument()&&p.version.isEqual(je.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):we(r0,"Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",p.version)})),{ks:c,qs:a}}))}function N3(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=qg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function C3(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((o=>o?(a=o,me.resolve(a)):t.Pi.allocateTargetId(s).next((c=>(a=new Lr(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function cg(n,e,t){const s=Be(n),a=s.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",o,(c=>s.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!xl(c))throw c;we(r0,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function rE(n,e,t){const s=Be(n);let a=je.min(),o=Ze();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,m,v){const _=Be(p),T=_.xs.get(v);return T!==void 0?me.resolve(_.Ms.get(T)):_.Pi.getTargetData(m,v)})(s,c,ui(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,f.targetId).next((p=>{o=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?a:je.min(),t?o:Ze()))).next((f=>(I3(s,mU(e),f),{documents:f,Qs:o})))))}function I3(n,e,t){let s=n.Os.get(e)||je.min();t.forEach(((a,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)})),n.Os.set(e,s)}class aE{constructor(){this.activeTargetIds=bU()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k3{constructor(){this.Mo=new aE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new aE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="ConnectivityMonitor";class lE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){we(oE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){we(oE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vd=null;function ug(){return Vd===null?Vd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vd++,"0x"+Vd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="RestConnection",M3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class D3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===pf?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,o){const c=ug(),f=this.zo(e,t.toUriEncodedString());we(Tp,`Sending RPC '${e}' ${c}:`,f,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,o);const{host:m}=new URL(f),v=hl(m);return this.Jo(e,f,p,s,v).then((_=>(we(Tp,`Received RPC '${e}' ${c}: `,_),_)),(_=>{throw sl(Tp,`RPC '${e}' ${c} failed with error: `,_,"url: ",f,"request:",s),_}))}Ho(e,t,s,a,o,c){return this.Go(e,t,s,a,o)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,o)=>e[o]=a)),s&&s.headers.forEach(((a,o)=>e[o]=a))}zo(e,t){const s=M3[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class L3 extends D3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,o){const c=ug();return new Promise(((f,p)=>{const m=new AA;m.setWithCredentials(!0),m.listenOnce(wA.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case qd.NO_ERROR:const _=m.getResponseJson();we(vn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),f(_);break;case qd.TIMEOUT:we(vn,`RPC '${e}' ${c} timed out`),p(new Ee(de.DEADLINE_EXCEEDED,"Request time out"));break;case qd.HTTP_ERROR:const T=m.getStatus();if(we(vn,`RPC '${e}' ${c} failed with status:`,T,"response text:",m.getResponseText()),T>0){let A=m.getResponseJson();Array.isArray(A)&&(A=A[0]);const N=A==null?void 0:A.error;if(N&&N.status&&N.message){const C=(function(j){const L=j.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(L)>=0?L:de.UNKNOWN})(N.status);p(new Ee(C,N.message))}else p(new Ee(de.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new Ee(de.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{we(vn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);we(vn,`RPC '${e}' ${c} sending request:`,a),m.send(t,"POST",v,s,15)}))}T_(e,t,s){const a=ug(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=IA(),f=CA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=o.join("");we(vn,`Creating RPC '${e}' stream ${a}: ${v}`,p);const _=c.createWebChannel(v,p);this.I_(_);let T=!1,A=!1;const N=new P3({Yo:I=>{A?we(vn,`Not sending because RPC '${e}' stream ${a} is closed:`,I):(T||(we(vn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),T=!0),we(vn,`RPC '${e}' stream ${a} sending:`,I),_.send(I))},Zo:()=>_.close()}),C=(I,j,L)=>{I.listen(j,(G=>{try{L(G)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return C(_,Nc.EventType.OPEN,(()=>{A||(we(vn,`RPC '${e}' stream ${a} transport opened.`),N.o_())})),C(_,Nc.EventType.CLOSE,(()=>{A||(A=!0,we(vn,`RPC '${e}' stream ${a} transport closed`),N.a_(),this.E_(_))})),C(_,Nc.EventType.ERROR,(I=>{A||(A=!0,sl(vn,`RPC '${e}' stream ${a} transport errored. Name:`,I.name,"Message:",I.message),N.a_(new Ee(de.UNAVAILABLE,"The operation could not be completed")))})),C(_,Nc.EventType.MESSAGE,(I=>{var j;if(!A){const L=I.data[0];ut(!!L,16349);const G=L,ee=(G==null?void 0:G.error)||((j=G[0])==null?void 0:j.error);if(ee){we(vn,`RPC '${e}' stream ${a} received error:`,ee);const re=ee.status;let oe=(function(R){const O=Qt[R];if(O!==void 0)return cw(O)})(re),M=ee.message;oe===void 0&&(oe=de.INTERNAL,M="Unknown error status: "+re+" with message "+ee.message),A=!0,N.a_(new Ee(oe,M)),_.close()}else we(vn,`RPC '${e}' stream ${a} received:`,L),N.u_(L)}})),C(f,NA.STAT_EVENT,(I=>{I.stat===Wp.PROXY?we(vn,`RPC '${e}' stream ${a} detected buffering proxy`):I.stat===Wp.NOPROXY&&we(vn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ep(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(n){return new jU(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,t,s=1e3,a=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&we("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="PersistentStream";class Sw{constructor(e,t,s,a,o,c,f,p){this.Mi=e,this.S_=s,this.b_=a,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ew(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Fi(t.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new Ee(de.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(cE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(we(cE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class U3 extends Sw{constructor(e,t,s,a,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=HU(this.serializer,e),s=(function(o){if(!("targetChange"in o))return je.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?je.min():c.readTime?di(c.readTime):je.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=lg(this.serializer),t.addTarget=(function(o,c){let f;const p=c.target;if(f=ng(p)?{documents:qU(o,p)}:{query:KU(o,p).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=fw(o,c.resumeToken);const m=rg(o,c.expectedCount);m!==null&&(f.expectedCount=m)}else if(c.snapshotVersion.compareTo(je.min())>0){f.readTime=bf(o,c.snapshotVersion.toTimestamp());const m=rg(o,c.expectedCount);m!==null&&(f.expectedCount=m)}return f})(this.serializer,e);const s=YU(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=lg(this.serializer),t.removeTarget=e,this.q_(t)}}class V3 extends Sw{constructor(e,t,s,a,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ut(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ut(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=FU(e.writeResults,e.commitTime),s=di(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=lg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>zU(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{}class j3 extends O3{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Ee(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,ag(t,s),a,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(de.UNKNOWN,o.toString())}))}Ho(e,t,s,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,ag(t,s),a,c,f,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ee(de.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class G3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fi(t),this.aa=!1):we("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga="RemoteStore";class B3{constructor(e,t,s,a,o){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{qa(this)&&(we(Ga,"Restarting streams for network reachability change."),await(async function(p){const m=Be(p);m.Ea.add(4),await nu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Xf(m)})(this))}))})),this.Ra=new G3(s,a)}}async function Xf(n){if(qa(n))for(const e of n.da)await e(!0)}async function nu(n){for(const e of n.da)await e(!1)}function Aw(n,e){const t=Be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),c0(t)?l0(t):bl(t).O_()&&o0(t,e))}function a0(n,e){const t=Be(n),s=bl(t);t.Ia.delete(e),s.O_()&&ww(t,e),t.Ia.size===0&&(s.O_()?s.L_():qa(t)&&t.Ra.set("Unknown"))}function o0(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bl(n).Y_(e)}function ww(n,e){n.Va.Ue(e),bl(n).Z_(e)}function l0(n){n.Va=new LU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),bl(n).start(),n.Ra.ua()}function c0(n){return qa(n)&&!bl(n).x_()&&n.Ia.size>0}function qa(n){return Be(n).Ea.size===0}function Nw(n){n.Va=void 0}async function H3(n){n.Ra.set("Online")}async function z3(n){n.Ia.forEach(((e,t)=>{o0(n,e)}))}async function F3(n,e){Nw(n),c0(n)?(n.Ra.ha(e),l0(n)):n.Ra.set("Unknown")}async function q3(n,e,t){if(n.Ra.set("Online"),e instanceof dw&&e.state===2&&e.cause)try{await(async function(a,o){const c=o.cause;for(const f of o.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.Va.removeTarget(f))})(n,e)}catch(s){we(Ga,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Tf(n,s)}else if(e instanceof Jd?n.Va.Ze(e):e instanceof uw?n.Va.st(e):n.Va.tt(e),!t.isEqual(je.min()))try{const s=await Tw(n.localStore);t.compareTo(s)>=0&&await(function(o,c){const f=o.Va.Tt(c);return f.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=o.Ia.get(m);v&&o.Ia.set(m,v.withResumeToken(p.resumeToken,c))}})),f.targetMismatches.forEach(((p,m)=>{const v=o.Ia.get(p);if(!v)return;o.Ia.set(p,v.withResumeToken(yn.EMPTY_BYTE_STRING,v.snapshotVersion)),ww(o,p);const _=new Lr(v.target,p,m,v.sequenceNumber);o0(o,_)})),o.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){we(Ga,"Failed to raise snapshot:",s),await Tf(n,s)}}async function Tf(n,e,t){if(!xl(e))throw e;n.Ea.add(1),await nu(n),n.Ra.set("Offline"),t||(t=()=>Tw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{we(Ga,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Xf(n)}))}function Cw(n,e){return e().catch((t=>Tf(n,t,e)))}async function Zf(n){const e=Be(n),t=Kr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qg;for(;K3(e);)try{const a=await N3(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,$3(e,a)}catch(a){await Tf(e,a)}Iw(e)&&kw(e)}function K3(n){return qa(n)&&n.Ta.length<10}function $3(n,e){n.Ta.push(e);const t=Kr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Iw(n){return qa(n)&&!Kr(n).x_()&&n.Ta.length>0}function kw(n){Kr(n).start()}async function Y3(n){Kr(n).ra()}async function J3(n){const e=Kr(n);for(const t of n.Ta)e.ea(t.mutations)}async function Q3(n,e,t){const s=n.Ta.shift(),a=Zg.from(s,e,t);await Cw(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Zf(n)}async function W3(n,e){e&&Kr(n).X_&&await(async function(s,a){if((function(c){return MU(c)&&c!==de.ABORTED})(a.code)){const o=s.Ta.shift();Kr(s).B_(),await Cw(s,(()=>s.remoteSyncer.rejectFailedWrite(o.batchId,a))),await Zf(s)}})(n,e),Iw(n)&&kw(n)}async function uE(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),we(Ga,"RemoteStore received new credentials");const s=qa(t);t.Ea.add(3),await nu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Xf(t)}async function X3(n,e){const t=Be(n);e?(t.Ea.delete(2),await Xf(t)):e||(t.Ea.add(2),await nu(t),t.Ra.set("Unknown"))}function bl(n){return n.ma||(n.ma=(function(t,s,a){const o=Be(t);return o.sa(),new U3(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(n.datastore,n.asyncQueue,{Xo:H3.bind(null,n),t_:z3.bind(null,n),r_:F3.bind(null,n),H_:q3.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),c0(n)?l0(n):n.Ra.set("Unknown")):(await n.ma.stop(),Nw(n))}))),n.ma}function Kr(n){return n.fa||(n.fa=(function(t,s,a){const o=Be(t);return o.sa(),new V3(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Y3.bind(null,n),r_:W3.bind(null,n),ta:J3.bind(null,n),na:Q3.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Zf(n)):(await n.fa.stop(),n.Ta.length>0&&(we(Ga,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t,s,a,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=o,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,o){const c=Date.now()+s,f=new u0(e,t,c,a,o);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function d0(n,e){if(Fi("AsyncQueue",`${e}: ${n}`),xl(n))return new Ee(de.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{static emptySet(e){return new Zo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||De.comparator(t.key,s.key):(t,s)=>De.comparator(t.key,s.key),this.keyedMap=Cc(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=s.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Zo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.ga=new Dt(De.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ue(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ll{constructor(e,t,s,a,o,c,f,p,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,a,o){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new ll(e,t,Zo.emptySet(t),c,s,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class eV{constructor(){this.queries=fE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Be(t),o=a.queries;a.queries=fE(),o.forEach(((c,f)=>{for(const p of f.Sa)p.onError(s)}))})(this,new Ee(de.ABORTED,"Firestore shutting down"))}}function fE(){return new Fa((n=>WA(n)),Kf)}async function Rw(n,e){const t=Be(n);let s=3;const a=e.query;let o=t.queries.get(a);o?!o.ba()&&e.Da()&&(s=2):(o=new Z3,s=e.Da()?0:1);try{switch(s){case 0:o.wa=await t.onListen(a,!0);break;case 1:o.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=d0(c,`Initialization of query '${Ho(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&f0(t)}async function Mw(n,e){const t=Be(n),s=e.query;let a=3;const o=t.queries.get(s);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?a=e.Da()?0:1:!o.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function tV(n,e){const t=Be(n);let s=!1;for(const a of e){const o=a.query,c=t.queries.get(o);if(c){for(const f of c.Sa)f.Fa(a)&&(s=!0);c.wa=a}}s&&f0(t)}function nV(n,e,t){const s=Be(n),a=s.queries.get(e);if(a)for(const o of a.Sa)o.onError(t);s.queries.delete(e)}function f0(n){n.Ca.forEach((e=>{e.next()}))}var dg,hE;(hE=dg||(dg={})).Ma="default",hE.Cache="cache";class Dw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new ll(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e){this.key=e}}class Lw{constructor(e){this.key=e}}class sV{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=XA(e),this.tu=new Zo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new dE,a=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,_)=>{const T=a.get(v),A=$f(this.query,_)?_:null,N=!!T&&this.mutatedKeys.has(T.key),C=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let I=!1;T&&A?T.data.isEqual(A.data)?N!==C&&(s.track({type:3,doc:A}),I=!0):this.su(T,A)||(s.track({type:2,doc:A}),I=!0,(p&&this.eu(A,p)>0||m&&this.eu(A,m)<0)&&(f=!0)):!T&&A?(s.track({type:0,doc:A}),I=!0):T&&!A&&(s.track({type:1,doc:T}),I=!0,(p||m)&&(f=!0)),I&&(A?(c=c.add(A),o=C?o.add(v):o.delete(v)):(c=c.delete(v),o=o.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),o=o.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:f,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,_)=>(function(A,N){const C=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Rt:I})}};return C(A)-C(N)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(s),a=a??!1;const f=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,m=p!==this.Za;return this.Za=p,c.length!==0||m?{snapshot:new ll(this.query,e.tu,o,c,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Lw(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Pw(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ll.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const h0="SyncEngine";class iV{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class rV{constructor(e){this.key=e,this.hu=!1}}class aV{constructor(e,t,s,a,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Fa((f=>WA(f)),Kf),this.Iu=new Map,this.Eu=new Set,this.du=new Dt(De.comparator),this.Au=new Map,this.Ru=new n0,this.Vu={},this.mu=new Map,this.fu=ol.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function oV(n,e,t=!0){const s=Bw(n);let a;const o=s.Tu.get(e);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.lu()):a=await Uw(s,e,t,!0),a}async function lV(n,e){const t=Bw(n);await Uw(t,e,!0,!1)}async function Uw(n,e,t,s){const a=await C3(n.localStore,ui(e)),o=a.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let f;return s&&(f=await cV(n,e,o,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&Aw(n.remoteStore,a),f}async function cV(n,e,t,s,a){n.pu=(_,T,A)=>(async function(C,I,j,L){let G=I.view.ru(j);G.Cs&&(G=await rE(C.localStore,I.query,!1).then((({documents:M})=>I.view.ru(M,G))));const ee=L&&L.targetChanges.get(I.targetId),re=L&&L.targetMismatches.get(I.targetId)!=null,oe=I.view.applyChanges(G,C.isPrimaryClient,ee,re);return pE(C,I.targetId,oe.au),oe.snapshot})(n,_,T,A);const o=await rE(n.localStore,e,!0),c=new sV(e,o.Qs),f=c.ru(o.documents),p=tu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),m=c.applyChanges(f,n.isPrimaryClient,p);pE(n,t,m.au);const v=new iV(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function uV(n,e,t){const s=Be(n),a=s.Tu.get(e),o=s.Iu.get(a.targetId);if(o.length>1)return s.Iu.set(a.targetId,o.filter((c=>!Kf(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await cg(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&a0(s.remoteStore,a.targetId),fg(s,a.targetId)})).catch(yl)):(fg(s,a.targetId),await cg(s.localStore,a.targetId,!0))}async function dV(n,e){const t=Be(n),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),a0(t.remoteStore,s.targetId))}async function fV(n,e,t){const s=vV(n);try{const a=await(function(c,f){const p=Be(c),m=wt.now(),v=f.reduce(((A,N)=>A.add(N.key)),Ze());let _,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let N=qi(),C=Ze();return p.Ns.getEntries(A,v).next((I=>{N=I,N.forEach(((j,L)=>{L.isValidDocument()||(C=C.add(j))}))})).next((()=>p.localDocuments.getOverlayedDocuments(A,N))).next((I=>{_=I;const j=[];for(const L of f){const G=NU(L,_.get(L.key).overlayedDocument);G!=null&&j.push(new Xr(L.key,G,zA(G.value.mapValue),ps.exists(!0)))}return p.mutationQueue.addMutationBatch(A,m,j,f)})).next((I=>{T=I;const j=I.applyToLocalDocumentSet(_,C);return p.documentOverlayCache.saveOverlays(A,I.batchId,j)}))})).then((()=>({batchId:T.batchId,changes:ew(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(c,f,p){let m=c.Vu[c.currentUser.toKey()];m||(m=new Dt(Xe)),m=m.insert(f,p),c.Vu[c.currentUser.toKey()]=m})(s,a.batchId,t),await su(s,a.changes),await Zf(s.remoteStore)}catch(a){const o=d0(a,"Failed to persist write");t.reject(o)}}async function Vw(n,e){const t=Be(n);try{const s=await A3(t.localStore,e);e.targetChanges.forEach(((a,o)=>{const c=t.Au.get(o);c&&(ut(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?ut(c.hu,14607):a.removedDocuments.size>0&&(ut(c.hu,42227),c.hu=!1))})),await su(t,s,e)}catch(s){await yl(s)}}function mE(n,e,t){const s=Be(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((o,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const p=Be(c);p.onlineState=f;let m=!1;p.queries.forEach(((v,_)=>{for(const T of _.Sa)T.va(f)&&(m=!0)})),m&&f0(p)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function hV(n,e,t){const s=Be(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),o=a&&a.key;if(o){let c=new Dt(De.comparator);c=c.insert(o,_n.newNoDocument(o,je.min()));const f=Ze().add(o),p=new Qf(je.min(),new Map,new Dt(Xe),c,f);await Vw(s,p),s.du=s.du.remove(o),s.Au.delete(e),m0(s)}else await cg(s.localStore,e,!1).then((()=>fg(s,e,t))).catch(yl)}async function mV(n,e){const t=Be(n),s=e.batch.batchId;try{const a=await S3(t.localStore,e);jw(t,s,null),Ow(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await su(t,a)}catch(a){await yl(a)}}async function pV(n,e,t){const s=Be(n);try{const a=await(function(c,f){const p=Be(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,f).next((_=>(ut(_!==null,37113),v=_.keys(),p.mutationQueue.removeMutationBatch(m,_)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);jw(s,e,t),Ow(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await su(s,a)}catch(a){await yl(a)}}function Ow(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function jw(n,e,t){const s=Be(n);let a=s.Vu[s.currentUser.toKey()];if(a){const o=a.get(e);o&&(t?o.reject(t):o.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function fg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||Gw(n,s)}))}function Gw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(a0(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),m0(n))}function pE(n,e,t){for(const s of t)s instanceof Pw?(n.Ru.addReference(s.key,e),gV(n,s)):s instanceof Lw?(we(h0,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||Gw(n,s.key)):Ue(19791,{wu:s})}function gV(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(we(h0,"New document in limbo: "+t),n.Eu.add(s),m0(n))}function m0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new De(Tt.fromString(e)),s=n.fu.next();n.Au.set(s,new rV(t)),n.du=n.du.insert(t,s),Aw(n.remoteStore,new Lr(ui(Qg(t.path)),s,"TargetPurposeLimboResolution",zf.ce))}}async function su(n,e,t){const s=Be(n),a=[],o=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,p)=>{c.push(s.pu(p,e,t).then((m=>{var v;if((m||t)&&s.isPrimaryClient){const _=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(m){a.push(m);const _=i0.As(p.targetId,m);o.push(_)}})))})),await Promise.all(c),s.Pu.H_(a),await(async function(p,m){const v=Be(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>me.forEach(m,(T=>me.forEach(T.Es,(A=>v.persistence.referenceDelegate.addReference(_,T.targetId,A))).next((()=>me.forEach(T.ds,(A=>v.persistence.referenceDelegate.removeReference(_,T.targetId,A)))))))))}catch(_){if(!xl(_))throw _;we(r0,"Failed to update sequence numbers: "+_)}for(const _ of m){const T=_.targetId;if(!_.fromCache){const A=v.Ms.get(T),N=A.snapshotVersion,C=A.withLastLimboFreeSnapshotVersion(N);v.Ms=v.Ms.insert(T,C)}}})(s.localStore,o))}async function yV(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){we(h0,"User change. New user:",e.toKey());const s=await _w(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((f=>{f.forEach((p=>{p.reject(new Ee(de.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await su(t,s.Ls)}}function xV(n,e){const t=Be(n),s=t.Au.get(e);if(s&&s.hu)return Ze().add(s.key);{let a=Ze();const o=t.Iu.get(e);if(!o)return a;for(const c of o){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}function Bw(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hV.bind(null,e),e.Pu.H_=tV.bind(null,e.eventManager),e.Pu.yu=nV.bind(null,e.eventManager),e}function vV(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pV.bind(null,e),e}class Ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return E3(this.persistence,new b3,e.initialUser,this.serializer)}Cu(e){return new bw(s0.mi,this.serializer)}Du(e){return new k3}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ef.provider={build:()=>new Ef};class bV extends Ef{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ut(this.persistence.referenceDelegate instanceof _f,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new r3(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new bw((s=>_f.mi(s,t)),this.serializer)}}class hg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>mE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=yV.bind(null,this.syncEngine),await X3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new eV})()}createDatastore(e){const t=Wf(e.databaseInfo.databaseId),s=(function(o){return new L3(o)})(e.databaseInfo);return(function(o,c,f,p){return new j3(o,c,f,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,o,c,f){return new B3(s,a,o,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>mE(this.syncEngine,t,0)),(function(){return lE.v()?new lE:new R3})())}createSyncEngine(e,t){return(function(a,o,c,f,p,m,v){const _=new aV(a,o,c,f,p,m);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const o=Be(a);we(Ga,"RemoteStore shutting down."),o.Ea.add(5),await nu(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}hg.provider={build:()=>new hg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="FirestoreClient";class _V{constructor(e,t,s,a,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=bn.UNAUTHENTICATED,this.clientId=Fg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,(async c=>{we($r,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(we($r,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=d0(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Sp(n,e){n.asyncQueue.verifyOperationInProgress(),we($r,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await _w(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function gE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await TV(n);we($r,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>uE(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>uE(e.remoteStore,a))),n._onlineComponents=e}async function TV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){we($r,"Using user provided OfflineComponentProvider");try{await Sp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===de.FAILED_PRECONDITION||a.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;sl("Error using user provided cache. Falling back to memory cache: "+t),await Sp(n,new Ef)}}else we($r,"Using default OfflineComponentProvider"),await Sp(n,new bV(void 0));return n._offlineComponents}async function zw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(we($r,"Using user provided OnlineComponentProvider"),await gE(n,n._uninitializedComponentsProvider._online)):(we($r,"Using default OnlineComponentProvider"),await gE(n,new hg))),n._onlineComponents}function EV(n){return zw(n).then((e=>e.syncEngine))}async function Fw(n){const e=await zw(n),t=e.eventManager;return t.onListen=oV.bind(null,e.syncEngine),t.onUnlisten=uV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dV.bind(null,e.syncEngine),t}function SV(n,e,t={}){const s=new Gi;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,f,p,m){const v=new Hw({next:T=>{v.Nu(),c.enqueueAndForget((()=>Mw(o,_)));const A=T.docs.has(f);!A&&T.fromCache?m.reject(new Ee(de.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&p&&p.source==="server"?m.reject(new Ee(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),_=new Dw(Qg(f.path),v,{includeMetadataChanges:!0,qa:!0});return Rw(o,_)})(await Fw(n),n.asyncQueue,e,t,s))),s.promise}function AV(n,e,t={}){const s=new Gi;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,f,p,m){const v=new Hw({next:T=>{v.Nu(),c.enqueueAndForget((()=>Mw(o,_))),T.fromCache&&p.source==="server"?m.reject(new Ee(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),_=new Dw(f,v,{includeMetadataChanges:!0,qa:!0});return Rw(o,_)})(await Fw(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="firestore.googleapis.com",xE=!0;class vE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Kw,this.ssl=xE}else this.host=e.host,this.ssl=e.ssl??xE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<s3)throw new Ee(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ee(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ee(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ee(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eh{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new RL;switch(s.type){case"firstParty":return new LL(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ee(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=yE.get(t);s&&(we("ComponentProvider","Removing Datastore"),yE.delete(t),s.terminate())})(this),Promise.resolve()}}function wV(n,e,t,s={}){var m;n=js(n,eh);const a=hl(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;a&&(GS(`https://${f}`),BS("Firestore",!0)),o.host!==Kw&&o.host!==f&&sl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...o,host:f,ssl:a,emulatorOptions:s};if(!Ua(p,c)&&(n._setSettings(p),s.mockUserToken)){let v,_;if(typeof s.mockUserToken=="string")v=s.mockUserToken,_=bn.MOCK_USER;else{v=tP(s.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new Ee(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new bn(T)}n._authCredentials=new ML(new RA(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ka(this.firestore,e,this._query)}}class Ht{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Zc(t,Ht._jsonSchema))return new Ht(e,s||null,new De(Tt.fromString(t.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:Xt("string",Ht._jsonSchemaVersion),referencePath:Xt("string")};class Gr extends Ka{constructor(e,t,s){super(e,t,Qg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new De(e))}withConverter(e){return new Gr(this.firestore,e,this._path)}}function _l(n,e,...t){if(n=gn(n),MA("collection","path",e),n instanceof eh){const s=Tt.fromString(e,...t);return MT(s),new Gr(n,null,s)}{if(!(n instanceof Ht||n instanceof Gr))throw new Ee(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Tt.fromString(e,...t));return MT(s),new Gr(n.firestore,null,s)}}function Zr(n,e,...t){if(n=gn(n),arguments.length===1&&(e=Fg.newId()),MA("doc","path",e),n instanceof eh){const s=Tt.fromString(e,...t);return RT(s),new Ht(n,null,new De(s))}{if(!(n instanceof Ht||n instanceof Gr))throw new Ee(de.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Tt.fromString(e,...t));return RT(s),new Ht(n.firestore,n instanceof Gr?n.converter:null,new De(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="AsyncQueue";class _E{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ew(this,"async_queue_retry"),this._c=()=>{const s=Ep();s&&we(bE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Ep();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ep();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Gi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xl(e))throw e;we(bE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Fi("INTERNAL UNHANDLED ERROR: ",TE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=u0.createAndSchedule(this,e,t,s,(o=>this.hc(o)));return this.tc.push(a),a}uc(){this.nc&&Ue(47125,{Pc:TE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function TE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class $a extends eh{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new _E,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _E(e),this._firestoreClient=void 0,await e}}}function NV(n,e){const t=typeof n=="object"?n:qS(),s=typeof n=="string"?n:pf,a=Mg(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const o=Z4("firestore");o&&wV(a,...o)}return a}function p0(n){if(n._terminated)throw new Ee(de.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||CV(n),n._firestoreClient}function CV(n){var s,a,o;const e=n._freezeSettings(),t=(function(f,p,m,v){return new XL(f,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,qw(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new _V(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hs(yn.fromBase64String(e))}catch(t){throw new Ee(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new hs(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zc(e,hs._jsonSchema))return hs.fromBase64String(e.bytes)}}hs._jsonSchemaVersion="firestore/bytes/1.0",hs._jsonSchema={type:Xt("string",hs._jsonSchemaVersion),bytes:Xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fi._jsonSchemaVersion}}static fromJSON(e){if(Zc(e,fi._jsonSchema))return new fi(e.latitude,e.longitude)}}fi._jsonSchemaVersion="firestore/geoPoint/1.0",fi._jsonSchema={type:Xt("string",fi._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==a[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:hi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zc(e,hi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new hi(e.vectorValues);throw new Ee(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hi._jsonSchemaVersion="firestore/vectorValue/1.0",hi._jsonSchema={type:Xt("string",hi._jsonSchemaVersion),vectorValues:Xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=/^__.*__$/;class kV{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Xr(e,this.data,this.fieldMask,t,this.fieldTransforms):new eu(e,this.data,t,this.fieldTransforms)}}class $w{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Xr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Yw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{Ac:n})}}class y0{constructor(e,t,s,a,o,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new y0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Yw(this.Ac)&&IV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class RV{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Wf(e)}Cc(e,t,s,a=!1){return new y0({Ac:e,methodName:t,Dc:s,path:pn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nh(n){const e=n._freezeSettings(),t=Wf(n._databaseId);return new RV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Jw(n,e,t,s,a,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,e,t,a);x0("Data must be an object, but it was:",c,s);const f=Qw(s,c);let p,m;if(o.merge)p=new Xn(c.fieldMask),m=c.fieldTransforms;else if(o.mergeFields){const v=[];for(const _ of o.mergeFields){const T=mg(e,_,t);if(!c.contains(T))throw new Ee(de.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Xw(v,T)||v.push(T)}p=new Xn(v),m=c.fieldTransforms.filter((_=>p.covers(_.field)))}else p=null,m=c.fieldTransforms;return new kV(new Gn(f),p,m)}class sh extends g0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sh}}function MV(n,e,t,s){const a=n.Cc(1,e,t);x0("Data must be an object, but it was:",a,s);const o=[],c=Gn.empty();Wr(s,((p,m)=>{const v=v0(e,p,t);m=gn(m);const _=a.yc(v);if(m instanceof sh)o.push(v);else{const T=iu(m,_);T!=null&&(o.push(v),c.set(v,T))}}));const f=new Xn(o);return new $w(c,f,a.fieldTransforms)}function DV(n,e,t,s,a,o){const c=n.Cc(1,e,t),f=[mg(e,s,t)],p=[a];if(o.length%2!=0)throw new Ee(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)f.push(mg(e,o[T])),p.push(o[T+1]);const m=[],v=Gn.empty();for(let T=f.length-1;T>=0;--T)if(!Xw(m,f[T])){const A=f[T];let N=p[T];N=gn(N);const C=c.yc(A);if(N instanceof sh)m.push(A);else{const I=iu(N,C);I!=null&&(m.push(A),v.set(A,I))}}const _=new Xn(m);return new $w(v,_,c.fieldTransforms)}function PV(n,e,t,s=!1){return iu(t,n.Cc(s?4:3,e))}function iu(n,e){if(Ww(n=gn(n)))return x0("Unsupported field value:",e,n),Qw(n,e);if(n instanceof g0)return(function(s,a){if(!Yw(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(a);o&&a.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const o=[];let c=0;for(const f of s){let p=iu(f,a.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),o.push(p),c++}return{arrayValue:{values:o}}})(n,e)}return(function(s,a){if((s=gn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return _U(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=wt.fromDate(s);return{timestampValue:bf(a.serializer,o)}}if(s instanceof wt){const o=new wt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:bf(a.serializer,o)}}if(s instanceof fi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof hs)return{bytesValue:fw(a.serializer,s._byteString)};if(s instanceof Ht){const o=a.databaseId,c=s.firestore._databaseId;if(!c.isEqual(o))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:t0(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof hi)return(function(c,f){return{mapValue:{fields:{[BA]:{stringValue:HA},[gf]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw f.Sc("VectorValues must only contain numeric values.");return Wg(f.serializer,m)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Hf(s)}`)})(n,e)}function Qw(n,e){const t={};return LA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wr(n,((s,a)=>{const o=iu(a,e.mc(s));o!=null&&(t[s]=o)})),{mapValue:{fields:t}}}function Ww(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wt||n instanceof fi||n instanceof hs||n instanceof Ht||n instanceof g0||n instanceof hi)}function x0(n,e,t){if(!Ww(t)||!DA(t)){const s=Hf(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function mg(n,e,t){if((e=gn(e))instanceof th)return e._internalPath;if(typeof e=="string")return v0(n,e);throw Sf("Field path arguments must be of type string or ",n,!1,void 0,t)}const LV=new RegExp("[~\\*/\\[\\]]");function v0(n,e,t){if(e.search(LV)>=0)throw Sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new th(...e.split("."))._internalPath}catch{throw Sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sf(n,e,t,s,a){const o=s&&!s.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(o||c)&&(p+=" (found",o&&(p+=` in field ${s}`),c&&(p+=` in document ${a}`),p+=")"),new Ee(de.INVALID_ARGUMENT,f+n+p)}function Xw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,t,s,a,o){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ih("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class UV extends Zw{data(){return super.data()}}function ih(n,e){return typeof e=="string"?v0(n,e):e instanceof th?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ee(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class b0{}class eN extends b0{}function _0(n,e,...t){let s=[];e instanceof b0&&s.push(e),s=s.concat(t),(function(o){const c=o.filter((p=>p instanceof T0)).length,f=o.filter((p=>p instanceof rh)).length;if(c>1||c>0&&f>0)throw new Ee(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)n=a._apply(n);return n}class rh extends eN{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new rh(e,t,s)}_apply(e){const t=this._parse(e);return nN(e._query,t),new Ka(e.firestore,e.converter,sg(e._query,t))}_parse(e){const t=nh(e.firestore);return(function(o,c,f,p,m,v,_){let T;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ee(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){SE(_,v);const N=[];for(const C of _)N.push(EE(p,o,C));T={arrayValue:{values:N}}}else T=EE(p,o,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||SE(_,v),T=PV(f,c,_,v==="in"||v==="not-in");return Wt.create(m,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function tN(n,e,t){const s=e,a=ih("where",n);return rh._create(a,s,t)}class T0 extends b0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new T0(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Gs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,o){let c=a;const f=o.getFlattenedFilters();for(const p of f)nN(c,p),c=sg(c,p)})(e._query,t),new Ka(e.firestore,e.converter,sg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class E0 extends eN{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new E0(e,t)}_apply(e){const t=(function(a,o,c){if(a.startAt!==null)throw new Ee(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Ee(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fc(o,c)})(e._query,this._field,this._direction);return new Ka(e.firestore,e.converter,(function(a,o){const c=a.explicitOrderBy.concat([o]);return new vl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function OV(n,e="asc"){const t=e,s=ih("orderBy",n);return E0._create(s,t)}function EE(n,e,t){if(typeof(t=gn(t))=="string"){if(t==="")throw new Ee(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QA(e)&&t.indexOf("/")!==-1)throw new Ee(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Tt.fromString(t));if(!De.isDocumentKey(s))throw new Ee(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return GT(n,new De(s))}if(t instanceof Ht)return GT(n,t._key);throw new Ee(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hf(t)}.`)}function SE(n,e){if(!Array.isArray(n)||n.length===0)throw new Ee(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nN(n,e){const t=(function(a,o){for(const c of a)for(const f of c.getFlattenedFilters())if(o.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ee(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class jV{convertValue(e,t="none"){switch(qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Wr(e,((a,o)=>{s[a]=this.convertValue(o,t)})),s}convertVectorValue(e){var s,a,o;const t=(o=(a=(s=e.fields)==null?void 0:s[gf].arrayValue)==null?void 0:a.values)==null?void 0:o.map((c=>Bt(c.doubleValue)));return new hi(t)}convertGeoPoint(e){return new fi(Bt(e.latitude),Bt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=qf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Bc(e));default:return null}}convertTimestamp(e){const t=zr(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Tt.fromString(e);ut(xw(s),9688,{name:e});const a=new Hc(s.get(1),s.get(3)),o=new De(s.popFirst(5));return a.isEqual(t)||Fi(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class kc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class La extends Zw{constructor(e,t,s,a,o,c){super(e,t,s,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(ih("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=La._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}La._jsonSchemaVersion="firestore/documentSnapshot/1.0",La._jsonSchema={type:Xt("string",La._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Qd extends La{data(e={}){return super.data(e)}}class el{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new kc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Qd(this._firestore,this._userDataWriter,s.key,s,new kc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,o){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const p=new Qd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new kc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>o||f.type!==3)).map((f=>{const p=new Qd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new kc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,v=-1;return f.type!==0&&(m=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),v=c.indexOf(f.doc.key)),{type:GV(f.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=el._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),s.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function GV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(n){n=js(n,Ht);const e=js(n.firestore,$a);return SV(p0(e),n._key).then((t=>FV(e,n,t)))}el._jsonSchemaVersion="firestore/querySnapshot/1.0",el._jsonSchema={type:Xt("string",el._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class iN extends jV{constructor(e){super(),this.firestore=e}convertBytes(e){return new hs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function ah(n){n=js(n,Ka);const e=js(n.firestore,$a),t=p0(e),s=new iN(e);return VV(n._query),AV(t,n._query).then((a=>new el(e,s,n,a)))}function S0(n,e,t){n=js(n,Ht);const s=js(n.firestore,$a),a=sN(n.converter,e);return oh(s,[Jw(nh(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,ps.none())])}function HV(n,e,t,...s){n=js(n,Ht);const a=js(n.firestore,$a),o=nh(a);let c;return c=typeof(e=gn(e))=="string"||e instanceof th?DV(o,"updateDoc",n._key,e,t,s):MV(o,"updateDoc",n._key,e),oh(a,[c.toMutation(n._key,ps.exists(!0))])}function rN(n){return oh(js(n.firestore,$a),[new Xg(n._key,ps.none())])}function zV(n,e){const t=js(n.firestore,$a),s=Zr(n),a=sN(n.converter,e);return oh(t,[Jw(nh(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,ps.exists(!1))]).then((()=>s))}function oh(n,e){return(function(s,a){const o=new Gi;return s.asyncQueue.enqueueAndForget((async()=>fV(await EV(s),a,o))),o.promise})(p0(n),e)}function FV(n,e,t){const s=t.docs.get(e._key),a=new iN(n);return new La(n,a,e._key,s,new kc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){gl=a})(ml),tl(new Va("firestore",((s,{instanceIdentifier:a,options:o})=>{const c=s.getProvider("app").getImmediate(),f=new $a(new DL(s.getProvider("auth-internal")),new UL(c,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ee(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hc(m.options.projectId,v)})(c,a),c);return o={useFetchStreams:t,...o},f._setSettings(o),f}),"PUBLIC").setMultipleInstances(!0)),Or(NT,CT,e),Or(NT,CT,"esm2020")})();const qV={apiKey:"AIzaSyBsULKLrF5rPubDQ10RPWdL4gbjvo8obPI",authDomain:"fajmuls-learning.firebaseapp.com",projectId:"fajmuls-learning",storageBucket:"fajmuls-learning.firebasestorage.app",messagingSenderId:"1078635450652",appId:"1:1078635450652:web:41de35e0038d3bd40caad9"},aN=FS(qV),xs=NV(aN),A0=IL(aN),KV=new Ui;console.log("Firebase Service Initialized for: fajmuls-learning");const oN="benchmark_scores",w0="test_packages",Ya="users",$V=async()=>{try{return(await O5(A0,KV)).user}catch(n){throw console.error("Login failed:",n),n}},YV=async()=>{try{await x5(A0)}catch(n){console.error("Logout failed:",n)}},lN=async n=>{try{const e=_0(_l(xs,Ya),tN("username","==",n));return(await ah(e)).empty}catch(e){return console.error("Error checking username:",e),!1}},JV=async n=>{try{const e=Zr(xs,Ya,n),t=await BV(e);return t.exists()?t.data():null}catch(e){return console.error("Error fetching profile:",e),null}},QV=async(n,e)=>{const t={uid:n.uid,email:n.email,username:e,photoURL:n.photoURL,createdAt:new Date().toISOString()};try{return await S0(Zr(xs,Ya,n.uid),t),t}catch(s){throw console.error("Error creating profile:",s),s}},WV=async(n,e)=>{try{const t=Zr(xs,Ya,n);await HV(t,{username:e})}catch(t){throw console.error("Error updating username:",t),t}},XV=async(n,e)=>{try{const t=_l(xs,Ya,n,"history");await S0(Zr(t,e.id),e),console.log("History saved to Cloud")}catch(t){console.error("Error saving history:",t)}},ZV=async n=>{try{const e=_l(xs,Ya,n,"history"),t=_0(e,OV("date","desc")),s=await ah(t),a=[];return s.forEach(o=>{a.push(o.data())}),a}catch(e){return console.error("Error fetching history:",e),[]}},eO=async(n,e)=>{try{const t=Zr(xs,Ya,n,"history",e);await rN(t)}catch(t){throw console.error("Error deleting history:",t),t}},tO=async(n,e,t,s)=>{try{await zV(_l(xs,oN),{game:n,score:e,username:t,unit:s,timestamp:Date.now()})}catch(a){console.error("Error saving score to Firebase:",a)}},nO=async(n,e=5)=>{try{const t=n==="REACTION"||n==="AIM",s=_0(_l(xs,oN),tN("game","==",n)),a=await ah(s),o=[];return a.forEach(c=>{o.push({id:c.id,...c.data()})}),o.sort((c,f)=>t?c.score-f.score:f.score-c.score),o.slice(0,e)}catch(t){return console.error("Error fetching leaderboard:",t),[]}},sO=async n=>{try{const e=JSON.parse(JSON.stringify(n));await S0(Zr(xs,w0,n.id),e)}catch(e){throw console.error("Error saving package:",e),e}},iO=async()=>{try{const n=await ah(_l(xs,w0)),e=[];return n.forEach(t=>e.push(t.data())),e.sort((t,s)=>new Date(s.createdAt).getTime()-new Date(t.createdAt).getTime()),e}catch(n){return console.error("Error fetching packages:",n),[]}},rO=async n=>{try{await rN(Zr(xs,w0,n))}catch(e){throw console.error("Error deleting package:",e),e}};class aO{constructor(){if(this.audioCache={},this.soundEnabled=!0,typeof Audio<"u")try{this.preload("click"),this.preload("back"),this.preload("tap")}catch(e){console.error("Audio init error",e)}}preload(e){const t=new Audio(cb[e]);t.preload="auto",t.volume=.5,this.audioCache[e]=t}syncSettings(e){this.soundEnabled=e.soundEnabled;const t=e.volume!==void 0?e.volume:.5;Object.values(this.audioCache).forEach(s=>{s&&(s.volume=t)})}startMusic(){}stopMusic(){}play(e){if(this.soundEnabled)try{if(this.audioCache[e]){const a=this.audioCache[e];a.currentTime=0;const o=a.play();o!==void 0&&o.catch(()=>{});return}const t=cb[e];if(!t)return;const s=new Audio(t);s.volume=this.audioCache.click?this.audioCache.click.volume:.5,s.play().catch(()=>{})}catch{}}}const le=new aO;/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lO=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),AE=n=>{const e=lO(n);return e.charAt(0).toUpperCase()+e.slice(1)},cN=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),cO=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=F.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:c,...f},p)=>F.createElement("svg",{ref:p,...uO,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:cN("lucide",a),...!o&&!cO(f)&&{"aria-hidden":"true"},...f},[...c.map(([m,v])=>F.createElement(m,v)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(n,e)=>{const t=F.forwardRef(({className:s,...a},o)=>F.createElement(dO,{ref:o,iconNode:e,className:cN(`lucide-${oO(AE(n))}`,`lucide-${n}`,s),...a}));return t.displayName=AE(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Os=Se("activity",fO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],vt=Se("arrow-left",hO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],pO=Se("arrow-up",mO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],uN=Se("award",gO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],xO=Se("bell-off",yO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],bO=Se("bell",vO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],wE=Se("book-open",_O);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],N0=Se("book",TO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Ms=Se("brain",EO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],AO=Se("briefcase",SO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],NO=Se("building-2",wO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],IO=Se("calculator",CO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],RO=Se("calendar",kO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Vc=Se("chart-no-axes-column",MO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$o=Se("chevron-right",DO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ys=Se("circle-check-big",PO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],cl=Se("circle-x",LO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ba=Se("clock",UO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Af=Se("copy",VO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],dN=Se("download",OO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],GO=Se("eye",jO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],HO=Se("file-search",BO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Br=Se("file-text",zO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],qO=Se("funnel",FO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],$O=Se("git-merge",KO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],JO=Se("globe",YO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],fN=Se("graduation-cap",QO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ki=Se("grid-3x3",WO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],wf=Se("hash",XO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],lh=Se("heart",ZO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],C0=Se("history",ej);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],nj=Se("info",tj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],ij=Se("landmark",sj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],aj=Se("layout-grid",rj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],hN=Se("lightbulb",oj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Bs=Se("loader-circle",lj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],uj=Se("lock",cj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],fj=Se("log-out",dj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Nf=Se("map",hj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],pj=Se("message-circle",mj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],I0=Se("message-square",gj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],mN=Se("moon",yj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],vj=Se("package",xj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],_j=Se("palette",bj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],$c=Se("pause",Tj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],NE=Se("pen-tool",Ej);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ch=Se("play",Sj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],wj=Se("plus",Aj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Cj=Se("refresh-cw",Nj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],kj=Se("repeat",Ij);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Mj=Se("rocket",Rj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],pg=Se("rotate-ccw",Dj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],pN=Se("save",Pj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ap=Se("search",Lj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gN=Se("settings",Uj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],Oj=Se("shapes",Vj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Gj=Se("share-2",jj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Hj=Se("shield-check",Bj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],yN=Se("sun",zj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ha=Se("target",Fj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],gg=Se("timer",qj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Cf=Se("trash-2",Kj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Yj=Se("trending-up",$j);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yg=Se("triangle-alert",Jj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Wj=Se("trophy",Qj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],If=Se("type",Xj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],k0=Se("upload",Zj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],R0=Se("user",e9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],n9=Se("users",t9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],i9=Se("volume-2",s9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],a9=Se("volume-x",r9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xN=Se("x",o9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Yr=Se("zap",l9),c9=()=>{const[n,e]=F.useState(!1),[t,s]=F.useState(1500),[a,o]=F.useState(!1),[c,f]=F.useState("focus");F.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),F.useEffect(()=>{let A=null;return a&&t>0?A=setInterval(()=>{s(t-1)},1e3):t===0&&(o(!1),p()),()=>clearInterval(A)},[a,t]);const p=()=>{new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play().catch(N=>console.log("Audio play failed",N)),"Notification"in window&&Notification.permission==="granted"&&new Notification(c==="focus"?"Fokus Selesai!":"Istirahat Selesai!",{body:c==="focus"?"Waktunya istirahat sejenak.":"Kembali fokus belajar!",icon:"/favicon.ico"})},m=()=>o(!a),v=()=>{o(!1),s(c==="focus"?1500:300)},_=()=>{const A=c==="focus"?"break":"focus";f(A),s(A==="focus"?1500:300),o(!1)},T=A=>{const N=Math.floor(A/60),C=A%60;return`${N.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`};return n?u.jsxs("div",{className:"fixed bottom-6 right-6 w-80 bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 z-50 overflow-hidden animate-fade-in-up",children:[u.jsxs("div",{className:`p-4 ${c==="focus"?"bg-indigo-600":"bg-emerald-500"} text-white flex justify-between items-center`,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(gg,{size:20}),u.jsx("span",{className:"font-bold",children:c==="focus"?"Fokus":"Istirahat"})]}),u.jsx("button",{onClick:()=>e(!1),className:"hover:bg-white/20 p-1 rounded",children:u.jsx(xN,{size:18})})]}),u.jsxs("div",{className:"p-6 flex flex-col items-center",children:[u.jsx("div",{className:"text-5xl font-mono font-bold text-slate-800 dark:text-slate-100 mb-6 tracking-wider",children:T(t)}),u.jsxs("div",{className:"flex gap-4 mb-6",children:[u.jsx("button",{onClick:m,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:a?u.jsx($c,{size:24}):u.jsx(ch,{size:24})}),u.jsx("button",{onClick:v,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:u.jsx(pg,{size:24})})]}),u.jsxs("button",{onClick:_,className:"text-sm text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 underline",children:["Ganti ke Mode ",c==="focus"?"Istirahat":"Fokus"]})]})]}):u.jsxs("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-full shadow-xl z-50 flex items-center gap-2 transition-all",children:[u.jsx(gg,{size:24}),u.jsx("span",{className:"font-semibold hidden sm:inline",children:"Pomodoro"})]})},u9=({data:n,onNext:e})=>{const[t,s]=F.useState(!1);return u.jsxs("div",{className:"w-full max-w-xl mx-auto perspective-1000",children:[u.jsxs("div",{className:`relative w-full h-80 transition-transform duration-700 transform-style-3d cursor-pointer ${t?"rotate-y-180":""}`,onClick:()=>s(!t),children:[u.jsx("div",{className:"absolute w-full h-full bg-white rounded-2xl shadow-xl border-2 border-indigo-100 flex items-center justify-center p-8 backface-hidden",children:u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:"inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-bold mb-4",children:"QUESTION"}),u.jsx("p",{className:"text-2xl font-medium text-slate-800 leading-relaxed",children:n.front}),u.jsx("p",{className:"mt-8 text-slate-400 text-sm animate-pulse",children:"Tap to flip"})]})}),u.jsx("div",{className:"absolute w-full h-full bg-indigo-600 rounded-2xl shadow-xl flex items-center justify-center p-8 backface-hidden rotate-y-180",children:u.jsxs("div",{className:"text-center text-white",children:[u.jsx("span",{className:"inline-block px-3 py-1 bg-white/20 text-white rounded-full text-xs font-bold mb-4",children:"ANSWER"}),u.jsx("p",{className:"text-xl leading-relaxed",children:n.back})]})})]}),t&&u.jsxs("div",{className:"mt-8 flex justify-center gap-3",children:[u.jsx("button",{onClick:()=>{s(!1),e("hard")},className:"px-6 py-2 bg-rose-100 text-rose-700 rounded-lg hover:bg-rose-200 font-medium transition",children:"Sulit (1m)"}),u.jsx("button",{onClick:()=>{s(!1),e("medium")},className:"px-6 py-2 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 font-medium transition",children:"Sedang (10m)"}),u.jsx("button",{onClick:()=>{s(!1),e("easy")},className:"px-6 py-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 font-medium transition",children:"Mudah (4d)"})]})]})},vN=({node:n,depth:e=0})=>u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("div",{className:`
        border-2 px-4 py-2 rounded-xl text-center font-medium shadow-sm transition-all hover:scale-105
        ${e===0?"bg-indigo-600 text-white border-indigo-600 mb-4 text-lg":""}
        ${e===1?"bg-white text-indigo-700 border-indigo-200 mb-4 text-base":""}
        ${e>1?"bg-slate-50 text-slate-600 border-slate-200 text-sm":""}
      `,children:n.label}),n.children&&n.children.length>0&&u.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:gap-8 relative pt-4",children:[u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-px h-4 bg-slate-300"}),u.jsx("div",{className:"absolute top-0 left-4 right-4 h-px bg-slate-300"}),n.children.map((t,s)=>u.jsxs("div",{className:"flex flex-col items-center relative",children:[u.jsx("div",{className:"w-px h-4 bg-slate-300 mb-1"}),u.jsx(vN,{node:t,depth:e+1})]},s))]})]}),d9=({data:n})=>{const e=n.root||n;return u.jsx("div",{className:"p-8 bg-slate-50 rounded-3xl overflow-x-auto border border-slate-200 min-h-[400px] flex justify-center",children:u.jsx(vN,{node:e})})},Ra=({className:n="",height:e="h-4",width:t="w-full"})=>u.jsx("div",{className:`animate-pulse bg-slate-200 dark:bg-slate-700 rounded-md ${e} ${t} ${n}`}),f9=()=>u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[u.jsx(Ra,{height:"h-12",width:"w-12",className:"rounded-full"}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsx(Ra,{height:"h-4",width:"w-1/3"}),u.jsx(Ra,{height:"h-3",width:"w-1/2"})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx(Ra,{height:"h-4"}),u.jsx(Ra,{height:"h-4"}),u.jsx(Ra,{height:"h-4",width:"w-2/3"})]})]}),h9=({onComplete:n})=>{const e=()=>{le.play("click"),n()};return u.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-center p-6 text-center animate-fade-in cursor-pointer",onClick:e,children:[u.jsxs("div",{className:"relative mb-8 group",children:[u.jsx("div",{className:"absolute -inset-4 bg-indigo-500 rounded-full opacity-20 group-hover:opacity-40 blur-xl transition-opacity duration-1000 animate-pulse"}),u.jsx("img",{src:Xd,alt:"Fajmuls Learning",className:"w-48 h-48 md:w-64 md:h-64 object-contain relative z-10 drop-shadow-2xl animate-bounce-slow"})]}),u.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-2 tracking-tight",children:["Fajmuls ",u.jsx("span",{className:"text-indigo-400",children:"Learning"})]}),u.jsx("p",{className:"text-slate-400 text-lg mb-10 max-w-md",children:"Platform Belajar Cerdas Terintegrasi AI"}),u.jsxs("button",{onClick:t=>{t.stopPropagation(),e()},className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] transition-all flex items-center gap-2",children:[u.jsx(Mj,{size:24,className:"text-indigo-600"})," Mulai Belajar"]})]})},m9=({isOpen:n,onClose:e,settings:t,onUpdate:s,userProfile:a,onUpdateUsername:o})=>{var j;const[c,f]=F.useState(!1),[p,m]=F.useState((a==null?void 0:a.username)||""),[v,_]=F.useState(!1),[T,A]=F.useState("");if(!n)return null;const N=L=>{le.play("tap"),s({...t,[L]:!t[L]})},C=L=>{s({...t,volume:parseFloat(L.target.value)})},I=async()=>{if(!a)return;const L=p.trim();if(L.length<3){A("Minimal 3 karakter");return}if(L===a.username){f(!1);return}_(!0),A("");try{await lN(L)?(await WV(a.uid,L),o&&o(L),f(!1),le.play("success")):(A("Username sudah dipakai"),le.play("error"))}catch{A("Gagal mengupdate")}finally{_(!1)}};return u.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700 max-h-[85vh] overflow-y-auto scrollbar-hide",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-white dark:bg-slate-800 z-10 py-2 border-b border-slate-100 dark:border-slate-700",children:[u.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(gN,{size:24,className:"text-slate-400"})," Pengaturan"]}),u.jsx("button",{onClick:()=>{le.play("back"),e()},children:u.jsx(cl,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),u.jsxs("div",{className:"space-y-4",children:[a&&u.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-100 dark:border-indigo-800",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.photoURL?u.jsx("img",{src:a.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full border-2 border-white dark:border-slate-600"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-lg",children:(j=a.username[0])==null?void 0:j.toUpperCase()}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"Akun Google"}),u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 truncate max-w-[150px]",children:a.email})]})]}),u.jsxs("div",{className:"mt-2",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Username"}),c?u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:p,onChange:L=>m(L.target.value),className:"flex-1 px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 text-sm dark:bg-slate-700 dark:text-white",placeholder:"Username baru"}),u.jsx("button",{onClick:I,disabled:v,className:"px-3 py-2 bg-indigo-600 text-white rounded-lg text-xs font-bold hover:bg-indigo-700 disabled:opacity-50",children:v?u.jsx(Bs,{size:14,className:"animate-spin"}):u.jsx(ys,{size:14})}),u.jsx("button",{onClick:()=>{f(!1),m(a.username),A("")},className:"px-2 py-2 text-slate-400 hover:text-rose-500",children:u.jsx(cl,{size:18})})]}):u.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-slate-700 px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-600",children:[u.jsxs("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:["@",a.username]}),u.jsx("button",{onClick:()=>f(!0),className:"text-xs text-indigo-600 dark:text-indigo-400 hover:underline",children:"Ganti"})]}),T&&u.jsx("p",{className:"text-xs text-rose-500 mt-1",children:T})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.darkMode?"bg-indigo-600 text-white":"bg-slate-200 text-slate-500"}`,children:t.darkMode?u.jsx(mN,{size:20}):u.jsx(yN,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Tema Gelap"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Tampilan malam hari."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.darkMode,onChange:()=>N("darkMode")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.soundEnabled?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:t.soundEnabled?u.jsx(i9,{size:20}):u.jsx(a9,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Efek Suara"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Bunyi klik & interaksi."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.soundEnabled,onChange:()=>N("soundEnabled")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex justify-between mb-2",children:[u.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Volume Utama"}),u.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[Math.round(t.volume*100),"%"]})]}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.volume,onChange:C,className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-600 accent-indigo-600"})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.funnyNotifications?"bg-amber-100 text-amber-600":"bg-slate-200 text-slate-500"}`,children:t.funnyNotifications?u.jsx(bO,{size:20}):u.jsx(xO,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Notifikasi Lucu"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Pesan penyemangat unik."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.funnyNotifications,onChange:()=>N("funnyNotifications")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.confirmActions?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:u.jsx(ys,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Konfirmasi Aksi"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Cegah salah pencet."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.confirmActions,onChange:()=>N("confirmActions")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]})]})]})})},p9="Fajmuls22",g9=({category:n,skdStream:e,availablePackages:t,history:s,onSelectPackage:a,onGenerateNew:o,onImportPackage:c,onDeletePackage:f,onBack:p,showToast:m,confirmEnabled:v,onRefresh:_,isLoading:T})=>{F.useEffect(()=>{_()},[]);const[A,N]=F.useState(""),[C,I]=F.useState(!1),[j,L]=F.useState(null),[G,ee]=F.useState(!1),re=F.useRef(null),oe=pe=>{const Re=s.filter(he=>he.packageId===pe);if(Re.length===0)return{attempts:0,highScore:0,avgScore:0};const J=Re.map(he=>he.score);return{attempts:Re.length,highScore:Math.max(...J),avgScore:Math.round(J.reduce((he,be)=>he+be,0)/J.length),lastAttemptDate:Re[0].date}},M=(pe,Re)=>{le.play("click"),L({type:pe,payload:Re}),N(""),I(!0)},D=()=>{var pe;if(!A){m("Masukkan token akses!","error");return}A===p9?(I(!1),le.play("success"),(j==null?void 0:j.type)==="GENERATE"?R():(j==null?void 0:j.type)==="IMPORT"?(pe=re.current)==null||pe.click():(j==null?void 0:j.type)==="DELETE"&&O(j.payload)):(le.play("error"),m("Token salah! Akses ditolak.","error"))},R=async()=>{ee(!0);try{await o("verified_client")}catch(pe){console.error(pe)}finally{ee(!1)}},O=pe=>{f(pe)},V=(pe,Re)=>{pe.stopPropagation();const J=JSON.stringify(Re,null,2),he=new Blob([J],{type:"application/json"}),be=URL.createObjectURL(he),Ae=document.createElement("a");Ae.href=be,Ae.download=`${Re.title.replace(/\s+/g,"_")}.json`,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),URL.revokeObjectURL(be),m("Paket Soal berhasil didownload","success")},B=()=>{le.play("click"),_()},U=t.filter(pe=>pe.category===n&&(!e||pe.skdStream===e)).sort((pe,Re)=>pe.title.localeCompare(Re.title,void 0,{numeric:!0,sensitivity:"base"}));return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center relative",children:[C&&u.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"flex flex-col items-center mb-6",children:[u.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mb-4",children:u.jsx(Hj,{size:32})}),u.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Verifikasi Admin"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center mt-1",children:"Fitur ini dilindungi. Masukkan token untuk melanjutkan."})]}),u.jsx("input",{type:"password",placeholder:"Token Akses...",value:A,onChange:pe=>N(pe.target.value),className:"w-full p-4 border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:border-indigo-600 focus:ring-0 outline-none text-center font-bold tracking-widest",autoFocus:!0,onKeyDown:pe=>pe.key==="Enter"&&D()}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>I(!1),className:"flex-1 py-3 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Batal"}),u.jsx("button",{onClick:D,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Verifikasi"})]})]})}),u.jsxs("div",{className:"max-w-4xl w-full",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("button",{onClick:p,className:"flex items-center gap-2 text-slate-500 hover:text-indigo-600",children:[u.jsx(vt,{size:20})," Kembali"]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white hidden sm:block",children:["Pilih Paket Soal ",n]}),u.jsx("button",{onClick:B,disabled:T,className:"p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:shadow-sm transition disabled:opacity-50",title:"Refresh Paket Soal",children:u.jsx(Cj,{size:20,className:T?"animate-spin":""})})]})]}),u.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6 sm:hidden",children:["Pilih Paket Soal ",n]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-8",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[u.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[u.jsx(uj,{size:18,className:"text-slate-400"})," Admin Zone"]}),u.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[u.jsxs("button",{onClick:()=>M("GENERATE"),disabled:G,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-indigo-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition shadow-sm",children:[G?u.jsx(Bs,{className:"animate-spin",size:18}):u.jsx(wj,{size:18}),u.jsx("span",{children:"Buat Paket AI"})]}),u.jsxs("button",{onClick:()=>M("IMPORT"),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-white dark:bg-slate-700 text-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 px-5 py-2.5 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition shadow-sm",children:[u.jsx(k0,{size:18}),u.jsx("span",{children:"Import"})]})]})]}),u.jsx("input",{type:"file",ref:re,className:"hidden",accept:".json",multiple:!0,onChange:pe=>{pe.target.files&&pe.target.files.length>0&&c(pe.target.files),re.current&&(re.current.value="")}})]}),T&&U.length===0?u.jsxs("div",{className:"py-20 text-center text-slate-500",children:[u.jsx(Bs,{className:"animate-spin mx-auto mb-2"}),u.jsx("p",{children:"Memuat paket soal terbaru..."})]}):u.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:U.map(pe=>{const Re=oe(pe.id);return u.jsxs("button",{onClick:()=>a(pe),className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 transition text-left group relative overflow-hidden w-full shadow-sm hover:shadow-md",children:[pe.isAiGenerated&&u.jsx("div",{className:"absolute top-0 right-0 bg-indigo-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg",children:"AI Generated"}),u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2 group-hover:text-indigo-600 transition-colors pr-8 line-clamp-2",children:pe.title}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{onClick:J=>V(J,pe),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Download JSON Soal",children:u.jsx(dN,{size:18})}),u.jsx("div",{onClick:J=>{J.stopPropagation(),M("DELETE",pe.id)},className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Hapus Paket (Butuh Token)",children:u.jsx(Cf,{size:18})})]})]}),u.jsxs("div",{className:"flex gap-4 text-xs text-slate-500 dark:text-slate-400 mb-4 items-center",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Ba,{size:12})," ",pe.durationMinutes," Menit"]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Br,{size:12})," ",pe.questions.length," Soal"]}),pe.version==="v2"&&u.jsx("span",{className:"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300 font-bold px-2 py-0.5 rounded-full text-[10px] border border-purple-200 dark:border-purple-800",children:"v2"})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-xl p-3 grid grid-cols-3 gap-2 text-center",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Percobaan"}),u.jsxs("div",{className:"text-lg font-bold text-slate-800 dark:text-white",children:[Re.attempts,"x"]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Tertinggi"}),u.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:Re.highScore})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Rata-rata"}),u.jsx("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:Re.avgScore})]})]})]},pe.id)})})]})]})},y9=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-sm font-sans"})},x9=({answers:n,questions:e,onHome:t,onRetry:s,category:a,details:o})=>{const c=n.filter(C=>C.isCorrect).length;let f=(o==null?void 0:o.total)||(o==null?void 0:o.average)||(o==null?void 0:o.iqScore)||Math.round(c/e.length*100);if(a==="GENERAL"&&!o){const C=n.reduce((I,j)=>I+(j.scoreEarned||0),0);f=Math.round(C/(e.length||1))}const[p,m]=F.useState(""),[v,_]=F.useState(!1),T=n.filter(C=>!C.isCorrect),A=Array.from(new Set(T.map(C=>{var j,L;const I=e.find(G=>G.id===C.questionId);return((j=I==null?void 0:I.metadata)==null?void 0:j.subtest)||((L=I==null?void 0:I.metadata)==null?void 0:L.topic)||"General"}))),N=async()=>{_(!0);try{const C=await L4(A);m(C)}catch{alert("Gagal memuat saran AI.")}finally{_(!1)}};return u.jsx("div",{className:"min-h-screen bg-white dark:bg-slate-900 p-6 md:p-12 flex flex-col items-center transition-colors",children:u.jsxs("div",{className:"max-w-2xl w-full text-center",children:[u.jsx("div",{className:"inline-block p-4 rounded-full bg-slate-50 dark:bg-slate-800 mb-6",children:f>=(a==="UTBK"?600:70)?u.jsx(uN,{size:48,className:"text-emerald-500"}):u.jsx(Os,{size:48,className:"text-amber-500"})}),u.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Sesi Selesai!"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut adalah analisis hasil belajar Anda."}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[u.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:"Skor Akhir"}),u.jsx("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:f})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[u.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:a==="GENERAL"?"Poin":"Akurasi"}),u.jsx("div",{className:"text-4xl font-black text-indigo-600 dark:text-indigo-400",children:a==="GENERAL"?f:`${Math.round(c/e.length*100)}%`})]})]}),a==="UTBK"&&o&&u.jsxs("div",{className:"mb-8 w-full bg-slate-50 dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-4",children:[u.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 text-left border-b border-slate-200 dark:border-slate-700 pb-2",children:"Rincian Subtes (IRT)"}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Penalaran Umum:"})," ",u.jsx("b",{children:o.pu})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"PPU:"})," ",u.jsx("b",{children:o.ppu})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"PBM:"})," ",u.jsx("b",{children:o.pbm})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Kuantitatif:"})," ",u.jsx("b",{children:o.pk})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Lit. B.Indo:"})," ",u.jsx("b",{children:o.lbi})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Lit. B.Inggris:"})," ",u.jsx("b",{children:o.lbe})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Penalaran Math:"})," ",u.jsx("b",{children:o.pm})]})]})]}),A.length>0&&u.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/10 border border-rose-100 dark:border-rose-900 p-6 rounded-2xl mb-8 text-left w-full",children:[u.jsxs("h3",{className:"font-bold text-rose-800 dark:text-rose-400 flex items-center gap-2",children:[u.jsx(Ha,{size:20})," Topik Perlu Perbaikan"]}),u.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:A.slice(0,5).map(C=>u.jsx("span",{className:"bg-white dark:bg-rose-900/40 text-rose-600 dark:text-rose-200 px-3 py-1 rounded-full text-xs font-bold border border-rose-200 dark:border-rose-800",children:C},C))}),p?u.jsxs("div",{className:"mt-4 pt-4 border-t border-rose-200 dark:border-rose-800",children:[u.jsx("h4",{className:"font-bold text-sm text-rose-800 dark:text-rose-400 mb-2",children:"Saran AI:"}),u.jsx("div",{className:"prose prose-sm prose-rose max-w-none text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 p-4 rounded-xl border border-rose-100 dark:border-rose-800",children:u.jsx(y9,{text:p})})]}):u.jsxs("button",{onClick:N,disabled:v,className:"text-sm font-bold text-rose-700 dark:text-rose-400 underline flex items-center gap-1 hover:text-rose-900 dark:hover:text-rose-300",children:[v?u.jsx(Bs,{className:"animate-spin",size:14}):u.jsx(hN,{size:14}),"Minta Saran Perbaikan AI"]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden text-left mb-8 w-full",children:[u.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 border-b border-slate-100 dark:border-slate-600 font-bold text-slate-700 dark:text-slate-200",children:"Detail Jawaban"}),u.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.map((C,I)=>{const j=n.find(G=>G.questionId===C.id),L=j==null?void 0:j.isCorrect;return u.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-750 transition",children:[u.jsxs("div",{className:"flex justify-between items-start mb-1",children:[u.jsxs("span",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:["Soal ",I+1]}),L?u.jsx(ys,{size:16,className:"text-emerald-500"}):u.jsx(cl,{size:16,className:"text-rose-500"})]}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2",children:C.content})]},I)})})]}),u.jsxs("div",{className:"flex gap-4 w-full",children:[u.jsx("button",{onClick:t,className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ke Menu Utama"}),u.jsx("button",{onClick:s,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Coba Lagi"})]})]})})},CE=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},kf=n=>n.category==="PSIKOTEST"&&n.details&&"speedPerMinute"in n.details,bN=n=>n.category==="KECERMATAN"&&n.details&&"averageSpeed"in n.details,Wd=n=>n.category==="PSIKOTEST"&&n.details&&"iqScore"in n.details,v9=n=>{switch(n){case"UTBK":return{icon:fN,color:"text-rose-600",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800"};case"SKD":return{icon:AO,color:"text-amber-600",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800"};case"PSIKOTEST":return{icon:Ms,color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800"};case"TPA":return{icon:Yr,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800"};case"KECERMATAN":return{icon:GO,color:"text-emerald-600",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800"};case"INTERVIEW":return{icon:I0,color:"text-cyan-600",bg:"bg-cyan-100 dark:bg-cyan-900/30",border:"border-cyan-200 dark:border-cyan-800"};case"BUTAWRNA":return{icon:_j,color:"text-pink-600",bg:"bg-pink-100 dark:bg-pink-900/30",border:"border-pink-200 dark:border-pink-800"};case"SKRIPSI":return{icon:N0,color:"text-indigo-600",bg:"bg-indigo-100 dark:bg-indigo-900/30",border:"border-indigo-200 dark:border-indigo-800"};default:return{icon:Br,color:"text-slate-600",bg:"bg-slate-100 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"}}},ji=(n,e="PERCENT")=>{let t="",s="";return e==="IQ"?n>=130?(t="Sempurna (Genius)",s="text-cyan-500 dark:text-cyan-400"):n>=120?(t="Istimewa (Superior)",s="text-teal-500 dark:text-teal-400"):n>=110?(t="Sangat Baik (High Avg)",s="text-emerald-500 dark:text-emerald-400"):n>=90?(t="Baik (Average)",s="text-indigo-500 dark:text-indigo-400"):n>=80?(t="Cukup (Low Avg)",s="text-amber-500 dark:text-amber-400"):n>=70?(t="Buruk (Borderline)",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"):n===100?(t="Sempurna",s="text-cyan-500 dark:text-cyan-400"):n>=95?(t="Istimewa",s="text-teal-500 dark:text-teal-400"):n>=85?(t="Sangat Baik",s="text-emerald-500 dark:text-emerald-400"):n>=70?(t="Baik",s="text-lime-600 dark:text-lime-500"):n>=55?(t="Cukup",s="text-amber-500 dark:text-amber-400"):n>=40?(t="Buruk",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"),{text:t,color:s}},IE=(n,e)=>{const t=e>0?n/e*100:0;return ji(t,"PERCENT").color},kE=n=>{if(n<60)return`${Math.round(n)}s`;const e=Math.floor(n/60),t=Math.round(n%60);return`${e}m ${t}s`},_N=n=>n==="SIMBOL"||n==="SAMA_BEDA"?"SAMA BEDA SIMBOL":n==="SIMBOL_HILANG"?"SIMBOL HILANG":n==="ANGKA"?"ANGKA HILANG":n==="HURUF"?"HURUF HILANG":n,b9=({history:n,onBack:e,onReview:t,username:s,onExport:a,onImport:o,onDelete:c})=>{const[f,p]=F.useState("ALL"),[m,v]=F.useState(null),_=F.useRef(null),T=n.filter(L=>f==="ALL"||L.category===f),A=T.length,N=A>0?Math.round(T.reduce((L,G)=>L+G.score,0)/A):0,C=A>0?Math.max(...T.map(L=>L.score)):0,I=(L,G)=>{L.stopPropagation(),le.play("click"),v(G)},j=()=>{m&&(c(m),v(null))};return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 md:p-6 transition-colors",children:[m&&u.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-400",children:u.jsx(Cf,{size:24})}),u.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Hapus Riwayat?"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Data hasil tes ini akan dihapus secara permanen dan tidak dapat dikembalikan."}),u.jsxs("div",{className:"flex gap-3 w-full",children:[u.jsx("button",{onClick:()=>v(null),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Batal"}),u.jsx("button",{onClick:j,className:"flex-1 py-3 bg-rose-600 text-white rounded-xl font-bold hover:bg-rose-700 transition",children:"Hapus"})]})]})})}),u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:u.jsx(vt,{size:20})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Riwayat Belajar"}),u.jsxs("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[u.jsx(R0,{size:12})," ",s]})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold text-xs hover:bg-slate-50 dark:hover:bg-slate-700 transition shadow-sm",children:[u.jsx(dN,{size:14})," Backup"]}),u.jsxs("button",{onClick:()=>{var L;return(L=_.current)==null?void 0:L.click()},className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-800 rounded-xl font-bold text-xs hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition shadow-sm",children:[u.jsx(k0,{size:14})," Restore"]}),u.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:L=>{var G;(G=L.target.files)!=null&&G[0]&&o(L.target.files[0]),_.current&&(_.current.value="")}})]})]}),u.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-4 scrollbar-hide",children:[u.jsx("button",{onClick:()=>p("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${f==="ALL"?"bg-slate-900 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Semua"}),GE.map(L=>u.jsx("button",{onClick:()=>p(L.id),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${f===L.id?"bg-indigo-600 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:L.name},L.id))]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[u.jsx(qO,{size:14})," Total Tes"]}),u.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:A})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[u.jsx(Yj,{size:14})," Avg Skor"]}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:N})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[u.jsx(uN,{size:14})," Tertinggi"]}),u.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-500",children:C})]})]}),u.jsx("div",{className:"space-y-4",children:T.length===0?u.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700 text-slate-400",children:[u.jsx(C0,{size:48,className:"mx-auto mb-4 opacity-20"}),u.jsx("p",{children:"Tidak ada riwayat untuk kategori ini."})]}):T.map(L=>{const G=v9(L.category),ee=G.icon,re=L.questions?L.questions.length:0,oe=L.answers?L.answers.length:0,M=L.answers?L.answers.filter($=>$.isCorrect).length:0,D=oe-M,R=L.answers?L.answers.reduce(($,ce)=>$+(ce.timeTakenSeconds||0),0):0,O=kE(R),V=kf(L),B=bN(L),U=Wd(L);let pe=L.category;L.category==="TPA"?pe="TPA & Bahasa Inggris":L.category==="PSIKOTEST"&&kf(L)?pe="Tes Koran / Pauli":L.category==="PSIKOTEST"&&Wd(L)?pe="Psikotes (IQ & Logika)":L.category==="KECERMATAN"&&(pe="Tes Kecermatan"),L.packageTitle&&(pe=L.packageTitle);let Re=L.score.toString(),J="SKOR",he={text:"-",color:"text-slate-500"};if(B){const $=L.details;Re=$.accuracy+"%",J="AKURASI",he=ji($.accuracy,"PERCENT")}else if(V){const $=L.details;Re=$.accuracy+"%",J="AKURASI",he=ji($.accuracy,"PERCENT")}else if(U){const $=L.details.iqScore||L.score;Re=$.toString(),J="IQ SCORE",he=ji($,"IQ")}else{const $=L.maxScore>0?L.score/L.maxScore*100:0;he=ji($,"PERCENT")}const be=he.color;let Ae=M,xe=D,H=0,ne=0,Z={val:0,index:0},K=[];if(B){const $=L.details;Ae=$.totalCorrect,xe=$.totalWrong,H=$.averageSpeed,ne=$.stability,K=$.sectionData.map(ce=>ce.correct)}else if(V){const $=L.details;Ae=$.totalCorrect,xe=$.totalWrong,H=$.speedPerMinute,ne=$.consistencyScore,K=$.intervalData}if(K&&K.length>0){const $=Math.max(...K),ce=K.indexOf($);Z={val:$,index:ce+1}}return u.jsxs("div",{onClick:()=>t(L),className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 hover:shadow-lg hover:border-indigo-300 dark:hover:border-indigo-500 transition group relative overflow-hidden cursor-pointer",children:[u.jsxs("div",{className:"absolute top-0 right-0 z-10 flex",children:[L.isAborted&&u.jsx("span",{className:"bg-amber-500 text-white text-[10px] px-2 py-1 font-bold rounded-bl-lg",children:"TIDAK SELESAI"}),L.details&&L.details.passed!==void 0&&u.jsx("span",{className:`text-[10px] px-2 py-1 font-bold rounded-bl-lg text-white ${L.details.passed?"bg-emerald-500":"bg-rose-500"}`,children:L.details.passed?"LULUS":"TIDAK LULUS"})]}),u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${G.bg} ${G.color} border ${G.border}`,children:u.jsx(ee,{size:24})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2 pr-12",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white truncate text-base pr-2",children:pe}),L.packageTitle&&L.packageTitle!==pe&&u.jsxs("p",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-medium truncate flex items-center gap-1 mb-1",children:[u.jsx(vj,{size:10})," ",L.packageTitle]}),u.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-xs mt-1 flex-wrap",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(RO,{size:12})," ",new Date(L.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]}),L.skdStream&&u.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-600 dark:text-slate-300 uppercase",children:L.skdStream}),B&&L.details.mode&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"bg-emerald-100 dark:bg-emerald-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-emerald-700 dark:text-emerald-400 uppercase",children:_N(L.details.mode)}),u.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[u.jsx(Ba,{size:10})," ",O]})]}),V&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"bg-purple-100 dark:bg-purple-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-purple-700 dark:text-purple-400 uppercase",children:"PAULI"}),u.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[u.jsx(Ba,{size:10})," ",O]})]}),Wd(L)&&u.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-indigo-700 dark:text-indigo-400 uppercase",children:"IQ LOGIKA"})]})]}),u.jsxs("div",{className:"text-right shrink-0",children:[u.jsx("div",{className:`text-2xl font-black ${be}`,children:Re}),u.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:J})]})]}),u.jsxs("div",{className:"mt-3",children:[B||V?u.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600 last:border-0 sm:last:border-0",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Total Dijawab"}),u.jsx("span",{className:"font-black text-indigo-600 dark:text-indigo-400",children:Ae+xe})]}),u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Benar/Salah"}),u.jsxs("span",{className:"font-bold",children:[u.jsx("span",{className:"text-emerald-500",children:Ae})," / ",u.jsx("span",{className:"text-rose-500",children:xe})]})]}),u.jsxs("div",{className:"flex flex-col text-center border-r-0 sm:border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Speed Avg"}),u.jsx("span",{className:"font-black text-slate-700 dark:text-slate-200",children:H})]}),u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Stabil"}),u.jsx("span",{className:"font-black text-amber-500",children:ne})]}),u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Peak"}),u.jsxs("span",{className:"font-black text-emerald-500",title:`Highest: ${Z.val} at Interval ${Z.index}`,children:[Z.val,u.jsxs("span",{className:"text-[8px] text-slate-400 font-normal ml-0.5",children:["@",Z.index]})]})]}),u.jsxs("div",{className:"flex flex-col text-center",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Kesimpulan"}),u.jsx("span",{className:`font-black text-[10px] leading-tight ${he.color}`,children:he.text})]})]}):u.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Dijawab"}),u.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:[oe," ",u.jsxs("span",{className:"text-slate-400",children:["/ ",re]})]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Benar / Salah"}),u.jsxs("span",{className:"font-bold text-emerald-600",children:[M," ",u.jsx("span",{className:"text-slate-400",children:"/"})," ",u.jsx("span",{className:"text-rose-500",children:D})]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Waktu"}),u.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:kE(R)})]}),L.category==="SKD"&&L.details&&u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rincian"}),u.jsxs("div",{className:"flex gap-1 text-[8px] font-mono",children:[u.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-400 px-1 rounded",children:["TWK:",L.details.twk]}),u.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-400 px-1 rounded",children:["TIU:",L.details.tiu]}),u.jsxs("span",{className:"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-400 px-1 rounded",children:["TKP:",L.details.tkp]})]})]}),L.category==="UTBK"&&L.details&&u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rata-rata Subtes"}),u.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:L.details.average})]})]}),(V||B)&&K.length>0&&u.jsx("div",{className:"mt-2 h-8 flex items-end gap-0.5 opacity-50 hover:opacity-100 transition-opacity",children:K.map(($,ce)=>{const ye=Math.max(...K,1),Ce=$/ye*100;return u.jsx("div",{className:`flex-1 rounded-t-sm ${ce+1===Z.index?"bg-emerald-500":"bg-slate-300 dark:bg-slate-600"}`,style:{height:`${Ce}%`}},ce)})})]})]})]}),u.jsxs("div",{className:"absolute bottom-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:$=>I($,L.id),className:"p-2 bg-rose-50 dark:bg-rose-900/30 text-rose-600 rounded-full hover:bg-rose-100 dark:hover:bg-rose-900/50 transition z-20",title:"Hapus",children:u.jsx(Cf,{size:14})}),u.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 rounded-full",children:u.jsx($o,{size:14})})]})]},L.id)})})]})]})},_9=({item:n,onBack:e})=>{if(kf(n)||bN(n)){const t=kf(n),s=n.details;let a=[],o=0,c=0,f=0,p=0,m=0,v="",_={text:"-",color:"text-slate-500"};if(t){const N=s;a=N.intervalData||[],o=N.totalCorrect,c=N.totalWrong,f=N.speedPerMinute,p=N.accuracy,m=N.consistencyScore,v="PAULI / KORAN",_=ji(N.accuracy,"PERCENT")}else{const N=s;a=N.sectionData.map(C=>C.correct),o=N.totalCorrect,c=N.totalWrong,f=N.averageSpeed,p=N.accuracy,m=N.stability,v=_N(N.mode),_=ji(N.accuracy,"PERCENT")}let T=0,A=0;return a.length>0&&(T=Math.max(...a),A=a.indexOf(T)+1),u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[u.jsx(vt,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&u.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 p-8",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[u.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl text-indigo-600 dark:text-indigo-400",children:u.jsx(Os,{size:32})}),u.jsxs("div",{children:[u.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Analisis ",v]}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Kesimpulan: ",u.jsx("span",{className:`font-bold ${_.color}`,children:_.text})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Volume Total"}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:o}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Error / Salah"}),u.jsx("div",{className:"text-3xl font-black text-rose-500",children:c}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban salah"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Kecepatan (Avg)"}),u.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:f}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"per menit/bagian"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Akurasi"}),u.jsxs("div",{className:`text-3xl font-black ${ji(p,"PERCENT").color}`,children:[p,"%"]}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"ketelitian kerja"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Stabilitas"}),u.jsx("div",{className:"text-3xl font-black text-amber-500",children:m}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Peak Performance"}),u.jsx("div",{className:"text-3xl font-black text-emerald-500",children:T}),u.jsxs("div",{className:"text-[10px] text-slate-500",children:["tertinggi pada menit ke-",A]})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Grafik Ritme Kerja (Per Menit/Bagian)"}),u.jsx("div",{className:"h-64 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative overflow-x-auto",children:a.map((N,C)=>{const I=Math.max(...a,10),j=N/I*100,L=N===T;return u.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full min-w-[20px]",children:[u.jsx("div",{className:`w-full rounded-t-sm transition-all hover:opacity-80 ${L?"bg-emerald-500":"bg-indigo-600"}`,style:{height:`${j}%`}}),u.jsx("div",{className:"mt-2 text-[10px] font-bold text-slate-400",children:C+1}),u.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-black text-white text-xs p-2 rounded z-10 whitespace-nowrap shadow-xl",children:["Menit ",C+1,": ",N]})]},C)})}),u.jsxs("p",{className:"text-xs text-slate-400 mt-2 text-center",children:["Grafik menunjukkan jumlah jawaban benar per interval. Grafik yang stabil atau naik menandakan ketahanan kerja yang baik.",u.jsx("br",{}),"Peak Performance ditandai dengan warna hijau."]})]})]})]})})}return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[u.jsx(vt,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&u.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),n.category==="SKD"&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TWK"}),u.jsx("div",{className:`text-2xl font-black ${n.details.twk>=65?"text-emerald-600":"text-rose-500"}`,children:n.details.twk}),u.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 65"})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TIU"}),u.jsx("div",{className:`text-2xl font-black ${n.details.tiu>=80?"text-emerald-600":"text-rose-500"}`,children:n.details.tiu}),u.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 80"})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TKP"}),u.jsx("div",{className:`text-2xl font-black ${n.details.tkp>=166?"text-emerald-600":"text-rose-500"}`,children:n.details.tkp}),u.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 166"})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full bg-slate-50 dark:bg-slate-700/50 p-2 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-300 uppercase tracking-widest mb-1",children:"Total"}),u.jsx("div",{className:`text-3xl font-black ${IE(n.score,550)}`,children:n.score})]})]}),n.category==="TPA"&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TPA SCORE"}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:n.details.tpaScore})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TPA BENAR"}),u.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:n.details.tpaCorrect})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TBI SCORE"}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:n.details.tbiScore})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TBI BENAR"}),u.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:n.details.tbiCorrect})]})]}),n.category==="UTBK"&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-200 dark:border-slate-700 pb-2",children:[u.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 text-sm uppercase",children:"Rincian Skor Subtes"}),u.jsxs("div",{className:`text-xl font-black ${IE(n.details.average,1e3)}`,children:["Avg: ",n.details.average]})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:Object.entries(n.details).filter(([t])=>t!=="average").map(([t,s])=>u.jsxs("div",{className:"p-2 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1",children:t.toUpperCase()}),u.jsx("div",{className:"text-xl font-bold text-slate-800 dark:text-white",children:s})]},t))})]}),Wd(n)&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-sm border-2 border-purple-100 dark:border-purple-900 mb-6 text-center relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-purple-50 dark:bg-purple-900/20 rounded-bl-full -mr-4 -mt-4"}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("div",{className:"text-sm font-bold text-purple-400 uppercase tracking-widest mb-2",children:"ESTIMASI IQ ANDA"}),u.jsx("div",{className:`text-6xl font-black mb-4 tracking-tighter ${ji(n.details.iqScore,"IQ").color}`,children:n.details.iqScore}),u.jsx("div",{className:"inline-block px-6 py-2 bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-200 rounded-full font-bold text-lg border border-purple-200 dark:border-purple-700",children:n.details.classification}),u.jsx("p",{className:"text-slate-400 text-xs mt-4 max-w-md mx-auto",children:"*Hasil ini adalah estimasi berdasarkan simulasi tes dan mungkin berbeda dengan tes psikologi profesional."})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[u.jsxs("h2",{className:"text-xl font-bold mb-6 text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(Yr,{size:20,className:"text-amber-500"})," Pembahasan Soal"]}),u.jsx("div",{className:"space-y-6",children:n.questions.map((t,s)=>{var p;const a=n.answers.find(m=>m.questionId===t.id),o=a==null?void 0:a.isCorrect,c=(a==null?void 0:a.scoreEarned)||0;let f="bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300";return c>0?t.tkpPoints?c===5?f="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":f="bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":f="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":f="bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400",u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/30 transition",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:["No. ",s+1]}),u.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide hidden sm:inline",children:(p=t.metadata)==null?void 0:p.subtest})]}),u.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 ${f}`,children:[c>0?u.jsx(ys,{size:12}):u.jsx(cl,{size:12}),c," Poin"]})]}),u.jsx("div",{className:"mb-4 text-slate-800 dark:text-slate-200 font-medium text-base leading-relaxed",children:u.jsx(CE,{text:t.content})}),u.jsxs("div",{className:"grid gap-2 text-sm mb-4",children:[u.jsxs("div",{className:`p-3 rounded-lg border ${o?"bg-emerald-50 border-emerald-200 dark:bg-emerald-900/10 dark:border-emerald-800 text-emerald-800 dark:text-emerald-300":"bg-rose-50 border-rose-200 dark:bg-rose-900/10 dark:border-rose-800 text-rose-800 dark:text-rose-300"}`,children:[u.jsx("span",{className:"font-bold block mb-1",children:"Jawaban Anda:"}),(a==null?void 0:a.selectedAnswer)||"Tidak dijawab"]}),!o&&!t.tkpPoints&&u.jsxs("div",{className:"p-3 rounded-lg border bg-indigo-50 border-indigo-200 dark:bg-indigo-900/10 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[u.jsx("span",{className:"font-bold block mb-1",children:"Kunci Jawaban:"}),t.correctAnswer]}),t.tkpPoints&&u.jsxs("div",{className:"p-3 rounded-lg border bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-slate-600 dark:text-slate-400",children:[u.jsx("span",{className:"font-bold block mb-1",children:"Poin Opsi TKP:"}),u.jsx("ul",{className:"list-disc pl-4 space-y-1",children:t.tkpPoints.sort((m,v)=>v.points-m.points).map((m,v)=>u.jsxs("li",{className:m.option===(a==null?void 0:a.selectedAnswer)?"font-bold text-indigo-600 dark:text-indigo-400":"",children:[m.points," Poin: ",m.option]},v))})]})]}),u.jsxs("div",{className:"mt-3 text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-100 dark:border-slate-700 italic",children:[u.jsx("span",{className:"font-bold not-italic text-slate-700 dark:text-slate-300 block mb-1",children:"Pembahasan:"}),u.jsx(CE,{text:t.explanation})]})]},s)})})]})]})})},wp=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-800 dark:text-slate-200 leading-relaxed"})},T9=({timeLeft:n,onFinish:e})=>(F.useEffect(()=>{n<=0&&e()},[n,e]),u.jsxs("div",{className:"fixed inset-0 z-[60] bg-indigo-600 flex flex-col items-center justify-center text-white px-6",children:[u.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-8 animate-pulse",children:u.jsx(gg,{size:48,className:"text-white"})}),u.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Istirahat Antar Subtes"}),u.jsxs("div",{className:"text-6xl font-mono font-bold mb-8",children:[n,"s"]}),u.jsx("p",{className:"text-xl text-center max-w-md italic opacity-90",children:'"Tarik nafas, persiapkan fokus untuk subtes berikutnya."'}),u.jsx("button",{onClick:e,className:"mt-8 px-6 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-bold",children:"Lewati Istirahat"})]})),E9=({mode:n,questions:e,drillContent:t,onComplete:s,isSkdSimulation:a,isUtbkSimulation:o,category:c,showToast:f})=>{var xe,H,ne;const[p,m]=F.useState(0),[v,_]=F.useState(!1),[T,A]=F.useState(0),[N,C]=F.useState(0),[I,j]=F.useState({}),[L,G]=F.useState(!1),[ee,re]=F.useState(!1),oe=F.useRef(Date.now()),M=()=>o&&kr[0]?kr[0].duration*60:a?6e3:n===qe.SIMULATION?c==="PSIKOTEST"?2400:c==="TPA"?6e3:3600:0,[D,R]=F.useState(M),O=F.useMemo(()=>{if(o){const Z=kr[p].name;return e.filter(K=>{var $,ce;return(ce=($=K.metadata)==null?void 0:$.subtest)==null?void 0:ce.includes(Z)})}return e},[e,o,p]);F.useEffect(()=>{let Z=null;return v&&T>0?Z=setInterval(()=>A(K=>K-1),1e3):v&&T===0?_(!1):D>0&&!L&&n===qe.SIMULATION?Z=setInterval(()=>{R(K=>(K<=11&&K>1&&le.play("tick"),K-1))},1e3):D===0&&n===qe.SIMULATION&&(o?V():B()),()=>clearInterval(Z)},[D,L,v,T,n]);const V=()=>{if(o)if(p<kr.length-1){le.play("success");const Z=p+1;m(Z);const K=kr[Z].duration;R(K*60),C(0),A(30),_(!0)}else B();else B()},B=()=>{le.play("finish"),s(Object.values(I))},U=()=>{const Z=Object.values(I);s(Z,void 0,!0)},pe=async Z=>{var bt;const K=O[N];if(!K)return;le.play("click");let $=0,ce=!1;if(c==="SKD")if(K.tkpPoints&&K.tkpPoints.length>0){const et=K.tkpPoints.find(ct=>ct.option===Z);$=et?et.points:0,ce=$===5}else ce=Z===K.correctAnswer,$=ce?5:0;else if(c==="UTBK"){ce=Z===K.correctAnswer;const et=((bt=K.metadata)==null?void 0:bt.difficulty)||"Medium";$=ce?et==="HOTS"||et==="Hard"?3:et==="Medium"?2:1:0}else ce=Z===K.correctAnswer,$=ce?10:0;let ye="";if(K.type!=="multiple_choice"&&c==="GENERAL")try{const et=await P4(K.content,K.correctAnswer,Z);$=et.score,ce=et.isCorrect,ye=et.feedback}catch{console.error("Grading failed")}const Ce=I[K.id],_e=(Date.now()-oe.current)/1e3,dt={questionId:K.id,selectedAnswer:Z,isCorrect:ce,scoreEarned:$,timeTakenSeconds:((Ce==null?void 0:Ce.timeTakenSeconds)||0)+_e,isOverthinking:!1,isGuessing:_e<5,aiEvaluation:ye,isDoubtful:(Ce==null?void 0:Ce.isDoubtful)||!1};j(et=>({...et,[K.id]:dt})),oe.current=Date.now()},Re=()=>{const Z=O[N];j(K=>{const $=K[Z.id];return $?{...K,[Z.id]:{...$,isDoubtful:!$.isDoubtful}}:{...K,[Z.id]:{questionId:Z.id,selectedAnswer:"",isCorrect:!1,scoreEarned:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,isDoubtful:!0}}})},J=Z=>{const K=Math.floor(Z/3600),$=Math.floor(Z%3600/60),ce=Math.floor(Z%60);return`${K>0?K+":":""}${$.toString().padStart(2,"0")}:${ce.toString().padStart(2,"0")}`},he=(Z,K)=>Z.length===0?null:u.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 border-b border-slate-100 dark:border-slate-700 pb-1",children:K}),u.jsx("div",{className:"grid grid-cols-5 gap-2",children:Z.map(($,ce)=>{const ye=O.findIndex(dt=>dt.id===$.id),Ce=I[$.id];let _e="bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300";return Ce!=null&&Ce.selectedAnswer&&(_e="bg-emerald-500 border-emerald-500 text-white"),Ce!=null&&Ce.isDoubtful&&(_e="bg-amber-400 border-amber-400 text-white"),ye===N&&(_e+=" ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-slate-800"),u.jsx("button",{onClick:()=>{C(ye),re(!1)},className:`aspect-square rounded-lg border flex items-center justify-center font-bold text-sm transition-all ${_e}`,children:ye+1},$.id)})})]});if(v)return u.jsx(T9,{timeLeft:T,onFinish:()=>{_(!1)}});if(O.length===0)return u.jsxs("div",{className:"p-10 text-center",children:[u.jsx(Bs,{className:"animate-spin mx-auto"})," Menyiapkan soal subtes..."]});const be=O[N],Ae=I[be.id];return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row h-screen overflow-hidden transition-colors relative",children:[L&&u.jsx("div",{className:"absolute inset-0 z-50 bg-white/80 dark:bg-slate-900/90 backdrop-blur-md flex flex-col items-center justify-center animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl text-center border border-slate-200 dark:border-slate-700 max-w-sm w-full",children:[u.jsx($c,{size:48,className:"mx-auto mb-4 text-indigo-600"}),u.jsx("h2",{className:"text-2xl font-bold mb-4 dark:text-white",children:"Ujian Dijeda"}),u.jsxs("div",{className:"flex gap-3 justify-center",children:[u.jsxs("button",{onClick:()=>G(!1),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 flex items-center gap-2",children:[u.jsx(ch,{size:20})," Lanjutkan"]}),u.jsx("button",{onClick:U,className:"px-6 py-3 border-2 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700",children:"Keluar (Simpan)"})]})]})}),u.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative order-1",children:[u.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20",children:[u.jsxs("div",{className:"font-bold text-slate-700 dark:text-white text-sm",children:["No. ",N+1]}),u.jsxs("div",{className:"flex items-center gap-2",children:[n===qe.SIMULATION&&u.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs font-mono font-bold dark:text-white",children:J(D)}),u.jsx("button",{onClick:()=>re(!ee),className:"p-2 bg-indigo-50 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 rounded",children:u.jsx(Ki,{size:20})})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:u.jsxs("div",{className:"max-w-3xl mx-auto pb-24",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 md:p-8 mb-6",children:[n===qe.DRILL&&t&&u.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-100 dark:border-indigo-800 text-sm text-slate-700 dark:text-slate-300",children:[u.jsxs("h4",{className:"font-bold text-indigo-700 dark:text-indigo-300 mb-2 flex items-center gap-2",children:[u.jsx(Yr,{size:16})," ",t.topic]}),u.jsx("p",{children:t.summary})]}),u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("span",{className:"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:o?kr[p].name:((xe=be.metadata)==null?void 0:xe.subtest)||"General"}),((H=be.metadata)==null?void 0:H.difficulty)==="HOTS"&&u.jsxs("span",{className:"flex items-center gap-1 text-rose-600 dark:text-rose-400 font-bold text-xs bg-rose-50 dark:bg-rose-900/20 px-2 py-1 rounded-full",children:[u.jsx(Yr,{size:12})," HOTS"]})]}),u.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-8 text-slate-800 dark:text-slate-100",children:u.jsx(wp,{text:be.content})}),be.type==="multiple_choice"?u.jsx("div",{className:"space-y-3",children:(ne=be.options)==null?void 0:ne.map((Z,K)=>{var _e;const $=String.fromCharCode(65+K),ce=(Ae==null?void 0:Ae.selectedAnswer)===Z;let ye="border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-750",Ce="bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 group-hover:bg-slate-200 dark:group-hover:bg-slate-600";return ce&&(ye="border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 dark:border-indigo-500",Ce="bg-indigo-600 text-white"),n!==qe.SIMULATION&&Ae&&((be.tkpPoints?((_e=be.tkpPoints.find(bt=>bt.option===Z))==null?void 0:_e.points)===5:Z===be.correctAnswer)?(ye="border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20",Ce="bg-emerald-500 text-white"):ce&&(ye="border-rose-500 bg-rose-50 dark:bg-rose-900/20",Ce="bg-rose-500 text-white")),u.jsxs("button",{onClick:()=>pe(Z),className:`w-full flex items-start p-4 rounded-xl border-2 transition-all group text-left ${ye}`,children:[u.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm mr-4 transition-colors ${Ce}`,children:$}),u.jsx("div",{className:"flex-1 pt-1 text-slate-700 dark:text-slate-200 text-base",children:u.jsx(wp,{text:Z})})]},K)})}):u.jsxs("div",{children:[" ",u.jsx("textarea",{className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-indigo-500 dark:bg-slate-900 dark:text-white",placeholder:"Ketik jawaban Anda...",rows:4,value:(Ae==null?void 0:Ae.selectedAnswer)||"",onChange:Z=>pe(Z.target.value)})," "]})]}),n!==qe.SIMULATION&&Ae&&u.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800 rounded-2xl p-6 animate-fade-in-up",children:[u.jsxs("h4",{className:"font-bold text-emerald-800 dark:text-emerald-300 mb-3 flex items-center gap-2",children:[u.jsx(hN,{size:20})," Pembahasan"]}),u.jsx("div",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:u.jsx(wp,{text:be.explanation})})]})]})}),u.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 z-10",children:u.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[u.jsxs("button",{onClick:()=>{C(Z=>Math.max(0,Z-1))},disabled:N===0,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",children:[u.jsx(vt,{size:20})," ",u.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),u.jsxs("button",{onClick:Re,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-bold border transition ${Ae!=null&&Ae.isDoubtful?"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-400 border-amber-300 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 border-slate-200 dark:border-slate-600"}`,children:[u.jsx("input",{type:"checkbox",checked:(Ae==null?void 0:Ae.isDoubtful)||!1,readOnly:!0,className:"w-4 h-4 accent-amber-500 cursor-pointer"}),u.jsx("span",{children:"Ragu-ragu"})]}),u.jsxs("button",{onClick:()=>{le.play("click"),N<O.length-1?C(Z=>Z+1):o?V():B()},className:"flex items-center gap-2 px-6 py-2 rounded-lg font-bold bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg",children:[u.jsx("span",{className:"hidden sm:inline",children:N===O.length-1?o&&p<kr.length-1?"Lanjut Subtes":"Selesai":"Berikutnya"}),u.jsx($o,{size:20})]})]})})]}),u.jsxs("div",{className:`fixed inset-y-0 right-0 w-80 bg-white dark:bg-slate-800 border-l border-slate-200 dark:border-slate-700 transform transition-transform duration-300 z-40 flex flex-col order-2 ${ee?"translate-x-0":"translate-x-full"} md:translate-x-0 md:relative md:w-80`,children:[u.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800",children:[u.jsxs("button",{onClick:U,className:"flex items-center gap-2 text-rose-500 font-bold hover:text-rose-600",children:[u.jsx(vt,{size:18})," Keluar (Simpan)"]}),u.jsx("button",{onClick:()=>re(!1),className:"md:hidden text-slate-500",children:u.jsx(cl,{size:24})})]}),n===qe.SIMULATION&&D>0&&u.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 hidden md:block",children:[u.jsxs("div",{className:"flex justify-between items-center mb-3",children:[u.jsx("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Sisa Waktu"}),u.jsxs("button",{onClick:()=>G(!0),className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded font-bold hover:bg-amber-200 flex items-center gap-1",children:[u.jsx($c,{size:12})," Jeda"]})]}),u.jsx("div",{className:"text-3xl font-mono font-bold text-slate-800 dark:text-white text-center",children:J(D)})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:a?u.jsxs(u.Fragment,{children:[he(O.filter(Z=>{var K,$;return($=(K=Z.metadata)==null?void 0:K.subtest)==null?void 0:$.includes("TWK")}),"Tes Wawasan Kebangsaan (TWK)"),he(O.filter(Z=>{var K,$;return($=(K=Z.metadata)==null?void 0:K.subtest)==null?void 0:$.includes("TIU")}),"Tes Intelegensia Umum (TIU)"),he(O.filter(Z=>{var K,$;return($=(K=Z.metadata)==null?void 0:K.subtest)==null?void 0:$.includes("TKP")}),"Tes Karakteristik Pribadi (TKP)")]}):he(O,o?kr[p].name:c)}),u.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 md:hidden",children:u.jsx("button",{onClick:B,className:"w-full py-3 bg-rose-600 text-white rounded-xl font-bold",children:"Hentikan Ujian"})})]}),ee&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>re(!1)})]})},Od=10,Np=60,S9=500,RE=50,A9=(n,e)=>Array.from({length:n},()=>Array.from({length:e},()=>Math.floor(Math.random()*10))),w9=(n,e,t,s,a)=>{let o=0;return n>=400?o+=40:n>=300?o+=30:n>=200?o+=20:o+=10,t>=99?o+=20:t>=97?o+=15:t>=95?o+=10:o+=5,s<3?o+=20:s<6?o+=15:s<9?o+=10:o+=5,a==="NAIK"?o+=20:a==="STABIL"?o+=15:o+=5,o>=90?"Sangat Disarankan (Konsisten & Tinggi)":o>=75?"Disarankan (Baik)":o>=60?"Cukup (Perlu Latihan)":a==="TURUN"&&s>8?"Indikasi Kelelahan / Emosi Tidak Stabil":"Kurang Disarankan"},N9=n=>{if(n.length<2)return"STABIL";const e=Math.floor(n.length/2),t=n.slice(0,e),s=n.slice(e),a=t.reduce((f,p)=>f+p,0)/(t.length||1),c=(s.reduce((f,p)=>f+p,0)/(s.length||1)-a)/a*100;return c>5?"NAIK":c<-10?"TURUN":"STABIL"},C9=({onBack:n,onComplete:e})=>{const[t,s]=F.useState("SETUP"),[a,o]=F.useState([]),[c,f]=F.useState(0),[p,m]=F.useState(0),[v,_]=F.useState(0),[T,A]=F.useState(0),[N,C]=F.useState([]),[I,j]=F.useState(0),[L,G]=F.useState(!1),[ee,re]=F.useState(Od*60),[oe,M]=F.useState(Np),D=()=>{const xe=A9(S9,RE);o(xe),f(0),m(0),_(0),A(0),C([]),j(0),re(Od*60),M(Np),s("PLAYING"),le.play("click")},R=F.useCallback(xe=>{if(t!=="PLAYING")return;const H=a[c][p],ne=a[c][p+1];if(ne===void 0){f(ce=>ce+1),m(0);return}const K=(H+ne)%10;xe===K?(_(ce=>ce+1),j(ce=>ce+1)):(A(ce=>ce+1),le.play("error")),p<RE-2?m(ce=>ce+1):(f(ce=>ce+1),m(0))},[a,c,p,t]);F.useEffect(()=>{const xe=H=>{t==="PLAYING"&&H.key>="0"&&H.key<="9"&&R(parseInt(H.key))};return window.addEventListener("keydown",xe),()=>window.removeEventListener("keydown",xe)},[t,R]),F.useEffect(()=>{if(t!=="PLAYING")return;const xe=setInterval(()=>{re(H=>H<=1?(B(),0):H-1),M(H=>(H<=6&&H>1&&le.play("tick"),H<=1?(le.play("success"),V(),Np):H-1))},1e3);return()=>clearInterval(xe)},[t,I]);const O=F.useRef(0);F.useEffect(()=>{O.current=I},[I]);const V=()=>{const xe=O.current;C(H=>[...H,xe]),j(0),G(!0),setTimeout(()=>G(!1),2e3)},B=(xe=!1)=>{const H=O.current;H>0&&C(ne=>[...ne,H]),s("FINISHED"),xe||le.play("finish")},U=()=>{const xe=v+T,H=(Od*60-ee)/60,ne=H<.1?.1:H,Z=ne>0?Math.round(v/ne):0,K=xe>0?v/xe*100:0;let $=0;if(N.length>0){const Ce=N.reduce((dt,bt)=>dt+bt,0)/N.length,_e=N.reduce((dt,bt)=>dt+Math.pow(bt-Ce,2),0)/N.length;$=Math.sqrt(_e)}const ce=N9(N),ye=w9(v,Z,K,$,ce);return{totalCorrect:v,totalWrong:T,totalAttempts:xe,totalColumns:c,speedPerMinute:Z,consistencyScore:parseFloat($.toFixed(2)),accuracy:Math.round(K),intervalData:N,interpretation:{verdict:ye,speedDesc:Z>50?"Sangat Cepat":Z>35?"Cepat":"Sedang",accDesc:K>98?"Sangat Teliti":K>92?"Teliti":"Kurang Teliti",stabDesc:ce==="TURUN"?"Menurun (Lelah)":$<4?"Stabil":"Fluktuatif",trend:ce}}},pe=xe=>{const H=Math.floor(xe/60),ne=xe%60;return`${H}:${ne.toString().padStart(2,"0")}`},Re=()=>{const xe=U(),H={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:xe.totalCorrect,maxScore:0,details:xe,questions:[],answers:[],isAborted:!0};e(H)};if(t==="SETUP")return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-700 animate-fade-in-up",children:[u.jsxs("div",{className:"p-8 bg-indigo-600 text-white text-center relative overflow-hidden",children:[u.jsx(Os,{size:64,className:"mx-auto mb-4 relative z-10"}),u.jsx("h1",{className:"text-3xl font-black relative z-10",children:"Tes Pauli Digital"}),u.jsx("p",{className:"opacity-90 relative z-10 text-sm mt-2",children:"Uji Ketahanan & Stabilitas Kerja"})]}),u.jsxs("div",{className:"p-8 space-y-6",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl text-sm text-slate-600 dark:text-slate-300 space-y-3",children:[u.jsxs("p",{className:"flex items-center gap-3",children:[u.jsx(Ba,{size:18,className:"text-indigo-500 shrink-0"})," ",u.jsxs("span",{children:[u.jsx("strong",{children:"Durasi:"})," ",Od," Menit"]})]}),u.jsxs("p",{className:"flex items-center gap-3",children:[u.jsx(Os,{size:18,className:"text-emerald-500 shrink-0"})," ",u.jsxs("span",{children:[u.jsx("strong",{children:"Instruksi:"})," Jumlahkan dua angka yang berdekatan. Masukkan digit satuan saja (misal: 12  2)."]})]}),u.jsxs("p",{className:"flex items-center gap-3",children:[u.jsx(Vc,{size:18,className:"text-amber-500 shrink-0"})," ",u.jsxs("span",{children:[u.jsx("strong",{children:"Garis:"})," Setiap 1 menit, muncul tanda 'Garis'. Tetap lanjutkan menghitung."]})]})]}),u.jsxs("button",{onClick:D,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2 hover:scale-105 transform duration-200",children:[u.jsx(ch,{size:24,fill:"currentColor"})," Mulai Tes"]}),u.jsx("button",{onClick:n,className:"w-full py-3 text-slate-500 hover:text-indigo-600 font-bold text-sm transition",children:"Kembali"})]})]})});if(t==="FINISHED"){const xe=U(),H={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:xe.totalCorrect,maxScore:0,details:xe,questions:[],answers:[]};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 flex items-center justify-center animate-fade-in",children:u.jsxs("div",{className:"max-w-4xl w-full bg-white dark:bg-slate-800 rounded-3xl shadow-xl p-8 border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white",children:"Analisis Profil Kerja"}),u.jsx("div",{className:"mt-4 inline-block px-6 py-2 bg-indigo-600 text-white text-xl font-bold rounded-full shadow-lg",children:xe.interpretation.verdict})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(Os,{size:14})," Prestasi (Total)"]}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:xe.totalCorrect}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(Ba,{size:14})," Tempo"]}),u.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:xe.speedPerMinute}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"rata-rata/menit"})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(ys,{size:14})," Ketelitian"]}),u.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-400",children:xe.totalWrong}),u.jsxs("div",{className:"text-[10px] text-slate-500",children:["kesalahan (",xe.interpretation.accDesc,")"]})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(Vc,{size:14})," Stabilitas"]}),u.jsx("div",{className:"text-3xl font-black text-amber-500",children:xe.consistencyScore}),u.jsxs("div",{className:"text-[10px] text-slate-500",children:["deviasi (",xe.interpretation.trend,")"]})]})]}),u.jsxs("div",{className:"mb-8",children:[u.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 flex items-center gap-2",children:[u.jsx(Vc,{size:18})," Grafik Ritme Kerja (Per 1 Menit)"]}),u.jsx("div",{className:"h-48 flex items-end gap-1 p-2 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-x-auto",children:xe.intervalData.map((ne,Z)=>{const K=Math.max(...xe.intervalData,1),$=ne/K*100;return u.jsxs("div",{className:"flex-1 min-w-[20px] bg-indigo-500/80 hover:bg-indigo-500 transition-all rounded-t relative group",style:{height:`${$}%`},children:[u.jsx("div",{className:"absolute bottom-0 w-full text-center text-[8px] text-white/50",children:Z+1}),u.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg",children:ne})]},Z)})}),u.jsx("p",{className:"text-xs text-slate-400 mt-2 text-center",children:"Grafik yang menurun drastis menunjukkan indikasi kelelahan."})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>{s("SETUP")},className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ulangi Tes"}),u.jsxs("button",{onClick:()=>e(H),className:"flex-1 py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[u.jsx(pN,{size:20})," Simpan & Keluar"]})]})]})})}const J=a[c]||[],he=J[p],be=J[p+1],Ae=[1,2,3,4,5,6,7,8,9,0];return u.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"px-6 py-3 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Waktu"}),u.jsx("div",{className:"text-xl font-mono font-bold text-slate-800 dark:text-white",children:pe(ee)})]}),u.jsxs("div",{className:"text-center pl-4 border-l border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Prestasi"}),u.jsx("div",{className:"text-xl font-bold text-emerald-600",children:v})]})]}),u.jsx("button",{onClick:()=>s("PAUSED"),className:"p-3 bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:u.jsx($c,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),L&&u.jsx("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-50 bg-amber-500 text-white px-6 py-2 rounded-full font-bold shadow-lg animate-pulse border-2 border-white",children:"GARIS!  LANJUT HITUNG"}),u.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative p-4",children:u.jsxs("div",{className:"flex flex-col items-center gap-2 transform scale-110",children:[u.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:p>0?J[p-1]:"-"}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-xl border-4 border-indigo-100 dark:border-slate-700 flex flex-col items-center gap-2 w-64 animate-fade-in-up",children:[u.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:he}),u.jsx("div",{className:"w-16 h-1 bg-slate-200 dark:bg-slate-600 rounded-full my-1"}),u.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:be!==void 0?be:"-"})]}),u.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:J[p+2]!==void 0?J[p+2]:"-"})]})}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 pb-8 border-t border-slate-200 dark:border-slate-700 shrink-0 z-30",children:[u.jsx("div",{className:"max-w-md mx-auto grid grid-cols-5 gap-3",children:Ae.map(xe=>u.jsx("button",{onClick:()=>R(xe),className:"h-16 rounded-2xl bg-slate-100 dark:bg-slate-700 text-2xl font-bold text-slate-700 dark:text-white shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 transition-all hover:bg-indigo-50 dark:hover:bg-slate-600 active:bg-indigo-100 dark:active:bg-slate-500",children:xe},xe))}),u.jsx("div",{className:"text-center mt-4 text-xs text-slate-400",children:"Gunakan tombol di atas atau keyboard angka"})]}),t==="PAUSED"&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),u.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, lalu lanjutkan."}),u.jsx("button",{onClick:()=>s("PLAYING"),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),u.jsx("button",{onClick:Re,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},Cp=10,ME=60,DE=["A","B","C","D","E"],In=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],PE=(n,e,t)=>{let s=0;return n===100?s+=50:n>=95?s+=45:n>=90?s+=40:n>=80?s+=30:n>=70?s+=20:s+=10,e>=50?s+=30:e>=40?s+=25:e>=30?s+=20:e>=20?s+=10:s+=5,t<2?s+=20:t<4?s+=15:t<6?s+=10:t<8&&(s+=5),s>=95?"Sempurna":s>=85?"Sangat Baik":s>=70?"Baik":s>=55?"Cukup":s>=40?"Kurang":"Buruk"},LE=n=>{let e=[];n==="ANGKA"?e=[...["0","1","2","3","4","5","6","7","8","9"]].sort(()=>.5-Math.random()).slice(0,5):n==="HURUF"?e=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")].sort(()=>.5-Math.random()).slice(0,5):n==="SIMBOL_HILANG"&&(e=[...In].sort(()=>.5-Math.random()).slice(0,5));const t=Math.floor(Math.random()*5),s=e.filter((a,o)=>o!==t).sort(()=>.5-Math.random());return{reference:e,question:s,answer:t}},UE=()=>{const n=3+Math.floor(Math.random()*2),e=Array.from({length:n},()=>In[Math.floor(Math.random()*In.length)]),t=Math.random()>.5;let s=[...e];if(!t)if(Math.random()>.5){const a=Math.floor(Math.random()*n);let o=In[Math.floor(Math.random()*In.length)];for(;o===e[a];)o=In[Math.floor(Math.random()*In.length)];s[a]=o}else n>=2&&([s[0],s[1]]=[s[1],s[0]],s[0]===s[1]&&(s[0]=In.find(c=>c!==s[0])||"X"));return{left:e,right:s,isSame:t}},VE=()=>{const e=[...In].sort(()=>.5-Math.random()).slice(0,5),t=Math.floor(Math.random()*5),s=e[t];return{map:e,target:s,answer:t}},OE=()=>{const n=In[Math.floor(Math.random()*In.length)],e=Array.from({length:20},()=>{if(Math.random()<.3)return n;let s=In[Math.floor(Math.random()*In.length)];for(;s===n;)s=In[Math.floor(Math.random()*In.length)];return s}),t=e.filter(s=>s===n).length;return{target:n,grid:e,totalCorrect:t}},I9=({initialMode:n,onBack:e,onComplete:t})=>{var Z;const[s,a]=F.useState(n||"ANGKA"),[o,c]=F.useState(1),[f,p]=F.useState(ME),[m,v]=F.useState(!1),[_,T]=F.useState("PLAYING"),[A,N]=F.useState(null),[C,I]=F.useState(null),[j,L]=F.useState(null),[G,ee]=F.useState(null),[re,oe]=F.useState([]),[M,D]=F.useState([]),[R,O]=F.useState(0),[V,B]=F.useState(0),[U,pe]=F.useState(null),Re=F.useCallback(()=>{if(s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG")if(A){const K=Math.floor(Math.random()*5),$=A.reference.filter((ce,ye)=>ye!==K).sort(()=>.5-Math.random());N({...A,question:$,answer:K})}else{const K=LE(s);N(K)}else if(s==="SAMA_BEDA")I(UE());else if(s==="MATCHING")if(!j)L(VE());else{const K=Math.floor(Math.random()*5);L({...j,target:j.map[K],answer:K})}else s==="GROUPING"&&(ee(OE()),oe([]))},[s,A,j]),J=F.useCallback(()=>{N(null),L(null),I(null),ee(null),s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?N(LE(s)):s==="SAMA_BEDA"?I(UE()):s==="MATCHING"?L(VE()):s==="GROUPING"&&(ee(OE()),oe([])),p(ME),O(0),B(0)},[s]);F.useEffect(()=>{_==="PLAYING"&&J()},[o,s,_]);const he=K=>{if(m)return;let $=!1;s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?$=K===(A==null?void 0:A.answer):s==="SAMA_BEDA"?$=K===(C==null?void 0:C.isSame):s==="MATCHING"&&($=K===(j==null?void 0:j.answer)),$?(O(ce=>ce+1),pe("CORRECT")):(B(ce=>ce+1),pe("WRONG"),le.play("error")),setTimeout(()=>pe(null),150),Re()},be=()=>{if(!G)return;let K=0,$=0;re.forEach(ye=>{G.grid[ye]===G.target?K++:$++});const ce=G.totalCorrect-K;O(ye=>ye+K),B(ye=>ye+$+ce),$===0&&ce===0?(pe("CORRECT"),le.play("success")):(pe("WRONG"),le.play("error")),setTimeout(()=>pe(null),200),Re()},Ae=K=>{le.play("click"),oe($=>$.includes(K)?$.filter(ce=>ce!==K):[...$,K])};F.useEffect(()=>{if(m||_==="FINISHED")return;const K=setInterval(()=>{p($=>($<=6&&$>1&&le.play("tick"),$<=1?(xe(),0):$-1))},1e3);return()=>clearInterval(K)},[m,o,_,R,V]);const xe=()=>{D(K=>{if(K.find(ye=>ye.section===o))return K;const $={section:o,correct:R,wrong:V},ce=[...K,$];return o>=Cp?setTimeout(()=>T("FINISHED"),0):setTimeout(()=>{c(ye=>ye+1),le.play("success")},0),ce})},H=()=>{const K=M.length,$=M.reduce((Vt,Sn)=>Vt+Sn.correct,0),ce=M.reduce((Vt,Sn)=>Vt+Sn.wrong,0),ye=K>0?$/K:0,Ce=$+ce,_e=Ce>0?$/Ce*100:0,dt=ye,bt=M.reduce((Vt,Sn)=>Vt+Math.pow(Sn.correct-dt,2),0)/(K||1),et=Math.sqrt(bt),ct=PE(_e,ye,et),Nt={mode:s,totalCorrect:$,totalWrong:ce,averageSpeed:parseFloat(ye.toFixed(1)),accuracy:parseFloat(_e.toFixed(1)),sectionData:M,stability:parseFloat(et.toFixed(2)),verdict:ct},Ut={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(_e),maxScore:100,details:Nt,questions:[],answers:[]};le.play("finish"),t(Ut)},ne=()=>{const K={section:o,correct:R,wrong:V},$=[...M];$.find(Ut=>Ut.section===o)||$.push(K);const ce=$.reduce((Ut,Vt)=>Ut+Vt.correct,0),ye=$.reduce((Ut,Vt)=>Ut+Vt.wrong,0),Ce=ce/($.length||1),_e=ce+ye,dt=_e>0?ce/_e*100:0,ct={mode:s,totalCorrect:ce,totalWrong:ye,averageSpeed:parseFloat(Ce.toFixed(1)),accuracy:parseFloat(dt.toFixed(1)),sectionData:$,stability:parseFloat(0 .toFixed(2)),verdict:"Belum Selesai"},Nt={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(dt),maxScore:100,details:ct,questions:[],answers:[],isAborted:!0};t(Nt)};if(_==="FINISHED"){const K=M.reduce((et,ct)=>et+ct.correct,0),$=M.reduce((et,ct)=>et+ct.wrong,0),ce=K/M.length,ye=K/(K+$)*100,Ce=ce,_e=M.reduce((et,ct)=>et+Math.pow(ct.correct-Ce,2),0)/M.length,dt=Math.sqrt(_e),bt=PE(ye,ce,dt);return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center animate-fade-in",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[u.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:"Tes Selesai!"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut hasil performa kecermatan Anda."}),u.jsx("div",{className:"flex justify-center mb-8",children:u.jsx("div",{className:"px-6 py-2 bg-indigo-600 text-white rounded-full font-bold text-xl shadow-lg shadow-indigo-200 dark:shadow-none animate-bounce-slow",children:bt})}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Kecepatan"}),u.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:ce.toFixed(1)}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"poin/menit"})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Akurasi"}),u.jsxs("div",{className:"text-2xl font-black text-emerald-500",children:[ye.toFixed(1),"%"]})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Stabilitas"}),u.jsx("div",{className:"text-2xl font-black text-amber-500",children:dt.toFixed(2)}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]})]}),u.jsxs("div",{className:"mb-8",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-3 text-left",children:"Grafik Performa Per Menit"}),u.jsx("div",{className:"h-40 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative",children:Array.from({length:Cp}).map((et,ct)=>{const Nt=M.find(Bn=>Bn.section===ct+1),Ut=Nt?Nt.correct:0,Vt=Math.max(...M.map(Bn=>Bn.correct),10),Sn=Ut/Vt*100;return u.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full",children:[u.jsx("div",{className:"w-full bg-indigo-500/80 hover:bg-indigo-600 transition-all rounded-t-sm relative",style:{height:`${Sn}%`},children:u.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg whitespace-nowrap",children:["Menit ",ct+1,": ",Ut]})}),u.jsx("div",{className:"mt-1 text-[9px] font-bold text-slate-400",children:ct+1})]},ct)})})]}),u.jsxs("button",{onClick:H,className:"w-full py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition flex items-center justify-center gap-2",children:[u.jsx(pN,{size:20})," Simpan Hasil"]})]})})}return u.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm shrink-0 z-20",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Bagian"}),u.jsxs("span",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400",children:[o,"/",Cp]})]}),u.jsx("div",{className:"w-px h-8 bg-slate-200 dark:bg-slate-700"}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu"}),u.jsxs("span",{className:`text-lg font-mono font-black ${f<=5?"text-rose-500 animate-pulse":"text-slate-800 dark:text-white"}`,children:[f,"s"]})]}),u.jsxs("div",{className:"hidden sm:flex flex-col border-l pl-4 border-slate-200 dark:border-slate-700",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Benar"}),u.jsx("span",{className:"text-lg font-black text-emerald-600",children:R})]})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:u.jsx($c,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),u.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:[U&&u.jsx("div",{className:`absolute inset-0 z-10 flex items-center justify-center pointer-events-none transition-opacity duration-150 ${U==="CORRECT"?"bg-emerald-500/10":"bg-rose-500/10"}`,children:u.jsx("div",{className:`p-4 rounded-full ${U==="CORRECT"?"bg-emerald-500 text-white":"bg-rose-500 text-white"} shadow-xl transform scale-125`,children:U==="CORRECT"?u.jsx(ys,{size:64}):u.jsx(pg,{size:64})})}),u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-2 w-full max-w-4xl mx-auto h-full min-h-0",children:[(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&u.jsxs("div",{className:"w-full h-full flex flex-col justify-center gap-4 sm:gap-6",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-2 shrink-0",children:[u.jsx("div",{className:"grid grid-cols-5 gap-1",children:(Z=s==="MATCHING"?j==null?void 0:j.map:A==null?void 0:A.reference)==null?void 0:Z.map((K,$)=>u.jsx("div",{className:`aspect-square flex flex-col items-center justify-center bg-slate-100 dark:bg-slate-700 rounded-lg ${s==="MATCHING"?"py-1":""}`,children:u.jsx("span",{className:`${s==="MATCHING"||s==="SIMBOL_HILANG"?"text-3xl sm:text-5xl":"text-2xl sm:text-4xl"} font-black text-slate-800 dark:text-white`,children:K})},$))}),u.jsx("div",{className:"grid grid-cols-5 gap-1 text-center border-t border-slate-100 dark:border-slate-600 pt-1 mt-1",children:DE.map((K,$)=>u.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:K},$))})]}),u.jsxs("div",{className:"text-center py-2 flex-1 flex flex-col justify-center",children:[u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:s==="MATCHING"?"Cari Pasangan:":"Mana yang hilang?"}),s==="MATCHING"?u.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 mx-auto flex items-center justify-center bg-indigo-600 rounded-3xl shadow-xl transform transition-all duration-300",children:u.jsx("span",{className:"text-6xl sm:text-7xl font-black text-white",children:j==null?void 0:j.target})}):u.jsx("div",{className:"flex justify-center gap-2 sm:gap-4 flex-wrap",children:A==null?void 0:A.question.map((K,$)=>u.jsx("div",{className:"w-12 h-12 sm:w-20 sm:h-20 flex items-center justify-center bg-white dark:bg-slate-800 rounded-xl border-2 border-slate-200 dark:border-slate-600 shadow-sm text-slate-800 dark:text-white font-bold text-xl sm:text-3xl",children:K},$))})]})]}),s==="SAMA_BEDA"&&C&&u.jsxs("div",{className:"w-full max-w-md h-full flex flex-col justify-center gap-4 text-center min-h-0",children:[u.jsxs("div",{className:"flex flex-col gap-2 sm:gap-4 flex-1 justify-center min-h-0",children:[u.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:u.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:C.left.map((K,$)=>u.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:K},$))})}),u.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:u.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:C.right.map((K,$)=>u.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:K},$))})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 shrink-0",children:[u.jsxs("button",{onClick:()=>he(!0),className:"h-16 sm:h-24 bg-emerald-500 hover:bg-emerald-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[u.jsx(ys,{size:24,className:"mb-1 hidden sm:block"})," SAMA"]}),u.jsxs("button",{onClick:()=>he(!1),className:"h-16 sm:h-24 bg-rose-500 hover:bg-rose-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[u.jsx(pg,{size:24,className:"mb-1 hidden sm:block"})," BEDA"]})]}),u.jsx("p",{className:"text-xs text-slate-400 pb-1",children:"Bandingkan kedua kotak. Sama atau Beda?"})]}),s==="GROUPING"&&G&&u.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden min-h-0",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 shrink-0",children:[u.jsxs("div",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 flex items-center gap-2",children:["Pilih: ",u.jsx("span",{className:"text-2xl bg-white dark:bg-slate-800 px-3 py-1 rounded-lg border inline-block shadow-sm text-indigo-600",children:G.target})]}),u.jsx("button",{onClick:be,className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 shadow-md active:scale-95 transition",children:"Lanjut"})]}),u.jsx("div",{className:"flex-1 grid grid-cols-5 grid-rows-4 gap-1 sm:gap-2 p-1 content-center justify-items-center h-full min-h-0",children:G.grid.map((K,$)=>{const ce=re.includes($);return u.jsx("button",{onClick:()=>Ae($),className:`w-full h-full rounded-xl flex items-center justify-center text-xl sm:text-3xl transition-all duration-75 ${ce?"bg-indigo-600 text-white shadow-inner scale-95 border-2 border-indigo-700":"bg-white dark:bg-slate-800 text-slate-800 dark:text-white border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-300"}`,children:K},$)})})]})]})]}),(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&u.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-2 sm:p-4 pb-6 shrink-0 z-30",children:u.jsx("div",{className:"max-w-3xl mx-auto",children:u.jsx("div",{className:"grid grid-cols-5 gap-2 md:gap-4",children:DE.map((K,$)=>u.jsx("button",{onClick:()=>he($),className:"h-14 sm:h-20 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-indigo-600 dark:hover:bg-indigo-600 hover:text-white active:scale-95 transition-all shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 flex flex-col items-center justify-center gap-1 group text-slate-700 dark:text-slate-200",children:u.jsx("span",{className:"text-xl sm:text-2xl font-black",children:K})},$))})})}),m&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),u.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, fokus kembali."}),u.jsx("button",{onClick:()=>v(!1),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),u.jsx("button",{onClick:ne,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},k9=({targetNumber:n,refreshTrigger:e})=>{const t=F.useRef(null);return F.useEffect(()=>{const s=t.current;if(!s)return;const a=s.getContext("2d");if(!a)return;a.clearRect(0,0,s.width,s.height);const o=document.createElement("canvas");o.width=s.width,o.height=s.height;const c=o.getContext("2d");if(!c)return;c.fillStyle="#000000",c.fillRect(0,0,s.width,s.height),c.fillStyle="#FFFFFF",c.font='bold 160px "Arial Rounded MT Bold", "Helvetica Rounded", Arial, sans-serif',c.textAlign="center",c.textBaseline="middle";const f=(Math.random()-.5)*.2;c.save(),c.translate(s.width/2,s.height/2),c.rotate(f),c.fillText(n.toString(),0,0),c.restore();const m=c.getImageData(0,0,s.width,s.height).data,v=["#E74C3C","#E67E22","#D35400","#C0392B","#F1948A","#E59866","#CD6155"],_=["#27AE60","#2ECC71","#1ABC9C","#16A085","#7DCEA0","#73C6B6","#A9DFBF","#52BE80"],T=s.width/2,A=s.height/2,N=s.width/2-5,C=3500;for(let I=0;I<C;I++){let j=Math.random()*s.width,L=Math.random()*s.height;if(Math.sqrt(Math.pow(j-T,2)+Math.pow(L-A,2))>N)continue;const ee=Math.random()*4+1.5,re=(Math.floor(L)*s.width+Math.floor(j))*4,M=m[re]>128?v:_;let D=M[Math.floor(Math.random()*M.length)];Math.random()<.05&&(D="#95A5A6"),a.beginPath(),a.arc(j,L,ee,0,Math.PI*2),a.fillStyle=D,a.fill()}},[n,e]),u.jsxs("div",{className:"relative",children:[u.jsx("canvas",{ref:t,width:320,height:320,className:"rounded-full shadow-lg bg-slate-50 dark:bg-slate-800 mx-auto border-4 border-slate-200 dark:border-slate-700"}),u.jsx("div",{className:"absolute inset-0 rounded-full shadow-inner pointer-events-none opacity-20 bg-gradient-to-br from-white to-black"})]})},R9=({onBack:n,onComplete:e})=>{const[t,s]=F.useState([]),[a,o]=F.useState(0),[c,f]=F.useState([]),[p,m]=F.useState(""),[v,_]=F.useState(!1);F.useEffect(()=>{const N=Array.from({length:10},()=>({number:Math.floor(Math.random()*90)+10}));s(N)},[]);const T=()=>{le.play("click");const N=[...c,p];f(N),m(""),a<t.length-1?o(a+1):(le.play("finish"),_(!0))};if(t.length===0)return u.jsx("div",{className:"p-10 text-center dark:text-white flex items-center justify-center min-h-[50vh]",children:"Menyiapkan Tes..."});if(v){const N=t.filter((G,ee)=>{var re;return G.number.toString().trim()===((re=c[ee])==null?void 0:re.trim())}).length,C=N>=8,I=t.map((G,ee)=>({id:`cb-q-${ee}`,type:"short_answer",content:`Ishihara Plate #${ee+1}`,correctAnswer:G.number.toString(),explanation:`Plate displayed number ${G.number}`,metadata:{difficulty:"Medium",idealTimeSeconds:10,topic:"Buta Warna",subtest:"Ishihara"}})),j=c.map((G,ee)=>({questionId:`cb-q-${ee}`,selectedAnswer:G,isCorrect:G.trim()===t[ee].number.toString().trim(),scoreEarned:G.trim()===t[ee].number.toString().trim()?10:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1})),L={id:`cb-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:N*10,maxScore:100,details:{type:"Ishihara Simulation",passed:C},questions:I,answers:j};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center transition-colors",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl max-w-lg w-full text-center max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 ${C?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"}`,children:C?u.jsx(ys,{size:40}):u.jsx(yg,{size:40})}),u.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:C?"Mata Normal":"Indikasi Buta Warna"}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Skor Anda: ",N," dari ",t.length]}),u.jsx("div",{className:"mb-6 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden text-left",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-300 font-bold",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3",children:"Plate"}),u.jsx("th",{className:"p-3 text-center",children:"Angka"}),u.jsx("th",{className:"p-3 text-center",children:"Jawab"}),u.jsx("th",{className:"p-3 text-center",children:"Status"})]})}),u.jsx("tbody",{children:t.map((G,ee)=>{const re=c[ee],oe=G.number.toString().trim()===re.trim();return u.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700 text-slate-700 dark:text-slate-300",children:[u.jsxs("td",{className:"p-3 font-medium",children:["#",ee+1]}),u.jsx("td",{className:"p-3 font-mono text-center",children:G.number}),u.jsx("td",{className:"p-3 font-mono text-center text-slate-600 dark:text-slate-400",children:re||"-"}),u.jsx("td",{className:"p-3 text-center",children:oe?u.jsx(ys,{size:16,className:"text-emerald-500 inline"}):u.jsx(yg,{size:16,className:"text-rose-500 inline"})})]},ee)})})]})}),u.jsx("button",{onClick:()=>e(L),className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Simpan & Keluar"}),u.jsx("p",{className:"mt-4 text-[10px] text-slate-400",children:"Hasil ini adalah simulasi. Untuk diagnosis medis, hubungi dokter mata."})]})})}const A=t[a];return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center transition-colors",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600",children:[u.jsx(vt,{size:18,className:"mr-2"})," Kembali"]}),u.jsxs("span",{className:"text-sm font-bold text-slate-400 bg-slate-200 dark:bg-slate-700 px-3 py-1 rounded-full",children:[a+1," / ",t.length]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-lg border border-slate-100 dark:border-slate-700 text-center",children:[u.jsx("div",{className:"mb-8 flex justify-center py-4",children:u.jsx(k9,{targetNumber:A.number,refreshTrigger:a})}),u.jsx("p",{className:"mb-4 text-slate-600 dark:text-slate-300 font-medium",children:"Angka berapa yang Anda lihat?"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"number",className:"flex-1 p-4 text-center text-2xl font-bold border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none",placeholder:"?",value:p,onChange:N=>m(N.target.value),autoFocus:!0,onKeyDown:N=>N.key==="Enter"&&p&&T()}),u.jsx("button",{onClick:T,disabled:!p,className:"px-6 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none disabled:opacity-50 hover:bg-indigo-700 transition",children:"OK"})]}),u.jsx("div",{className:"mt-6 flex justify-center",children:u.jsx("button",{onClick:()=>m("0"),className:"text-xs text-slate-400 hover:text-indigo-500 underline",children:"Saya tidak melihat angka"})})]})]})})},M0=(n,e)=>{if(e===null)return 0;if(n==="REACTION")return e<=150?99:e>=450?1:Math.max(1,Math.min(99,Math.round(100-(e-150)/300*100)));if(n==="AIM")return e<=250?99:e>=800?1:Math.max(1,Math.min(99,Math.round(100-(e-250)/550*100)));if(n==="TYPING")return e>=120?99.9:e<=10?1:Math.max(1,Math.min(99,Math.round((e-10)/110*100)));{let t=50;return n==="SEQUENCE"&&(t=30),n==="CHIMP"&&(t=40),n==="VISUAL"&&(t=30),n==="NUMBER"&&(t=20),n==="VERBAL"&&(t=100),n==="BRIDGE"&&(t=30),n==="MATCH"&&(t=30),Math.max(1,Math.min(99,Math.round(e/t*100)))}},M9=n=>n>=90?"Top Class (Sangat Luar Biasa)":n>=75?"Superior (Di Atas Rata-rata)":n>=50?"Average (Rata-rata)":n>=25?"Below Average (Perlu Latihan)":"Novice (Pemula)",xg=n=>{switch(n){case"REACTION":return"text-amber-500 bg-amber-50 dark:bg-amber-900/20";case"SEQUENCE":return"text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20";case"AIM":return"text-orange-500 bg-orange-50 dark:bg-orange-900/20";case"CHIMP":return"text-teal-500 bg-teal-50 dark:bg-teal-900/20";case"VISUAL":return"text-sky-500 bg-sky-50 dark:bg-sky-900/20";case"NUMBER":return"text-blue-600 bg-blue-50 dark:bg-blue-900/20";case"VERBAL":return"text-purple-500 bg-purple-50 dark:bg-purple-900/20";case"TYPING":return"text-slate-500 bg-slate-50 dark:bg-slate-700/50";case"BRIDGE":return"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20";case"MATCH":return"text-pink-500 bg-pink-50 dark:bg-pink-900/20";default:return"text-slate-500 bg-slate-100"}},TN=n=>{switch(n){case"REACTION":return u.jsx(Yr,{size:20});case"SEQUENCE":return u.jsx(Ki,{size:20});case"AIM":return u.jsx(Ha,{size:20});case"CHIMP":return u.jsx(Ms,{size:20});case"VISUAL":return u.jsx(Ki,{size:20});case"NUMBER":return u.jsx(wf,{size:20});case"VERBAL":return u.jsx(If,{size:20});case"TYPING":return u.jsx(Br,{size:20});case"BRIDGE":return u.jsx(Nf,{size:20});case"MATCH":return u.jsx(Af,{size:20});default:return u.jsx(Os,{size:20})}},EN=n=>{switch(n){case"REACTION":return"Reaction Time";case"SEQUENCE":return"Sequence Memory";case"AIM":return"Aim Trainer";case"CHIMP":return"Chimp Test";case"VISUAL":return"Visual Memory";case"NUMBER":return"Number Memory";case"VERBAL":return"Verbal Memory";case"TYPING":return"Typing Test";case"BRIDGE":return"Bridge Memory";case"MATCH":return"Match Memory";default:return n}},D9=()=>u.jsx("div",{className:"text-amber-500 mb-4 mx-auto w-fit",children:u.jsx(Os,{size:64})}),P9=({percentile:n,score:e,unit:t,game:s})=>{const c=n/100*300;return u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsxs("div",{className:"relative w-full max-w-[300px] h-[120px]",children:[u.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 300 100",className:"overflow-visible",children:[u.jsx("path",{d:"M0,100 C60,100 100,10 150,10 S240,100 300,100 Z",fill:"url(#grad1)",stroke:"none",className:"opacity-80"}),u.jsx("defs",{children:u.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[u.jsx("stop",{offset:"0%",style:{stopColor:"#3b82f6",stopOpacity:.2}}),u.jsx("stop",{offset:"50%",style:{stopColor:"#3b82f6",stopOpacity:.8}}),u.jsx("stop",{offset:"100%",style:{stopColor:"#3b82f6",stopOpacity:.2}})]})}),u.jsx("line",{x1:c,y1:"10",x2:c,y2:"100",stroke:"#ef4444",strokeWidth:"2",strokeDasharray:"4"}),u.jsx("circle",{cx:c,cy:"10",r:"4",fill:"#ef4444"})]}),u.jsxs("div",{className:"absolute top-0 transform -translate-x-1/2 -translate-y-6 bg-slate-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap",style:{left:`${n}%`},children:["You: ",e," ",t]})]}),u.jsxs("div",{className:"w-full flex justify-between text-[10px] text-slate-400 mt-1 max-w-[300px]",children:[u.jsx("span",{children:"Bottom 1%"}),u.jsx("span",{children:"Average"}),u.jsx("span",{children:"Top 1%"})]})]})},L9=({isOpen:n,onClose:e,game:t,bestScore:s})=>{if(!n)return null;const a=M0(t,s),o=M9(a);let c="pts";return(t==="REACTION"||t==="AIM")&&(c="ms"),t==="TYPING"&&(c="wpm"),(t==="SEQUENCE"||t==="NUMBER"||t==="CHIMP"||t==="VISUAL"||t==="BRIDGE"||t==="MATCH")&&(c="lvl"),u.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:e,children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700",onClick:f=>f.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(Vc,{className:"text-indigo-500"})," Statistik Anda"]}),u.jsx("button",{onClick:()=>{le.play("back"),e()},children:u.jsx(xN,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),s!==null?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-sm text-slate-500 uppercase font-bold mb-1",children:"Skor Terbaik"}),u.jsxs("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:[s," ",u.jsx("span",{className:"text-lg font-medium text-slate-400",children:c})]}),u.jsxs("div",{className:"inline-block mt-2 px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-full text-xs font-bold",children:["Lebih baik dari ",a,"% orang"]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-600",children:[u.jsx(P9,{percentile:a,score:s,unit:c,game:t}),u.jsx("p",{className:"text-center text-xs text-slate-500 mt-4 font-medium",children:o})]})]}):u.jsx("div",{className:"text-center py-8 text-slate-500",children:"Belum ada data. Mainkan game ini untuk melihat statistik Anda."})]})})},U9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState("WAITING"),[a,o]=F.useState(0),[c,f]=F.useState([]),[p,m]=F.useState(0),v=F.useRef(null);F.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const _=()=>{s("READY");const I=Math.floor(Math.random()*3e3)+2e3;v.current=window.setTimeout(()=>{o(Date.now()),s("GO")},I)},T=()=>{if(t==="WAITING")_();else if(t==="READY")v.current&&clearTimeout(v.current),s("TOO_SOON");else if(t==="GO"){const I=Date.now()-a;m(I);const j=[...c,I];f(j),j.length>=5?(s("FINAL_SCORE"),le.play("finish")):(s("RESULT"),le.play("success"))}else(t==="RESULT"||t==="TOO_SOON")&&s("WAITING")},A=c.length>0?Math.round(c.reduce((I,j)=>I+j,0)/c.length):0;let N,C="bg-slate-900";return t==="WAITING"?(N=u.jsxs(u.Fragment,{children:[u.jsx(Yr,{size:80,className:"mx-auto mb-6 text-amber-400"}),u.jsx("h2",{className:"text-4xl font-bold text-white mb-2",children:"Reaction Time"}),u.jsxs("h3",{className:"text-xl text-white/60 mb-8",children:["Percobaan ",c.length+1," dari 5"]}),u.jsx("p",{className:"text-white/80",children:"Klik untuk mulai."})]}),C="bg-slate-800"):t==="READY"?(N=u.jsx("h2",{className:"text-5xl font-bold text-white tracking-widest",children:"..."}),C="bg-rose-600"):t==="GO"?(N=u.jsx("h2",{className:"text-6xl font-black text-white",children:"KLIK!"}),C="bg-emerald-500"):t==="RESULT"?(N=u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"text-2xl text-white/80 mb-2",children:[p," ms"]}),u.jsx("p",{className:"text-white/60",children:"Klik untuk lanjut."})]}),C="bg-indigo-600"):t==="FINAL_SCORE"?(N=u.jsxs(u.Fragment,{children:[u.jsx(Os,{size:64,className:"mx-auto mb-4 text-emerald-400"}),u.jsx("div",{className:"text-xl text-white/80 mb-2",children:"Rata-rata"}),u.jsxs("h2",{className:"text-7xl font-black text-white mb-8",children:[A," ms"]}),u.jsxs("div",{className:"flex flex-col gap-3 w-64 mx-auto",children:[u.jsx("button",{className:"px-6 py-3 bg-white text-slate-900 rounded-xl font-bold",onClick:()=>n(A),children:"Simpan Skor"}),u.jsx("button",{className:"px-6 py-3 border-2 border-white/30 text-white rounded-xl font-bold",onClick:()=>{f([]),s("WAITING")},children:"Coba Lagi"})]})]}),C="bg-slate-800"):t==="TOO_SOON"&&(N=u.jsxs(u.Fragment,{children:[u.jsx(D9,{}),u.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Terlalu Cepat!"}),u.jsx("p",{className:"text-white/80",children:"Klik untuk ulang."})]}),C="bg-slate-800"),u.jsxs("div",{className:`fixed inset-0 z-50 flex flex-col items-center justify-center cursor-pointer select-none ${C}`,onMouseDown:t!=="FINAL_SCORE"?T:void 0,children:[u.jsx("button",{onClick:I=>{I.stopPropagation(),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(vt,{size:24})}),N]})},V9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState([]),[a,o]=F.useState([]),[c,f]=F.useState(1),[p,m]=F.useState("START"),[v,_]=F.useState(null),T=async(N,C)=>{m("WATCHING"),o([]);const I=Math.floor(Math.random()*9),j=[...C,I];s(j),await new Promise(L=>setTimeout(L,800));for(let L=0;L<j.length;L++)_(j[L]),le.play("click"),await new Promise(G=>setTimeout(G,600)),_(null),await new Promise(G=>setTimeout(G,200));m("PLAYING")},A=async N=>{if(p!=="PLAYING")return;_(N),le.play("tap"),setTimeout(()=>_(null),200);const C=[...a,N];if(o(C),C[C.length-1]!==t[C.length-1]){m("GAMEOVER"),le.play("error");return}C.length===t.length&&(m("WATCHING"),le.play("success"),await new Promise(I=>setTimeout(I,800)),f(I=>I+1),T(c+1,t))};return p==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(vt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(Ki,{size:80,className:"mx-auto mb-6 text-indigo-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Sequence Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Ingat urutan kotak yang menyala. Pola akan bertambah satu langkah setiap level."}),u.jsx("button",{onClick:()=>T(1,[]),className:"px-8 py-3 bg-indigo-500 text-white rounded-xl font-bold text-lg hover:bg-indigo-600 transition",children:"Mulai"})]})]}):p==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Ki,{size:64,className:"mx-auto mb-6 text-rose-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:c})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{f(1),T(1,[])},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(Math.max(1,c-1)),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(vt,{size:24})}),u.jsxs("div",{className:"text-center mb-8",children:[u.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["Level ",c]}),u.jsx("p",{className:"text-slate-400 text-sm animate-pulse h-6",children:p==="WATCHING"?"Lihat polanya...":"Giliranmu!"})]}),u.jsx("div",{className:"grid grid-cols-3 gap-3 p-4",children:Array.from({length:9}).map((N,C)=>u.jsx("div",{onClick:()=>A(C),className:`w-20 h-20 sm:w-28 sm:h-28 rounded-xl transition-all duration-100 cursor-pointer border-4 border-slate-800 ${v===C?"bg-white shadow-[0_0_30px_rgba(255,255,255,0.8)] scale-95 border-white":"bg-slate-700 hover:bg-slate-600"}`},C))})]})},O9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState("IDLE"),[a,o]=F.useState(30),[c,f]=F.useState({top:"50%",left:"50%"}),[p,m]=F.useState([]),v=F.useRef(null),[_,T]=F.useState(0),[A,N]=F.useState(0),[C,I]=F.useState(0),[j,L]=F.useState(null),G=()=>{if(!v.current)return;const R=v.current.getBoundingClientRect(),O=96,V=50,B=R.width-O-V,U=R.height-O-V,pe=Math.max(V,Math.random()*B),Re=Math.max(V,Math.random()*U);f({top:`${Re}px`,left:`${pe}px`})},ee=()=>{s("PLAYING"),o(30),m([]),T(0),N(0),G()};F.useEffect(()=>{if(t==="PLAYING"&&A>0){const R=setInterval(()=>{T(Date.now()-A)},50);return L(R),()=>clearInterval(R)}},[t,A]);const re=R=>{if(R.stopPropagation(),t!=="PLAYING")return;const O=Date.now();if(A===0){N(O),I(O),o(B=>B-1),G(),le.play("click");return}const V=O-C;m(B=>[...B,V]),I(O),le.play("click"),a<=1?(clearInterval(j),s("FINISHED"),le.play("finish")):(o(B=>B-1),G())},oe=()=>{t==="PLAYING"&&A>0&&le.play("error")},M=p.length>0?Math.round(p.reduce((R,O)=>R+O,0)/p.length):0,D=p.length>0?Math.round(p.reduce((R,O)=>R+O,0)/p.length):0;return u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",onMouseDown:oe,children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(vt,{size:24})}),t==="IDLE"&&u.jsxs("div",{className:"text-center text-white cursor-default",onClick:R=>R.stopPropagation(),children:[u.jsx(Ha,{size:80,className:"mx-auto mb-6 text-orange-500"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Aim Trainer"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Klik 30 target secepat mungkin. Waktu dimulai saat target pertama diklik."}),u.jsx("button",{onClick:ee,className:"px-8 py-3 bg-orange-500 text-white rounded-xl font-bold text-lg hover:bg-orange-600 transition",children:"Mulai"})]}),t==="PLAYING"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"absolute top-8 flex gap-8 items-center pointer-events-none z-10 select-none",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Remaining"}),u.jsx("div",{className:"text-white font-mono text-3xl font-bold",children:a})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Time"}),u.jsxs("div",{className:"text-white font-mono text-3xl font-bold",children:[(_/1e3).toFixed(1),"s"]})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Avg"}),u.jsxs("div",{className:"text-orange-400 font-mono text-3xl font-bold",children:[D," ms"]})]})]}),u.jsx("div",{ref:v,className:"w-full h-full relative max-w-5xl max-h-[80vh] cursor-crosshair",children:u.jsxs("div",{onMouseDown:re,className:"absolute w-24 h-24 rounded-full bg-orange-500 border-4 border-white shadow-[0_0_15px_rgba(249,115,22,0.6)] cursor-pointer flex items-center justify-center hover:scale-95 transition-transform duration-75",style:{top:c.top,left:c.left},children:[u.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),u.jsx("div",{className:"absolute w-12 h-12 border-2 border-white/50 rounded-full"}),u.jsx("div",{className:"absolute w-20 h-20 border border-white/20 rounded-full"})]})})]}),t==="FINISHED"&&u.jsxs("div",{className:"text-center text-white cursor-default",onClick:R=>R.stopPropagation(),children:[u.jsx(Ha,{size:64,className:"mx-auto mb-4 text-orange-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Selesai!"}),u.jsx("p",{className:"text-white/60 mb-6",children:"Rata-rata waktu per target"}),u.jsxs("h1",{className:"text-7xl font-black mb-8",children:[M," ms"]}),u.jsxs("div",{className:"text-white/40 mb-8 font-mono",children:["Total Waktu: ",(_/1e3).toFixed(2),"s"]}),u.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[u.jsx("button",{onClick:()=>n(M),className:"w-full py-3 bg-white text-slate-900 rounded-xl font-bold",children:"Simpan Skor"}),u.jsx("button",{onClick:ee,className:"w-full py-3 border border-white/20 rounded-xl font-bold",children:"Coba Lagi"})]})]})]})},j9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(4),[a,o]=F.useState([]),[c,f]=F.useState("IDLE"),[p,m]=F.useState(1),[v,_]=F.useState(!1),T=N=>{const I=Array.from({length:40},(L,G)=>G).sort(()=>.5-Math.random()),j=Array.from({length:N},(L,G)=>({id:G+1,pos:I[G],visible:!0}));o(j),m(1),_(!1),f("PLAYING")},A=N=>{c==="PLAYING"&&(N===p?(le.play("click"),N===1&&_(!0),o(C=>C.map(I=>I.id===N?{...I,visible:!1}:I)),N===a.length?(le.play("success"),setTimeout(()=>{s(C=>C+1),T(t+1)},500)):m(C=>C+1)):(le.play("error"),f("GAMEOVER")))};return u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(vt,{size:24})}),c==="IDLE"&&u.jsxs("div",{className:"text-center text-white max-w-md p-6",children:[u.jsx(Ms,{size:80,className:"mx-auto mb-6 text-teal-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Chimp Test"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Klik angka secara berurutan. Setelah klik angka 1, sisanya akan tertutup. Uji ingatan visualmu!"}),u.jsx("button",{onClick:()=>T(4),className:"px-8 py-3 bg-teal-500 text-white rounded-xl font-bold text-lg hover:bg-teal-600 transition",children:"Mulai Tes"})]}),c==="PLAYING"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"text-white mb-4 font-bold text-lg",children:["Level ",t-3]}),u.jsx("div",{className:"grid grid-cols-8 gap-2 md:gap-4 p-4 max-w-3xl",children:Array.from({length:40}).map((N,C)=>{const I=a.find(j=>j.pos===C);return!I||!I.visible?u.jsx("div",{className:"w-10 h-10 md:w-16 md:h-16"},C):u.jsx("button",{onMouseDown:()=>A(I.id),className:`w-10 h-10 md:w-16 md:h-16 rounded-lg border-2 font-bold flex items-center justify-center transition-transform active:scale-95 text-xl md:text-3xl ${v&&I.id>1?"bg-indigo-100 border-indigo-200 text-transparent hover:bg-indigo-200":"bg-indigo-500 border-indigo-400 text-white hover:bg-indigo-400 shadow-lg"}`,children:v&&I.id>1?"":I.id},C)})})]}),c==="GAMEOVER"&&u.jsxs("div",{className:"text-center text-white",children:[u.jsx(Ms,{size:64,className:"mx-auto mb-4 text-rose-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-white/60 mb-6",children:["Skor: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t-1})]}),u.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[u.jsx("button",{onClick:()=>{T(4),s(4)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold hover:bg-indigo-700",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(Math.max(0,t-1)),className:"w-full py-3 border border-white/20 rounded-xl font-bold hover:bg-white/10",children:"Simpan Skor"})]})]})]})},G9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[a,o]=F.useState(3),[c,f]=F.useState(3),[p,m]=F.useState([]),[v,_]=F.useState([]),[T,A]=F.useState([]),[N,C]=F.useState("START"),I=L=>{let G=3;L>2&&(G=4),L>5&&(G=5),L>10&&(G=6),L>20&&(G=7),f(G);const ee=Math.min(Math.floor(G*G/2),L+2),re=[];for(;re.length<ee;){const oe=Math.floor(Math.random()*(G*G));re.includes(oe)||re.push(oe)}m(re),_([]),A([]),C("SHOWING"),setTimeout(()=>C("PLAYING"),1e3+L*100)},j=L=>{if(N==="PLAYING"&&!(v.includes(L)||T.includes(L)))if(p.includes(L)){le.play("tap");const G=[...v,L];_(G),G.length===p.length&&(le.play("success"),setTimeout(()=>{s(ee=>ee+1),I(t+1)},500))}else{le.play("error");const G=a-1;o(G),A(ee=>[...ee,L]),G<=0&&setTimeout(()=>C("GAMEOVER"),500)}};return N==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(vt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(Ki,{size:80,className:"mx-auto mb-6 text-sky-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Visual Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!"}),u.jsx("button",{onClick:()=>{s(1),o(3),I(1)},className:"px-8 py-3 bg-sky-500 text-white rounded-xl font-bold text-lg hover:bg-sky-600 transition",children:"Mulai"})]})]}):N==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full border border-slate-700",children:[u.jsx(Ki,{size:64,className:"mx-auto mb-6 text-sky-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{s(1),o(3),I(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(vt,{size:24})}),u.jsxs("div",{className:"text-center mb-8 flex flex-col items-center gap-2",children:[u.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((L,G)=>u.jsx(lh,{size:24,className:G<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},G))})]}),u.jsx("div",{className:"grid gap-2 bg-slate-800 p-4 rounded-xl shadow-2xl transition-all duration-300",style:{gridTemplateColumns:`repeat(${c}, 1fr)`,width:"min(90vw, 400px)",aspectRatio:"1/1"},children:Array.from({length:c*c}).map((L,G)=>{const ee=p.includes(G),re=v.includes(G),oe=T.includes(G);let M="bg-slate-700 hover:bg-slate-600";return N==="SHOWING"&&ee&&(M="bg-white shadow-[0_0_15px_white] scale-95"),N==="PLAYING"&&re&&(M="bg-white"),N==="PLAYING"&&oe&&(M="bg-slate-900 border-2 border-rose-900"),u.jsx("div",{onMouseDown:()=>j(G),className:`rounded-lg transition-all duration-200 cursor-pointer ${M}`},G)})})]})},B9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[a,o]=F.useState(""),[c,f]=F.useState(""),[p,m]=F.useState("START"),[v,_]=F.useState(0),[T,A]=F.useState(100),N=L=>{let G="";for(let ee=0;ee<L;ee++)G+=Math.floor(Math.random()*10);return G},C=()=>{s(1),I(1)},I=L=>{const G=N(L);o(G),m("SHOWING"),A(100);const ee=1e3+L*500;_(ee),setTimeout(()=>{A(0)},50),setTimeout(()=>{m("INPUT")},ee)},j=L=>{L==null||L.preventDefault(),c===a?(le.play("success"),m("RESULT"),setTimeout(()=>{s(G=>G+1),f(""),I(t+1)},1e3)):(le.play("error"),m("GAMEOVER"))};return p==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(vt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(wf,{size:80,className:"mx-auto mb-6 text-blue-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Number Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Ingat angka yang muncul, lalu ketik ulang. Angka akan bertambah panjang setiap level."}),u.jsx("button",{onClick:C,className:"px-8 py-3 bg-blue-500 text-white rounded-xl font-bold text-lg hover:bg-blue-600 transition",children:"Mulai"})]})]}):p==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(wf,{size:64,className:"mx-auto mb-6 text-blue-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Salah!"}),u.jsxs("div",{className:"text-left bg-slate-900 p-4 rounded-xl mb-6 font-mono text-sm break-all",children:[u.jsx("div",{className:"text-slate-400 mb-1",children:"Angka:"}),u.jsx("div",{className:"text-white font-bold mb-2 tracking-widest",children:a}),u.jsx("div",{className:"text-slate-400 mb-1",children:"Jawab:"}),u.jsx("div",{className:"text-rose-500 line-through tracking-widest",children:c})]}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:C,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(vt,{size:24})}),p==="SHOWING"&&u.jsxs("div",{className:"text-center animate-fade-in-up w-full px-8",children:[u.jsx("h2",{className:"text-6xl md:text-8xl font-black text-white font-mono tracking-widest",children:a}),u.jsx("div",{className:"w-full max-w-md h-2 bg-slate-800 rounded-full mt-8 mx-auto overflow-hidden",children:u.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${T}%`,transitionDuration:`${v}ms`,opacity:T>0?1:.2}})})]}),p==="INPUT"&&u.jsxs("div",{className:"text-center w-full max-w-md px-4",children:[u.jsx("h3",{className:"text-xl text-white mb-4",children:"Apa angkanya?"}),u.jsxs("form",{onSubmit:j,children:[u.jsx("input",{type:"number",autoFocus:!0,value:c,onChange:L=>f(L.target.value),className:"w-full bg-slate-800 text-white text-3xl font-mono text-center py-4 rounded-xl border-2 border-slate-700 focus:border-blue-500 focus:outline-none mb-4"}),u.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition",children:"Submit"})]})]}),p==="RESULT"&&u.jsxs("div",{className:"text-center",children:[u.jsx(ys,{size:80,className:"text-emerald-500 mx-auto mb-4 animate-bounce-slow"}),u.jsx("h2",{className:"text-2xl text-white font-bold",children:"Benar!"})]})]})},H9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(0),[a,o]=F.useState(3),[c,f]=F.useState(""),[p,m]=F.useState(new Set),[v,_]=F.useState("START"),T=["RUMAH","POHON","MEJA","BUKU","JALAN","AIR","API","LANGIT","BUMI","LAUT","GUNUNG","KOTA","DESA","MOBIL","SEPEDA","KAPAL","IKAN","BURUNG","KUCING","ANJING","MERAH","BIRU","HIJAU","KUNING","PUTIH","HITAM","BESAR","KECIL","PANJANG","PENDEK","KERJA","MAIN","TIDUR","MAKAN","MINUM","LARI","DUDUK","BERDIRI","CINTA","BENCI","SENANG","SEDIH","MARAH","TAKUT","BERANI","KUAT","LEMAH","PINTAR","BODOH","CEPAT","AWAN","BINTANG","BULAN","CAHAYA","GELAP","TERANG","PAGI","SIANG","SORE","MALAM","WAKTU","JAM","MENIT","DETIK","TAHUN","BULAN","MINGGU","HARI"],A=()=>{const I=p.size>0&&Math.random()<.4;let j="";if(I){const L=Array.from(p);j=L[Math.floor(Math.random()*L.length)]}else{let L=0;do j=T[Math.floor(Math.random()*T.length)],L++;while(p.has(j)&&L<100)}f(j)},N=I=>{const j=p.has(c);if(I==="SEEN"&&j||I==="NEW"&&!j)s(G=>G+1),I==="NEW"&&m(G=>new Set(G).add(c)),le.play("click"),A();else{const G=a-1;o(G),le.play("error"),I==="NEW"&&m(ee=>new Set(ee).add(c)),G<=0?_("GAMEOVER"):A()}},C=()=>{s(0),o(3),m(new Set),_("PLAYING"),A()};return v==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(vt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(If,{size:80,className:"mx-auto mb-6 text-purple-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Verbal Memory"}),u.jsxs("p",{className:"text-white/60 mb-8",children:["Anda akan melihat kata-kata satu per satu. Jika kata tersebut belum pernah muncul, klik ",u.jsx("strong",{children:"BARU"}),". Jika sudah, klik ",u.jsx("strong",{children:"SUDAH"}),"."]}),u.jsx("button",{onClick:C,className:"px-8 py-3 bg-purple-500 text-white rounded-xl font-bold text-lg hover:bg-purple-600 transition",children:"Mulai"})]})]}):v==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(If,{size:64,className:"mx-auto mb-6 text-purple-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Verbal Memory"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Skor: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})," kata"]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:C,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(vt,{size:24})}),u.jsxs("div",{className:"flex gap-8 mb-12 text-lg font-bold text-white items-center",children:[u.jsxs("div",{children:["Skor: ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((I,j)=>u.jsx(lh,{size:24,className:j<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},j))})]}),u.jsx("div",{className:"text-5xl md:text-7xl font-black text-white mb-12 animate-fade-in-up transition-all",children:c}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>N("SEEN"),className:"px-8 py-4 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-bold text-xl transition w-40",children:"SUDAH"}),u.jsx("button",{onClick:()=>N("NEW"),className:"px-8 py-4 bg-purple-500 hover:bg-purple-600 text-white rounded-xl font-bold text-xl transition w-40",children:"BARU"})]})]})},z9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(""),[a,o]=F.useState(""),[c,f]=F.useState(null),[p,m]=F.useState(0),[v,_]=F.useState(0),[T,A]=F.useState("START");F.useEffect(()=>{const I=ub,j=I.length>0?I[Math.floor(Math.random()*I.length)]:"";s(j)},[]),F.useEffect(()=>{let I;return T==="PLAYING"&&c&&(I=setInterval(()=>{const L=(Date.now()-c)/1e3;_(Math.floor(L));const G=a.length,ee=L/60;ee>0&&m(Math.round(G/5/ee))},1e3)),()=>clearInterval(I)},[T,c,a]);const N=I=>{const j=I.target.value;if(T==="START"&&(f(Date.now()),A("PLAYING")),o(j),j===t){const L=(Date.now()-(c||Date.now()))/6e4,G=Math.round(t.length/5/L);m(G),A("FINISHED"),le.play("finish")}else j.length%5===0&&le.play("tap")},C=()=>{const I=ub,j=I.length>0?I[Math.floor(Math.random()*I.length)]:"";s(j),o(""),f(null),m(0),_(0),A("START")};return T==="FINISHED"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Br,{size:64,className:"mx-auto mb-6 text-slate-400"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Typing Speed"}),u.jsxs("h1",{className:"text-6xl font-black text-emerald-400 mb-6",children:[p," ",u.jsx("span",{className:"text-xl text-white/50",children:"WPM"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:C,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(p),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center p-6",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(vt,{size:24})}),u.jsxs("div",{className:"flex gap-12 mb-8 text-white font-mono text-xl",children:[u.jsxs("div",{children:["WPM: ",u.jsx("span",{className:"font-bold text-emerald-400",children:p})]}),u.jsxs("div",{children:["Time: ",u.jsxs("span",{className:"font-bold text-emerald-400",children:[v,"s"]})]})]}),u.jsxs("div",{className:"w-full max-w-2xl bg-slate-800 p-6 rounded-2xl shadow-xl",children:[u.jsx("div",{className:"mb-6 text-lg text-slate-400 leading-relaxed select-none",children:t.split("").map((I,j)=>{let L="text-slate-500";return j<a.length&&(L=a[j]===I?"text-white":"text-rose-500 bg-rose-500/20"),u.jsx("span",{className:L,children:I},j)})}),u.jsx("textarea",{value:a,onChange:N,className:"w-full bg-slate-900 text-white p-4 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none h-32 resize-none font-mono",placeholder:"Mulai ketik di sini...",autoFocus:!0})]})]})},F9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[a,o]=F.useState(3),[c,f]=F.useState(5),[p,m]=F.useState(4),[v,_]=F.useState([]),[T,A]=F.useState("START"),[N,C]=F.useState(0),[I,j]=F.useState(100),[L,G]=F.useState(1500),ee=M=>{const R=4+Math.floor(M/2);f(5),m(R);const O=[];let V=R-1,B=Math.floor(5/2);for(O.push({row:V,col:B});V>0;){V--;const U=[B];B>0&&U.push(B-1),B<4&&U.push(B+1),B=U[Math.floor(Math.random()*U.length)],O.push({row:V,col:B})}_(O)},re=M=>{ee(M),A("SHOWING"),j(100);const D=1500;G(D),setTimeout(()=>j(0),50),setTimeout(()=>{A("PLAYING"),C(0)},D)},oe=(M,D)=>{if(T!=="PLAYING")return;const R=v[N];if(M===R.row&&D===R.col){le.play("click");const O=N+1;C(O),O===v.length&&(le.play("success"),setTimeout(()=>{s(V=>V+1),re(t+1)},500))}else le.play("error"),o(O=>O-1),a<=1?A("GAMEOVER"):(A("SHOWING"),j(100),setTimeout(()=>j(0),50),setTimeout(()=>{A("PLAYING"),C(0)},L))};return T==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:()=>{le.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(vt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(Nf,{size:80,className:"mx-auto mb-6 text-emerald-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Bridge Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang."}),u.jsx("button",{onClick:()=>{le.play("click"),s(1),o(3),re(1)},className:"px-8 py-3 bg-emerald-500 text-white rounded-xl font-bold text-lg hover:bg-emerald-600 transition",children:"Mulai"})]})]}):T==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Nf,{size:64,className:"mx-auto mb-6 text-emerald-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{le.play("click"),s(1),o(3),re(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>{le.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center overflow-hidden",children:[u.jsx("button",{onClick:()=>{le.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(vt,{size:24})}),u.jsxs("div",{className:"text-center mb-4 flex flex-col items-center gap-2",children:[u.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((M,D)=>u.jsx(lh,{size:24,className:D<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},D))})]}),u.jsx("div",{className:`w-full max-w-xs h-2 bg-slate-800 rounded-full mb-6 overflow-hidden transition-opacity duration-300 ${T==="SHOWING"?"opacity-100":"opacity-0"}`,children:u.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${I}%`,transitionDuration:`${L}ms`}})}),u.jsx("div",{className:"h-[65vh] w-full flex items-center justify-center p-4",children:u.jsx("div",{className:"grid gap-2 bg-slate-800 p-4 rounded-xl shadow-2xl overflow-y-auto max-h-full no-scrollbar",style:{gridTemplateColumns:`repeat(${c}, 1fr)`,aspectRatio:`${c}/${Math.min(8,p)}`,width:"min(100%, 400px)"},children:Array.from({length:p}).map((M,D)=>Array.from({length:c}).map((R,O)=>{const V=v.findIndex(Re=>Re.row===D&&Re.col===O),B=V!==-1,U=B&&V<N;let pe="bg-slate-700";return T==="SHOWING"&&B?pe="bg-emerald-400":T==="PLAYING"&&(U?pe="bg-emerald-600":B&&V===N&&(pe="bg-slate-700 active:bg-emerald-400")),u.jsx("div",{onMouseDown:()=>oe(D,O),className:`w-full aspect-square rounded-md transition-colors duration-200 cursor-pointer ${pe} hover:opacity-90`},`${D}-${O}`)}))})}),u.jsxs("div",{className:"mt-2 text-emerald-400 animate-bounce flex flex-col items-center",children:[u.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-500 mb-1",children:"Start Here"}),u.jsx(pO,{size:32})]})]})},q9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[a,o]=F.useState(5),[c,f]=F.useState([]),[p,m]=F.useState([]),[v,_]=F.useState("START"),[T,A]=F.useState(!1),[N,C]=F.useState(3),I=["","","","","","","","","","","","","","","",""],j=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-cyan-500","bg-lime-500","bg-rose-500","bg-emerald-500","bg-fuchsia-500","bg-violet-500","bg-sky-500"],L=re=>{const oe=re+2,M=oe*2,D=Math.ceil(Math.sqrt(M));C(D);const R=[...I].sort(()=>Math.random()-.5).slice(0,oe);let O=[];for(let V=0;V<oe;V++){const B=R[V],U=j[V%j.length];O.push({id:V*2,icon:B,flipped:!0,matched:!1,color:U}),O.push({id:V*2+1,icon:B,flipped:!0,matched:!1,color:U})}O=O.sort(()=>Math.random()-.5).map((V,B)=>({...V,id:B})),f(O),_("PREVIEW")},G=()=>{le.play("click"),f(re=>re.map(oe=>({...oe,flipped:!1}))),_("PLAYING")},ee=re=>{if(v!=="PLAYING"||T)return;const oe=c.find(R=>R.id===re);if(!oe||oe.flipped||oe.matched)return;le.play("click");const M=c.map(R=>R.id===re?{...R,flipped:!0}:R);f(M);const D=[...p,re];if(m(D),D.length===2){A(!0);const R=M.find(V=>V.id===D[0]),O=M.find(V=>V.id===D[1]);R&&O&&R.icon===O.icon?(le.play("success"),setTimeout(()=>{f(V=>V.map(B=>D.includes(B.id)?{...B,matched:!0}:B)),m([]),A(!1),M.filter(V=>!V.matched&&!D.includes(V.id)).length===0&&setTimeout(()=>{s(V=>V+1),L(t+1)},500)},500)):setTimeout(()=>{le.play("error"),f(V=>V.map(B=>D.includes(B.id)?{...B,flipped:!1}:B)),m([]),A(!1),o(V=>{const B=V-1;return B<=0&&_("GAMEOVER"),B})},1e3)}};return v==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:()=>{le.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(vt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(Af,{size:80,className:"mx-auto mb-6 text-pink-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Match Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan posisi pasangan simbol sebelum kartu ditutup. Cocokkan semua pasangan!"}),u.jsx("button",{onClick:()=>{le.play("click"),s(1),o(5),L(1)},className:"px-8 py-3 bg-pink-500 text-white rounded-xl font-bold text-lg hover:bg-pink-600 transition",children:"Mulai"})]})]}):v==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Af,{size:64,className:"mx-auto mb-6 text-pink-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{le.play("click"),s(1),o(5),L(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>{le.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[u.jsx("button",{onClick:()=>{le.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(vt,{size:24})}),u.jsxs("div",{className:"text-center mb-6 flex flex-col items-center gap-2",children:[u.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((re,oe)=>u.jsx(lh,{size:24,className:oe<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},oe))}),v==="PREVIEW"&&u.jsx("button",{onClick:G,className:"mt-4 px-8 py-2 bg-emerald-500 text-white font-bold rounded-full hover:bg-emerald-600 transition shadow-lg animate-pulse",children:"SAYA SIAP!"})]}),u.jsx("div",{className:"grid gap-3 justify-center max-w-2xl p-4",style:{gridTemplateColumns:`repeat(${N}, minmax(0, 1fr))`},children:c.map(re=>u.jsx("div",{onClick:()=>ee(re.id),className:`w-16 h-16 sm:w-20 sm:h-20 rounded-xl flex items-center justify-center text-3xl font-bold cursor-pointer transition-all duration-300 transform ${re.flipped||re.matched?`${re.color} text-white rotate-y-180`:"bg-slate-700 hover:bg-slate-600"}`,children:re.flipped||re.matched?re.icon:""},re.id))})]})},K9=({username:n,history:e})=>{const[t,s]=F.useState({}),[a,o]=F.useState(!0),[c,f]=F.useState(!0),p=["REACTION","SEQUENCE","AIM","CHIMP","VISUAL","NUMBER","VERBAL","TYPING","BRIDGE","MATCH"];F.useEffect(()=>{(async()=>{if(!c)return;o(!0);const _={};await Promise.all(p.map(async T=>{try{const A=await nO(T);_[T]=A}catch{console.error("Failed to load leaderboard for",T),_[T]=[]}})),s(_),o(!1)})()},[c]);const m=v=>{const _=e.filter(T=>T.category==="BENCHMARK"&&T.details&&T.details.game===v);return v==="REACTION"||v==="AIM"?_.sort((T,A)=>T.score-A.score):_.sort((T,A)=>A.score-T.score),_.slice(0,5).map(T=>{var A;return{name:n,score:T.score,unit:String(((A=T.details)==null?void 0:A.unit)||"")}})};return u.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(Wj,{className:"text-amber-500"})," Leaderboard"]}),u.jsxs("div",{className:"bg-slate-200 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:[u.jsxs("button",{onClick:()=>f(!0),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:[u.jsx(JO,{size:14,className:"inline mr-1"})," Global"]}),u.jsxs("button",{onClick:()=>f(!1),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,children:[u.jsx(n9,{size:14,className:"inline mr-1"})," Personal"]})]})]}),a&&c?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[u.jsx(Bs,{size:40,className:"animate-spin mb-4 text-indigo-500"}),u.jsx("p",{children:"Memuat Data Global Rank..."})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:p.map(v=>{let _=[];c?_=t[v]||[]:_=m(v);const T=xg(v);return u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[u.jsxs("div",{className:`p-4 ${T} bg-opacity-20 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3`,children:[u.jsx("div",{className:"p-2 rounded-lg bg-white/50 text-slate-800",children:TN(v)}),u.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:EN(v)})]}),u.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:_.length>0?_.map((A,N)=>u.jsxs("div",{className:`p-3 flex justify-between items-center text-sm ${N===0?"bg-indigo-50 dark:bg-indigo-900/20":""}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:`font-bold w-4 text-center ${N===0?"text-amber-500":N===1?"text-slate-400":N===2?"text-orange-700":"text-slate-500"}`,children:N+1}),u.jsxs("span",{className:`font-medium truncate max-w-[120px] ${A.name===n?"text-indigo-600 dark:text-indigo-400 font-bold":"text-slate-700 dark:text-slate-300"}`,children:[A.name||A.username," ",A.name===n?"(You)":""]})]}),u.jsxs("span",{className:"font-mono font-bold text-slate-800 dark:text-white",children:[A.score,u.jsx("span",{className:"text-xs text-slate-400 ml-1",children:A.unit})]})]},N)):u.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"Belum ada data"})})]},v)})})]})},$9=({history:n})=>{const e=n.filter(t=>t.category==="BENCHMARK").sort((t,s)=>new Date(s.date).getTime()-new Date(t.date).getTime()).slice(0,20);return e.length===0?u.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 rounded-3xl p-8 text-center border border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:"inline-block p-4 bg-slate-100 dark:bg-slate-700 rounded-full mb-4",children:u.jsx(C0,{size:32,className:"text-slate-400"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Belum ada aktivitas"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Mainkan tes untuk melihat riwayat Anda di sini."})]}):u.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[u.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[u.jsx(Os,{className:"text-indigo-500"})," Recent Activity"]}),u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{className:"bg-white dark:bg-slate-800 border-b border-slate-100 dark:border-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Test"}),u.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Date"}),u.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider text-right",children:"Score"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:e.map(t=>{const s=t.details;if(!s)return null;const a=s.game,o=t.score,c=(s==null?void 0:s.unit)||"",f=M0(a,o);return u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors group",children:[u.jsx("td",{className:"p-5",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`p-2 rounded-xl ${xg(a)}`,children:TN(a)}),u.jsx("span",{className:`font-bold text-base ${xg(a).split(" ")[0]}`,children:EN(a)})]})}),u.jsx("td",{className:"p-5",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),u.jsx("span",{className:"text-xs text-slate-400",children:new Date(t.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})}),u.jsx("td",{className:"p-5 text-right",children:u.jsxs("div",{className:"flex flex-col items-end",children:[u.jsxs("span",{className:"text-xl font-black text-slate-800 dark:text-white font-mono",children:[o,c]}),u.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${f>=50?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400"}`,children:["Top ",f,"%"]})]})})]},t.id)})})]})})})]})},Y9=({onBack:n,username:e,history:t,onComplete:s})=>{const[a,o]=F.useState("MENU"),[c,f]=F.useState("DASHBOARD"),[p,m]=F.useState(!1),[v,_]=F.useState("REACTION"),T=async(C,I)=>{let j="pts";(I==="REACTION"||I==="AIM")&&(j="ms"),(I==="SEQUENCE"||I==="NUMBER"||I==="CHIMP"||I==="VISUAL"||I==="BRIDGE"||I==="MATCH")&&(j="lvl"),I==="TYPING"&&(j="wpm"),tO(I,C,e,j).catch(G=>console.error("Cloud save failed",G));const L={id:`bench-${Date.now()}`,date:new Date().toISOString(),category:"BENCHMARK",score:C,maxScore:0,details:{game:I,unit:j},questions:[],answers:[]};s(L),o("MENU")};if(a!=="MENU")switch(a){case"REACTION":return u.jsx(U9,{onFinish:C=>T(C,"REACTION"),onExit:()=>o("MENU")});case"SEQUENCE":return u.jsx(V9,{onFinish:C=>T(C,"SEQUENCE"),onExit:()=>o("MENU")});case"AIM":return u.jsx(O9,{onFinish:C=>T(C,"AIM"),onExit:()=>o("MENU")});case"CHIMP":return u.jsx(j9,{onFinish:C=>T(C,"CHIMP"),onExit:()=>o("MENU")});case"VISUAL":return u.jsx(G9,{onFinish:C=>T(C,"VISUAL"),onExit:()=>o("MENU")});case"NUMBER":return u.jsx(B9,{onFinish:C=>T(C,"NUMBER"),onExit:()=>o("MENU")});case"VERBAL":return u.jsx(H9,{onFinish:C=>T(C,"VERBAL"),onExit:()=>o("MENU")});case"TYPING":return u.jsx(z9,{onFinish:C=>T(C,"TYPING"),onExit:()=>o("MENU")});case"BRIDGE":return u.jsx(F9,{onFinish:C=>T(C,"BRIDGE"),onExit:()=>o("MENU")});case"MATCH":return u.jsx(q9,{onFinish:C=>T(C,"MATCH"),onExit:()=>o("MENU")});default:return o("MENU"),null}const A=C=>{const I=t.filter(G=>G.category!=="BENCHMARK"||!G.details?!1:"game"in G.details&&G.details.game===C).map(G=>{const ee=G.details;return{id:G.id,game:ee.game,score:G.score,unit:ee.unit,date:G.date}});if(I.length===0)return{best:null,percentile:0};let j;C==="REACTION"||C==="AIM"?j=Math.min(...I.map(G=>G.score)):j=Math.max(...I.map(G=>G.score));const L=M0(C,j);return{best:j,percentile:L}},N=({game:C,title:I,desc:j,icon:L,colorClass:G,btnColorClass:ee})=>{const{best:re,percentile:oe}=A(C);let M="pts";return(C==="REACTION"||C==="AIM")&&(M="ms"),C==="TYPING"&&(M="wpm"),(C==="SEQUENCE"||C==="NUMBER"||C==="CHIMP"||C==="VISUAL"||C==="BRIDGE"||C==="MATCH")&&(M="lvl"),u.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all group h-full",children:[u.jsx("div",{className:`absolute top-0 bottom-0 left-0 w-1.5 ${G}`}),u.jsxs("div",{className:"p-5 flex flex-col sm:flex-row items-center gap-5 h-full",children:[u.jsx("div",{className:`p-4 rounded-2xl ${G} bg-opacity-10 text-opacity-100 shrink-0`,children:u.jsx("div",{className:`${G.replace("bg-","text-")}`,children:L})}),u.jsxs("div",{className:"flex-1 text-center sm:text-left min-w-0 w-full",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1 truncate",children:I}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs mb-3 line-clamp-2 min-h-[2.5em]",children:j}),u.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2 mb-2 overflow-hidden",children:u.jsx("div",{className:`h-full rounded-full ${G}`,style:{width:`${oe}%`}})}),u.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[u.jsxs("span",{children:["Best: ",re!==null?`${re} ${M}`:"-"]}),u.jsx("span",{children:oe>0?`Top ${oe}%`:"-"})]})]}),u.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 w-full sm:w-auto shrink-0",children:[u.jsxs("button",{onClick:D=>{D.stopPropagation(),le.play("click"),o(C)},className:`flex-1 sm:flex-none px-6 py-2.5 ${ee} text-white rounded-xl font-bold text-sm shadow-md hover:shadow-lg hover:scale-105 transition flex items-center justify-center gap-2`,children:[u.jsx(ch,{size:16,fill:"currentColor"})," MAIN"]}),u.jsxs("button",{onClick:D=>{D.stopPropagation(),le.play("click"),_(C),m(!0)},className:"flex-1 sm:flex-none px-4 py-2.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-500 dark:text-slate-300 rounded-xl font-bold text-xs transition flex items-center justify-center gap-1",children:[u.jsx(Vc,{size:14})," Stats"]})]})]})]})};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col font-sans transition-colors",children:u.jsxs("div",{className:"max-w-6xl mx-auto w-full",children:[u.jsx(L9,{isOpen:p,onClose:()=>m(!1),game:v,bestScore:A(v).best}),u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4",children:u.jsxs("button",{onClick:()=>{le.play("back"),n()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium transition self-start",children:[u.jsx(vt,{size:20,className:"mr-2"})," Menu Utama"]})}),u.jsxs("div",{className:"mb-10 text-center sm:text-left",children:[u.jsxs("h1",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 flex items-center justify-center sm:justify-start gap-3",children:[u.jsx(Os,{className:"text-rose-500",size:40})," Human Benchmark"]}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:["Halo ",u.jsx("span",{className:"font-bold text-indigo-500",children:e}),"! Uji batas kemampuan kognitifmu."]})]}),u.jsxs("div",{className:"flex justify-center sm:justify-start gap-4 mb-8 border-b border-slate-200 dark:border-slate-700",children:[u.jsx("button",{onClick:()=>f("DASHBOARD"),className:`pb-3 px-4 font-bold transition-all ${c==="DASHBOARD"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Game Dashboard"}),u.jsx("button",{onClick:()=>f("RANKING"),className:`pb-3 px-4 font-bold transition-all ${c==="RANKING"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Leaderboard"})]}),c==="DASHBOARD"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-6 mb-10",children:[u.jsx(N,{game:"REACTION",title:"Reaction Time",desc:"Uji seberapa cepat refleks visual Anda merespons perubahan warna.",icon:u.jsx(Yr,{size:32}),colorClass:"bg-amber-500",btnColorClass:"bg-amber-500 hover:bg-amber-600"}),u.jsx(N,{game:"SEQUENCE",title:"Sequence Memory",desc:"Ingat pola urutan kotak yang menyala semakin panjang.",icon:u.jsx(Ki,{size:32}),colorClass:"bg-indigo-500",btnColorClass:"bg-indigo-600 hover:bg-indigo-700"}),u.jsx(N,{game:"AIM",title:"Aim Trainer",desc:"Seberapa cepat Anda bisa mengenai semua target yang muncul?",icon:u.jsx(Ha,{size:32}),colorClass:"bg-orange-500",btnColorClass:"bg-orange-500 hover:bg-orange-600"}),u.jsx(N,{game:"CHIMP",title:"Chimp Test",desc:"Apakah Anda lebih pintar dari simpanse? Uji memori kerja spasial.",icon:u.jsx(Ms,{size:32}),colorClass:"bg-teal-500",btnColorClass:"bg-teal-500 hover:bg-teal-600"}),u.jsx(N,{game:"VISUAL",title:"Visual Memory",desc:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!",icon:u.jsx(Ki,{size:32}),colorClass:"bg-sky-500",btnColorClass:"bg-sky-500 hover:bg-sky-600"}),u.jsx(N,{game:"NUMBER",title:"Number Memory",desc:"Ingat angka terpanjang yang bisa Anda hafal.",icon:u.jsx(wf,{size:32}),colorClass:"bg-blue-600",btnColorClass:"bg-blue-600 hover:bg-blue-700"}),u.jsx(N,{game:"VERBAL",title:"Verbal Memory",desc:"Ingat kata mana yang baru muncul dan mana yang sudah pernah.",icon:u.jsx(If,{size:32}),colorClass:"bg-purple-500",btnColorClass:"bg-purple-500 hover:bg-purple-600"}),u.jsx(N,{game:"TYPING",title:"Typing Test",desc:"Berapa banyak kata yang bisa Anda ketik per menit?",icon:u.jsx(Br,{size:32}),colorClass:"bg-slate-500",btnColorClass:"bg-slate-600 hover:bg-slate-700"}),u.jsx(N,{game:"BRIDGE",title:"Bridge Memory",desc:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang.",icon:u.jsx(Nf,{size:32}),colorClass:"bg-emerald-500",btnColorClass:"bg-emerald-600 hover:bg-emerald-700"}),u.jsx(N,{game:"MATCH",title:"Match Memory",desc:"Cari pasangan simbol yang sama di balik kartu.",icon:u.jsx(Af,{size:32}),colorClass:"bg-pink-500",btnColorClass:"bg-pink-600 hover:bg-pink-700"})]}),u.jsx($9,{history:t})]}):u.jsx(K9,{username:e,history:t})]})})},SN=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},J9=({message:n,type:e,onClose:t})=>{const s=e==="success"?"bg-emerald-500":e==="error"?"bg-rose-500":"bg-indigo-600",a=e==="success"?u.jsx(ys,{size:20}):e==="error"?u.jsx(yg,{size:20}):u.jsx(nj,{size:20});return F.useEffect(()=>{const o=setTimeout(t,3e3);return()=>clearTimeout(o)},[t]),u.jsxs("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl text-white ${s} animate-fade-in-down transition-all`,children:[a,u.jsx("span",{className:"font-bold text-sm",children:n}),u.jsx("button",{onClick:t,className:"ml-4 hover:bg-white/20 p-1 rounded-full",children:u.jsx(cl,{size:18})})]})},Q9=({onGoogleLogin:n,isLoading:e})=>u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6 transition-colors duration-300",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700 text-center",children:[u.jsx("div",{className:"mb-8 flex justify-center",children:u.jsx("img",{src:Xd,alt:"Logo",className:"w-24 h-24 object-contain animate-bounce-slow"})}),u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Fajmuls Learning"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Platform Belajar Cerdas & Terintegrasi"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{onClick:n,disabled:e,className:"w-full py-4 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl font-bold text-lg text-slate-700 dark:text-white hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:[e?u.jsx(Bs,{className:"animate-spin"}):u.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-6 h-6"}),"Masuk dengan Google"]}),u.jsx("p",{className:"text-xs text-slate-400 mt-4",children:"Riwayat belajar Anda akan tersimpan secara otomatis di cloud."})]})]})}),W9=({onSubmit:n})=>{const[e,t]=F.useState(""),[s,a]=F.useState(!1),[o,c]=F.useState(""),f=async p=>{p.preventDefault();const m=e.trim();if(m.length<3){c("Username minimal 3 karakter");return}a(!0),c("");try{await lN(m)?n(m):c("Username sudah terpakai, cari yang lain.")}catch{c("Gagal mengecek username.")}finally{a(!1)}};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6",children:u.jsx(R0,{size:32})}),u.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Buat Username"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Pilih identitas unik Anda di platform ini."}),u.jsxs("form",{onSubmit:f,children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("input",{type:"text",className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none font-bold text-center text-lg",placeholder:"username_anda",value:e,onChange:p=>t(p.target.value.toLowerCase().replace(/\s/g,"")),autoFocus:!0}),o&&u.jsx("p",{className:"text-rose-500 text-sm mt-2",children:o})]}),u.jsx("button",{type:"submit",disabled:s||!e,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2 disabled:opacity-50",children:s?u.jsx(Bs,{className:"animate-spin"}):"Simpan & Lanjut"})]})]})})},X9=({result:n,feature:e,onBack:t})=>u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center",children:u.jsxs("div",{className:"max-w-3xl w-full",children:[u.jsxs("button",{onClick:t,className:"mb-4 text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[u.jsx(vt,{size:18})," Kembali"]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[u.jsxs("h2",{className:"text-2xl font-bold mb-6 text-slate-800 dark:text-white flex items-center gap-2",children:[u.jsx(N0,{size:28,className:"text-indigo-600"})," Hasil ",e]}),u.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:u.jsx(SN,{text:n})})]})]})}),Z9=({questions:n,onComplete:e})=>{const[t,s]=F.useState(0),[a,o]=F.useState(""),[c,f]=F.useState(null),[p,m]=F.useState(!1),[v,_]=F.useState([]),T=n[t],A=async()=>{if(a.trim()){m(!0),le.play("click");try{const C=await U4(T.content,a);f(C)}catch{alert("Gagal evaluasi.")}finally{m(!1)}}},N=()=>{le.play("click");const C={questionId:T.id,selectedAnswer:a,isCorrect:!0,scoreEarned:(c==null?void 0:c.score)||0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,interviewFeedback:c||void 0},I=[...v,C];_(I),o(""),f(null),t<n.length-1?s(t+1):e(I)};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"mb-4 text-sm font-bold text-slate-400",children:["Pertanyaan ",t+1," dari ",n.length]}),u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6",children:T.content}),c?u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:["Skor: ",c.score,"/100"]}),u.jsx("span",{className:"text-sm bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 px-2 py-1 rounded",children:c.toneAnalysis})]}),u.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:[u.jsx("b",{children:"Feedback:"})," ",c.feedback]}),u.jsxs("div",{className:"text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300 p-3 rounded-lg border border-emerald-100 dark:border-emerald-800",children:[u.jsx("b",{children:"Saran Jawaban:"})," ",c.improvedAnswer]})]}),u.jsx("button",{onClick:N,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90",children:"Lanjut"})]}):u.jsxs(u.Fragment,{children:[u.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-40 focus:ring-2 focus:ring-indigo-500",placeholder:"Jawab seolah sedang interview...",value:a,onChange:C=>o(C.target.value)}),u.jsxs("button",{onClick:A,disabled:p||!a,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[p?u.jsx(Bs,{className:"animate-spin"}):u.jsx(I0,{size:18})," Submit Jawaban"]})]})]})})},e8=({flashcards:n,onFinish:e})=>{const[t,s]=F.useState(0),a=o=>{t<n.length-1?s(t+1):e()};return n.length===0?u.jsx("div",{children:"No Flashcards"}):u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:[u.jsxs("div",{className:"w-full max-w-xl mb-6 flex justify-between items-center",children:[u.jsx("button",{onClick:e,className:"text-slate-500 hover:text-indigo-600",children:u.jsx(vt,{size:20})}),u.jsxs("span",{className:"font-bold text-slate-400",children:[t+1," / ",n.length]})]}),u.jsx(u9,{data:n[t],onNext:a})]})},t8=({topic:n,onFinish:e})=>{const[t,s]=F.useState(""),[a,o]=F.useState(null),[c,f]=F.useState(!1),p=async()=>{f(!0),le.play("click");try{const m=await V4(n,t);o(m)}catch{alert("Error")}finally{f(!1)}};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Feynman Technique"}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Jelaskan topik ",u.jsxs("b",{children:['"',n,'"']})," seolah-olah Anda sedang mengajari anak kecil (5 tahun). Gunakan bahasa sederhana."]}),a?u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsxs("div",{className:`text-2xl font-bold ${a.understandingScore>70?"text-emerald-500":"text-amber-500"}`,children:[a.understandingScore,"/100"]}),u.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 uppercase font-bold",children:"Skor Pemahaman"})]}),u.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[u.jsxs("p",{children:[u.jsx("b",{children:"Kualitas Penyederhanaan:"})," ",a.simplificationQuality]}),u.jsxs("p",{children:[u.jsx("b",{children:"Konsep yang Terlewat:"})," ",a.missingConcepts.join(", ")||"Tidak ada"]}),u.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg border border-indigo-100 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[u.jsx("b",{children:"Koreksi / Saran:"})," ",a.correction]})]})]}),u.jsx("button",{onClick:e,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold",children:"Selesai Belajar"})]}):u.jsxs(u.Fragment,{children:[u.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-48 focus:ring-2 focus:ring-indigo-500",placeholder:"Mulai jelaskan di sini...",value:t,onChange:m=>s(m.target.value)}),u.jsx("button",{onClick:p,disabled:c||!t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50",children:c?"Menganalisis...":"Cek Pemahaman Saya"})]})]})})},n8=({topic:n,onFinish:e})=>{const t=["Survey","Question","Read","Recite","Review"],[s,a]=F.useState(0),o=["Lakukan scanning cepat pada materi. Baca judul, subjudul, dan kesimpulan. Dapatkan gambaran besar.","Buat pertanyaan dari judul/subjudul. Apa yang ingin Anda ketahui? Ubah judul menjadi pertanyaan.","Baca materi dengan seksama untuk mencari jawaban atas pertanyaan Anda tadi.","Tutup materi. Ucapkan kembali apa yang baru saja dibaca dengan kata-kata sendiri.","Review ulang seluruh materi dan catatan Anda. Pastikan semuanya tersimpan di memori."];return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[u.jsx("div",{className:"flex justify-center mb-8",children:t.map((c,f)=>u.jsxs("div",{className:`flex items-center ${f<t.length-1?"w-full":""}`,children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${f<=s?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:c[0]}),f<t.length-1&&u.jsx("div",{className:`h-1 flex-1 ${f<s?"bg-indigo-600":"bg-slate-100 dark:bg-slate-700"}`})]},c))}),u.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-4",children:t[s]}),u.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-300 mb-8",children:o[s]}),u.jsx("button",{onClick:()=>{le.play("click"),s<4?a(s+1):e()},className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:s<4?"Lanjut Tahap Berikutnya":"Selesai SQ3R"})]})})},s8=({category:n,onBack:e,onStartSession:t,onOpenTOSelection:s,onStartTesKoran:a,onStartTesKecermatan:o,onGeneralInputSubmit:c,generalInput:f,setGeneralInput:p,isReadingMaterial:m,onResetMaterial:v,onSubtestSelect:_,selectedSubtest:T,weakTopicsCount:A,loading:N,skdStream:C,onSkdStreamSelect:I,onHistory:j,onStartGeneralSession:L,onStartSkripsiSession:G,username:ee,isDarkMode:re,onToggleDarkMode:oe})=>{const[M,D]=F.useState(""),[R,O]=F.useState(null),[V,B]=F.useState("MEDIUM"),[U,pe]=F.useState("MEDIUM"),[Re,J]=F.useState(!1),he=F.useRef(null),[be,Ae]=F.useState(""),[xe,H]=F.useState(5),[ne,Z]=F.useState("Medium"),K=ye=>{var _e;const Ce=(_e=ye.target.files)==null?void 0:_e[0];if(Ce){if(Ce.type!=="application/pdf"){alert("Hanya file PDF yang diperbolehkan.");return}O(Ce.name),D(""),J(!0);const dt=new FileReader;dt.onload=bt=>{var ct;const et=((ct=bt.target)==null?void 0:ct.result).split(",")[1];setTimeout(()=>{p&&p({type:"pdf",content:et,title:Ce.name,lengthPreference:V,difficultyPreference:U}),J(!1)},800)},dt.readAsDataURL(Ce)}},$=()=>{(f==null?void 0:f.type)==="pdf"?c({...f,lengthPreference:V,difficultyPreference:U}):M?c({type:"text",content:M,title:"Input Manual",lengthPreference:V,difficultyPreference:U}):alert("Mohon masukkan teks atau upload PDF.")},ce=ye=>{const Ce=ye.filter(_e=>_e.toLowerCase().includes(be.toLowerCase()));return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6 animate-fade-in-up",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Pilih Topik / Subtes:"}),u.jsxs("div",{className:"mb-4 relative",children:[u.jsx(Ap,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),u.jsx("input",{type:"text",placeholder:"Cari topik...",value:be,onChange:_e=>Ae(_e.target.value),className:"w-full pl-10 p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:Ce.length>0?Ce.map(_e=>u.jsx("button",{onClick:()=>{le.play("tap"),_(_e)},className:`px-4 py-2 rounded-full text-sm font-medium transition ${T===_e?"bg-indigo-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:_e},_e)):u.jsx("div",{className:"text-sm text-slate-500 italic p-2",children:"Tidak ada topik yang cocok."})}),T&&n!=="INTERVIEW"&&n!=="SKRIPSI"&&u.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-6 animate-fade-in-up",children:u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[u.jsxs("div",{className:"flex-1 w-full",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Jumlah Soal"}),u.jsxs("select",{value:xe,onChange:_e=>H(Number(_e.target.value)),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[u.jsx("option",{value:"5",children:"5 Soal"}),u.jsx("option",{value:"10",children:"10 Soal"}),u.jsx("option",{value:"15",children:"15 Soal"}),u.jsx("option",{value:"20",children:"20 Soal"})]})]}),u.jsxs("div",{className:"flex-1 w-full",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Tingkat Kesulitan"}),u.jsxs("select",{value:ne,onChange:_e=>Z(_e.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[u.jsx("option",{value:"Easy",children:"Mudah"}),u.jsx("option",{value:"Medium",children:"Sedang"}),u.jsx("option",{value:"Hard",children:"Sulit"}),u.jsx("option",{value:"HOTS",children:"HOTS (Analisis Tinggi)"})]})]}),u.jsxs("button",{onClick:()=>{le.play("click"),t(qe.PRACTICE,ne,xe)},className:"w-full sm:w-auto px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[u.jsx(NE,{size:18})," Mulai Latihan"]})]})}),n==="INTERVIEW"&&T&&u.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-4 animate-fade-in-up",children:u.jsxs("button",{onClick:()=>{le.play("click"),t(qe.DRILL)},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[u.jsx(I0,{size:20})," Mulai Sesi Wawancara"]})})]})};return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors duration-300",children:[u.jsx(c9,{}),u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("button",{onClick:()=>{le.play("back"),e()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium",children:[u.jsx(vt,{size:18,className:"mr-2"})," Kembali"]}),u.jsxs("div",{className:"flex items-center gap-3",children:[oe&&u.jsx("button",{onClick:()=>{oe()},className:"p-2 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 transition",children:re?u.jsx(yN,{size:16}):u.jsx(mN,{size:16})}),u.jsxs("span",{className:"text-xs font-bold text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full flex items-center gap-1",children:[u.jsx(R0,{size:12})," ",ee]})]})]}),u.jsx("div",{className:"flex justify-between items-end mb-8",children:u.jsxs("div",{children:[u.jsxs("span",{className:"text-sm font-bold tracking-wider text-indigo-600 uppercase mb-1 block",children:[n," Dashboard"]}),u.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Pusat Kendali Belajar"})]})}),N?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[u.jsx(Bs,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"}),u.jsx("p",{className:"text-slate-500 font-medium",children:"AI sedang memproses materi..."}),u.jsx("div",{className:"max-w-md w-full mt-8 space-y-4",children:u.jsx(f9,{})})]}):u.jsxs(u.Fragment,{children:[n==="KECERMATAN"&&u.jsx("div",{className:"animate-fade-in-up",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.jsxs("button",{onClick:()=>{le.play("click"),o("ANGKA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg text-indigo-600 dark:text-indigo-400",children:u.jsx(Os,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Angka Hilang"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Standar tes kedinasan/Polri. Temukan angka yang hilang dari kolom."})]}),u.jsxs("button",{onClick:()=>{le.play("click"),o("HURUF")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg text-emerald-600 dark:text-emerald-400",children:u.jsx(Br,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Huruf Hilang"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Variasi huruf. Melatih ketelitian visual terhadap karakter mirip."})]}),u.jsxs("button",{onClick:()=>{le.play("click"),o("SIMBOL_HILANG")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-purple-50 dark:hover:bg-purple-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-purple-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg text-purple-600 dark:text-purple-400",children:u.jsx(Oj,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Simbol Hilang"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Temukan simbol yang hilang. Melatih ketelitian visual bentuk abstrak."})]}),u.jsxs("button",{onClick:()=>{le.play("click"),o("SAMA_BEDA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-amber-50 dark:hover:bg-amber-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-amber-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg text-amber-600 dark:text-amber-400",children:u.jsx($O,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Sama Beda Simbol"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Bandingkan dua baris simbol. Tentukan SAMA atau BEDA secepat mungkin."})]}),u.jsxs("button",{onClick:()=>{le.play("click"),o("MATCHING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-rose-50 dark:hover:bg-rose-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-rose-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-rose-100 dark:bg-rose-900/40 rounded-lg text-rose-600 dark:text-rose-400",children:u.jsx(Ha,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Matching (Pencocokan)"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cocokkan simbol dengan kode kuncinya. Melatih memori kerja jangka pendek."})]}),u.jsxs("button",{onClick:()=>{le.play("click"),o("GROUPING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-cyan-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-cyan-100 dark:bg-cyan-900/40 rounded-lg text-cyan-600 dark:text-cyan-400",children:u.jsx(aj,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Grouping (Pengelompokan)"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Pilih semua simbol yang diminta dari grid acak. Melatih fokus selektif."})]})]})}),n==="SKRIPSI"&&u.jsx("div",{className:"animate-fade-in-up max-w-2xl mx-auto",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[u.jsx(N0,{size:24,className:"text-indigo-600"})," Skripsi Assistant"]}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Masukkan topik atau judul skripsi Anda untuk mendapatkan bantuan AI."}),u.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:ring-2 focus:ring-indigo-500 h-32",placeholder:"Contoh: Pengaruh Kecerdasan Buatan terhadap Minat Belajar Mahasiswa Teknik Informatika...",value:M,onChange:ye=>D(ye.target.value)}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("button",{onClick:()=>{le.play("click"),G&&G("TITLE_IDEAS",M)},className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 rounded-xl font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/40 flex flex-col items-center gap-2 border border-indigo-100 dark:border-indigo-800",children:[u.jsx(Ms,{size:24})," Ide Judul"]}),u.jsxs("button",{onClick:()=>{le.play("click"),G&&G("OUTLINE",M)},className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/40 flex flex-col items-center gap-2 border border-emerald-100 dark:border-emerald-800",children:[u.jsx(Br,{size:24})," Buat Outline"]}),u.jsxs("button",{onClick:()=>{le.play("click"),G&&G("METHODOLOGY",M)},className:"p-4 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-xl font-bold hover:bg-amber-100 dark:hover:bg-amber-900/40 flex flex-col items-center gap-2 border border-amber-100 dark:border-amber-800",children:[u.jsx(Ap,{size:24})," Cek Metodologi"]}),u.jsxs("button",{onClick:()=>{le.play("click"),G&&G("PARAPHRASE",M)},className:"p-4 bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-300 rounded-xl font-bold hover:bg-rose-100 dark:hover:bg-rose-900/40 flex flex-col items-center gap-2 border border-rose-100 dark:border-rose-800",children:[u.jsx(HO,{size:24})," Parafrase Teks"]})]})]})}),n==="GENERAL"&&u.jsx("div",{className:"space-y-8 animate-fade-in-up",children:m?u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-slate-100 dark:border-slate-700",children:[u.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[u.jsx(wE,{size:20})," Materi Belajar"]}),u.jsx("button",{onClick:v,className:"text-sm text-rose-500 hover:underline",children:"Ganti Materi"})]}),(f==null?void 0:f.type)==="pdf"&&f.content&&u.jsx("div",{className:"mb-6",children:u.jsx("embed",{src:`data:application/pdf;base64,${f.content}`,className:"w-full h-[500px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})}),u.jsx("div",{className:"prose prose-sm max-w-none text-slate-700 dark:text-slate-300 leading-relaxed max-h-[400px] overflow-y-auto p-2 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-700",children:u.jsx(SN,{text:(f==null?void 0:f.extractedText)||(f==null?void 0:f.content)||""})})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Sudah selesai membaca? Pilih Metode Belajar:"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:mC.map(ye=>{const _e={Brain:Ms,Repeat:kj,MessageCircle:pj,Share2:Gj,Search:Ap,GraduationCap:fN,BookOpen:wE,PenTool:NE}[ye.icon]||Ms;return u.jsxs("button",{onClick:()=>{le.play("click"),L(ye.id)},className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:shadow-md transition text-left flex flex-col h-full",children:[u.jsx("div",{className:"mb-3 text-indigo-600 dark:text-indigo-400",children:u.jsx(_e,{size:24})}),u.jsx("h4",{className:"font-bold text-sm mb-1 text-slate-900 dark:text-white",children:ye.name}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:ye.desc})]},ye.id)})})]})]}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[u.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[u.jsx(k0,{size:20})," Input Materi"]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Masukkan topik, teks materi, atau upload PDF yang ingin dipelajari."}),u.jsxs("div",{className:"flex gap-2 mb-4",children:[u.jsx("input",{type:"text",className:"flex-1 p-3 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl",placeholder:R?`PDF Terpilih: ${R}`:"Contoh: Perang Dunia II, Hukum Newton, atau paste teks...",value:M,disabled:!!R,onChange:ye=>{D(ye.target.value)}}),u.jsx("input",{type:"file",ref:he,accept:"application/pdf",className:"hidden",onChange:K}),u.jsxs("button",{className:`p-3 rounded-xl transition flex items-center gap-2 ${R?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200"}`,title:"Upload PDF",onClick:()=>{var ye;return(ye=he.current)==null?void 0:ye.click()},children:[u.jsx(Br,{size:20}),u.jsx("span",{className:"hidden sm:inline font-bold text-sm",children:"Upload PDF"})]})]}),R&&u.jsxs("div",{className:"mb-4 text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 px-4 py-2 rounded-lg flex items-center justify-between animate-fade-in-up border border-emerald-100 dark:border-emerald-800",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ys,{size:16}),u.jsxs("span",{children:["File siap: ",u.jsx("b",{children:R})]})]}),u.jsx("button",{onClick:()=>{O(null),p&&p(null),he.current&&(he.current.value="")},className:"text-slate-400 hover:text-rose-500",title:"Hapus PDF",children:u.jsx(Cf,{size:16})})]}),Re?u.jsxs("div",{className:"mb-6 space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-2",children:[u.jsx(Bs,{size:14,className:"animate-spin"})," Memuat Preview PDF..."]}),u.jsx(Ra,{height:"h-[300px]",className:"rounded-xl"})]}):(f==null?void 0:f.type)==="pdf"&&f.content&&u.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 mb-2 block",children:"Preview PDF:"}),u.jsx("embed",{src:`data:application/pdf;base64,${f.content}`,className:"w-full h-[300px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Panjang Materi (Ringkasan)"}),u.jsxs("select",{value:V,onChange:ye=>B(ye.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[u.jsx("option",{value:"SHORT",children:"Ringkas / Poin Penting"}),u.jsx("option",{value:"MEDIUM",children:"Standar (Rekomedasi)"}),u.jsx("option",{value:"LONG",children:"Mendalam / Detail"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Tingkat Kesulitan Soal"}),u.jsxs("select",{value:U,onChange:ye=>pe(ye.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[u.jsx("option",{value:"EASY",children:"Mudah (Recall)"}),u.jsx("option",{value:"MEDIUM",children:"Sedang (Konseptual)"}),u.jsx("option",{value:"HARD",children:"Sulit / HOTS"})]})]})]}),u.jsx("button",{onClick:()=>{le.play("click"),$()},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Proses & Baca Materi"})]})}),n==="UTBK"&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>{le.play("click"),s()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group shadow-lg shadow-indigo-200 dark:shadow-none",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[u.jsx(Ba,{size:24,className:"text-rose-400"})," Simulasi UTBK SNBT Full"]}),u.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"160 Soal. Durasi 195 Menit. Format Resmi 2025."})]}),u.jsx($o,{className:"group-hover:translate-x-2 transition-transform"})]}),ce(pC)]}),n==="TPA"&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>{le.play("click"),s()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[u.jsx(Ms,{size:24,className:"text-indigo-400"})," Simulasi TPA Full"]}),u.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"65 Soal (TPA & TBI). Durasi 60-100 Menit."})]}),u.jsx($o,{className:"group-hover:translate-x-2 transition-transform"})]}),ce(yC)]}),n==="PSIKOTEST"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[u.jsxs("button",{onClick:()=>{le.play("click"),a()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[u.jsx(IO,{size:48,className:"mx-auto mb-4 text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Tes Koran (Pauli/Kraepelin)"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Uji kecepatan, ketelitian, dan stabilitas emosi dengan menjumlahkan angka."})]}),u.jsxs("button",{onClick:()=>{le.play("click"),s()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[u.jsx(Ms,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Psikotes Logika & IQ"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Analogi, Deret Angka, dan Penalaran Logis (HOTS)."})]})]}),u.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Latihan Per Subtes"}),ce(xC)]})]}),n==="INTERVIEW"&&ce(vC),n==="SKD"&&(C?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-600 dark:text-slate-300",children:[u.jsx("button",{onClick:()=>I(null),className:"underline",children:"Ubah Jalur"})," ",u.jsx($o,{size:14})," ",u.jsx("b",{children:C})]}),u.jsxs("button",{onClick:()=>{le.play("click"),s()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center shadow-lg shadow-indigo-200 dark:shadow-none",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[u.jsx(Ba,{size:24,className:"text-rose-400"})," Simulasi SKD CAT (110 Soal)"]}),u.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"TWK, TIU, TKP. Durasi 100 Menit. Scoring Resmi."})]}),u.jsx($o,{className:"group-hover:translate-x-2 transition-transform"})]}),ce(gC)]}):u.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[u.jsxs("button",{onClick:()=>{le.play("click"),I("KEDINASAN")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[u.jsx(ij,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Sekolah Kedinasan"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"STAN, STIS, IPDN, dll"})]}),u.jsxs("button",{onClick:()=>{le.play("click"),I("CPNS")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[u.jsx(NO,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"CPNS Umum"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Kementerian & Lembaga"})]})]})),n!=="GENERAL"&&n!=="INTERVIEW"&&n!=="SKRIPSI"&&n!=="PSIKOTEST"&&n!=="KECERMATAN"&&n!=="BENCHMARK"&&u.jsxs("div",{className:"mt-8 animate-fade-in-up delay-100",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Mode Belajar Lainnya"}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs("button",{onClick:()=>{le.play("click"),t(qe.DRILL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[u.jsx(Yr,{className:"text-amber-500 mb-2"}),u.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Learn & Drill"}),u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Materi + 1 Soal"})]}),u.jsxs("button",{onClick:()=>{le.play("click"),t(qe.ACTIVE_RECALL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[u.jsx(Ms,{className:"text-emerald-500 mb-2"}),u.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Active Recall"}),u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Isian Singkat"})]}),A>0&&u.jsxs("button",{onClick:()=>{le.play("click"),t(qe.WEAKNESS)},className:"p-4 bg-white dark:bg-slate-800 border border-rose-200 dark:border-rose-900 rounded-xl hover:border-rose-500 hover:shadow-md transition text-left",children:[u.jsx(Ha,{className:"text-rose-500 mb-2"}),u.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Weakness Attack"}),u.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[A," Topik Lemah"]})]})]})]})]})]})]})};function i8(){var Fs;const[n,e]=F.useState("SPLASH"),[t,s]=F.useState(null),[a,o]=F.useState(!1),[c,f]=F.useState(!1),[p,m]=F.useState({soundEnabled:!0,musicEnabled:!0,volume:.5,funnyNotifications:!0,confirmActions:!0,darkMode:!1}),[v,_]=F.useState(null),[T,A]=F.useState(null),[N,C]=F.useState(null),[I,j]=F.useState(!1),[L,G]=F.useState(""),[ee,re]=F.useState(null),[oe,M]=F.useState(null),[D,R]=F.useState(new Set),[O,V]=F.useState("ANGKA"),[B,U]=F.useState(null),[pe,Re]=F.useState([]),[J,he]=F.useState(null),[be,Ae]=F.useState(null),[xe,H]=F.useState(""),[ne,Z]=F.useState([]),[K,$]=F.useState(null),[ce,ye]=F.useState([]),[Ce,_e]=F.useState(!1),[dt,bt]=F.useState(void 0),[et,ct]=F.useState(!1),[Nt,Ut]=F.useState([]),[Vt,Sn]=F.useState(null),[Bn,Rt]=F.useState(null),tt=(ge,Pe)=>Rt({msg:ge,type:Pe}),[zs,Qi]=F.useState([...db,...fb,...hb,...gb,...xb,...mb,...pb,...yb]);F.useEffect(()=>{const ge=localStorage.getItem("fajmuls_settings");ge?m(JSON.parse(ge)):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&m(Ke=>({...Ke,darkMode:!0}));const Pe=y5(A0,async Ke=>{if(Ke){_(Ke);const Et=await JV(Ke.uid);Et?(A(Et),Ja(Ke.uid),e("HOME")):e("USERNAME_SETUP")}else _(null),A(null),n!=="SPLASH"&&e("LOGIN")});return()=>Pe()},[]);const Ja=async ge=>{try{const Pe=await ZV(ge);Ut(Pe)}catch{tt("Gagal memuat riwayat","error")}},ln=async()=>{f(!0);try{await $V()}catch{tt("Gagal Login Google","error")}finally{f(!1)}},gi=async ge=>{if(v)try{const Pe=await QV(v,ge);A(Pe),e("HOME"),tt(`Selamat datang, ${ge}!`,"success")}catch{tt("Gagal membuat profil","error")}},ea=async()=>{le.play("click"),await YV(),Ut([]),e("LOGIN")},ta=async()=>{ct(!0);const ge=[...db,...fb,...hb,...gb,...xb,...mb,...pb,...yb];try{const Pe=await iO(),Ke=new Set(ge.map(Ct=>Ct.id)),Et=Pe.filter(Ct=>!Ke.has(Ct.id));Qi([...ge,...Et])}catch(Pe){console.error("Failed to load cloud packages",Pe),Qi(ge),tt("Gagal memuat paket online. Menggunakan data offline.","error")}finally{ct(!1)}};F.useEffect(()=>{localStorage.setItem("fajmuls_settings",JSON.stringify(p)),p.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),le.syncSettings(p)},[p]);const vs=async ge=>{const Pe=[ge,...Nt];Ut(Pe),v&&await XV(v.uid,ge)},Tl=async ge=>{const Pe=Nt.filter(Ke=>Ke.id!==ge);if(Ut(Pe),v)try{await eO(v.uid,ge),tt("Riwayat berhasil dihapus secara permanen.","success")}catch{tt("Gagal menghapus dari cloud.","error")}le.play("click")},Qa=async ge=>{_e(!0);try{const Pe=await O4(ge);C({...ge,extractedText:Pe}),j(!0)}catch{tt("Gagal memproses materi. Coba lagi.","error")}finally{_e(!1)}},na=async(ge,Pe,Ke)=>{if(t){bt(void 0),_e(!0),re(ge),ye([]),Z([]),$(null);try{const Et=L;if(ge===qe.DRILL){const Ct=await G4(t,Et,oe||void 0);$(Ct),Ct&&Ct.question&&Z([Ct.question])}else if(ge===qe.SIMULATION&&t==="SKD"&&oe){const Ct=await B4(oe);Z(Ct||[])}else if(ge===qe.SIMULATION&&t==="UTBK"){const Ct=await H4();Z(Ct||[])}else if(ge===qe.SIMULATION&&t==="TPA"){const Ct=await z4();Z(Ct||[])}else if(ge===qe.SIMULATION&&t==="PSIKOTEST"){const Ct=await F4();Z(Ct||[])}else{const Xi=await Cn(ge,t,Et,Ke||5,Array.from(D),oe||void 0,void 0,Pe);Z(Xi||[])}e("SESSION")}catch{tt("Gagal memuat soal. Kemungkinan traffic AI sedang tinggi.","error")}finally{_e(!1)}}},bs=(ge,Pe,Ke=!1)=>{if(Pe){const _s={...Pe,isAborted:Ke};vs(_s),(Pe.category!=="BENCHMARK"||Ke)&&e("HOME");return}ye(ge);let Et=0,Ct=0,Xi;const es=ge.filter(_s=>_s.isCorrect).length;Et=Math.round(es/(ne.length||1)*100),Ct=100,vs({id:`h-${Date.now()}`,date:new Date().toISOString(),category:t,skdStream:oe||void 0,score:Et,maxScore:Ct,details:Xi,questions:ne,answers:ge,isAborted:Ke,packageTitle:dt}),bt(void 0),e("RESULTS")},Hn=ge=>{le.play("click"),s(ge),bt(void 0),ge==="BUTAWRNA"?e("COLORBLIND"):ge==="BENCHMARK"?e("BENCHMARK"):(e("DASHBOARD"),C(null),j(!1),G(""),M(null),U(null),Ae(null),H(""))},Zt=ge=>{V(ge),e("TES_KECERMATAN")},Rn=ge=>{Z(ge.questions),re(qe.SIMULATION),bt(ge.title),e("SESSION")},Mt=async ge=>{if(t)try{const Pe=await Cn(qe.SIMULATION,t,"SIMULATION",20),Ke={id:`gen-${Date.now()}`,title:`Generated ${t}`,category:t,questions:Pe,durationMinutes:60,isAiGenerated:!0,createdAt:new Date().toISOString()};await sO(Ke),Qi(Et=>[Ke,...Et]),tt("Paket berhasil dibuat!","success")}catch{tt("Gagal membuat paket soal.","error")}},Wa=async ge=>{if(Qi(Pe=>Pe.filter(Ke=>Ke.id!==ge)),ge.startsWith("gen-"))try{await rO(ge)}catch{}},Wi=ge=>{},Xa=async ge=>{_e(!0),U(ge),re(qe.DRILL);try{const Pe=await Cn(qe.DRILL,"GENERAL",N,5,[],void 0,ge);Z(Pe),e("SESSION")}catch{tt("Gagal memuat materi AI.","error")}finally{_e(!1)}},Zn=async(ge,Pe)=>{_e(!0),Ae(ge);try{const Ke=await j4(Pe,ge);H(Ke),e("SESSION")}catch{tt("Gagal generate.","error")}finally{_e(!1)}};return n==="SPLASH"?u.jsx(h9,{onComplete:()=>e(v?"HOME":"LOGIN")}):n==="LOGIN"?u.jsx(Q9,{onGoogleLogin:ln,isLoading:c}):n==="USERNAME_SETUP"?u.jsx(W9,{onSubmit:gi}):u.jsxs(u.Fragment,{children:[Bn&&u.jsx(J9,{message:Bn.msg,type:Bn.type,onClose:()=>Rt(null)}),u.jsx(m9,{isOpen:a,onClose:()=>o(!1),settings:p,onUpdate:m,userProfile:T,onUpdateUsername:ge=>A(Pe=>Pe?{...Pe,username:ge}:null)}),n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&u.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md z-40 border-b border-slate-200 dark:border-slate-700 px-6 py-3 flex justify-between items-center animate-fade-in-down",children:[u.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{le.play("click"),e("HOME")},children:[u.jsx("img",{src:Xd,alt:"Logo",className:"w-8 h-8 object-contain"}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white hidden sm:block",children:"Fajmuls Learning"})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[u.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:(T==null?void 0:T.username)||"Guest"}),u.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:"Ready to learn"})]}),u.jsx("button",{onClick:()=>{le.play("click"),o(!0)},className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition",children:u.jsx(gN,{size:20,className:"text-slate-600 dark:text-slate-300"})})]})]}),u.jsxs("div",{className:`${n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"?"pt-20":""}`,children:[n==="HOME"&&u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center relative transition-colors duration-300",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("img",{src:Xd,alt:"Logo",className:"w-32 h-32 object-contain mx-auto mb-6 animate-float"}),u.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Pilih Jalur Belajarmu"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Sistem belajar adaptif untuk persiapan ujian."})]}),u.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl",children:GE.map(ge=>u.jsxs("button",{onClick:()=>Hn(ge.id),className:`p-8 rounded-2xl border-2 transition-all group text-left flex flex-col items-start relative overflow-hidden hover:-translate-y-1 hover:shadow-xl ${ge.id==="BENCHMARK"?"bg-white dark:bg-slate-800 border-red-200 dark:border-red-900 hover:border-red-500":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500"}`,children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2 relative z-10",children:ge.name}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm leading-relaxed relative z-10",children:ge.desc})]},ge.id))}),u.jsxs("div",{className:"mt-12 flex gap-4",children:[u.jsxs("button",{onClick:()=>{le.play("click"),e("HISTORY")},className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[u.jsx(C0,{size:18})," Riwayat Belajar"]}),u.jsxs("button",{onClick:ea,className:"flex items-center gap-2 px-6 py-3 bg-rose-50 dark:bg-rose-900/20 rounded-xl shadow-sm border border-rose-100 dark:border-rose-900 font-bold text-rose-700 dark:text-rose-400 hover:bg-rose-100 dark:hover:bg-rose-900/40 transition",children:[u.jsx(fj,{size:18})," Keluar"]})]})]}),n==="DASHBOARD"&&u.jsx(s8,{category:t,onBack:()=>{le.play("back"),e("HOME")},onStartSession:na,onOpenTOSelection:()=>{le.play("click"),e("TO_SELECTION")},onStartTesKoran:()=>{le.play("click"),e("TES_KORAN")},onStartTesKecermatan:Zt,onGeneralInputSubmit:Qa,generalInput:N,setGeneralInput:C,isReadingMaterial:I,onResetMaterial:()=>{j(!1),C(null)},onSubtestSelect:G,selectedSubtest:L,weakTopicsCount:D.size,loading:Ce,skdStream:oe,onSkdStreamSelect:M,onHistory:()=>{le.play("click"),e("HISTORY")},onStartGeneralSession:Xa,onStartSkripsiSession:Zn,username:(T==null?void 0:T.username)||"",isDarkMode:p.darkMode,onToggleDarkMode:()=>{m(ge=>({...ge,darkMode:!ge.darkMode}))}}),n==="TO_SELECTION"&&u.jsx(g9,{category:t,skdStream:oe||void 0,availablePackages:zs,history:Nt,onSelectPackage:Rn,onGenerateNew:Mt,onDeletePackage:Wa,onImportPackage:Wi,onBack:()=>{le.play("back"),e("DASHBOARD")},showToast:tt,confirmEnabled:p.confirmActions,onRefresh:ta,isLoading:et}),n==="SESSION"&&(t==="SKRIPSI"?u.jsx(X9,{result:xe,feature:be,onBack:()=>{le.play("back"),e("DASHBOARD")}}):t==="INTERVIEW"?u.jsx(Z9,{questions:ne,onComplete:ge=>bs(ge)}):t==="GENERAL"&&B==="SPACED_REPETITION"?u.jsx(e8,{flashcards:pe,onFinish:()=>{le.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&B==="MIND_MAP"?u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col transition-colors duration-300",children:[" ",u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[" ",u.jsxs("button",{onClick:()=>{le.play("back"),e("DASHBOARD")},className:"flex items-center text-slate-500 dark:text-slate-400",children:[u.jsx(vt,{size:18})," Kembali"]})," ",u.jsx("h2",{className:"font-bold text-slate-800 dark:text-white",children:"Mind Mapping"})," "]})," ",u.jsx(d9,{data:J})," "]}):t==="GENERAL"&&B==="FEYNMAN"?u.jsx(t8,{topic:(N==null?void 0:N.content)||"",onFinish:()=>{le.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&B==="SQ3R"?u.jsx(n8,{topic:(N==null?void 0:N.content)||"",onFinish:()=>{le.play("back"),e("DASHBOARD")}}):u.jsx(E9,{mode:ee,questions:ne,drillContent:K,onComplete:(ge,Pe,Ke)=>bs(ge,Pe,Ke),isSkdSimulation:ee===qe.SIMULATION&&t==="SKD",isUtbkSimulation:ee===qe.SIMULATION&&t==="UTBK",category:t,showToast:tt})),n==="TES_KORAN"&&u.jsx(C9,{onBack:()=>e("DASHBOARD"),onComplete:ge=>bs([],ge)}),n==="TES_KECERMATAN"&&u.jsx(I9,{initialMode:O,onBack:()=>e("DASHBOARD"),onComplete:ge=>bs([],ge)}),n==="BENCHMARK"&&u.jsx(Y9,{onBack:()=>e("HOME"),onComplete:ge=>bs([],ge),username:(T==null?void 0:T.username)||"",history:Nt}),n==="RESULTS"&&u.jsx(x9,{answers:ce,questions:ne,onHome:()=>{le.play("back"),e("HOME")},onRetry:()=>{le.play("click"),na(ee)},category:t,details:(Fs=Nt[0])==null?void 0:Fs.details}),n==="HISTORY"&&u.jsx(b9,{history:Nt,onBack:()=>{le.play("back"),e("HOME")},onReview:ge=>{le.play("click"),Sn(ge),e("REVIEW")},username:(T==null?void 0:T.username)||"",onExport:()=>{},onImport:()=>{},isDarkMode:p.darkMode,onDelete:Tl}),n==="REVIEW"&&u.jsx(_9,{item:Vt,onBack:()=>{le.play("back"),e("HISTORY")}}),n==="COLORBLIND"&&u.jsx(R9,{onBack:()=>{le.play("back"),e("HOME")},onComplete:ge=>bs([],ge)})]})]})}const AN=document.getElementById("root");if(!AN)throw new Error("Could not find root element to mount to");const r8=hC.createRoot(AN);r8.render(u.jsx(rC.StrictMode,{children:u.jsx(i8,{})}));
